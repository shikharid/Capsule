;/* module-key = 'com.atlassian.stash.stash-web-plugin:time', location = '/static/widget/date/time.soy' */
// This file was automatically generated from time.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace stash.widget.date.
 */

if (typeof stash == 'undefined') { var stash = {}; }
if (typeof stash.widget == 'undefined') { stash.widget = {}; }
if (typeof stash.widget.date == 'undefined') { stash.widget.date = {}; }


stash.widget.date.shortAge = function(opt_data, opt_ignored) {
  return '' + stash.widget.date.time({date: opt_data.date, title: opt_data.title, extraClasses: opt_data.extraClasses, type: 'shortAge'});
};
if (goog.DEBUG) {
  stash.widget.date.shortAge.soyTemplateName = 'stash.widget.date.shortAge';
}


stash.widget.date.short = function(opt_data, opt_ignored) {
  return '' + stash.widget.date.time({date: opt_data.date, title: opt_data.title, extraClasses: opt_data.extraClasses, type: 'short'});
};
if (goog.DEBUG) {
  stash.widget.date.short.soyTemplateName = 'stash.widget.date.short';
}


stash.widget.date.time = function(opt_data, opt_ignored) {
  return '' + ((opt_data.date) ? '<time title="' + soy.$$escapeHtml(opt_data.title ? opt_data.title : require('util/time').format(opt_data.date, 'full')) + '" datetime="' + soy.$$escapeHtml(require('util/time').format(opt_data.date, 'timestamp')) + '"' + ((opt_data.extraClasses) ? ' class="' + soy.$$escapeHtml(opt_data.extraClasses) + '"' : '') + '>' + soy.$$escapeHtml(require('util/time').format(opt_data.date, opt_data.type)) + '</time>' : '<time' + ((opt_data.extraClasses) ? ' class="' + soy.$$escapeHtml(opt_data.extraClasses) + '"' : '') + '>' + soy.$$escapeHtml("Unknown Date") + '</time>');
};
if (goog.DEBUG) {
  stash.widget.date.time.soyTemplateName = 'stash.widget.date.time';
}
;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:time', location = '/static/widget/date/deprecated-time.soy' */
// This file was automatically generated from deprecated-time.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace widget.date.
 */

if (typeof widget == 'undefined') { var widget = {}; }
if (typeof widget.date == 'undefined') { widget.date = {}; }


widget.date.shortAge = function(opt_data, opt_ignored) {
  return '' + widget.date.time({date: opt_data.date, title: opt_data.title, extraClasses: opt_data.extraClasses, type: 'shortAge'});
};
if (goog.DEBUG) {
  widget.date.shortAge.soyTemplateName = 'widget.date.shortAge';
}


widget.date.short = function(opt_data, opt_ignored) {
  return '' + widget.date.time({date: opt_data.date, title: opt_data.title, extraClasses: opt_data.extraClasses, type: 'short'});
};
if (goog.DEBUG) {
  widget.date.short.soyTemplateName = 'widget.date.short';
}


widget.date.time = function(opt_data, opt_ignored) {
  return '' + ((opt_data.date) ? '<time title="' + soy.$$escapeHtml(opt_data.title ? opt_data.title : require('util/time').format(opt_data.date, 'full')) + '" datetime="' + soy.$$escapeHtml(require('util/time').format(opt_data.date, 'timestamp')) + '" class="deprecated' + ((opt_data.extraClasses) ? ' ' + soy.$$escapeHtml(opt_data.extraClasses) : '') + '">' + soy.$$escapeHtml(require('util/time').format(opt_data.date, opt_data.type)) + '</time>' : '<time class="deprecated' + ((opt_data.extraClasses) ? ' ' + soy.$$escapeHtml(opt_data.extraClasses) : '') + '">' + soy.$$escapeHtml("Unknown Date") + '</time>');
};
if (goog.DEBUG) {
  widget.date.time.soyTemplateName = 'widget.date.time';
}
;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:focus-message', location = '/static/widget/focus-message/focus-message.soy' */
// This file was automatically generated from focus-message.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace stash.widget.focusMessage.
 */

if (typeof stash == 'undefined') { var stash = {}; }
if (typeof stash.widget == 'undefined') { stash.widget = {}; }
if (typeof stash.widget.focusMessage == 'undefined') { stash.widget.focusMessage = {}; }


stash.widget.focusMessage.message = function(opt_data, opt_ignored) {
  return '<div class="focus-message' + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '>' + ((opt_data.iconClass) ? '<div class="focus-message-icon aui-icon' + ((opt_data.iconClass) ? ' ' + soy.$$escapeHtml(opt_data.iconClass) : '') + '">' + soy.$$escapeHtml(opt_data.accessibilityText ? opt_data.accessibilityText : '') + '</div>' : '') + '<h2>' + soy.$$escapeHtml(opt_data.title) + '</h2>' + ((opt_data.text) ? '<p>' + soy.$$escapeHtml(opt_data.text) + '</p>' : '') + ((opt_data.content) ? soy.$$filterNoAutoescape(opt_data.content) : '') + '</div>';
};
if (goog.DEBUG) {
  stash.widget.focusMessage.message.soyTemplateName = 'stash.widget.focusMessage.message';
}


stash.widget.focusMessage.error = function(opt_data, opt_ignored) {
  return '' + stash.widget.focusMessage.message({title: opt_data.title, text: opt_data.text, content: opt_data.content, extraClasses: opt_data.extraClasses, iconClass: 'icon-skull'});
};
if (goog.DEBUG) {
  stash.widget.focusMessage.error.soyTemplateName = 'stash.widget.focusMessage.error';
}
;
;/* module-key = 'com.atlassian.stash.stash-build-integration:build-status-common-resources', location = '/static/common/build-status-common.soy' */
// This file was automatically generated from build-status-common.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace stash.build.status.
 */

if (typeof stash == 'undefined') { var stash = {}; }
if (typeof stash.build == 'undefined') { stash.build = {}; }
if (typeof stash.build.status == 'undefined') { stash.build.status = {}; }


stash.build.status.summaryIcon = function(opt_data, opt_ignored) {
  return '' + ((opt_data.stats.failed > 0) ? stash.build.status.failedBuildIcon({clickable: true, title: '' + stash.build.status.title(opt_data)}) : (opt_data.stats.inProgress > 0) ? stash.build.status.inProgressBuildIcon({clickable: true, title: '' + stash.build.status.title(opt_data)}) : (opt_data.stats.successful > 0) ? stash.build.status.successfulBuildIcon({clickable: true, title: '' + stash.build.status.title(opt_data)}) : '');
};
if (goog.DEBUG) {
  stash.build.status.summaryIcon.soyTemplateName = 'stash.build.status.summaryIcon';
}


stash.build.status.title = function(opt_data, opt_ignored) {
  return '' + ((opt_data.stats.failed >= 1) ? soy.$$escapeHtml(AJS.format("{0} {0,choice,1#build|1\x3cbuilds} failed",opt_data.stats.failed)) : (opt_data.stats.inProgress >= 1) ? soy.$$escapeHtml(AJS.format("{0} {0,choice,1#build|1\x3cbuilds} in progress",opt_data.stats.inProgress)) : (opt_data.stats.successful >= 1) ? soy.$$escapeHtml(AJS.format("{0} {0,choice,1#build|1\x3cbuilds} passed",opt_data.stats.successful)) : '');
};
if (goog.DEBUG) {
  stash.build.status.title.soyTemplateName = 'stash.build.status.title';
}


stash.build.status.dialogList = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.statuses.length == 0) {
    output += stash.widget.focusMessage.message({title: "None found", text: "There are no build results available for this changeset."});
  } else {
    output += '<ul class="build-status-list">';
    var statusList38 = opt_data.statuses;
    var statusListLen38 = statusList38.length;
    for (var statusIndex38 = 0; statusIndex38 < statusListLen38; statusIndex38++) {
      var statusData38 = statusList38[statusIndex38];
      output += '<li>';
      switch (statusData38.state) {
        case 'SUCCESSFUL':
          output += stash.build.status.successfulBuildIcon({content: "Build successful", title: "Build successful"});
          break;
        case 'FAILED':
          output += stash.build.status.failedBuildIcon({content: "Build failed", title: "Build failed"});
          break;
        case 'INPROGRESS':
          output += stash.build.status.inProgressBuildIcon({content: "Build in progress", title: "Build in progress"});
          break;
      }
      output += '<div class="summary"><span class="name"><a href="' + soy.$$escapeHtml(statusData38.url) + '" target="_blank" title="' + stash.build.status.buildName({status: statusData38}) + '">' + stash.build.status.buildName({status: statusData38}) + '</a></span>' + stash.widget.date.shortAge({date: statusData38.dateAdded, extraClasses: 'date-added'}) + '</div>' + stash.build.status.buildDescription({status: statusData38}) + '</li>';
    }
    output += '</ul>';
  }
  return output;
};
if (goog.DEBUG) {
  stash.build.status.dialogList.soyTemplateName = 'stash.build.status.dialogList';
}


stash.build.status.buildLabel = function(opt_data, opt_ignored) {
  var output = '';
  switch (opt_data.status) {
    case 'FAILED':
      output += soy.$$escapeHtml(AJS.format("{0,choice,1#build|1\x3cbuilds} failed",opt_data.count));
      break;
    case 'INPROGRESS':
      output += soy.$$escapeHtml(AJS.format("{0,choice,1#build|1\x3cbuilds} in progress",opt_data.count));
      break;
    case 'SUCCESSFUL':
      output += soy.$$escapeHtml(AJS.format("{0,choice,1#build|1\x3cbuilds}",opt_data.count));
      break;
  }
  return output;
};
if (goog.DEBUG) {
  stash.build.status.buildLabel.soyTemplateName = 'stash.build.status.buildLabel';
}


stash.build.status.successfulBuildIcon = function(opt_data, opt_ignored) {
  return '' + stash.build.status.buildIcon(soy.$$augmentMap(opt_data, {iconClasses: 'aui-iconfont-approve successful-build-icon'}));
};
if (goog.DEBUG) {
  stash.build.status.successfulBuildIcon.soyTemplateName = 'stash.build.status.successfulBuildIcon';
}


stash.build.status.failedBuildIcon = function(opt_data, opt_ignored) {
  return '' + stash.build.status.buildIcon(soy.$$augmentMap(opt_data, {iconClasses: 'aui-iconfont-error failed-build-icon'}));
};
if (goog.DEBUG) {
  stash.build.status.failedBuildIcon.soyTemplateName = 'stash.build.status.failedBuildIcon';
}


stash.build.status.inProgressBuildIcon = function(opt_data, opt_ignored) {
  return '' + stash.build.status.buildIcon(soy.$$augmentMap(opt_data, {iconClasses: 'aui-iconfont-time inprogress-build-icon'}));
};
if (goog.DEBUG) {
  stash.build.status.inProgressBuildIcon.soyTemplateName = 'stash.build.status.inProgressBuildIcon';
}


stash.build.status.buildIcon = function(opt_data, opt_ignored) {
  return '<' + soy.$$filterNoAutoescape(opt_data.clickable ? 'a href="#"' : 'span') + ' class="aui-icon aui-icon-small build-icon ' + soy.$$escapeHtml(opt_data.iconClasses) + '"' + ((opt_data.title) ? ' title="' + soy.$$escapeHtml(opt_data.title) + '"' : '') + '>' + ((opt_data.content) ? soy.$$escapeHtml(opt_data.content) : '') + '</' + soy.$$filterNoAutoescape(opt_data.clickable ? 'a' : 'span') + '>';
};
if (goog.DEBUG) {
  stash.build.status.buildIcon.soyTemplateName = 'stash.build.status.buildIcon';
}


stash.build.status.buildName = function(opt_data, opt_ignored) {
  return '' + soy.$$escapeHtml(opt_data.status.name ? opt_data.status.name : opt_data.status.key);
};
if (goog.DEBUG) {
  stash.build.status.buildName.soyTemplateName = 'stash.build.status.buildName';
}


stash.build.status.buildDescription = function(opt_data, opt_ignored) {
  return '<div class="description" title="' + soy.$$escapeHtml(opt_data.status.description ? opt_data.status.description : '') + '">' + soy.$$escapeHtml(opt_data.status.description ? opt_data.status.description : '') + '</div>';
};
if (goog.DEBUG) {
  stash.build.status.buildDescription.soyTemplateName = 'stash.build.status.buildDescription';
}


stash.build.status.placeholder = function(opt_data, opt_ignored) {
  return '<div id="build-status-placeholder" class="hidden"></div>';
};
if (goog.DEBUG) {
  stash.build.status.placeholder.soyTemplateName = 'stash.build.status.placeholder';
}


stash.build.status.stats = function(opt_data, opt_ignored) {
  return '' + stash.build.status.statsPanel({stats: opt_data.stats, build: opt_data.stats.results && opt_data.stats.results.length == 1 ? opt_data.stats.results[0] : null});
};
if (goog.DEBUG) {
  stash.build.status.stats.soyTemplateName = 'stash.build.status.stats';
}


stash.build.status.statsPanel = function(opt_data, opt_ignored) {
  return '' + ((opt_data.stats.failed > 0) ? stash.build.status.summary({build: opt_data.build, buildIconContent: '' + stash.build.status.failedBuildIcon({clickable: true}), count: opt_data.stats.failed, status: 'FAILED'}) : (opt_data.stats.inProgress > 0) ? stash.build.status.summary({build: opt_data.build, buildIconContent: '' + stash.build.status.inProgressBuildIcon({clickable: true}), count: opt_data.stats.inProgress, status: 'INPROGRESS'}) : (opt_data.stats.successful > 0) ? stash.build.status.summary({build: opt_data.build, buildIconContent: '' + stash.build.status.successfulBuildIcon({clickable: true}), count: opt_data.stats.successful, status: 'SUCCESSFUL'}) : '');
};
if (goog.DEBUG) {
  stash.build.status.statsPanel.soyTemplateName = 'stash.build.status.statsPanel';
}


stash.build.status.summary = function(opt_data, opt_ignored) {
  return '' + stash.widget.summaryPanel.relatedEntitiesWebPanel({iconClass: 'aui-icon-small aui-iconfont-build', iconText: "Build status", iconTooltip: "Builds", linkHref: opt_data.build ? opt_data.build.url : null, linkExtraAttributes: opt_data.build ? 'data-single-build=true' : null, linkText: '' + stash.build.status.buildLabel(opt_data), count: opt_data.count, extraClasses: 'build-status-summary', extraContent: '' + soy.$$filterNoAutoescape(opt_data.buildIconContent)});
};
if (goog.DEBUG) {
  stash.build.status.summary.soyTemplateName = 'stash.build.status.summary';
}
;
;/* module-key = 'com.atlassian.stash.stash-build-integration:build-status-common-resources', location = '/static/common/build-status-dialog.js' */
define("build/status/dialog",["aui","jquery","util/ajax","util/dom-event"],function(j,d,i,b){var k="build-status-dialog";var e="build-status-dialog-panel";function n(){this._instance=null;this._xhr=null}n.prototype.bindTo=function(p,s,q,r){var o=this;d(p).on(q,s,function(t){if(!b.openInSameTab(t)&&!!d(this).data("single-build")){return}t.preventDefault();o.showFor(r(d(this)))})};n.prototype.showFor=function(o){if(this._instance){this._instance.remove()}var p=d('<div class="spinner"></div>');this._instance=l(this,p);this._instance.show();p.show().spin("large");h(this,o).always(function(){p.spinStop().remove()})};function c(o){if(o._instance){o._instance.hide()}}function m(o){if(o._xhr){o._xhr.abort()}}function l(o,p){var q=new j.Dialog({closeOnOutsideClick:true,id:k,height:240,width:600,keypressListener:function(r){if(r.keyCode===j.keyCode.ESCAPE){c(o)}}}).addHeader("Builds").addPanel("",p,e).addLink("Close",function(){c(o)});d(document).one("hideLayer",function(){f(o)});return q}function h(p,o){p._xhr=i.rest({url:g(o)}).fail(function(){c(p)}).done(function(q){a(p,stash.build.status.dialogList({statuses:q.values}))}).always(function(){p._xhr=null});return p._xhr}function g(o){return j.contextPath()+"/rest/build-status/latest/commits/"+encodeURIComponent(o)}function f(o){m(o);if(o._instance){o._instance.remove();o._instance=null}}function a(o,p){o._instance.getCurrentPanel().html(p);o._instance.updateHeight()}return n});;
;/* module-key = 'com.atlassian.stash.stash-build-integration:build-status-common-resources', location = '/static/common/build-status-common.js' */
define("build/status/build-status",["aui","build/status/dialog","jquery","util/ajax","exports"],function(d,a,h,g,c){var e=new a();var b=false;function f(i){return d.contextPath()+"/rest/build-status/latest/commits/stats/"+encodeURIComponent(i)}c.fetchContext=function(i){c.queryBuildStatusAndDecorate(i,"#build-status-placeholder",".build-status-summary a",stash.build.status.stats)};c.queryBuildStatusAndDecorate=function(j,m,n,k,o){var i=j.csid;var l=j.includeUnique;g.rest({url:f(i),data:{includeUnique:!!l},statusCode:{"*":function(){return false}}}).done(function(q){var p=h(m);if(q.failed||q.inProgress||q.successful){b=true;p.replaceWith(k({stats:q}));e.bindTo(n,"","click",function(){return i});if(o){o(p)}}else{p.remove()}});return j};c.showDialogIfHasBuildStatus=function(i){if(b){e.showFor(i)}}});;
;/* module-key = 'com.atlassian.stash.stash-build-integration:build-status-commit-list', location = '/static/commit-list/build-status-commit-list.js' */
define("build/status/commit-list",["aui","build/status/dialog","jquery","util/ajax","util/events","model/page-state"],function(l,o,d,j,n,k){var a=".build-status-commit-list-col";var f=".commits-table thead .build-status-commit-list-col";var m=".build-icon";var c=new o();var i="changesetid";var h="data-"+i;function g(){return l.contextPath()+"/rest/build-status/latest/commits/stats"}function e(r,q){var p=false;q.each(function(){var s=d(this);var v=s.find(a);var t=s.data(i);var u=r[t];if(u){v.html(stash.build.status.summaryIcon({stats:u})).find(m).tooltip({gravity:"ne",html:false});p=true}});if(p){d(f).show()}}function b(p){return p.map(function(){return d(this).data(i)}).toArray()}c.bindTo(d(document),".build-status-commit-list-col .build-icon","click",function(p){return d(p).closest("["+h+"]").data(i)});n.on("stash.widget.commitsTable.contentAdded",function(q){if(!k.getCurrentUser()){return}var p=q.values;j.rest({url:g(),type:"POST",data:b(p),statusCode:{"*":function(){return false}}}).done(function(r){e(r,p)})})});require("build/status/commit-list");;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:button-trigger', location = '/static/widget/button-trigger/button-trigger.js' */
define("widget/button-trigger",["jquery","lodash"],function(c,d){function b(a,b){this._opts=c.extend({},e,b);this._$trigger=c(a).on(this._opts.triggerEvent,d.bind(this.triggerClicked,this))}var e={triggerEvent:"click",stopEvent:!0,triggerHandler:function(a,b){throw Error("triggerHandler must be implemented");}};b.prototype.setTriggerDisabled=function(a){a=void 0===a?!0:!!a;this._$trigger.prop("disabled",a).attr("aria-disabled",a)};b.prototype.isTriggerDisabled=function(){return"true"===this._$trigger.attr("aria-disabled")};
b.prototype.setTriggerActive=function(a){this._$trigger.attr("aria-pressed",void 0===a?!0:!!a)};b.prototype.isTriggerActive=function(){return"true"===this._$trigger.attr("aria-pressed")};b.prototype.triggerClicked=function(a){var b=this.isTriggerActive();this.isTriggerDisabled()||this._opts.triggerHandler.apply(this,[!b].concat(d.toArray(arguments)));if(this._opts.stopEvent)return a&&a.stopPropagation&&a.stopPropagation(),!1};return b});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:approve', location = '/static/widget/approve/approve.js' */
define("widget/approve","aui jquery util/ajax util/deprecation util/events model/page-state widget/button-trigger widget/keyboard-shortcuts".split(" "),function(g,f,m,n,c,d,h,l){function k(a,f){this._opts={url:f,triggerHandler:this.buttonClicked};h.call(this,a,this._opts);var e=this,b=function(a){d.getCurrentUser()&&a.user.name===d.getCurrentUser().getName()&&a.pullRequestId===d.getPullRequest().getId()&&(e.setTriggerActive(a.approved),a=a.approved?"Remove approval of this pull request":
"Approve this pull request",e._$trigger.attr("title",a),l.addTooltip(e._$trigger,"a"))};c.on("stash.widget.approve-button.adding",b);c.on("stash.widget.approve-button.removing",b);c.on("stash.widget.approve-button.add.failed",b);c.on("stash.widget.approve-button.remove.failed",b);l.addTooltip(e._$trigger,"a")}f.extend(k.prototype,h.prototype);k.prototype.buttonClicked=function(a,k,e){function b(a,b){c.trigger(a,h,f.extend({approved:b,pullRequestId:d.getPullRequest().getId(),
user:n.jsonAsBrace(d.getCurrentUser(),"3.2","4.0")},e))}var h=this;b(a?"stash.widget.approve-button.adding":"stash.widget.approve-button.removing",a);m.rest({url:h._opts.url,type:a?"POST":"DELETE",statusCode:{401:function(a,b,e,c,d){return f.extend({},d,{title:"Could not approve pull request.",message:"You do not have permission to approve this pull request.",fallbackUrl:!1,shouldReload:!0})},409:function(a,b,d,e,c){return f.extend({},c,{title:"Could not approve pull request.",
fallbackUrl:!1,shouldReload:!0})}}}).done(function(){b(a?"stash.widget.approve-button.added":"stash.widget.approve-button.removed",a)}).fail(function(){b(a?"stash.widget.approve-button.add.failed":"stash.widget.approve-button.remove.failed",!a)})};return k});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:user-link', location = '/static/widget/user/user-link.soy' */
// This file was automatically generated from user-link.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace stash.widget.
 */

if (typeof stash == 'undefined') { var stash = {}; }
if (typeof stash.widget == 'undefined') { stash.widget = {}; }


stash.widget.userLink = function(opt_data, opt_ignored) {
  var output = '';
  var displayName__soy3 = opt_data.user.displayName || opt_data.user.name;
  output += (opt_data.href || opt_data.user.type == 'NORMAL' && opt_data.user.slug && !!(require('model/page-state').getCurrentUser())) ? '<a href="' + soy.$$escapeHtml(opt_data.href ? opt_data.href : require('stash/api/util/navbuilder').user(opt_data.user).build()) + '" ' + ((opt_data.extraClasses) ? 'class="' + soy.$$escapeHtml(opt_data.extraClasses) + '"' : '') + ((! opt_data.skipTitle) ? 'title="' + soy.$$escapeHtml(displayName__soy3) + '"' : '') + '>' + soy.$$escapeHtml(soy.$$truncate(displayName__soy3, 100, true)) + '</a>' : '<span' + ((opt_data.extraClasses) ? ' class="' + soy.$$escapeHtml(opt_data.extraClasses) + '"' : '') + ((! opt_data.skipTitle) ? ' title="' + soy.$$escapeHtml(displayName__soy3) + '"' : '') + '>' + soy.$$escapeHtml(soy.$$truncate(displayName__soy3, 100, true)) + '</span>';
  return output;
};
if (goog.DEBUG) {
  stash.widget.userLink.soyTemplateName = 'stash.widget.userLink';
}
;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:avatar', location = '/static/widget/avatar/avatar.soy' */
// This file was automatically generated from avatar.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace stash.widget.
 */

if (typeof stash == 'undefined') { var stash = {}; }
if (typeof stash.widget == 'undefined') { stash.widget = {}; }


stash.widget.avatar = function(opt_data, opt_ignored) {
  return '' + aui.avatar.avatar({size: opt_data.size, avatarImageUrl: require('stash/api/util/navbuilder')._avatarUrl(opt_data.person, ({XSMALL:32,SMALL:48,MEDIUM:64,LARGE:96,XLARGE:128,XXLARGE:192,XXXLARGE:256})[opt_data.size.toUpperCase()]).build(), accessibilityText: opt_data.person.displayName || opt_data.person.name, title: opt_data.tooltip, badgeContent: opt_data.badgeContent, extraClasses: 'user-avatar' + (opt_data.hideBadge ? ' badge-hidden' : '') + (opt_data.extraClasses ? ' ' + opt_data.extraClasses : ''), imageClasses: opt_data.imageClasses, extraAttributes: {'data-username': opt_data.person.name}, id: opt_data.id});
};
if (goog.DEBUG) {
  stash.widget.avatar.soyTemplateName = 'stash.widget.avatar';
}


stash.widget.avatarWithName = function(opt_data, opt_ignored) {
  var output = '';
  var personName__soy14 = opt_data.person.displayName || opt_data.person.name;
  output += '<div class="avatar-with-name' + ((opt_data.extraClasses) ? ' ' + soy.$$escapeHtml(opt_data.extraClasses) : '') + '" title="' + soy.$$escapeHtml(personName__soy14) + '">' + stash.widget.avatar({size: opt_data.size, person: opt_data.person, imageClasses: opt_data.imageClasses, extraClasses: opt_data.avatarClasses, badgeContent: opt_data.badgeContent, hideBadge: opt_data.hideBadge, id: opt_data.id}) + ((opt_data.link) ? stash.widget.userLink({user: opt_data.person, href: opt_data.href, extraClasses: opt_data.linkExtraClasses, skipTitle: true}) : soy.$$escapeHtml(personName__soy14)) + '</div>';
  return output;
};
if (goog.DEBUG) {
  stash.widget.avatarWithName.soyTemplateName = 'stash.widget.avatarWithName';
}


stash.widget.avatarWithNameAndEmail = function(opt_data, opt_ignored) {
  return stash.widget.avatarWithName(opt_data) + '<span class="email-address" title="' + soy.$$escapeHtml(opt_data.person.emailAddress) + '">' + soy.$$escapeHtml(opt_data.person.emailAddress) + '</span>';
};
if (goog.DEBUG) {
  stash.widget.avatarWithNameAndEmail.soyTemplateName = 'stash.widget.avatarWithNameAndEmail';
}


stash.widget.avatarSizeInPx = function(opt_data, opt_ignored) {
  return '' + soy.$$escapeHtml(({XSMALL:32,SMALL:48,MEDIUM:64,LARGE:96,XLARGE:128,XXLARGE:192,XXXLARGE:256})[opt_data.size.toUpperCase()]) + ((opt_data.showPx) ? 'px' : '');
};
if (goog.DEBUG) {
  stash.widget.avatarSizeInPx.soyTemplateName = 'stash.widget.avatarSizeInPx';
}


stash.widget.avatarWithBadge = function(opt_data, opt_ignored) {
  return '' + stash.widget.avatar({size: opt_data.size, person: opt_data.person, tooltip: opt_data.tooltip, imageClasses: opt_data.imageClasses, extraClasses: opt_data.extraClasses, id: opt_data.id, hideBadge: opt_data.hideBadge, badgeContent: '<span class="badge' + soy.$$escapeHtml(opt_data.badgeClasses ? ' ' + opt_data.badgeClasses : '') + '">' + soy.$$escapeHtml(opt_data.badgeText) + '</span>'});
};
if (goog.DEBUG) {
  stash.widget.avatarWithBadge.soyTemplateName = 'stash.widget.avatarWithBadge';
}


stash.widget.avatarWithNameAndBadge = function(opt_data, opt_ignored) {
  return '' + stash.widget.avatarWithName({size: opt_data.size, person: opt_data.person, extraClasses: opt_data.extraClasses, avatarClasses: opt_data.avatarClasses, imageClasses: opt_data.imageClasses, id: opt_data.id, hideBadge: opt_data.hideBadge, badgeContent: '<span class="badge' + soy.$$escapeHtml(opt_data.badgeClasses ? ' ' + opt_data.badgeClasses : '') + '">' + soy.$$escapeHtml(opt_data.badgeText) + '</span>'});
};
if (goog.DEBUG) {
  stash.widget.avatarWithNameAndBadge.soyTemplateName = 'stash.widget.avatarWithNameAndBadge';
}
;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:avatar', location = '/static/widget/avatar/group-avatar.soy' */
// This file was automatically generated from group-avatar.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace stash.widget.
 */

if (typeof stash == 'undefined') { var stash = {}; }
if (typeof stash.widget == 'undefined') { stash.widget = {}; }


stash.widget.groupAvatar = function(opt_data, opt_ignored) {
  return '<span class="aui-avatar aui-avatar-' + soy.$$escapeHtml(opt_data.size) + ' group-avatar' + soy.$$escapeHtml(opt_data.extraClasses ? ' ' + opt_data.extraClasses : '') + '" data-groupname="' + soy.$$escapeHtml(opt_data.name) + '"></span>';
};
if (goog.DEBUG) {
  stash.widget.groupAvatar.soyTemplateName = 'stash.widget.groupAvatar';
}


stash.widget.groupAvatarWithName = function(opt_data, opt_ignored) {
  return '<span title="' + soy.$$escapeHtml(opt_data.name) + '"' + ((opt_data.extraClasses) ? ' class="' + soy.$$escapeHtml(opt_data.extraClasses) + '"' : '') + '><span class="aui-avatar aui-avatar-' + soy.$$escapeHtml(opt_data.size) + ' group-avatar' + soy.$$escapeHtml(opt_data.avatarClasses ? ' ' + opt_data.avatarClasses : '') + '" data-groupname="' + soy.$$escapeHtml(opt_data.name) + '"></span>' + soy.$$escapeHtml(opt_data.name) + '</span>';
};
if (goog.DEBUG) {
  stash.widget.groupAvatarWithName.soyTemplateName = 'stash.widget.groupAvatarWithName';
}
;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:overflowing-list', location = '/static/widget/overflowing-list.js' */
define("widget/overflowing-list",["jquery"],function(d){function g(a,b,c){this._$container=d(a);this._opts=d.extend({overflowMenuId:this._$container.attr("data-overflow-menu-id")},g.defaults,c);this._items=Array.prototype.slice.call(b)}function n(a,b){a.find("\x3e .aui-dropdown2-trigger .aui-badge").text(b)}function p(a,b,c){d(aui.dropdown2.trigger({menu:{id:c},content:'\x3cdiv class\x3d"extras-dropdown-trigger"\x3e'+aui.badges.badge({text:"?"})+"\x3c/div\x3e"}).appendTo(a));return d(aui.dropdown2.contents({id:c,
extraClasses:b,content:'\x3cul class\x3d"aui-list-truncate"\x3e\x3c/ul\x3e'})).appendTo(a).children("ul")}g.defaults={maxOpen:5,itemSelector:void 0,overflowMenuClass:"aui-style-default aui-dropdown2-tailed",getItemHtml:function(a,b){return"\x3cspan\x3e"+("string"===typeof a?a:JSON.stringify(a))+"\x3c/span\x3e"},compareFn:function(a,b){return-1}};g.prototype.addItem=function(a){var b=this._opts.maxOpen,c=this._opts.compareFn,k=this._opts.getItemHtml,g=this._opts.overflowMenuClass,m=this._opts.overflowMenuId,
e=this._$container,h;h=m?d("#"+m+" \x3e ul"):e.children(".aui-dropdown2:last \x3e ul");var l=h.find("li").children(this._opts.itemSelector),l=e.children(this._opts.itemSelector).not(".aui-dropdown2-trigger, .aui-dropdown2").add(l),q=!1,f,r=this._items.length;for(f=0;f<r;f++)if(0>c(a,this._items[f])){f>=b?(c=d(k(a,!0)),c.wrap("\x3cli/\x3e").parent().insertBefore(l.eq(f).parent()),n(e,this._items.length+1-b)):(c=d(k(a,!1)),c.insertBefore(l.eq(f)).hide().fadeIn("fast"),this._items.length>=b&&(l.eq(b-
1).remove(),(h.length?h:p(e,g,m)).prepend(d("\x3cli/\x3e").append(k(this._items[b-1],!0))),n(e,this._items.length+1-b)));this._items.splice(f,0,a);q=!0;break}q||(this._items.length>=b?((h.length?h:p(e,g,m)).append(d(k(a,!0)).wrap("\x3cli/\x3e").parent()),n(e,this._items.length+1-b)):(c=d(k(a,!1)),c.appendTo(e).hide().fadeIn("fast")),this._items.push(a))};return g});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:avatar-list', location = '/static/widget/avatar-list/avatar-list.soy' */
// This file was automatically generated from avatar-list.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace stash.widget.avatarList.
 */

if (typeof stash == 'undefined') { var stash = {}; }
if (typeof stash.widget == 'undefined') { stash.widget = {}; }
if (typeof stash.widget.avatarList == 'undefined') { stash.widget.avatarList = {}; }


stash.widget.avatarList.participantList = function(opt_data, opt_ignored) {
  var output = '';
  var sortedParticipants__soy3 = (function (participants) {    return new (require('model/participant-collection'))(participants).toJSON();}(opt_data.participants));
  var visibleCount__soy4 = ! opt_data.maxOpen || opt_data.participants.length <= opt_data.maxOpen ? opt_data.participants.length : opt_data.maxOpen - 1;
  var participantList5 = sortedParticipants__soy3;
  var participantListLen5 = participantList5.length;
  for (var participantIndex5 = 0; participantIndex5 < participantListLen5; participantIndex5++) {
    var participantData5 = participantList5[participantIndex5];
    output += (participantIndex5 < visibleCount__soy4) ? stash.widget.avatarList.participantAvatar({participant: participantData5, extraClasses: 'participant-item', avatarSize: opt_data.avatarSize, withName: false}) : '';
  }
  if (opt_data.participants.length > visibleCount__soy4) {
    output += aui.dropdown2.trigger({menu: {id: opt_data.menuId}, content: '<div class="extras-dropdown-trigger">' + aui.badges.badge({text: opt_data.participants.length - visibleCount__soy4}) + '</div>', showIcon: false, extraClasses: 'aui-dropdown2-trigger-arrowless ' + (opt_data.triggerClass ? opt_data.triggerClass : '')});
    var param26 = '<ul class="aui-list-truncate">';
    var participantList28 = sortedParticipants__soy3;
    var participantListLen28 = participantList28.length;
    for (var participantIndex28 = 0; participantIndex28 < participantListLen28; participantIndex28++) {
      var participantData28 = participantList28[participantIndex28];
      param26 += (participantIndex28 >= visibleCount__soy4) ? '<li>' + stash.widget.avatarList.participantAvatar({participant: participantData28, extraClasses: 'participant-item', avatarSize: opt_data.avatarSize, withName: true}) + '</li>' : '';
    }
    param26 += '</ul>';
    output += aui.dropdown2.contents({id: opt_data.menuId, content: param26, extraClasses: 'aui-dropdown2-tailed avatar-dropdown aui-style-default ' + (opt_data.menuClass ? opt_data.menuClass : ''), extraAttributes: {'data-aui-alignment': 'bottom right', 'data-aui-alignment-static': true}});
  }
  return output;
};
if (goog.DEBUG) {
  stash.widget.avatarList.participantList.soyTemplateName = 'stash.widget.avatarList.participantList';
}


stash.widget.avatarList.participantAvatar = function(opt_data, opt_ignored) {
  return '' + ((opt_data.withName) ? stash.widget.avatarWithNameAndBadge({person: opt_data.participant.user, size: opt_data.avatarSize ? opt_data.avatarSize : 'small', avatarClasses: 'avatar-dimmed', extraClasses: opt_data.extraClasses, imageClasses: opt_data.imageClasses, badgeClasses: 'approved', badgeText: '\u2713', hideBadge: ! opt_data.participant.approved}) : stash.widget.avatarWithBadge({person: opt_data.participant.user, size: opt_data.avatarSize ? opt_data.avatarSize : 'small', extraClasses: 'avatar-dimmed avatar-tooltip' + (opt_data.extraClasses ? ' ' + opt_data.extraClasses : ''), imageClasses: opt_data.imageClasses, badgeClasses: 'approved', badgeText: '\u2713', hideBadge: ! opt_data.participant.approved, tooltip: opt_data.participant.user.displayName}));
};
if (goog.DEBUG) {
  stash.widget.avatarList.participantAvatar.soyTemplateName = 'stash.widget.avatarList.participantAvatar';
}
;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:avatar-list', location = '/static/widget/avatar-list/avatar-list.js' */
define("widget/avatar-list",["jquery","lodash","widget/overflowing-list"],function(b,d,f){function a(g,e,c){a.init();c=b.extend({},a.defaults,c);this._$list=b(g);c.getItemHtml=c.getAvatarHtml;this._overflowingList=new f(this._$list,e,c);var d=this;e.on("change:approved",function(a){d._$list.find(".user-avatar[data-username\x3d'"+a.getUser().getName()+"']").toggleClass("badge-hidden",!a.getApproved())})}a.defaults={itemSelector:".participant-item",overflowMenuClass:"aui-style-default aui-dropdown2-tailed avatar-dropdown",
getAvatarHtml:function(a,b){return stash.widget.avatarList.participantAvatar({participant:a.toJSON(),extraClasses:"participant-item",withName:b})}};a.prototype.contains=function(a){return d.any(this._overflowingList._items,function(b){return b.getUser().getName()===a})};a.prototype.addAvatar=function(a){this._overflowingList.addItem(a)};a.init=function(){b(".avatar-tooltip \x3e .aui-avatar-inner \x3e img").tooltip({hoverable:!1,offset:5,gravity:function(){return b.fn.tipsy.autoNS.call(this)+b.fn.tipsy.autoWE.call(this)},
delayIn:0,live:!0});a.init=b.noop};return a});;
;/* module-key = 'com.atlassian.stash.stash-bower-components-plugin:bacon', location = '/static/bower/bacon/dist/Bacon.js' */
(function(){var e,ra,J,Z,sa,ha,aa,ia,F,M,x,N,O,T,A,y,G,ta,K,B,C,ja,P,ua,va,U,wa,xa,ya,ka,za,Aa,Q,t,r,Ba,la,ba,Ca,Da,ca,z,da,u,R,ea,H,ma,na,V,I,n,oa,W,S,X,Y,fa,Ea,Fa,pa,Ga,h,qa,m,Ha={}.hasOwnProperty,k=[].slice,E=function(a,b){function d(){this.constructor=a}for(var c in b)Ha.call(b,c)&&(a[c]=b[c]);d.prototype=b.prototype;a.prototype=new d;a.__super__=b.prototype;return a},L=function(a,b){return function(){return a.apply(b,arguments)}};e={toString:function(){return"Bacon"},version:"0.7.42"};N=("undefined"!==
typeof global&&null!==global?global:this).Error;m={indexOf:Array.prototype.indexOf?function(a,b){return a.indexOf(b)}:function(a,b){var d,c,f,e;d=f=0;for(e=a.length;f<e;d=++f)if(c=a[d],b===c)return d;return-1},indexWhere:function(a,b){var d,c,f,e;d=f=0;for(e=a.length;f<e;d=++f)if(c=a[d],b(c))return d;return-1},head:function(a){return a[0]},always:function(a){return function(){return a}},negate:function(a){return function(b){return!a(b)}},empty:function(a){return 0===a.length},tail:function(a){return a.slice(1,
a.length)},filter:function(a,b){var d,c,f,e;d=[];f=0;for(e=b.length;f<e;f++)c=b[f],a(c)&&d.push(c);return d},map:function(a,b){var d,c,f,e;e=[];c=0;for(f=b.length;c<f;c++)d=b[c],e.push(a(d));return e},each:function(a,b){var d,c;for(d in a)c=a[d],b(d,c)},toArray:function(a){return z(a)?a:[a]},contains:function(a,b){return-1!==m.indexOf(a,b)},id:function(a){return a},last:function(a){return a[a.length-1]},all:function(a,b){var d,c,f;null==b&&(b=m.id);c=0;for(f=a.length;c<f;c++)if(d=a[c],!b(d))return!1;
return!0},any:function(a,b){var d,c,f;null==b&&(b=m.id);c=0;for(f=a.length;c<f;c++)if(d=a[c],b(d))return!0;return!1},without:function(a,b){return m.filter(function(b){return b!==a},b)},remove:function(a,b){var d;d=m.indexOf(b,a);if(0<=d)return b.splice(d,1)},fold:function(a,b,d){var c,f,e;f=0;for(e=a.length;f<e;f++)c=a[f],b=d(b,c);return b},flatMap:function(a,b){return m.fold(b,[],function(b,c){return b.concat(a(c))})},cached:function(a){var b;b=A;return function(){b===A&&(b=a(),a=void 0);return b}},
toString:function(a){var b,d,c;try{W++;if(null==a)return"undefined";if(u(a))return"function";if(z(a))return 5<W?"[..]":"["+m.map(m.toString,a).toString()+"]";if(null!=(null!=a?a.toString:void 0)&&a.toString!==Object.prototype.toString)return a.toString();if("object"===typeof a){if(5<W)return"{..}";var f;f=[];for(d in a)if(Ha.call(a,d)){try{c=a[d]}catch(e){c=b=e}f.push(m.toString(d)+":"+m.toString(c))}return"{"+f+"}"}return a}finally{W--}}};W=0;e._=m;e.scheduler={setTimeout:function(a,b){return setTimeout(a,
b)},setInterval:function(a,b){return setInterval(a,b)},clearInterval:function(a){return clearInterval(a)},now:function(){return(new Date).getTime()}};e.fromBinder=function(a,b){null==b&&(b=m.id);return new x(t(e,"fromBinder",a,b),function(d){var c,f,g,l;c=l=!1;f=function(){if(!l)return"undefined"!==typeof g&&null!==g?(g(),l=!0):c=!0};g=a(function(){var a,c,g,l,p;a=1<=arguments.length?k.call(arguments,0):[];g=b.apply(this,a);z(g)&&m.last(g)instanceof M||(g=[g]);c=e.more;l=0;for(p=g.length;l<p;l++)if(a=
g[l],c=d(a=fa(a)),c===e.noMore||a.isEnd()){f();break}return c});c&&f();return f})};e.$={};e.$.asEventStream=function(a,b,d){var c;u(b)&&(c=[b,void 0],d=c[0],b=c[1]);return h(this.selector||this,"asEventStream",a,e.fromBinder(function(d){return function(c){d.on(a,b,c);return function(){return d.off(a,b,c)}}}(this),d))};null!=(J="undefined"!==typeof jQuery&&null!==jQuery?jQuery:"undefined"!==typeof Zepto&&null!==Zepto?Zepto:void 0)&&(J.fn.asEventStream=e.$.asEventStream);e.fromEventTarget=function(a,
b,d){var c,f,g,l,D,v,w,q;c=null!=(g=null!=(l=null!=(D=a.addEventListener)?D:a.addListener)?l:a.bind)?g:a.on;f=null!=(v=null!=(w=null!=(q=a.removeEventListener)?q:a.removeListener)?w:a.unbind)?v:a.off;return h(e,"fromEventTarget",a,b,e.fromBinder(function(d){c.call(a,b,d);return function(){return f.call(a,b,d)}},d))};e.fromPromise=function(a,b){return h(e,"fromPromise",a,e.fromBinder(function(d){a.then(d,function(b){return d(F(b))});return function(){if(b)return"function"===typeof a.abort?a.abort():
void 0}},function(b){return[b,r()]}))};e.noMore=["\x3cno-more\x3e"];e.more=["\x3cmore\x3e"];e.later=function(a,b){return h(e,"later",a,b,e.fromPoll(a,function(){return[b,r()]}))};e.sequentially=function(a,b){var d;d=0;return h(e,"sequentially",a,b,e.fromPoll(a,function(){var a;a=b[d++];return d<b.length?a:d===b.length?[a,r()]:r()}))};e.repeatedly=function(a,b){var d;d=0;return h(e,"repeatedly",a,b,e.fromPoll(a,function(){return b[d++%b.length]}))};e.spy=function(a){return X.push(a)};X=[];S=function(a){var b,
d,c;if(X.length&&!S.running)try{for(S.running=!0,d=0,c=X.length;d<c;d++)b=X[d],b(a)}finally{delete S.running}};qa=function(a){return function(){var b,d,c,f;c=arguments[0];b=2<=arguments.length?k.call(arguments,1):[];"object"===typeof c&&b.length&&(d=c,f=b[0],c=function(){return d[f].apply(d,arguments)},b=b.slice(1));return a.apply(null,[c].concat(k.call(b)))}};J=function(a,b){return qa(function(){var d,c,f;c=arguments[0];d=2<=arguments.length?k.call(arguments,1):[];f=oa(b,[function(b,a){return c.apply(null,
k.call(b).concat([a]))}]);return h.apply(null,[e,a,c].concat(k.call(d),[e.combineAsArray(d).flatMap(f)]))})};e.fromCallback=J("fromCallback",function(){var a,b;b=arguments[0];a=2<=arguments.length?k.call(arguments,1):[];return e.fromBinder(function(d){ea(b,a)(d);return n},function(b){return[b,r()]})});e.fromNodeCallback=J("fromNodeCallback",function(){var a,b;b=arguments[0];a=2<=arguments.length?k.call(arguments,1):[];return e.fromBinder(function(d){ea(b,a)(d);return n},function(b,a){return b?[F(b),
r()]:[a,r()]})});e.fromPoll=function(a,b){return h(e,"fromPoll",a,b,e.fromBinder(function(b){var c;c=e.scheduler.setInterval(b,a);return function(){return e.scheduler.clearInterval(c)}},b))};e.interval=function(a,b){null==b&&(b={});return h(e,"interval",a,b,e.fromPoll(a,function(){return I(b)}))};e.constant=function(a){return new G(t(e,"constant",a),function(b){b(ca(a));b(r());return n})};e.never=function(){return new x(t(e,"never"),function(a){a(r());return n})};e.once=function(a){return new x(t(e,
"once",a),function(b){b(fa(a));b(r());return n})};e.fromArray=function(a){var b;ua(a);return a.length?(b=0,new x(t(e,"fromArray",a),function(d){var c,f,g;g=!1;f=e.more;c=function(){var l;if(f!==e.noMore&&!g&&(l=a[b++],f=d(fa(l)),f!==e.noMore))return b===a.length?d(r()):C.afterTransaction(c)};c();return function(){return g=!0}})):h(e,"fromArray",a,e.never())};e.mergeAll=function(){var a;a=1<=arguments.length?k.call(arguments,0):[];z(a[0])&&(a=a[0]);return a.length?new x(t.apply(null,[e,"mergeAll"].concat(k.call(a))),
function(b){var d,c;d=0;c=m.map(function(c){return function(g){return c.dispatcher.subscribe(function(c){if(c.isEnd())return d++,d===a.length?b(r()):e.more;c=b(c);c===e.noMore&&g();return c})}},a);return ka.apply(null,c)}):e.never()};e.zipAsArray=function(){var a;a=1<=arguments.length?k.call(arguments,0):[];z(a[0])&&(a=a[0]);return h.apply(null,[e,"zipAsArray"].concat(k.call(a),[e.zipWith(a,function(){return 1<=arguments.length?k.call(arguments,0):[]})]))};e.zipWith=function(){var a,b;a=arguments[0];
b=2<=arguments.length?k.call(arguments,1):[];u(a)||(a=[a,b[0]],b=a[0],a=a[1]);b=m.map(function(b){return b.toEventStream()},b);return h.apply(null,[e,"zipWith",a].concat(k.call(b),[e.when(b,a)]))};e.groupSimultaneous=function(){var a,b,d;d=1<=arguments.length?k.call(arguments,0):[];1===d.length&&z(d[0])&&(d=d[0]);b=function(){var b,f,e;e=[];b=0;for(f=d.length;b<f;b++)a=d[b],e.push(new ra(a));return e}();return h.apply(null,[e,"groupSimultaneous"].concat(k.call(d),[e.when(b,function(){return 1<=arguments.length?
k.call(arguments,0):[]})]))};e.combineAsArray=function(){var a,b,d,c,f,g;c=1<=arguments.length?k.call(arguments,0):[];1===c.length&&z(c[0])&&(c=c[0]);a=f=0;for(g=c.length;f<g;a=++f)d=c[a],R(d)||(c[a]=e.constant(d));return c.length?(a=function(){var a,d,f;f=[];a=0;for(d=c.length;a<d;a++)b=c[a],f.push(new B(b,!0));return f}(),h.apply(null,[e,"combineAsArray"].concat(k.call(c),[e.when(a,function(){return 1<=arguments.length?k.call(arguments,0):[]}).toProperty()]))):e.constant([])};e.onValues=function(){var a,
b;b=2<=arguments.length?k.call(arguments,0,a=arguments.length-1):(a=0,[]);a=arguments[a++];return e.combineAsArray(b).onValues(a)};e.combineWith=function(){var a,b;a=arguments[0];b=2<=arguments.length?k.call(arguments,1):[];return h.apply(null,[e,"combineWith",a].concat(k.call(b),[e.combineAsArray(b).map(function(b){return a.apply(null,b)})]))};e.combineTemplate=function(a){var b,d,c,f,g,l,D,v,w;l=[];w=[];g=function(b){return b[b.length-1]};v=function(b,a,d){return g(b)[a]=d};b=function(b,a){return function(d,
c){return v(d,b,c[a])}};f=function(b,a){return function(d){return v(d,b,a)}};D=function(b){return z(b)?[]:{}};d=function(a,d){if(R(d))return w.push(d),l.push(b(a,w.length-1));if(d!==Object(d)||"function"===typeof d||d instanceof RegExp||d instanceof Date)return l.push(f(a,d));l.push(function(b){return function(a){var c;c=D(d);v(a,b,c);return a.push(c)}}(a));c(d);return l.push(function(b){return b.pop()})};c=function(b){return m.each(b,d)};c(a);return h(e,"combineTemplate",a,e.combineAsArray(w).map(function(b){var d,
c,f,e,g;f=D(a);d=[f];e=0;for(g=l.length;e<g;e++)c=l[e],c(d,b);return f}))};e.retry=function(a){var b,d,c,f,g,l;if(!u(a.source))throw new N("'source' option has to be a function");l=a.source;f=a.retries||0;c=a.maxRetries||f;b=a.delay||function(){return 0};d=a.isRetryable||function(){return!0};g=function(a){var g;g={source:l,retries:f-1,maxRetries:c,delay:b,isRetryable:d};return e.later(b(a)).filter(!1).concat(e.once().flatMap(function(){return e.retry(g)}))};return h(e,"retry",a,l().flatMapError(function(b){return d(b)&&
0<f?g({error:b,retriesDone:c-f}):e.once(F(b))}))};Ba=0;M=function(){function a(){this.id=++Ba}a.prototype.isEvent=function(){return!0};a.prototype.isEnd=function(){return!1};a.prototype.isInitial=function(){return!1};a.prototype.isNext=function(){return!1};a.prototype.isError=function(){return!1};a.prototype.hasValue=function(){return!1};a.prototype.filter=function(){return!0};a.prototype.inspect=function(){return this.toString()};a.prototype.log=function(){return this.toString()};return a}();T=function(a){function b(a,
c){b.__super__.constructor.call(this);!c&&u(a)||a instanceof b?(this.valueF=a,this.valueInternal=void 0):(this.valueF=void 0,this.valueInternal=a)}E(b,a);b.prototype.isNext=function(){return!0};b.prototype.hasValue=function(){return!0};b.prototype.value=function(){this.valueF instanceof b?(this.valueInternal=this.valueF.value(),this.valueF=void 0):this.valueF&&(this.valueInternal=this.valueF(),this.valueF=void 0);return this.valueInternal};b.prototype.fmap=function(b){var a,f;if(this.valueInternal)return f=
this.valueInternal,this.apply(function(){return b(f)});a=this;return this.apply(function(){return b(a.value())})};b.prototype.apply=function(a){return new b(a)};b.prototype.filter=function(b){return b(this.value())};b.prototype.toString=function(){return m.toString(this.value())};b.prototype.log=function(){return this.value()};return b}(M);O=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}E(b,a);b.prototype.isInitial=function(){return!0};b.prototype.isNext=function(){return!1};
b.prototype.apply=function(a){return new b(a)};b.prototype.toNext=function(){return new T(this)};return b}(T);ia=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}E(b,a);b.prototype.isEnd=function(){return!0};b.prototype.fmap=function(){return this};b.prototype.apply=function(){return this};b.prototype.toString=function(){return"\x3cend\x3e"};return b}(M);F=function(a){function b(b){this.error=b}E(b,a);b.prototype.isError=function(){return!0};b.prototype.fmap=function(){return this};
b.prototype.apply=function(){return this};b.prototype.toString=function(){return"\x3cerror\x3e "+m.toString(this.error)};return b}(M);Da=0;y=function(){function a(b){this.id=++Da;h(b,this);this.initialDesc=this.desc}a.prototype.subscribe=function(b){return C.wrappedSubscribe(this,b)};a.prototype.subscribeInternal=function(b){return this.dispatcher.subscribe(b)};a.prototype.onValue=function(){var b;b=H(arguments);return this.subscribe(function(a){if(a.hasValue())return b(a.value())})};a.prototype.onValues=
function(b){return this.onValue(function(a){return b.apply(null,a)})};a.prototype.onError=function(){var b;b=H(arguments);return this.subscribe(function(a){if(a.isError())return b(a.error)})};a.prototype.onEnd=function(){var b;b=H(arguments);return this.subscribe(function(a){if(a.isEnd())return b()})};a.prototype.errors=function(){return h(this,"errors",this.filter(function(){return!1}))};a.prototype.filter=function(){var b,a;a=arguments[0];b=2<=arguments.length?k.call(arguments,1):[];return Q(this,
a,b,function(b){return h(this,"filter",b,this.withHandler(function(a){return a.filter(b)?this.push(a):e.more}))})};a.prototype.takeWhile=function(){var b,a;a=arguments[0];b=2<=arguments.length?k.call(arguments,1):[];return Q(this,a,b,function(b){return h(this,"takeWhile",b,this.withHandler(function(a){if(a.filter(b))return this.push(a);this.push(r());return e.noMore}))})};a.prototype.endOnError=function(){var b,a;a=arguments[0];b=2<=arguments.length?k.call(arguments,1):[];null==a&&(a=!0);return Q(this,
a,b,function(b){return h(this,"endOnError",this.withHandler(function(a){return a.isError()&&b(a.error)?(this.push(a),this.push(r())):this.push(a)}))})};a.prototype.take=function(b){return 0>=b?e.never():h(this,"take",b,this.withHandler(function(a){if(a.hasValue()){b--;if(0<b)return this.push(a);0===b&&this.push(a);this.push(r());return e.noMore}return this.push(a)}))};a.prototype.map=function(){var b,a;a=arguments[0];b=2<=arguments.length?k.call(arguments,1):[];return a instanceof G?a.sampledBy(this,
Ca):Q(this,a,b,function(b){return h(this,"map",b,this.withHandler(function(a){return this.push(a.fmap(b))}))})};a.prototype.mapError=function(){var b;b=H(arguments);return h(this,"mapError",b,this.withHandler(function(a){return a.isError()?this.push(I(b(a.error))):this.push(a)}))};a.prototype.mapEnd=function(){var b;b=H(arguments);return h(this,"mapEnd",b,this.withHandler(function(a){return a.isEnd()?(this.push(I(b(a))),this.push(r()),e.noMore):this.push(a)}))};a.prototype.doAction=function(){var b;
b=H(arguments);return h(this,"doAction",b,this.withHandler(function(a){a.hasValue()&&b(a.value());return this.push(a)}))};a.prototype.skip=function(b){return h(this,"skip",b,this.withHandler(function(a){return a.hasValue()&&0<b?(b--,e.more):this.push(a)}))};a.prototype.skipDuplicates=function(b){null==b&&(b=function(b,a){return b===a});return h(this,"skipDuplicates",this.withStateMachine(A,function(a,c){return c.hasValue()?c.isInitial()||a===A||!b(a.get(),c.value())?[new K(c.value()),[c]]:[a,[]]:
[a,[c]]}))};a.prototype.skipErrors=function(){return h(this,"skipErrors",this.withHandler(function(b){return b.isError()?e.more:this.push(b)}))};a.prototype.withStateMachine=function(b,a){var c;c=b;return h(this,"withStateMachine",b,a,this.withHandler(function(b){var g,l,h;b=a(c,b);g=b[0];b=b[1];c=g;l=e.more;g=0;for(h=b.length;g<h&&(l=b[g],l=this.push(l),l!==e.noMore);g++);return l}))};a.prototype.scan=function(b,a){var c,f,g;a=Y(a);c=pa(b);g=function(b){return function(g){var h,w,q,p;h=!1;p=n;w=
e.more;q=function(){if(!h)return c.forEach(function(b){h=!0;w=g(new O(function(){return b}));if(w===e.noMore)return p(),p=n})};p=b.dispatcher.subscribe(function(b){var f,l;if(b.hasValue()){if(h&&b.isInitial())return e.more;b.isInitial()||q();h=!0;l=c.getOrElse(void 0);f=a(l,b.value());c=new K(f);return g(b.apply(function(){return f}))}b.isEnd()&&(w=q());if(w!==e.noMore)return g(b)});C.whenDoneWith(f,q);return p}}(this);return f=new G(t(this,"scan",b,a),g)};a.prototype.fold=function(b,a){return h(this,
"fold",b,a,this.scan(b,a).sampledBy(this.filter(!1).mapEnd().toProperty()))};a.prototype.zip=function(b,a){null==a&&(a=Array);return h(this,"zip",b,e.zipWith([this,b],a))};a.prototype.diff=function(b,a){a=Y(a);return h(this,"diff",b,a,this.scan([b],function(b,f){return[f,a(b[0],f)]}).filter(function(b){return 2===b.length}).map(function(b){return b[1]}))};a.prototype.flatMap=function(){return ba(this,V(arguments))};a.prototype.flatMapFirst=function(){return ba(this,V(arguments),!0)};a.prototype.flatMapWithConcurrencyLimit=
function(){var b,a;a=arguments[0];b=2<=arguments.length?k.call(arguments,1):[];return h.apply(null,[this,"flatMapWithConcurrencyLimit",a].concat(k.call(b),[ba(this,V(b),!1,a)]))};a.prototype.flatMapLatest=function(){var b,a;b=V(arguments);a=this.toEventStream();return h(this,"flatMapLatest",b,a.flatMap(function(c){return na(b(c)).takeUntil(a)}))};a.prototype.flatMapError=function(b){return h(this,"flatMapError",b,this.mapError(function(b){return F(b)}).flatMap(function(a){return a instanceof F?b(a.error):
e.once(a)}))};a.prototype.flatMapConcat=function(){return h.apply(null,[this,"flatMapConcat"].concat(k.call(arguments),[this.flatMapWithConcurrencyLimit.apply(this,[1].concat(k.call(arguments)))]))};a.prototype.bufferingThrottle=function(a){return h(this,"bufferingThrottle",a,this.flatMapConcat(function(d){return e.once(d).concat(e.later(a).filter(!1))}))};a.prototype.not=function(){return h(this,"not",this.map(function(a){return!a}))};a.prototype.log=function(){var a;a=1<=arguments.length?k.call(arguments,
0):[];this.subscribe(function(d){return"undefined"!==typeof console&&null!==console?"function"===typeof console.log?console.log.apply(console,k.call(a).concat([d.log()])):void 0:void 0});return this};a.prototype.slidingWindow=function(a,d){null==d&&(d=0);return h(this,"slidingWindow",a,d,this.scan([],function(d,f){return d.concat([f]).slice(-a)}).filter(function(a){return a.length>=d}))};a.prototype.combine=function(a,d){var c;c=Y(d);return h(this,"combine",a,d,e.combineAsArray(this,a).map(function(a){return c(a[0],
a[1])}))};a.prototype.decode=function(a){return h(this,"decode",a,this.combine(e.combineTemplate(a),function(a,b){return b[a]}))};a.prototype.awaiting=function(a){return h(this,"awaiting",a,e.groupSimultaneous(this,a).map(function(a){return 0===a[1].length}).toProperty(!1).skipDuplicates())};a.prototype.name=function(a){this._name=a;return this};a.prototype.withDescription=function(){return t.apply(null,arguments).apply(this)};a.prototype.toString=function(){return this._name?this._name:this.desc.toString()};
a.prototype.internalDeps=function(){return this.initialDesc.deps()};return a}();y.prototype.reduce=y.prototype.fold;y.prototype.assign=y.prototype.onValue;y.prototype.inspect=y.prototype.toString;ba=function(a,b,d,c){var f,g,l;l=[a];f=[];g=new x(t(a,"flatMap"+(d?"First":""),b),function(g){var l,h,q,p,k;q=new Z;p=[];k=function(a){var d;d=na(b(a.value()));f.push(d);return q.add(function(a,b){return d.dispatcher.subscribe(function(c){if(c.isEnd())return m.remove(d,f),h(),l(b),e.noMore;c instanceof O&&
(c=c.toNext());c=g(c);c===e.noMore&&a();return c})})};h=function(){var a;if(a=p.shift())return k(a)};l=function(a){a();if(q.empty())return g(r())};q.add(function(b,f){return a.dispatcher.subscribe(function(a){return a.isEnd()?l(f):a.isError()?g(a):d&&1<q.count()?e.more:q.unsubscribed?e.noMore:c&&q.count()>c?p.push(a):k(a)})});return q.unsubscribe});g.internalDeps=function(){return f.length?l.concat(f):l};return g};x=function(a){function b(a,c,f){u(a)&&(f=c,c=a,a=[]);b.__super__.constructor.call(this,
a);U(c);this.dispatcher=new aa(c,f);S(this)}E(b,a);b.prototype.delay=function(a){return h(this,"delay",a,this.flatMap(function(b){return e.later(a,b)}))};b.prototype.debounce=function(a){return h(this,"debounce",a,this.flatMapLatest(function(b){return e.later(a,b)}))};b.prototype.debounceImmediate=function(a){return h(this,"debounceImmediate",a,this.flatMapFirst(function(b){return e.once(b).concat(e.later(a).filter(!1))}))};b.prototype.throttle=function(a){return h(this,"throttle",a,this.bufferWithTime(a).map(function(a){return a[a.length-
1]}))};b.prototype.bufferWithTime=function(a){return h(this,"bufferWithTime",a,this.bufferWithTimeOrCount(a,Number.MAX_VALUE))};b.prototype.bufferWithCount=function(a){return h(this,"bufferWithCount",a,this.bufferWithTimeOrCount(void 0,a))};b.prototype.bufferWithTimeOrCount=function(a,b){var f;f=function(f){if(f.values.length===b)return f.flush();if(void 0!==a)return f.schedule()};return h(this,"bufferWithTimeOrCount",a,b,this.buffer(a,f,f))};b.prototype.buffer=function(a,b,f){var g,l,k;null==b&&
(b=n);null==f&&(f=n);g={scheduled:!1,end:void 0,values:[],flush:function(){var a;this.scheduled=!1;if(0<this.values.length){a=this.push(I(this.values));this.values=[];if(null!=this.end)return this.push(this.end);if(a!==e.noMore)return f(this)}else if(null!=this.end)return this.push(this.end)},schedule:function(){if(!this.scheduled)return this.scheduled=!0,a(function(a){return function(){return a.flush()}}(this))}};k=e.more;u(a)||(l=a,a=function(a){return e.scheduler.setTimeout(a,l)});return h(this,
"buffer",this.withHandler(function(a){g.push=function(a){return function(b){return a.push(b)}}(this);a.isError()?k=this.push(a):a.isEnd()?(g.end=a,g.scheduled||g.flush()):(g.values.push(a.value()),b(g));return k}))};b.prototype.merge=function(a){va(a);return h(this,"merge",a,e.mergeAll(this,a))};b.prototype.toProperty=function(a){var b,f;f=0===arguments.length?A:pa(function(){return a});b=this.dispatcher;return new G(t(this,"toProperty",a),function(a){var d,h,k,m;d=!1;m=n;h=e.more;k=function(){if(!d)return f.forEach(function(b){d=
!0;h=a(new O(b));if(h===e.noMore)return m(),m=n})};m=b.subscribe(function(b){if(b.hasValue()){if(d&&b.isInitial())return e.more;b.isInitial()||k();d=!0;f=new K(b);return a(b)}b.isEnd()&&(h=k());if(h!==e.noMore)return a(b)});k();return m})};b.prototype.toEventStream=function(){return this};b.prototype.sampledBy=function(a,b){return h(this,"sampledBy",a,b,this.toProperty().sampledBy(a,b))};b.prototype.concat=function(a){var c;c=this;return new b(t(c,"concat",a),function(b){var e,l;l=n;e=c.dispatcher.subscribe(function(c){return c.isEnd()?
l=a.dispatcher.subscribe(b):b(c)});return function(){e();return l()}})};b.prototype.takeUntil=function(a){var b;b={};return h(this,"takeUntil",a,e.groupSimultaneous(this.mapEnd(b),a.skipErrors()).withHandler(function(f){var g,l,h;if(f.hasValue()){l=f.value();f=l[0];a=l[1];if(a.length)return this.push(r());g=e.more;l=0;for(h=f.length;l<h;l++)g=f[l],g=g===b?this.push(r()):this.push(I(g));return g}return this.push(f)}))};b.prototype.skipUntil=function(a){var b;b=a.take(1).map(!0).toProperty(!1);return h(this,
"skipUntil",a,this.filter(b))};b.prototype.skipWhile=function(){var a,b,f;b=arguments[0];a=2<=arguments.length?k.call(arguments,1):[];f=!1;return Q(this,b,a,function(a){return h(this,"skipWhile",a,this.withHandler(function(b){if(!f&&b.hasValue()&&a(b.value()))return e.more;b.hasValue()&&(f=!0);return this.push(b)}))})};b.prototype.holdWhen=function(a){var b,f,g;g=a.startWith(!1);f=g.filter(function(a){return!a});b=g.filter(m.id);return h(this,"holdWhen",a,this.filter(!1).merge(g.flatMapConcat(function(a){return function(d){return d?
a.scan([],function(a,b){return a.concat(b)}).sampledBy(f).take(1).flatMap(e.fromArray):a.takeUntil(b)}}(this))))};b.prototype.startWith=function(a){return h(this,"startWith",a,e.once(a).concat(this))};b.prototype.withHandler=function(a){return new b(t(this,"withHandler",a),this.dispatcher.subscribe,a)};return b}(y);G=function(a){function b(a,c,f){u(a)&&(f=c,c=a,a=[]);b.__super__.constructor.call(this,a);U(c);this.dispatcher=new ta(this,c,f);S(this)}E(b,a);b.prototype.sampledBy=function(a,c){var f,
g;null!=c?c=Y(c):(f=!0,c=function(a){return a.value()});g=new B(this,!1,f);f=new B(a,!0,f);g=e.when([g,f],c);g=a instanceof b?g.toProperty():g;return h(this,"sampledBy",a,c,g)};b.prototype.sample=function(a){return h(this,"sample",a,this.sampledBy(e.interval(a,{})))};b.prototype.changes=function(){return new x(t(this,"changes"),function(a){return function(b){return a.dispatcher.subscribe(function(a){if(!a.isInitial())return b(a)})}}(this))};b.prototype.withHandler=function(a){return new b(t(this,
"withHandler",a),this.dispatcher.subscribe,a)};b.prototype.toProperty=function(){wa(arguments);return this};b.prototype.toEventStream=function(){return new x(t(this,"toEventStream"),function(a){return function(b){return a.dispatcher.subscribe(function(a){a.isInitial()&&(a=a.toNext());return b(a)})}}(this))};b.prototype.and=function(a){return h(this,"and",a,this.combine(a,function(a,b){return a&&b}))};b.prototype.or=function(a){return h(this,"or",a,this.combine(a,function(a,b){return a||b}))};b.prototype.delay=
function(a){return this.delayChanges("delay",a,function(b){return b.delay(a)})};b.prototype.debounce=function(a){return this.delayChanges("debounce",a,function(b){return b.debounce(a)})};b.prototype.throttle=function(a){return this.delayChanges("throttle",a,function(b){return b.throttle(a)})};b.prototype.delayChanges=function(){var a,b;a=2<=arguments.length?k.call(arguments,0,b=arguments.length-1):(b=0,[]);b=arguments[b++];return h.apply(null,[this].concat(k.call(a),[ja(this,b(this.changes()))]))};
b.prototype.takeUntil=function(a){var b;b=this.changes().takeUntil(a);return h(this,"takeUntil",a,ja(this,b))};b.prototype.startWith=function(a){return h(this,"startWith",a,this.scan(a,function(a,b){return b}))};b.prototype.bufferingThrottle=function(){var a;return(a=b.__super__.bufferingThrottle.apply(this,arguments)).bufferingThrottle.apply(a,arguments).toProperty()};return b}(y);Q=function(a,b,d,c){if(b instanceof G)return a=b.sampledBy(a,function(a,b){return[a,b]}),c.call(a,function(a){return a[0]}).map(function(a){return a[1]});
b=ea(b,d);return c.call(a,b)};ja=function(a,b){var d;d=new x(t(a,"justInitValue"),function(b){var f,g;g=void 0;f=a.dispatcher.subscribe(function(a){a.isEnd()||(g=a);return e.noMore});C.whenDoneWith(d,function(){null!=g&&b(g);return b(r())});return f});return d.concat(b).toProperty()};aa=function(){function a(a,d){this._subscribe=a;this._handleEvent=d;this.subscribe=L(this.subscribe,this);this.handleEvent=L(this.handleEvent,this);this.subscriptions=[];this.queue=[];this.ended=this.pushing=!1;this.unsubSrc=
this.prevError=void 0}a.prototype.hasSubscribers=function(){return 0<this.subscriptions.length};a.prototype.removeSub=function(a){return this.subscriptions=m.without(a,this.subscriptions)};a.prototype.push=function(a){a.isEnd()&&(this.ended=!0);return C.inTransaction(a,this,this.pushIt,[a])};a.prototype.pushToSubscriptions=function(a){var d,c,f,g,h;try{f=this.subscriptions;g=0;for(h=f.length;g<h;g++)c=f[g],d=c.sink(a),(d===e.noMore||a.isEnd())&&this.removeSub(c);return!0}catch(k){throw this.pushing=
!1,this.queue=[],k;}};a.prototype.pushIt=function(a){if(this.pushing)return this.queue.push(a),e.more;if(a!==this.prevError){a.isError()&&(this.prevError=a);this.pushing=!0;this.pushToSubscriptions(a);for(this.pushing=!1;this.queue.length;)a=this.queue.shift(),this.push(a);if(this.hasSubscribers())return e.more;this.unsubscribeFromSource();return e.noMore}};a.prototype.handleEvent=function(a){return this._handleEvent?this._handleEvent(a):this.push(a)};a.prototype.unsubscribeFromSource=function(){this.unsubSrc&&
this.unsubSrc();return this.unsubSrc=void 0};a.prototype.subscribe=function(a){var d;if(this.ended)return a(r()),n;U(a);d={sink:a};this.subscriptions.push(d);1===this.subscriptions.length&&(this.unsubSrc=this._subscribe(this.handleEvent),U(this.unsubSrc));return function(a){return function(){a.removeSub(d);if(!a.hasSubscribers())return a.unsubscribeFromSource()}}(this)};return a}();ta=function(a){function b(a,c,e){this.property=a;this.subscribe=L(this.subscribe,this);b.__super__.constructor.call(this,
c,e);this.current=A;this.currentValueRootId=void 0;this.propertyEnded=!1}E(b,a);b.prototype.push=function(a){a.isEnd()&&(this.propertyEnded=!0);a.hasValue()&&(this.current=new K(a),this.currentValueRootId=C.currentEventId());return b.__super__.push.call(this,a)};b.prototype.maybeSubSource=function(a,b){return b===e.noMore?n:this.propertyEnded?(a(r()),n):aa.prototype.subscribe.call(this,a)};b.prototype.subscribe=function(a){var b,f,g;f=e.more;this.current.isDefined&&(this.hasSubscribers()||this.propertyEnded)&&
(b=C.currentEventId(),g=this.currentValueRootId,!this.propertyEnded&&g&&b&&b!==g?C.whenDoneWith(this.property,function(b){return function(){if(b.currentValueRootId===g)return a(ca(b.current.get().value()))}}(this)):C.inTransaction(void 0,this,function(){return f=a(ca(this.current.get().value()))},[]));return this.maybeSubSource(a,f)};return b}(aa);J=function(a){function b(){this.guardedSink=L(this.guardedSink,this);this.subscribeAll=L(this.subscribeAll,this);this.unsubAll=L(this.unsubAll,this);this.sink=
void 0;this.subscriptions=[];this.ended=!1;b.__super__.constructor.call(this,t(e,"Bus"),this.subscribeAll)}E(b,a);b.prototype.unsubAll=function(){var a,b,e,g;g=this.subscriptions;b=0;for(e=g.length;b<e;b++)a=g[b],"function"===typeof a.unsub&&a.unsub()};b.prototype.subscribeAll=function(a){var b,e,g;this.sink=a;g=ya(this.subscriptions);b=0;for(e=g.length;b<e;b++)a=g[b],this.subscribeInput(a);return this.unsubAll};b.prototype.guardedSink=function(a){return function(b){return function(f){return f.isEnd()?
(b.unsubscribeInput(a),e.noMore):b.sink(f)}}(this)};b.prototype.subscribeInput=function(a){return a.unsub=a.input.dispatcher.subscribe(this.guardedSink(a.input))};b.prototype.unsubscribeInput=function(a){var b,e,g,h,k;k=this.subscriptions;b=g=0;for(h=k.length;g<h;b=++g)if(e=k[b],e.input===a){"function"===typeof e.unsub&&e.unsub();this.subscriptions.splice(b,1);break}};b.prototype.plug=function(a){var b;xa(a);if(!this.ended)return b={input:a},this.subscriptions.push(b),null!=this.sink&&this.subscribeInput(b),
function(b){return function(){return b.unsubscribeInput(a)}}(this)};b.prototype.end=function(){this.ended=!0;this.unsubAll();return"function"===typeof this.sink?this.sink(r()):void 0};b.prototype.push=function(a){return"function"===typeof this.sink?this.sink(I(a)):void 0};b.prototype.error=function(a){return"function"===typeof this.sink?this.sink(F(a)):void 0};return b}(x);B=function(){function a(a,d,c){this.obs=a;this.sync=d;this.lazy=null!=c?c:!1;this.queue=[]}a.prototype.subscribe=function(a){return this.obs.dispatcher.subscribe(a)};
a.prototype.toString=function(){return this.obs.toString()};a.prototype.markEnded=function(){return this.ended=!0};a.prototype.consume=function(){return this.lazy?{value:m.always(this.queue[0])}:this.queue[0]};a.prototype.push=function(a){return this.queue=[a]};a.prototype.mayHave=function(){return!0};a.prototype.hasAtLeast=function(){return this.queue.length};a.prototype.flatten=!0;return a}();sa=function(a){function b(){return b.__super__.constructor.apply(this,arguments)}E(b,a);b.prototype.consume=
function(){return this.queue.shift()};b.prototype.push=function(a){return this.queue.push(a)};b.prototype.mayHave=function(a){return!this.ended||this.queue.length>=a};b.prototype.hasAtLeast=function(a){return this.queue.length>=a};b.prototype.flatten=!1;return b}(B);ra=function(a){function b(a){b.__super__.constructor.call(this,a,!0)}E(b,a);b.prototype.consume=function(){var a;a=this.queue;this.queue=[];return{value:function(){return a}}};b.prototype.push=function(a){return this.queue.push(a.value())};
b.prototype.hasAtLeast=function(){return!0};return b}(B);B.isTrigger=function(a){return a instanceof B?a.sync:a instanceof x};B.fromObservable=function(a){return a instanceof B?a:a instanceof G?new B(a,!1):new sa(a,!0)};t=function(){var a,b,d;b=arguments[0];d=arguments[1];a=3<=arguments.length?k.call(arguments,2):[];return(b||d)instanceof ha?b||d:new ha(b,d,a)};la=function(a){return z(a)?m.flatMap(la,a):R(a)?[a]:a instanceof B?[a.obs]:[]};ha=function(){function a(a,d,c){this.context=a;this.method=
d;this.args=c;this.cached=void 0}a.prototype.deps=function(){return this.cached||(this.cached=la([this.context].concat(this.args)))};a.prototype.apply=function(a){a.desc=this;return a};a.prototype.toString=function(){return m.toString(this.context)+"."+m.toString(this.method)+"("+m.map(m.toString,this.args)+")"};return a}();h=function(){var a,b;a=2<=arguments.length?k.call(arguments,0,b=arguments.length-1):(b=0,[]);b=arguments[b++];return t.apply(null,a).apply(b)};e.when=function(){var a,b,d,c,f,
g,h,D,v,w,q,p,ga,n,u,y,A,z;if(0===arguments.length)return e.never();c=arguments.length;P("when: expecting arguments in the form (Observable+,function)+",0===c%2);p=[];D=[];b=0;for(v=[];b<c;){v[b]=arguments[b];v[b+1]=arguments[b+1];h=m.toArray(arguments[b]);a=za(arguments[b+1]);g={f:a,ixs:[]};ga=!1;n=0;for(y=h.length;n<y;n++){q=h[n];a=m.indexOf(p,q);ga||(ga=B.isTrigger(q));0>a&&(p.push(q),a=p.length-1);z=g.ixs;u=0;for(A=z.length;u<A;u++)d=z[u],d.index===a&&d.count++;g.ixs.push({index:a,count:1})}P("At least one EventStream required",
ga||!h.length);0<h.length&&D.push(g);b+=2}if(!p.length)return e.never();p=m.map(B.fromObservable,p);f=m.any(p,function(a){return a.flatten})&&Aa(m.map(function(a){return a.obs},p));return w=new x(t.apply(null,[e,"when"].concat(k.call(v))),function(a){var c,d,g,h,l,k,n;n=[];g=!1;h=function(a){var c,d;d=a.ixs;a=0;for(c=d.length;a<c;a++)if(b=d[a],!p[b.index].hasAtLeast(b.count))return!1;return!0};d=function(a){return!a.sync||a.ended};c=function(a){var c,d;d=a.ixs;a=0;for(c=d.length;a<c;a++)if(b=d[a],
!p[b.index].mayHave(b.count))return!0};l=function(a){return!a.source.flatten};k=function(k){return function(q){var t,u,v;u=function(){return C.whenDoneWith(w,t)};v=function(){var c,d,f,g,k;if(0<n.length)for(f=e.more,f=n.pop(),g=0,k=D.length;g<k;g++){if(d=D[g],h(d))return c=function(){var a,c,e,f;e=d.ixs;f=[];a=0;for(c=e.length;a<c;a++)b=e[a],f.push(p[b.index].consume());return f}(),f=a(f.e.apply(function(){var a,b,e,f;f=[];b=0;for(e=c.length;b<e;b++)a=c[b],f.push(a.value());return d.f.apply(d,f)})),
n.length&&(n=m.filter(l,n)),f===e.noMore?f:v()}else return e.more};t=function(){var b;b=v();g&&(g=!1,m.all(p,d)||m.all(D,c))&&(b=e.noMore,a(r()));b===e.noMore&&q();return b};return k.subscribe(function(b){var c;b.isEnd()?(g=!0,k.markEnded(),u()):b.isError()?c=a(b):(k.push(b),k.sync&&(n.push({source:k,e:b}),f||C.hasWaiters()?u():t()));c===e.noMore&&q();return c||e.more})}};return ka.apply(null,function(){var a,b,c;c=[];a=0;for(b=p.length;a<b;a++)q=p[a],c.push(k(q));return c}())})};Aa=function(a,b){var d;
null==b&&(b=[]);d=function(a){var e;if(m.contains(b,a))return!0;e=a.internalDeps();if(e.length)return b.push(a),m.any(e,d);b.push(a);return!1};return m.any(a,d)};e.update=function(){var a,b,d,c;b=arguments[0];c=2<=arguments.length?k.call(arguments,1):[];d=function(a){return function(){var b;b=1<=arguments.length?k.call(arguments,0):[];return function(c){return a.apply(null,[c].concat(b))}}};for(a=c.length-1;0<a;)c[a]instanceof Function||(c[a]=function(a){return function(){return a}}(c[a])),c[a]=d(c[a]),
a-=2;return h.apply(null,[e,"update",b].concat(k.call(c),[e.when.apply(e,c).scan(b,function(a,b){return b(a)})]))};ka=function(){var a;a=1<=arguments.length?k.call(arguments,0):[];return(new Z(a)).unsubscribe};Z=function(){function a(a){var d,c,e;null==a&&(a=[]);this.unsubscribe=L(this.unsubscribe,this);this.unsubscribed=!1;this.subscriptions=[];this.starting=[];c=0;for(e=a.length;c<e;c++)d=a[c],this.add(d)}a.prototype.add=function(a){var d,c,e;if(!this.unsubscribed)return d=!1,c=n,this.starting.push(a),
e=function(e){return function(){if(!e.unsubscribed)return d=!0,e.remove(c),m.remove(a,e.starting)}}(this),c=a(this.unsubscribe,e),this.unsubscribed||d||this.subscriptions.push(c),m.remove(a,this.starting),c};a.prototype.remove=function(a){if(!this.unsubscribed&&void 0!==m.remove(a,this.subscriptions))return a()};a.prototype.unsubscribe=function(){var a,d,c,e;if(!this.unsubscribed){this.unsubscribed=!0;e=this.subscriptions;d=0;for(c=e.length;d<c;d++)a=e[d],a();this.subscriptions=[];return this.starting=
[]}};a.prototype.count=function(){return this.unsubscribed?0:this.subscriptions.length+this.starting.length};a.prototype.empty=function(){return 0===this.count()};return a}();e.CompositeUnsubscribe=Z;K=function(){function a(a){this.value=a}a.prototype.getOrElse=function(){return this.value};a.prototype.get=function(){return this.value};a.prototype.filter=function(b){return b(this.value)?new a(this.value):A};a.prototype.map=function(b){return new a(b(this.value))};a.prototype.forEach=function(a){return a(this.value)};
a.prototype.isDefined=!0;a.prototype.toArray=function(){return[this.value]};a.prototype.inspect=function(){return"Some("+this.value+")"};a.prototype.toString=function(){return this.inspect()};return a}();A={getOrElse:function(a){return a},filter:function(){return A},map:function(){return A},forEach:function(){},isDefined:!1,toArray:function(){return[]},inspect:function(){return"None"},toString:function(){return this.inspect()}};C=function(){var a,b,d,c,f,g,h,k,n;h=void 0;k=[];n={};b=[];d=0;a=function(a){return h?
b.push(a):a()};c=function(){for(;0<k.length;)g(0)};g=function(a){var b,c,d;b=k[a];c=b.id;d=n[c];k.splice(a,1);delete n[c];f(b);b=0;for(c=d.length;b<c;b++)a=d[b],a()};f=function(a){var b,c,d;a=a.internalDeps();c=0;for(d=a.length;c<d;c++)b=a[c],f(b),n[b.id]&&(b=m.indexOf(k,b),g(b))};return{whenDoneWith:function(a,b){var c;return h?(c=n[a.id],null==c?(n[a.id]=[b],k.push(a)):c.push(b)):b()},hasWaiters:function(){return 0<k.length},inTransaction:function(a,e,f,g){var k;if(h)return f.apply(e,g);h=a;try{k=
f.apply(e,g),c()}finally{for(h=void 0;d<b.length;)a=b[d],d++,a();d=0;b=[]}return k},currentEventId:function(){if(h)return h.id},wrappedSubscribe:function(b,c){var d,f,g,h;f=h=!1;d=function(){return f=!0};g=function(){h=!0;return d()};d=b.dispatcher.subscribe(function(b){return a(function(){var a;if(!h&&(a=c(b),a===e.noMore))return g()})});f&&d();return g},afterTransaction:a}}();e.EventStream=x;e.Property=G;e.Observable=y;e.Bus=J;e.Initial=O;e.Next=T;e.End=ia;e.Error=F;n=function(){};Ca=function(a,
b){return a};ca=function(a){return new O(a,!0)};I=function(a){return new T(a,!0)};r=function(){return new ia};fa=function(a){return a instanceof M?a:I(a)};ya=function(a){return a.slice(0)};P=function(a,b){if(!b)throw new N(a);};va=function(a){if(!(a instanceof x))throw new N("not an EventStream : "+a);};xa=function(a){if(!(a instanceof y))throw new N("not an Observable : "+a);};U=function(a){return P("not a function : "+a,u(a))};u=function(a){return"function"===typeof a};z=function(a){return a instanceof
Array};R=function(a){return a instanceof y};ua=function(a){if(!z(a))throw new N("not an array : "+a);};wa=function(a){return P("no arguments supported",0===a.length)};oa=function(a,b){return function(){var d;d=1<=arguments.length?k.call(arguments,0):[];return a.apply(null,b.concat(d))}};V=function(a){return 1===a.length&&R(a[0])?m.always(a[0]):H(a)};H=function(a){a=Array.prototype.slice.call(a);return ma.apply(null,a)};ma=qa(function(){var a,b;b=arguments[0];a=2<=arguments.length?k.call(arguments,
1):[];return u(b)?a.length?oa(b,a):b:da(b)?Ea(b,a):m.always(b)});ea=function(a,b){return ma.apply(null,[a].concat(k.call(b)))};za=function(a){return u(a)?a:m.always(a)};na=function(a){return R(a)?a:e.once(a)};da=function(a){return"string"===typeof a&&1<a.length&&"."===a.charAt(0)};e.isFieldKey=da;Ea=function(a,b){var d,c;c=a.slice(1).split(".");d=m.map(Ga(b),c);return function(b){var c,e;c=0;for(e=d.length;c<e;c++)a=d[c],b=a(b);return b}};Ga=function(a){return function(b){return function(d){var c;
if(null!=d)return c=d[b],u(c)?c.apply(d,a):c}}};Fa=function(a){return a.slice(1)};Y=function(a){var b;return u(a)?a:da(a)?(b=Fa(a),function(a,c){return a[b](c)}):P("not a function or a field key: "+a,!1)};pa=function(a){return a instanceof K||a===A?a:new K(a)};"undefined"!==typeof define&&null!==define&&null!=define.amd?(define([],function(){return e}),this.Bacon=e):"undefined"!==typeof module&&null!==module&&null!=module.exports?(module.exports=e,e.Bacon=e):this.Bacon=e}).call(this);;
;/* module-key = 'com.atlassian.stash.stash-bower-components-plugin:bacon', location = '/static/lib/Bacon-AMD.js' */
define("bacon",["jquery"],function(b){var a=window.Bacon||window.module.exports;b.fn.asEventStream=a.$.asEventStream;return a});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:performance-util', location = '/static/util/performance.js' */
define("util/performance",["jquery"],function(l){function m(c,a){function d(){e=null;k=!0;b.fire();b=new l.Callbacks;k=!1;a()}var b=new l.Callbacks,k=!1,e=null;return{name:c,forceExecute:function(){e&&(clearTimeout(e),d())},queue:function(a){k?a():(b.add(a),e||(e=setTimeout(d,0)))}}}var g=m("READ",function(){f.forceExecute()}),f=m("WRITE",function(){g.forceExecute()});return{queueDOMRead:g.queue.bind(g),queueDOMWrite:f.queue.bind(f),enqueueCapped:function(c,a,d){d=d||1;var b=0;return function(){b>=
d||(b++,c(function(){try{return a.apply(this,arguments)}finally{b--}}))}},frameBatchedMap:function(c,a,d){a=l.extend({initial:500,min:10,max:Infinity},a);d=d||function(b){b()};return function(b){function k(){for(var a=Math.min(h+e,b.length);h<a;h++)g[h]=c(b[h])}var e=a.initial,f=l.Deferred(),h=0,g=[];requestAnimationFrame(function n(){if("pending"===f.state()){var c=(new Date).getTime();d(k);c=(new Date).getTime()-c;c=Math.ceil(15/c*e);e=Math.min(a.max,Math.max(a.min,c));h===b.length?f.resolve(g):
requestAnimationFrame(n)}});return f}}}});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:bacon-util', location = '/static/util/bacon.js' */
define("util/bacon","aui bacon jquery lodash util/deprecation util/events util/function util/performance exports".split(" "),function(p,l,h,f,q,m,n,r,e){e.events=function(a){return l.fromBinder(function(b){return m.chain().on(a,b).destroy})};e.keyboardEvents=q.fn(function(a,b){var c=l.fromBinder(function(c){var d=[];d.push(m.chain().on("stash.keyboard.shortcuts."+a,function(a){a=this.execute?this:p.whenIType(a);a.execute(c);b&&d.push(a.unbind)}).destroy);return f.partial(n.applyAll,d)});if(!b)c.onValue(jQuery.noop);
return c},"keyboardEvents","util/shortcuts.bind()","3.9","4.0");e.split=function(a,b){return l.fromBinder(function(c){var k=[],d,g=[];g.push(a.onValue(function(a){var g=b(a);d&&g!==d&&(c(k),k=[]);d=g;k.push(a)}));g.push(a.onEnd(function(){0<k.length&&c(k);c(new l.End)}));return f.partial(n.applyAll,g)})};e.toArray=function(a){var b=[];a.onValue(function(a){b.push(a)});return b};e.getWindowScrollProperty=f.once(function(){function a(){return{left:b.scrollLeft(),top:b.scrollTop()}}var b=h(window),c=
l.fromBinder(function(a){var d=r.enqueueCapped(requestAnimationFrame,a),c=f.debounce(d,20);b.on("scroll",d).on("scroll",c);return function(){b.off("scroll",d).off("scroll",c)}}).map(a).skipDuplicates(function(a,b){return a.left===b.left&&a.top===b.top}).toProperty(a());c.onValue(h.noop);return c});e.getWindowSizeProperty=f.once(function(){var a=h(window),a=l.fromBinder(function(a){var c=m.chain().on("window.resize",function(c,d){a(new l.Next({width:c,height:d}))});return function(){c.destroy()}}).toProperty({width:a.width(),
height:a.height()});a.onValue(h.noop);return a});e.takeBetween=function(a,b){var c=b.start,k=b.end,d=b.startInclusive,g=b.endInclusive,e=b.equals||function(a,b){return a===b};if(e(c,k))return d||g?a.skipWhile(function(a){return!e(a,c)}).take(1):l.never();var f,h;return a.skipWhile(function(a){return h||f?!1:e(a,c)?(f=!0,!d):e(a,k)?(h=!0,!g):!0}).takeWhile(function(a){return e(a,c)?(f=!0,d):e(a,k)?(h=!0,g):!(h&&f)})}});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:person-model', location = '/static/model/person.js' */
define("model/person",["backbone-brace"],function(a){return a.Model.extend({namedAttributes:{emailAddress:"string",name:"string"},idAttribute:"name",initialize:function(){null==this.namedAttributes.id&&this.setId(this.attributes[this.idAttribute])}})});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:stash-user-model', location = '/static/model/stash-user.js' */
define("model/stash-user",["model/person"],function(a){return a.extend({namedAttributes:{active:"boolean",avatarUrl:"string",displayName:"string",id:"number",isAdmin:"boolean",link:Object,links:Object,type:"string",slug:"string"}})});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:project-model', location = '/static/model/project.js' */
define("model/project",["backbone-brace","model/stash-user"],function(c,d){var b=c.Model.extend({namedAttributes:{id:"number",name:"string",key:"string",description:"string",type:"string",owner:d,avatarUrl:"string",link:Object,links:Object,"public":"boolean"},isEqual:function(a){return!!(a&&a instanceof b&&this.id===a.id)}},{projectType:{NORMAL:"NORMAL",PERSONAL:"PERSONAL"}});return b});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:repository-model', location = '/static/model/repository.js' */
define("model/repository",["backbone-brace","model/project"],function(c,d){var a=c.Model.extend({namedAttributes:{id:"number",name:"string",slug:"string",project:d,"public":"boolean",scmId:"string",state:"string",statusMessage:"string",forkable:"boolean",cloneUrl:"string",link:Object,links:Object,origin:null},isEqual:function(b){return!!(b&&b instanceof a&&this.id===b.id)}});c.Mixins.applyMixin(a,{namedAttributes:{origin:a}});return a});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:revision-reference', location = '/static/model/revision-reference.js' */
define("model/revision-reference",["aui","backbone-brace","lodash","model/page-state","model/repository"],function(d,g,h,k,l){var b={TAG:{id:"tag",name:"Tag"},BRANCH:{id:"branch",name:"Branch"},COMMIT:{id:"commit",name:"Commit"},isTag:function(a){return a&&(a===b.TAG.id||a.id===b.TAG.id)},isBranch:function(a){return a&&(a===b.BRANCH.id||a.id===b.BRANCH.id)},isCommit:function(a){return a&&
(a===b.COMMIT.id||a.id===b.COMMIT.id)},from:function(a){if(b.isTag(a))return b.TAG;if(b.isBranch(a))return b.BRANCH;if(b.isCommit(a))return b.COMMIT;window.console&&console.error("Unknown RevisionReference type "+a);return null}},c=g.Model.extend({namedAttributes:{id:"string",displayId:"string",type:b.from,isDefault:"boolean",latestChangeset:"string",latestCommit:"string",hash:"string",repository:l},initialize:function(){this.getDisplayId()||this.setDisplayId(this.getId());this.getIsDefault()||this.setIsDefault(!1);
this.getRepository()||this.setRepository(k.getRepository())},getTypeName:function(){return this.getType().name},isDefault:function(){return this.get("isDefault")||!1},isTag:function(){return b.isTag(this.getType())},isBranch:function(){return b.isBranch(this.getType())},isCommit:function(){return b.isCommit(this.getType())},isEqual:function(a){return a instanceof c&&this.getId()===a.getId()&&this.getType().id===a.getType().id&&this.getRepository().isEqual(a.getRepository())}},{fromChangeset:function(a){return new c({id:a.id,
displayId:a.displayId,type:b.COMMIT,isDefault:!1})},hydrateRefFromId:function(a,b,e,d){if(!h.isString(a))return null;var f=/^refs\/(heads|tags)\/(.+)/,g=a.replace(f,"$2");e||(e=c.type.BRANCH,(f=a.match(f))&&"tags"===f[1]&&(e=c.type.TAG));return new c({id:a,displayId:g,type:e,isDefault:b,latestChangeset:d})},hydrateDeprecated:function(a){return a.__json?new c(a.__json):new c(a.toJSON())}});c.type=b;return c});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:lozenge-internal', location = '/static/widget/lozenge/lozenge.soy' */
// This file was automatically generated from lozenge.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace stash.widget.lozenge.
 */

if (typeof stash == 'undefined') { var stash = {}; }
if (typeof stash.widget == 'undefined') { stash.widget = {}; }
if (typeof stash.widget.lozenge == 'undefined') { stash.widget.lozenge = {}; }


stash.widget.lozenge.lozenge = function(opt_data, opt_ignored) {
  var output = '';
  var tag__soy3 = opt_data.href ? 'a' : opt_data.htmlElement ? opt_data.htmlElement : opt_data.clickable ? 'button' : 'span';
  output += '<' + soy.$$escapeHtml(tag__soy3) + ' class="aui-lozenge' + ((opt_data.extraClasses) ? ' ' + soy.$$escapeHtml(opt_data.extraClasses) : '') + ((opt_data.monospace) ? ' monospace-lozenge' : '') + '"' + ((opt_data.href) ? ' href="' + soy.$$escapeHtml(opt_data.href) + '"' : '') + ((opt_data.tooltip) ? ' title="' + soy.$$escapeHtml(opt_data.tooltip) + '"' : '') + '>' + ((opt_data.maxLength) ? soy.$$escapeHtml(soy.$$truncate(opt_data.text, opt_data.maxLength, true)) : soy.$$escapeHtml(opt_data.text)) + '</' + soy.$$escapeHtml(tag__soy3) + '>';
  return output;
};
if (goog.DEBUG) {
  stash.widget.lozenge.lozenge.soyTemplateName = 'stash.widget.lozenge.lozenge';
}


stash.widget.lozenge.htmlLozenge = function(opt_data, opt_ignored) {
  return '<' + ((opt_data.htmlElement) ? soy.$$escapeHtml(opt_data.htmlElement) : 'a') + ' class="aui-lozenge' + ((opt_data.extraClasses) ? ' ' + soy.$$escapeHtml(opt_data.extraClasses) : '') + ((opt_data.monospace) ? ' monospace-lozenge' : '') + '"' + ((opt_data.href) ? ' href="' + soy.$$escapeHtml(opt_data.href) + '"' : '') + ((opt_data.tooltip) ? ' title="' + soy.$$escapeHtml(opt_data.tooltip) + '"' : '') + ((opt_data.extraAttributes) ? aui.renderExtraAttributes(opt_data) : '') + '>' + soy.$$filterNoAutoescape(opt_data.content) + '</' + ((opt_data.htmlElement) ? soy.$$escapeHtml(opt_data.htmlElement) : 'a') + '>';
};
if (goog.DEBUG) {
  stash.widget.lozenge.htmlLozenge.soyTemplateName = 'stash.widget.lozenge.htmlLozenge';
}


stash.widget.lozenge.merge = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '' + stash.widget.lozenge.lozenge({extraClasses: 'merge-lozenge' + (opt_data.extraClasses ? ' ' + opt_data.extraClasses : '') + (opt_data.abbreviated ? ' abbreviated' : ''), text: '' + soy.$$escapeHtml(opt_data.abbreviated ? "M" : "Merge"), tooltip: '' + soy.$$escapeHtml("This commit is a merge.")});
};
if (goog.DEBUG) {
  stash.widget.lozenge.merge.soyTemplateName = 'stash.widget.lozenge.merge';
}


stash.widget.lozenge.pullRequestState = function(opt_data, opt_ignored) {
  var output = '';
  var commonClasses__soy84 = opt_data.extraClasses ? opt_data.extraClasses + ' pull-request-state-lozenge' : ' pull-request-state-lozenge';
  switch (opt_data.state) {
    case 'OPEN':
      output += stash.widget.lozenge.lozenge({extraClasses: 'aui-lozenge-complete open' + commonClasses__soy84, text: "OPEN", tooltip: opt_data.tooltip ? opt_data.tooltip : "This pull request is in progress.", clickable: opt_data.clickable, href: opt_data.href});
      break;
    case 'OPENED':
      output += stash.widget.lozenge.lozenge({extraClasses: 'aui-lozenge-complete opened' + commonClasses__soy84, text: opt_data.isActivityContext ? "opened" : "OPENED", tooltip: opt_data.tooltip ? opt_data.tooltip : "This pull request is in progress.", clickable: opt_data.clickable, href: opt_data.href});
      break;
    case 'MERGED':
      output += stash.widget.lozenge.lozenge({extraClasses: 'aui-lozenge-success merged' + commonClasses__soy84, text: opt_data.isActivityContext ? "merged" : "MERGED", tooltip: opt_data.tooltip ? opt_data.tooltip : "This pull request has been merged.", clickable: opt_data.clickable, href: opt_data.href});
      break;
    case 'DECLINED':
      output += stash.widget.lozenge.lozenge({extraClasses: 'aui-lozenge-error declined' + commonClasses__soy84, text: opt_data.isActivityContext ? "declined" : "DECLINED", tooltip: opt_data.tooltip ? opt_data.tooltip : "This pull request has been declined.", clickable: opt_data.clickable, href: opt_data.href});
      break;
    case 'REOPENED':
      output += stash.widget.lozenge.lozenge({extraClasses: 'aui-lozenge-complete reopened' + commonClasses__soy84, text: opt_data.isActivityContext ? "reopened" : "REOPENED", tooltip: opt_data.tooltip ? opt_data.tooltip : "This pull request has been reopened.", clickable: opt_data.clickable, href: opt_data.href});
      break;
    case 'UPDATED':
    case 'RESCOPED':
      output += stash.widget.lozenge.lozenge({extraClasses: 'aui-lozenge-current updated' + commonClasses__soy84, text: opt_data.isActivityContext ? "updated" : "UPDATED", tooltip: opt_data.tooltip ? opt_data.tooltip : "This pull request has been updated.", clickable: opt_data.clickable, href: opt_data.href});
      break;
    case 'APPROVED':
      output += stash.widget.lozenge.lozenge({extraClasses: 'aui-lozenge-success approved' + commonClasses__soy84, text: opt_data.isActivityContext ? "approved" : "Approved", tooltip: opt_data.tooltip ? opt_data.tooltip : "This pull request has been approved.", clickable: opt_data.clickable, href: opt_data.href});
      break;
    case 'UNAPPROVED':
      output += stash.widget.lozenge.lozenge({extraClasses: 'aui-lozenge-error unapproved' + commonClasses__soy84, text: opt_data.isActivityContext ? "unapproved" : "Unapproved", tooltip: opt_data.tooltip ? opt_data.tooltip : "The approval has been withdrawn from this pull request.", clickable: opt_data.clickable, href: opt_data.href});
      break;
  }
  return output;
};
if (goog.DEBUG) {
  stash.widget.lozenge.pullRequestState.soyTemplateName = 'stash.widget.lozenge.pullRequestState';
}


stash.widget.lozenge.enabled = function(opt_data, opt_ignored) {
  return '' + stash.widget.lozenge.lozenge({extraClasses: opt_data.isEnabled ? 'lozenge-enabled' : 'lozenge-disabled', text: opt_data.isEnabled ? "Enabled" : "Disabled", tooltip: opt_data.tooltip});
};
if (goog.DEBUG) {
  stash.widget.lozenge.enabled.soyTemplateName = 'stash.widget.lozenge.enabled';
}
;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:project-avatar', location = '/static/feature/project/project-avatar/project-avatar.soy' */
// This file was automatically generated from project-avatar.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace stash.feature.project.
 */

if (typeof stash == 'undefined') { var stash = {}; }
if (typeof stash.feature == 'undefined') { stash.feature = {}; }
if (typeof stash.feature.project == 'undefined') { stash.feature.project = {}; }


stash.feature.project.avatar = function(opt_data, opt_ignored) {
  return '' + aui.avatar.avatar({tagName: opt_data.tagName, size: opt_data.size, avatarImageUrl: opt_data.imageUrl ? opt_data.imageUrl : opt_data.project ? require('stash/api/util/navbuilder')._avatarUrl(opt_data.project, ({XSMALL:32,SMALL:48,MEDIUM:64,LARGE:96,XLARGE:128,XXLARGE:192,XXXLARGE:256})[opt_data.size.toUpperCase()]).build() : '', accessibilityText: opt_data.project ? opt_data.project.name : '', title: opt_data.tooltip, badgeContent: opt_data.badgeContent, isProject: ! opt_data.project.owner, imageClasses: opt_data.imageClasses, extraClasses: (opt_data.hideBadge ? ' badge-hidden' : '') + (opt_data.extraClasses ? ' ' + opt_data.extraClasses : ''), extraAttributes: opt_data.extraAttributes});
};
if (goog.DEBUG) {
  stash.feature.project.avatar.soyTemplateName = 'stash.feature.project.avatar';
}
;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:ref-lozenge', location = '/static/feature/repository/ref-lozenge/ref-lozenge.soy' */
// This file was automatically generated from ref-lozenge.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace stash.feature.repository.
 */

if (typeof stash == 'undefined') { var stash = {}; }
if (typeof stash.feature == 'undefined') { stash.feature = {}; }
if (typeof stash.feature.repository == 'undefined') { stash.feature.repository = {}; }


stash.feature.repository.refLozenge = function(opt_data, opt_ignored) {
  return '' + stash.widget.lozenge.htmlLozenge({extraClasses: (opt_data.extraClasses ? opt_data.extraClasses + ' ' : '') + 'ref-lozenge', monospace: true, htmlElement: 'span', content: ((opt_data.repository) ? '<span class="repository">' + stash.feature.project.avatar({size: 'xsmall', project: opt_data.repository.project, tagName: 'span'}) + '<span class="name">' + soy.$$escapeHtml(opt_data.repository.name) + '</span></span>' : '') + '<span class="ref ' + soy.$$escapeHtml(opt_data.ref.type && opt_data.ref.type.id ? opt_data.ref.type.id.toLowerCase() : 'branch') + '">' + aui.icons.icon({size: 'small', useIconFont: true, iconFontSet: 'devtools', icon: opt_data.ref.type && opt_data.ref.type.id.toLowerCase() == 'tag' ? 'tag' : 'branch-small'}) + '<span class="name" aria-label="' + ((opt_data.refAccessibilityText) ? soy.$$escapeHtml(opt_data.refAccessibilityText) : soy.$$escapeHtml(AJS.format("branch {0}",opt_data.ref.displayId))) + '">' + soy.$$escapeHtml(opt_data.ref.displayId) + '</span></span>', extraAttributes: {'data-ref-tooltip': opt_data.tooltip ? opt_data.tooltip : (opt_data.repository ? opt_data.repository.project.name + ' / ' + opt_data.repository.name + ' : ' : '') + opt_data.ref.displayId}});
};
if (goog.DEBUG) {
  stash.feature.repository.refLozenge.soyTemplateName = 'stash.feature.repository.refLozenge';
}
;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:ref-lozenge', location = '/static/feature/repository/ref-lozenge/ref-lozenge.js' */
define("feature/repository/ref-lozenge",["jquery"],function(d){d(".ref-lozenge").tooltip({live:!0,title:"data-ref-tooltip",hoverable:!0,gravity:function(){return d.fn.tipsy.autoNS.call(this)+d.fn.tipsy.autoWE.call(this)},delayIn:500,className:function(){var a=d(".tipsy"),c=a[0],b=a.prop("className"),e=/tipsy-[ns]?e/.test(b),b=/tipsy-s/.test(b),f=e?c.offsetWidth:void 0,g=b?c.offsetHeight:void 0;a.addClass("ref-lozenge-tooltip");e&&(e=c.offsetWidth-f,f=parseFloat(a.css("left"),10),a.css("left",f-e+
"px"));b&&(c=c.offsetHeight-g,b=parseFloat(a.css("top"),10),a.css("top",b-c+"px"));return"ref-lozenge-tooltip"}})});require("feature/repository/ref-lozenge");;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:branch-diagram', location = '/static/feature/repository/branch-diagram/branch-diagram.js' */
define("feature/repository/branch-diagram",["jquery","lodash","model/repository","model/revision-reference"],function(f,e,g,h){function a(b){this.$el=f(b)}a.prototype._updateRefLozenge=function(b,c,a){var d=this.$el.find("."+b);d.trigger("mouseout");c&&c instanceof h?c.getDisplayId()||c.getId()?(b=stash.feature.repository.refLozenge({ref:c.toJSON(),repository:a&&a instanceof g?a.toJSON():null,extraClasses:b}),d.length?d.replaceWith(b).removeClass("invisible"):this.$el.append(b)):d.addClass("invisible"):
null!=c&&""!==c||d.addClass("invisible");d=this.$el.find(".source-ref").length&&this.$el.find(".target-ref").length;this.$el.toggleClass("disabled",!d)};a.prototype.updateSourceRef=e.partial(a.prototype._updateRefLozenge,"source-ref");a.prototype.updateTargetRef=e.partial(a.prototype._updateRefLozenge,"target-ref");return a});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:branch-diagram', location = '/static/feature/repository/branch-diagram/branch-diagram.soy' */
// This file was automatically generated from branch-diagram.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace stash.feature.repository.
 */

if (typeof stash == 'undefined') { var stash = {}; }
if (typeof stash.feature == 'undefined') { stash.feature = {}; }
if (typeof stash.feature.repository == 'undefined') { stash.feature.repository = {}; }


stash.feature.repository.branchDiagram = function(opt_data, opt_ignored) {
  return '<div class="branch-diagram branch-diagram-' + soy.$$escapeHtml(opt_data.type) + ((! opt_data.sourceRef || ! opt_data.targetRef) ? ' disabled' : '') + aui.renderExtraClasses(opt_data) + '"' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + '><div class="diagram-image"></div>' + ((opt_data.sourceRef) ? stash.feature.repository.refLozenge({ref: opt_data.sourceRef, extraClasses: 'source-ref', repository: opt_data.sourceRepo}) : '') + ((opt_data.targetRef) ? stash.feature.repository.refLozenge({ref: opt_data.targetRef, extraClasses: 'target-ref', repository: opt_data.targetRepo}) : '') + ((opt_data.content) ? soy.$$filterNoAutoescape(opt_data.content) : '') + '</div>';
};
if (goog.DEBUG) {
  stash.feature.repository.branchDiagram.soyTemplateName = 'stash.feature.repository.branchDiagram';
}
;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:breadcrumbs', location = '/static/widget/breadcrumbs/breadcrumbs.js' */
define("widget/breadcrumbs","jquery lodash memoir stash/api/util/navbuilder util/dom-event util/events model/page-state".split(" "),function(d,h,k,l,m,n,p){function e(a){this.$container=d(a);if(k.nativeSupport()){var b=this;this.$container.on("click","a",function(a){m.openInSameTab(a)&&(n.trigger("stash.widget.breadcrumbs.urlChanged",b,d(this).attr("href")),a.preventDefault())})}}function q(a,b){var c=[],d=h.map(b,function(b){c=c.slice(0);c.push(b);return{text:b,url:f(c,a)}});d.unshift({text:p.getRepository().getName(),
url:f([],a)});return d}var g=l.currentRepo().browse(),f=function(a,b){return b.isDefault()?g.path(a).build():g.path(a).at(b.getId()).build()};e.prototype.update=function(a,b,c){this.$container.empty().append(stash.widget.breadcrumbs.crumbs({pathComponents:q(a,b.getComponents()),trailingSlash:c}))};return e});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:breadcrumbs', location = '/static/widget/breadcrumbs/breadcrumbs.soy' */
// This file was automatically generated from breadcrumbs.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace stash.widget.breadcrumbs.
 */

if (typeof stash == 'undefined') { var stash = {}; }
if (typeof stash.widget == 'undefined') { stash.widget = {}; }
if (typeof stash.widget.breadcrumbs == 'undefined') { stash.widget.breadcrumbs = {}; }


stash.widget.breadcrumbs.back = function(opt_data, opt_ignored) {
  return '<li><a id="' + soy.$$escapeHtml(opt_data.id) + '" class="breadcrumbs" href="' + soy.$$escapeHtml(opt_data.href) + '">' + aui.icons.icon({icon: 'back-page', useIconFont: true}) + soy.$$escapeHtml(opt_data.text) + '</a></li>' + ((opt_data.crumb) ? '<li>' + soy.$$escapeHtml(opt_data.crumb) + ((opt_data.state) ? stash.widget.lozenge.pullRequestState(opt_data) : '') + '</li>' : '');
};
if (goog.DEBUG) {
  stash.widget.breadcrumbs.back.soyTemplateName = 'stash.widget.breadcrumbs.back';
}


stash.widget.breadcrumbs.crumbs = function(opt_data, opt_ignored) {
  var output = '';
  var pathComponentList23 = opt_data.pathComponents;
  var pathComponentListLen23 = pathComponentList23.length;
  for (var pathComponentIndex23 = 0; pathComponentIndex23 < pathComponentListLen23; pathComponentIndex23++) {
    var pathComponentData23 = pathComponentList23[pathComponentIndex23];
    output += stash.widget.breadcrumbs.breadcrumbFragment({isLast: pathComponentIndex23 == pathComponentListLen23 - 1, url: pathComponentIndex23 == pathComponentListLen23 - 1 ? opt_data.primaryLink : pathComponentData23.url, text: pathComponentData23.text}) + ((! (pathComponentIndex23 == pathComponentListLen23 - 1) || opt_data.trailingSlash) ? stash.widget.breadcrumbs.sep(null) : '');
  }
  return output;
};
if (goog.DEBUG) {
  stash.widget.breadcrumbs.crumbs.soyTemplateName = 'stash.widget.breadcrumbs.crumbs';
}


stash.widget.breadcrumbs.breadcrumbs = function(opt_data, opt_ignored) {
  return '<div class="breadcrumbs">' + stash.widget.breadcrumbs.crumbs(opt_data) + '</div>';
};
if (goog.DEBUG) {
  stash.widget.breadcrumbs.breadcrumbs.soyTemplateName = 'stash.widget.breadcrumbs.breadcrumbs';
}


stash.widget.breadcrumbs.breadcrumbFragment = function(opt_data, opt_ignored) {
  return '' + ((opt_data.url) ? '<a' + ((opt_data.isLast) ? ' class="stub"' : '') + ' href="' + soy.$$escapeHtml(opt_data.url) + '">' + soy.$$escapeHtml(opt_data.text) + '</a>' : '<span' + ((opt_data.isLast) ? ' class="stub"' : '') + '>' + soy.$$escapeHtml(opt_data.text) + '</span>');
};
if (goog.DEBUG) {
  stash.widget.breadcrumbs.breadcrumbFragment.soyTemplateName = 'stash.widget.breadcrumbs.breadcrumbFragment';
}


stash.widget.breadcrumbs.sep = function(opt_data, opt_ignored) {
  return '<span class="sep">/</span>';
};
if (goog.DEBUG) {
  stash.widget.breadcrumbs.sep.soyTemplateName = 'stash.widget.breadcrumbs.sep';
}
;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:code-block', location = '/static/widget/code-block/code-block.soy' */
// This file was automatically generated from code-block.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace stash.widget.
 */

if (typeof stash == 'undefined') { var stash = {}; }
if (typeof stash.widget == 'undefined') { stash.widget = {}; }


stash.widget.codeBlock = function(opt_data, opt_ignored) {
  return '<div class="code-block' + ((opt_data.instructionBlock) ? ' instruction-block' : '') + ((opt_data.extraClasses) ? ' ' + soy.$$escapeHtml(opt_data.extraClasses) : '') + '"><pre><code>' + soy.$$filterNoAutoescape(opt_data.content) + '</code></pre></div>';
};
if (goog.DEBUG) {
  stash.widget.codeBlock.soyTemplateName = 'stash.widget.codeBlock';
}
;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:submit-spinner', location = '/static/widget/submit-spinner/submit-spinner.js' */
define("widget/submit-spinner",["jquery"],function(b){function a(c,d){if(!(this instanceof a))return new a(c);this.$button=b(c);this.$spinner=b('\x3cdiv class\x3d"submit-spinner invisible" /\x3e');"before"===d?this.$spinner.insertBefore(this.$button):this.$spinner.insertAfter(this.$button)}a.prototype.show=function(){this.$spinner.removeClass("invisible");this.$spinner.spin();return this};a.prototype.hide=function(){this.$spinner.addClass("invisible");this.$spinner.spinStop();return this};a.prototype.remove=
function(){this.$spinner.remove();return this};return a});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:confirm-dialog', location = '/static/widget/confirm-dialog.js' */
define("widget/confirm-dialog",["aui","jquery","lodash","util/ajax","widget/submit-spinner"],function(e,d,l,q,r){function a(b,t){this.dialogOptions=d.extend({},a.dialogDefaults,b);this.ajaxOptions=t||{};this._selectors=[];this._okCallbacks=d.Callbacks();this._cancelCallback=d.Callbacks();this._detachers=d.Callbacks();this._attached=!1}a.prototype.getConfirmButton=function(){return d("#"+this.dialogOptions.id+" ."+this.dialogOptions.confirmButtonClass)};a.prototype.getButtons=function(){var b=this.getConfirmButton(),
a=this.dialogOptions.id;l.each(this._selectors,function(e){b=b.add(d("#"+a+" "+e))});return b};a.prototype.setButtonsDisabled=function(b){this.getButtons().each(function(){var a=d(this);a.prop("disabled",b).toggleClass("disabled",b);b?a.attr("aria-disabled","true"):a.removeAttr("aria-disabled")})};a.prototype.destroy=function(){this._detachers.fire();this._detachers=null};a.prototype.attachTo=function(b,a,m){var g=this,c=this.dialogOptions,l=this.ajaxOptions,u=this._okCallbacks,v=this._cancelCallback;
m=m||document;var f=d(m);this._selectors.push(b);var n=function(){g.setButtonsDisabled(!1)};f.on("hideLayer",n);var p=function(b){b.preventDefault();var k=d(this);if(!k.is(":disabled")){var f=function(a){g.setButtonsDisabled(!1);a.remove()},h=new e.Dialog({width:c.width,height:c.height,id:c.id,focusSelector:c.focusSelector,closeOnOutsideClick:!1,keypressListener:function(a){a.stopImmediatePropagation();a.keyCode===e.keyCode.ENTER?(a.preventDefault(),g.getConfirmButton().click()):a.keyCode===e.keyCode.ESCAPE&&
(a.preventDefault(),f(h))}});h.addHeader(c.titleText,c.titleClass);h.addPanel("",c.panelContent,c.panelClass);h.addButton(c.submitText,function(a){g.setButtonsDisabled(!0);var b=null,c=new r(g.getConfirmButton(),"before");g.dialogOptions.submitToHref&&(c.show(),"A"===k[0].tagName?b=q.rest(d.extend({url:k.attr("href")},l)).always(function(){c.hide();f(a)}):k.closest("form")[0].submit());u.fire(b,k,function(){f(a)},a,c)},"button "+(c.confirmButtonClass||""));h.addCancel("Cancel",
function(a){f(a);v.fire(k)});a&&a(this,h,g);h.show();g._attached=!0}};f.on("click",b,p);this._detachers.add(function(){f.off("hideLayer",n);f.off("click",b,p)})};a.prototype.addConfirmListener=function(a){this._okCallbacks.add(a)};a.prototype.addCancelListener=function(a){this._cancelCallback.add(a)};a.dialogDefaults={id:void 0,titleText:"Confirm",titleClass:"confirm-header",confirmButtonClass:"confirm-button",panelContent:"\x3cp\x3e"+"Are you sure you want to do that?"+
"\x3c/p\x3e",panelClass:"panel-body",submitText:"Confirm",submitToHref:!0,height:230,width:433,focusSelector:".confirm-button"};return a});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:summary-panel-widget', location = '/static/widget/summary-panel/summary-panel.soy' */
// This file was automatically generated from summary-panel.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace stash.widget.summaryPanel.
 */

if (typeof stash == 'undefined') { var stash = {}; }
if (typeof stash.widget == 'undefined') { stash.widget = {}; }
if (typeof stash.widget.summaryPanel == 'undefined') { stash.widget.summaryPanel = {}; }


stash.widget.summaryPanel.overviewWebPanel = function(opt_data, opt_ignored) {
  return '<div class="plugin-item' + ((opt_data.extraClasses) ? ' ' + soy.$$escapeHtml(opt_data.extraClasses) : '') + '">' + ((opt_data.linkContent.length > 0) ? '<a href="' + soy.$$escapeHtml(opt_data.linkHref ? opt_data.linkHref : '#') + '"' + ((opt_data.linkClass) ? ' class="' + soy.$$escapeHtml(opt_data.linkClass) + '"' : '') + ((opt_data.linkTooltip) ? ' title="' + soy.$$escapeHtml(opt_data.linkTooltip) + '"' : '') + ((opt_data.linkExtraAttributes) ? aui.renderExtraAttributes({extraAttributes: opt_data.linkExtraAttributes}) : '') + '><span class="aui-icon' + ((opt_data.iconClass) ? ' ' + soy.$$escapeHtml(opt_data.iconClass) : '') + '" ' + ((opt_data.iconTooltip) ? 'title="' + soy.$$escapeHtml(opt_data.iconTooltip) + '"' : '') + ' >' + ((opt_data.iconUrl) ? '<img src="' + soy.$$escapeHtml(opt_data.iconUrl) + '" alt="" />' : '') + ((opt_data.iconText) ? soy.$$escapeHtml(opt_data.iconText) : '') + '</span>' + soy.$$filterNoAutoescape(opt_data.linkContent) + '</a>' : '') + ((opt_data.extraContent) ? '<div class="item-extra-content">' + soy.$$filterNoAutoescape(opt_data.extraContent) + '</div>' : '') + '</div>';
};
if (goog.DEBUG) {
  stash.widget.summaryPanel.overviewWebPanel.soyTemplateName = 'stash.widget.summaryPanel.overviewWebPanel';
}


stash.widget.summaryPanel.relatedEntitiesWebPanel = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '' + stash.widget.summaryPanel.overviewWebPanel(soy.$$augmentMap(opt_data, {linkContent: '' + ((opt_data.count) ? '<strong class="count">' + soy.$$escapeHtml(opt_data.count) + '</strong> ' : '') + ((opt_data.linkText) ? '<span class="label">' + soy.$$escapeHtml(opt_data.linkText) + '</span>' : '')}));
};
if (goog.DEBUG) {
  stash.widget.summaryPanel.relatedEntitiesWebPanel.soyTemplateName = 'stash.widget.summaryPanel.relatedEntitiesWebPanel';
}


stash.widget.summaryPanel.linkWebPanel = function(opt_data, opt_ignored) {
  return '' + stash.widget.summaryPanel.overviewWebPanel(soy.$$augmentMap(opt_data, {iconClass: 'aui-icon-small' + (opt_data.iconClass ? ' ' + opt_data.iconClass : '')}));
};
if (goog.DEBUG) {
  stash.widget.summaryPanel.linkWebPanel.soyTemplateName = 'stash.widget.summaryPanel.linkWebPanel';
}
;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:discussion-participants-list', location = '/static/feature/discussion/participants-list/participants-list.js' */
define("feature/discussion/participants-list",["aui","lodash"],function(c,d){function b(a,b,c){this.$list=b;this.$container=c;this.participants=a;d.bindAll(this,"addedParticipantHandler","approvalHandler");a.on("change:approved",this.approvalHandler);a.on("add",this.addedParticipantHandler)}b.prototype.addedParticipantHandler=function(a){this.$list.append("\x3cli\x3e"+stash.widget.avatarList.participantAvatar({participant:a.toJSON(),extraClasses:"participant-item",withName:!0})+"\x3c/li\x3e");a=this.$container.find(".count");
if(a.length){var b=parseInt(a.text(),10);1===b&&this.$container.find(".label").text("Participants");a.text(++b)}else this.$container.find(".participants-trigger").prepend(stash.feature.discussion.participantCount({count:1}));this.$container.removeClass("hidden")};b.prototype.approvalHandler=function(a){this.$list.find(".user-avatar[data-username\x3d'"+a.getUser().getName()+"']").toggleClass("badge-hidden",!a.getApproved())};b.prototype.destroy=function(){this.participants.off("add",
this.addedParticipantHandler);this.participants.off("change:approved",this.approvalHandler)};return b});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:discussion-participants-list', location = '/static/feature/discussion/participants-list/participants-list.soy' */
// This file was automatically generated from participants-list.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace stash.feature.discussion.
 */

if (typeof stash == 'undefined') { var stash = {}; }
if (typeof stash.feature == 'undefined') { stash.feature = {}; }
if (typeof stash.feature.discussion == 'undefined') { stash.feature.discussion = {}; }


stash.feature.discussion.participants = function(opt_data, opt_ignored) {
  var param17 = '<ul class="aui-list-truncate">';
  var participantList19 = opt_data.participants;
  var participantListLen19 = participantList19.length;
  for (var participantIndex19 = 0; participantIndex19 < participantListLen19; participantIndex19++) {
    var participantData19 = participantList19[participantIndex19];
    param17 += '<li>' + stash.widget.avatarList.participantAvatar({participant: participantData19, extraClasses: 'participant-item', withName: true}) + '</li>';
  }
  param17 += '</ul>';
  var param14 = '' + aui.dropdown2.contents({id: 'participants-dropdown', extraClasses: 'aui-style-default aui-dropdown2-tailed avatar-dropdown participants-dropdown', content: param17});
  var output = '' + stash.widget.summaryPanel.relatedEntitiesWebPanel({iconClass: 'aui-icon-small aui-iconfont-user', linkText: '' + soy.$$escapeHtml(AJS.format("{0,choice,1#Participant|1\x3cParticipants}",opt_data.participants.length)), linkClass: 'participants-trigger aui-dropdown2-trigger', linkExtraAttributes: 'aria-owns=participants-dropdown aria-haspopup=true', count: opt_data.participants.length, extraClasses: 'participants' + ((! opt_data.participants.length) ? ' hidden' : ''), extraContent: param14});
  return output;
};
if (goog.DEBUG) {
  stash.feature.discussion.participants.soyTemplateName = 'stash.feature.discussion.participants';
}


stash.feature.discussion.participantCount = function(opt_data, opt_ignored) {
  return '<strong class="count">' + soy.$$escapeHtml(opt_data.count) + '</strong> ';
};
if (goog.DEBUG) {
  stash.feature.discussion.participantCount.soyTemplateName = 'stash.feature.discussion.participantCount';
}
;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:feature-loader-util', location = '/static/util/feature-loader.js' */
define("util/feature-loader",["aui","jquery","lodash","require","util/events"],function(B,c,b,C,f){function u(b,c){if("function"!==typeof b.load||"function"!==typeof b.unload)throw Error("Modules require both a load and unload callback. Please use:\n"+v(c));}function v(b){return"FeatureLoader.registerHandler('"+b+"', /urlMatcher/, {\n    load : loadFn,\n    unload : unloadFn,\n    keyboardShortcutContexts : [ 'changeset', ... ]});"}function k(h){function D(a){function g(){f.trigger(h.unloadedEvent,
null,a)}if(!b.contains(e,a))return c.Deferred().resolve();var d=a.module.unload(l);e=b.without(e,a);if(d&&d.then)return d.then(g);g();return c.Deferred().resolve()}function w(a){function g(){f.trigger(h.loadedEvent,null,a)}if(b.contains(e,a))return c.Deferred().resolve();a.module||(a.module=C(a.moduleName),u(a.module,a.name));var d=a.module.load(l);e.push(a);if(d&&d.then)return d.then(g);g();return c.Deferred().resolve()}function x(){if(!m||q!==window.location.href){q=window.location.href;var a=r(q);
a.length?(b.each(a,function(a){f.trigger(h.requestedEvent,null,a.name)}),n||(n=!0,y.then(E))):m?window.location.reload():f.trigger(h.errorEvent,null,{message:"No handler is registered to the current page",code:k.NO_HANDLER})}}function E(){n=!1;var a=r(window.location.href),g=b.difference(a,e),a=b.difference(e,a);if(g.length||a.length)e.length?a=c.when.apply(c,b.map(a,D)):(c(l).empty(),a=c.Deferred().resolve()),y=a.then(function(){return c.when.apply(c,b.map(g,w))}).then(function(){t&&t.resetContexts()})}
function r(a){return b.filter(p,function(b){return b.urlRegex&&b.urlRegex.test(a)})}function z(){x()}function F(a){return a.module&&a.module.keyboardShortcutContexts||[]}function A(a){var c=b.chain(e).map(F).flatten().uniq().value();b.each(c,function(b){a.enableContext(b)})}if(!(this instanceof k))return new k(h);h=c.extend({},k.defaults,h);var q=window.location.href,e=[],p={},y=c.Deferred().resolve(),n,m=!1,l,t;this.registerHandler=function(a,c,d){if(b.has(p,a))throw Error("A handler with the name '"+
a+"' already exists.");if(!d)throw Error("No module or module name was provided. Please use:\n"+v(a));"string"===typeof d?a=p[a]={name:a,urlRegex:c,moduleName:d}:(u(d,a),a=p[a]={name:a,urlRegex:c,module:d});m&&!n&&b.contains(r(window.location.href),a)&&w(a);return this};this.setElement=function(a){l=a};this.setKeyboardShortcuts=function(a){t=a};this.current=function(){return e.slice()};this.init=function(a){l=a;x();f.on("memoir.changestate",z);f.on("stash.widget.keyboard-shortcuts.register-contexts",
A);m=!0};this.destroy=function(){f.off("memoir.changestate",z);f.off("stash.widget.keyboard-shortcuts.register-contexts",A)};return this}k.defaults={unloadedEvent:"stash.util.feature-loader.unloaded",loadedEvent:"stash.util.feature-loader.loaded",requestedEvent:"stash.util.feature-loader.loadRequested",errorEvent:"stash.util.feature-loader.errorOccurred"};k.NO_HANDLER="NO_HANDLER";return k});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:keyboard-shortcuts', location = '/static/widget/keyboard-shortcuts/keyboard-shortcuts.js' */
define("widget/keyboard-shortcuts","aui jquery lodash util/events util/navigator exports".split(" "),function(b,g,d,m,q,f){function c(){if(!(this instanceof c))return new c;this._enabledContexts=[]}function n(a,b){a=g.extend({},a);a.keys=d.map(a.keys,function(a){return d.map(a,function(a){if(d.all(["key","modifiers"],d.partial(d.has,a)))return a;var h=1<a.length?a.split("+"):a;return d.isArray(h)&&1!==h.length?{key:h.pop(),modifiers:b&&!1===b.convertOSModifier?h:d.map(h,c.convertOSModifier)}:a})});
a.displayContext||(a.displayContext=c._contextDisplayInfo[a.context]?c._contextDisplayInfo[a.context].displayName:a.context.replace(/\b[a-z]/g,function(a){return a.toUpperCase()}));k[a.displayContext]||(k[a.displayContext]=[]);k[a.displayContext].push(a)}function p(a,b){m.trigger("internal.stash.ui.keyboard.shortcutClicked",null,{context:a,keyEventName:b})}var r=/^[cC]trl$/i,l,k={};c.prototype._setRegistry=function(a){this._registry=a};c.prototype._initContent=function(){this._dialog=b.dialog2(aui.dialog.dialog2({titleText:"Keyboard shortcuts",
content:stash.widget.keyboardShortcutsContent({contextNames:d.keys(k),contexts:d.values(k)}),size:"large",id:"keyboard-shortcut-dialog"}))};c.prototype._bind=function(a){this._$trigger=a;var b=this;this._$trigger.on("click",function(a){a.preventDefault();b._show()})};c.prototype.enableContext=function(a){-1===g.inArray(a,this._enabledContexts)&&(l=a,this._registry.enableContext(a),l=void 0,this._enabledContexts.push(a))};c.prototype.resetContexts=function(){b.trigger("remove-bindings.keyboardshortcuts");
this._enabledContexts=[];b.trigger("add-bindings.keyboardshortcuts")};c.prototype._show=function(){this._hasShown||(this._initContent(),this._hasShown=!0);this._dialog.show()};c.prototype.addCustomShortcut=function(a,b,c,d){n({keys:b,context:a,displayContext:d,description:c},{convertOSModifier:!1})};c.convertOSModifier=function(a){return q.isMac()?a.replace(r,"\u2318"):a};c.internalizeShortcuts=function(a){d.each(a,n)};c._contextDisplayInfo={repository:{displayName:"Within A Repository"},
"branch-compare":{displayName:"Branch compare"},"branch-list":{displayName:"Branch list"},changeset:{displayName:"Changeset"},commits:{displayName:"Commit List"},"diff-tree":{displayName:"Changeset"},"diff-view":{displayName:"Diff View"},
filebrowser:{displayName:"Directory Browsing"},global:{displayName:"Global"},"pull-request":{displayName:"Within A Pull Request"},"pull-request-list":{displayName:"Pull Request List"},"pull-request-overview":{displayName:"Within A Pull Request"},sourceview:{displayName:"Source View"}};
var e=new c;f.onReady=function(){e._bind(g(".keyboard-shortcut-link"));var a=g.Deferred();g(document).ready(function(){setTimeout(function(){a.resolve()},0)});b.bind("register-contexts.keyboardshortcuts",function(b,c){e._setRegistry(c.shortcutRegistry);e.enableContext("global");a.done(function(){m.trigger("stash.widget.keyboard-shortcuts.register-contexts",e,e)})});b.bind("shortcuts-loaded.keyboardshortcuts",function(a,b){c.internalizeShortcuts(b.shortcuts)});b.params["keyboardshortcut-hash"]="bundled";
b.trigger("initialize.keyboardshortcuts");require("util/shortcuts").bind("keyboardShortcutsDialog",e._show.bind(e))};f.addTooltip=function(a,e){var f=d(e.split("+")).chain().map(c.convertOSModifier).map(function(a){return"shift"===a?"Shift":"ctrl"===a?c.convertOSModifier("Ctrl"):a}).value().join(" + "),g=a.attr("title");a.attr("title",g+b.format(" (type \u0027\u0027{0}\u0027\u0027)",f));return{remove:function(){a.attr("title",
g)}}};f.bindKeyboardShortcutAnalytics=function(a,b){b.onValue(p.bind(null,l,a))};f.fireKeyboardShocutAnalyticsEvent=p;f.getEnablingContext=function(){return l};f.showDialog=function(){e&&e._show()};f.resetContexts=function(){e.resetContexts()}});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:keyboard-shortcuts', location = '/static/widget/keyboard-shortcuts/keyboard-shortcuts.soy' */
// This file was automatically generated from keyboard-shortcuts.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace stash.widget.
 */

if (typeof stash == 'undefined') { var stash = {}; }
if (typeof stash.widget == 'undefined') { stash.widget = {}; }


stash.widget.keyboardShortcutsContent = function(opt_data, opt_ignored) {
  var param6 = '';
  var contextNameList7 = opt_data.contextNames;
  var contextNameListLen7 = contextNameList7.length;
  for (var contextNameIndex7 = 0; contextNameIndex7 < contextNameListLen7; contextNameIndex7++) {
    var contextNameData7 = contextNameList7[contextNameIndex7];
    param6 += (contextNameIndex7 % 2 == 0) ? stash.widget.keyboardShortContext({contextName: contextNameData7, contextShortcuts: opt_data.contexts[contextNameIndex7]}) : '';
  }
  var param5 = '' + aui.group.item({content: param6});
  var param15 = '';
  var contextNameList16 = opt_data.contextNames;
  var contextNameListLen16 = contextNameList16.length;
  for (var contextNameIndex16 = 0; contextNameIndex16 < contextNameListLen16; contextNameIndex16++) {
    var contextNameData16 = contextNameList16[contextNameIndex16];
    param15 += (contextNameIndex16 % 2 == 1) ? stash.widget.keyboardShortContext({contextName: contextNameData16, contextShortcuts: opt_data.contexts[contextNameIndex16]}) : '';
  }
  param5 += aui.group.item({content: param15});
  var output = '' + aui.group.group({extraClasses: 'keyboard-shortcut-help', extraAttributes: {tabindex: '-1'}, content: param5});
  return output;
};
if (goog.DEBUG) {
  stash.widget.keyboardShortcutsContent.soyTemplateName = 'stash.widget.keyboardShortcutsContent';
}


stash.widget.keyboardShortContext = function(opt_data, opt_ignored) {
  var output = '<div class="keyboard-shortcut-context"><h3>' + soy.$$escapeHtml(opt_data.contextName) + '</h3><dl>';
  var shortcutList29 = opt_data.contextShortcuts;
  var shortcutListLen29 = shortcutList29.length;
  for (var shortcutIndex29 = 0; shortcutIndex29 < shortcutListLen29; shortcutIndex29++) {
    var shortcutData29 = shortcutList29[shortcutIndex29];
    output += (! shortcutData29.hidden) ? stash.widget.keyboardShortcutItem({shortcut: shortcutData29}) : '';
  }
  output += '</dl></div>';
  return output;
};
if (goog.DEBUG) {
  stash.widget.keyboardShortContext.soyTemplateName = 'stash.widget.keyboardShortContext';
}


stash.widget.keyboardShortcutItem = function(opt_data, opt_ignored) {
  var output = '<dt>' + soy.$$escapeHtml(opt_data.shortcut.description) + '</dt>';
  var optionList40 = opt_data.shortcut.keys;
  var optionListLen40 = optionList40.length;
  for (var optionIndex40 = 0; optionIndex40 < optionListLen40; optionIndex40++) {
    var optionData40 = optionList40[optionIndex40];
    output += ((! (optionIndex40 == 0) && ! (optionIndex40 == optionListLen40 - 1)) ? '<dd class=\'separator\'>' + soy.$$escapeHtml(",") + '</dd>' : '') + ((! (optionIndex40 == 0) && optionIndex40 == optionListLen40 - 1) ? '<dd class=\'separator\'>' + soy.$$escapeHtml(" or") + '</dd>' : '') + '<dd>' + stash.widget.keyboardShortcutOption({sequence: optionData40}) + '</dd>';
  }
  return output;
};
if (goog.DEBUG) {
  stash.widget.keyboardShortcutItem.soyTemplateName = 'stash.widget.keyboardShortcutItem';
}


stash.widget.keyboardShortcutOption = function(opt_data, opt_ignored) {
  var output = '';
  var keypressList57 = opt_data.sequence;
  var keypressListLen57 = keypressList57.length;
  for (var keypressIndex57 = 0; keypressIndex57 < keypressListLen57; keypressIndex57++) {
    var keypressData57 = keypressList57[keypressIndex57];
    output += ((! (keypressIndex57 == 0)) ? ' ' + soy.$$escapeHtml("then") + ' ' : '') + ((keypressData57.modifiers) ? stash.widget.keyboardShortcutModifier({keypress: keypressData57}) : stash.widget.keyboardShortcutKey({key: keypressData57}));
  }
  return output;
};
if (goog.DEBUG) {
  stash.widget.keyboardShortcutOption.soyTemplateName = 'stash.widget.keyboardShortcutOption';
}


stash.widget.keyboardShortcutModifier = function(opt_data, opt_ignored) {
  var output = '';
  var modifierList72 = opt_data.keypress.modifiers;
  var modifierListLen72 = modifierList72.length;
  for (var modifierIndex72 = 0; modifierIndex72 < modifierListLen72; modifierIndex72++) {
    var modifierData72 = modifierList72[modifierIndex72];
    output += stash.widget.keyboardShortcutKey({key: modifierData72});
  }
  output += stash.widget.keyboardShortcutKey({key: opt_data.keypress.key});
  return output;
};
if (goog.DEBUG) {
  stash.widget.keyboardShortcutModifier.soyTemplateName = 'stash.widget.keyboardShortcutModifier';
}


stash.widget.keyboardShortcutKey = function(opt_data, opt_ignored) {
  return '<kbd>' + soy.$$escapeHtml(opt_data.key) + '</kbd>';
};
if (goog.DEBUG) {
  stash.widget.keyboardShortcutKey.soyTemplateName = 'stash.widget.keyboardShortcutKey';
}
;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:keyboard-shortcuts-util', location = '/static/util/shortcuts.js' */
define("util/shortcuts","aui bacon util/deprecation util/navigator widget/keyboard-shortcuts exports".split(" "),function(l,m,n,p,f,g){function k(b){var a=d[b];a.lazy.whenIType&&a.lazy.whenIType.unbind();var c=l.whenIType(a.lazy.keys);a.lazy.whenIType=c;c.execute(a._sink);c.execute(f.fireKeyboardShocutAnalyticsEvent.bind(null,a.lazy.analyticsContext,b))}function h(b){d.hasOwnProperty(b)||(d[b]={analyticsBound:!1,lazy:{keys:null,whenIType:null,analyticsContext:null},baconSink:function(a){this._sink&&
this._sink(a)},_sink:null,stream:m.fromBinder(function(a){var c=d[b];c._sink=a;c.lazy.keys&&k(b);return function(){c._sink=null;c.lazy.whenIType&&c.lazy.whenIType.unbind()}})});return d[b]}var d={};g.registerLazy=function(b,a,c){p.isMac()&&(c=c.replace(/ctrl/i,"meta"));a.unbind();a=h(b);a.lazy.keys=c;a.lazy.analyticsContext=f.getEnablingContext();a._sink&&k(b)};g.setup=function(b,a,c){var e=h(b);a.execute(e.baconSink.bind(e));e.analyticsBound||(e.analyticsBound=!0,f.bindKeyboardShortcutAnalytics(b,
d[b].stream));n.triggerDeprecated("stash.keyboard.shortcuts."+b,a,c,null,"3.9","4.0")};g.bind=function(b,a){return h(b).stream.onValue(a)}});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:pull-request-branches', location = '/static/feature/pull-request/branches/pull-request-branches.soy' */
// This file was automatically generated from pull-request-branches.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace stash.feature.pullRequest.
 */

if (typeof stash == 'undefined') { var stash = {}; }
if (typeof stash.feature == 'undefined') { stash.feature = {}; }
if (typeof stash.feature.pullRequest == 'undefined') { stash.feature.pullRequest = {}; }


stash.feature.pullRequest.branchToBranch = function(opt_data, opt_ignored) {
  return '<div class="pull-request-branches">' + stash.feature.repository.refLozenge({repository: opt_data.alwaysDisplayRepositories || opt_data.sourceRef.repository.id != opt_data.targetRef.repository.id ? opt_data.sourceRef.repository : null, ref: opt_data.sourceRef, refAccessibilityText: AJS.format("source branch: {0}",opt_data.sourceRef.displayId), extraClasses: 'source-branch'}) + aui.icons.icon({useIconFont: true, iconFontSet: 'devtools', icon: 'arrow-right'}) + stash.feature.repository.refLozenge({repository: opt_data.alwaysDisplayRepositories ? opt_data.targetRef.repository : null, ref: opt_data.targetRef, refAccessibilityText: AJS.format("target branch: {0}",opt_data.targetRef.displayId), extraClasses: 'target-branch'}) + '</div>';
};
if (goog.DEBUG) {
  stash.feature.pullRequest.branchToBranch.soyTemplateName = 'stash.feature.pullRequest.branchToBranch';
}
;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:abbreviate-commit-message-util', location = '/static/util/abbreviate-commit-message.js' */
define("util/abbreviate-commit-message",[],function(){return function(b,a){a=parseInt(a,10);if(b.length<=a)return b;var c=b.indexOf("\n");return 0<c&&c<=a?b.substring(0,c+3>a?a-3:c)+"...":b.substring(0,a-3)+"..."}});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:changeset-link', location = '/static/feature/changeset/changeset-link/changeset-link.soy' */
// This file was automatically generated from changeset-link.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace stash.feature.changeset.
 */

if (typeof stash == 'undefined') { var stash = {}; }
if (typeof stash.feature == 'undefined') { stash.feature = {}; }
if (typeof stash.feature.changeset == 'undefined') { stash.feature.changeset = {}; }


stash.feature.changeset.link = function(opt_data, opt_ignored) {
  return '<' + soy.$$escapeHtml(opt_data.repository ? 'a' : 'span') + '  class="changesetid"  ' + ((opt_data.repository) ? 'href="' + soy.$$escapeHtml(require('stash/api/util/navbuilder').project(opt_data.repository.project).repo(opt_data.repository).changeset(opt_data.changeset.id).withParams(null).withFragment(opt_data.filePath).build()) + '"' : '') + '  ' + ((opt_data.showTooltip && opt_data.changeset.message) ? 'title="' + soy.$$escapeHtml(require('util/abbreviate-commit-message')(opt_data.changeset.message, 100)) + '"' : '') + ' data-changeset-id="' + soy.$$escapeHtml(opt_data.changeset.id) + '">' + soy.$$escapeHtml(opt_data.changeset.displayId) + '</' + soy.$$escapeHtml(opt_data.repository ? 'a' : 'span') + '>';
};
if (goog.DEBUG) {
  stash.feature.changeset.link.soyTemplateName = 'stash.feature.changeset.link';
}
;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:loaded-range', location = '/static/widget/loaded-range.js' */
define("widget/loaded-range",function(){function b(a){this.nextPageStart=this.start=void 0;this._reachedCapacity=this._reachedEnd=this._reachedStart=!1;this._capacity=a||Infinity}b.prototype.isEmpty=function(){return void 0===this.start};b.prototype.isBeforeStart=function(a){return a<this.start};b.prototype.isAfterNextPageStart=function(a){return a>this.nextPageStart};b.prototype.isLoaded=function(a){return!(this.isEmpty()||this.isBeforeStart(a)||this.isAfterNextPageStart(a))};b.prototype.getAttachmentMethod=
function(a,b){return this.isEmpty()?"html":this.isBeforeStart(a)?"prepend":"append"};b.prototype.add=function(a,b,e,c){var d=this.isEmpty();c=c||a+b;if(d||this.isBeforeStart(a))this.start=a;if(d||this.isAfterNextPageStart(c))this.nextPageStart=c;this._reachedStart=this._reachedStart||0>=a;!(this._reachedEnd=this._reachedEnd||e)&&this.nextPageStart>=this._capacity&&(this._reachedCapacity=this._reachedEnd=!0);return this};b.prototype.reachedStart=function(){return this._reachedStart};b.prototype.reachedEnd=
function(){return this._reachedEnd};b.prototype.reachedCapacity=function(){return this._reachedCapacity};b.prototype.pageBefore=function(a){if(this.reachedStart())return null;a=Math.max(0,this.start-a);return{start:a,limit:this.start-a}};b.prototype.pageAfter=function(a){return this.reachedEnd()?null:{start:this.nextPageStart,limit:a}};return b});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:paged-scrollable', location = '/static/widget/paged-scrollable.js' */
define("widget/paged-scrollable","aui jquery lodash util/events util/function util/navigator widget/loaded-range".split(" "),function(n,d,f,l,k,p,q){function b(a,g){this.options=d.extend({},b.defaults,g);this.$scrollElement=d(a||window);if(d.isWindow(this.$scrollElement[0])){var c=window.document.documentElement;this.getPaneHeight=function(){return c.clientHeight};this.getContentHeight=function(){return c.scrollHeight}}this._eventHandlers=[]}function h(a,b,c){if(a.currentXHR)return d.Deferred().reject();
a.currentXHR=a.requestData(b,c);return a.currentXHR.always(function(){a.currentXHR=null}).done(function(e){!a.loadedRange.isEmpty()&&a.options.paginationContext&&l.trigger("internal.stash.ui.nav.pagination",null,{context:a.options.paginationContext,page:(e.start||b)/(e.limit||c)+1});a.onDataLoaded(b,c,e)}).fail(function(){a.suspend()})}var m=p.isIE();b.defaults={pageSize:50,scrollDelay:250,bufferPixels:0,precedingSpaceMaintained:!0,suspendOnFailure:!0,dataLoadedEvent:"stash.widget.pagedscrollable.dataLoaded",
autoLoad:!0,preventOverscroll:!1,idForEntity:null,paginationContext:null};b.prototype.init=function(a){b.prototype.reset.call(this);a=a||{};this.loadedRange=a.loadedRange||new q;var g=this,c=this.options.pageSize,e=a.targetedItem?Math.floor(a.targetedItem/c)*c:0;a.suspended&&this.suspend();return this.loadedRange.isLoaded(e)?(this.loadIfRequired()||d.Deferred().resolve()).done(function(){g.onFirstDataLoaded()}):h(this,e,c).then(void 0,function(){return 0!==e?h(g,0,c):d.Deferred().rejectWith(this,
arguments)}).fail(function(a,b,c,e){e&&e.errors&&e.errors.length&&g.handleErrors(e.errors)})};b.prototype.reset=function(){this.currentXHR&&this.cancelRequest();this.clearListeners();this._resizeHandler&&(d(window).off("resize",this._resizeHandler),this._resizeHandler=null);this.options.idForEntity&&(this._ids={});this._suspended=!1};b.prototype.destroy=function(){this.reset();delete this.$scrollElement};b.prototype.suspend=function(){this._suspended=!0};b.prototype.resume=function(){this._suspended=
!1;return this.loadIfRequired()};b.prototype.isSuspended=function(){return this._suspended};b.prototype.getScrollTop=function(){return this.$scrollElement.scrollTop()};b.prototype.setScrollTop=function(a){this.$scrollElement.scrollTop(a)};b.prototype.getPane=function(){return this.$scrollElement};b.prototype.getPaneHeight=function(){return this.$scrollElement[0].clientHeight};b.prototype.getContentHeight=function(){return this.$scrollElement[0].scrollHeight};b.prototype.getOption=function(a){if(Object.prototype.hasOwnProperty.call(this.options,
a))return this.options[a]};b.prototype.setOptions=function(a){d.isPlainObject(a)&&(this.options=d.extend(this.options,a))};b.prototype.addScrollListener=function(a){a=this.scrollDelay?f.debounce(a,this.scrollDelay):a;this._eventHandlers.push(a);this.$scrollElement.on("scroll.paged-scrollable",a)};b.prototype._bindOverscrollPrevention=function(){function a(a,b){var e=d(this).outerHeight();(this.scrollTop===this.scrollHeight-e&&0>b||0===this.scrollTop&&0<b)&&a.preventDefault()}this._eventHandlers.push(a);
this.$scrollElement.on("mousewheel.paged-scrollable",a)};b.prototype.clearListeners=function(){var a=this;f.each(this._eventHandlers,function(b){a.$scrollElement.unbind(".paged-scrollable",b)});this._eventHandlers.length=0};b.prototype.loadIfRequired=function(){if(!(this.isSuspended()||this.loadedRange.reachedEnd()&&this.loadedRange.reachedStart())){var a=this.getScrollTop(),b=this.getPaneHeight(),c=this.getContentHeight(),b=b+a;if(d.isWindow(this.getPane()[0])||!this.getPane().is(":hidden")){if(f.any([!0,
"previous"],k.eq(this.options.autoLoad))&&a<this.options.bufferPixels+this.loadedRange.start/this.loadedRange.nextPageStart*c&&(a=this.loadedRange.pageBefore(this.options.pageSize)))return this.load(a.start,a.limit);if(f.any([!0,"next"],k.eq(this.options.autoLoad))&&b+1>=c-this.options.bufferPixels&&(c=this.loadedRange.pageAfter(this.options.pageSize)))return this.load(c.start,c.limit)}}};b.prototype.load=function(a,b){var c=this;return h(this,a,b).fail(function(a,b,g,d){d&&d.errors&&c.handleErrors(d.errors)})};
b.prototype.loadAfter=function(){var a=this.loadedRange.pageAfter(this.options.pageSize);return a&&this.load(a.start,a.limit)};b.prototype.loadBefore=function(){var a=this.loadedRange.pageBefore(this.options.pageSize);return a&&this.load(a.start,a.limit)};b.prototype.onDataLoaded=function(a,b,c){void 0!==c.start&&(a=c.start);var e=this.loadedRange.isEmpty(),d=this.loadedRange.getAttachmentMethod(a,c.size),f="prepend"===d;this.loadedRange.add(a,c.size,c.isLastPage,c.nextPageStart);var h,k;if(f||m)k=
this.getScrollTop(),h=this.getContentHeight();c=this._addPage(c,d);if(f||m)d=f?this.getContentHeight()-h:0,this.setScrollTop(k+d);if(e)this.onFirstDataLoaded(a,b,c);l.trigger(this.options.dataLoadedEvent,this,a,b,c);this.loadIfRequired()};b.prototype._addPage=function(a,b){a=this._dedupe(a);this.attachNewContent(a,b);return a};b.prototype._dedupe=function(a){if(a&&a.values&&this.options.idForEntity){var b=this._ids,c=this.options.idForEntity;a=d.extend({},a,{values:f.filter(a.values,function(a){a=
c(a);return f.has(b,a)?!1:b[a]=!0})})}return a};b.prototype.onFirstDataLoaded=function(){var a=this;this.addScrollListener(function(){a.loadIfRequired()});this.options.preventOverscroll&&this._bindOverscrollPrevention();d(window).on("resize",this._resizeHandler=function(){a.loadIfRequired()})};b.prototype.cancelRequest=function(){this.currentXHR&&(this.currentXHR.abort?this.currentXHR.abort():this.currentXHR.reject?this.currentXHR.reject():n.log("Couldn't cancel the current request."),this.currentXHR=
null)};b.prototype.add=function(a,b){return a.length?(this._addPage({values:a,size:a.length},b||"prepend"),!0):!1};b.prototype.remove=function(a){return this.options.idForEntity&&(a=this.options.idForEntity(a),f.has(this._ids,a))?(delete this._ids[a],"number"===typeof this.loadedRange.nextPageStart&&(this.loadedRange.nextPageStart=Math.max(0,this.loadedRange.nextPageStart-1)),!0):!1};b.prototype.attachNewContent=function(a,b){throw Error("attachNewContent is abstract and must be implemented.");};
b.prototype.requestData=function(a,b){throw Error("requestData is abstract and must be implemented.  It must return a promise. It is preferred to return a jqXHR.");};b.prototype.handleErrors=function(a){throw Error("handleErrors is abstract and must be implemented.");};return b});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:paged-table', location = '/static/widget/paged-table/paged-table.js' */
define("widget/paged-table","aui jquery lodash util/ajax widget/error-dialog widget/paged-scrollable".split(" "),function(g,d,f,k,l,e){function b(a){a=d.extend(!0,{},b.defaults,a);e.call(this,a.scrollPaneSelector,a);this.$table=d(a.target);if(a.filterable){this.$filter=a.filter?d(a.filter):this.$table.prev(".paged-table-filter").find(".paged-table-filter-input");this._currentFilterText=d.trim(this.$filter.val());var h=f.debounce(f.bind(this._onFilterChanged,this),a.filterDebounce);this.$filter.on("keyup.paged-table-filter",
function(a){a.which===g.keyCode.ESCAPE?d(this).blur():h(a)}).on("paste.paged-table-filter",h)}this.$spinner=d("\x3cdiv class\x3d'spinner'/\x3e").hide().insertAfter(this.$table);this.spinnerShowing=!1;this.processedDomData=null==this.$table.attr("data-lastpage")}b.defaults={ajaxDataType:"json",spinnerSize:"large",filterable:!1,bufferPixels:150,filterDebounce:350,rowSelector:"\x3e tbody \x3e tr",focusOptions:{escToCancel:!1,focusedClass:"focused",rowSelector:"\x3e tbody \x3e tr",wrapAround:!1}};d.extend(b.prototype,
e.prototype);b.prototype.init=function(){return e.prototype.init.apply(this,arguments).done(f.bind(function(){this.shortcutsInitialised&&this.focusInitialRow()},this))};b.prototype.getFilterText=function(){return this._currentFilterText};b.prototype._onFilterChanged=function(){var a=d.trim(this.$filter.val());this._currentFilterText!==a&&(this._currentFilterText=a,this.update())};b.prototype.requestData=function(a,b){if(!this.processedDomData)return d.Deferred().resolve(this.createDataFromJQuery(a,
b,this.$table));var c=this;c.spinnerShowing=!0;c.$spinner.show().spin(c.options.spinnerSize,{zIndex:10});return c.performAjax(a,b).always(function(){c._hideSpinnerTimeout=setTimeout(function(){c.spinnerShowing&&c.$spinner.spinStop().hide();c.spinnerShowing=!1},0)})};b.prototype.performAjax=function(a,b){return k.ajax({url:this.buildUrl(a,b,this.getFilterText()),dataType:this.options.ajaxDataType,statusCode:this.options.statusCode})};b.prototype.cancelRequest=function(){e.prototype.cancelRequest.call(this);
this._hideSpinnerTimeout&&clearTimeout(this._hideSpinnerTimeout)};b.prototype.reset=function(){e.prototype.reset.call(this);this.processedDomData&&this.$table.find(this.options.rowSelector).remove().end().next(".paged-table-message").remove().end();this.$table.addClass("no-rows")};b.prototype.update=function(a){this.reset();return this.init(a)};b.prototype.createDataFromJQuery=function(a,b,c){b=c.find(this.options.rowSelector);var d="true"===c.attr("data-lastpage");a=c.attr("data-nextpagestart");
c={start:Number(c.attr("data-start")),size:Number(c.attr("data-size")),values:b,isLastPage:d};null!=a&&(c.nextPageStart=Number(a));return c};b.prototype.attachNewContent=function(a,b){if(a.size){if(this.processedDomData){if(a&&a.errors){this.handleErrors(a.errors);return}this.handleNewRows(a,b)}0<a.start&&a.isLastPage&&this.handleLastPage();this.$table.removeClass("no-rows")}else a.isLastPage&&this.handleNoData();this.updateTimestamp();this.processedDomData=!0};b.prototype.updateTimestamp=function(){this.$table.attr("data-last-updated",
(new Date).getTime())};b.prototype.focusInitialRow=function(){this.$table.find(this.options.focusOptions.rowSelector).first().addClass(this.options.focusOptions.focusedClass)};b.prototype.initShortcuts=function(){this.shortcutsInitialised=!0;this.focusInitialRow();return{destroy:f.bind(this.resetShortcuts,this)}};b.prototype.resetShortcuts=function(){this.shortcutsInitialised=!1};b.prototype._new$Message=function(a){return d('\x3cdiv class\x3d"paged-table-message"/\x3e').addClass(this.options.tableMessageClass).html(a||
"")};b.prototype.handleLastPage=function(){this.$table.after(this._new$Message(this.options.allFetchedMessageHtml))};b.prototype.handleNoData=function(){var a=this.getFilterText(),a=a&&a.length?this.options.noneMatchingMessageHtml:this.options.noneFoundMessageHtml;this.$table.addClass("no-rows").after(this._new$Message(a))};b.prototype.handleErrors=function(a){(new l({panelContent:"\x3cp\x3e"+g.escapeHtml(a[0].message)+"\x3c/p\x3e"})).show()};b.prototype.buildUrl=function(a,b,c){throw Error("buildUrl is abstract and must be implemented.");
};b.prototype.handleNewRows=function(a,b){throw Error("handleNewRows is abstract and must be implemented.");};return b});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:paged-table', location = '/static/widget/paged-table/paged-table.soy' */
// This file was automatically generated from paged-table.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace stash.widget.
 */

if (typeof stash == 'undefined') { var stash = {}; }
if (typeof stash.widget == 'undefined') { stash.widget = {}; }


stash.widget.pagedTable = function(opt_data, opt_ignored) {
  var output = '' + ((opt_data.filterable) ? stash.widget.pagedTableFilter({forId: opt_data.id, filter: opt_data.filter, filterPlaceholder: opt_data.filterPlaceholder}) : '');
  var pageAttributes__soy9 = opt_data.page ? atl_soy.concat({start: opt_data.page.start, size: opt_data.page.size, lastpage: opt_data.page.isLastPage}, opt_data.page.nextPageRequest ? {nextpagestart: opt_data.page.nextPageRequest.start} : {}) : {};
  output += widget.aui.table({id: opt_data.id, dataAttributes: atl_soy.concat(pageAttributes__soy9, opt_data.extraDataAttributes ? opt_data.extraDataAttributes : {}), extraClasses: 'paged-table' + ((opt_data.extraClasses) ? ' ' + soy.$$escapeHtml(opt_data.extraClasses) : '') + ((! opt_data.page || opt_data.page.size == 0) ? ' no-rows' : ''), theadContent: opt_data.theadContent, content: opt_data.content}) + ((opt_data.page && opt_data.page.size == 0) ? stash.widget.pagedTableMessage({content: opt_data.filterable && opt_data.filter ? (opt_data.noneMatchingMessageContent ? opt_data.noneMatchingMessageContent : '') : opt_data.noneFoundMessageContent ? opt_data.noneFoundMessageContent : ''}) : '');
  return output;
};
if (goog.DEBUG) {
  stash.widget.pagedTable.soyTemplateName = 'stash.widget.pagedTable';
}


stash.widget.pagedTableMessage = function(opt_data, opt_ignored) {
  return '<div class="paged-table-message">' + soy.$$filterNoAutoescape(opt_data.content) + '</div>';
};
if (goog.DEBUG) {
  stash.widget.pagedTableMessage.soyTemplateName = 'stash.widget.pagedTableMessage';
}


stash.widget.pagedTableFilter = function(opt_data, opt_ignored) {
  return '' + aui.group.group({extraClasses: 'paged-table-filter', content: '' + aui.group.item({content: '' + stash.widget.pagedTableFilterField(opt_data)})});
};
if (goog.DEBUG) {
  stash.widget.pagedTableFilter.soyTemplateName = 'stash.widget.pagedTableFilter';
}


stash.widget.pagedTableFilterField = function(opt_data, opt_ignored) {
  return '<label class="assistive" for="paged-table-input-for-' + soy.$$escapeHtml(opt_data.forId) + '">' + soy.$$escapeHtml(opt_data.filterPlaceholder ? opt_data.filterPlaceholder : "Search") + '</label><input type="text" id="paged-table-input-for-' + soy.$$escapeHtml(opt_data.forId) + '" class="paged-table-filter-input" data-for="' + soy.$$escapeHtml(opt_data.forId) + '" autocomplete="off" placeholder="' + soy.$$escapeHtml(opt_data.filterPlaceholder ? opt_data.filterPlaceholder : "Search") + '" value="' + soy.$$escapeHtml(opt_data.filter ? opt_data.filter : '') + '">';
};
if (goog.DEBUG) {
  stash.widget.pagedTableFilterField.soyTemplateName = 'stash.widget.pagedTableFilterField';
}
;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:comment-count', location = '/static/feature/comment-count/comment-count.soy' */
// This file was automatically generated from comment-count.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace stash.feature.
 */

if (typeof stash == 'undefined') { var stash = {}; }
if (typeof stash.feature == 'undefined') { stash.feature = {}; }


stash.feature.commentCount = function(opt_data, opt_ignored) {
  return '<span class="comment-count" title="' + soy.$$escapeHtml(AJS.format("{0} {0,choice,1#comment|1\x3ccomments}",parseInt(opt_data.count))) + '">' + aui.icons.icon({icon: 'comment', size: 'small', useIconFont: true, accessibilityText: AJS.format("{0} {0,choice,1#comment|1\x3ccomments}",parseInt(opt_data.count))}) + soy.$$escapeHtml(require('util/text').capInt(opt_data.count, 99)) + '</span>';
};
if (goog.DEBUG) {
  stash.feature.commentCount.soyTemplateName = 'stash.feature.commentCount';
}
;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:commits-table', location = '/static/feature/commits/commits-table-clientside.soy' */
// This file was automatically generated from commits-table-clientside.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace stash.feature.commits.
 */

if (typeof stash == 'undefined') { var stash = {}; }
if (typeof stash.feature == 'undefined') { stash.feature = {}; }
if (typeof stash.feature.commits == 'undefined') { stash.feature.commits = {}; }


stash.feature.commits.commitsTableImpl = function(opt_data, opt_ignored) {
  var param13 = '';
  if (opt_data.changesetPage) {
    var changesetList16 = opt_data.changesetPage.values;
    var changesetListLen16 = changesetList16.length;
    for (var changesetIndex16 = 0; changesetIndex16 < changesetListLen16; changesetIndex16++) {
      var changesetData16 = changesetList16[changesetIndex16];
      param13 += stash.feature.commits.commitsTableRow({changeset: changesetData16, cellsContent: '' + stash.feature.commits.commitsTableCells({repository: opt_data.repository, changeset: changesetData16, webSections: opt_data.webSections})});
    }
  }
  var output = '' + stash.widget.pagedTable({id: opt_data.tableId, page: opt_data.changesetPage, extraClasses: 'commits-table' + (opt_data.extraClasses ? ' ' + opt_data.extraClasses : ''), theadContent: '' + ((opt_data.changesetPage && (opt_data.changesetPage.size > 0 || opt_data.changesetPage.start > 0) || ! opt_data.changesetPage) ? '<tr>' + stash.feature.commits.commitsTableHeaderCells(opt_data) + '</tr>' : ''), content: param13});
  return output;
};
if (goog.DEBUG) {
  stash.feature.commits.commitsTableImpl.soyTemplateName = 'stash.feature.commits.commitsTableImpl';
}


stash.feature.commits.commitsTableHeaderCells = function(opt_data, opt_ignored) {
  var output = '<th class="author" title="' + soy.$$escapeHtml("Author") + '" scope="col">' + soy.$$escapeHtml("Author") + '</th><th class="changeset" title="' + soy.$$escapeHtml("Commit") + '" scope="col">' + soy.$$escapeHtml("Commit") + '</th><th class="message" title="' + soy.$$escapeHtml("Message") + '" scope="col">' + soy.$$escapeHtml("Message") + '</th><th class="comment-count" scope="col"></th><th class="timestamp" title="' + soy.$$escapeHtml("Commit date") + '" scope="col">' + soy.$$escapeHtml("Commit date") + '</th>';
  if (opt_data.webSections) {
    var webSectionList46 = opt_data.webSections;
    var webSectionListLen46 = webSectionList46.length;
    for (var webSectionIndex46 = 0; webSectionIndex46 < webSectionListLen46; webSectionIndex46++) {
      var webSectionData46 = webSectionList46[webSectionIndex46];
      output += '<th class="' + soy.$$escapeHtml(webSectionData46.key) + '" title="' + soy.$$escapeHtml(webSectionData46.labelText) + '" scope="col">' + soy.$$escapeHtml(webSectionData46.labelText) + '</th>';
    }
  }
  return output;
};
if (goog.DEBUG) {
  stash.feature.commits.commitsTableHeaderCells.soyTemplateName = 'stash.feature.commits.commitsTableHeaderCells';
}


stash.feature.commits.commitsTableRow = function(opt_data, opt_ignored) {
  return '<tr data-changesetid="' + soy.$$escapeHtml(opt_data.changeset.id) + '" class="commit-row ' + ((opt_data.changeset.parents.length >= 2) ? 'merge' : '') + '">' + soy.$$filterNoAutoescape(opt_data.cellsContent) + '</tr>';
};
if (goog.DEBUG) {
  stash.feature.commits.commitsTableRow.soyTemplateName = 'stash.feature.commits.commitsTableRow';
}


stash.feature.commits.commitsTableCells = function(opt_data, opt_ignored) {
  var output = '<td class="author">' + stash.widget.avatarWithName({size: 'small', person: opt_data.changeset.author, link: true, linkExtraClasses: 'secondary-link'}) + '</td><td class="changeset">' + stash.feature.changeset.link(opt_data) + '<!-- show merge lozenge/icon if is a merge commit, eg has 2+ parents -->' + ((opt_data.changeset.parents.length >= 2) ? stash.widget.lozenge.merge({abbreviated: true}) : '') + '</td><td class="message">';
  var parsedCommitMessage__soy83 = require('util/parse-commit-message').splitIntoSubjectAndBody(opt_data.changeset.message);
  output += '<span class="message-subject" title="' + soy.$$escapeHtml(soy.$$truncate(opt_data.changeset.message, 800, true)) + '">' + soy.$$escapeHtml(soy.$$truncate(parsedCommitMessage__soy83.subject, 400, true)) + '</span><span class="message-body" title="' + soy.$$escapeHtml(soy.$$truncate(opt_data.changeset.message, 800, true)) + '">' + soy.$$escapeHtml(soy.$$truncate(parsedCommitMessage__soy83.body, 400, true)) + '</span></td><td class="comment-count">';
  if (opt_data.changeset.attributes && opt_data.changeset.attributes.commentCount) {
    var countList103 = opt_data.changeset.attributes.commentCount;
    var countListLen103 = countList103.length;
    for (var countIndex103 = 0; countIndex103 < countListLen103; countIndex103++) {
      var countData103 = countList103[countIndex103];
      output += stash.feature.commentCount({count: countData103});
    }
  }
  output += '</td><td class="timestamp">' + stash.widget.date.shortAge({date: opt_data.changeset.authorTimestamp}) + '</td>' + ((opt_data.webSections) ? stash.feature.commits.commitsRowExtras(opt_data) : '');
  return output;
};
if (goog.DEBUG) {
  stash.feature.commits.commitsTableCells.soyTemplateName = 'stash.feature.commits.commitsTableCells';
}
;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:commits-table', location = '/static/feature/commits/commits-table.js' */
define("feature/commits/commits-table","aui aui/flag jquery lodash util/events widget/paged-table".split(" "),function(b,n,g,p,l,d){function c(e,a){this.getCommitsUrlBuilder=e;var f={target:"#commits-table",ajaxDataType:"html",tableMessageClass:"commits-table-message",allFetchedMessageHtml:'\x3cp class\x3d"no-more-results"\x3e'+b.escapeHtml("No more history")+"\x3c/p\x3e",noneFoundMessageHtml:'\x3ch3 class\x3d"no-results entity-empty"\x3e'+b.escapeHtml("No history found")+
"\x3c/h3\x3e",paginationContext:"commits-table"};a=g.extend({},f,a);d.call(this,a);this.$spinner.addClass("commits-table-spinner");this._destroyables=[]}g.extend(c.prototype,d.prototype);c.prototype.buildUrl=function(e,a){return this.getCommitsUrlBuilder().withParams({start:e,limit:a,contents:""}).build()};c.prototype.onDataLoaded=function(e,a,b){"string"===typeof b&&(b=this.createDataFromJQuery(e,a,g(b)));return d.prototype.onDataLoaded.call(this,e,a,b)};c.prototype.attachNewContent=function(b,a){d.prototype.attachNewContent.call(this,
b,a);l.trigger("stash.widget.commitsTable.contentAdded",this,b)};c.prototype.handleNewRows=function(b,a){this.$table.show().children("tbody")["html"!==a?a:"append"](b.values)};c.prototype.focusInitialRow=function(){this.$table.find("tbody tr.commit-row:first").addClass("focused-commit")};c.prototype.bindKeyboardShortcuts=function(){var c=this,a=this.$table.selector,f=!1,h={focusedClass:"focused-commit",wrapAround:!1,escToCancel:!1},m=a+" .commit-row."+h.focusedClass,k=m+", "+a+".show-merges .commit-row, "+
a+":not(.show-merges) .commit-row:not(.merge)";this._onDisableOpenItemHandler=function(){f=!0};this._onEnableOpenItemHandler=function(){f=!1};this.bindMoveToNextHandler=function(a){(this.moveToNextItem?this:b.whenIType(a)).moveToNextItem(k,h).execute(function(){g(k).last().hasClass(h.focusedClass)&&window.scrollTo(0,document.documentElement.scrollHeight)})};this.bindMoveToPreviousHandler=function(a){(this.moveToPrevItem?this:b.whenIType(a)).moveToPrevItem(k,h)};this.bindOpenItemHandler=function(a){(this.execute?
this:b.whenIType(a)).execute(function(){if(!f){var a=jQuery(m);a.length&&(window.location.href=a.find("td.changeset a").attr("href"))}})};this.bindToggleMergesHandler=function(a){var d;(this.execute?this:b.whenIType(a)).execute(function(){c.$table.toggleClass("show-merges");var a=c.$table.hasClass("show-merges")?"Showing all commits":"Hiding merge commits";d&&d.close();d=n({type:"info",title:a,close:"auto"})})};this._destroyables.push(l.chain().on("stash.keyboard.shortcuts.requestMoveToNextHandler",
this.bindMoveToNextHandler).on("stash.keyboard.shortcuts.requestMoveToPreviousHandler",this.bindMoveToPreviousHandler).on("stash.keyboard.shortcuts.requestOpenItemHandler",this.bindOpenItemHandler).on("stash.keyboard.shortcuts.requestToggleMergesHandler",this.bindToggleMergesHandler).on("stash.keyboard.shortcuts.disableOpenItemHandler",this._onDisableOpenItemHandler).on("stash.keyboard.shortcuts.enableOpenItemHandler",this._onEnableOpenItemHandler));this._destroyables.push(d.prototype.initShortcuts.call(this))};
c.prototype.destroy=function(){d.prototype.destroy.call(this);p.invoke(this._destroyables,"destroy")};return c});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:pull-request-commits', location = '/static/feature/pull-request/commits/pull-request-commits.js' */
define("feature/pull-request/pull-request-commits",["aui","jquery","stash/api/util/navbuilder","feature/commits/commits-table","exports"],function(g,c,h,k,d){function l(){return h.currentRepo().pullRequest(f).commits()}var f,a;d.init=function(b){f=b.pullRequest.getId();var e=c(stash.feature.pullRequest.commits({repository:b.repository.toJSON(),commitsTableWebSections:b.commitsTableWebSections})),d=c("\x3cdiv /\x3e").append(e);a=new k(l,{target:e,webSections:b.commitsTableWebSections,allCommitsFetchedMessage:"No more commits in pull request"});
c(b.el).append(a.$spinner);e=a.init({suspended:!0}).done(function(){c(b.el).prepend(d.children());a.resume()});a.bindKeyboardShortcuts();return e};d.reset=function(){a.destroy();a=null}});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:pull-request-commits', location = '/static/feature/pull-request/commits/pull-request-commits.soy' */
// This file was automatically generated from pull-request-commits.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace stash.feature.pullRequest.
 */

if (typeof stash == 'undefined') { var stash = {}; }
if (typeof stash.feature == 'undefined') { stash.feature = {}; }
if (typeof stash.feature.pullRequest == 'undefined') { stash.feature.pullRequest = {}; }


stash.feature.pullRequest.commits = function(opt_data, opt_ignored) {
  return '' + stash.feature.commits.commitsTableImpl({repository: opt_data.repository, changesetPage: opt_data.changesetPage, tableId: 'pull-request-commits-table', webSections: opt_data.commitsTableWebSections});
};
if (goog.DEBUG) {
  stash.feature.pullRequest.commits.soyTemplateName = 'stash.feature.pullRequest.commits';
}
;
;/* module-key = 'com.atlassian.stash.stash-bower-components-plugin:jstree', location = '/static/bower/jstree/jquery.jstree.js' */
(function(){if(!jQuery||!jQuery.jstree){var r=!1,t=!1,u=!1;(function(c){c.vakata={};c.vakata.css={get_css:function(a,c,b){a=a.toLowerCase();var e=b.cssRules||b.rules,d=0;do{if(e.length&&d>e.length+5)break;if(e[d].selectorText&&e[d].selectorText.toLowerCase()==a)return!0===c?(b.removeRule&&b.removeRule(d),b.deleteRule&&b.deleteRule(d),!0):e[d]}while(e[++d]);return!1},add_css:function(a,b){if(c.jstree.css.get_css(a,!1,b))return!1;b.insertRule?b.insertRule(a+" { }",0):b.addRule(a,null,0);return c.vakata.css.get_css(a)},
remove_css:function(a,b){return c.vakata.css.get_css(a,!0,b)},add_sheet:function(a){var b=!1,e=!0;if(a.str)return a.title&&(b=c("style[id\x3d'"+a.title+"-stylesheet']")[0]),b?e=!1:(b=document.createElement("style"),b.setAttribute("type","text/css"),a.title&&b.setAttribute("id",a.title+"-stylesheet")),b.styleSheet?e?(document.getElementsByTagName("head")[0].appendChild(b),b.styleSheet.cssText=a.str):b.styleSheet.cssText=b.styleSheet.cssText+" "+a.str:(b.appendChild(document.createTextNode(a.str)),
document.getElementsByTagName("head")[0].appendChild(b)),b.sheet||b.styleSheet;if(a.url)if(document.createStyleSheet)try{document.createStyleSheet(a.url)}catch(d){}else return b=document.createElement("link"),b.rel="stylesheet",b.type="text/css",b.media="all",b.href=a.url,document.getElementsByTagName("head")[0].appendChild(b),b.styleSheet}};var a=[],b=-1,d={},e={};c.fn.jstree=function(f){var b="string"==typeof f,e=Array.prototype.slice.call(arguments,1),h=this;if(b){if("_"==f.substring(0,1))return h;
this.each(function(){var b=a[c.data(this,"jstree_instance_id")],b=b&&c.isFunction(b[f])?b[f].apply(b,e):b;if("undefined"!==typeof b&&(0===f.indexOf("is_")||!0!==b&&!1!==b))return h=b,!1})}else this.each(function(){var b=c.data(this,"jstree_instance_id"),g=[],h=f?c.extend({},!0,f):{},n=c(this),q=!1,v=[],g=g.concat(e);n.data("jstree")&&g.push(n.data("jstree"));h=g.length?c.extend.apply(null,[!0,h].concat(g)):h;"undefined"!==typeof b&&a[b]&&a[b].destroy();b=parseInt(a.push({}),10)-1;c.data(this,"jstree_instance_id",
b);h.plugins=c.isArray(h.plugins)?h.plugins:c.jstree.defaults.plugins.slice();h.plugins.unshift("core");h.plugins=h.plugins.sort().join(",,").replace(/(,|^)([^,]+)(,,\2)+(,|$)/g,"$1$2$4").replace(/,,+/g,",").replace(/,$/,"").split(",");q=c.extend(!0,{},c.jstree.defaults,h);q.plugins=h.plugins;c.each(d,function(a,f){-1===c.inArray(a,q.plugins)?(q[a]=null,delete q[a]):v.push(a)});q.plugins=v;a[b]=new c.jstree._instance(b,c(this).addClass("jstree jstree-"+b),q);c.each(a[b]._get_settings().plugins,function(c,
f){a[b].data[f]={}});c.each(a[b]._get_settings().plugins,function(c,f){d[f]&&d[f].__init.apply(a[b])});setTimeout(function(){a[b]&&a[b].init()},0)});return h};c.jstree={defaults:{plugins:[]},_focused:function(){return a[b]||null},_reference:function(f){if(a[f])return a[f];var b=c(f);b.length||"string"!==typeof f||(b=c("#"+f));return b.length?a[b.closest(".jstree").data("jstree_instance_id")]||null:null},_instance:function(a,b,e){this.data={core:{}};this.get_settings=function(){return c.extend(!0,
{},e)};this._get_settings=function(){return e};this.get_index=function(){return a};this.get_container=function(){return b};this.get_container_ul=function(){return b.children("ul:eq(0)")};this._set_settings=function(a){e=c.extend(!0,{},e,a)}},_fn:{},plugin:function(a,b){b=c.extend({},{__init:c.noop,__destroy:c.noop,_fn:{},defaults:!1},b);d[a]=b;c.jstree.defaults[a]=b.defaults;c.each(b._fn,function(b,e){e.plugin=a;e.old=c.jstree._fn[b];c.jstree._fn[b]=function(){var a,f=e,d=Array.prototype.slice.call(arguments);
a=new c.Event("before.jstree");var g=!1;if(!0!==this.data.core.locked||"unlock"===b||"is_locked"===b){do{if(f&&f.plugin&&-1!==c.inArray(f.plugin,this._get_settings().plugins))break;f=f.old}while(f);if(f){if(0===b.indexOf("_"))a=f.apply(this,d);else{a=this.get_container().triggerHandler(a,{func:b,inst:this,args:d,plugin:f.plugin});if(!1===a)return;"undefined"!==typeof a&&(d=a);a=f.apply(c.extend({},this,{__callback:function(a){this.get_container().triggerHandler(b+".jstree",{inst:this,args:d,rslt:a,
rlbk:g})},__rollback:function(){return g=this.get_rollback()},__call_old:function(a){return f.old.apply(this,a?Array.prototype.slice.call(arguments,1):d)}}),d)}return a}}};c.jstree._fn[b].old=e.old;c.jstree._fn[b].plugin=a})},rollback:function(f){f&&(c.isArray(f)||(f=[f]),c.each(f,function(c,f){a[f.i].set_rollback(f.h,f.d)}))}};c.jstree._fn=c.jstree._instance.prototype={};c(function(){var a=navigator.userAgent.toLowerCase(),b=(a.match(/.+?(?:rv|it|ra|ie)[\/: ]([\d.]+)/)||[0,"0"])[1],e=".jstree ul, .jstree li { display:block; margin:0 0 0 0; padding:0 0 0 0; list-style-type:none; } .jstree li { display:block; min-height:18px; line-height:18px; white-space:nowrap; margin-left:18px; min-width:18px; } .jstree-rtl li { margin-left:0; margin-right:18px; } .jstree \x3e ul \x3e li { margin-left:0px; } .jstree-rtl \x3e ul \x3e li { margin-right:0px; } .jstree ins { display:inline-block; text-decoration:none; width:18px; height:18px; margin:0 0 0 0; padding:0; } .jstree a { display:inline-block; line-height:16px; height:16px; color:black; white-space:nowrap; text-decoration:none; padding:1px 2px; margin:0; } .jstree a:focus { outline: none; } .jstree a \x3e ins { height:16px; width:16px; } .jstree a \x3e .jstree-icon { margin-right:3px; } .jstree-rtl a \x3e .jstree-icon { margin-left:3px; margin-right:0; } li.jstree-open \x3e ul { display:block; } li.jstree-closed \x3e ul { display:none; } ";
if(/msie/.test(a)&&6==parseInt(b,10)){r=!0;try{document.execCommand("BackgroundImageCache",!1,!0)}catch(d){}e+=".jstree li { height:18px; margin-left:0; margin-right:0; } .jstree li li { margin-left:18px; } .jstree-rtl li li { margin-left:0px; margin-right:18px; } li.jstree-open ul { display:block; } li.jstree-closed ul { display:none !important; } .jstree li a { display:inline; border-width:0 !important; padding:0px 2px !important; } .jstree li a ins { height:16px; width:16px; margin-right:3px; } .jstree-rtl li a ins { margin-right:0px; margin-left:3px; } "}/msie/.test(a)&&
7==parseInt(b,10)&&(t=!0,e+=".jstree li a { border-width:0 !important; padding:0px 2px !important; } ");!/compatible/.test(a)&&/mozilla/.test(a)&&1.9>parseFloat(b,10)&&(u=!0,e+=".jstree ins { display:-moz-inline-box; } .jstree li { line-height:12px; } .jstree a { display:-moz-inline-box; } .jstree .jstree-no-icons .jstree-checkbox { display:-moz-inline-stack !important; } ");c.vakata.css.add_sheet({str:e,title:"jstree"})});c.jstree.plugin("core",{__init:function(){this.data.core.locked=!1;this.data.core.to_open=
this.get_settings().core.initially_open;this.data.core.to_load=this.get_settings().core.initially_load},defaults:{html_titles:!1,animation:500,initially_open:[],initially_load:[],open_parents:!0,notify_plugins:!0,rtl:!1,load_open:!1,strings:{loading:"Loading ...",new_node:"New node",multiple_selection:"Multiple selection"}},_fn:{init:function(){this.set_focus();this._get_settings().core.rtl&&this.get_container().addClass("jstree-rtl").css("direction","rtl");this.get_container().html("\x3cul\x3e\x3cli class\x3d'jstree-last jstree-leaf'\x3e\x3cins\x3e\x26#160;\x3c/ins\x3e\x3ca class\x3d'jstree-loading' href\x3d'#'\x3e\x3cins class\x3d'jstree-icon'\x3e\x26#160;\x3c/ins\x3e"+
this._get_string("loading")+"\x3c/a\x3e\x3c/li\x3e\x3c/ul\x3e");this.data.core.li_height=this.get_container_ul().find("li.jstree-closed, li.jstree-leaf").eq(0).height()||18;this.get_container().delegate("li \x3e ins","click.jstree",c.proxy(function(a){a=c(a.target);this.toggle_node(a)},this)).bind("mousedown.jstree",c.proxy(function(){this.set_focus()},this)).bind("dblclick.jstree",function(a){if(document.selection&&document.selection.empty)document.selection.empty();else if(window.getSelection){a=
window.getSelection();try{a.removeAllRanges(),a.collapse()}catch(c){}}});this._get_settings().core.notify_plugins&&this.get_container().bind("load_node.jstree",c.proxy(function(a,b){var e=this._get_node(b.rslt.obj),d=this;-1===e&&(e=this.get_container_ul());e.length&&e.find("li").each(function(){var a=c(this);a.data("jstree")&&c.each(a.data("jstree"),function(b,f){d.data[b]&&c.isFunction(d["_"+b+"_notify"])&&d["_"+b+"_notify"].call(d,a,f)})})},this));this._get_settings().core.load_open&&this.get_container().bind("load_node.jstree",
c.proxy(function(a,b){var e=this._get_node(b.rslt.obj),d=this;-1===e&&(e=this.get_container_ul());e.length&&e.find("li.jstree-open:not(:has(ul))").each(function(){d.load_node(this,c.noop,c.noop)})},this));this.__callback();this.load_node(-1,function(){this.loaded();this.reload_nodes()})},destroy:function(){var f,e=this.get_index(),l=this._get_settings(),h=this;c.each(l.plugins,function(a,c){try{d[c].__destroy.apply(h)}catch(b){}});this.__callback();if(this.is_focused())for(f in a)if(a.hasOwnProperty(f)&&
f!=e){a[f].set_focus();break}e===b&&(b=-1);this.get_container().unbind(".jstree").undelegate(".jstree").removeData("jstree_instance_id").find("[class^\x3d'jstree']").andSelf().attr("class",function(){return this.className.replace(/jstree[^ ]*|$/ig,"")});c(document).unbind(".jstree-"+e).undelegate(".jstree-"+e);a[e]=null;delete a[e]},_core_notify:function(a,c){c.opened&&this.open_node(a,!1,!0)},lock:function(){this.data.core.locked=!0;this.get_container().children("ul").addClass("jstree-locked").css("opacity",
"0.7");this.__callback({})},unlock:function(){this.data.core.locked=!1;this.get_container().children("ul").removeClass("jstree-locked").css("opacity","1");this.__callback({})},is_locked:function(){return this.data.core.locked},save_opened:function(){var a=this;this.data.core.to_open=[];this.get_container_ul().find("li.jstree-open").each(function(){this.id&&a.data.core.to_open.push("#"+this.id.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,
"\\.").replace(/\:/g,"\\:"))});this.__callback(a.data.core.to_open)},save_loaded:function(){},reload_nodes:function(a){var b=this,e=!0,d=[],m=[];a||(this.data.core.reopen=!1,this.data.core.refreshing=!0,this.data.core.to_open=c.map(c.makeArray(this.data.core.to_open),function(a){return"#"+a.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")}),this.data.core.to_load=c.map(c.makeArray(this.data.core.to_load),function(a){return"#"+
a.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")}),this.data.core.to_open.length&&(this.data.core.to_load=this.data.core.to_load.concat(this.data.core.to_open)));this.data.core.to_load.length&&(c.each(this.data.core.to_load,function(a,b){if("#"==b)return!0;c(b).length?d.push(b):m.push(b)}),d.length&&(this.data.core.to_load=m,c.each(d,function(a,c){b._is_loaded(c)||(b.load_node(c,function(){b.reload_nodes(!0)},function(){b.reload_nodes(!0)}),
e=!1)})));this.data.core.to_open.length&&c.each(this.data.core.to_open,function(a,c){b.open_node(c,!1,!0)});e&&(this.data.core.reopen&&clearTimeout(this.data.core.reopen),this.data.core.reopen=setTimeout(function(){b.__callback({},b)},50),this.data.core.refreshing=!1,this.reopen())},reopen:function(){var a=this;this.data.core.to_open.length&&c.each(this.data.core.to_open,function(c,b){a.open_node(b,!1,!0)});this.__callback({})},refresh:function(a){var c=this;this.save_opened();a||(a=-1);(a=this._get_node(a))||
(a=-1);-1!==a?a.children("UL").remove():this.get_container_ul().empty();this.load_node(a,function(){c.__callback({obj:a});c.reload_nodes()})},loaded:function(){this.__callback()},set_focus:function(){if(!this.is_focused()){var a=c.jstree._focused();a&&a.unset_focus();this.get_container().addClass("jstree-focused");b=this.get_index();this.__callback()}},is_focused:function(){return b==this.get_index()},unset_focus:function(){this.is_focused()&&(this.get_container().removeClass("jstree-focused"),b=
-1);this.__callback()},_get_node:function(a){var b=c(a,this.get_container());if(b.is(".jstree")||-1==a)return-1;b=b.closest("li",this.get_container());return b.length?b:!1},_get_next:function(a,c){a=this._get_node(a);return-1===a?this.get_container().find("\x3e ul \x3e li:first-child"):a.length?c?0<a.nextAll("li").size()?a.nextAll("li:eq(0)"):!1:a.hasClass("jstree-open")?a.find("li:eq(0)"):0<a.nextAll("li").size()?a.nextAll("li:eq(0)"):a.parentsUntil(".jstree","li").next("li").eq(0):!1},_get_prev:function(a,
c){a=this._get_node(a);if(-1===a)return this.get_container().find("\x3e ul \x3e li:last-child");if(!a.length)return!1;if(c)return 0<a.prevAll("li").length?a.prevAll("li:eq(0)"):!1;if(a.prev("li").length){for(a=a.prev("li").eq(0);a.hasClass("jstree-open");)a=a.children("ul:eq(0)").children("li:last");return a}var b=a.parentsUntil(".jstree","li:eq(0)");return b.length?b:!1},_get_parent:function(a){a=this._get_node(a);if(-1==a||!a.length)return!1;a=a.parentsUntil(".jstree","li:eq(0)");return a.length?
a:-1},_get_children:function(a){a=this._get_node(a);return-1===a?this.get_container().children("ul:eq(0)").children("li"):a.length?a.children("ul:eq(0)").children("li"):!1},get_path:function(a,c){var b=[],e=this;a=this._get_node(a);if(-1===a||!a||!a.length)return!1;a.parentsUntil(".jstree","li").each(function(){b.push(c?this.id:e.get_text(this))});b.reverse();b.push(c?a.attr("id"):this.get_text(a));return b},_get_string:function(a){return this._get_settings().core.strings[a]||a},is_open:function(a){return(a=
this._get_node(a))&&-1!==a&&a.hasClass("jstree-open")},is_closed:function(a){return(a=this._get_node(a))&&-1!==a&&a.hasClass("jstree-closed")},is_leaf:function(a){return(a=this._get_node(a))&&-1!==a&&a.hasClass("jstree-leaf")},correct_state:function(a){a=this._get_node(a);if(!a||-1===a)return!1;a.removeClass("jstree-closed jstree-open").addClass("jstree-leaf").children("ul").remove();this.__callback({obj:a})},open_node:function(a,c,b){a=this._get_node(a);if(!a.length)return!1;if(!a.hasClass("jstree-closed"))return c&&
c.call(),!1;var e=b||r?0:this._get_settings().core.animation,d=this;this._is_loaded(a)?(this._get_settings().core.open_parents&&a.parentsUntil(".jstree",".jstree-closed").each(function(){d.open_node(this,!1,!0)}),e&&a.children("ul").css("display","none"),a.removeClass("jstree-closed").addClass("jstree-open").children("a").removeClass("jstree-loading"),e?a.children("ul").stop(!0,!0).slideDown(e,function(){this.style.display="";d.after_open(a)}):d.after_open(a),this.__callback({obj:a}),c&&c.call()):
(a.children("a").addClass("jstree-loading"),this.load_node(a,function(){d.open_node(a,c,b)},c))},after_open:function(a){this.__callback({obj:a})},close_node:function(a,c){a=this._get_node(a);var b=c||r?0:this._get_settings().core.animation,e=this;if(!a.length||!a.hasClass("jstree-open"))return!1;b&&a.children("ul").attr("style","display:block !important");a.removeClass("jstree-open").addClass("jstree-closed");b?a.children("ul").stop(!0,!0).slideUp(b,function(){this.style.display="";e.after_close(a)}):
e.after_close(a);this.__callback({obj:a})},after_close:function(a){this.__callback({obj:a})},toggle_node:function(a){a=this._get_node(a);if(a.hasClass("jstree-closed"))return this.open_node(a);if(a.hasClass("jstree-open"))return this.close_node(a)},open_all:function(a,c,b){(a=a?this._get_node(a):-1)&&-1!==a||(a=this.get_container_ul());b?a=a.find("li.jstree-closed"):(b=a,a=a.is(".jstree-closed")?a.find("li.jstree-closed").andSelf():a.find("li.jstree-closed"));var e=this;a.each(function(){var a=this;
e._is_loaded(this)?e.open_node(this,!1,!c):e.open_node(this,function(){e.open_all(a,c,b)},!c)});0===b.find("li.jstree-closed").length&&this.__callback({obj:b})},close_all:function(a,c){var b=this;(a=a?this._get_node(a):this.get_container())&&-1!==a||(a=this.get_container_ul());a.find("li.jstree-open").andSelf().each(function(){b.close_node(this,!c)});this.__callback({obj:a})},clean_node:function(a){a=a&&-1!=a?c(a):this.get_container_ul();a=a.is("li")?a.find("li").andSelf():a.find("li");a.removeClass("jstree-last").filter("li:last-child").addClass("jstree-last").end().filter(":has(li)").not(".jstree-open").removeClass("jstree-leaf").addClass("jstree-closed");
a.not(".jstree-open, .jstree-closed").addClass("jstree-leaf").children("ul").remove();this.__callback({obj:a})},get_rollback:function(){this.__callback();return{i:this.get_index(),h:this.get_container().children("ul").clone(!0),d:this.data}},set_rollback:function(a,c){this.get_container().empty().append(a);this.data=c;this.__callback()},load_node:function(a,c,b){this.__callback({obj:a})},_is_loaded:function(a){return!0},create_node:function(a,b,e,d,m){a=this._get_node(a);b="undefined"===typeof b?
"last":b;var k=c("\x3cli /\x3e"),p=this._get_settings().core,n;if(-1!==a&&!a.length)return!1;if(!m&&!this._is_loaded(a))return this.load_node(a,function(){this.create_node(a,b,e,d,!0)}),!1;this.__rollback();"string"===typeof e&&(e={data:e});e||(e={});e.attr&&k.attr(e.attr);e.metadata&&k.data(e.metadata);e.state&&k.addClass("jstree-"+e.state);e.data||(e.data=this._get_string("new_node"));c.isArray(e.data)||(n=e.data,e.data=[],e.data.push(n));c.each(e.data,function(a,b){n=c("\x3ca /\x3e");c.isFunction(b)&&
(b=b.call(this,e));if("string"==typeof b)n.attr("href","#")[p.html_titles?"html":"text"](b);else b.attr||(b.attr={}),b.attr.href||(b.attr.href="#"),n.attr(b.attr)[p.html_titles?"html":"text"](b.title),b.language&&n.addClass(b.language);n.prepend("\x3cins class\x3d'jstree-icon'\x3e\x26#160;\x3c/ins\x3e");!b.icon&&e.icon&&(b.icon=e.icon);b.icon&&(-1===b.icon.indexOf("/")?n.children("ins").addClass(b.icon):n.children("ins").css("background","url('"+b.icon+"') center center no-repeat"));k.append(n)});
k.prepend("\x3cins class\x3d'jstree-icon'\x3e\x26#160;\x3c/ins\x3e");-1===a&&(a=this.get_container(),"before"===b&&(b="first"),"after"===b&&(b="last"));switch(b){case "before":a.before(k);n=this._get_parent(a);break;case "after":a.after(k);n=this._get_parent(a);break;case "inside":case "first":a.children("ul").length||a.append("\x3cul /\x3e");a.children("ul").prepend(k);n=a;break;case "last":a.children("ul").length||a.append("\x3cul /\x3e");a.children("ul").append(k);n=a;break;default:a.children("ul").length||
a.append("\x3cul /\x3e"),b||(b=0),n=a.children("ul").children("li").eq(b),n.length?n.before(k):a.children("ul").append(k),n=a}if(-1===n||n.get(0)===this.get_container().get(0))n=-1;this.clean_node(n);this.__callback({obj:k,parent:n});d&&d.call(this,k);return k},get_text:function(a){a=this._get_node(a);if(!a.length)return!1;var b=this._get_settings().core.html_titles;a=a.children("a:eq(0)");if(b)return a=a.clone(),a.children("INS").remove(),a.html();a=a.contents().filter(function(){return 3==this.nodeType})[0];
return a.nodeValue},set_text:function(a,b){a=this._get_node(a);if(!a.length)return!1;a=a.children("a:eq(0)");if(this._get_settings().core.html_titles){var c=a.children("INS").clone();a.html(b).prepend(c);this.__callback({obj:a,name:b});return!0}a=a.contents().filter(function(){return 3==this.nodeType})[0];this.__callback({obj:a,name:b});return a.nodeValue=b},rename_node:function(a,b){a=this._get_node(a);this.__rollback();a&&a.length&&this.set_text.apply(this,Array.prototype.slice.call(arguments))&&
this.__callback({obj:a,name:b})},delete_node:function(a){a=this._get_node(a);if(!a.length)return!1;this.__rollback();var b=this._get_parent(a),e=c([]),d=this;a.each(function(){e=e.add(d._get_prev(this))});a=a.detach();-1!==b&&0===b.find("\x3e ul \x3e li").length&&b.removeClass("jstree-open jstree-closed").addClass("jstree-leaf");this.clean_node(b);this.__callback({obj:a,prev:e,parent:b});return a},prepare_move:function(a,b,d,h,m){var k={};k.ot=c.jstree._reference(a)||this;k.o=k.ot._get_node(a);k.r=
-1===b?-1:this._get_node(b);k.p="undefined"===typeof d||!1===d?"last":d;if(m||!e.o||e.o[0]!==k.o[0]||e.r[0]!==k.r[0]||e.p!==k.p){k.ot=c.jstree._reference(k.o)||this;k.rt=c.jstree._reference(k.r)||this;if(-1!==k.r&&k.r){if(!/^(before|after)$/.test(k.p)&&!this._is_loaded(k.r))return this.load_node(k.r,function(){this.prepare_move(a,b,d,h,!0)});switch(k.p){case "before":k.cp=k.r.index();k.cr=k.rt._get_parent(k.r);break;case "after":k.cp=k.r.index()+1;k.cr=k.rt._get_parent(k.r);break;case "inside":case "first":k.cp=
0;k.cr=k.r;break;case "last":k.cp=k.r.find(" \x3e ul \x3e li").length;k.cr=k.r;break;default:k.cp=k.p,k.cr=k.r}}else switch(k.cr=-1,k.p){case "first":case "before":case "inside":k.cp=0;break;case "after":case "last":k.cp=k.rt.get_container().find(" \x3e ul \x3e li").length;break;default:k.cp=k.p}k.np=-1==k.cr?k.rt.get_container():k.cr;k.op=k.ot._get_parent(k.o);k.cop=k.o.index();-1===k.op&&(k.op=k.ot?k.ot.get_container():this.get_container());!/^(before|after)$/.test(k.p)&&k.op&&k.np&&k.op[0]===k.np[0]&&
k.o.index()<k.cp&&k.cp++;k.or=k.np.find(" \x3e ul \x3e li:nth-child("+(k.cp+1)+")");e=k}this.__callback(e);h&&h.call(this,e)},check_move:function(){var a=e,b=!0,c=-1===a.r?this.get_container():a.r;if(!a||!a.o||a.or[0]===a.o[0]||a.op&&a.np&&a.op[0]===a.np[0]&&a.cp-1===a.o.index())return!1;a.o.each(function(){if(-1!==c.parentsUntil(".jstree","li").andSelf().index(this))return b=!1});return b},move_node:function(a,b,d,h,m,k){if(!m)return this.prepare_move(a,b,d,function(a){this.move_node(a,!1,!1,h,!0,
k)});h&&(e.cy=!0);if(!k&&!this.check_move())return!1;this.__rollback();b=!1;h?(b=a.o.clone(!0),b.find("*[id]").andSelf().each(function(){this.id&&(this.id="copy_"+this.id)})):b=a.o;a.or.length?a.or.before(b):(a.np.children("ul").length||c("\x3cul /\x3e").appendTo(a.np),a.np.children("ul:eq(0)").append(b));try{a.ot.clean_node(a.op),a.rt.clean_node(a.np),a.op.find("\x3e ul \x3e li").length||a.op.removeClass("jstree-open jstree-closed").addClass("jstree-leaf").children("ul").remove()}catch(p){}h&&(e.cy=
!0,e.oc=b);this.__callback(e);return e},_get_move:function(){return e}}})})(jQuery);(function(c){var a,b,d;c(function(){/msie/.test(navigator.userAgent.toLowerCase())?(b=c('\x3ctextarea cols\x3d"10" rows\x3d"2"\x3e\x3c/textarea\x3e').css({position:"absolute",top:-1E3,left:0}).appendTo("body"),d=c('\x3ctextarea cols\x3d"10" rows\x3d"2" style\x3d"overflow: hidden;"\x3e\x3c/textarea\x3e').css({position:"absolute",top:-1E3,left:0}).appendTo("body"),a=b.width()-d.width(),b.add(d).remove()):(b=c("\x3cdiv /\x3e").css({width:100,
height:100,overflow:"auto",position:"absolute",top:-1E3,left:0}).prependTo("body").append("\x3cdiv /\x3e").find("div").css({width:"100%",height:200}),a=100-b.width(),b.parent().remove())});c.jstree.plugin("ui",{__init:function(){this.data.ui.selected=c();this.data.ui.last_selected=!1;this.data.ui.hovered=null;this.data.ui.to_select=this.get_settings().ui.initially_select;this.get_container().delegate("a","click.jstree",c.proxy(function(a){a.preventDefault();a.currentTarget.blur();c(a.currentTarget).hasClass("jstree-loading")||
this.select_node(a.currentTarget,!0,a)},this)).delegate("a","mouseenter.jstree",c.proxy(function(a){c(a.currentTarget).hasClass("jstree-loading")||this.hover_node(a.target)},this)).delegate("a","mouseleave.jstree",c.proxy(function(a){c(a.currentTarget).hasClass("jstree-loading")||this.dehover_node(a.target)},this)).bind("reopen.jstree",c.proxy(function(){this.reselect()},this)).bind("get_rollback.jstree",c.proxy(function(){this.dehover_node();this.save_selected()},this)).bind("set_rollback.jstree",
c.proxy(function(){this.reselect()},this)).bind("close_node.jstree",c.proxy(function(a,b){var d=this._get_settings().ui,l=this._get_node(b.rslt.obj),h=l&&l.length?l.children("ul").find("a.jstree-clicked"):c(),m=this;!1!==d.selected_parent_close&&h.length&&h.each(function(){m.deselect_node(this);"select_parent"===d.selected_parent_close&&m.select_node(l)})},this)).bind("delete_node.jstree",c.proxy(function(a,b){var c=this._get_settings().ui.select_prev_on_delete,d=this._get_node(b.rslt.obj),d=d&&d.length?
d.find("a.jstree-clicked"):[],h=this;d.each(function(){h.deselect_node(this)});c&&d.length&&b.rslt.prev.each(function(){if(this.parentNode)return h.select_node(this),!1})},this)).bind("move_node.jstree",c.proxy(function(a,b){b.rslt.cy&&b.rslt.oc.find("a.jstree-clicked").removeClass("jstree-clicked")},this))},defaults:{select_limit:-1,select_multiple_modifier:"ctrl",select_range_modifier:"shift",selected_parent_close:"select_parent",selected_parent_open:!0,select_prev_on_delete:!0,disable_selecting_children:!1,
initially_select:[]},_fn:{_get_node:function(a,b){if("undefined"===typeof a||null===a)return b?this.data.ui.selected:this.data.ui.last_selected;var d=c(a,this.get_container());if(d.is(".jstree")||-1==a)return-1;d=d.closest("li",this.get_container());return d.length?d:!1},_ui_notify:function(a,b){b.selected&&this.select_node(a,!1)},save_selected:function(){var a=this;this.data.ui.to_select=[];this.data.ui.selected.each(function(){this.id&&a.data.ui.to_select.push("#"+this.id.toString().replace(/^#/,
"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:"))});this.__callback(this.data.ui.to_select)},reselect:function(){var a=this,b=this.data.ui.to_select,b=c.map(c.makeArray(b),function(a){return"#"+a.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")});c.each(b,function(b,c){c&&"#"!==c&&a.select_node(c)});this.data.ui.selected=this.data.ui.selected.filter(function(){return this.parentNode});
this.__callback()},refresh:function(a){this.save_selected();return this.__call_old()},hover_node:function(a){a=this._get_node(a);if(!a.length)return!1;a.hasClass("jstree-hovered")||this.dehover_node();this.data.ui.hovered=a.children("a").addClass("jstree-hovered").parent();this._fix_scroll(a);this.__callback({obj:a})},dehover_node:function(){var a=this.data.ui.hovered,b;if(!a||!a.length)return!1;b=a.children("a").removeClass("jstree-hovered").parent();this.data.ui.hovered[0]===b[0]&&(this.data.ui.hovered=
null);this.__callback({obj:a})},select_node:function(a,b,c){a=this._get_node(a);if(-1==a||!a||!a.length)return!1;var d=this._get_settings().ui,h="on"==d.select_multiple_modifier||!1!==d.select_multiple_modifier&&c&&c[d.select_multiple_modifier+"Key"],m=!1!==d.select_range_modifier&&c&&c[d.select_range_modifier+"Key"]&&this.data.ui.last_selected&&this.data.ui.last_selected[0]!==a[0]&&this.data.ui.last_selected.parent()[0]===a.parent()[0],k=this.is_selected(a),p=!0,n=this;if(b){if(d.disable_selecting_children&&
h&&(a.parentsUntil(".jstree","li").children("a.jstree-clicked").length||a.children("ul").find("a.jstree-clicked:eq(0)").length))return!1;p=!1;switch(!0){case m:this.data.ui.last_selected.addClass("jstree-last-selected");a=a[a.index()<this.data.ui.last_selected.index()?"nextUntil":"prevUntil"](".jstree-last-selected").andSelf();-1==d.select_limit||a.length<d.select_limit?(this.data.ui.last_selected.removeClass("jstree-last-selected"),this.data.ui.selected.each(function(){this!==n.data.ui.last_selected[0]&&
n.deselect_node(this)}),k=!1,p=!0):p=!1;break;case k&&!h:this.deselect_all();k=!1;p=!0;break;case !k&&!h:if(-1==d.select_limit||0<d.select_limit)this.deselect_all(),p=!0;break;case k&&h:this.deselect_node(a);break;case !k&&h:if(-1==d.select_limit||this.data.ui.selected.length+1<=d.select_limit)p=!0}}p&&!k&&(m||(this.data.ui.last_selected=a),a.children("a").addClass("jstree-clicked"),d.selected_parent_open&&a.parents(".jstree-closed").each(function(){n.open_node(this,!1,!0)}),this.data.ui.selected=
this.data.ui.selected.add(a),this._fix_scroll(a.eq(0)),this.__callback({obj:a,e:c}))},_fix_scroll:function(b){var c=this.get_container()[0];c.scrollHeight>c.offsetHeight&&(b=this._get_node(b))&&-1!==b&&b.length&&b.is(":visible")&&(b=b.offset().top-this.get_container().offset().top,0>b&&(c.scrollTop=c.scrollTop+b-1),b+this.data.core.li_height+(c.scrollWidth>c.offsetWidth?a:0)>c.offsetHeight&&(c.scrollTop+=b-c.offsetHeight+this.data.core.li_height+1+(c.scrollWidth>c.offsetWidth?a:0)))},deselect_node:function(a){a=
this._get_node(a);if(!a.length)return!1;this.is_selected(a)&&(a.children("a").removeClass("jstree-clicked"),this.data.ui.selected=this.data.ui.selected.not(a),this.data.ui.last_selected.get(0)===a.get(0)&&(this.data.ui.last_selected=this.data.ui.selected.eq(0)),this.__callback({obj:a}))},toggle_select:function(a){a=this._get_node(a);if(!a.length)return!1;this.is_selected(a)?this.deselect_node(a):this.select_node(a)},is_selected:function(a){return 0<=this.data.ui.selected.index(this._get_node(a))},
get_selected:function(a){return a?c(a).find("a.jstree-clicked").parent():this.data.ui.selected},deselect_all:function(a){a=a?c(a).find("a.jstree-clicked").parent():this.get_container().find("a.jstree-clicked").parent();a.children("a.jstree-clicked").removeClass("jstree-clicked");this.data.ui.selected=c([]);this.data.ui.last_selected=!1;this.__callback({obj:a})}}});c.jstree.defaults.plugins.push("ui")})(jQuery);(function(c){c.jstree.plugin("crrm",{__init:function(){this.get_container().bind("move_node.jstree",
c.proxy(function(a,b){if(this._get_settings().crrm.move.open_onmove){var c=this;b.rslt.np.parentsUntil(".jstree").andSelf().filter(".jstree-closed").each(function(){c.open_node(this,!1,!0)})}},this))},defaults:{input_width_limit:200,move:{always_copy:!1,open_onmove:!0,default_position:"last",check_move:function(a){return!0}}},_fn:{_show_input:function(a,b){a=this._get_node(a);var d=this._get_settings().core.rtl,e=this._get_settings().crrm.input_width_limit,f=a.children("ins").width(),g=a.find("\x3e a:visible \x3e ins").width()*
a.find("\x3e a:visible \x3e ins").length,l=this.get_text(a),h=c("\x3cdiv /\x3e",{css:{position:"absolute",top:"-200px",left:d?"0px":"-1000px",visibility:"hidden"}}).appendTo("body"),m=a.css("position","relative").append(c("\x3cinput /\x3e",{value:l,"class":"jstree-rename-input",css:{padding:"0",border:"1px solid silver",position:"absolute",left:d?"auto":f+g+4+"px",right:d?f+g+4+"px":"auto",top:"0px",height:this.data.core.li_height-2+"px",lineHeight:this.data.core.li_height-2+"px",width:"150px"},blur:c.proxy(function(){var c=
a.children(".jstree-rename-input"),d=c.val();""===d&&(d=l);h.remove();c.remove();this.set_text(a,l);this.rename_node(a,d);b.call(this,a,d,l);a.css("position","")},this),keyup:function(a){a=a.keyCode||a.which;27==a?(this.value=l,this.blur()):13==a?this.blur():m.width(Math.min(h.text("pW"+this.value).width(),e))},keypress:function(a){if(13==(a.keyCode||a.which))return!1}})).children(".jstree-rename-input");this.set_text(a,"");h.css({fontFamily:m.css("fontFamily")||"",fontSize:m.css("fontSize")||"",
fontWeight:m.css("fontWeight")||"",fontStyle:m.css("fontStyle")||"",fontStretch:m.css("fontStretch")||"",fontVariant:m.css("fontVariant")||"",letterSpacing:m.css("letterSpacing")||"",wordSpacing:m.css("wordSpacing")||""});m.width(Math.min(h.text("pW"+m[0].value).width(),e))[0].select()},rename:function(a){a=this._get_node(a);this.__rollback();var b=this.__callback;this._show_input(a,function(a,c,f){b.call(this,{obj:a,new_name:c,old_name:f})})},create:function(a,b,d,e,f){var g=this;(a=this._get_node(a))||
(a=-1);this.__rollback();return this.create_node(a,b,d,function(a){var b=this._get_parent(a),d=c(a).index();e&&e.call(this,a);b.length&&b.hasClass("jstree-closed")&&this.open_node(b,!1,!0);f?g.__callback({obj:a,name:this.get_text(a),parent:b,position:d}):this._show_input(a,function(a,c,e){g.__callback({obj:a,name:c,parent:b,position:d})})})},remove:function(a){a=this._get_node(a,!0);var b=this._get_parent(a),c=this._get_prev(a);this.__rollback();a=this.delete_node(a);!1!==a&&this.__callback({obj:a,
prev:c,parent:b})},check_move:function(){return this.__call_old()&&this._get_settings().crrm.move.check_move.call(this,this._get_move())?!0:!1},move_node:function(a,b,c,e,f,g){var l=this._get_settings().crrm.move;if(!f)return"undefined"===typeof c&&(c=l.default_position),"inside"!==c||l.default_position.match(/^(before|after)$/)||(c=l.default_position),this.__call_old(!0,a,b,c,e,!1,g);if(!0===l.always_copy||"multitree"===l.always_copy&&a.rt.get_index()!==a.ot.get_index())e=!0;this.__call_old(!0,a,
b,c,e,!0,g)},cut:function(a){a=this._get_node(a,!0);if(!a||!a.length)return!1;this.data.crrm.cp_nodes=!1;this.data.crrm.ct_nodes=a;this.__callback({obj:a})},copy:function(a){a=this._get_node(a,!0);if(!a||!a.length)return!1;this.data.crrm.ct_nodes=!1;this.data.crrm.cp_nodes=a;this.__callback({obj:a})},paste:function(a){a=this._get_node(a);if(!a||!a.length)return!1;var b=this.data.crrm.ct_nodes?this.data.crrm.ct_nodes:this.data.crrm.cp_nodes;if(!this.data.crrm.ct_nodes&&!this.data.crrm.cp_nodes)return!1;
this.data.crrm.ct_nodes&&(this.move_node(this.data.crrm.ct_nodes,a),this.data.crrm.ct_nodes=!1);this.data.crrm.cp_nodes&&this.move_node(this.data.crrm.cp_nodes,a,!1,!0);this.__callback({obj:a,nodes:b})}}})})(jQuery);(function(c){var a=[];c.jstree._themes=!1;c.jstree.plugin("themes",{__init:function(){this.get_container().bind("init.jstree",c.proxy(function(){var a=this._get_settings().themes;this.data.themes.dots=a.dots;this.data.themes.icons=a.icons;this.set_theme(a.theme,a.url)},this)).bind("loaded.jstree",
c.proxy(function(){this.data.themes.dots?this.show_dots():this.hide_dots();this.data.themes.icons?this.show_icons():this.hide_icons()},this))},defaults:{theme:"default",url:!1,dots:!0,icons:!0},_fn:{set_theme:function(b,d){if(!b)return!1;d||(d=c.jstree._themes+b+"/style.css");-1==c.inArray(d,a)&&(c.vakata.css.add_sheet({url:d}),a.push(d));this.data.themes.theme!=b&&(this.get_container().removeClass("jstree-"+this.data.themes.theme),this.data.themes.theme=b);this.get_container().addClass("jstree-"+
b);this.data.themes.dots?this.show_dots():this.hide_dots();this.data.themes.icons?this.show_icons():this.hide_icons();this.__callback()},get_theme:function(){return this.data.themes.theme},show_dots:function(){this.data.themes.dots=!0;this.get_container().children("ul").removeClass("jstree-no-dots")},hide_dots:function(){this.data.themes.dots=!1;this.get_container().children("ul").addClass("jstree-no-dots")},toggle_dots:function(){this.data.themes.dots?this.hide_dots():this.show_dots()},show_icons:function(){this.data.themes.icons=
!0;this.get_container().children("ul").removeClass("jstree-no-icons")},hide_icons:function(){this.data.themes.icons=!1;this.get_container().children("ul").addClass("jstree-no-icons")},toggle_icons:function(){this.data.themes.icons?this.hide_icons():this.show_icons()}}});c(function(){!1===c.jstree._themes&&c("script").each(function(){if(this.src.toString().match(/jquery\.jstree[^\/]*?\.js(\?.*)?$/))return c.jstree._themes=this.src.toString().replace(/jquery\.jstree[^\/]*?\.js(\?.*)?$/,"")+"themes/",
!1});!1===c.jstree._themes&&(c.jstree._themes="themes/")});c.jstree.defaults.plugins.push("themes")})(jQuery);(function(c){var a=[];c.jstree.plugin("hotkeys",{__init:function(){if("undefined"===typeof c.hotkeys)throw"jsTree hotkeys: jQuery hotkeys plugin not included.";if(!this.data.ui)throw"jsTree hotkeys: jsTree UI plugin not included.";c.each(this._get_settings().hotkeys,function(b,d){!1!==d&&-1==c.inArray(b,a)&&(c(document).bind("keydown",b,function(a){a:{var d=c.jstree._focused(),g;if(d&&d.data&&
d.data.hotkeys&&d.data.hotkeys.enabled&&(g=d._get_settings().hotkeys[b])){a=g.call(d,a);break a}a=void 0}return a}),a.push(b))});this.get_container().bind("lock.jstree",c.proxy(function(){this.data.hotkeys.enabled&&(this.data.hotkeys.enabled=!1,this.data.hotkeys.revert=!0)},this)).bind("unlock.jstree",c.proxy(function(){this.data.hotkeys.revert&&(this.data.hotkeys.enabled=!0)},this));this.enable_hotkeys()},defaults:{up:function(){this.hover_node(this._get_prev(this.data.ui.hovered||this.data.ui.last_selected||
-1));return!1},"ctrl+up":function(){this.hover_node(this._get_prev(this.data.ui.hovered||this.data.ui.last_selected||-1));return!1},"shift+up":function(){this.hover_node(this._get_prev(this.data.ui.hovered||this.data.ui.last_selected||-1));return!1},down:function(){this.hover_node(this._get_next(this.data.ui.hovered||this.data.ui.last_selected||-1));return!1},"ctrl+down":function(){this.hover_node(this._get_next(this.data.ui.hovered||this.data.ui.last_selected||-1));return!1},"shift+down":function(){this.hover_node(this._get_next(this.data.ui.hovered||
this.data.ui.last_selected||-1));return!1},left:function(){var a=this.data.ui.hovered||this.data.ui.last_selected;a&&(a.hasClass("jstree-open")?this.close_node(a):this.hover_node(this._get_prev(a)));return!1},"ctrl+left":function(){var a=this.data.ui.hovered||this.data.ui.last_selected;a&&(a.hasClass("jstree-open")?this.close_node(a):this.hover_node(this._get_prev(a)));return!1},"shift+left":function(){var a=this.data.ui.hovered||this.data.ui.last_selected;a&&(a.hasClass("jstree-open")?this.close_node(a):
this.hover_node(this._get_prev(a)));return!1},right:function(){var a=this.data.ui.hovered||this.data.ui.last_selected;a&&a.length&&(a.hasClass("jstree-closed")?this.open_node(a):this.hover_node(this._get_next(a)));return!1},"ctrl+right":function(){var a=this.data.ui.hovered||this.data.ui.last_selected;a&&a.length&&(a.hasClass("jstree-closed")?this.open_node(a):this.hover_node(this._get_next(a)));return!1},"shift+right":function(){var a=this.data.ui.hovered||this.data.ui.last_selected;a&&a.length&&
(a.hasClass("jstree-closed")?this.open_node(a):this.hover_node(this._get_next(a)));return!1},space:function(){this.data.ui.hovered&&this.data.ui.hovered.children("a:eq(0)").click();return!1},"ctrl+space":function(a){a.type="click";this.data.ui.hovered&&this.data.ui.hovered.children("a:eq(0)").trigger(a);return!1},"shift+space":function(a){a.type="click";this.data.ui.hovered&&this.data.ui.hovered.children("a:eq(0)").trigger(a);return!1},f2:function(){this.rename(this.data.ui.hovered||this.data.ui.last_selected)},
del:function(){this.remove(this.data.ui.hovered||this._get_node(null))}},_fn:{enable_hotkeys:function(){this.data.hotkeys.enabled=!0},disable_hotkeys:function(){this.data.hotkeys.enabled=!1}}})})(jQuery);(function(c){c.jstree.plugin("json_data",{__init:function(){this._get_settings().json_data.progressive_unload&&this.get_container().bind("after_close.jstree",function(a,c){c.rslt.obj.children("ul").remove()})},defaults:{data:!1,ajax:!1,correct_state:!0,progressive_render:!1,progressive_unload:!1},
_fn:{load_node:function(a,c,d){var e=this;this.load_node_json(a,function(){e.__callback({obj:e._get_node(a)});c.call(this)},d)},_is_loaded:function(a){var b=this._get_settings().json_data;a=this._get_node(a);return-1==a||!a||!b.ajax&&!b.progressive_render&&!c.isFunction(b.data)||a.is(".jstree-open, .jstree-leaf")||0<a.children("ul").children("li").length},refresh:function(a){a=this._get_node(a);var b=this._get_settings().json_data;a&&-1!==a&&b.progressive_unload&&(c.isFunction(b.data)||b.ajax)&&a.removeData("jstree_children");
return this.__call_old()},load_node_json:function(a,b,d){var e=this.get_settings().json_data,f,g=function(){};f=function(){};if((a=this._get_node(a))&&-1!==a&&(e.progressive_render||e.progressive_unload)&&!a.is(".jstree-open, .jstree-leaf")&&0===a.children("ul").children("li").length&&a.data("jstree_children")){if(f=this._parse_json(a.data("jstree_children"),a))a.append(f),e.progressive_unload||a.removeData("jstree_children");this.clean_node(a);b&&b.call(this)}else{if(a&&-1!==a){if(a.data("jstree_is_loading"))return;
a.data("jstree_is_loading",!0)}switch(!0){case !e.data&&!e.ajax:throw"Neither data nor ajax settings supplied.";case c.isFunction(e.data):e.data.call(this,a,c.proxy(function(c){(c=this._parse_json(c,a))?(-1!==a&&a?(a.append(c).children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree_is_loading")):this.get_container().children("ul").empty().append(c.children()),this.clean_node(a),b&&b.call(this)):(-1!==a&&a?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree_is_loading"),
e.correct_state&&this.correct_state(a)):e.correct_state&&this.get_container().children("ul").empty(),d&&d.call(this))},this));break;case !!e.data&&!e.ajax||!!e.data&&!!e.ajax&&(!a||-1===a):a&&-1!=a||((f=this._parse_json(e.data,a))?(this.get_container().children("ul").empty().append(f.children()),this.clean_node()):e.correct_state&&this.get_container().children("ul").empty());b&&b.call(this);break;case !e.data&&!!e.ajax||!!e.data&&!!e.ajax&&a&&-1!==a:g=function(c,b,f){var k=this.get_settings().json_data.ajax.error;
k&&k.call(this,c,b,f);-1!=a&&a.length?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree_is_loading"),"success"===b&&e.correct_state&&this.correct_state(a)):"success"===b&&e.correct_state&&this.get_container().children("ul").empty();d&&d.call(this)},f=function(d,f,m){var k=this.get_settings().json_data.ajax.success;k&&(d=k.call(this,d,f,m)||d);if(""===d||d&&d.toString&&""===d.toString().replace(/^[\s\n]+$/,"")||!c.isArray(d)&&!c.isPlainObject(d))return g.call(this,
m,f,"");(d=this._parse_json(d,a))?(-1!==a&&a?(a.append(d).children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree_is_loading")):this.get_container().children("ul").empty().append(d.children()),this.clean_node(a),b&&b.call(this)):-1!==a&&a?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree_is_loading"),e.correct_state&&(this.correct_state(a),b&&b.call(this))):e.correct_state&&(this.get_container().children("ul").empty(),b&&b.call(this))},e.ajax.context=
this,e.ajax.error=g,e.ajax.success=f,e.ajax.dataType||(e.ajax.dataType="json"),c.isFunction(e.ajax.url)&&(e.ajax.url=e.ajax.url.call(this,a)),c.isFunction(e.ajax.data)&&(e.ajax.data=e.ajax.data.call(this,a)),c.ajax(e.ajax)}}},_parse_json:function(a,b,d){var e=!1,f=this._get_settings(),g=f.json_data,l=f.core.html_titles,h;if(!a)return e;g.progressive_unload&&b&&-1!==b&&b.data("jstree_children",e);if(c.isArray(a)){e=c();if(!a.length)return!1;f=0;for(g=a.length;f<g;f++)h=this._parse_json(a[f],b,!0),
h.length&&(e=e.add(h))}else{"string"==typeof a&&(a={data:a});if(!a.data&&""!==a.data)return e;e=c("\x3cli /\x3e");a.attr&&e.attr(a.attr);a.metadata&&e.data(a.metadata);a.state&&e.addClass("jstree-"+a.state);c.isArray(a.data)||(h=a.data,a.data=[],a.data.push(h));c.each(a.data,function(b,d){h=c("\x3ca /\x3e");c.isFunction(d)&&(d=d.call(this,a));if("string"==typeof d)h.attr("href","#")[l?"html":"text"](d);else d.attr||(d.attr={}),d.attr.href||(d.attr.href="#"),h.attr(d.attr)[l?"html":"text"](d.title),
d.language&&h.addClass(d.language);h.prepend("\x3cins class\x3d'jstree-icon'\x3e\x26#160;\x3c/ins\x3e");!d.icon&&a.icon&&(d.icon=a.icon);d.icon&&(-1===d.icon.indexOf("/")?h.children("ins").addClass(d.icon):h.children("ins").css("background","url('"+d.icon+"') center center no-repeat"));e.append(h)});e.prepend("\x3cins class\x3d'jstree-icon'\x3e\x26#160;\x3c/ins\x3e");a.children&&(g.progressive_render&&"open"!==a.state?e.addClass("jstree-closed").data("jstree_children",a.children):(g.progressive_unload&&
e.data("jstree_children",a.children),c.isArray(a.children)&&a.children.length&&(h=this._parse_json(a.children,b,!0),h.length&&(b=c("\x3cul /\x3e"),b.append(h),e.append(b)))))}d||(d=c("\x3cul /\x3e"),d.append(e),e=d);return e},get_json:function(a,b,d,e){var f=[],g=this._get_settings(),l=this,h,m,k,p,n,q;(a=this._get_node(a))&&-1!==a||(a=this.get_container().find("\x3e ul \x3e li"));b=c.isArray(b)?b:["id","class"];!e&&this.data.types&&b.push(g.types.type_attr);d=c.isArray(d)?d:[];a.each(function(){k=
c(this);h={data:[]};b.length&&(h.attr={});c.each(b,function(a,c){(m=k.attr(c))&&m.length&&m.replace(/jstree[^ ]*/ig,"").length&&(h.attr[c]=(" "+m).replace(/ jstree[^ ]*/ig,"").replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,""))});k.hasClass("jstree-open")&&(h.state="open");k.hasClass("jstree-closed")&&(h.state="closed");k.data()&&(h.metadata=k.data());p=k.children("a");p.each(function(){n=c(this);d.length||-1!==c.inArray("languages",g.plugins)||n.children("ins").get(0).style.backgroundImage.length||
n.children("ins").get(0).className&&n.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,"").length?(q=!1,-1!==c.inArray("languages",g.plugins)&&c.isArray(g.languages)&&g.languages.length&&c.each(g.languages,function(a,c){if(n.hasClass(c))return q=c,!1}),m={attr:{},title:l.get_text(n,q)},c.each(d,function(a,c){m.attr[c]=(" "+(n.attr(c)||"")).replace(/ jstree[^ ]*/ig,"").replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,"")}),-1!==c.inArray("languages",g.plugins)&&c.isArray(g.languages)&&
g.languages.length&&c.each(g.languages,function(a,c){if(n.hasClass(c))return m.language=c,!0}),n.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,"").replace(/^\s+$/ig,"").length&&(m.icon=n.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,"").replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,"")),n.children("ins").get(0).style.backgroundImage.length&&(m.icon=n.children("ins").get(0).style.backgroundImage.replace("url(","").replace(")",""))):m=l.get_text(n);1<p.length?h.data.push(m):
h.data=m});k=k.find("\x3e ul \x3e li");k.length&&(h.children=l.get_json(k,b,d,!0));f.push(h)});return f}}})})(jQuery);(function(c){c.jstree.plugin("languages",{__init:function(){this._load_css()},defaults:[],_fn:{set_lang:function(a){var b=this._get_settings().languages,d=!1,e=".jstree-"+this.get_index()+" a";if(!c.isArray(b)||0===b.length)return!1;if(-1==c.inArray(a,b))if(b[a])a=b[a];else return!1;if(a==this.data.languages.current_language)return!0;d=c.vakata.css.get_css(e+"."+this.data.languages.current_language,
!1,this.data.languages.language_css);!1!==d&&(d.style.display="none");d=c.vakata.css.get_css(e+"."+a,!1,this.data.languages.language_css);!1!==d&&(d.style.display="");this.data.languages.current_language=a;this.__callback(a);return!0},get_lang:function(){return this.data.languages.current_language},_get_string:function(a,b){var d=this._get_settings().languages,e=this._get_settings().core.strings;c.isArray(d)&&d.length&&(b=b&&-1!=c.inArray(b,d)?b:this.data.languages.current_language);return e[b]&&
e[b][a]?e[b][a]:e[a]?e[a]:a},get_text:function(a,b){a=this._get_node(a)||this.data.ui.last_selected;if(!a.size())return!1;var d=this._get_settings().languages,e=this._get_settings().core.html_titles;c.isArray(d)&&d.length?(b=b&&-1!=c.inArray(b,d)?b:this.data.languages.current_language,a=a.children("a."+b)):a=a.children("a:eq(0)");if(e)return a=a.clone(),a.children("INS").remove(),a.html();a=a.contents().filter(function(){return 3==this.nodeType})[0];return a.nodeValue},set_text:function(a,b,d){a=
this._get_node(a)||this.data.ui.last_selected;if(!a.size())return!1;var e=this._get_settings().languages,f=this._get_settings().core.html_titles;c.isArray(e)&&e.length?(d=d&&-1!=c.inArray(d,e)?d:this.data.languages.current_language,a=a.children("a."+d)):a=a.children("a:eq(0)");if(f)return e=a.children("INS").clone(),a.html(b).prepend(e),this.__callback({obj:a,name:b,lang:d}),!0;a=a.contents().filter(function(){return 3==this.nodeType})[0];this.__callback({obj:a,name:b,lang:d});return a.nodeValue=
b},_load_css:function(){var a=this._get_settings().languages,b="/* languages css */",d=".jstree-"+this.get_index()+" a",e;if(c.isArray(a)&&a.length){this.data.languages.current_language=a[0];for(e=0;e<a.length;e++)b+=d+"."+a[e]+" {",a[e]!=this.data.languages.current_language&&(b+=" display:none; "),b+=" } ";this.data.languages.language_css=c.vakata.css.add_sheet({str:b,title:"jstree-languages"})}},create_node:function(a,b,d,e){return this.__call_old(!0,a,b,d,function(a){var b=this._get_settings().languages,
d=a.children("a"),h;if(c.isArray(b)&&b.length){for(h=0;h<b.length;h++)d.is("."+b[h])||a.append(d.eq(0).clone().removeClass(b.join(" ")).addClass(b[h]));d.not("."+b.join(", .")).remove()}e&&e.call(this,a)})}}})})(jQuery);(function(c){c.jstree.plugin("cookies",{__init:function(){if("undefined"===typeof c.cookie)throw"jsTree cookie: jQuery cookie plugin not included.";var a=this._get_settings().cookies,b;a.save_loaded&&(b=c.cookie(a.save_loaded))&&b.length&&(this.data.core.to_load=b.split(","));a.save_opened&&
(b=c.cookie(a.save_opened))&&b.length&&(this.data.core.to_open=b.split(","));a.save_selected&&(b=c.cookie(a.save_selected))&&b.length&&this.data.ui&&(this.data.ui.to_select=b.split(","));this.get_container().one((this.data.ui?"reselect":"reopen")+".jstree",c.proxy(function(){this.get_container().bind("open_node.jstree close_node.jstree select_node.jstree deselect_node.jstree",c.proxy(function(a){this._get_settings().cookies.auto_save&&this.save_cookie((a.handleObj.namespace+a.handleObj.type).replace("jstree",
""))},this))},this))},defaults:{save_loaded:"jstree_load",save_opened:"jstree_open",save_selected:"jstree_select",auto_save:!0,cookie_options:{}},_fn:{save_cookie:function(a){if(!this.data.core.refreshing){var b=this._get_settings().cookies;if(a)switch(a){case "open_node":case "close_node":b.save_opened&&(this.save_opened(),c.cookie(b.save_opened,this.data.core.to_open.join(","),b.cookie_options));b.save_loaded&&(this.save_loaded(),c.cookie(b.save_loaded,this.data.core.to_load.join(","),b.cookie_options));
break;case "select_node":case "deselect_node":b.save_selected&&this.data.ui&&(this.save_selected(),c.cookie(b.save_selected,this.data.ui.to_select.join(","),b.cookie_options))}else b.save_loaded&&(this.save_loaded(),c.cookie(b.save_loaded,this.data.core.to_load.join(","),b.cookie_options)),b.save_opened&&(this.save_opened(),c.cookie(b.save_opened,this.data.core.to_open.join(","),b.cookie_options)),b.save_selected&&this.data.ui&&(this.save_selected(),c.cookie(b.save_selected,this.data.ui.to_select.join(","),
b.cookie_options))}}}})})(jQuery);(function(c){c.jstree.plugin("sort",{__init:function(){this.get_container().bind("load_node.jstree",c.proxy(function(a,c){var d=this._get_node(c.rslt.obj),d=-1===d?this.get_container().children("ul"):d.children("ul");this.sort(d)},this)).bind("rename_node.jstree create_node.jstree create.jstree",c.proxy(function(a,c){this.sort(c.rslt.obj.parent())},this)).bind("move_node.jstree",c.proxy(function(a,c){var d=-1==c.rslt.np?this.get_container():c.rslt.np;this.sort(d.children("ul"))},
this))},defaults:function(a,c){return this.get_text(a)>this.get_text(c)?1:-1},_fn:{sort:function(a){var b=this._get_settings().sort,d=this;a.append(c.makeArray(a.children("li")).sort(c.proxy(b,d)));a.find("\x3e li \x3e ul").each(function(){d.sort(c(this))});this.clean_node(a)}}})})(jQuery);(function(c){var a=!1,b=!1,d=!1,e=!1,f=!1,g=!1,l=!1,h=!1,m=!1;c.vakata.dnd={is_down:!1,is_drag:!1,helper:!1,scroll_spd:10,init_x:0,init_y:0,threshold:5,helper_left:5,helper_top:10,user_data:{},drag_start:function(a,
b,d){c.vakata.dnd.is_drag&&c.vakata.drag_stop({});try{a.currentTarget.unselectable="on",a.currentTarget.onselectstart=function(){return!1},a.currentTarget.style&&(a.currentTarget.style.MozUserSelect="none")}catch(e){}c.vakata.dnd.init_x=a.pageX;c.vakata.dnd.init_y=a.pageY;c.vakata.dnd.user_data=b;c.vakata.dnd.is_down=!0;c.vakata.dnd.helper=c("\x3cdiv id\x3d'vakata-dragged' /\x3e").html(d);c(document).bind("mousemove",c.vakata.dnd.drag);c(document).bind("mouseup",c.vakata.dnd.drag_stop);return!1},
drag:function(a){if(c.vakata.dnd.is_down){if(!c.vakata.dnd.is_drag)if(5<Math.abs(a.pageX-c.vakata.dnd.init_x)||5<Math.abs(a.pageY-c.vakata.dnd.init_y))c.vakata.dnd.helper.appendTo("body"),c.vakata.dnd.is_drag=!0,c(document).triggerHandler("drag_start.vakata",{event:a,data:c.vakata.dnd.user_data});else return;if("mousemove"===a.type){var b=c(document),d=b.scrollTop(),b=b.scrollLeft();20>a.pageY-d?(g&&"down"===l&&(clearInterval(g),g=!1),g||(l="up",g=setInterval(function(){c(document).scrollTop(c(document).scrollTop()-
c.vakata.dnd.scroll_spd)},150))):g&&"up"===l&&(clearInterval(g),g=!1);20>c(window).height()-(a.pageY-d)?(g&&"up"===l&&(clearInterval(g),g=!1),g||(l="down",g=setInterval(function(){c(document).scrollTop(c(document).scrollTop()+c.vakata.dnd.scroll_spd)},150))):g&&"down"===l&&(clearInterval(g),g=!1);20>a.pageX-b?(f&&"right"===h&&(clearInterval(f),f=!1),f||(h="left",f=setInterval(function(){c(document).scrollLeft(c(document).scrollLeft()-c.vakata.dnd.scroll_spd)},150))):f&&"left"===h&&(clearInterval(f),
f=!1);20>c(window).width()-(a.pageX-b)?(f&&"left"===h&&(clearInterval(f),f=!1),f||(h="right",f=setInterval(function(){c(document).scrollLeft(c(document).scrollLeft()+c.vakata.dnd.scroll_spd)},150))):f&&"right"===h&&(clearInterval(f),f=!1)}c.vakata.dnd.helper.css({left:a.pageX+c.vakata.dnd.helper_left+"px",top:a.pageY+c.vakata.dnd.helper_top+"px"});c(document).triggerHandler("drag.vakata",{event:a,data:c.vakata.dnd.user_data})}},drag_stop:function(a){f&&clearInterval(f);g&&clearInterval(g);c(document).unbind("mousemove",
c.vakata.dnd.drag);c(document).unbind("mouseup",c.vakata.dnd.drag_stop);c(document).triggerHandler("drag_stop.vakata",{event:a,data:c.vakata.dnd.user_data});c.vakata.dnd.helper.remove();c.vakata.dnd.init_x=0;c.vakata.dnd.init_y=0;c.vakata.dnd.user_data={};c.vakata.dnd.is_down=!1;c.vakata.dnd.is_drag=!1}};c(function(){c.vakata.css.add_sheet({str:"#vakata-dragged { display:block; margin:0 0 0 0; padding:4px 4px 4px 24px; position:absolute; top:-2000px; line-height:16px; z-index:10000; } ",title:"vakata"})});
c.jstree.plugin("dnd",{__init:function(){this.data.dnd={active:!1,after:!1,inside:!1,before:!1,off:!1,prepared:!1,w:0,to1:!1,to2:!1,cof:!1,cw:!1,ch:!1,i1:!1,i2:!1,mto:!1};this.get_container().bind("mouseenter.jstree",c.proxy(function(b){c.vakata.dnd.is_drag&&c.vakata.dnd.user_data.jstree&&(this.data.themes&&(d.attr("class","jstree-"+this.data.themes.theme),e&&e.attr("class","jstree-"+this.data.themes.theme),c.vakata.dnd.helper.attr("class","jstree-dnd-helper jstree-"+this.data.themes.theme)),b.currentTarget===
b.target&&c.vakata.dnd.user_data.obj&&c(c.vakata.dnd.user_data.obj).length&&c(c.vakata.dnd.user_data.obj).parents(".jstree:eq(0)")[0]!==b.target&&(b=c.jstree._reference(b.target),b.data.dnd.foreign?(b=b._get_settings().dnd.drag_check.call(this,{o:a,r:b.get_container(),is_root:!0}),!0!==b&&!0!==b.inside&&!0!==b.before&&!0!==b.after||c.vakata.dnd.helper.children("ins").attr("class","jstree-ok")):(b.prepare_move(a,b.get_container(),"last"),b.check_move()&&c.vakata.dnd.helper.children("ins").attr("class",
"jstree-ok"))))},this)).bind("mouseup.jstree",c.proxy(function(b){if(c.vakata.dnd.is_drag&&c.vakata.dnd.user_data.jstree&&b.currentTarget===b.target&&c.vakata.dnd.user_data.obj&&c(c.vakata.dnd.user_data.obj).length&&c(c.vakata.dnd.user_data.obj).parents(".jstree:eq(0)")[0]!==b.target){var d=c.jstree._reference(b.currentTarget);d.data.dnd.foreign?(b=d._get_settings().dnd.drag_check.call(this,{o:a,r:d.get_container(),is_root:!0}),!0!==b&&!0!==b.inside&&!0!==b.before&&!0!==b.after||d._get_settings().dnd.drag_finish.call(this,
{o:a,r:d.get_container(),is_root:!0})):d.move_node(a,d.get_container(),"last",b[d._get_settings().dnd.copy_modifier+"Key"])}},this)).bind("mouseleave.jstree",c.proxy(function(a){if(a.relatedTarget&&a.relatedTarget.id&&"jstree-marker-line"===a.relatedTarget.id)return!1;c.vakata.dnd.is_drag&&c.vakata.dnd.user_data.jstree&&(this.data.dnd.i1&&clearInterval(this.data.dnd.i1),this.data.dnd.i2&&clearInterval(this.data.dnd.i2),this.data.dnd.to1&&clearTimeout(this.data.dnd.to1),this.data.dnd.to2&&clearTimeout(this.data.dnd.to2),
c.vakata.dnd.helper.children("ins").hasClass("jstree-ok")&&c.vakata.dnd.helper.children("ins").attr("class","jstree-invalid"))},this)).bind("mousemove.jstree",c.proxy(function(a){if(c.vakata.dnd.is_drag&&c.vakata.dnd.user_data.jstree){var b=this.get_container()[0];a.pageX+24>this.data.dnd.cof.left+this.data.dnd.cw?(this.data.dnd.i1&&clearInterval(this.data.dnd.i1),this.data.dnd.i1=setInterval(c.proxy(function(){this.scrollLeft+=c.vakata.dnd.scroll_spd},b),100)):a.pageX-24<this.data.dnd.cof.left?(this.data.dnd.i1&&
clearInterval(this.data.dnd.i1),this.data.dnd.i1=setInterval(c.proxy(function(){this.scrollLeft-=c.vakata.dnd.scroll_spd},b),100)):this.data.dnd.i1&&clearInterval(this.data.dnd.i1);a.pageY+24>this.data.dnd.cof.top+this.data.dnd.ch?(this.data.dnd.i2&&clearInterval(this.data.dnd.i2),this.data.dnd.i2=setInterval(c.proxy(function(){this.scrollTop+=c.vakata.dnd.scroll_spd},b),100)):a.pageY-24<this.data.dnd.cof.top?(this.data.dnd.i2&&clearInterval(this.data.dnd.i2),this.data.dnd.i2=setInterval(c.proxy(function(){this.scrollTop-=
c.vakata.dnd.scroll_spd},b),100)):this.data.dnd.i2&&clearInterval(this.data.dnd.i2)}},this)).bind("scroll.jstree",c.proxy(function(a){c.vakata.dnd.is_drag&&c.vakata.dnd.user_data.jstree&&d&&e&&(d.hide(),e.hide())},this)).delegate("a","mousedown.jstree",c.proxy(function(a){if(1===a.which)return this.start_drag(a.currentTarget,a),!1},this)).delegate("a","mouseenter.jstree",c.proxy(function(a){c.vakata.dnd.is_drag&&c.vakata.dnd.user_data.jstree&&this.dnd_enter(a.currentTarget)},this)).delegate("a","mousemove.jstree",
c.proxy(function(a){c.vakata.dnd.is_drag&&c.vakata.dnd.user_data.jstree&&(b&&b.length&&b.children("a")[0]===a.currentTarget||this.dnd_enter(a.currentTarget),"undefined"===typeof this.data.dnd.off.top&&(this.data.dnd.off=c(a.target).offset()),this.data.dnd.w=(a.pageY-(this.data.dnd.off.top||0))%this.data.core.li_height,0>this.data.dnd.w&&(this.data.dnd.w+=this.data.core.li_height),this.dnd_show())},this)).delegate("a","mouseleave.jstree",c.proxy(function(a){if(c.vakata.dnd.is_drag&&c.vakata.dnd.user_data.jstree){if(a.relatedTarget&&
a.relatedTarget.id&&"jstree-marker-line"===a.relatedTarget.id)return!1;d&&d.hide();e&&e.hide();this.data.dnd.mto=setTimeout(function(c){return function(){c.dnd_leave(a)}}(this),0)}},this)).delegate("a","mouseup.jstree",c.proxy(function(a){c.vakata.dnd.is_drag&&c.vakata.dnd.user_data.jstree&&this.dnd_finish(a)},this));c(document).bind("drag_stop.vakata",c.proxy(function(){this.data.dnd.to1&&clearTimeout(this.data.dnd.to1);this.data.dnd.to2&&clearTimeout(this.data.dnd.to2);this.data.dnd.i1&&clearInterval(this.data.dnd.i1);
this.data.dnd.i2&&clearInterval(this.data.dnd.i2);this.data.dnd.after=!1;this.data.dnd.before=!1;this.data.dnd.inside=!1;this.data.dnd.off=!1;this.data.dnd.prepared=!1;this.data.dnd.w=!1;this.data.dnd.to1=!1;this.data.dnd.to2=!1;this.data.dnd.i1=!1;this.data.dnd.i2=!1;this.data.dnd.active=!1;this.data.dnd.foreign=!1;d&&d.css({top:"-2000px"});e&&e.css({top:"-2000px"})},this)).bind("drag_start.vakata",c.proxy(function(a,b){if(b.data.jstree){var d=c(b.event.target);d.closest(".jstree").hasClass("jstree-"+
this.get_index())&&this.dnd_enter(d)}},this));var f=this._get_settings().dnd;f.drag_target&&c(document).delegate(f.drag_target,"mousedown.jstree-"+this.get_index(),c.proxy(function(b){a=b.target;c.vakata.dnd.drag_start(b,{jstree:!0,obj:b.target},"\x3cins class\x3d'jstree-icon'\x3e\x3c/ins\x3e"+c(b.target).text());this.data.themes&&(d&&d.attr("class","jstree-"+this.data.themes.theme),e&&e.attr("class","jstree-"+this.data.themes.theme),c.vakata.dnd.helper.attr("class","jstree-dnd-helper jstree-"+this.data.themes.theme));
c.vakata.dnd.helper.children("ins").attr("class","jstree-invalid");var f=this.get_container();this.data.dnd.cof=f.offset();this.data.dnd.cw=parseInt(f.width(),10);this.data.dnd.ch=parseInt(f.height(),10);this.data.dnd.foreign=!0;b.preventDefault()},this));f.drop_target&&c(document).delegate(f.drop_target,"mouseenter.jstree-"+this.get_index(),c.proxy(function(b){this.data.dnd.active&&this._get_settings().dnd.drop_check.call(this,{o:a,r:c(b.target),e:b})&&c.vakata.dnd.helper.children("ins").attr("class",
"jstree-ok")},this)).delegate(f.drop_target,"mouseleave.jstree-"+this.get_index(),c.proxy(function(a){this.data.dnd.active&&c.vakata.dnd.helper.children("ins").attr("class","jstree-invalid")},this)).delegate(f.drop_target,"mouseup.jstree-"+this.get_index(),c.proxy(function(b){this.data.dnd.active&&c.vakata.dnd.helper.children("ins").hasClass("jstree-ok")&&this._get_settings().dnd.drop_finish.call(this,{o:a,r:c(b.target),e:b})},this))},defaults:{copy_modifier:"ctrl",check_timeout:100,open_timeout:500,
drop_target:".jstree-drop",drop_check:function(a){return!0},drop_finish:c.noop,drag_target:".jstree-draggable",drag_finish:c.noop,drag_check:function(a){return{after:!1,before:!1,inside:!0}}},_fn:{dnd_prepare:function(){if(b&&b.length){this.data.dnd.off=b.offset();this._get_settings().core.rtl&&(this.data.dnd.off.right=this.data.dnd.off.left+b.width());if(this.data.dnd.foreign){var c=this._get_settings().dnd.drag_check.call(this,{o:a,r:b});this.data.dnd.after=c.after;this.data.dnd.before=c.before;
this.data.dnd.inside=c.inside;this.data.dnd.prepared=!0;return this.dnd_show()}this.prepare_move(a,b,"before");this.data.dnd.before=this.check_move();this.prepare_move(a,b,"after");this.data.dnd.after=this.check_move();this._is_loaded(b)?(this.prepare_move(a,b,"inside"),this.data.dnd.inside=this.check_move()):this.data.dnd.inside=!1;this.data.dnd.prepared=!0;return this.dnd_show()}},dnd_show:function(){if(this.data.dnd.prepared){var a=["before","inside","after"],b=!1,f=this._get_settings().core.rtl,
a=this.data.dnd.w<this.data.core.li_height/3?["before","inside","after"]:this.data.dnd.w<=2*this.data.core.li_height/3?this.data.dnd.w<this.data.core.li_height/2?["inside","before","after"]:["inside","after","before"]:["after","inside","before"];c.each(a,c.proxy(function(a,d){if(this.data.dnd[d])return c.vakata.dnd.helper.children("ins").attr("class","jstree-ok"),b=d,!1},this));!1===b&&c.vakata.dnd.helper.children("ins").attr("class","jstree-invalid");a=f?this.data.dnd.off.right-18:this.data.dnd.off.left+
10;switch(b){case "before":d.css({left:a+"px",top:this.data.dnd.off.top-6+"px"}).show();e&&e.css({left:a+8+"px",top:this.data.dnd.off.top-1+"px"}).show();break;case "after":d.css({left:a+"px",top:this.data.dnd.off.top+this.data.core.li_height-6+"px"}).show();e&&e.css({left:a+8+"px",top:this.data.dnd.off.top+this.data.core.li_height-1+"px"}).show();break;case "inside":d.css({left:a+(f?-4:4)+"px",top:this.data.dnd.off.top+this.data.core.li_height/2-5+"px"}).show();e&&e.hide();break;default:d.hide(),
e&&e.hide()}return m=b}},dnd_open:function(){this.data.dnd.to2=!1;this.open_node(b,c.proxy(this.dnd_prepare,this),!0)},dnd_finish:function(c){this.data.dnd.foreign?(this.data.dnd.after||this.data.dnd.before||this.data.dnd.inside)&&this._get_settings().dnd.drag_finish.call(this,{o:a,r:b,p:m}):(this.dnd_prepare(),this.move_node(a,b,m,c[this._get_settings().dnd.copy_modifier+"Key"]));b=a=!1;d.hide();e&&e.hide()},dnd_enter:function(a){this.data.dnd.mto&&(clearTimeout(this.data.dnd.mto),this.data.dnd.mto=
!1);var d=this._get_settings().dnd;this.data.dnd.prepared=!1;b=this._get_node(a);d.check_timeout?(this.data.dnd.to1&&clearTimeout(this.data.dnd.to1),this.data.dnd.to1=setTimeout(c.proxy(this.dnd_prepare,this),d.check_timeout)):this.dnd_prepare();d.open_timeout?(this.data.dnd.to2&&clearTimeout(this.data.dnd.to2),b&&b.length&&b.hasClass("jstree-closed")&&(this.data.dnd.to2=setTimeout(c.proxy(this.dnd_open,this),d.open_timeout))):b&&b.length&&b.hasClass("jstree-closed")&&this.dnd_open()},dnd_leave:function(a){this.data.dnd.after=
!1;this.data.dnd.before=!1;this.data.dnd.inside=!1;c.vakata.dnd.helper.children("ins").attr("class","jstree-invalid");d.hide();e&&e.hide();b&&b[0]===a.target.parentNode&&(this.data.dnd.to1&&(clearTimeout(this.data.dnd.to1),this.data.dnd.to1=!1),this.data.dnd.to2&&(clearTimeout(this.data.dnd.to2),this.data.dnd.to2=!1))},start_drag:function(b,f){a=this._get_node(b);this.data.ui&&this.is_selected(a)&&(a=this._get_node(null,!0));var h=1<a.length?this._get_string("multiple_selection"):this.get_text(a),
g=this.get_container();this._get_settings().core.html_titles||(h=h.replace(/</ig,"\x26lt;").replace(/>/ig,"\x26gt;"));c.vakata.dnd.drag_start(f,{jstree:!0,obj:a},"\x3cins class\x3d'jstree-icon'\x3e\x3c/ins\x3e"+h);this.data.themes&&(d&&d.attr("class","jstree-"+this.data.themes.theme),e&&e.attr("class","jstree-"+this.data.themes.theme),c.vakata.dnd.helper.attr("class","jstree-dnd-helper jstree-"+this.data.themes.theme));this.data.dnd.cof=g.offset();this.data.dnd.cw=parseInt(g.width(),10);this.data.dnd.ch=
parseInt(g.height(),10);this.data.dnd.active=!0}}});c(function(){c.vakata.css.add_sheet({str:"#vakata-dragged ins { display:block; text-decoration:none; width:16px; height:16px; margin:0 0 0 0; padding:0; position:absolute; top:4px; left:4px;  -moz-border-radius:4px; border-radius:4px; -webkit-border-radius:4px; } #vakata-dragged .jstree-ok { background:green; } #vakata-dragged .jstree-invalid { background:red; } #jstree-marker { padding:0; margin:0; font-size:12px; overflow:hidden; height:12px; width:8px; position:absolute; top:-30px; z-index:10001; background-repeat:no-repeat; display:none; background-color:transparent; text-shadow:1px 1px 1px white; color:black; line-height:10px; } #jstree-marker-line { padding:0; margin:0; line-height:0%; font-size:1px; overflow:hidden; height:1px; width:100px; position:absolute; top:-30px; z-index:10000; background-repeat:no-repeat; display:none; background-color:#456c43;  cursor:pointer; border:1px solid #eeeeee; border-left:0; -moz-box-shadow: 0px 0px 2px #666; -webkit-box-shadow: 0px 0px 2px #666; box-shadow: 0px 0px 2px #666;  -moz-border-radius:1px; border-radius:1px; -webkit-border-radius:1px; }",
title:"jstree"});d=c("\x3cdiv /\x3e").attr({id:"jstree-marker"}).hide().html("\x26raquo;").bind("mouseleave mouseenter",function(a){d.hide();e.hide();a.preventDefault();a.stopImmediatePropagation();return!1}).appendTo("body");e=c("\x3cdiv /\x3e").attr({id:"jstree-marker-line"}).hide().bind("mouseup",function(a){if(b&&b.length)return b.children("a").trigger(a),a.preventDefault(),a.stopImmediatePropagation(),!1}).bind("mouseleave",function(a){var f=c(a.relatedTarget);if((f.is(".jstree")||0===f.closest(".jstree").length)&&
b&&b.length)return b.children("a").trigger(a),d.hide(),e.hide(),a.preventDefault(),a.stopImmediatePropagation(),!1}).appendTo("body");c(document).bind("drag_start.vakata",function(a,b){b.data.jstree&&(d.show(),e&&e.show())});c(document).bind("drag_stop.vakata",function(a,b){b.data.jstree&&(d.hide(),e&&e.hide())})})})(jQuery);(function(c){c.jstree.plugin("checkbox",{__init:function(){this.data.checkbox.noui=this._get_settings().checkbox.override_ui;this.data.ui&&this.data.checkbox.noui&&(this.select_node=
this.deselect_node=this.deselect_all=c.noop,this.get_selected=this.get_checked);this.get_container().bind("open_node.jstree create_node.jstree clean_node.jstree refresh.jstree",c.proxy(function(a,b){this._prepare_checkboxes(b.rslt.obj)},this)).bind("loaded.jstree",c.proxy(function(a){this._prepare_checkboxes()},this)).delegate(this.data.ui&&this.data.checkbox.noui?"a":"ins.jstree-checkbox","click.jstree",c.proxy(function(a){a.preventDefault();this._get_node(a.target).hasClass("jstree-checked")?this.uncheck_node(a.target):
this.check_node(a.target);if(this.data.ui&&this.data.checkbox.noui)this.save_selected(),this.data.cookies&&this.save_cookie("select_node");else return a.stopImmediatePropagation(),!1},this))},defaults:{override_ui:!1,two_state:!1,real_checkboxes:!1,checked_parent_open:!0,real_checkboxes_names:function(a){return["check_"+(a[0].id||Math.ceil(1E4*Math.random())),1]}},__destroy:function(){this.get_container().find("input.jstree-real-checkbox").removeClass("jstree-real-checkbox").end().find("ins.jstree-checkbox").remove()},
_fn:{_checkbox_notify:function(a,b){b.checked&&this.check_node(a,!1)},_prepare_checkboxes:function(a){a=a&&-1!=a?this._get_node(a):this.get_container().find("\x3e ul \x3e li");if(!1!==a){var b,d=this,e,f=this._get_settings().checkbox.two_state,g=this._get_settings().checkbox.real_checkboxes,l=this._get_settings().checkbox.real_checkboxes_names;a.each(function(){e=c(this);b=e.is("li")&&(e.hasClass("jstree-checked")||g&&e.children(":checked").length)?"jstree-checked":"jstree-unchecked";e.find("li").andSelf().each(function(){var a=
c(this),e;a.children("a"+(d.data.languages?"":":eq(0)")).not(":has(.jstree-checkbox)").prepend("\x3cins class\x3d'jstree-checkbox'\x3e\x26#160;\x3c/ins\x3e").parent().not(".jstree-checked, .jstree-unchecked").addClass(f?"jstree-unchecked":b);g&&(a.children(":checkbox").length?a.children(":checkbox").addClass("jstree-real-checkbox"):(e=l.call(d,a),a.prepend("\x3cinput type\x3d'checkbox' class\x3d'jstree-real-checkbox' id\x3d'"+e[0]+"' name\x3d'"+e[0]+"' value\x3d'"+e[1]+"' /\x3e")));f?(a.hasClass("jstree-checked")||
a.children(":checked").length)&&a.addClass("jstree-checked").children(":checkbox").prop("checked",!0):("jstree-checked"===b||a.hasClass("jstree-checked")||a.children(":checked").length)&&a.find("li").andSelf().addClass("jstree-checked").children(":checkbox").prop("checked",!0)})});f||a.find(".jstree-checked").parent().parent().each(function(){d._repair_state(this)})}},change_state:function(a,b){a=this._get_node(a);var d=!1,e=this._get_settings().checkbox.real_checkboxes;if(!a||-1===a)return!1;b=!1===
b||!0===b?b:a.hasClass("jstree-checked");if(this._get_settings().checkbox.two_state)b?(a.removeClass("jstree-checked").addClass("jstree-unchecked"),e&&a.children(":checkbox").prop("checked",!1)):(a.removeClass("jstree-unchecked").addClass("jstree-checked"),e&&a.children(":checkbox").prop("checked",!0));else{if(b){d=a.find("li").andSelf();if(!d.filter(".jstree-checked, .jstree-undetermined").length)return!1;d.removeClass("jstree-checked jstree-undetermined").addClass("jstree-unchecked");e&&d.children(":checkbox").prop("checked",
!1)}else{d=a.find("li").andSelf();if(!d.filter(".jstree-unchecked, .jstree-undetermined").length)return!1;d.removeClass("jstree-unchecked jstree-undetermined").addClass("jstree-checked");e&&d.children(":checkbox").prop("checked",!0);this.data.ui&&(this.data.ui.last_selected=a);this.data.checkbox.last_selected=a}a.parentsUntil(".jstree","li").each(function(){var a=c(this);if(b){if(a.children("ul").children("li.jstree-checked, li.jstree-undetermined").length)return a.parentsUntil(".jstree","li").andSelf().removeClass("jstree-checked jstree-unchecked").addClass("jstree-undetermined"),
e&&a.parentsUntil(".jstree","li").andSelf().children(":checkbox").prop("checked",!1),!1;a.removeClass("jstree-checked jstree-undetermined").addClass("jstree-unchecked");e&&a.children(":checkbox").prop("checked",!1)}else{if(a.children("ul").children("li.jstree-unchecked, li.jstree-undetermined").length)return a.parentsUntil(".jstree","li").andSelf().removeClass("jstree-checked jstree-unchecked").addClass("jstree-undetermined"),e&&a.parentsUntil(".jstree","li").andSelf().children(":checkbox").prop("checked",
!1),!1;a.removeClass("jstree-unchecked jstree-undetermined").addClass("jstree-checked");e&&a.children(":checkbox").prop("checked",!0)}})}this.data.ui&&this.data.checkbox.noui&&(this.data.ui.selected=this.get_checked());this.__callback(a);return!0},check_node:function(a){if(this.change_state(a,!1)){a=this._get_node(a);if(this._get_settings().checkbox.checked_parent_open){var b=this;a.parents(".jstree-closed").each(function(){b.open_node(this,!1,!0)})}this.__callback({obj:a})}},uncheck_node:function(a){this.change_state(a,
!0)&&this.__callback({obj:this._get_node(a)})},check_all:function(){var a=this;(this._get_settings().checkbox.two_state?this.get_container_ul().find("li"):this.get_container_ul().children("li")).each(function(){a.change_state(this,!1)});this.__callback()},uncheck_all:function(){var a=this;(this._get_settings().checkbox.two_state?this.get_container_ul().find("li"):this.get_container_ul().children("li")).each(function(){a.change_state(this,!0)});this.__callback()},is_checked:function(a){a=this._get_node(a);
return a.length?a.is(".jstree-checked"):!1},get_checked:function(a,b){a=a&&-1!==a?this._get_node(a):this.get_container();return b||this._get_settings().checkbox.two_state?a.find(".jstree-checked"):a.find("\x3e ul \x3e .jstree-checked, .jstree-undetermined \x3e ul \x3e .jstree-checked")},get_unchecked:function(a,b){a=a&&-1!==a?this._get_node(a):this.get_container();return b||this._get_settings().checkbox.two_state?a.find(".jstree-unchecked"):a.find("\x3e ul \x3e .jstree-unchecked, .jstree-undetermined \x3e ul \x3e .jstree-unchecked")},
show_checkboxes:function(){this.get_container().children("ul").removeClass("jstree-no-checkboxes")},hide_checkboxes:function(){this.get_container().children("ul").addClass("jstree-no-checkboxes")},_repair_state:function(a){a=this._get_node(a);if(a.length)if(this._get_settings().checkbox.two_state)a.find("li").andSelf().not(".jstree-checked").removeClass("jstree-undetermined").addClass("jstree-unchecked").children(":checkbox").prop("checked",!0);else{var b=this._get_settings().checkbox.real_checkboxes,
c=a.find("\x3e ul \x3e .jstree-checked").length,e=a.find("\x3e ul \x3e .jstree-undetermined").length,f=a.find("\x3e ul \x3e li").length;0===f?a.hasClass("jstree-undetermined")&&this.change_state(a,!1):0===c&&0===e?this.change_state(a,!0):c===f?this.change_state(a,!1):(a.parentsUntil(".jstree","li").andSelf().removeClass("jstree-checked jstree-unchecked").addClass("jstree-undetermined"),b&&a.parentsUntil(".jstree","li").andSelf().children(":checkbox").prop("checked",!1))}},reselect:function(){if(this.data.ui&&
this.data.checkbox.noui){var a=this,b=this.data.ui.to_select,b=c.map(c.makeArray(b),function(a){return"#"+a.toString().replace(/^#/,"").replace(/\\\//g,"/").replace(/\//g,"\\/").replace(/\\\./g,".").replace(/\./g,"\\.").replace(/\:/g,"\\:")});this.deselect_all();c.each(b,function(b,c){a.check_node(c)});this.__callback()}else this.__call_old()},save_loaded:function(){var a=this;this.data.core.to_load=[];this.get_container_ul().find("li.jstree-closed.jstree-undetermined").each(function(){this.id&&a.data.core.to_load.push("#"+
this.id)})}}});c(function(){c.vakata.css.add_sheet({str:".jstree .jstree-real-checkbox { display:none; } ",title:"jstree"})})})(jQuery);(function(c){c.vakata.xslt=function(a,b,f){var g="",l;if(document.recalc)return l=document.createElement("xml"),g=document.createElement("xml"),l.innerHTML=a,g.innerHTML=b,c("body").append(l).append(g),setTimeout(function(a,b,d){return function(){d.call(null,a.transformNode(b.XMLDocument));setTimeout(function(a,b){return function(){c(a).remove();c(b).remove()}}(a,
b),200)}}(l,g,f),100),!0;"undefined"!==typeof window.DOMParser&&"undefined"!==typeof window.XMLHttpRequest&&"undefined"===typeof window.XSLTProcessor&&(a=(new DOMParser).parseFromString(a,"text/xml"),b=(new DOMParser).parseFromString(b,"text/xml"));if("undefined"!==typeof window.DOMParser&&"undefined"!==typeof window.XMLHttpRequest&&"undefined"!==typeof window.XSLTProcessor){l=new XSLTProcessor;g=c.isFunction(l.transformDocument)?"undefined"!==typeof window.XMLSerializer:!0;if(!g)return!1;a=(new DOMParser).parseFromString(a,
"text/xml");b=(new DOMParser).parseFromString(b,"text/xml");c.isFunction(l.transformDocument)?(g=document.implementation.createDocument("","",null),l.transformDocument(a,b,g,null),f.call(null,(new XMLSerializer).serializeToString(g))):(l.importStylesheet(b),g=l.transformToFragment(a,document),f.call(null,c("\x3cdiv /\x3e").append(g).html()));return!0}return!1};var a={nest:'\x3c?xml version\x3d"1.0" encoding\x3d"utf-8" ?\x3e\x3cxsl:stylesheet version\x3d"1.0" xmlns:xsl\x3d"http://www.w3.org/1999/XSL/Transform" \x3e\x3cxsl:output method\x3d"html" encoding\x3d"utf-8" omit-xml-declaration\x3d"yes" standalone\x3d"no" indent\x3d"no" media-type\x3d"text/html" /\x3e\x3cxsl:template match\x3d"/"\x3e\t\x3cxsl:call-template name\x3d"nodes"\x3e\t\t\x3cxsl:with-param name\x3d"node" select\x3d"/root" /\x3e\t\x3c/xsl:call-template\x3e\x3c/xsl:template\x3e\x3cxsl:template name\x3d"nodes"\x3e\t\x3cxsl:param name\x3d"node" /\x3e\t\x3cul\x3e\t\x3cxsl:for-each select\x3d"$node/item"\x3e\t\t\x3cxsl:variable name\x3d"children" select\x3d"count(./item) \x26gt; 0" /\x3e\t\t\x3cli\x3e\t\t\t\x3cxsl:attribute name\x3d"class"\x3e\t\t\t\t\x3cxsl:if test\x3d"position() \x3d last()"\x3ejstree-last \x3c/xsl:if\x3e\t\t\t\t\x3cxsl:choose\x3e\t\t\t\t\t\x3cxsl:when test\x3d"@state \x3d \'open\'"\x3ejstree-open \x3c/xsl:when\x3e\t\t\t\t\t\x3cxsl:when test\x3d"$children or @hasChildren or @state \x3d \'closed\'"\x3ejstree-closed \x3c/xsl:when\x3e\t\t\t\t\t\x3cxsl:otherwise\x3ejstree-leaf \x3c/xsl:otherwise\x3e\t\t\t\t\x3c/xsl:choose\x3e\t\t\t\t\x3cxsl:value-of select\x3d"@class" /\x3e\t\t\t\x3c/xsl:attribute\x3e\t\t\t\x3cxsl:for-each select\x3d"@*"\x3e\t\t\t\t\x3cxsl:if test\x3d"name() !\x3d \'class\' and name() !\x3d \'state\' and name() !\x3d \'hasChildren\'"\x3e\t\t\t\t\t\x3cxsl:attribute name\x3d"{name()}"\x3e\x3cxsl:value-of select\x3d"." /\x3e\x3c/xsl:attribute\x3e\t\t\t\t\x3c/xsl:if\x3e\t\t\t\x3c/xsl:for-each\x3e\t\x3cins class\x3d"jstree-icon"\x3e\x3cxsl:text\x3e\x26#xa0;\x3c/xsl:text\x3e\x3c/ins\x3e\t\t\t\x3cxsl:for-each select\x3d"content/name"\x3e\t\t\t\t\x3ca\x3e\t\t\t\t\x3cxsl:attribute name\x3d"href"\x3e\t\t\t\t\t\x3cxsl:choose\x3e\t\t\t\t\t\x3cxsl:when test\x3d"@href"\x3e\x3cxsl:value-of select\x3d"@href" /\x3e\x3c/xsl:when\x3e\t\t\t\t\t\x3cxsl:otherwise\x3e#\x3c/xsl:otherwise\x3e\t\t\t\t\t\x3c/xsl:choose\x3e\t\t\t\t\x3c/xsl:attribute\x3e\t\t\t\t\x3cxsl:attribute name\x3d"class"\x3e\x3cxsl:value-of select\x3d"@lang" /\x3e \x3cxsl:value-of select\x3d"@class" /\x3e\x3c/xsl:attribute\x3e\t\t\t\t\x3cxsl:attribute name\x3d"style"\x3e\x3cxsl:value-of select\x3d"@style" /\x3e\x3c/xsl:attribute\x3e\t\t\t\t\x3cxsl:for-each select\x3d"@*"\x3e\t\t\t\t\t\x3cxsl:if test\x3d"name() !\x3d \'style\' and name() !\x3d \'class\' and name() !\x3d \'href\'"\x3e\t\t\t\t\t\t\x3cxsl:attribute name\x3d"{name()}"\x3e\x3cxsl:value-of select\x3d"." /\x3e\x3c/xsl:attribute\x3e\t\t\t\t\t\x3c/xsl:if\x3e\t\t\t\t\x3c/xsl:for-each\x3e\t\t\t\t\t\x3cins\x3e\t\t\t\t\t\t\x3cxsl:attribute name\x3d"class"\x3ejstree-icon \t\t\t\t\t\t\t\x3cxsl:if test\x3d"string-length(attribute::icon) \x3e 0 and not(contains(@icon,\'/\'))"\x3e\x3cxsl:value-of select\x3d"@icon" /\x3e\x3c/xsl:if\x3e\t\t\t\t\t\t\x3c/xsl:attribute\x3e\t\t\t\t\t\t\x3cxsl:if test\x3d"string-length(attribute::icon) \x3e 0 and contains(@icon,\'/\')"\x3e\x3cxsl:attribute name\x3d"style"\x3ebackground:url(\x3cxsl:value-of select\x3d"@icon" /\x3e) center center no-repeat;\x3c/xsl:attribute\x3e\x3c/xsl:if\x3e\t\t\t\t\t\t\x3cxsl:text\x3e\x26#xa0;\x3c/xsl:text\x3e\t\t\t\t\t\x3c/ins\x3e\t\t\t\t\t\x3cxsl:copy-of select\x3d"./child::node()" /\x3e\t\t\t\t\x3c/a\x3e\t\t\t\x3c/xsl:for-each\x3e\t\t\t\x3cxsl:if test\x3d"$children or @hasChildren"\x3e\x3cxsl:call-template name\x3d"nodes"\x3e\x3cxsl:with-param name\x3d"node" select\x3d"current()" /\x3e\x3c/xsl:call-template\x3e\x3c/xsl:if\x3e\t\t\x3c/li\x3e\t\x3c/xsl:for-each\x3e\t\x3c/ul\x3e\x3c/xsl:template\x3e\x3c/xsl:stylesheet\x3e',
flat:'\x3c?xml version\x3d"1.0" encoding\x3d"utf-8" ?\x3e\x3cxsl:stylesheet version\x3d"1.0" xmlns:xsl\x3d"http://www.w3.org/1999/XSL/Transform" \x3e\x3cxsl:output method\x3d"html" encoding\x3d"utf-8" omit-xml-declaration\x3d"yes" standalone\x3d"no" indent\x3d"no" media-type\x3d"text/xml" /\x3e\x3cxsl:template match\x3d"/"\x3e\t\x3cul\x3e\t\x3cxsl:for-each select\x3d"//item[not(@parent_id) or @parent_id\x3d0 or not(@parent_id \x3d //item/@id)]"\x3e\t\t\x3cxsl:call-template name\x3d"nodes"\x3e\t\t\t\x3cxsl:with-param name\x3d"node" select\x3d"." /\x3e\t\t\t\x3cxsl:with-param name\x3d"is_last" select\x3d"number(position() \x3d last())" /\x3e\t\t\x3c/xsl:call-template\x3e\t\x3c/xsl:for-each\x3e\t\x3c/ul\x3e\x3c/xsl:template\x3e\x3cxsl:template name\x3d"nodes"\x3e\t\x3cxsl:param name\x3d"node" /\x3e\t\x3cxsl:param name\x3d"is_last" /\x3e\t\x3cxsl:variable name\x3d"children" select\x3d"count(//item[@parent_id\x3d$node/attribute::id]) \x26gt; 0" /\x3e\t\x3cli\x3e\t\x3cxsl:attribute name\x3d"class"\x3e\t\t\x3cxsl:if test\x3d"$is_last \x3d true()"\x3ejstree-last \x3c/xsl:if\x3e\t\t\x3cxsl:choose\x3e\t\t\t\x3cxsl:when test\x3d"@state \x3d \'open\'"\x3ejstree-open \x3c/xsl:when\x3e\t\t\t\x3cxsl:when test\x3d"$children or @hasChildren or @state \x3d \'closed\'"\x3ejstree-closed \x3c/xsl:when\x3e\t\t\t\x3cxsl:otherwise\x3ejstree-leaf \x3c/xsl:otherwise\x3e\t\t\x3c/xsl:choose\x3e\t\t\x3cxsl:value-of select\x3d"@class" /\x3e\t\x3c/xsl:attribute\x3e\t\x3cxsl:for-each select\x3d"@*"\x3e\t\t\x3cxsl:if test\x3d"name() !\x3d \'parent_id\' and name() !\x3d \'hasChildren\' and name() !\x3d \'class\' and name() !\x3d \'state\'"\x3e\t\t\x3cxsl:attribute name\x3d"{name()}"\x3e\x3cxsl:value-of select\x3d"." /\x3e\x3c/xsl:attribute\x3e\t\t\x3c/xsl:if\x3e\t\x3c/xsl:for-each\x3e\t\x3cins class\x3d"jstree-icon"\x3e\x3cxsl:text\x3e\x26#xa0;\x3c/xsl:text\x3e\x3c/ins\x3e\t\x3cxsl:for-each select\x3d"content/name"\x3e\t\t\x3ca\x3e\t\t\x3cxsl:attribute name\x3d"href"\x3e\t\t\t\x3cxsl:choose\x3e\t\t\t\x3cxsl:when test\x3d"@href"\x3e\x3cxsl:value-of select\x3d"@href" /\x3e\x3c/xsl:when\x3e\t\t\t\x3cxsl:otherwise\x3e#\x3c/xsl:otherwise\x3e\t\t\t\x3c/xsl:choose\x3e\t\t\x3c/xsl:attribute\x3e\t\t\x3cxsl:attribute name\x3d"class"\x3e\x3cxsl:value-of select\x3d"@lang" /\x3e \x3cxsl:value-of select\x3d"@class" /\x3e\x3c/xsl:attribute\x3e\t\t\x3cxsl:attribute name\x3d"style"\x3e\x3cxsl:value-of select\x3d"@style" /\x3e\x3c/xsl:attribute\x3e\t\t\x3cxsl:for-each select\x3d"@*"\x3e\t\t\t\x3cxsl:if test\x3d"name() !\x3d \'style\' and name() !\x3d \'class\' and name() !\x3d \'href\'"\x3e\t\t\t\t\x3cxsl:attribute name\x3d"{name()}"\x3e\x3cxsl:value-of select\x3d"." /\x3e\x3c/xsl:attribute\x3e\t\t\t\x3c/xsl:if\x3e\t\t\x3c/xsl:for-each\x3e\t\t\t\x3cins\x3e\t\t\t\t\x3cxsl:attribute name\x3d"class"\x3ejstree-icon \t\t\t\t\t\x3cxsl:if test\x3d"string-length(attribute::icon) \x3e 0 and not(contains(@icon,\'/\'))"\x3e\x3cxsl:value-of select\x3d"@icon" /\x3e\x3c/xsl:if\x3e\t\t\t\t\x3c/xsl:attribute\x3e\t\t\t\t\x3cxsl:if test\x3d"string-length(attribute::icon) \x3e 0 and contains(@icon,\'/\')"\x3e\x3cxsl:attribute name\x3d"style"\x3ebackground:url(\x3cxsl:value-of select\x3d"@icon" /\x3e) center center no-repeat;\x3c/xsl:attribute\x3e\x3c/xsl:if\x3e\t\t\t\t\x3cxsl:text\x3e\x26#xa0;\x3c/xsl:text\x3e\t\t\t\x3c/ins\x3e\t\t\t\x3cxsl:copy-of select\x3d"./child::node()" /\x3e\t\t\x3c/a\x3e\t\x3c/xsl:for-each\x3e\t\x3cxsl:if test\x3d"$children"\x3e\t\t\x3cul\x3e\t\t\x3cxsl:for-each select\x3d"//item[@parent_id\x3d$node/attribute::id]"\x3e\t\t\t\x3cxsl:call-template name\x3d"nodes"\x3e\t\t\t\t\x3cxsl:with-param name\x3d"node" select\x3d"." /\x3e\t\t\t\t\x3cxsl:with-param name\x3d"is_last" select\x3d"number(position() \x3d last())" /\x3e\t\t\t\x3c/xsl:call-template\x3e\t\t\x3c/xsl:for-each\x3e\t\t\x3c/ul\x3e\t\x3c/xsl:if\x3e\t\x3c/li\x3e\x3c/xsl:template\x3e\x3c/xsl:stylesheet\x3e'},
b=function(a){return a.toString().replace(/&/g,"\x26amp;").replace(/</g,"\x26lt;").replace(/>/g,"\x26gt;").replace(/"/g,"\x26quot;").replace(/'/g,"\x26apos;")};c.jstree.plugin("xml_data",{defaults:{data:!1,ajax:!1,xsl:"flat",clean_node:!1,correct_state:!0,get_skip_empty:!1,get_include_preamble:!0},_fn:{load_node:function(a,b,c){var g=this;this.load_node_xml(a,function(){g.__callback({obj:g._get_node(a)});b.call(this)},c)},_is_loaded:function(a){var b=this._get_settings().xml_data;a=this._get_node(a);
return-1==a||!a||!b.ajax&&!c.isFunction(b.data)||a.is(".jstree-open, .jstree-leaf")||0<a.children("ul").children("li").size()},load_node_xml:function(a,b,f){var g=this.get_settings().xml_data,l=function(){},h=function(){};if((a=this._get_node(a))&&-1!==a){if(a.data("jstree_is_loading"))return;a.data("jstree_is_loading",!0)}switch(!0){case !g.data&&!g.ajax:throw"Neither data nor ajax settings supplied.";case c.isFunction(g.data):g.data.call(this,a,c.proxy(function(f){this.parse_xml(f,c.proxy(function(f){f&&
(f=f.replace(/ ?xmlns="[^"]*"/ig,""),10<f.length?(f=c(f),-1!==a&&a?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.append(f),a.removeData("jstree_is_loading")):this.get_container().children("ul").empty().append(f.children()),g.clean_node&&this.clean_node(a),b&&b.call(this)):a&&-1!==a?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree_is_loading"),g.correct_state&&(this.correct_state(a),b&&b.call(this))):g.correct_state&&(this.get_container().children("ul").empty(),
b&&b.call(this)))},this))},this));break;case !!g.data&&!g.ajax||!!g.data&&!!g.ajax&&(!a||-1===a):a&&-1!=a||this.parse_xml(g.data,c.proxy(function(f){f?(f=f.replace(/ ?xmlns="[^"]*"/ig,""),10<f.length&&(f=c(f),this.get_container().children("ul").empty().append(f.children()),g.clean_node&&this.clean_node(a),b&&b.call(this))):g.correct_state&&(this.get_container().children("ul").empty(),b&&b.call(this))},this));break;case !g.data&&!!g.ajax||!!g.data&&!!g.ajax&&a&&-1!==a:l=function(b,c,e){var h=this.get_settings().xml_data.ajax.error;
h&&h.call(this,b,c,e);-1!==a&&a.length?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree_is_loading"),"success"===c&&g.correct_state&&this.correct_state(a)):"success"===c&&g.correct_state&&this.get_container().children("ul").empty();f&&f.call(this)},h=function(f,h,p){f=p.responseText;var n=this.get_settings().xml_data.ajax.success;n&&(f=n.call(this,f,h,p)||f);if(""===f||f&&f.toString&&""===f.toString().replace(/^[\s\n]+$/,""))return l.call(this,p,h,"");this.parse_xml(f,
c.proxy(function(f){f&&(f=f.replace(/ ?xmlns="[^"]*"/ig,""),10<f.length?(f=c(f),-1!==a&&a?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.append(f),a.removeData("jstree_is_loading")):this.get_container().children("ul").empty().append(f.children()),g.clean_node&&this.clean_node(a),b&&b.call(this)):a&&-1!==a?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree_is_loading"),g.correct_state&&(this.correct_state(a),b&&b.call(this))):g.correct_state&&(this.get_container().children("ul").empty(),
b&&b.call(this)))},this))},g.ajax.context=this,g.ajax.error=l,g.ajax.success=h,g.ajax.dataType||(g.ajax.dataType="xml"),c.isFunction(g.ajax.url)&&(g.ajax.url=g.ajax.url.call(this,a)),c.isFunction(g.ajax.data)&&(g.ajax.data=g.ajax.data.call(this,a)),c.ajax(g.ajax)}},parse_xml:function(b,e){var f=this._get_settings().xml_data;c.vakata.xslt(b,a[f.xsl],e)},get_xml:function(a,e,f,g,l){var h="",m=this._get_settings(),k=this,p,n,q,r,t;a||(a="flat");l||(l=0);(e=this._get_node(e))&&-1!==e||(e=this.get_container().find("\x3e ul \x3e li"));
f=c.isArray(f)?f:["id","class"];!l&&this.data.types&&-1===c.inArray(m.types.type_attr,f)&&f.push(m.types.type_attr);g=c.isArray(g)?g:[];l||(m.xml_data.get_include_preamble&&(h+='\x3c?xml version\x3d"1.0" encoding\x3d"UTF-8"?\x3e'),h+="\x3croot\x3e");e.each(function(){h+="\x3citem";q=c(this);c.each(f,function(a,c){var d=q.attr(c);m.xml_data.get_skip_empty&&"undefined"===typeof d||(h+=" "+c+'\x3d"'+b((" "+(d||"")).replace(/ jstree[^ ]*/ig,"").replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,""))+
'"')});q.hasClass("jstree-open")&&(h+=' state\x3d"open"');q.hasClass("jstree-closed")&&(h+=' state\x3d"closed"');"flat"===a&&(h+=' parent_id\x3d"'+b(l)+'"');h+="\x3e";h+="\x3ccontent\x3e";r=q.children("a");r.each(function(){p=c(this);t=!1;h+="\x3cname";-1!==c.inArray("languages",m.plugins)&&c.each(m.languages,function(a,c){if(p.hasClass(c))return h+=' lang\x3d"'+b(c)+'"',t=c,!1});g.length&&c.each(g,function(a,c){var d=p.attr(c);m.xml_data.get_skip_empty&&"undefined"===typeof d||(h+=" "+c+'\x3d"'+
b((" "+d||"").replace(/ jstree[^ ]*/ig,"").replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,""))+'"')});p.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,"").replace(/^\s+$/ig,"").length&&(h+=' icon\x3d"'+b(p.children("ins").get(0).className.replace(/jstree[^ ]*|$/ig,"").replace(/\s+$/ig," ").replace(/^ /,"").replace(/ $/,""))+'"');p.children("ins").get(0).style.backgroundImage.length&&(h+=' icon\x3d"'+b(p.children("ins").get(0).style.backgroundImage.replace("url(","").replace(")","").replace(/'/ig,
"").replace(/"/ig,""))+'"');h+="\x3e";h+="\x3c![CDATA["+k.get_text(p,t)+"]]\x3e";h+="\x3c/name\x3e"});h+="\x3c/content\x3e";n=q[0].id||!0;q=q.find("\x3e ul \x3e li");n=q.length?k.get_xml(a,q,f,g,n):"";"nest"==a&&(h+=n);h+="\x3c/item\x3e";"flat"==a&&(h+=n)});l||(h+="\x3c/root\x3e");return h}}})})(jQuery);(function(c){c.expr[":"].jstree_contains=function(a,b,c){return 0<=(a.textContent||a.innerText||"").toLowerCase().indexOf(c[3].toLowerCase())};c.expr[":"].jstree_title_contains=function(a,b,c){return 0<=
(a.getAttribute("title")||"").toLowerCase().indexOf(c[3].toLowerCase())};c.jstree.plugin("search",{__init:function(){this.data.search.str="";this.data.search.result=c();this._get_settings().search.show_only_matches&&this.get_container().bind("search.jstree",function(a,b){c(this).children("ul").find("li").hide().removeClass("jstree-last");b.rslt.nodes.parentsUntil(".jstree").andSelf().show().filter("ul").each(function(){c(this).children("li:visible").eq(-1).addClass("jstree-last")})}).bind("clear_search.jstree",
function(){c(this).children("ul").find("li").css("display","").end().end().jstree("clean_node",-1)})},defaults:{ajax:!1,search_method:"jstree_contains",show_only_matches:!1},_fn:{search:function(a,b){if(""===c.trim(a))this.clear_search();else{var d=this.get_settings().search,e=this,f=function(){};this.data.search.str=a;if(!b&&!1!==d.ajax&&0<this.get_container_ul().find("li.jstree-closed:not(:has(ul)):eq(0)").length){this.search.supress_callback=!0;f=function(a,b,c){var d=this.get_settings().search.ajax.success;
d&&(a=d.call(this,a,b,c)||a);this.data.search.to_open=a;this._search_open()};d.ajax.context=this;d.ajax.error=function(){};d.ajax.success=f;c.isFunction(d.ajax.url)&&(d.ajax.url=d.ajax.url.call(this,a));c.isFunction(d.ajax.data)&&(d.ajax.data=d.ajax.data.call(this,a));d.ajax.data||(d.ajax.data={search_string:a});if(!d.ajax.dataType||/^json/.exec(d.ajax.dataType))d.ajax.dataType="json";c.ajax(d.ajax)}else this.data.search.result.length&&this.clear_search(),this.data.search.result=this.get_container().find("a"+
(this.data.languages?"."+this.get_lang():"")+":"+d.search_method+"("+this.data.search.str+")"),this.data.search.result.addClass("jstree-search").parent().parents(".jstree-closed").each(function(){e.open_node(this,!1,!0)}),this.__callback({nodes:this.data.search.result,str:a})}},clear_search:function(a){this.data.search.result.removeClass("jstree-search");this.__callback(this.data.search.result);this.data.search.result=c()},_search_open:function(a){var b=this;a=!0;var d=[],e=[];this.data.search.to_open.length&&
(c.each(this.data.search.to_open,function(a,b){if("#"==b)return!0;c(b).length&&c(b).is(".jstree-closed")?d.push(b):e.push(b)}),d.length&&(this.data.search.to_open=e,c.each(d,function(a,c){b.open_node(c,function(){b._search_open(!0)})}),a=!1));a&&this.search(this.data.search.str,!0)}}})})(jQuery);(function(c){c.vakata.context={hide_on_mouseleave:!1,cnt:c("\x3cdiv id\x3d'vakata-contextmenu' /\x3e"),vis:!1,tgt:!1,par:!1,func:!1,data:!1,rtl:!1,show:function(a,b,d,e,f,g,l){c.vakata.context.rtl=!!l;if(a=
c.vakata.context.parse(a)){c.vakata.context.vis=!0;c.vakata.context.tgt=b;c.vakata.context.par=g||b||null;c.vakata.context.data=f||null;c.vakata.context.cnt.html(a).css({visibility:"hidden",display:"block",left:0,top:0});if(c.vakata.context.hide_on_mouseleave)c.vakata.context.cnt.one("mouseleave",function(a){c.vakata.context.hide()});f=c.vakata.context.cnt.height();g=c.vakata.context.cnt.width();d+g>c(document).width()&&(d=c(document).width()-(g+5),c.vakata.context.cnt.find("li \x3e ul").addClass("right"));
e+f>c(document).height()&&(e-=f+b[0].offsetHeight,c.vakata.context.cnt.find("li \x3e ul").addClass("bottom"));c.vakata.context.cnt.css({left:d,top:e}).find("li:has(ul)").bind("mouseenter",function(a){a=c(document).width();var b=c(document).height(),d=c(this).children("ul").show();a!==c(document).width()&&d.toggleClass("right");b!==c(document).height()&&d.toggleClass("bottom")}).bind("mouseleave",function(a){c(this).children("ul").hide()}).end().css({visibility:"visible"}).show();c(document).triggerHandler("context_show.vakata")}},
hide:function(){c.vakata.context.vis=!1;c.vakata.context.cnt.attr("class","").css({visibility:"hidden"});c(document).triggerHandler("context_hide.vakata")},parse:function(a,b){if(!a)return!1;var d="",e=!1,f=!0;b||(c.vakata.context.func={});d+="\x3cul\x3e";c.each(a,function(a,b){if(!b)return!0;c.vakata.context.func[a]=b.action;!f&&b.separator_before&&(d+="\x3cli class\x3d'vakata-separator vakata-separator-before'\x3e\x3c/li\x3e");f=!1;d+="\x3cli class\x3d'"+(b._class||"")+(b._disabled?" jstree-contextmenu-disabled ":
"")+"'\x3e\x3cins ";b.icon&&-1===b.icon.indexOf("/")&&(d+=" class\x3d'"+b.icon+"' ");b.icon&&-1!==b.icon.indexOf("/")&&(d+=" style\x3d'background:url("+b.icon+") center center no-repeat;' ");d+="\x3e\x26#160;\x3c/ins\x3e\x3ca href\x3d'#' rel\x3d'"+a+"'\x3e";b.submenu&&(d+="\x3cspan style\x3d'float:"+(c.vakata.context.rtl?"left":"right")+";'\x3e\x26raquo;\x3c/span\x3e");d+=b.label+"\x3c/a\x3e";b.submenu&&(e=c.vakata.context.parse(b.submenu,!0))&&(d+=e);d+="\x3c/li\x3e";b.separator_after&&(d+="\x3cli class\x3d'vakata-separator vakata-separator-after'\x3e\x3c/li\x3e",
f=!0)});d=d.replace(/<li class\='vakata-separator vakata-separator-after'\><\/li\>$/,"");d+="\x3c/ul\x3e";c(document).triggerHandler("context_parse.vakata");return 10<d.length?d:!1},exec:function(a){return c.isFunction(c.vakata.context.func[a])?(c.vakata.context.func[a].call(c.vakata.context.data,c.vakata.context.par),!0):!1}};c(function(){c.vakata.css.add_sheet({str:"#vakata-contextmenu { display:block; visibility:hidden; left:0; top:-200px; position:absolute; margin:0; padding:0; min-width:180px; background:#ebebeb; border:1px solid silver; z-index:10000; *width:180px; } #vakata-contextmenu ul { min-width:180px; *width:180px; } #vakata-contextmenu ul, #vakata-contextmenu li { margin:0; padding:0; list-style-type:none; display:block; } #vakata-contextmenu li { line-height:20px; min-height:20px; position:relative; padding:0px; } #vakata-contextmenu li a { padding:1px 6px; line-height:17px; display:block; text-decoration:none; margin:1px 1px 0 1px; } #vakata-contextmenu li ins { float:left; width:16px; height:16px; text-decoration:none; margin-right:2px; } #vakata-contextmenu li a:hover, #vakata-contextmenu li.vakata-hover \x3e a { background:gray; color:white; } #vakata-contextmenu li ul { display:none; position:absolute; top:-2px; left:100%; background:#ebebeb; border:1px solid gray; } #vakata-contextmenu .right { right:100%; left:auto; } #vakata-contextmenu .bottom { bottom:-1px; top:auto; } #vakata-contextmenu li.vakata-separator { min-height:0; height:1px; line-height:1px; font-size:1px; overflow:hidden; margin:0 2px; background:silver; /* border-top:1px solid #fefefe; */ padding:0; } ",
title:"vakata"});c.vakata.context.cnt.delegate("a","click",function(a){a.preventDefault()}).delegate("a","mouseup",function(a){!c(this).parent().hasClass("jstree-contextmenu-disabled")&&c.vakata.context.exec(c(this).attr("rel"))?c.vakata.context.hide():c(this).blur()}).delegate("a","mouseover",function(){c.vakata.context.cnt.find(".vakata-hover").removeClass("vakata-hover")}).appendTo("body");c(document).bind("mousedown",function(a){c.vakata.context.vis&&!c.contains(c.vakata.context.cnt[0],a.target)&&
c.vakata.context.hide()});"undefined"!==typeof c.hotkeys&&c(document).bind("keydown","up",function(a){if(c.vakata.context.vis){var b=c.vakata.context.cnt.find("ul:visible").last().children(".vakata-hover").removeClass("vakata-hover").prevAll("li:not(.vakata-separator)").first();b.length||(b=c.vakata.context.cnt.find("ul:visible").last().children("li:not(.vakata-separator)").last());b.addClass("vakata-hover");a.stopImmediatePropagation();a.preventDefault()}}).bind("keydown","down",function(a){if(c.vakata.context.vis){var b=
c.vakata.context.cnt.find("ul:visible").last().children(".vakata-hover").removeClass("vakata-hover").nextAll("li:not(.vakata-separator)").first();b.length||(b=c.vakata.context.cnt.find("ul:visible").last().children("li:not(.vakata-separator)").first());b.addClass("vakata-hover");a.stopImmediatePropagation();a.preventDefault()}}).bind("keydown","right",function(a){c.vakata.context.vis&&(c.vakata.context.cnt.find(".vakata-hover").children("ul").show().children("li:not(.vakata-separator)").removeClass("vakata-hover").first().addClass("vakata-hover"),
a.stopImmediatePropagation(),a.preventDefault())}).bind("keydown","left",function(a){c.vakata.context.vis&&(c.vakata.context.cnt.find(".vakata-hover").children("ul").hide().children(".vakata-separator").removeClass("vakata-hover"),a.stopImmediatePropagation(),a.preventDefault())}).bind("keydown","esc",function(a){c.vakata.context.hide();a.preventDefault()}).bind("keydown","space",function(a){c.vakata.context.cnt.find(".vakata-hover").last().children("a").click();a.preventDefault()})});c.jstree.plugin("contextmenu",
{__init:function(){this.get_container().delegate("a","contextmenu.jstree",c.proxy(function(a){a.preventDefault();c(a.currentTarget).hasClass("jstree-loading")||this.show_contextmenu(a.currentTarget,a.pageX,a.pageY)},this)).delegate("a","click.jstree",c.proxy(function(a){this.data.contextmenu&&c.vakata.context.hide()},this)).bind("destroy.jstree",c.proxy(function(){this.data.contextmenu&&c.vakata.context.hide()},this));c(document).bind("context_hide.vakata",c.proxy(function(){this.data.contextmenu=
!1},this))},defaults:{select_node:!1,show_at_node:!0,items:{create:{separator_before:!1,separator_after:!0,label:"Create",action:function(a){this.create(a)}},rename:{separator_before:!1,separator_after:!1,label:"Rename",action:function(a){this.rename(a)}},remove:{separator_before:!1,icon:!1,separator_after:!1,label:"Delete",action:function(a){this.is_selected(a)?this.remove():this.remove(a)}},ccp:{separator_before:!0,icon:!1,separator_after:!1,label:"Edit",action:!1,submenu:{cut:{separator_before:!1,
separator_after:!1,label:"Cut",action:function(a){this.cut(a)}},copy:{separator_before:!1,icon:!1,separator_after:!1,label:"Copy",action:function(a){this.copy(a)}},paste:{separator_before:!1,icon:!1,separator_after:!1,label:"Paste",action:function(a){this.paste(a)}}}}}},_fn:{show_contextmenu:function(a,b,d){a=this._get_node(a);var e=this.get_settings().contextmenu,f=a.children("a:visible:eq(0)"),g=!1,g=!1;e.select_node&&this.data.ui&&!this.is_selected(a)&&(this.deselect_all(),this.select_node(a,!0));
if(e.show_at_node||"undefined"===typeof b||"undefined"===typeof d)g=f.offset(),b=g.left,d=g.top+this.data.core.li_height;g=a.data("jstree")&&a.data("jstree").contextmenu?a.data("jstree").contextmenu:e.items;c.isFunction(g)&&(g=g.call(this,a));this.data.contextmenu=!0;c.vakata.context.show(g,f,b,d,this,a,this._get_settings().core.rtl);this.data.themes&&c.vakata.context.cnt.attr("class","jstree-"+this.data.themes.theme+"-context")}}})})(jQuery);(function(c){c.jstree.plugin("types",{__init:function(){var a=
this._get_settings().types;this.data.types.attach_to=[];this.get_container().bind("init.jstree",c.proxy(function(){var b=a.type_attr,d="",e=this;c.each(a.types,function(a,g){c.each(g,function(a,b){/^(max_depth|max_children|icon|valid_children)$/.test(a)||e.data.types.attach_to.push(a)});if(!g.icon)return!0;if(g.icon.image||g.icon.position)d="default"==a?d+(".jstree-"+e.get_index()+" a \x3e .jstree-icon { "):d+(".jstree-"+e.get_index()+" li["+b+'\x3d"'+a+'"] \x3e a \x3e .jstree-icon { '),g.icon.image&&
(d+=" background-image:url("+g.icon.image+"); "),d=g.icon.position?d+(" background-position:"+g.icon.position+"; "):d+" background-position:0 0; ",d+="} "});""!==d&&c.vakata.css.add_sheet({str:d,title:"jstree-types"})},this)).bind("before.jstree",c.proxy(function(a,d){var e,f;if((e=(e=this._get_settings().types.use_data?this._get_node(d.args[0]):!1)&&-1!==e&&e.length?e.data("jstree"):!1)&&e.types&&!1===e.types[d.func]||-1!==c.inArray(d.func,this.data.types.attach_to)&&d.args[0]&&(d.args[0].tagName||
d.args[0].jquery)&&(e=this._get_settings().types.types,f=this._get_type(d.args[0]),(e[f]&&"undefined"!==typeof e[f][d.func]||e["default"]&&"undefined"!==typeof e["default"][d.func])&&!1===this._check(d.func,d.args[0])))return a.stopImmediatePropagation(),!1},this));r&&this.get_container().bind("load_node.jstree set_type.jstree",c.proxy(function(a,d){var e=d&&d.rslt&&d.rslt.obj&&-1!==d.rslt.obj?this._get_node(d.rslt.obj).parent():this.get_container_ul(),f=!1,g=this._get_settings().types;c.each(g.types,
function(a,b){b.icon&&(b.icon.image||b.icon.position)&&(f="default"===a?e.find("li \x3e a \x3e .jstree-icon"):e.find("li["+g.type_attr+"\x3d'"+a+"'] \x3e a \x3e .jstree-icon"),b.icon.image&&f.css("backgroundImage","url("+b.icon.image+")"),f.css("backgroundPosition",b.icon.position||"0 0"))})},this))},defaults:{max_children:-1,max_depth:-1,valid_children:"all",use_data:!1,type_attr:"rel",types:{"default":{max_children:-1,max_depth:-1,valid_children:"all"}}},_fn:{_types_notify:function(a,b){b.type&&
this._get_settings().types.use_data&&this.set_type(b.type,a)},_get_type:function(a){return(a=this._get_node(a))&&a.length?a.attr(this._get_settings().types.type_attr)||"default":!1},set_type:function(a,b){b=this._get_node(b);var c=b.length&&a?b.attr(this._get_settings().types.type_attr,a):!1;c&&this.__callback({obj:b,type:a});return c},_check:function(a,b,d){b=this._get_node(b);var e=!1,f=this._get_type(b),g=0,l=this,h=this._get_settings().types,m=!1;if(-1===b)if(h[a])e=h[a];else return;else{if(!1===
f)return;(m=h.use_data?b.data("jstree"):!1)&&m.types&&"undefined"!==typeof m.types[a]?e=m.types[a]:h.types[f]&&"undefined"!==typeof h.types[f][a]?e=h.types[f][a]:h.types["default"]&&"undefined"!==typeof h.types["default"][a]&&(e=h.types["default"][a])}c.isFunction(e)&&(e=e.call(this,b));"max_depth"===a&&-1!==b&&!1!==d&&-2!==h.max_depth&&0!==e&&b.children("a:eq(0)").parentsUntil(".jstree","li").each(function(b){if(-1!==h.max_depth&&0>=h.max_depth-(b+1))return e=0,!1;g=0===b?e:l._check(a,this,!1);if(-1!==
g&&0>=g-(b+1))return e=0,!1;0<=g&&(g-(b+1)<e||0>e)&&(e=g-(b+1));0<=h.max_depth&&(h.max_depth-(b+1)<e||0>e)&&(e=h.max_depth-(b+1))});return e},check_move:function(){if(!this.__call_old())return!1;var a=this._get_move(),b=a.rt._get_settings().types,d=a.rt._check("max_children",a.cr),e=a.rt._check("max_depth",a.cr),f=a.rt._check("valid_children",a.cr),g=0,l=1;if("none"===f||c.isArray(f)&&a.ot&&a.ot._get_type&&(a.o.each(function(){if(-1===c.inArray(a.ot._get_type(this),f))return l=!1}),!1===l)||-2!==
b.max_children&&-1!==d&&(g=-1===a.cr?this.get_container().find("\x3e ul \x3e li").not(a.o).length:a.cr.find("\x3e ul \x3e li").not(a.o).length,g+a.o.length>d))return!1;if(-2!==b.max_depth&&-1!==e){l=0;if(0===e)return!1;if("undefined"===typeof a.o.d){for(b=a.o;0<b.length;)b=b.find("\x3e ul \x3e li"),l++;a.o.d=l}if(0>e-a.o.d)return!1}return!0},create_node:function(a,b,d,e,f,g){if(!g&&(f||this._is_loaded(a))){var l="string"==typeof b&&b.match(/^before|after$/i)&&-1!==a?this._get_parent(a):this._get_node(a),
h=this._get_settings().types,m=this._check("max_children",l),k=this._check("max_depth",l),p=this._check("valid_children",l);"string"===typeof d&&(d={data:d});d||(d={});if("none"===p)return!1;if(c.isArray(p))if(!d.attr||!d.attr[h.type_attr])d.attr||(d.attr={}),d.attr[h.type_attr]=p[0];else if(-1===c.inArray(d.attr[h.type_attr],p))return!1;if(-2!==h.max_children&&-1!==m&&(l=-1===l?this.get_container().find("\x3e ul \x3e li").length:l.find("\x3e ul \x3e li").length,l+1>m)||-2!==h.max_depth&&-1!==k&&
0>k-1)return!1}return this.__call_old(!0,a,b,d,e,f,g)}}})})(jQuery);(function(c){c.jstree.plugin("html_data",{__init:function(){this.data.html_data.original_container_html=this.get_container().find(" \x3e ul \x3e li").clone(!0);this.data.html_data.original_container_html.find("li").andSelf().contents().filter(function(){return 3==this.nodeType}).remove()},defaults:{data:!1,ajax:!1,correct_state:!0},_fn:{load_node:function(a,b,c){var e=this;this.load_node_html(a,function(){e.__callback({obj:e._get_node(a)});
b.call(this)},c)},_is_loaded:function(a){a=this._get_node(a);return-1==a||!a||!this._get_settings().html_data.ajax&&!c.isFunction(this._get_settings().html_data.data)||a.is(".jstree-open, .jstree-leaf")||0<a.children("ul").children("li").size()},load_node_html:function(a,b,d){var e,f=this.get_settings().html_data,g=function(){};e=function(){};if((a=this._get_node(a))&&-1!==a){if(a.data("jstree_is_loading"))return;a.data("jstree_is_loading",!0)}switch(!0){case c.isFunction(f.data):f.data.call(this,
a,c.proxy(function(d){d&&""!==d&&d.toString&&""!==d.toString().replace(/^[\s\n]+$/,"")?(d=c(d),d.is("ul")||(d=c("\x3cul /\x3e").append(d)),-1!=a&&a?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.append(d).children("ul").find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("\x3cins class\x3d'jstree-icon'\x3e\x26#160;\x3c/ins\x3e").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),
a.removeData("jstree_is_loading")):this.get_container().children("ul").empty().append(d.children()).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("\x3cins class\x3d'jstree-icon'\x3e\x26#160;\x3c/ins\x3e").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),this.clean_node(a),b&&b.call(this)):a&&-1!==a?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree_is_loading"),
f.correct_state&&(this.correct_state(a),b&&b.call(this))):f.correct_state&&(this.get_container().children("ul").empty(),b&&b.call(this))},this));break;case !f.data&&!f.ajax:a&&-1!=a||(this.get_container().children("ul").empty().append(this.data.html_data.original_container_html).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("\x3cins class\x3d'jstree-icon'\x3e\x26#160;\x3c/ins\x3e").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),
this.clean_node());b&&b.call(this);break;case !!f.data&&!f.ajax||!!f.data&&!!f.ajax&&(!a||-1===a):a&&-1!=a||(e=c(f.data),e.is("ul")||(e=c("\x3cul /\x3e").append(e)),this.get_container().children("ul").empty().append(e.children()).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("\x3cins class\x3d'jstree-icon'\x3e\x26#160;\x3c/ins\x3e").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),
this.clean_node());b&&b.call(this);break;case !f.data&&!!f.ajax||!!f.data&&!!f.ajax&&a&&-1!==a:a=this._get_node(a),g=function(b,c,e){var g=this.get_settings().html_data.ajax.error;g&&g.call(this,b,c,e);-1!=a&&a.length?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree_is_loading"),"success"===c&&f.correct_state&&this.correct_state(a)):"success"===c&&f.correct_state&&this.get_container().children("ul").empty();d&&d.call(this)},e=function(d,e,m){var k=this.get_settings().html_data.ajax.success;
k&&(d=k.call(this,d,e,m)||d);if(""===d||d&&d.toString&&""===d.toString().replace(/^[\s\n]+$/,""))return g.call(this,m,e,"");d?(d=c(d),d.is("ul")||(d=c("\x3cul /\x3e").append(d)),-1!=a&&a?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.append(d).children("ul").find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("\x3cins class\x3d'jstree-icon'\x3e\x26#160;\x3c/ins\x3e").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),
a.removeData("jstree_is_loading")):this.get_container().children("ul").empty().append(d.children()).find("li, a").filter(function(){return!this.firstChild||!this.firstChild.tagName||"INS"!==this.firstChild.tagName}).prepend("\x3cins class\x3d'jstree-icon'\x3e\x26#160;\x3c/ins\x3e").end().filter("a").children("ins:first-child").not(".jstree-icon").addClass("jstree-icon"),this.clean_node(a),b&&b.call(this)):a&&-1!==a?(a.children("a.jstree-loading").removeClass("jstree-loading"),a.removeData("jstree_is_loading"),
f.correct_state&&(this.correct_state(a),b&&b.call(this))):f.correct_state&&(this.get_container().children("ul").empty(),b&&b.call(this))},f.ajax.context=this,f.ajax.error=g,f.ajax.success=e,f.ajax.dataType||(f.ajax.dataType="html"),c.isFunction(f.ajax.url)&&(f.ajax.url=f.ajax.url.call(this,a)),c.isFunction(f.ajax.data)&&(f.ajax.data=f.ajax.data.call(this,a)),c.ajax(f.ajax)}}}});c.jstree.defaults.plugins.push("html_data")})(jQuery);(function(c){c.jstree.plugin("themeroller",{__init:function(){var a=
this._get_settings().themeroller;this.get_container().addClass("ui-widget-content").addClass("jstree-themeroller").delegate("a","mouseenter.jstree",function(b){c(b.currentTarget).hasClass("jstree-loading")||c(this).addClass(a.item_h)}).delegate("a","mouseleave.jstree",function(){c(this).removeClass(a.item_h)}).bind("init.jstree",c.proxy(function(a,c){c.inst.get_container().find("\x3e ul \x3e li \x3e .jstree-loading \x3e ins").addClass("ui-icon-refresh");this._themeroller(c.inst.get_container().find("\x3e ul \x3e li"))},
this)).bind("open_node.jstree create_node.jstree",c.proxy(function(a,c){this._themeroller(c.rslt.obj)},this)).bind("loaded.jstree refresh.jstree",c.proxy(function(a){this._themeroller()},this)).bind("close_node.jstree",c.proxy(function(a,c){this._themeroller(c.rslt.obj)},this)).bind("delete_node.jstree",c.proxy(function(a,c){this._themeroller(c.rslt.parent)},this)).bind("correct_state.jstree",c.proxy(function(b,c){c.rslt.obj.children("ins.jstree-icon").removeClass(a.opened+" "+a.closed+" ui-icon").end().find("\x3e a \x3e ins.ui-icon").filter(function(){return-1===
this.className.toString().replace(a.item_clsd,"").replace(a.item_open,"").replace(a.item_leaf,"").indexOf("ui-icon-")}).removeClass(a.item_open+" "+a.item_clsd).addClass(a.item_leaf||"jstree-no-icon")},this)).bind("select_node.jstree",c.proxy(function(b,c){c.rslt.obj.children("a").addClass(a.item_a)},this)).bind("deselect_node.jstree deselect_all.jstree",c.proxy(function(b,c){this.get_container().find("a."+a.item_a).removeClass(a.item_a).end().find("a.jstree-clicked").addClass(a.item_a)},this)).bind("dehover_node.jstree",
c.proxy(function(b,c){c.rslt.obj.children("a").removeClass(a.item_h)},this)).bind("hover_node.jstree",c.proxy(function(b,c){this.get_container().find("a."+a.item_h).not(c.rslt.obj).removeClass(a.item_h);c.rslt.obj.children("a").addClass(a.item_h)},this)).bind("move_node.jstree",c.proxy(function(a,c){this._themeroller(c.rslt.o);this._themeroller(c.rslt.op)},this))},__destroy:function(){var a=this._get_settings().themeroller,b=["ui-icon"];c.each(a,function(a,c){c=c.split(" ");c.length&&(b=b.concat(c))});
this.get_container().removeClass("ui-widget-content").find("."+b.join(", .")).removeClass(b.join(" "))},_fn:{_themeroller:function(a){var b=this._get_settings().themeroller;a=a&&-1!=a?this._get_node(a).parent():this.get_container_ul();a.find("li.jstree-closed").children("ins.jstree-icon").removeClass(b.opened).addClass("ui-icon "+b.closed).end().children("a").addClass(b.item).children("ins.jstree-icon").addClass("ui-icon").filter(function(){return-1===this.className.toString().replace(b.item_clsd,
"").replace(b.item_open,"").replace(b.item_leaf,"").indexOf("ui-icon-")}).removeClass(b.item_leaf+" "+b.item_open).addClass(b.item_clsd||"jstree-no-icon").end().end().end().end().find("li.jstree-open").children("ins.jstree-icon").removeClass(b.closed).addClass("ui-icon "+b.opened).end().children("a").addClass(b.item).children("ins.jstree-icon").addClass("ui-icon").filter(function(){return-1===this.className.toString().replace(b.item_clsd,"").replace(b.item_open,"").replace(b.item_leaf,"").indexOf("ui-icon-")}).removeClass(b.item_leaf+
" "+b.item_clsd).addClass(b.item_open||"jstree-no-icon").end().end().end().end().find("li.jstree-leaf").children("ins.jstree-icon").removeClass(b.closed+" ui-icon "+b.opened).end().children("a").addClass(b.item).children("ins.jstree-icon").addClass("ui-icon").filter(function(){return-1===this.className.toString().replace(b.item_clsd,"").replace(b.item_open,"").replace(b.item_leaf,"").indexOf("ui-icon-")}).removeClass(b.item_clsd+" "+b.item_open).addClass(b.item_leaf||"jstree-no-icon")}},defaults:{opened:"ui-icon-triangle-1-se",
closed:"ui-icon-triangle-1-e",item:"ui-state-default",item_h:"ui-state-hover",item_a:"ui-state-active",item_open:"ui-icon-folder-open",item_clsd:"ui-icon-folder-collapsed",item_leaf:"ui-icon-document"}});c(function(){c.vakata.css.add_sheet({str:".jstree-themeroller .ui-icon { overflow:visible; } .jstree-themeroller a { padding:0 2px; } .jstree-themeroller .jstree-no-icon { display:none; }",title:"jstree"})})})(jQuery);(function(c){c.jstree.plugin("unique",{__init:function(){this.get_container().bind("before.jstree",
c.proxy(function(a,b){var d=[],e=!0,f;"move_node"==b.func&&!0===b.args[4]&&b.args[0].o&&b.args[0].o.length&&(b.args[0].o.children("a").each(function(){d.push(c(this).text().replace(/^\s+/g,""))}),e=this._check_unique(d,b.args[0].np.find("\x3e ul \x3e li").not(b.args[0].o),"move_node"));"create_node"==b.func&&(b.args[4]||this._is_loaded(b.args[0]))&&(e=this._get_node(b.args[0]),!b.args[1]||"before"!==b.args[1]&&"after"!==b.args[1]||(e=this._get_parent(b.args[0]))&&-1!==e||(e=this.get_container()),
"string"===typeof b.args[2]?d.push(b.args[2]):b.args[2]&&b.args[2].data?d.push(b.args[2].data):d.push(this._get_string("new_node")),e=this._check_unique(d,e.find("\x3e ul \x3e li"),"create_node"));"rename_node"==b.func&&(d.push(b.args[1]),f=this._get_node(b.args[0]),(e=this._get_parent(f))&&-1!==e||(e=this.get_container()),e=this._check_unique(d,e.find("\x3e ul \x3e li").not(f),"rename_node"));if(!e)return a.stopPropagation(),!1},this))},defaults:{error_callback:c.noop},_fn:{_check_unique:function(a,
b,d){var e=[];b.children("a").each(function(){e.push(c(this).text().replace(/^\s+/g,""))});if(!e.length||!a.length)return!0;e=e.sort().join(",,").replace(/(,|^)([^,]+)(,,\2)+(,|$)/g,"$1$2$4").replace(/,,+/g,",").replace(/,$/,"").split(",");return e.length+a.length!=e.concat(a).sort().join(",,").replace(/(,|^)([^,]+)(,,\2)+(,|$)/g,"$1$2$4").replace(/,,+/g,",").replace(/,$/,"").split(",").length?(this._get_settings().unique.error_callback.call(null,a,b,d),!1):!0},check_move:function(){if(!this.__call_old())return!1;
var a=this._get_move(),b=[];return a.o&&a.o.length?(a.o.children("a").each(function(){b.push(c(this).text().replace(/^\s+/g,""))}),this._check_unique(b,a.np.find("\x3e ul \x3e li").not(a.o),"check_move")):!0}}})})(jQuery);(function(c){c.jstree.plugin("wholerow",{__init:function(){if(!this.data.ui)throw"jsTree wholerow: jsTree UI plugin not included.";this.data.wholerow.html=!1;this.data.wholerow.to=!1;this.get_container().bind("init.jstree",c.proxy(function(a,b){this._get_settings().core.animation=
0},this)).bind("open_node.jstree create_node.jstree clean_node.jstree loaded.jstree",c.proxy(function(a,b){this._prepare_wholerow_span(b&&b.rslt&&b.rslt.obj?b.rslt.obj:-1)},this)).bind("search.jstree clear_search.jstree reopen.jstree after_open.jstree after_close.jstree create_node.jstree delete_node.jstree clean_node.jstree",c.proxy(function(a,b){this.data.to&&clearTimeout(this.data.to);this.data.to=setTimeout(function(a,b){return function(){a._prepare_wholerow_ul(b)}}(this,b&&b.rslt&&b.rslt.obj?
b.rslt.obj:-1),0)},this)).bind("deselect_all.jstree",c.proxy(function(a,b){this.get_container().find(" \x3e .jstree-wholerow .jstree-clicked").removeClass("jstree-clicked "+(this.data.themeroller?this._get_settings().themeroller.item_a:""))},this)).bind("select_node.jstree deselect_node.jstree ",c.proxy(function(a,b){b.rslt.obj.each(function(){b.inst.get_container().find(" \x3e .jstree-wholerow li:visible:eq("+parseInt((c(this).offset().top-b.inst.get_container().offset().top+b.inst.get_container()[0].scrollTop)/
b.inst.data.core.li_height,10)+")").children("a").attr("class",b.rslt.obj.children("a").attr("class"))})},this)).bind("hover_node.jstree dehover_node.jstree",c.proxy(function(a,b){this.get_container().find(" \x3e .jstree-wholerow .jstree-hovered").removeClass("jstree-hovered "+(this.data.themeroller?this._get_settings().themeroller.item_h:""));"hover_node"===a.type&&this.get_container().find(" \x3e .jstree-wholerow li:visible:eq("+parseInt((b.rslt.obj.offset().top-this.get_container().offset().top+
this.get_container()[0].scrollTop)/this.data.core.li_height,10)+")").children("a").attr("class",b.rslt.obj.children(".jstree-hovered").attr("class"))},this)).delegate(".jstree-wholerow-span, ins.jstree-icon, li","click.jstree",function(a){var b=c(a.currentTarget);"A"===a.target.tagName||"INS"===a.target.tagName&&b.closest("li").is(".jstree-open, .jstree-closed")||(b.closest("li").children("a:visible:eq(0)").click(),a.stopImmediatePropagation())}).delegate("li","mouseover.jstree",c.proxy(function(a){a.stopImmediatePropagation();
if(c(a.currentTarget).children(".jstree-hovered, .jstree-clicked").length)return!1;this.hover_node(a.currentTarget);return!1},this)).delegate("li","mouseleave.jstree",c.proxy(function(a){c(a.currentTarget).children("a").hasClass("jstree-hovered").length||this.dehover_node(a.currentTarget)},this));(t||r)&&c.vakata.css.add_sheet({str:".jstree-"+this.get_index()+" { position:relative; } ",title:"jstree"})},defaults:{},__destroy:function(){this.get_container().children(".jstree-wholerow").remove();this.get_container().find(".jstree-wholerow-span").remove()},
_fn:{_prepare_wholerow_span:function(a){a=a&&-1!=a?this._get_node(a):this.get_container().find("\x3e ul \x3e li");!1!==a&&a.each(function(){c(this).find("li").andSelf().each(function(){var a=c(this);if(a.children(".jstree-wholerow-span").length)return!0;a.prepend("\x3cspan class\x3d'jstree-wholerow-span' style\x3d'width:"+18*a.parentsUntil(".jstree","li").length+"px;'\x3e\x26#160;\x3c/span\x3e")})})},_prepare_wholerow_ul:function(){var a=this.get_container().children("ul").eq(0),b=a.html();a.addClass("jstree-wholerow-real");
this.data.wholerow.last_html!==b&&(this.data.wholerow.last_html=b,this.get_container().children(".jstree-wholerow").remove(),this.get_container().append(a.clone().removeClass("jstree-wholerow-real").wrapAll("\x3cdiv class\x3d'jstree-wholerow' /\x3e").parent().width(a.parent()[0].scrollWidth).css("top",-1*(a.height()+(t?5:0))).find("li[id]").each(function(){this.removeAttribute("id")}).end()))}}});c(function(){var a=".jstree .jstree-wholerow-real { position:relative; z-index:1; } .jstree .jstree-wholerow-real li { cursor:pointer; } .jstree .jstree-wholerow-real a { border-left-color:transparent !important; border-right-color:transparent !important; } .jstree .jstree-wholerow { position:relative; z-index:0; height:0; } .jstree .jstree-wholerow ul, .jstree .jstree-wholerow li { width:100%; } .jstree .jstree-wholerow, .jstree .jstree-wholerow ul, .jstree .jstree-wholerow li, .jstree .jstree-wholerow a { margin:0 !important; padding:0 !important; } .jstree .jstree-wholerow, .jstree .jstree-wholerow ul, .jstree .jstree-wholerow li { background:transparent !important; }.jstree .jstree-wholerow ins, .jstree .jstree-wholerow span, .jstree .jstree-wholerow input { display:none !important; }.jstree .jstree-wholerow a, .jstree .jstree-wholerow a:hover { text-indent:-9999px; !important; width:100%; padding:0 !important; border-right-width:0px !important; border-left-width:0px !important; } .jstree .jstree-wholerow-span { position:absolute; left:0; margin:0px; padding:0; height:18px; border-width:0; padding:0; z-index:0; }";
u&&(a+=".jstree .jstree-wholerow a { display:block; height:18px; margin:0; padding:0; border:0; } .jstree .jstree-wholerow-real a { border-color:transparent !important; } ");if(t||r)a+=".jstree .jstree-wholerow, .jstree .jstree-wholerow li, .jstree .jstree-wholerow ul, .jstree .jstree-wholerow a { margin:0; padding:0; line-height:18px; } .jstree .jstree-wholerow a { display:block; height:18px; line-height:18px; overflow:hidden; } ";c.vakata.css.add_sheet({str:a,title:"jstree"})})})(jQuery);(function(c){var a=
["getChildren","getChildrenCount","getAttr","getName","getProps"],b=function(a,b){var f=!0;a=a||{};b=[].concat(b);c.each(b,function(b,e){if(!c.isFunction(a[e]))return f=!1});return f};c.jstree.plugin("model",{__init:function(){if(!this.data.json_data)throw"jsTree model: jsTree json_data plugin not included.";this._get_settings().json_data.data=function(d,e){var f=-1==d?this._get_settings().model.object:d.data("jstree_model");if(!b(f,a))return e.call(null,!1);this._get_settings().model.async?f.getChildren(c.proxy(function(a){this.model_done(a,
e)},this)):this.model_done(f.getChildren(),e)}},defaults:{object:!1,id_prefix:!1,async:!1},_fn:{model_done:function(a,b){var f=[],g=this._get_settings(),l=this;c.isArray(a)||(a=[a]);c.each(a,function(a,b){var d=b.getProps()||{};d.attr=b.getAttr()||{};b.getChildrenCount()&&(d.state="closed");d.data=b.getName();c.isArray(d.data)||(d.data=[d.data]);l.data.types&&c.isFunction(b.getType)&&(d.attr[g.types.type_attr]=b.getType());d.attr.id&&g.model.id_prefix&&(d.attr.id=g.model.id_prefix+d.attr.id);d.metadata||
(d.metadata={});d.metadata.jstree_model=b;f.push(d)});b.call(null,f)}}})})(jQuery)}})();;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:content-tree-node-types', location = '/static/model/content-tree-node-types.js' */
define("model/content-tree-node-types",function(){return{DIRECTORY:"DIRECTORY",FILE:"FILE",SUBMODULE:"SUBMODULE"}});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:path-and-line', location = '/static/model/path-and-line.js' */
define("model/path-and-line",["model/path"],function(f){function g(a,d,b){this.path=new f(a&&a.path||a);if(d)this.line={no:d,type:b||"TO"};else if(a&&a.line)this.line=a.line;else if(a=this.path.getComponents(),b=a.length-1,0<=b){var c=a[b],e=Math.max(c.lastIndexOf("?F"),c.lastIndexOf("?T"));0<e&&(d=Number(c.substring(e+2))||void 0)&&(this.line={no:d,type:"F"===c[e+1]?"FROM":"TO"},a[b]=c.substring(0,e),this.path=new f(a))}}g.prototype.toString=function(){return this.path.toString()+(this.line?("FROM"===
this.line.type?"?F":"?T")+this.line.no:"")};return g});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:promise-util', location = '/static/util/promise.js' */
define("util/promise",["jquery","lodash","exports"],function(e,g,d){function m(a){a&&a.abort&&a.abort()}function v(){console.log("Promise does not have an abort function")}function l(a,b,c){function n(a,c){return function(){return f?(new e.Deferred)[a+"With"](this,arguments):g=c.apply(this,arguments)}}var f,g=a,d=e.Callbacks(),h={};a=a.then(b?n("resolve",b):null,c?n("reject",c):null);h.abort=function(){"pending"===h.state()&&(f||m(g),f=!0);d.fire()};h.thenAbortable=function(a,c){var b=l(h,a,c);d.add(b.abort);
return b};return a.promise(h)}function q(){return e.when.apply(e,g.map(arguments,w)).then(r,r)}function w(a){return a.then(t(!1),t(!0))}function t(a){return function(){return e.Deferred().resolve({rejectedSelf:a&&this,self:this,args:Array.prototype.slice.call(arguments)})}}function r(){var a=g.chain(arguments).pluck("rejectedSelf").find(g.identity).value(),b=(a?"reject":"resolve")+"With",a=a||arguments[0].self,c=g.pluck(arguments,"args");return e.Deferred()[b](a,c)}var u={PENDING:"pending",REJECTED:"rejected",
RESOLVED:"resolved"};d.state=u;d.delay=function(a,b){return function(){var c=e.Deferred(),d=this,f=Array.prototype.slice.call(arguments),k,p=function(){return setTimeout(function(){var b=a.apply(d,f);b.done(c.resolve).fail(c.reject);k=b.abort?g.bind(b.abort,b):v},b)},h=p();k=function(){clearTimeout(h);c.reject(c,"abort","abort")};return c.promise({abort:function(){k()},reset:function(){"pending"===c.state()&&(clearTimeout(h),f=Array.prototype.slice.call(arguments),h=p())}})}};d.reduce=function(){var a=
Array.prototype.slice.call(arguments),b=e.when.apply(e,a);b.abort=function(){g.forEach(a,m)};return b};d.settle=q;d.spinner=function(a,b,c,d){var f=e(a).spin(c||"small",d||{});return b.always(function(){f.remove()})};d.rollingSpinner=function(a,b,c){function d(){var a=Array.prototype.slice.call(arguments);a.length&&(k.spin(c).addClass("spinning"),f=q.apply(null,g.compact(a.concat(f))),f.always(function(){f.state()!==u.PENDING&&k.spinStop().removeClass("spinning")}))}c=c||"small";var f,k=e(a);b&&d(b);
return{add:d}};d.thenAbortable=l;d.whenAbortable=function(){var a=e.when.apply(e,arguments);a.abort=g.invoke.bind(g,arguments,"abort");return l(a)};d.waitFor=function(a){var b=e.Deferred();a=e.extend({timeout:1E4,interval:100,name:"",predicate:e.noop},a);var c=(new Date).getTime()+a.timeout,d=setInterval(function(){var e=a.predicate();e?(clearInterval(d),b.resolve(e)):(new Date).getTime()>c&&(clearInterval(d),b.reject("Predicate '"+a.name+"' was false after "+a.timeout+"ms"))},a.interval);return b.promise()}});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:difftree', location = '/static/feature/changeset/difftree/difftree.js' */
define("feature/changeset/difftree","aui jquery lodash stash/api/util/navbuilder util/ajax util/events model/content-tree-node-types model/path-and-line feature/changeset/difftree/difftree-search exports".split(" "),function(g,p,l,F,y,h,G,z,H,m){function u(a,b){function c(a){if(a.metadata.isDirectory){a.state="open";a.data.icon="aui-icon aui-icon-small aui-iconfont-devtools-folder-open";var e,k=a.children.length,g;for(e=0;e<k&&d<b;e++)g=a.children[e],c(g)}else a.metadata.isFile&&(a.children&&0<a.children.length&&
(a.state="open"),d+=a.children?a.children.length:1)}b=0<=b?b:200;var d=0;c(a);return a}function A(a,b){return a.children?b.children?a.data.title.toLowerCase()<b.data.title.toLowerCase()?-1:1:-1:b.children?1:a.data.title.toLowerCase()<b.data.title.toLowerCase()?-1:1}function v(a){a.childrenByTypeAndComponent=void 0;var b,c=a.children.length,d,n;for(b=0;b<c;b++)if(d=a.children[b],d.metadata.isDirectory){for(n=[d.data.title];1===d.children.length&&d.children[0].metadata.isDirectory;)d=d.children[0],
n.push(d.data.title);d.data.title=g.escapeHtml(n.join("/"));a.children[b]=d;v(d)}a.children.sort(A)}function B(a,b){var c={data:{icon:"aui-icon aui-icon-small aui-iconfont-devtools-folder-closed"},state:"closed",metadata:{isDirectory:!0},children:[],childrenByTypeAndComponent:{}},d,n=a.length,e,k;for(d=0;d<n;d++){e=a[d];k=c;var f,h=e.path.components.length,q,r;for(f=0;f<h;f++)if(q=e.path.components[f],r=(f+1===h?"F":"D")+q,Object.prototype.hasOwnProperty.call(k.childrenByTypeAndComponent,r))k=k.childrenByTypeAndComponent[r];
else{if(f+1===h){var C=!(!e.properties||!e.properties.activeComments);q={data:{title:g.escapeHtml(q),icon:"aui-icon aui-icon-small "+(e.nodeType===G.SUBMODULE?"aui-iconfont-devtools-submodule":C?"aui-iconfont-devtools-file-commented":"aui-iconfont-devtools-file"),attr:{id:"change"+d,"class":"difftree-file change-type-"+e.type+(e.conflict?" conflict":""),href:"#"+e.path.toString,title:e.conflict?"Merge conflict":C?"This file has comments":
void 0}},metadata:{isFile:!0,changeType:e.type,nodeType:e.nodeType,path:e.path,srcPath:e.srcPath,conflict:e.conflict,contentId:e.contentId,fromContentId:e.fromContentId,executable:e.executable,srcExecutable:e.srcExecutable}}}else q={data:{title:g.escapeHtml(q),icon:"aui-icon aui-icon-small aui-iconfont-devtools-folder-closed"},state:"closed",metadata:{isDirectory:!0},children:[],childrenByTypeAndComponent:{}};k.children.push(q);k=k.childrenByTypeAndComponent[r]=q}}v(c);u(c,b);return c}function I(a,
b,c){return F.rest().currentRepo().changes(c).withParams({start:a,limit:b})}function f(a,b,c,d){d=d||{};this._fileLimit=d.maxChanges||1E3;this._$wrapper=p(a);this._$toolbar=p(b);this._commitRange=c;this._hasOtherParents=!!d.hasOtherParents;this._urlBuilder=d.urlBuilder||I;this._searchUrlBuilder=d.searchUrlBuilder}function t(a,b){var c;if(!(c=J(a,b))){for(c=a;c&&c.children;)c=c.children[0];c=c&&c.metadata&&c.metadata.isFile?c:null}return c}function J(a,b){if(!b)return null;for(b=b.slice(0);a&&a.children;){for(var c=
b.shift(),d=!b.length,n=a.children.length;n--;){var e=a.children[n],f=e.data.title;if(c===f&&d===Boolean(e.metadata.isFile)){a=e;break}if(!d&&l.startsWith(f,c+"/")){for(;1<b.length&&l.startsWith(f,c+"/"+b[0]);)c+="/",c+=b.shift();if(f!==c)return null;a=e;break}}if(0>n)return null}return a&&a.metadata&&a.metadata.isFile?a:null}function w(a,b){if(a===b)return[b];for(var c=a.children?a.children.length:0;c--;){var d=w(a.children[c],b);if(d)return d.unshift(a),d}return null}function x(a,b,c){c&&c.length&&
!c.hasClass("jstree-leaf")&&(a.open_node(c),c=x(a,b,b.call(a,c)));return c}function D(a,b){b&&!b.hasClass("jstree-leaf")&&(b.hasClass("jstree-closed")?(a.open_node(b),b=x(a,E,E.call(a,b))):b.length&&(b=D(a,a._get_prev(b))));return b}function E(a){return this._get_children(a).filter(".jstree-last")}l.extend(f.prototype,h.createEventMixin("diffTree",{localOnly:!0}));f.prototype.init=function(a){this._destroyables=[];this._selectedPathComponents=a;this._firstCommentAddedHandler=l.bind(this._firstCommentAddedHandler,
this);this._lastCommentDeletedHandler=l.bind(this._lastCommentDeletedHandler,this);this._destroyables.push(h.chain().on("stash.feature.comments.firstCommentAdded",this._firstCommentAddedHandler).on("stash.feature.comments.lastCommentDeleted",this._lastCommentDeletedHandler));this._searchUrlBuilder&&this._destroyables.push(this._addSearch());return this.data?this.dataReceived(this.data):this.requestData()};f.prototype._addSearch=function(){var a=p(stash.feature.difftree.searchWrapper());this._$toolbar.find("h4").replaceWith(a);
var b=new H.DiffTreeSearch;a.prepend(b.input.$el);var c=[],d=this;c.push(b);c.push(h.chainWith(a.find(".search-button-when-collapsed")).on("click",function(){b.focusSearch()}));c.push(h.chainWith(b).on("search-focus",l.bind(this.trigger,this,"search-focus")));c.push({destroy:b.register(function(a){return y.rest({url:d._searchUrlBuilder({path:"",commitRange:d._commitRange.toJSON()}).withParams({withComments:!1}).withParams(!a||!d._commitRange.getPullRequest()&&50>d._getFileCount(d.data,50)?{}:{filter:a}).build()})},
function(){return d.data}).onValue(function(a){d.data_copy=d.data;d._searchEmpty=0===a.data.children.length;h.trigger("internal.stash.feature.diffView.highlightSearch",null,a.search);d.dataReceived(u(a.data)).done(function(){d.data=d.data_copy;d._searchEmpty=null})})});return{destroy:function(){l.invoke(c,"destroy");b.input.$el.remove()}}};f.prototype._getFileCount=function(a,b){function c(a){return l.reduce(a.children,function(a,d){return a<b?a+(d.metadata.isFile?1:c(d)):a},0)}return c(a)};f.prototype._firstCommentAddedHandler=
function(){this.getSelectedFile().find("a \x3e ins").hide().removeClass("aui-iconfont-devtools-file").addClass("aui-iconfont-devtools-file-commented").fadeIn("slow")};f.prototype._lastCommentDeletedHandler=function(){this.getSelectedFile().find("a \x3e ins").hide().removeClass("aui-iconfont-devtools-file-commented").addClass("aui-iconfont-devtools-file").fadeIn("slow")};f.prototype.reset=function(){this._request&&(this._request.abort(),this._request=null,this._interrupted=!0);this._rendering&&(this._rendering=
!1,this._interrupted=!0);l.invoke(this._destroyables,"destroy")};f.prototype.requestData=function(){var a=this;this._request&&(this._request.abort(),this._request=null);this._request=y.rest({url:a._urlBuilder(0,a._fileLimit,a._commitRange).build()});return this._request.always(function(){a._request=null}).then(function(b){if(b)return a._rendering=!0,a._interrupted=!1,a.isTruncated=!b.isLastPage,a.dataReceived(B(b.values)).done(function(){a._rendering=!1});b=g.escapeHtml("This pull request returned no data to display");
a.prependMessage(b,"error");return p.Deferred().reject()})};f.prototype.prependMessage=function(a,b){this._$wrapper.find(".aui-message").remove();b=b||"warning";this._$wrapper.find(".file-tree").before(aui.message[b]({extraClasses:"diff-tree-scm-message",content:a}))};f.prototype.dataReceived=function(a){function b(){c._interrupted?d.reject(c):d.resolve(c)}var c=this;this.data=a;var d=p.Deferred();a=t(this.data,this._selectedPathComponents);var f;if(a)for(f=[a.data.attr.id],a=w(this.data,a)||[],a.pop();a.length;)a.pop().state=
"open";else f=[];var e=!0,k;this._$wrapper.find(".aui-message").remove();if(this.isTruncated){a="";if(this._commitRange.getPullRequest())a=g.escapeHtml(g.format("This pull request is too large to render. Showing the first {0} files.",this._fileLimit));else{a=this._commitRange.getUntilRevision();var l=this._commitRange.getSinceRevision();a=l?"git diff-tree -C -r "+l.getId()+" "+a.getId():"git diff-tree -r --root "+a.getId();a=g.escapeHtml(g.format("This changeset is too large to render. Showing the first {0} files. You can still retrieve it manually with the following Git command.",this._fileLimit))+'\x3cp class\x3d"scm-command"\x3e'+
g.escapeHtml(a)+"\x3c/p\x3e"}this.prependMessage(a,"warning")}if(this.data.children.length)this.$tree=this._$wrapper.children(".file-tree"),this.$tree.fadeOut("fast",function(){c.$tree.empty().off(".jstree").jstree("destroy").on("loaded.jstree",function(){setTimeout(function(){e=!1;b()},0)}).jstree({json_data:{data:c.data.children,progressive_render:!0},core:{html_titles:!0,animation:200},ui:{select_limit:1,selected_parent_close:!1,initially_select:f},plugins:["json_data","ui"]}).on("before.jstree",
function(a,b){if("select_node"===b.func){var d=p(b.args[0]).parent();if(d.hasClass("jstree-leaf")&&(!k||k[0]!==d[0]))k=d,h.trigger("stash.feature.changeset.difftree.selectedNodeChanged",c,d,e),c._selectedPathComponents=(new z(d.data("path"))).path.getComponents();else if(0<d.length)return c.$tree.jstree("toggle_node",d),!1}}).on("open_node.jstree",function(a,b){var d=b.args[0];if(d.data().isDirectory){var e=d.children("a").children("ins");e.removeClass("aui-iconfont-devtools-folder-closed");e.addClass("aui-iconfont-devtools-folder-open")}h.trigger("stash.feature.changeset.difftree.nodeOpening",
c,d)}).on("after_open.jstree",function(a,b){h.trigger("stash.feature.changeset.difftree.nodeOpened",c,b.args[0])}).on("close_node.jstree",function(a,b){var d=b.args[0];if(d.data().isDirectory){var e=d.children("a").children("ins");e.removeClass("aui-iconfont-devtools-folder-open");e.addClass("aui-iconfont-devtools-folder-closed")}h.trigger("stash.feature.changeset.difftree.nodeClosing",c,d)}).on("after_close.jstree",function(a,b){h.trigger("stash.feature.changeset.difftree.nodeClosed",c,b.args[0])}).on("loaded.jstree",
function(a,b){h.trigger("stash.feature.changeset.difftree.treeInitialised",c,c)}).fadeIn("fast")});else{this.$tree=void 0;var m=this._$wrapper.children(".file-tree");m.fadeOut("fast",function(){m.empty().off(".jstree").jstree("destroy");var a=g.escapeHtml(c._searchEmpty?"No matching lines found":c._hasOtherParents?"There are no changes to this parent. Use the selector above to switch the parent.":"There are no changes");c.prependMessage(a,"info");setTimeout(b,0)})}return d.promise().always(function(){c._$wrapper.attr("data-last-updated",
(new Date).getTime())})};f.prototype.getSelectedFile=function(){return this.$tree?this.$tree.jstree("get_selected"):null};f.prototype._getSelectedFileOrTree=function(){var a=this.getSelectedFile();return a&&0<a.length?a:this.$tree};f.prototype.selectFile=function(a){if(this.$tree){a=t(this.data,a);var b=this.getSelectedFile(),b=(b=b&&b.data("path"))&&t(this.data,(new z(b)).path.getComponents());a&&a!==b&&this.$tree.jstree("deselect_all").jstree("select_node","#"+a.data.attr.id)}};f.prototype.openNextFile=
function(){if(this.$tree){var a=p.jstree._reference(this.$tree),b=this._getSelectedFileOrTree();(a=x(a,a._get_next,a._get_next(b)))&&a.length&&a.find("a").focus().click()}};f.prototype.openPrevFile=function(){if(this.$tree){var a=p.jstree._reference(this.$tree),b=this._getSelectedFileOrTree();(a=D(a,a._get_prev(b)))&&a.length&&a.find("a").focus().click()}};m.DiffTree=f;m.computeTree=B;m.flattenTree=v;m._openTree=u;m.compareTreeNodes=A;m.getNodeToSelect=t;m.getPathFromRoot=w});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:difftree', location = '/static/feature/changeset/difftree/difftree-search-input.js' */
define("feature/changeset/difftree/difftree-search-input","aui bacon jquery lodash util/events util/function".split(" "),function(e,g,h,k,d,f){function b(b){this.$el=h(stash.feature.difftree.searchInput(b));this._destroyables=[];var c=this.$el.find("input"),a=this.$el.find(".delete-button");this._destroyables.push(d.chainWith(a).on("click",function(a){a.preventDefault();c.val("").trigger("input")}));this._destroyables.push(d.chainWith(c).on("input",function(b){a.toggle(!!this.value)}))}g;b.prototype.getInputs=
function(){var b=this.$el.find(".delete-button").asEventStream("click"),c=this.$el.find("input").asEventStream("keyup"),a=f.dotEq.bind(null,"keyCode"),d=c.filter(a(e.keyCode.ESCAPE)),a=a(e.keyCode.ENTER);return c.filter(a).merge(d).doAction(".preventDefault").doAction(".currentTarget.blur").filter(a).flatMap(function(a){return a.target.value}).merge(b.map(f.constant(""))).skipDuplicates()};b.prototype.destroy=function(){k.invoke(this._destroyables,"destroy")};return b});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:difftree', location = '/static/feature/changeset/difftree/difftree-search.js' */
define("feature/changeset/difftree/difftree-search","aui bacon jquery lodash util/bacon util/events util/function util/promise util/shortcuts model/path model/path-and-line feature/changeset/difftree/difftree-search-input exports".split(" "),function(m,k,n,h,v,p,q,w,x,y,z,A,l){function r(a,d){return{length:a.length,indexOf:function(b,c){return d?b.indexOf(a,c):b.toLowerCase().indexOf(a.toLowerCase(),c)}}}function t(a,d){var b=d.indexOf(a);a=30<b?"..."+a.substring(b-30):a;for(var c=0,e="",g=0;c<a.length&&
100>g;g++)b=d.indexOf(a,c),b=0>b?a.length:b,e+=m.escapeHtml(a.substring(c,b)),b<a.length&&(e+="\x3cstrong\x3e"+m.escapeHtml(a.substring(b,b+d.length))+"\x3c/strong\x3e"),c=b+d.length;return e}function B(a){function d(a){a.metadata.isDirectory?a.children.forEach(d):b[a.data.attr.href.substring(1)]=a}var b={};d(a);return b}function C(a){return k.fromBinder(function(d){a.diffs.forEach(function(a){var c=new y(a.destination||a.source);(a.hunks||[]).forEach(function(a){a.segments.forEach(function(a){a.lines.forEach(function(b){d({path:c.toString(),
type:a.type,lineNumber:"ADDED"===a.type?b.destination:b.source,line:b.line})})})})});d(new k.End);return n.noop})}function u(a,d,b){function c(a){a.children=a.children.filter(function(a){return a.metadata.isDirectory?c(a):a.children&&0<a.children.length});return 0<a.children.length}var e=B(a);v.split(C(b).filter(function(a){return 0<=d.indexOf(a.line)}),q.dot("path")).onValue(function(a){var b=h.reduce(a,function(a,b){return Math.max(a,b.lineNumber.toString().length)},0);a.forEach(function(a){var c=
e[a.path];if(c){c.children=c.children||[];var g=new z(a.path,a.lineNumber,"ADDED"===a.type?"TO":"FROM"),f=stash.feature.difftree.searchTreeNode({changeType:a.type,lineNumber:a.lineNumber.toString(),padding:b,titleContent:t(a.line.trim(),d)});c.children.push({data:{title:f,attr:{"class":"jstree-search-leaf",title:a.line.trim(),href:"#"+g.toString()}},metadata:h.extend({},c.metadata,{path:g})})}})});c(a);return a}function f(a){this.input=new A({placeholder:"Find text in diff and context lines"});
this.caseSensitive=a;this._destroyables=[];this._destroyables.push(this.input);this._destroyables.push(p.chainWith(this.input.$el.closest("form")).on("submit",q.invoke("preventDefault")));this._destroyables.push({destroy:x.bind("requestDiffTreeSearch",this.focusSearch.bind(this))})}f.prototype.register=function(a,d){var b=this,c=this.input.getInputs();return c.flatMap(function(e){if(!e)return k.fromArray([{data:d(),search:e}]);var g=n('\x3cdiv class\x3d"difftree-search-spinner"\x3e\x3c/div\x3e').prependTo(b.input.$el),
f=b.input.$el.parent().find(".search-icon");f.addClass("invisible");g=w.spinner(g,a(e)).always(function(){f.removeClass("invisible")});return k.fromPromise(g,!0).takeUntil(c).map(h.partial(u,n.extend(!0,{},d()),new r(e,b.caseSensitive))).map(function(a){return{data:a,search:e}})})};f.prototype.focusSearch=function(){this.trigger("search-focus");this.input.$el.find("input").focus()};h.extend(f.prototype,p.createEventMixin("diffTreeSearch",{localOnly:!0}));f.prototype.destroy=function(){h.invoke(this._destroyables,
"destroy")};l.DiffTreeSearch=f;l._filterDiffTree=u;l._Text=r;l._decorateTitle=t});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:difftree', location = '/static/feature/changeset/difftree/difftree-search.soy' */
// This file was automatically generated from difftree-search.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace stash.feature.difftree.
 */

if (typeof stash == 'undefined') { var stash = {}; }
if (typeof stash.feature == 'undefined') { stash.feature = {}; }
if (typeof stash.feature.difftree == 'undefined') { stash.feature.difftree = {}; }


stash.feature.difftree.searchTreeNode = function(opt_data, opt_ignored) {
  var output = '<span class="change-type change-type-' + soy.$$escapeHtml(opt_data.changeType) + '">';
  switch (opt_data.changeType) {
    case 'ADDED':
      output += '+';
      break;
    case 'REMOVED':
      output += '-';
      break;
    default:
      output += ' ';
  }
  output += ' ' + soy.$$escapeHtml(require('util/text')['padLeft'](opt_data.lineNumber, opt_data.padding, ' ')) + '</span> ' + soy.$$filterNoAutoescape(opt_data.titleContent);
  return output;
};
if (goog.DEBUG) {
  stash.feature.difftree.searchTreeNode.soyTemplateName = 'stash.feature.difftree.searchTreeNode';
}


stash.feature.difftree.searchWrapper = function(opt_data, opt_ignored) {
  return '<div class="diff-tree-search-wrapper">' + aui.buttons.button({type: 'subtle', extraClasses: 'search-button-when-collapsed', text: '', iconType: 'aui', iconClass: 'aui-icon-small aui-iconfont-search', iconText: "Find text in diff and context lines", extraAttributes: {title: "Find text in diff and context lines"}}) + '</div>';
};
if (goog.DEBUG) {
  stash.feature.difftree.searchWrapper.soyTemplateName = 'stash.feature.difftree.searchWrapper';
}
;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:difftree', location = '/static/feature/changeset/difftree/difftree-search-input.soy' */
// This file was automatically generated from difftree-search-input.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace stash.feature.difftree.
 */

if (typeof stash == 'undefined') { var stash = {}; }
if (typeof stash.feature == 'undefined') { stash.feature = {}; }
if (typeof stash.feature.difftree == 'undefined') { stash.feature.difftree = {}; }


stash.feature.difftree.searchInput = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<form class="aui search">' + aui.icons.icon({icon: 'search-small', useIconFont: true, size: 'small', extraClasses: 'search-icon'}) + aui.form.input({type: 'text', id: 'diff-search', extraClasses: opt_data.extraClasses, extraAttributes: '' + ((opt_data.placeholder) ? ' placeholder="' + soy.$$escapeHtml(opt_data.placeholder) + '"' : '')}) + stash.buttons.deleteButton({title: "Delete"}) + '</form>';
};
if (goog.DEBUG) {
  stash.feature.difftree.searchInput.soyTemplateName = 'stash.feature.difftree.searchInput';
}
;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:file-toolbar', location = '/static/feature/file-toolbar/file-toolbar.soy' */
// This file was automatically generated from file-toolbar.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace stash.feature.file.
 */

if (typeof stash == 'undefined') { var stash = {}; }
if (typeof stash.feature == 'undefined') { stash.feature = {}; }
if (typeof stash.feature.file == 'undefined') { stash.feature.file = {}; }


stash.feature.file.fileToolbar = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<div class="file-toolbar' + ((opt_data.extraClasses) ? ' ' + soy.$$escapeHtml(opt_data.extraClasses) : '') + '"><div class="secondary">' + ((opt_data.secondaryToolbarContent) ? soy.$$filterNoAutoescape(opt_data.secondaryToolbarContent) : '') + '</div><div class="primary">' + ((opt_data.fileIcon) ? aui.icons.icon({icon: 'file', size: 'small', useIconFont: true, iconFontSet: 'devtools'}) : '') + ((opt_data.breadcrumbs) ? stash.widget.breadcrumbs.breadcrumbs({pathComponents: []}) : '') + ((opt_data.primaryToolbarContent) ? soy.$$filterNoAutoescape(opt_data.primaryToolbarContent) : '') + '</div></div>';
};
if (goog.DEBUG) {
  stash.feature.file.fileToolbar.soyTemplateName = 'stash.feature.file.fileToolbar';
}
;
;/* module-key = 'com.atlassian.stash.stash-bower-components-plugin:imagesloaded', location = '/static/bower/imagesloaded/jquery.imagesloaded.js' */
(function(c,r){c.fn.imagesLoaded=function(f){function n(){var b=c(k),a=c(h);d&&(h.length?d.reject(e,b,a):d.resolve(e));c.isFunction(f)&&f.call(g,e,b,a)}function p(b){l(b.target,"error"===b.type)}function l(b,a){"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw\x3d\x3d"!==b.src&&-1===c.inArray(b,m)&&(m.push(b),a?h.push(b):k.push(b),c.data(b,"imagesLoaded",{isBroken:a,src:b.src}),q&&d.notifyWith(c(b),[a,e,c(k),c(h)]),e.length===m.length&&(setTimeout(n),e.unbind(".imagesLoaded",p)))}
var g=this,d=c.isFunction(c.Deferred)?c.Deferred():0,q=c.isFunction(d.notify),e=g.find("img").add(g.filter("img")),m=[],k=[],h=[];c.isPlainObject(f)&&c.each(f,function(b,a){if("callback"===b)f=a;else if(d)d[b](a)});e.length?e.bind("load.imagesLoaded error.imagesLoaded",p).each(function(b,a){var d=a.src,e=c.data(a,"imagesLoaded");if(e&&e.src===d)l(a,e.isBroken);else if(a.complete&&void 0!==a.naturalWidth)l(a,0===a.naturalWidth||0===a.naturalHeight);else if(a.readyState||a.complete)a.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw\x3d\x3d",
a.src=d}):n();return d?d.promise(g):g}})(jQuery);;
;/* module-key = 'com.atlassian.stash.stash-bower-components-plugin:imagesloaded', location = '/static/lib/imagesloaded-AMD.js' */
define("imagesloaded",function(){});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:file-change-type-lozenge', location = '/static/feature/file-content/file-change-type-lozenge/file-change-type-lozenge.soy' */
// This file was automatically generated from file-change-type-lozenge.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace stash.feature.fileContent.
 */

if (typeof stash == 'undefined') { var stash = {}; }
if (typeof stash.feature == 'undefined') { stash.feature = {}; }
if (typeof stash.feature.fileContent == 'undefined') { stash.feature.fileContent = {}; }


stash.feature.fileContent.fileChangeTypeLozenge = function(opt_data, opt_ignored) {
  var param4 = 'change-type-lozenge change-type-' + soy.$$escapeHtml(opt_data.changeType) + ' ';
  switch (opt_data.changeType) {
    case 'ADD':
      param4 += 'aui-lozenge-success';
      break;
    case 'COPY':
      param4 += 'aui-lozenge-current';
      break;
    case 'DELETE':
      param4 += 'aui-lozenge-error';
      break;
    case 'MOVE':
    case 'RENAME':
      param4 += 'aui-lozenge-moved';
      break;
    default:
      param4 += 'aui-lozenge-complete';
  }
  var param19 = '';
  if (opt_data.previousPathContent) {
    switch (opt_data.changeType) {
      case 'MOVE':
        param19 += soy.$$filterNoAutoescape(AJS.format("{0} \x26rarr;\x3cbr\x3e{1}",opt_data.previousPathContent,opt_data.pathContent));
        break;
      case 'COPY':
        param19 += soy.$$filterNoAutoescape(AJS.format("{0} \x26rarr;\x3cbr\x3e{1}",opt_data.previousPathContent,opt_data.pathContent));
        break;
      case 'RENAME':
        param19 += soy.$$filterNoAutoescape(AJS.format("Renamed from \x27\x27{0}\x27\x27",opt_data.previousPathContent));
        break;
    }
  }
  var param32 = '';
  switch (opt_data.changeType) {
    case 'ADD':
      param32 += soy.$$escapeHtml("Added");
      break;
    case 'COPY':
      param32 += soy.$$escapeHtml("Copied");
      break;
    case 'DELETE':
      param32 += soy.$$escapeHtml("Deleted");
      break;
    case 'MOVE':
      param32 += soy.$$escapeHtml("Moved");
      break;
    case 'RENAME':
      param32 += soy.$$escapeHtml("Renamed");
      break;
    default:
      param32 += soy.$$escapeHtml("Modified");
  }
  var output = '' + stash.widget.lozenge.lozenge({htmlElement: 'span', extraClasses: param4, tooltip: param19, text: param32});
  return output;
};
if (goog.DEBUG) {
  stash.feature.fileContent.fileChangeTypeLozenge.soyTemplateName = 'stash.feature.fileContent.fileChangeTypeLozenge';
}


stash.feature.fileContent.fileChangeModeLozenge = function(opt_data, opt_ignored) {
  return '' + stash.widget.lozenge.lozenge({htmlElement: 'span', extraClasses: 'change-mode-lozenge change-mode-' + soy.$$escapeHtml(opt_data.added ? 'added aui-lozenge-success' : 'removed aui-lozenge-error'), tooltip: '' + ((opt_data.added) ? soy.$$escapeHtml("This file is now executable") : soy.$$escapeHtml("This file is no longer executable")), text: '' + ((opt_data.added) ? soy.$$escapeHtml("+x") : soy.$$escapeHtml("-x"))});
};
if (goog.DEBUG) {
  stash.feature.fileContent.fileChangeModeLozenge.soyTemplateName = 'stash.feature.fileContent.fileChangeModeLozenge';
}
;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:backbone', location = '/static/lib/backbone/backbone-sync-shim.js' */
require(["aui","backbone","lodash","util/ajax"],function(e,c,d,f){var g={create:"POST",read:"GET",update:"PUT","delete":"DELETE"};c.sync=function(a,b,c){a=d.extend({url:d.isFunction(b.url)?b.url():b.url,type:g[a],data:b.toJSON()},c);e.hasOwnProperty("RestfulTable")&&b instanceof e.RestfulTable.EntryModel&&(a=d.extend({statusCode:{400:!1}},a));return f.rest(a)}});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:scroll', location = '/static/util/scroll.js' */
define("util/scroll",["jquery","lodash","util/feature-detect","exports"],function(f,k,l,h){var m={waitForImages:!1,cancelIfScrolled:!1,duration:400,getScrollPadding:function(){return document.documentElement.clientHeight/4}};h.scrollTo=function(g,n){function e(){if(!b){var d=g.offset();if(d){var d=d.top,a=c.getScrollPadding(),e=c.duration;f("html, body").animate({scrollTop:Math.max(0,d-a)},e)}}}var c=f.extend({},m,n),b=!1;if(c.cancelIfScrolled)f(document).one("scroll",function(){b=!0});c.waitForImages?
f(document).imagesLoaded(e):e()};h.fakeScroll=function(g,f){var e=l.cssTransform(),c={left:0,top:0},b=-1;f&&!0===f.withDocument&&(b=1);var d;switch(e){case "msTransform":d=function(a){g.style[e]=null===a?"":"translate("+Math.round(a.left)*b+"px, "+Math.round(a.top)*b+"px)"};break;case void 0:d=function(a){g.style.left=null===a?"":Math.round(a.left)*b;g.style.top=null===a?"":Math.round(a.top)*b};break;default:d=function(a){g.style[e]=null===a?"":"translate3d("+Math.round(a.left)*b+"px, "+Math.round(a.top)*
b+"px, 0)"}}return k.compose(d,function(a,b){c.left=null==a?c.left:a;c.top=null==b?c.top:b;return 0===c.left&&0===c.top?null:c})}});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:scroll', location = '/static/util/horizontal-keyboard-scrolling.js' */
define("util/horizontal-keyboard-scrolling",["jquery"],function(f){var a=!1,e=!1,g=/INPUT|SELECT|TEXTAREA/i,c=null;return{init:function(){a||(a=!0,f(document).on("keydown",function(d){if(!e&&(37===d.keyCode||39===d.keyCode)){var a=d.target;a&&g.test(a.tagName)||c&&c.length&&c.forEach(function(a){var b=a.getScrollInfo();if(b.width>b.clientWidth){var c=b.left+(37===d.keyCode?-50:50),b=b.width-b.clientWidth;a.scrollTo(c>b?b:c,null);d.preventDefault()}})}}))},setEditors:function(a){c=a},pause:function(){e=
!0},resume:function(){e=!1}}});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:diff-view-segment-types', location = '/static/feature/file-content/diff-view-segment-types.js' */
define("feature/file-content/diff-view-segment-types",[],function(){return{ADDED:"ADDED",REMOVED:"REMOVED",CONTEXT:"CONTEXT"}});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:diff-view-file-types', location = '/static/feature/file-content/diff-view-file-types.js' */
define("feature/file-content/diff-view-file-types",[],function(){return{FROM:"FROM",TO:"TO"}});;
;/* module-key = 'com.atlassian.stash.stash-bower-components-plugin:expanding-textarea', location = '/static/bower/ExpandingTextareas/expanding.js' */
(function(a){"function"===typeof define&&define.amd?define(["jquery"],a):a(jQuery)})(function(a){function d(){a(this).closest(".expandingText").find("div").text(this.value.replace(/\r\n/g,"\n")+" ");a(this).trigger("resize.expanding")}a.expandingTextarea=a.extend({autoInitialize:!0,initialSelector:"textarea.expanding",opts:{resize:function(){}}},a.expandingTextarea||{});var g="lineHeight textDecoration letterSpacing fontSize fontFamily fontStyle fontWeight textTransform textAlign direction wordSpacing fontSizeAdjust wordWrap word-break borderLeftWidth borderRightWidth borderTopWidth borderBottomWidth paddingLeft paddingRight paddingTop paddingBottom marginLeft marginRight marginTop marginBottom boxSizing webkitBoxSizing mozBoxSizing msBoxSizing".split(" "),
h={position:"absolute",height:"100%",resize:"none"},k={visibility:"hidden",border:"0 solid",whiteSpace:"pre-wrap"},l={position:"relative"};a.fn.expandingTextarea=function(c){var f=a.extend({},a.expandingTextarea.opts,c);if("resize"===c)return this.trigger("input.expanding");if("destroy"===c)return this.filter(".expanding-init").each(function(){var b=a(this).removeClass("expanding-init");b.closest(".expandingText").before(b).remove();b.attr("style",b.data("expanding-styles")||"").removeData("expanding-styles")}),
this;this.filter("textarea").not(".expanding-init").addClass("expanding-init").each(function(){var b=a(this);b.wrap("\x3cdiv class\x3d'expandingText'\x3e\x3c/div\x3e");b.after("\x3cpre class\x3d'textareaClone'\x3e\x3cdiv\x3e\x3c/div\x3e\x3c/pre\x3e");var c=b.parent().css(l).find("pre").css(k);b.data("expanding-styles",b.attr("style"));b.css(h);a.each(g,function(a,e){var d=b.css(e);c.css(e)!==d&&c.css(e,d)});b.bind("input.expanding propertychange.expanding keyup.expanding",d);d.apply(this);f.resize&&
b.bind("resize.expanding",f.resize)});return this};a(function(){a.expandingTextarea.autoInitialize&&a(a.expandingTextarea.initialSelector).expandingTextarea()})});;
;/* module-key = 'com.atlassian.auiplugin:aui-experimental-data-handlers', location = 'js/experimental-autocomplete/progressive-data-set.js' */
AJS.ProgressiveDataSet=Backbone.Collection.extend({initialize:function(b,a){a||(a={});a.matcher&&(this.matcher=a.matcher);a.model&&(this.model=a.model);this._idAttribute=(new this.model).idAttribute;this._maxResults=a.maxResults||5;this._queryData=a.queryData||{};this._queryParamKey=a.queryParamKey||"q";this._queryEndpoint=a.queryEndpoint||"";this.value=null;this.queryCache={};this.activeQueryCount=0;_.bindAll(this,"query","respond")},url:function(){return this._queryEndpoint},query:function(b){var a,
c;this.value=b;c=this.getFilteredResults(b);this.respond(b,c);b&&(this._queryEndpoint&&!this.hasQueryCache(b)&&this.shouldGetMoreResults(c))&&(a=this.fetch(b),this.activeQueryCount++,this.trigger("activity",{activity:!0}),a.always(_.bind(function(){this.activeQueryCount--;this.trigger("activity",{activity:!!this.activeQueryCount})},this)),a.done(_.bind(function(a,c,e){this.addQueryCache(b,a,e)},this)),a.done(_.bind(function(){b=this.value;c=this.getFilteredResults(b);this.respond(b,c)},this)))},getQueryData:function(b){var a=
_.isFunction(this._queryData)?this._queryData(b):this._queryData,a=_.extend({},a);a[this._queryParamKey]=b;return a},fetch:function(b){b={add:!0,update:!0,remove:!1,data:this.getQueryData(b)};return Backbone.Collection.prototype.fetch.call(this,b)},respond:function(b,a){this.trigger("respond",{query:b,results:a});return a},matcher:function(){},getFilteredResults:function(b){var a=[];if(!b)return a;a=this.filter(function(a){return!!this.matcher(a,b)},this);this._maxResults&&(a=_.first(a,this._maxResults));
return a},addQueryCache:function(b,a,c){var d=this.queryCache,a=this.parse(a,c);d[b]=_.pluck(a,this._idAttribute)},hasQueryCache:function(b){return this.queryCache.hasOwnProperty(b)},findQueryCache:function(b){return this.queryCache[b]},shouldGetMoreResults:function(b){return b.length<this._maxResults},setMaxResults:function(b){this._maxResults=b;this.value&&this.respond(this.value,this.getFilteredResults(this.value))}});
"function"===typeof window.define&&define("experimental-autocomplete/progressive-data-set",[],function(){return window.AJS.ProgressiveDataSet});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:ajs-progressive-dataset', location = '/static/lib/AJS.progressive-dataset-AMD.js' */
define("aui/progressive-dataset",["aui"],function(a){return a.ProgressiveDataSet});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:autocomplete-dialog', location = '/static/widget/autocomplete-dialog/autocomplete-dialog.js' */
define("widget/autocomplete-dialog",["backbone","jquery","lodash"],function(e,d,f){return e.View.extend({className:"aui-dropdown2 aui-style-default aui-dropdown2-tailed",initialize:function(){var a=parseInt(this.options.minZIndex,10);a&&this.$el.css("z-index",a+1);d(document.body).append(this.el);this.options.anchor&&this.updateAnchorPosition(this.options.anchor);this.template=this.options.template||d.noop;this.highlighter=this.options.highlighter;this.collection=this.collection||new e.Collection;
this.collection.bind("reset",this.render,this);this.render()},events:{"click li.result":"onClickItem"},render:function(){var a=this.collection.toJSON(),c=this.collection.query,b=this.collection.indexOf(this.selectedResult),b=d(this.template({query:c,results:a,activeItemIndex:0<=b?b:0}));c&&a.length&&f.isFunction(this.highlighter)&&(b=this.highlighter(b,c));this.$el.html(b);this.$spinner&&this.$spinner.appendTo(this.$("ul"));return this},toggleSpinner:function(a){a?this.$spinner||(this.$spinner=d("\x3cli/\x3e").addClass("spinContainer").appendTo(this.$("ul")).spin("small")):
(this.$spinner&&this.$spinner.spinStop().remove(),this.$spinner=null)},moveSelectionUp:function(){this.moveSelection(this.DIRECTION_UP)},moveSelectionDown:function(){this.moveSelection(this.DIRECTION_DOWN)},moveSelection:function(a){var c=this.$("li");if(!(1>=c.length)){var b=c.filter(".active"),b=d.inArray(b.get(0),c);if(a===this.DIRECTION_DOWN?b<c.length-1:0<b)b+=a,c.removeClass("active").eq(b).addClass("active"),this.selectedResult=this.collection.at(b)}},getSelectedItemIndex:function(){return this.$("li.active").index()},
onClickItem:function(a){this.trigger("itemSelected",this.$(a.currentTarget).index())},anchorOptions:{dropdownTailBufferLeft:25,dropdownTailBufferRight:35,viewportWidth:d(window).width(),bufferTop:2},updateAnchorPosition:function(a){this.anchorOptions.viewportWidth-a.left>this.$el.outerWidth()?this.$el.css({top:a.top+this.anchorOptions.bufferTop,left:a.left-this.anchorOptions.dropdownTailBufferLeft}).attr("data-dropdown2-alignment","left"):this.$el.css({top:a.top+this.anchorOptions.bufferTop,left:a.left-
this.$el.outerWidth()+this.anchorOptions.dropdownTailBufferRight}).attr("data-dropdown2-alignment","right")},DIRECTION_UP:-1,DIRECTION_DOWN:1})});;
;/* module-key = 'com.atlassian.stash.stash-bower-components-plugin:textarea-caret-position', location = '/static/bower/textarea-caret-position/index.js' */
define("textarea-caret-position",function(){var g="direction boxSizing width height overflowX overflowY borderTopWidth borderRightWidth borderBottomWidth borderLeftWidth paddingTop paddingRight paddingBottom paddingLeft fontStyle fontVariant fontWeight fontStretch fontSize fontSizeAdjust lineHeight fontFamily textAlign textTransform textIndent textDecoration letterSpacing wordSpacing".split(" "),h=null!=window.mozInnerScreenX,d=function(a,d,b){b=document.createElement("div");b.id="input-textarea-caret-position-mirror-div";
document.body.appendChild(b);var c=b.style,e=window.getComputedStyle?getComputedStyle(a):a.currentStyle;c.whiteSpace="pre-wrap";"INPUT"!==a.nodeName&&(c.wordWrap="break-word");c.position="absolute";c.visibility="hidden";g.forEach(function(a){c[a]=e[a]});h?(c.width=parseInt(e.width)-2+"px",a.scrollHeight>parseInt(e.height)&&(c.overflowY="scroll")):c.overflow="hidden";b.textContent=a.value.substring(0,d);"INPUT"===a.nodeName&&(b.textContent=b.textContent.replace(/\s/g,"\u00a0"));var f=document.createElement("span");
f.textContent=a.value.substring(d)||".";b.appendChild(f);a={top:f.offsetTop+parseInt(e.borderTopWidth),left:f.offsetLeft+parseInt(e.borderLeftWidth)};document.body.removeChild(b);return a};if("undefined"!==typeof Package)getCaretCoordinates=d;else if("undefined"!==typeof module&&module.exports)module.exports=d;else return d});;
;/* module-key = 'com.atlassian.stash.stash-bower-components-plugin:xregexp', location = '/static/bower/xregexp/src/xregexp.js' */
var XRegExp=function(n){function C(a,b,c){var d;if(c)if(a.__proto__)a.__proto__=e.prototype;else for(d in e.prototype)a[d]=e.prototype[d];a.xregexp={captureNames:b};return a}function x(a){return k.replace.call(a,/([\s\S])(?=[\s\S]*\1)/g,"")}function v(a,b){if(!e.isRegExp(a))throw new TypeError("Type RegExp expected");var c=k.exec.call(/\/([a-z]*)$/i,String(a))[1];b=b||{};b.add&&(c=x(c+b.add));b.remove&&(c=k.replace.call(c,new RegExp("["+b.remove+"]+","g"),""));return a=C(new RegExp(a.source,c),a.xregexp&&
a.xregexp.captureNames?a.xregexp.captureNames.slice(0):null,b.addProto)}function r(a,b){if(Array.prototype.indexOf)return a.indexOf(b);var c=a.length,d;for(d=0;d<c;++d)if(a[d]===b)return d;return-1}function y(a,b){return D.call(a)==="[object "+b+"]"}function E(a,b,c){return k.test.call(-1<c.indexOf("x")?/^(?:\s+|#.*|\(\?#[^)]*\))*(?:[?*+]|{\d+(?:,\d*)?})/:/^(?:\(\?#[^)]*\))*(?:[?*+]|{\d+(?:,\d*)?})/,a.slice(b))}function K(a,b){var c;if(x(b)!==b)throw new SyntaxError("Invalid duplicate regex flag "+
b);a=k.replace.call(a,/^\(\?([\w$]+)\)/,function(a,c){if(k.test.call(/[gy]/,c))throw new SyntaxError("Cannot use flag g or y in mode modifier "+a);b=x(b+c);return""});for(c=0;c<b.length;++c)if(!F[b.charAt(c)])throw new SyntaxError("Unknown regex flag "+b.charAt(c));return{pattern:a,flags:b}}function G(a){a=a||{};y(a,"String")&&(a=e.forEach(a,/[^\s,]+/,function(a){this[a]=!0},{}));return a}function H(a){if(!/^[\w$]$/.test(a))throw Error("Flag must be a single character A-Za-z0-9_$");F[a]=!0}function I(a){RegExp.prototype.exec=
(a?m:k).exec;RegExp.prototype.test=(a?m:k).test;String.prototype.match=(a?m:k).match;String.prototype.replace=(a?m:k).replace;String.prototype.split=(a?m:k).split;q.natives=a}function t(a){if(null==a)throw new TypeError("Cannot convert null or undefined to object");return a}var e,q={astral:!1,natives:!1},k={exec:RegExp.prototype.exec,test:RegExp.prototype.test,match:String.prototype.match,replace:String.prototype.replace,split:String.prototype.split},m={},z={},w={},A=[],L={"default":/\\(?:0(?:[0-3][0-7]{0,2}|[4-7][0-7]?)?|[1-9]\d*|x[\dA-Fa-f]{2}|u[\dA-Fa-f]{4}|c[A-Za-z]|[\s\S])|\(\?[:=!]|[?*+]\?|{\d+(?:,\d*)?}\??|[\s\S]/,
"class":/\\(?:[0-3][0-7]{0,2}|[4-7][0-7]?|x[\dA-Fa-f]{2}|u[\dA-Fa-f]{4}|c[A-Za-z]|[\s\S])|[\s\S]/},M=/\$(?:{([\w$]+)}|(\d\d?|[\s\S]))/g,N=void 0===k.exec.call(/()??/,"")[1],B=void 0!==RegExp.prototype.sticky,F={g:!0,i:!0,m:!0,y:B},D={}.toString;e=function(a,b){var c={hasNamedCapture:!1,captureNames:[]},d="default",f="",h=0,g,l;if(e.isRegExp(a)){if(void 0!==b)throw new TypeError("Cannot supply flags when copying a RegExp");return v(a,{addProto:!0})}a=void 0===a?"":String(a);b=void 0===b?"":String(b);
l=a+"***"+b;if(!w[l]){g=K(a,b);a=g.pattern;for(b=g.flags;h<a.length;){do{g=a;for(var m=b,p=h,n=d,q=c,t=A.length,J=null,r=void 0,u=void 0;t--;)if(u=A[t],(u.scope===n||"all"===u.scope)&&(!u.flag||-1<m.indexOf(u.flag))&&(r=e.exec(g,u.regex,p,"sticky"))){J={matchLength:r[0].length,output:u.handler.call(q,r,n,m),reparse:u.reparse};break}(g=J)&&g.reparse&&(a=a.slice(0,h)+g.output+a.slice(h+g.matchLength))}while(g&&g.reparse);g?(f+=g.output,h+=g.matchLength||1):(g=e.exec(a,L[d],h,"sticky")[0],f+=g,h+=g.length,
"["===g&&"default"===d?d="class":"]"===g&&"class"===d&&(d="default"))}w[l]={pattern:k.replace.call(f,/\(\?:\)(?=\(\?:\))|^\(\?:\)|\(\?:\)$/g,""),flags:k.replace.call(b,/[^gimy]+/g,""),captures:c.hasNamedCapture?c.captureNames:null}}l=w[l];return C(new RegExp(l.pattern,l.flags),l.captures,!0)};e.prototype=RegExp();e.version="3.0.0-pre";e.addToken=function(a,b,c){c=c||{};var d=c.optionalFlags,f;c.flag&&H(c.flag);if(d)for(d=k.split.call(d,""),f=0;f<d.length;++f)H(d[f]);A.push({regex:v(a,{add:"g"+(B?
"y":"")}),handler:b,scope:c.scope||"default",flag:c.flag,reparse:c.reparse});e.cache.flush("patterns")};e.cache=function(a,b){var c=a+"***"+(b||"");return z[c]||(z[c]=e(a,b))};e.cache.flush=function(a){"patterns"===a?w={}:z={}};e.escape=function(a){return k.replace.call(t(a),/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$\x26")};e.exec=function(a,b,c,d){var f="g";B&&(d||b.sticky&&!1!==d)&&(f+="y");b.xregexp=b.xregexp||{captureNames:null};f=b.xregexp[f]||(b.xregexp[f]=v(b,{add:f,remove:!1===d?"y":""}));f.lastIndex=
c=c||0;a=m.exec.call(f,a);d&&a&&a.index!==c&&(a=null);b.global&&(b.lastIndex=a?f.lastIndex:0);return a};e.forEach=function(a,b,c,d){for(var f=0,h=-1;f=e.exec(a,b,f);)c.call(d,f,++h,a,b),f=f.index+(f[0].length||1);return d};e.globalize=function(a){return v(a,{add:"g",addProto:!0})};e.install=function(a){a=G(a);!q.astral&&a.astral&&(e.cache.flush("patterns"),q.astral=!0);!q.natives&&a.natives&&I(!0)};e.isInstalled=function(a){return!!q[a]};e.isRegExp=function(a){return"[object RegExp]"===D.call(a)};
e.match=function(a,b,c){var d=b.global&&"one"!==c||"all"===c,f=(d?"g":"")+(b.sticky?"y":"");b.xregexp=b.xregexp||{captureNames:null};f=b.xregexp[f||"noGY"]||(b.xregexp[f||"noGY"]=v(b,{add:f,remove:"one"===c?"g":""}));a=k.match.call(t(a),f);b.global&&(b.lastIndex="one"===c&&a?a.index+a[0].length:0);return d?a||[]:a&&a[0]};e.matchChain=function(a,b){return function d(a,h){var g=b[h].regex?b[h]:{regex:b[h]},l=[],k=function(a){if(g.backref){if(!(a.hasOwnProperty(g.backref)||+g.backref<a.length))throw new ReferenceError("Backreference to undefined group: "+
g.backref);l.push(a[g.backref]||"")}else l.push(a[0])},p;for(p=0;p<a.length;++p)e.forEach(a[p],g.regex,k);return h!==b.length-1&&l.length?d(l,h+1):l}([a],0)};e.replace=function(a,b,c,d){var f=e.isRegExp(b),h=b.global&&"one"!==d||"all"===d,g=(h?"g":"")+(b.sticky?"y":""),l=b;f?(b.xregexp=b.xregexp||{captureNames:null},l=b.xregexp[g||"noGY"]||(b.xregexp[g||"noGY"]=v(b,{add:g,remove:"one"===d?"g":""}))):h&&(l=new RegExp(e.escape(String(b)),"g"));a=m.replace.call(t(a),l,c);f&&b.global&&(b.lastIndex=0);
return a};e.replaceEach=function(a,b){var c,d;for(c=0;c<b.length;++c)d=b[c],a=e.replace(a,d[0],d[1],d[2]);return a};e.split=function(a,b,c){return m.split.call(t(a),b,c)};e.test=function(a,b,c,d){return!!e.exec(a,b,c,d)};e.uninstall=function(a){a=G(a);q.astral&&a.astral&&(e.cache.flush("patterns"),q.astral=!1);q.natives&&a.natives&&I(!1)};e.union=function(a,b){var c=/(\()(?!\?)|\\([1-9]\d*)|\\[\s\S]|\[(?:[^\\\]]|\\[\s\S])*]/g,d=[],f=0,h,g,l,m=function(a,b,c){var d=g[f-h];if(b){if(++f,d)return"(?\x3c"+
d+"\x3e"}else if(c)return"\\"+(+c+h);return a},p;if(!y(a,"Array")||!a.length)throw new TypeError("Must provide a nonempty array of patterns to merge");for(p=0;p<a.length;++p)l=a[p],e.isRegExp(l)?(h=f,g=l.xregexp&&l.xregexp.captureNames||[],d.push(k.replace.call(e(l.source).source,c,m))):d.push(e.escape(l));return e(d.join("|"),b)};m.exec=function(a){var b=this.lastIndex,c=k.exec.apply(this,arguments),d,f;if(c){!N&&1<c.length&&-1<r(c,"")&&(d=v(this,{remove:"g"}),k.replace.call(String(a).slice(c.index),
d,function(){var a=arguments.length,b;for(b=1;b<a-2;++b)void 0===arguments[b]&&(c[b]=void 0)}));if(this.xregexp&&this.xregexp.captureNames)for(f=1;f<c.length;++f)(d=this.xregexp.captureNames[f-1])&&(c[d]=c[f]);this.global&&!c[0].length&&this.lastIndex>c.index&&(this.lastIndex=c.index)}this.global||(this.lastIndex=b);return c};m.test=function(a){return!!m.exec.call(this,a)};m.match=function(a){var b;if(!e.isRegExp(a))a=new RegExp(a);else if(a.global)return b=k.match.apply(this,arguments),a.lastIndex=
0,b;return m.exec.call(a,t(this))};m.replace=function(a,b){var c=e.isRegExp(a),d,f,h;c?(a.xregexp&&(f=a.xregexp.captureNames),d=a.lastIndex):a+="";h=y(b,"Function")?k.replace.call(String(this),a,function(){var d=arguments,e;if(f)for(d[0]=new String(d[0]),e=0;e<f.length;++e)f[e]&&(d[0][f[e]]=d[e+1]);c&&a.global&&(a.lastIndex=d[d.length-2]+d[0].length);return b.apply(void 0,d)}):k.replace.call(null==this?this:String(this),a,function(){var a=arguments;return k.replace.call(String(b),M,function(b,c,d){if(c){d=
+c;if(d<=a.length-3)return a[d]||"";d=f?r(f,c):-1;if(0>d)throw new SyntaxError("Backreference to undefined group "+b);return a[d+1]||""}if("$"===d)return"$";if("\x26"===d||0===+d)return a[0];if("`"===d)return a[a.length-1].slice(0,a[a.length-2]);if("'"===d)return a[a.length-1].slice(a[a.length-2]+a[0].length);d=+d;if(!isNaN(d)){if(d>a.length-3)throw new SyntaxError("Backreference to undefined group "+b);return a[d]||""}throw new SyntaxError("Invalid token "+b);})});c&&(a.lastIndex=a.global?0:d);return h};
m.split=function(a,b){if(!e.isRegExp(a))return k.split.apply(this,arguments);var c=String(this),d=[],f=a.lastIndex,h=0,g;b=(void 0===b?-1:b)>>>0;e.forEach(c,a,function(a){a.index+a[0].length>h&&(d.push(c.slice(h,a.index)),1<a.length&&a.index<c.length&&Array.prototype.push.apply(d,a.slice(1)),g=a[0].length,h=a.index+g)});h===c.length?k.test.call(a,"")&&!g||d.push(""):d.push(c.slice(h));a.lastIndex=f;return d.length>b?d.slice(0,b):d};n=e.addToken;n(/\\([ABCE-RTUVXYZaeg-mopqyz]|c(?![A-Za-z])|u(?![\dA-Fa-f]{4})|x(?![\dA-Fa-f]{2}))/,
function(a,b){if("B"===a[1]&&"default"===b)return a[0];throw new SyntaxError("Invalid escape "+a[0]);},{scope:"all"});n(/\[(\^?)]/,function(a){return a[1]?"[\\s\\S]":"\\b\\B"});n(/\(\?#[^)]*\)/,function(a,b,c){return E(a.input,a.index+a[0].length,c)?"":"(?:)"});n(/\s+|#.*/,function(a,b,c){return E(a.input,a.index+a[0].length,c)?"":"(?:)"},{flag:"x"});n(/\./,function(){return"[\\s\\S]"},{flag:"s"});n(/\\k<([\w$]+)>/,function(a){var b=isNaN(a[1])?r(this.captureNames,a[1])+1:+a[1],c=a.index+a[0].length;
if(!b||b>this.captureNames.length)throw new SyntaxError("Backreference to undefined group "+a[0]);return"\\"+b+(c===a.input.length||isNaN(a.input.charAt(c))?"":"(?:)")});n(/\\(\d+)/,function(a,b){if(!("default"===b&&/^[1-9]/.test(a[1])&&+a[1]<=this.captureNames.length)&&"0"!==a[1])throw new SyntaxError("Cannot use octal escape or backreference to undefined group "+a[0]);return a[0]},{scope:"all"});n(/\(\?P?<([\w$]+)>/,function(a){if(!isNaN(a[1]))throw new SyntaxError("Cannot use integer as capture name "+
a[0]);if("length"===a[1]||"__proto__"===a[1])throw new SyntaxError("Cannot use reserved word as capture name "+a[0]);if(-1<r(this.captureNames,a[1]))throw new SyntaxError("Cannot use same name for multiple groups "+a[0]);this.captureNames.push(a[1]);this.hasNamedCapture=!0;return"("});n(/\((?!\?)/,function(a,b,c){if(-1<c.indexOf("n"))return"(?:";this.captureNames.push(null);return"("},{optionalFlags:"n"});return e}();;
;/* module-key = 'com.atlassian.stash.stash-bower-components-plugin:xregexp', location = '/static/lib/xregexp/xregexp-AMD.js' */
define("xregexp",[],function(){return XRegExp});;
;/* module-key = 'com.atlassian.stash.stash-bower-components-plugin:xregexp', location = '/static/bower/xregexp/src/addons/unicode/unicode-base.js' */
(function(g){function k(b){return b.replace(/[- _]+/g,"").toLowerCase()}function l(b){for(;4>b.length;)b="0"+b;return b}function m(b){var c=/^\\[xu](.+)/.exec(b);return c?parseInt(c[1],16):b.charCodeAt("\\"===b.charAt(0)?1:0)}function n(b){var c="",a=-1,d;g.forEach(b,/(\\x..|\\u....|\\?[\s\S])(?:-(\\x..|\\u....|\\?[\s\S]))?/,function(b){d=m(b[1]);d>a+1&&(c+="\\u"+l(parseInt(a+1,10).toString(16)),d>a+2&&(c+="-\\u"+l(parseInt(d-1,10).toString(16))));a=m(b[2]||b[1])});65535>a&&(c+="\\u"+l(parseInt(a+
1,10).toString(16)),65534>a&&(c+="-\\uFFFF"));return c}var d={};g.addToken(/\\([pP])(?:{(\^?)([^}]*)}|([A-Za-z]))/,function(b,c,a){var h="P"===b[1]||!!b[2],e=-1<a.indexOf("A")||g.isInstalled("astral");a=k(b[4]||b[3]);var f=d[a];if("P"===b[1]&&b[2])throw new SyntaxError("Invalid double negation "+b[0]);if(!d.hasOwnProperty(a))throw new SyntaxError("Unknown Unicode token "+b[0]);if(f.inverseOf){a=k(f.inverseOf);if(!d.hasOwnProperty(a))throw new ReferenceError("Unicode token missing data "+b[0]+" -\x3e "+
f.inverseOf);f=d[a];h=!h}if(!f.bmp&&!e)throw new SyntaxError("Astral mode required for Unicode token "+b[0]);if(e){if("class"===c)throw new SyntaxError("Astral mode does not support Unicode tokens within character classes");b=h?"a!":"a\x3d";(c=d[a][b])||(c=d[a],a=d[a],e="",a.bmp&&!a.isBmpLast&&(e="["+a.bmp+"]"+(a.astral?"|":"")),a.astral&&(e+=a.astral),a.isBmpLast&&a.bmp&&(e+=(a.astral?"|":"")+"["+a.bmp+"]"),c=c[b]=h?"(?:(?!"+e+")(?:[\ud800-\udbff][\udc00-\udfff]|[\x00-\uffff]))":"(?:"+e+")");return c}return"class"===
c?h?d[a]["b!"]||(d[a]["b!"]=n(d[a].bmp)):f.bmp:(h?"[^":"[")+f.bmp+"]"},{scope:"all",optionalFlags:"A"});g.addUnicodeData=function(b){var c,a;for(a=0;a<b.length;++a){c=b[a];if(!c.name)throw Error("Unicode token requires name");if(!(c.inverseOf||c.bmp||c.astral))throw Error("Unicode token has no character data "+c.name);d[k(c.name)]=c;c.alias&&(d[k(c.alias)]=c)}g.cache.flush("patterns")};g.addUnicodeData([{name:"L",alias:"Letter",bmp:"A-Za-z\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2183\u2184\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005\u3006\u3031-\u3035\u303b\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6e5\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc",
astral:"\ud802[\udc00-\udc05\udc08\udc0a-\udc35\udc37\udc38\udc3c\udc3f-\udc55\udd00-\udd15\udd20-\udd39\udd80-\uddb7\uddbe\uddbf\ude00\ude10-\ude13\ude15-\ude17\ude19-\ude33\ude60-\ude7c\udf00-\udf35\udf40-\udf55\udf60-\udf72]|\ud801[\udc00-\udc9d]|\ud800[\udc00-\udc0b\udc0d-\udc26\udc28-\udc3a\udc3c\udc3d\udc3f-\udc4d\udc50-\udc5d\udc80-\udcfa\ude80-\ude9c\udea0-\uded0\udf00-\udf1e\udf30-\udf40\udf42-\udf49\udf80-\udf9d\udfa0-\udfc3\udfc8-\udfcf]|\ud81a[\udc00-\ude38]|\ud804[\udc03-\udc37\udc83-\udcaf\udcd0-\udce8\udd03-\udd26\udd83-\uddb2\uddc1-\uddc4]|\ud86e[\udc00-\udc1d]|\ud86d[\udc00-\udf34\udf40-\udfff]|\ud803[\udc00-\udc48]|\ud80d[\udc00-\udc2e]|\ud805[\ude80-\udeaa]|\ud87e[\udc00-\ude1d]|\ud81b[\udf00-\udf44\udf50\udf93-\udf9f]|\ud869[\udc00-\uded6\udf00-\udfff]|\ud82c[\udc00\udc01]|[\ud80c\ud840-\ud868\ud86a-\ud86c][\udc00-\udfff]|\ud83b[\ude00-\ude03\ude05-\ude1f\ude21\ude22\ude24\ude27\ude29-\ude32\ude34-\ude37\ude39\ude3b\ude42\ude47\ude49\ude4b\ude4d-\ude4f\ude51\ude52\ude54\ude57\ude59\ude5b\ude5d\ude5f\ude61\ude62\ude64\ude67-\ude6a\ude6c-\ude72\ude74-\ude77\ude79-\ude7c\ude7e\ude80-\ude89\ude8b-\ude9b\udea1-\udea3\udea5-\udea9\udeab-\udebb]|\ud835[\udc00-\udc54\udc56-\udc9c\udc9e\udc9f\udca2\udca5\udca6\udca9-\udcac\udcae-\udcb9\udcbb\udcbd-\udcc3\udcc5-\udd05\udd07-\udd0a\udd0d-\udd14\udd16-\udd1c\udd1e-\udd39\udd3b-\udd3e\udd40-\udd44\udd46\udd4a-\udd50\udd52-\udea5\udea8-\udec0\udec2-\udeda\udedc-\udefa\udefc-\udf14\udf16-\udf34\udf36-\udf4e\udf50-\udf6e\udf70-\udf88\udf8a-\udfa8\udfaa-\udfc2\udfc4-\udfcb]|\ud808[\udc00-\udf6e]"}])})(XRegExp);;
;/* module-key = 'com.atlassian.stash.stash-bower-components-plugin:xregexp', location = '/static/bower/xregexp/src/addons/unicode/unicode-categories.js' */
(function(a){if(!a.addUnicodeData)throw new ReferenceError("Unicode Base must be loaded before Unicode Categories");a.addUnicodeData([{name:"C",alias:"Other",isBmpLast:!0,bmp:"\x00-\u001f\u007f-\u009f\u00ad\u0378\u0379\u037f-\u0383\u038b\u038d\u03a2\u0528-\u0530\u0557\u0558\u0560\u0588\u058b-\u058e\u0590\u05c8-\u05cf\u05eb-\u05ef\u05f5-\u0605\u061c\u061d\u06dd\u070e\u070f\u074b\u074c\u07b2-\u07bf\u07fb-\u07ff\u082e\u082f\u083f\u085c\u085d\u085f-\u089f\u08a1\u08ad-\u08e3\u08ff\u0978\u0980\u0984\u098d\u098e\u0991\u0992\u09a9\u09b1\u09b3-\u09b5\u09ba\u09bb\u09c5\u09c6\u09c9\u09ca\u09cf-\u09d6\u09d8-\u09db\u09de\u09e4\u09e5\u09fc-\u0a00\u0a04\u0a0b-\u0a0e\u0a11\u0a12\u0a29\u0a31\u0a34\u0a37\u0a3a\u0a3b\u0a3d\u0a43-\u0a46\u0a49\u0a4a\u0a4e-\u0a50\u0a52-\u0a58\u0a5d\u0a5f-\u0a65\u0a76-\u0a80\u0a84\u0a8e\u0a92\u0aa9\u0ab1\u0ab4\u0aba\u0abb\u0ac6\u0aca\u0ace\u0acf\u0ad1-\u0adf\u0ae4\u0ae5\u0af2-\u0b00\u0b04\u0b0d\u0b0e\u0b11\u0b12\u0b29\u0b31\u0b34\u0b3a\u0b3b\u0b45\u0b46\u0b49\u0b4a\u0b4e-\u0b55\u0b58-\u0b5b\u0b5e\u0b64\u0b65\u0b78-\u0b81\u0b84\u0b8b-\u0b8d\u0b91\u0b96-\u0b98\u0b9b\u0b9d\u0ba0-\u0ba2\u0ba5-\u0ba7\u0bab-\u0bad\u0bba-\u0bbd\u0bc3-\u0bc5\u0bc9\u0bce\u0bcf\u0bd1-\u0bd6\u0bd8-\u0be5\u0bfb-\u0c00\u0c04\u0c0d\u0c11\u0c29\u0c34\u0c3a-\u0c3c\u0c45\u0c49\u0c4e-\u0c54\u0c57\u0c5a-\u0c5f\u0c64\u0c65\u0c70-\u0c77\u0c80\u0c81\u0c84\u0c8d\u0c91\u0ca9\u0cb4\u0cba\u0cbb\u0cc5\u0cc9\u0cce-\u0cd4\u0cd7-\u0cdd\u0cdf\u0ce4\u0ce5\u0cf0\u0cf3-\u0d01\u0d04\u0d0d\u0d11\u0d3b\u0d3c\u0d45\u0d49\u0d4f-\u0d56\u0d58-\u0d5f\u0d64\u0d65\u0d76-\u0d78\u0d80\u0d81\u0d84\u0d97-\u0d99\u0db2\u0dbc\u0dbe\u0dbf\u0dc7-\u0dc9\u0dcb-\u0dce\u0dd5\u0dd7\u0de0-\u0df1\u0df5-\u0e00\u0e3b-\u0e3e\u0e5c-\u0e80\u0e83\u0e85\u0e86\u0e89\u0e8b\u0e8c\u0e8e-\u0e93\u0e98\u0ea0\u0ea4\u0ea6\u0ea8\u0ea9\u0eac\u0eba\u0ebe\u0ebf\u0ec5\u0ec7\u0ece\u0ecf\u0eda\u0edb\u0ee0-\u0eff\u0f48\u0f6d-\u0f70\u0f98\u0fbd\u0fcd\u0fdb-\u0fff\u10c6\u10c8-\u10cc\u10ce\u10cf\u1249\u124e\u124f\u1257\u1259\u125e\u125f\u1289\u128e\u128f\u12b1\u12b6\u12b7\u12bf\u12c1\u12c6\u12c7\u12d7\u1311\u1316\u1317\u135b\u135c\u137d-\u137f\u139a-\u139f\u13f5-\u13ff\u169d-\u169f\u16f1-\u16ff\u170d\u1715-\u171f\u1737-\u173f\u1754-\u175f\u176d\u1771\u1774-\u177f\u17de\u17df\u17ea-\u17ef\u17fa-\u17ff\u180f\u181a-\u181f\u1878-\u187f\u18ab-\u18af\u18f6-\u18ff\u191d-\u191f\u192c-\u192f\u193c-\u193f\u1941-\u1943\u196e\u196f\u1975-\u197f\u19ac-\u19af\u19ca-\u19cf\u19db-\u19dd\u1a1c\u1a1d\u1a5f\u1a7d\u1a7e\u1a8a-\u1a8f\u1a9a-\u1a9f\u1aae-\u1aff\u1b4c-\u1b4f\u1b7d-\u1b7f\u1bf4-\u1bfb\u1c38-\u1c3a\u1c4a-\u1c4c\u1c80-\u1cbf\u1cc8-\u1ccf\u1cf7-\u1cff\u1de7-\u1dfb\u1f16\u1f17\u1f1e\u1f1f\u1f46\u1f47\u1f4e\u1f4f\u1f58\u1f5a\u1f5c\u1f5e\u1f7e\u1f7f\u1fb5\u1fc5\u1fd4\u1fd5\u1fdc\u1ff0\u1ff1\u1ff5\u1fff\u200b-\u200f\u202a-\u202e\u2060-\u206f\u2072\u2073\u208f\u209d-\u209f\u20bb-\u20cf\u20f1-\u20ff\u218a-\u218f\u23f4-\u23ff\u2427-\u243f\u244b-\u245f\u2700\u2b4d-\u2b4f\u2b5a-\u2bff\u2c2f\u2c5f\u2cf4-\u2cf8\u2d26\u2d28-\u2d2c\u2d2e\u2d2f\u2d68-\u2d6e\u2d71-\u2d7e\u2d97-\u2d9f\u2da7\u2daf\u2db7\u2dbf\u2dc7\u2dcf\u2dd7\u2ddf\u2e3c-\u2e7f\u2e9a\u2ef4-\u2eff\u2fd6-\u2fef\u2ffc-\u2fff\u3040\u3097\u3098\u3100-\u3104\u312e-\u3130\u318f\u31bb-\u31bf\u31e4-\u31ef\u321f\u32ff\u4db6-\u4dbf\u9fcd-\u9fff\ua48d-\ua48f\ua4c7-\ua4cf\ua62c-\ua63f\ua698-\ua69e\ua6f8-\ua6ff\ua78f\ua794-\ua79f\ua7ab-\ua7f7\ua82c-\ua82f\ua83a-\ua83f\ua878-\ua87f\ua8c5-\ua8cd\ua8da-\ua8df\ua8fc-\ua8ff\ua954-\ua95e\ua97d-\ua97f\ua9ce\ua9da-\ua9dd\ua9e0-\ua9ff\uaa37-\uaa3f\uaa4e\uaa4f\uaa5a\uaa5b\uaa7c-\uaa7f\uaac3-\uaada\uaaf7-\uab00\uab07\uab08\uab0f\uab10\uab17-\uab1f\uab27\uab2f-\uabbf\uabee\uabef\uabfa-\uabff\ud7a4-\ud7af\ud7c7-\ud7ca\ud7fc-\uf8ff\ufa6e\ufa6f\ufada-\ufaff\ufb07-\ufb12\ufb18-\ufb1c\ufb37\ufb3d\ufb3f\ufb42\ufb45\ufbc2-\ufbd2\ufd40-\ufd4f\ufd90\ufd91\ufdc8-\ufdef\ufdfe\ufdff\ufe1a-\ufe1f\ufe27-\ufe2f\ufe53\ufe67\ufe6c-\ufe6f\ufe75\ufefd-\uff00\uffbf-\uffc1\uffc8\uffc9\uffd0\uffd1\uffd8\uffd9\uffdd-\uffdf\uffe7\uffef-\ufffb\ufffe\uffff",
astral:"\ud808[\udf6f-\udfff]|\ud809[\udc63-\udc6f\udc74-\udfff]|\ud804[\udc4e-\udc51\udc70-\udc7f\udcbd\udcc2-\udccf\udce9-\udcef\udcfa-\udcff\udd35\udd44-\udd7f\uddc9-\uddcf\uddda-\udfff]|\ud802[\udc06\udc07\udc09\udc36\udc39-\udc3b\udc3d\udc3e\udc56\udc60-\udcff\udd1c-\udd1e\udd3a-\udd3e\udd40-\udd7f\uddb8-\uddbd\uddc0-\uddff\ude04\ude07-\ude0b\ude14\ude18\ude34-\ude37\ude3b-\ude3e\ude48-\ude4f\ude59-\ude5f\ude80-\udeff\udf36-\udf38\udf56\udf57\udf73-\udf77\udf80-\udfff]|\ud86d[\udf35-\udf3f]|\ud81b[\udc00-\udeff\udf45-\udf4f\udf7f-\udf8e\udfa0-\udfff]|\ud86e[\udc1e-\udfff]|\ud800[\udc0c\udc27\udc3b\udc3e\udc4e\udc4f\udc5e-\udc7f\udcfb-\udcff\udd03-\udd06\udd34-\udd36\udd8b-\udd8f\udd9c-\uddcf\uddfe-\ude7f\ude9d-\ude9f\uded1-\udeff\udf1f\udf24-\udf2f\udf4b-\udf7f\udf9e\udfc4-\udfc7\udfd6-\udfff]|\ud869[\uded7-\udeff]|\ud83b[\udc00-\uddff\ude04\ude20\ude23\ude25\ude26\ude28\ude33\ude38\ude3a\ude3c-\ude41\ude43-\ude46\ude48\ude4a\ude4c\ude50\ude53\ude55\ude56\ude58\ude5a\ude5c\ude5e\ude60\ude63\ude65\ude66\ude6b\ude73\ude78\ude7d\ude7f\ude8a\ude9c-\udea0\udea4\udeaa\udebc-\udeef\udef2-\udfff]|\ud87e[\ude1e-\udfff]|\udb40[\udc00-\udcff\uddf0-\udfff]|\ud803[\udc49-\ude5f\ude7f-\udfff]|\ud80d[\udc2f-\udfff]|[\ud806\ud807\ud80a\ud80b\ud80e-\ud819\ud81c-\ud82b\ud82d-\ud833\ud836-\ud83a\ud83e\ud83f\ud86f-\ud87d\ud87f-\udb3f\udb41-\udbff][\udc00-\udfff]|\ud83d[\udc3f\udc41\udcf8\udcfd-\udcff\udd3e\udd3f\udd44-\udd4f\udd68-\uddfa\ude41-\ude44\ude50-\ude7f\udec6-\udeff\udf74-\udfff]|\ud83c[\udc2c-\udc2f\udc94-\udc9f\udcaf\udcb0\udcbf\udcc0\udcd0\udce0-\udcff\udd0b-\udd0f\udd2f\udd6c-\udd6f\udd9b-\udde5\ude03-\ude0f\ude3b-\ude3f\ude49-\ude4f\ude52-\udeff\udf21-\udf2f\udf36\udf7d-\udf7f\udf94-\udf9f\udfc5\udfcb-\udfdf\udff1-\udfff]|\ud835[\udc55\udc9d\udca0\udca1\udca3\udca4\udca7\udca8\udcad\udcba\udcbc\udcc4\udd06\udd0b\udd0c\udd15\udd1d\udd3a\udd3f\udd45\udd47-\udd49\udd51\udea6\udea7\udfcc\udfcd]|\ud81a[\ude39-\udfff]|\ud834[\udcf6-\udcff\udd27\udd28\udd73-\udd7a\uddde-\uddff\ude46-\udeff\udf57-\udf5f\udf72-\udfff]|\ud801[\udc9e\udc9f\udcaa-\udfff]|\ud805[\udc00-\ude7f\udeb8-\udebf\udeca-\udfff]|\ud82c[\udc02-\udfff]"},
{name:"Cc",alias:"Control",bmp:"\x00-\u001f\u007f-\u009f"},{name:"Cf",alias:"Format",bmp:"\u00ad\u0600-\u0604\u06dd\u070f\u200b-\u200f\u202a-\u202e\u2060-\u2064\u206a-\u206f\ufeff\ufff9-\ufffb",astral:"\udb40[\udc01\udc20-\udc7f]|\ud834[\udd73-\udd7a]|\ud804\udcbd"},{name:"Cn",alias:"Unassigned",bmp:"\u0378\u0379\u037f-\u0383\u038b\u038d\u03a2\u0528-\u0530\u0557\u0558\u0560\u0588\u058b-\u058e\u0590\u05c8-\u05cf\u05eb-\u05ef\u05f5-\u05ff\u0605\u061c\u061d\u070e\u074b\u074c\u07b2-\u07bf\u07fb-\u07ff\u082e\u082f\u083f\u085c\u085d\u085f-\u089f\u08a1\u08ad-\u08e3\u08ff\u0978\u0980\u0984\u098d\u098e\u0991\u0992\u09a9\u09b1\u09b3-\u09b5\u09ba\u09bb\u09c5\u09c6\u09c9\u09ca\u09cf-\u09d6\u09d8-\u09db\u09de\u09e4\u09e5\u09fc-\u0a00\u0a04\u0a0b-\u0a0e\u0a11\u0a12\u0a29\u0a31\u0a34\u0a37\u0a3a\u0a3b\u0a3d\u0a43-\u0a46\u0a49\u0a4a\u0a4e-\u0a50\u0a52-\u0a58\u0a5d\u0a5f-\u0a65\u0a76-\u0a80\u0a84\u0a8e\u0a92\u0aa9\u0ab1\u0ab4\u0aba\u0abb\u0ac6\u0aca\u0ace\u0acf\u0ad1-\u0adf\u0ae4\u0ae5\u0af2-\u0b00\u0b04\u0b0d\u0b0e\u0b11\u0b12\u0b29\u0b31\u0b34\u0b3a\u0b3b\u0b45\u0b46\u0b49\u0b4a\u0b4e-\u0b55\u0b58-\u0b5b\u0b5e\u0b64\u0b65\u0b78-\u0b81\u0b84\u0b8b-\u0b8d\u0b91\u0b96-\u0b98\u0b9b\u0b9d\u0ba0-\u0ba2\u0ba5-\u0ba7\u0bab-\u0bad\u0bba-\u0bbd\u0bc3-\u0bc5\u0bc9\u0bce\u0bcf\u0bd1-\u0bd6\u0bd8-\u0be5\u0bfb-\u0c00\u0c04\u0c0d\u0c11\u0c29\u0c34\u0c3a-\u0c3c\u0c45\u0c49\u0c4e-\u0c54\u0c57\u0c5a-\u0c5f\u0c64\u0c65\u0c70-\u0c77\u0c80\u0c81\u0c84\u0c8d\u0c91\u0ca9\u0cb4\u0cba\u0cbb\u0cc5\u0cc9\u0cce-\u0cd4\u0cd7-\u0cdd\u0cdf\u0ce4\u0ce5\u0cf0\u0cf3-\u0d01\u0d04\u0d0d\u0d11\u0d3b\u0d3c\u0d45\u0d49\u0d4f-\u0d56\u0d58-\u0d5f\u0d64\u0d65\u0d76-\u0d78\u0d80\u0d81\u0d84\u0d97-\u0d99\u0db2\u0dbc\u0dbe\u0dbf\u0dc7-\u0dc9\u0dcb-\u0dce\u0dd5\u0dd7\u0de0-\u0df1\u0df5-\u0e00\u0e3b-\u0e3e\u0e5c-\u0e80\u0e83\u0e85\u0e86\u0e89\u0e8b\u0e8c\u0e8e-\u0e93\u0e98\u0ea0\u0ea4\u0ea6\u0ea8\u0ea9\u0eac\u0eba\u0ebe\u0ebf\u0ec5\u0ec7\u0ece\u0ecf\u0eda\u0edb\u0ee0-\u0eff\u0f48\u0f6d-\u0f70\u0f98\u0fbd\u0fcd\u0fdb-\u0fff\u10c6\u10c8-\u10cc\u10ce\u10cf\u1249\u124e\u124f\u1257\u1259\u125e\u125f\u1289\u128e\u128f\u12b1\u12b6\u12b7\u12bf\u12c1\u12c6\u12c7\u12d7\u1311\u1316\u1317\u135b\u135c\u137d-\u137f\u139a-\u139f\u13f5-\u13ff\u169d-\u169f\u16f1-\u16ff\u170d\u1715-\u171f\u1737-\u173f\u1754-\u175f\u176d\u1771\u1774-\u177f\u17de\u17df\u17ea-\u17ef\u17fa-\u17ff\u180f\u181a-\u181f\u1878-\u187f\u18ab-\u18af\u18f6-\u18ff\u191d-\u191f\u192c-\u192f\u193c-\u193f\u1941-\u1943\u196e\u196f\u1975-\u197f\u19ac-\u19af\u19ca-\u19cf\u19db-\u19dd\u1a1c\u1a1d\u1a5f\u1a7d\u1a7e\u1a8a-\u1a8f\u1a9a-\u1a9f\u1aae-\u1aff\u1b4c-\u1b4f\u1b7d-\u1b7f\u1bf4-\u1bfb\u1c38-\u1c3a\u1c4a-\u1c4c\u1c80-\u1cbf\u1cc8-\u1ccf\u1cf7-\u1cff\u1de7-\u1dfb\u1f16\u1f17\u1f1e\u1f1f\u1f46\u1f47\u1f4e\u1f4f\u1f58\u1f5a\u1f5c\u1f5e\u1f7e\u1f7f\u1fb5\u1fc5\u1fd4\u1fd5\u1fdc\u1ff0\u1ff1\u1ff5\u1fff\u2065-\u2069\u2072\u2073\u208f\u209d-\u209f\u20bb-\u20cf\u20f1-\u20ff\u218a-\u218f\u23f4-\u23ff\u2427-\u243f\u244b-\u245f\u2700\u2b4d-\u2b4f\u2b5a-\u2bff\u2c2f\u2c5f\u2cf4-\u2cf8\u2d26\u2d28-\u2d2c\u2d2e\u2d2f\u2d68-\u2d6e\u2d71-\u2d7e\u2d97-\u2d9f\u2da7\u2daf\u2db7\u2dbf\u2dc7\u2dcf\u2dd7\u2ddf\u2e3c-\u2e7f\u2e9a\u2ef4-\u2eff\u2fd6-\u2fef\u2ffc-\u2fff\u3040\u3097\u3098\u3100-\u3104\u312e-\u3130\u318f\u31bb-\u31bf\u31e4-\u31ef\u321f\u32ff\u4db6-\u4dbf\u9fcd-\u9fff\ua48d-\ua48f\ua4c7-\ua4cf\ua62c-\ua63f\ua698-\ua69e\ua6f8-\ua6ff\ua78f\ua794-\ua79f\ua7ab-\ua7f7\ua82c-\ua82f\ua83a-\ua83f\ua878-\ua87f\ua8c5-\ua8cd\ua8da-\ua8df\ua8fc-\ua8ff\ua954-\ua95e\ua97d-\ua97f\ua9ce\ua9da-\ua9dd\ua9e0-\ua9ff\uaa37-\uaa3f\uaa4e\uaa4f\uaa5a\uaa5b\uaa7c-\uaa7f\uaac3-\uaada\uaaf7-\uab00\uab07\uab08\uab0f\uab10\uab17-\uab1f\uab27\uab2f-\uabbf\uabee\uabef\uabfa-\uabff\ud7a4-\ud7af\ud7c7-\ud7ca\ud7fc-\ud7ff\ufa6e\ufa6f\ufada-\ufaff\ufb07-\ufb12\ufb18-\ufb1c\ufb37\ufb3d\ufb3f\ufb42\ufb45\ufbc2-\ufbd2\ufd40-\ufd4f\ufd90\ufd91\ufdc8-\ufdef\ufdfe\ufdff\ufe1a-\ufe1f\ufe27-\ufe2f\ufe53\ufe67\ufe6c-\ufe6f\ufe75\ufefd\ufefe\uff00\uffbf-\uffc1\uffc8\uffc9\uffd0\uffd1\uffd8\uffd9\uffdd-\uffdf\uffe7\uffef-\ufff8\ufffe\uffff",
astral:"\ud808[\udf6f-\udfff]|\udb40[\udc00\udc02-\udc1f\udc80-\udcff\uddf0-\udfff]|\ud834[\udcf6-\udcff\udd27\udd28\uddde-\uddff\ude46-\udeff\udf57-\udf5f\udf72-\udfff]|\ud802[\udc06\udc07\udc09\udc36\udc39-\udc3b\udc3d\udc3e\udc56\udc60-\udcff\udd1c-\udd1e\udd3a-\udd3e\udd40-\udd7f\uddb8-\uddbd\uddc0-\uddff\ude04\ude07-\ude0b\ude14\ude18\ude34-\ude37\ude3b-\ude3e\ude48-\ude4f\ude59-\ude5f\ude80-\udeff\udf36-\udf38\udf56\udf57\udf73-\udf77\udf80-\udfff]|\ud86d[\udf35-\udf3f]|\ud81b[\udc00-\udeff\udf45-\udf4f\udf7f-\udf8e\udfa0-\udfff]|\ud809[\udc63-\udc6f\udc74-\udfff]|\ud800[\udc0c\udc27\udc3b\udc3e\udc4e\udc4f\udc5e-\udc7f\udcfb-\udcff\udd03-\udd06\udd34-\udd36\udd8b-\udd8f\udd9c-\uddcf\uddfe-\ude7f\ude9d-\ude9f\uded1-\udeff\udf1f\udf24-\udf2f\udf4b-\udf7f\udf9e\udfc4-\udfc7\udfd6-\udfff]|\ud869[\uded7-\udeff]|\ud804[\udc4e-\udc51\udc70-\udc7f\udcc2-\udccf\udce9-\udcef\udcfa-\udcff\udd35\udd44-\udd7f\uddc9-\uddcf\uddda-\udfff]|\ud83b[\udc00-\uddff\ude04\ude20\ude23\ude25\ude26\ude28\ude33\ude38\ude3a\ude3c-\ude41\ude43-\ude46\ude48\ude4a\ude4c\ude50\ude53\ude55\ude56\ude58\ude5a\ude5c\ude5e\ude60\ude63\ude65\ude66\ude6b\ude73\ude78\ude7d\ude7f\ude8a\ude9c-\udea0\udea4\udeaa\udebc-\udeef\udef2-\udfff]|[\udbbf\udbff][\udffe\udfff]|\ud87e[\ude1e-\udfff]|\ud803[\udc49-\ude5f\ude7f-\udfff]|\ud80d[\udc2f-\udfff]|[\ud806\ud807\ud80a\ud80b\ud80e-\ud819\ud81c-\ud82b\ud82d-\ud833\ud836-\ud83a\ud83e\ud83f\ud86f-\ud87d\ud87f-\udb3f\udb41-\udb7f][\udc00-\udfff]|\ud83d[\udc3f\udc41\udcf8\udcfd-\udcff\udd3e\udd3f\udd44-\udd4f\udd68-\uddfa\ude41-\ude44\ude50-\ude7f\udec6-\udeff\udf74-\udfff]|\ud86e[\udc1e-\udfff]|\ud83c[\udc2c-\udc2f\udc94-\udc9f\udcaf\udcb0\udcbf\udcc0\udcd0\udce0-\udcff\udd0b-\udd0f\udd2f\udd6c-\udd6f\udd9b-\udde5\ude03-\ude0f\ude3b-\ude3f\ude49-\ude4f\ude52-\udeff\udf21-\udf2f\udf36\udf7d-\udf7f\udf94-\udf9f\udfc5\udfcb-\udfdf\udff1-\udfff]|\ud835[\udc55\udc9d\udca0\udca1\udca3\udca4\udca7\udca8\udcad\udcba\udcbc\udcc4\udd06\udd0b\udd0c\udd15\udd1d\udd3a\udd3f\udd45\udd47-\udd49\udd51\udea6\udea7\udfcc\udfcd]|\ud81a[\ude39-\udfff]|\ud801[\udc9e\udc9f\udcaa-\udfff]|\ud805[\udc00-\ude7f\udeb8-\udebf\udeca-\udfff]|\ud82c[\udc02-\udfff]"},
{name:"Co",alias:"Private_Use",bmp:"\ue000-\uf8ff",astral:"[\udb80-\udbbe\udbc0-\udbfe][\udc00-\udfff]|[\udbbf\udbff][\udc00-\udffd]"},{name:"Cs",alias:"Surrogate",bmp:"\ud800-\udfff"},{name:"Ll",alias:"Lowercase_Letter",bmp:"a-z\u00b5\u00df-\u00f6\u00f8-\u00ff\u0101\u0103\u0105\u0107\u0109\u010b\u010d\u010f\u0111\u0113\u0115\u0117\u0119\u011b\u011d\u011f\u0121\u0123\u0125\u0127\u0129\u012b\u012d\u012f\u0131\u0133\u0135\u0137\u0138\u013a\u013c\u013e\u0140\u0142\u0144\u0146\u0148\u0149\u014b\u014d\u014f\u0151\u0153\u0155\u0157\u0159\u015b\u015d\u015f\u0161\u0163\u0165\u0167\u0169\u016b\u016d\u016f\u0171\u0173\u0175\u0177\u017a\u017c\u017e-\u0180\u0183\u0185\u0188\u018c\u018d\u0192\u0195\u0199-\u019b\u019e\u01a1\u01a3\u01a5\u01a8\u01aa\u01ab\u01ad\u01b0\u01b4\u01b6\u01b9\u01ba\u01bd-\u01bf\u01c6\u01c9\u01cc\u01ce\u01d0\u01d2\u01d4\u01d6\u01d8\u01da\u01dc\u01dd\u01df\u01e1\u01e3\u01e5\u01e7\u01e9\u01eb\u01ed\u01ef\u01f0\u01f3\u01f5\u01f9\u01fb\u01fd\u01ff\u0201\u0203\u0205\u0207\u0209\u020b\u020d\u020f\u0211\u0213\u0215\u0217\u0219\u021b\u021d\u021f\u0221\u0223\u0225\u0227\u0229\u022b\u022d\u022f\u0231\u0233-\u0239\u023c\u023f\u0240\u0242\u0247\u0249\u024b\u024d\u024f-\u0293\u0295-\u02af\u0371\u0373\u0377\u037b-\u037d\u0390\u03ac-\u03ce\u03d0\u03d1\u03d5-\u03d7\u03d9\u03db\u03dd\u03df\u03e1\u03e3\u03e5\u03e7\u03e9\u03eb\u03ed\u03ef-\u03f3\u03f5\u03f8\u03fb\u03fc\u0430-\u045f\u0461\u0463\u0465\u0467\u0469\u046b\u046d\u046f\u0471\u0473\u0475\u0477\u0479\u047b\u047d\u047f\u0481\u048b\u048d\u048f\u0491\u0493\u0495\u0497\u0499\u049b\u049d\u049f\u04a1\u04a3\u04a5\u04a7\u04a9\u04ab\u04ad\u04af\u04b1\u04b3\u04b5\u04b7\u04b9\u04bb\u04bd\u04bf\u04c2\u04c4\u04c6\u04c8\u04ca\u04cc\u04ce\u04cf\u04d1\u04d3\u04d5\u04d7\u04d9\u04db\u04dd\u04df\u04e1\u04e3\u04e5\u04e7\u04e9\u04eb\u04ed\u04ef\u04f1\u04f3\u04f5\u04f7\u04f9\u04fb\u04fd\u04ff\u0501\u0503\u0505\u0507\u0509\u050b\u050d\u050f\u0511\u0513\u0515\u0517\u0519\u051b\u051d\u051f\u0521\u0523\u0525\u0527\u0561-\u0587\u1d00-\u1d2b\u1d6b-\u1d77\u1d79-\u1d9a\u1e01\u1e03\u1e05\u1e07\u1e09\u1e0b\u1e0d\u1e0f\u1e11\u1e13\u1e15\u1e17\u1e19\u1e1b\u1e1d\u1e1f\u1e21\u1e23\u1e25\u1e27\u1e29\u1e2b\u1e2d\u1e2f\u1e31\u1e33\u1e35\u1e37\u1e39\u1e3b\u1e3d\u1e3f\u1e41\u1e43\u1e45\u1e47\u1e49\u1e4b\u1e4d\u1e4f\u1e51\u1e53\u1e55\u1e57\u1e59\u1e5b\u1e5d\u1e5f\u1e61\u1e63\u1e65\u1e67\u1e69\u1e6b\u1e6d\u1e6f\u1e71\u1e73\u1e75\u1e77\u1e79\u1e7b\u1e7d\u1e7f\u1e81\u1e83\u1e85\u1e87\u1e89\u1e8b\u1e8d\u1e8f\u1e91\u1e93\u1e95-\u1e9d\u1e9f\u1ea1\u1ea3\u1ea5\u1ea7\u1ea9\u1eab\u1ead\u1eaf\u1eb1\u1eb3\u1eb5\u1eb7\u1eb9\u1ebb\u1ebd\u1ebf\u1ec1\u1ec3\u1ec5\u1ec7\u1ec9\u1ecb\u1ecd\u1ecf\u1ed1\u1ed3\u1ed5\u1ed7\u1ed9\u1edb\u1edd\u1edf\u1ee1\u1ee3\u1ee5\u1ee7\u1ee9\u1eeb\u1eed\u1eef\u1ef1\u1ef3\u1ef5\u1ef7\u1ef9\u1efb\u1efd\u1eff-\u1f07\u1f10-\u1f15\u1f20-\u1f27\u1f30-\u1f37\u1f40-\u1f45\u1f50-\u1f57\u1f60-\u1f67\u1f70-\u1f7d\u1f80-\u1f87\u1f90-\u1f97\u1fa0-\u1fa7\u1fb0-\u1fb4\u1fb6\u1fb7\u1fbe\u1fc2-\u1fc4\u1fc6\u1fc7\u1fd0-\u1fd3\u1fd6\u1fd7\u1fe0-\u1fe7\u1ff2-\u1ff4\u1ff6\u1ff7\u210a\u210e\u210f\u2113\u212f\u2134\u2139\u213c\u213d\u2146-\u2149\u214e\u2184\u2c30-\u2c5e\u2c61\u2c65\u2c66\u2c68\u2c6a\u2c6c\u2c71\u2c73\u2c74\u2c76-\u2c7b\u2c81\u2c83\u2c85\u2c87\u2c89\u2c8b\u2c8d\u2c8f\u2c91\u2c93\u2c95\u2c97\u2c99\u2c9b\u2c9d\u2c9f\u2ca1\u2ca3\u2ca5\u2ca7\u2ca9\u2cab\u2cad\u2caf\u2cb1\u2cb3\u2cb5\u2cb7\u2cb9\u2cbb\u2cbd\u2cbf\u2cc1\u2cc3\u2cc5\u2cc7\u2cc9\u2ccb\u2ccd\u2ccf\u2cd1\u2cd3\u2cd5\u2cd7\u2cd9\u2cdb\u2cdd\u2cdf\u2ce1\u2ce3\u2ce4\u2cec\u2cee\u2cf3\u2d00-\u2d25\u2d27\u2d2d\ua641\ua643\ua645\ua647\ua649\ua64b\ua64d\ua64f\ua651\ua653\ua655\ua657\ua659\ua65b\ua65d\ua65f\ua661\ua663\ua665\ua667\ua669\ua66b\ua66d\ua681\ua683\ua685\ua687\ua689\ua68b\ua68d\ua68f\ua691\ua693\ua695\ua697\ua723\ua725\ua727\ua729\ua72b\ua72d\ua72f-\ua731\ua733\ua735\ua737\ua739\ua73b\ua73d\ua73f\ua741\ua743\ua745\ua747\ua749\ua74b\ua74d\ua74f\ua751\ua753\ua755\ua757\ua759\ua75b\ua75d\ua75f\ua761\ua763\ua765\ua767\ua769\ua76b\ua76d\ua76f\ua771-\ua778\ua77a\ua77c\ua77f\ua781\ua783\ua785\ua787\ua78c\ua78e\ua791\ua793\ua7a1\ua7a3\ua7a5\ua7a7\ua7a9\ua7fa\ufb00-\ufb06\ufb13-\ufb17\uff41-\uff5a",
astral:"\ud835[\udc1a-\udc33\udc4e-\udc54\udc56-\udc67\udc82-\udc9b\udcb6-\udcb9\udcbb\udcbd-\udcc3\udcc5-\udccf\udcea-\udd03\udd1e-\udd37\udd52-\udd6b\udd86-\udd9f\uddba-\uddd3\uddee-\ude07\ude22-\ude3b\ude56-\ude6f\ude8a-\udea5\udec2-\udeda\udedc-\udee1\udefc-\udf14\udf16-\udf1b\udf36-\udf4e\udf50-\udf55\udf70-\udf88\udf8a-\udf8f\udfaa-\udfc2\udfc4-\udfc9\udfcb]|\ud801[\udc28-\udc4f]"},{name:"Lm",alias:"Modifier_Letter",bmp:"\u02b0-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0374\u037a\u0559\u0640\u06e5\u06e6\u07f4\u07f5\u07fa\u081a\u0824\u0828\u0971\u0e46\u0ec6\u10fc\u17d7\u1843\u1aa7\u1c78-\u1c7d\u1d2c-\u1d6a\u1d78\u1d9b-\u1dbf\u2071\u207f\u2090-\u209c\u2c7c\u2c7d\u2d6f\u2e2f\u3005\u3031-\u3035\u303b\u309d\u309e\u30fc-\u30fe\ua015\ua4f8-\ua4fd\ua60c\ua67f\ua717-\ua71f\ua770\ua788\ua7f8\ua7f9\ua9cf\uaa70\uaadd\uaaf3\uaaf4\uff70\uff9e\uff9f",
astral:"\ud81b[\udf93-\udf9f]"},{name:"Lo",alias:"Other_Letter",bmp:"\u00aa\u00ba\u01bb\u01c0-\u01c3\u0294\u05d0-\u05ea\u05f0-\u05f2\u0620-\u063f\u0641-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u0800-\u0815\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0972-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e45\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10d0-\u10fa\u10fd-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17dc\u1820-\u1842\u1844-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c77\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u2135-\u2138\u2d30-\u2d67\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u3006\u303c\u3041-\u3096\u309f\u30a1-\u30fa\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua014\ua016-\ua48c\ua4d0-\ua4f7\ua500-\ua60b\ua610-\ua61f\ua62a\ua62b\ua66e\ua6a0-\ua6e5\ua7fb-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa6f\uaa71-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb\uaadc\uaae0-\uaaea\uaaf2\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff66-\uff6f\uff71-\uff9d\uffa0-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc",
astral:"\ud802[\udc00-\udc05\udc08\udc0a-\udc35\udc37\udc38\udc3c\udc3f-\udc55\udd00-\udd15\udd20-\udd39\udd80-\uddb7\uddbe\uddbf\ude00\ude10-\ude13\ude15-\ude17\ude19-\ude33\ude60-\ude7c\udf00-\udf35\udf40-\udf55\udf60-\udf72]|\ud800[\udc00-\udc0b\udc0d-\udc26\udc28-\udc3a\udc3c\udc3d\udc3f-\udc4d\udc50-\udc5d\udc80-\udcfa\ude80-\ude9c\udea0-\uded0\udf00-\udf1e\udf30-\udf40\udf42-\udf49\udf80-\udf9d\udfa0-\udfc3\udfc8-\udfcf]|\ud81a[\udc00-\ude38]|\ud804[\udc03-\udc37\udc83-\udcaf\udcd0-\udce8\udd03-\udd26\udd83-\uddb2\uddc1-\uddc4]|\ud86e[\udc00-\udc1d]|\ud86d[\udc00-\udf34\udf40-\udfff]|\ud803[\udc00-\udc48]|\ud80d[\udc00-\udc2e]|\ud805[\ude80-\udeaa]|\ud87e[\udc00-\ude1d]|\ud81b[\udf00-\udf44\udf50]|\ud801[\udc50-\udc9d]|\ud82c[\udc00\udc01]|[\ud80c\ud840-\ud868\ud86a-\ud86c][\udc00-\udfff]|\ud83b[\ude00-\ude03\ude05-\ude1f\ude21\ude22\ude24\ude27\ude29-\ude32\ude34-\ude37\ude39\ude3b\ude42\ude47\ude49\ude4b\ude4d-\ude4f\ude51\ude52\ude54\ude57\ude59\ude5b\ude5d\ude5f\ude61\ude62\ude64\ude67-\ude6a\ude6c-\ude72\ude74-\ude77\ude79-\ude7c\ude7e\ude80-\ude89\ude8b-\ude9b\udea1-\udea3\udea5-\udea9\udeab-\udebb]|\ud808[\udc00-\udf6e]|\ud869[\udc00-\uded6\udf00-\udfff]"},
{name:"Lt",alias:"Titlecase_Letter",bmp:"\u01c5\u01c8\u01cb\u01f2\u1f88-\u1f8f\u1f98-\u1f9f\u1fa8-\u1faf\u1fbc\u1fcc\u1ffc"},{name:"Lu",alias:"Uppercase_Letter",bmp:"A-Z\u00c0-\u00d6\u00d8-\u00de\u0100\u0102\u0104\u0106\u0108\u010a\u010c\u010e\u0110\u0112\u0114\u0116\u0118\u011a\u011c\u011e\u0120\u0122\u0124\u0126\u0128\u012a\u012c\u012e\u0130\u0132\u0134\u0136\u0139\u013b\u013d\u013f\u0141\u0143\u0145\u0147\u014a\u014c\u014e\u0150\u0152\u0154\u0156\u0158\u015a\u015c\u015e\u0160\u0162\u0164\u0166\u0168\u016a\u016c\u016e\u0170\u0172\u0174\u0176\u0178\u0179\u017b\u017d\u0181\u0182\u0184\u0186\u0187\u0189-\u018b\u018e-\u0191\u0193\u0194\u0196-\u0198\u019c\u019d\u019f\u01a0\u01a2\u01a4\u01a6\u01a7\u01a9\u01ac\u01ae\u01af\u01b1-\u01b3\u01b5\u01b7\u01b8\u01bc\u01c4\u01c7\u01ca\u01cd\u01cf\u01d1\u01d3\u01d5\u01d7\u01d9\u01db\u01de\u01e0\u01e2\u01e4\u01e6\u01e8\u01ea\u01ec\u01ee\u01f1\u01f4\u01f6-\u01f8\u01fa\u01fc\u01fe\u0200\u0202\u0204\u0206\u0208\u020a\u020c\u020e\u0210\u0212\u0214\u0216\u0218\u021a\u021c\u021e\u0220\u0222\u0224\u0226\u0228\u022a\u022c\u022e\u0230\u0232\u023a\u023b\u023d\u023e\u0241\u0243-\u0246\u0248\u024a\u024c\u024e\u0370\u0372\u0376\u0386\u0388-\u038a\u038c\u038e\u038f\u0391-\u03a1\u03a3-\u03ab\u03cf\u03d2-\u03d4\u03d8\u03da\u03dc\u03de\u03e0\u03e2\u03e4\u03e6\u03e8\u03ea\u03ec\u03ee\u03f4\u03f7\u03f9\u03fa\u03fd-\u042f\u0460\u0462\u0464\u0466\u0468\u046a\u046c\u046e\u0470\u0472\u0474\u0476\u0478\u047a\u047c\u047e\u0480\u048a\u048c\u048e\u0490\u0492\u0494\u0496\u0498\u049a\u049c\u049e\u04a0\u04a2\u04a4\u04a6\u04a8\u04aa\u04ac\u04ae\u04b0\u04b2\u04b4\u04b6\u04b8\u04ba\u04bc\u04be\u04c0\u04c1\u04c3\u04c5\u04c7\u04c9\u04cb\u04cd\u04d0\u04d2\u04d4\u04d6\u04d8\u04da\u04dc\u04de\u04e0\u04e2\u04e4\u04e6\u04e8\u04ea\u04ec\u04ee\u04f0\u04f2\u04f4\u04f6\u04f8\u04fa\u04fc\u04fe\u0500\u0502\u0504\u0506\u0508\u050a\u050c\u050e\u0510\u0512\u0514\u0516\u0518\u051a\u051c\u051e\u0520\u0522\u0524\u0526\u0531-\u0556\u10a0-\u10c5\u10c7\u10cd\u1e00\u1e02\u1e04\u1e06\u1e08\u1e0a\u1e0c\u1e0e\u1e10\u1e12\u1e14\u1e16\u1e18\u1e1a\u1e1c\u1e1e\u1e20\u1e22\u1e24\u1e26\u1e28\u1e2a\u1e2c\u1e2e\u1e30\u1e32\u1e34\u1e36\u1e38\u1e3a\u1e3c\u1e3e\u1e40\u1e42\u1e44\u1e46\u1e48\u1e4a\u1e4c\u1e4e\u1e50\u1e52\u1e54\u1e56\u1e58\u1e5a\u1e5c\u1e5e\u1e60\u1e62\u1e64\u1e66\u1e68\u1e6a\u1e6c\u1e6e\u1e70\u1e72\u1e74\u1e76\u1e78\u1e7a\u1e7c\u1e7e\u1e80\u1e82\u1e84\u1e86\u1e88\u1e8a\u1e8c\u1e8e\u1e90\u1e92\u1e94\u1e9e\u1ea0\u1ea2\u1ea4\u1ea6\u1ea8\u1eaa\u1eac\u1eae\u1eb0\u1eb2\u1eb4\u1eb6\u1eb8\u1eba\u1ebc\u1ebe\u1ec0\u1ec2\u1ec4\u1ec6\u1ec8\u1eca\u1ecc\u1ece\u1ed0\u1ed2\u1ed4\u1ed6\u1ed8\u1eda\u1edc\u1ede\u1ee0\u1ee2\u1ee4\u1ee6\u1ee8\u1eea\u1eec\u1eee\u1ef0\u1ef2\u1ef4\u1ef6\u1ef8\u1efa\u1efc\u1efe\u1f08-\u1f0f\u1f18-\u1f1d\u1f28-\u1f2f\u1f38-\u1f3f\u1f48-\u1f4d\u1f59\u1f5b\u1f5d\u1f5f\u1f68-\u1f6f\u1fb8-\u1fbb\u1fc8-\u1fcb\u1fd8-\u1fdb\u1fe8-\u1fec\u1ff8-\u1ffb\u2102\u2107\u210b-\u210d\u2110-\u2112\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u2130-\u2133\u213e\u213f\u2145\u2183\u2c00-\u2c2e\u2c60\u2c62-\u2c64\u2c67\u2c69\u2c6b\u2c6d-\u2c70\u2c72\u2c75\u2c7e-\u2c80\u2c82\u2c84\u2c86\u2c88\u2c8a\u2c8c\u2c8e\u2c90\u2c92\u2c94\u2c96\u2c98\u2c9a\u2c9c\u2c9e\u2ca0\u2ca2\u2ca4\u2ca6\u2ca8\u2caa\u2cac\u2cae\u2cb0\u2cb2\u2cb4\u2cb6\u2cb8\u2cba\u2cbc\u2cbe\u2cc0\u2cc2\u2cc4\u2cc6\u2cc8\u2cca\u2ccc\u2cce\u2cd0\u2cd2\u2cd4\u2cd6\u2cd8\u2cda\u2cdc\u2cde\u2ce0\u2ce2\u2ceb\u2ced\u2cf2\ua640\ua642\ua644\ua646\ua648\ua64a\ua64c\ua64e\ua650\ua652\ua654\ua656\ua658\ua65a\ua65c\ua65e\ua660\ua662\ua664\ua666\ua668\ua66a\ua66c\ua680\ua682\ua684\ua686\ua688\ua68a\ua68c\ua68e\ua690\ua692\ua694\ua696\ua722\ua724\ua726\ua728\ua72a\ua72c\ua72e\ua732\ua734\ua736\ua738\ua73a\ua73c\ua73e\ua740\ua742\ua744\ua746\ua748\ua74a\ua74c\ua74e\ua750\ua752\ua754\ua756\ua758\ua75a\ua75c\ua75e\ua760\ua762\ua764\ua766\ua768\ua76a\ua76c\ua76e\ua779\ua77b\ua77d\ua77e\ua780\ua782\ua784\ua786\ua78b\ua78d\ua790\ua792\ua7a0\ua7a2\ua7a4\ua7a6\ua7a8\ua7aa\uff21-\uff3a",
astral:"\ud835[\udc00-\udc19\udc34-\udc4d\udc68-\udc81\udc9c\udc9e\udc9f\udca2\udca5\udca6\udca9-\udcac\udcae-\udcb5\udcd0-\udce9\udd04\udd05\udd07-\udd0a\udd0d-\udd14\udd16-\udd1c\udd38\udd39\udd3b-\udd3e\udd40-\udd44\udd46\udd4a-\udd50\udd6c-\udd85\udda0-\uddb9\uddd4-\udded\ude08-\ude21\ude3c-\ude55\ude70-\ude89\udea8-\udec0\udee2-\udefa\udf1c-\udf34\udf56-\udf6e\udf90-\udfa8\udfca]|\ud801[\udc00-\udc27]"},{name:"M",alias:"Mark",bmp:"\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065f\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08e4-\u08fe\u0900-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962\u0963\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09cb-\u09cd\u09d7\u09e2\u09e3\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2\u0ae3\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0c01-\u0c03\u0c3e-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0c82\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d02\u0d03\u0d3e-\u0d44\u0d46-\u0d48\u0d4a-\u0d4d\u0d57\u0d62\u0d63\u0d82\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0df2\u0df3\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f3e\u0f3f\u0f71-\u0f84\u0f86\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102b-\u103e\u1056-\u1059\u105e-\u1060\u1062-\u1064\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f\u109a-\u109d\u135d-\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b4-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u192b\u1930-\u193b\u19b0-\u19c0\u19c8\u19c9\u1a17-\u1a1b\u1a55-\u1a5e\u1a60-\u1a7c\u1a7f\u1b00-\u1b04\u1b34-\u1b44\u1b6b-\u1b73\u1b80-\u1b82\u1ba1-\u1bad\u1be6-\u1bf3\u1c24-\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce8\u1ced\u1cf2-\u1cf4\u1dc0-\u1de6\u1dfc-\u1dff\u20d0-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua674-\ua67d\ua69f\ua6f0\ua6f1\ua802\ua806\ua80b\ua823-\ua827\ua880\ua881\ua8b4-\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua953\ua980-\ua983\ua9b3-\ua9c0\uaa29-\uaa36\uaa43\uaa4c\uaa4d\uaa7b\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uaaeb-\uaaef\uaaf5\uaaf6\uabe3-\uabea\uabec\uabed\ufb1e\ufe00-\ufe0f\ufe20-\ufe26",
astral:"\ud834[\udd65-\udd69\udd6d-\udd72\udd7b-\udd82\udd85-\udd8b\uddaa-\uddad\ude42-\ude44]|\ud802[\ude01-\ude03\ude05\ude06\ude0c-\ude0f\ude38-\ude3a\ude3f]|\ud81b[\udf51-\udf7e\udf8f-\udf92]|\ud804[\udc00-\udc02\udc38-\udc46\udc80-\udc82\udcb0-\udcba\udd00-\udd02\udd27-\udd34\udd80-\udd82\uddb3-\uddc0]|\ud805[\udeab-\udeb7]|\ud800\uddfd|\udb40[\udd00-\uddef]"},{name:"Mc",alias:"Spacing_Mark",bmp:"\u0903\u093b\u093e-\u0940\u0949-\u094c\u094e\u094f\u0982\u0983\u09be-\u09c0\u09c7\u09c8\u09cb\u09cc\u09d7\u0a03\u0a3e-\u0a40\u0a83\u0abe-\u0ac0\u0ac9\u0acb\u0acc\u0b02\u0b03\u0b3e\u0b40\u0b47\u0b48\u0b4b\u0b4c\u0b57\u0bbe\u0bbf\u0bc1\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcc\u0bd7\u0c01-\u0c03\u0c41-\u0c44\u0c82\u0c83\u0cbe\u0cc0-\u0cc4\u0cc7\u0cc8\u0cca\u0ccb\u0cd5\u0cd6\u0d02\u0d03\u0d3e-\u0d40\u0d46-\u0d48\u0d4a-\u0d4c\u0d57\u0d82\u0d83\u0dcf-\u0dd1\u0dd8-\u0ddf\u0df2\u0df3\u0f3e\u0f3f\u0f7f\u102b\u102c\u1031\u1038\u103b\u103c\u1056\u1057\u1062-\u1064\u1067-\u106d\u1083\u1084\u1087-\u108c\u108f\u109a-\u109c\u17b6\u17be-\u17c5\u17c7\u17c8\u1923-\u1926\u1929-\u192b\u1930\u1931\u1933-\u1938\u19b0-\u19c0\u19c8\u19c9\u1a19-\u1a1b\u1a55\u1a57\u1a61\u1a63\u1a64\u1a6d-\u1a72\u1b04\u1b35\u1b3b\u1b3d-\u1b41\u1b43\u1b44\u1b82\u1ba1\u1ba6\u1ba7\u1baa\u1bac\u1bad\u1be7\u1bea-\u1bec\u1bee\u1bf2\u1bf3\u1c24-\u1c2b\u1c34\u1c35\u1ce1\u1cf2\u1cf3\u302e\u302f\ua823\ua824\ua827\ua880\ua881\ua8b4-\ua8c3\ua952\ua953\ua983\ua9b4\ua9b5\ua9ba\ua9bb\ua9bd-\ua9c0\uaa2f\uaa30\uaa33\uaa34\uaa4d\uaa7b\uaaeb\uaaee\uaaef\uaaf5\uabe3\uabe4\uabe6\uabe7\uabe9\uabea\uabec",
astral:"\ud834[\udd65\udd66\udd6d-\udd72]|\ud804[\udc00\udc02\udc82\udcb0-\udcb2\udcb7\udcb8\udd2c\udd82\uddb3-\uddb5\uddbf\uddc0]|\ud805[\udeac\udeae\udeaf\udeb6]|\ud81b[\udf51-\udf7e]"},{name:"Me",alias:"Enclosing_Mark",bmp:"\u0488\u0489\u20dd-\u20e0\u20e2-\u20e4\ua670-\ua672"},{name:"Mn",alias:"Nonspacing_Mark",bmp:"\u0300-\u036f\u0483-\u0487\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065f\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08e4-\u08fe\u0900-\u0902\u093a\u093c\u0941-\u0948\u094d\u0951-\u0957\u0962\u0963\u0981\u09bc\u09c1-\u09c4\u09cd\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b62\u0b63\u0b82\u0bc0\u0bcd\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc6\u0ccc\u0ccd\u0ce2\u0ce3\u0d41-\u0d44\u0d4d\u0d62\u0d63\u0dca\u0dd2-\u0dd4\u0dd6\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135d-\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b4\u17b5\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1bab\u1be6\u1be8\u1be9\u1bed\u1bef-\u1bf1\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1cf4\u1dc0-\u1de6\u1dfc-\u1dff\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302d\u3099\u309a\ua66f\ua674-\ua67d\ua69f\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uaaec\uaaed\uaaf6\uabe5\uabe8\uabed\ufb1e\ufe00-\ufe0f\ufe20-\ufe26",
astral:"\ud802[\ude01-\ude03\ude05\ude06\ude0c-\ude0f\ude38-\ude3a\ude3f]|\ud834[\udd67-\udd69\udd7b-\udd82\udd85-\udd8b\uddaa-\uddad\ude42-\ude44]|\ud81b[\udf8f-\udf92]|\ud805[\udeab\udead\udeb0-\udeb5\udeb7]|\ud804[\udc01\udc38-\udc46\udc80\udc81\udcb3-\udcb6\udcb9\udcba\udd00-\udd02\udd27-\udd2b\udd2d-\udd34\udd80\udd81\uddb6-\uddbe]|\ud800\uddfd|\udb40[\udd00-\uddef]"},{name:"N",alias:"Number",bmp:"0-9\u00b2\u00b3\u00b9\u00bc-\u00be\u0660-\u0669\u06f0-\u06f9\u07c0-\u07c9\u0966-\u096f\u09e6-\u09ef\u09f4-\u09f9\u0a66-\u0a6f\u0ae6-\u0aef\u0b66-\u0b6f\u0b72-\u0b77\u0be6-\u0bf2\u0c66-\u0c6f\u0c78-\u0c7e\u0ce6-\u0cef\u0d66-\u0d75\u0e50-\u0e59\u0ed0-\u0ed9\u0f20-\u0f33\u1040-\u1049\u1090-\u1099\u1369-\u137c\u16ee-\u16f0\u17e0-\u17e9\u17f0-\u17f9\u1810-\u1819\u1946-\u194f\u19d0-\u19da\u1a80-\u1a89\u1a90-\u1a99\u1b50-\u1b59\u1bb0-\u1bb9\u1c40-\u1c49\u1c50-\u1c59\u2070\u2074-\u2079\u2080-\u2089\u2150-\u2182\u2185-\u2189\u2460-\u249b\u24ea-\u24ff\u2776-\u2793\u2cfd\u3007\u3021-\u3029\u3038-\u303a\u3192-\u3195\u3220-\u3229\u3248-\u324f\u3251-\u325f\u3280-\u3289\u32b1-\u32bf\ua620-\ua629\ua6e6-\ua6ef\ua830-\ua835\ua8d0-\ua8d9\ua900-\ua909\ua9d0-\ua9d9\uaa50-\uaa59\uabf0-\uabf9\uff10-\uff19",
astral:"\ud802[\udc58-\udc5f\udd16-\udd1b\ude40-\ude47\ude7d\ude7e\udf58-\udf5f\udf78-\udf7f]|\ud801[\udca0-\udca9]|\ud809[\udc00-\udc62]|\ud835[\udfce-\udfff]|\ud800[\udd07-\udd33\udd40-\udd78\udd8a\udf20-\udf23\udf41\udf4a\udfd1-\udfd5]|\ud834[\udf60-\udf71]|\ud803[\ude60-\ude7e]|\ud83c[\udd00-\udd0a]|\ud805[\udec0-\udec9]|\ud804[\udc52-\udc6f\udcf0-\udcf9\udd36-\udd3f\uddd0-\uddd9]"},{name:"Nd",alias:"Decimal_Number",bmp:"0-9\u0660-\u0669\u06f0-\u06f9\u07c0-\u07c9\u0966-\u096f\u09e6-\u09ef\u0a66-\u0a6f\u0ae6-\u0aef\u0b66-\u0b6f\u0be6-\u0bef\u0c66-\u0c6f\u0ce6-\u0cef\u0d66-\u0d6f\u0e50-\u0e59\u0ed0-\u0ed9\u0f20-\u0f29\u1040-\u1049\u1090-\u1099\u17e0-\u17e9\u1810-\u1819\u1946-\u194f\u19d0-\u19d9\u1a80-\u1a89\u1a90-\u1a99\u1b50-\u1b59\u1bb0-\u1bb9\u1c40-\u1c49\u1c50-\u1c59\ua620-\ua629\ua8d0-\ua8d9\ua900-\ua909\ua9d0-\ua9d9\uaa50-\uaa59\uabf0-\uabf9\uff10-\uff19",
astral:"\ud804[\udc66-\udc6f\udcf0-\udcf9\udd36-\udd3f\uddd0-\uddd9]|\ud805[\udec0-\udec9]|\ud801[\udca0-\udca9]|\ud835[\udfce-\udfff]"},{name:"Nl",alias:"Letter_Number",bmp:"\u16ee-\u16f0\u2160-\u2182\u2185-\u2188\u3007\u3021-\u3029\u3038-\u303a\ua6e6-\ua6ef",astral:"\ud800[\udd40-\udd74\udf41\udf4a\udfd1-\udfd5]|\ud809[\udc00-\udc62]"},{name:"No",alias:"Other_Number",bmp:"\u00b2\u00b3\u00b9\u00bc-\u00be\u09f4-\u09f9\u0b72-\u0b77\u0bf0-\u0bf2\u0c78-\u0c7e\u0d70-\u0d75\u0f2a-\u0f33\u1369-\u137c\u17f0-\u17f9\u19da\u2070\u2074-\u2079\u2080-\u2089\u2150-\u215f\u2189\u2460-\u249b\u24ea-\u24ff\u2776-\u2793\u2cfd\u3192-\u3195\u3220-\u3229\u3248-\u324f\u3251-\u325f\u3280-\u3289\u32b1-\u32bf\ua830-\ua835",
astral:"\ud802[\udc58-\udc5f\udd16-\udd1b\ude40-\ude47\ude7d\ude7e\udf58-\udf5f\udf78-\udf7f]|\ud834[\udf60-\udf71]|\ud803[\ude60-\ude7e]|\ud800[\udd07-\udd33\udd75-\udd78\udd8a\udf20-\udf23]|\ud83c[\udd00-\udd0a]|\ud804[\udc52-\udc65]"},{name:"P",alias:"Punctuation",bmp:"!-#%-\\x2A,-/:;\\x3F@\\x5B-\\x5D_\\x7B}\u00a1\u00a7\u00ab\u00b6\u00b7\u00bb\u00bf\u037e\u0387\u055a-\u055f\u0589\u058a\u05be\u05c0\u05c3\u05c6\u05f3\u05f4\u0609\u060a\u060c\u060d\u061b\u061e\u061f\u066a-\u066d\u06d4\u0700-\u070d\u07f7-\u07f9\u0830-\u083e\u085e\u0964\u0965\u0970\u0af0\u0df4\u0e4f\u0e5a\u0e5b\u0f04-\u0f12\u0f14\u0f3a-\u0f3d\u0f85\u0fd0-\u0fd4\u0fd9\u0fda\u104a-\u104f\u10fb\u1360-\u1368\u1400\u166d\u166e\u169b\u169c\u16eb-\u16ed\u1735\u1736\u17d4-\u17d6\u17d8-\u17da\u1800-\u180a\u1944\u1945\u1a1e\u1a1f\u1aa0-\u1aa6\u1aa8-\u1aad\u1b5a-\u1b60\u1bfc-\u1bff\u1c3b-\u1c3f\u1c7e\u1c7f\u1cc0-\u1cc7\u1cd3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205e\u207d\u207e\u208d\u208e\u2329\u232a\u2768-\u2775\u27c5\u27c6\u27e6-\u27ef\u2983-\u2998\u29d8-\u29db\u29fc\u29fd\u2cf9-\u2cfc\u2cfe\u2cff\u2d70\u2e00-\u2e2e\u2e30-\u2e3b\u3001-\u3003\u3008-\u3011\u3014-\u301f\u3030\u303d\u30a0\u30fb\ua4fe\ua4ff\ua60d-\ua60f\ua673\ua67e\ua6f2-\ua6f7\ua874-\ua877\ua8ce\ua8cf\ua8f8-\ua8fa\ua92e\ua92f\ua95f\ua9c1-\ua9cd\ua9de\ua9df\uaa5c-\uaa5f\uaade\uaadf\uaaf0\uaaf1\uabeb\ufd3e\ufd3f\ufe10-\ufe19\ufe30-\ufe52\ufe54-\ufe61\ufe63\ufe68\ufe6a\ufe6b\uff01-\uff03\uff05-\uff0a\uff0c-\uff0f\uff1a\uff1b\uff1f\uff20\uff3b-\uff3d\uff3f\uff5b\uff5d\uff5f-\uff65",
astral:"\ud809[\udc70-\udc73]|\ud802[\udc57\udd1f\udd3f\ude50-\ude58\ude7f\udf39-\udf3f]|\ud800[\udd00-\udd02\udf9f\udfd0]|\ud804[\udc47-\udc4d\udcbb\udcbc\udcbe-\udcc1\udd40-\udd43\uddc5-\uddc8]"},{name:"Pc",alias:"Connector_Punctuation",bmp:"_\u203f\u2040\u2054\ufe33\ufe34\ufe4d-\ufe4f\uff3f"},{name:"Pd",alias:"Dash_Punctuation",bmp:"\\x2D\u058a\u05be\u1400\u1806\u2010-\u2015\u2e17\u2e1a\u2e3a\u2e3b\u301c\u3030\u30a0\ufe31\ufe32\ufe58\ufe63\uff0d"},{name:"Pe",alias:"Close_Punctuation",bmp:"\\x29\\x5D}\u0f3b\u0f3d\u169c\u2046\u207e\u208e\u232a\u2769\u276b\u276d\u276f\u2771\u2773\u2775\u27c6\u27e7\u27e9\u27eb\u27ed\u27ef\u2984\u2986\u2988\u298a\u298c\u298e\u2990\u2992\u2994\u2996\u2998\u29d9\u29db\u29fd\u2e23\u2e25\u2e27\u2e29\u3009\u300b\u300d\u300f\u3011\u3015\u3017\u3019\u301b\u301e\u301f\ufd3f\ufe18\ufe36\ufe38\ufe3a\ufe3c\ufe3e\ufe40\ufe42\ufe44\ufe48\ufe5a\ufe5c\ufe5e\uff09\uff3d\uff5d\uff60\uff63"},
{name:"Pf",alias:"Final_Punctuation",bmp:"\u00bb\u2019\u201d\u203a\u2e03\u2e05\u2e0a\u2e0d\u2e1d\u2e21"},{name:"Pi",alias:"Initial_Punctuation",bmp:"\u00ab\u2018\u201b\u201c\u201f\u2039\u2e02\u2e04\u2e09\u2e0c\u2e1c\u2e20"},{name:"Po",alias:"Other_Punctuation",bmp:"!-#%-'\\x2A,\\x2E/:;\\x3F@\\x5C\u00a1\u00a7\u00b6\u00b7\u00bf\u037e\u0387\u055a-\u055f\u0589\u05c0\u05c3\u05c6\u05f3\u05f4\u0609\u060a\u060c\u060d\u061b\u061e\u061f\u066a-\u066d\u06d4\u0700-\u070d\u07f7-\u07f9\u0830-\u083e\u085e\u0964\u0965\u0970\u0af0\u0df4\u0e4f\u0e5a\u0e5b\u0f04-\u0f12\u0f14\u0f85\u0fd0-\u0fd4\u0fd9\u0fda\u104a-\u104f\u10fb\u1360-\u1368\u166d\u166e\u16eb-\u16ed\u1735\u1736\u17d4-\u17d6\u17d8-\u17da\u1800-\u1805\u1807-\u180a\u1944\u1945\u1a1e\u1a1f\u1aa0-\u1aa6\u1aa8-\u1aad\u1b5a-\u1b60\u1bfc-\u1bff\u1c3b-\u1c3f\u1c7e\u1c7f\u1cc0-\u1cc7\u1cd3\u2016\u2017\u2020-\u2027\u2030-\u2038\u203b-\u203e\u2041-\u2043\u2047-\u2051\u2053\u2055-\u205e\u2cf9-\u2cfc\u2cfe\u2cff\u2d70\u2e00\u2e01\u2e06-\u2e08\u2e0b\u2e0e-\u2e16\u2e18\u2e19\u2e1b\u2e1e\u2e1f\u2e2a-\u2e2e\u2e30-\u2e39\u3001-\u3003\u303d\u30fb\ua4fe\ua4ff\ua60d-\ua60f\ua673\ua67e\ua6f2-\ua6f7\ua874-\ua877\ua8ce\ua8cf\ua8f8-\ua8fa\ua92e\ua92f\ua95f\ua9c1-\ua9cd\ua9de\ua9df\uaa5c-\uaa5f\uaade\uaadf\uaaf0\uaaf1\uabeb\ufe10-\ufe16\ufe19\ufe30\ufe45\ufe46\ufe49-\ufe4c\ufe50-\ufe52\ufe54-\ufe57\ufe5f-\ufe61\ufe68\ufe6a\ufe6b\uff01-\uff03\uff05-\uff07\uff0a\uff0c\uff0e\uff0f\uff1a\uff1b\uff1f\uff20\uff3c\uff61\uff64\uff65",
astral:"\ud809[\udc70-\udc73]|\ud802[\udc57\udd1f\udd3f\ude50-\ude58\ude7f\udf39-\udf3f]|\ud800[\udd00-\udd02\udf9f\udfd0]|\ud804[\udc47-\udc4d\udcbb\udcbc\udcbe-\udcc1\udd40-\udd43\uddc5-\uddc8]"},{name:"Ps",alias:"Open_Punctuation",bmp:"\\x28\\x5B\\x7B\u0f3a\u0f3c\u169b\u201a\u201e\u2045\u207d\u208d\u2329\u2768\u276a\u276c\u276e\u2770\u2772\u2774\u27c5\u27e6\u27e8\u27ea\u27ec\u27ee\u2983\u2985\u2987\u2989\u298b\u298d\u298f\u2991\u2993\u2995\u2997\u29d8\u29da\u29fc\u2e22\u2e24\u2e26\u2e28\u3008\u300a\u300c\u300e\u3010\u3014\u3016\u3018\u301a\u301d\ufd3e\ufe17\ufe35\ufe37\ufe39\ufe3b\ufe3d\ufe3f\ufe41\ufe43\ufe47\ufe59\ufe5b\ufe5d\uff08\uff3b\uff5b\uff5f\uff62"},
{name:"S",alias:"Symbol",bmp:"\\x24\\x2B\x3c-\x3e\\x5E`\\x7C~\u00a2-\u00a6\u00a8\u00a9\u00ac\u00ae-\u00b1\u00b4\u00b8\u00d7\u00f7\u02c2-\u02c5\u02d2-\u02df\u02e5-\u02eb\u02ed\u02ef-\u02ff\u0375\u0384\u0385\u03f6\u0482\u058f\u0606-\u0608\u060b\u060e\u060f\u06de\u06e9\u06fd\u06fe\u07f6\u09f2\u09f3\u09fa\u09fb\u0af1\u0b70\u0bf3-\u0bfa\u0c7f\u0d79\u0e3f\u0f01-\u0f03\u0f13\u0f15-\u0f17\u0f1a-\u0f1f\u0f34\u0f36\u0f38\u0fbe-\u0fc5\u0fc7-\u0fcc\u0fce\u0fcf\u0fd5-\u0fd8\u109e\u109f\u1390-\u1399\u17db\u1940\u19de-\u19ff\u1b61-\u1b6a\u1b74-\u1b7c\u1fbd\u1fbf-\u1fc1\u1fcd-\u1fcf\u1fdd-\u1fdf\u1fed-\u1fef\u1ffd\u1ffe\u2044\u2052\u207a-\u207c\u208a-\u208c\u20a0-\u20ba\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211e-\u2123\u2125\u2127\u2129\u212e\u213a\u213b\u2140-\u2144\u214a-\u214d\u214f\u2190-\u2328\u232b-\u23f3\u2400-\u2426\u2440-\u244a\u249c-\u24e9\u2500-\u26ff\u2701-\u2767\u2794-\u27c4\u27c7-\u27e5\u27f0-\u2982\u2999-\u29d7\u29dc-\u29fb\u29fe-\u2b4c\u2b50-\u2b59\u2ce5-\u2cea\u2e80-\u2e99\u2e9b-\u2ef3\u2f00-\u2fd5\u2ff0-\u2ffb\u3004\u3012\u3013\u3020\u3036\u3037\u303e\u303f\u309b\u309c\u3190\u3191\u3196-\u319f\u31c0-\u31e3\u3200-\u321e\u322a-\u3247\u3250\u3260-\u327f\u328a-\u32b0\u32c0-\u32fe\u3300-\u33ff\u4dc0-\u4dff\ua490-\ua4c6\ua700-\ua716\ua720\ua721\ua789\ua78a\ua828-\ua82b\ua836-\ua839\uaa77-\uaa79\ufb29\ufbb2-\ufbc1\ufdfc\ufdfd\ufe62\ufe64-\ufe66\ufe69\uff04\uff0b\uff1c-\uff1e\uff3e\uff40\uff5c\uff5e\uffe0-\uffe6\uffe8-\uffee\ufffc\ufffd",
astral:"\ud83d[\udc00-\udc3e\udc40\udc42-\udcf7\udcf9-\udcfc\udd00-\udd3d\udd40-\udd43\udd50-\udd67\uddfb-\ude40\ude45-\ude4f\ude80-\udec5\udf00-\udf73]|\ud835[\udec1\udedb\udefb\udf15\udf35\udf4f\udf6f\udf89\udfa9\udfc3]|\ud83c[\udc00-\udc2b\udc30-\udc93\udca0-\udcae\udcb1-\udcbe\udcc1-\udccf\udcd1-\udcdf\udd10-\udd2e\udd30-\udd6b\udd70-\udd9a\udde6-\ude02\ude10-\ude3a\ude40-\ude48\ude50\ude51\udf00-\udf20\udf30-\udf35\udf37-\udf7c\udf80-\udf93\udfa0-\udfc4\udfc6-\udfca\udfe0-\udff0]|\ud834[\udc00-\udcf5\udd00-\udd26\udd29-\udd64\udd6a-\udd6c\udd83\udd84\udd8c-\udda9\uddae-\udddd\ude00-\ude41\ude45\udf00-\udf56]|\ud800[\udd37-\udd3f\udd79-\udd89\udd90-\udd9b\uddd0-\uddfc]|\ud83b[\udef0\udef1]"},
{name:"Sc",alias:"Currency_Symbol",bmp:"\\x24\u00a2-\u00a5\u058f\u060b\u09f2\u09f3\u09fb\u0af1\u0bf9\u0e3f\u17db\u20a0-\u20ba\ua838\ufdfc\ufe69\uff04\uffe0\uffe1\uffe5\uffe6"},{name:"Sk",alias:"Modifier_Symbol",bmp:"\\x5E`\u00a8\u00af\u00b4\u00b8\u02c2-\u02c5\u02d2-\u02df\u02e5-\u02eb\u02ed\u02ef-\u02ff\u0375\u0384\u0385\u1fbd\u1fbf-\u1fc1\u1fcd-\u1fcf\u1fdd-\u1fdf\u1fed-\u1fef\u1ffd\u1ffe\u309b\u309c\ua700-\ua716\ua720\ua721\ua789\ua78a\ufbb2-\ufbc1\uff3e\uff40\uffe3"},{name:"Sm",alias:"Math_Symbol",
bmp:"\\x2B\x3c-\x3e\\x7C~\u00ac\u00b1\u00d7\u00f7\u03f6\u0606-\u0608\u2044\u2052\u207a-\u207c\u208a-\u208c\u2118\u2140-\u2144\u214b\u2190-\u2194\u219a\u219b\u21a0\u21a3\u21a6\u21ae\u21ce\u21cf\u21d2\u21d4\u21f4-\u22ff\u2308-\u230b\u2320\u2321\u237c\u239b-\u23b3\u23dc-\u23e1\u25b7\u25c1\u25f8-\u25ff\u266f\u27c0-\u27c4\u27c7-\u27e5\u27f0-\u27ff\u2900-\u2982\u2999-\u29d7\u29dc-\u29fb\u29fe-\u2aff\u2b30-\u2b44\u2b47-\u2b4c\ufb29\ufe62\ufe64-\ufe66\uff0b\uff1c-\uff1e\uff5c\uff5e\uffe2\uffe9-\uffec",astral:"\ud83b[\udef0\udef1]|\ud835[\udec1\udedb\udefb\udf15\udf35\udf4f\udf6f\udf89\udfa9\udfc3]"},
{name:"So",alias:"Other_Symbol",bmp:"\u00a6\u00a9\u00ae\u00b0\u0482\u060e\u060f\u06de\u06e9\u06fd\u06fe\u07f6\u09fa\u0b70\u0bf3-\u0bf8\u0bfa\u0c7f\u0d79\u0f01-\u0f03\u0f13\u0f15-\u0f17\u0f1a-\u0f1f\u0f34\u0f36\u0f38\u0fbe-\u0fc5\u0fc7-\u0fcc\u0fce\u0fcf\u0fd5-\u0fd8\u109e\u109f\u1390-\u1399\u1940\u19de-\u19ff\u1b61-\u1b6a\u1b74-\u1b7c\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116\u2117\u211e-\u2123\u2125\u2127\u2129\u212e\u213a\u213b\u214a\u214c\u214d\u214f\u2195-\u2199\u219c-\u219f\u21a1\u21a2\u21a4\u21a5\u21a7-\u21ad\u21af-\u21cd\u21d0\u21d1\u21d3\u21d5-\u21f3\u2300-\u2307\u230c-\u231f\u2322-\u2328\u232b-\u237b\u237d-\u239a\u23b4-\u23db\u23e2-\u23f3\u2400-\u2426\u2440-\u244a\u249c-\u24e9\u2500-\u25b6\u25b8-\u25c0\u25c2-\u25f7\u2600-\u266e\u2670-\u26ff\u2701-\u2767\u2794-\u27bf\u2800-\u28ff\u2b00-\u2b2f\u2b45\u2b46\u2b50-\u2b59\u2ce5-\u2cea\u2e80-\u2e99\u2e9b-\u2ef3\u2f00-\u2fd5\u2ff0-\u2ffb\u3004\u3012\u3013\u3020\u3036\u3037\u303e\u303f\u3190\u3191\u3196-\u319f\u31c0-\u31e3\u3200-\u321e\u322a-\u3247\u3250\u3260-\u327f\u328a-\u32b0\u32c0-\u32fe\u3300-\u33ff\u4dc0-\u4dff\ua490-\ua4c6\ua828-\ua82b\ua836\ua837\ua839\uaa77-\uaa79\ufdfd\uffe4\uffe8\uffed\uffee\ufffc\ufffd",
astral:"\ud83d[\udc00-\udc3e\udc40\udc42-\udcf7\udcf9-\udcfc\udd00-\udd3d\udd40-\udd43\udd50-\udd67\uddfb-\ude40\ude45-\ude4f\ude80-\udec5\udf00-\udf73]|\ud834[\udc00-\udcf5\udd00-\udd26\udd29-\udd64\udd6a-\udd6c\udd83\udd84\udd8c-\udda9\uddae-\udddd\ude00-\ude41\ude45\udf00-\udf56]|\ud83c[\udc00-\udc2b\udc30-\udc93\udca0-\udcae\udcb1-\udcbe\udcc1-\udccf\udcd1-\udcdf\udd10-\udd2e\udd30-\udd6b\udd70-\udd9a\udde6-\ude02\ude10-\ude3a\ude40-\ude48\ude50\ude51\udf00-\udf20\udf30-\udf35\udf37-\udf7c\udf80-\udf93\udfa0-\udfc4\udfc6-\udfca\udfe0-\udff0]|\ud800[\udd37-\udd3f\udd79-\udd89\udd90-\udd9b\uddd0-\uddfc]"},
{name:"Z",alias:"Separator",bmp:" \u00a0\u1680\u180e\u2000-\u200a\u2028\u2029\u202f\u205f\u3000"},{name:"Zl",alias:"Line_Separator",bmp:"\u2028"},{name:"Zp",alias:"Paragraph_Separator",bmp:"\u2029"},{name:"Zs",alias:"Space_Separator",bmp:" \u00a0\u1680\u180e\u2000-\u200a\u202f\u205f\u3000"}])})(XRegExp);;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:rangy-inputs', location = '/static/lib/rangy-inputs.js' */
/*
 Rangy Text Inputs, a cross-browser textarea and text input library plug-in for jQuery.

 Part of Rangy, a cross-browser JavaScript range and selection library
 http://code.google.com/p/rangy/

 Depends on jQuery 1.0 or later.

 Copyright 2010, Tim Down
 Licensed under the MIT license.
 Version: 0.1.205
 Build date: 5 November 2010

 Modified by Atlassian
*/
(function(p){function q(e,d){var f=typeof e[d];return"function"===f||!("object"!=f||!e[d])||"unknown"==f}function r(e,d){return!("object"!=typeof e[d]||!e[d])}function t(e,d,f){0>d&&(d+=e.value.length);"undefined"==typeof f&&(f=d);0>f&&(f+=e.value.length);return{start:d,end:f}}function l(){return r(document,"body")?document.body:document.getElementsByTagName("body")[0]}var h,g,u,m,v,w,x,y,n;p(document).ready(function(){function e(c,a){return function(){var b=this.jquery?this[0]:this,k=b.nodeName.toLowerCase();
if(1==b.nodeType&&("textarea"==k||"input"==k&&"text"==b.type)&&(b=[b].concat(Array.prototype.slice.call(arguments)),b=c.apply(this,b),!a))return b;if(a)return this}}var d=document.createElement("textarea");l().appendChild(d);if("undefined"!=typeof d.selectionStart&&"undefined"!=typeof d.selectionEnd)h=function(c){var a=c.selectionStart,b=c.selectionEnd;return{start:a,end:b,length:b-a,text:c.value.slice(a,b)}},g=function(c,a,b){a=t(c,a,b);c.selectionStart=a.start;c.selectionEnd=a.end},n=function(c,
a){a?c.selectionEnd=c.selectionStart:c.selectionStart=c.selectionEnd};else if(q(d,"createTextRange")&&r(document,"selection")&&q(document.selection,"createRange")){h=function(c){var a=0,b=0,k,e,d;(d=document.selection.createRange())&&d.parentElement()==c&&(k=c.value.replace(/\r\n/g,"\n"),e=k.length,b=c.createTextRange(),b.moveToBookmark(d.getBookmark()),d=c.createTextRange(),d.collapse(!1),-1<b.compareEndPoints("StartToEnd",d)?a=b=e:(a=-b.moveStart("character",-e),a+=k.slice(0,a).split("\n").length-
1,-1<b.compareEndPoints("EndToEnd",d)?b=e:(b=-b.moveEnd("character",-e),b+=k.slice(0,b).split("\n").length-1)));return{start:a,end:b,length:b-a,text:c.value.slice(a,b)}};var f=function(c,a){return a-(c.value.slice(0,a).split("\r\n").length-1)};g=function(c,a,b){a=t(c,a,b);b=c.createTextRange();var d=f(c,a.start);b.collapse(!0);a.start==a.end?b.move("character",d):(b.moveEnd("character",f(c,a.end)),b.moveStart("character",d));b.select()};n=function(c,a){var b=document.selection.createRange();b.collapse(a);
b.select()}}else{l().removeChild(d);window.console&&window.console.log&&window.console.log("TextInputs module for Rangy not supported in your browser. Reason: No means of finding text input caret position");return}l().removeChild(d);m=function(c,a,b,d){var e;a!=b&&(e=c.value,c.value=e.slice(0,a)+e.slice(b));d&&g(c,a,a)};u=function(c){var a=h(c);m(c,a.start,a.end,!0)};y=function(c){var a=h(c),b;a.start!=a.end&&(b=c.value,c.value=b.slice(0,a.start)+b.slice(a.end));g(c,a.start,a.start);return a.text};
v=function(c,a,b,d){var e=c.value;c.value=e.slice(0,b)+a+e.slice(b);d&&(a=b+a.length,g(c,a,a))};w=function(c,a){var b=h(c),d=c.value;c.value=d.slice(0,b.start)+a+d.slice(b.end);b=b.start+a.length;g(c,b,b)};x=function(c,a,b){var d=h(c),e=c.value;c.value=e.slice(0,d.start)+a+d.text+b+e.slice(d.end);a=d.start+a.length;g(c,a,a+d.length)};p.fn.extend({getSelection:e(h,!1),setSelection:e(g,!0),collapseSelection:e(n,!0),deleteSelectedText:e(u,!0),deleteText:e(m,!0),extractSelectedText:e(y,!1),insertText:e(v,
!0),replaceSelectedText:e(w,!0),surroundSelectedText:e(x,!0)})})})(jQuery);;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:mentionable-textarea', location = '/static/widget/mentionable-textarea/mentionable-textarea.soy' */
// This file was automatically generated from mentionable-textarea.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace stash.widget.mentionableTextarea.
 */

if (typeof stash == 'undefined') { var stash = {}; }
if (typeof stash.widget == 'undefined') { stash.widget = {}; }
if (typeof stash.widget.mentionableTextarea == 'undefined') { stash.widget.mentionableTextarea = {}; }


stash.widget.mentionableTextarea.dialog = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  var output = '';
  var minimumInputLength__soy3 = 2;
  output += '<ul>';
  if (opt_data.results && opt_data.results.length) {
    var resultList7 = opt_data.results;
    var resultListLen7 = resultList7.length;
    for (var resultIndex7 = 0; resultIndex7 < resultListLen7; resultIndex7++) {
      var resultData7 = resultList7[resultIndex7];
      output += stash.widget.mentionableTextarea.result({result: resultData7, isActive: opt_data.activeItemIndex ? resultIndex7 == opt_data.activeItemIndex : resultIndex7 == 0});
    }
  } else {
    output += (opt_data.query && opt_data.query.length >= minimumInputLength__soy3) ? '<li class="no-results"><span>' + soy.$$escapeHtml("No matching users found") + '</span></li>' : '<li class="mentions-help"><span>' + soy.$$escapeHtml("Start typing to search for people") + '</span></li>';
  }
  output += '</ul>';
  return output;
};
if (goog.DEBUG) {
  stash.widget.mentionableTextarea.dialog.soyTemplateName = 'stash.widget.mentionableTextarea.dialog';
}


stash.widget.mentionableTextarea.result = function(opt_data, opt_ignored) {
  return '<li class="result ' + soy.$$escapeHtml(opt_data.isActive ? 'active' : '') + '">' + stash.widget.avatarWithNameAndEmail({size: 'small', person: opt_data.result}) + '</li>';
};
if (goog.DEBUG) {
  stash.widget.mentionableTextarea.result.soyTemplateName = 'stash.widget.mentionableTextarea.result';
}
;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:mentionable-textarea', location = '/static/widget/mentionable-textarea/mentionable-textarea.js' */
define("widget/mentionable-textarea","aui aui/progressive-dataset backbone jquery lodash textarea-caret-position xregexp stash/api/util/navbuilder util/events util/function model/page-state model/stash-user widget/autocomplete-dialog".split(" "),function(f,n,p,g,e,q,l,r,m,t,h,u,v){function d(){this.init.apply(this,arguments)}d.defaults={$container:g(document.body),selector:"textarea",dialogId:"mention-autocomplete-dialog"};d.prototype.init=function(a){this.options&&this.reset();this.options=g.extend({},
d.defaults,a);e.bindAll(this,"onKeyDown","onKeyPress","onPaste","onDocumentClick","updateDialogAnchorPosition","updateResults","onActivity","selectItem","highlightMatches");a=[];h.getPullRequest()?a=e.map([h.getPullRequest().getAuthor()].concat(h.getPullRequest().getReviewers().models,h.getPullRequest().getParticipants().models),function(a){return a.getUser()}):h.getCommitParticipants&&h.getCommitParticipants()&&(a=h.getCommitParticipants().pluck("user"));this.dataSource=w(a,this.matcher);this.dataSource.on("respond",
this.updateResults);this.dataSource.on("activity",this.onActivity);this.isMentioningSelector=e.map(this.options.selector.split(","),function(a){return g.trim(a)+".isMentioning"}).join(", ");this.options.$container.on("keypress",this.options.selector,this.onKeyPress);this.options.$container.on("keydown",this.isMentioningSelector,this.onKeyDown);this.options.$container.on("paste",this.isMentioningSelector,this.onPaste)};d.prototype.onKeyDown=function(a){if(this.dialog)switch(a.which){case f.keyCode.ENTER:case f.keyCode.TAB:this.selectHighlightedItem();
a.preventDefault();break;case f.keyCode.UP:this.dialog.moveSelectionUp();a.preventDefault();break;case f.keyCode.DOWN:this.dialog.moveSelectionDown();a.preventDefault();break;case f.keyCode.ESCAPE:this.endAutocomplete();a.preventDefault();a.stopPropagation();break;case f.keyCode.BACKSPACE:case f.keyCode.DELETE:this.onKeyPress(a)}};d.prototype.onKeyPress=function(a){a.which&&e.defer(e.bind(function(a){var c=g(a.target);c.hasClass("isMentioning")?this.updateAutocomplete():"@"===String.fromCharCode(a.which)&&
this.beginAutocomplete(c)},this),a)};d.prototype.onPaste=function(){e.defer(e.bind(this.updateAutocomplete,this))};d.prototype.onDocumentClick=function(a){var b=a.target;a=[];this.$textarea&&a.push(this.$textarea);this.dialog&&a.push(this.dialog.$el);e.any(a,function(a){return a.is(b)||g.contains(a[0],b)})||this.endAutocomplete()};d.prototype.beginAutocomplete=function(a){var b=a.getSelection().start-1;0<b&&/^\w$/.test(a.val().substr(b-1,1))||(this.$textarea=a,this.$textarea.addClass("isMentioning"),
this.mentionTriggerPos=b,this.resultsCollection=new p.Collection,this.dialog=new v({id:this.options.dialogId,collection:this.resultsCollection,minZIndex:this.options.$container.zIndex(),anchor:this.getCaretDocumentCoordinates(this.$textarea),template:stash.widget.mentionableTextarea.dialog,highlighter:this.highlightMatches}),this.dialog.on("itemSelected",this.selectItem),m.on("window.resize.debounced",this.updateDialogAnchorPosition),g(document).on("click focusin mousedown",this.onDocumentClick),
this.updateAutocomplete())};d.prototype.updateAutocomplete=function(){if(this.$textarea){this.currentCaretPos=this.$textarea.getSelection().start;var a=this.$textarea.val().substring(this.mentionTriggerPos,this.currentCaretPos);a&&0===a.indexOf("@")&&-1===a.indexOf("\n")?(a=a.substr(1),this.dataSource.query(a)):this.endAutocomplete()}};d.prototype.updateDialogAnchorPosition=function(){e.defer(e.bind(function(){this.dialog&&this.$textarea&&this.dialog.updateAnchorPosition(this.getCaretDocumentCoordinates(this.$textarea))},
this))};d.prototype.updateResults=function(a){this.resultsCollection&&(this.resultsCollection.query=a.query,this.resultsCollection.reset(a.results))};d.prototype.onActivity=function(a){this.dialog&&this.dialog.toggleSpinner(a.activity)};d.prototype.endAutocomplete=function(){this.$textarea&&(this.$textarea.removeClass("isMentioning"),this.$textarea=null);this.currentCaretPos=this.mentionTriggerPos=void 0;this.dialog&&(this.dialog.off("itemSelected",this.selectItem),this.dialog.remove(),this.dialog=
null);this.resultsCollection=null;m.off("window.resize.debounced",this.updateDialogAnchorPosition);g(document).off("click focusin mousedown",this.onDocumentClick)};d.prototype.selectHighlightedItem=function(){this.selectItem(this.dialog.getSelectedItemIndex())};d.prototype.selectItem=function(a){if(a=this.resultsCollection.at(a)){a=this.escapeUsername(a.getName());var b=this.$textarea.val(),c=b.substring(0,this.mentionTriggerPos+1),b=b.substring(this.currentCaretPos,b.length),k=c.length+a.length+
1;" "!==b.charAt(0)&&(b=" "+b);this.$textarea.val(c+a+b);this.$textarea.setSelection(k,k)}this.endAutocomplete()};d.prototype.matcher=function(a,b){if(h.getCurrentUser()&&a.getName()===h.getCurrentUser().getName())return!1;var c=l.cache("(\\b|^|[^\\p{L}\\p{N}])"+l.escape(b),"i"),k=[a.getName(),a.getEmailAddress(),a.getDisplayName()];return e.any(k,function(a){return!(!a||!c.test(a))})};d.prototype.getMatchParts=function(a,b){var c=l.cache("(^|.*?(\\b|\\())("+l.escape(b)+")(.*)","i"),k={text:a};-1<
a.toLowerCase().indexOf(b.toLowerCase())&&a.replace(c,function(a,b,c,d,e){k={prefix:b,match:d,suffix:e}});return k};d.prototype.highlightMatches=function(a,b){var c=this;a.find(".avatar-with-name, .email-address").each(function(){var a=g(this).contents().filter(function(){return this.nodeType===Node.TEXT_NODE}),d=e.reduce(c.getMatchParts(a.text(),b),function(a,b,c){return a+("match"===c?"\x3cb\x3e"+f.escapeHtml(b)+"\x3c/b\x3e":f.escapeHtml(b))},"");a.replaceWith(d)});return a};d.prototype.getCaretDocumentCoordinates=
function(a){var b=a.offset(),c=q(a[0],a[0].selectionStart);a=parseInt(a.css("font-size"),10);c.top+=b.top+a;c.left+=b.left;return c};d.prototype.escapeUsername=function(a){return/^\w*$/.test(a)?a:'"'+a.replace(/"/g,'\\"')+'"'};d.prototype.reset=function(){this.destroy();delete this.options;delete this.dataSource;delete this.$textarea;delete this.dialog;delete this.resultsCollection;delete this.mentionTriggerPos;delete this.currentCaretPos};d.prototype.destroy=function(){this.dialog&&(this.dialog.off("itemSelected",
this.selectItem),this.dialog.remove());this.dataSource.off("respond",this.updateResults);this.dataSource.off("activity",this.onActivity);this.options.$container.off("keypress",this.options.selector,this.onKeyPress);this.options.$container.off("keydown",this.isMentioningSelector,this.onKeyDown);this.options.$container.off("paste",this.isMentioningSelector,this.onPaste);m.off("window.resize.debounced",this.updateDialogAnchorPosition);g(document).off("click focusin mousedown",this.onDocumentClick)};
var w=e.once(function(a,b){var c=new n(a,{queryEndpoint:r.rest().users().build(),queryParamKey:"filter",queryData:{avatarSize:stash.widget.avatarSizeInPx({size:"small"}),permission:"LICENSED_USER"},maxResults:5,model:u,matcher:b});c.query=function(a){var b;this.value=a;b=this.getFilteredResults(a);this.respond(a,b);!a||!this._queryEndpoint||this.hasQueryCache(a)||!this.shouldGetMoreResults(b)||2>a.length||this.remoteQuery(a)}.bind(c);c.remoteQuery=function(a){var b=this.fetch(a);this.activeQueryCount++;
this.trigger("activity",{activity:!0});b.always(e.bind(function(){this.activeQueryCount--;this.trigger("activity",{activity:!!this.activeQueryCount})},this));b.done(e.bind(function(b,c,d){this.addQueryCache(a,b,d)},this));b.done(e.bind(function(){a=this.value;this.respond(a,this.getFilteredResults(a))},this))}.bind(c);c.remoteQuery=e.debounce(c.remoteQuery,300);c.parse=t.dot("values");c.getFilteredResults=function(a){var b=this.filter(function(b){return!!this.matcher(b,a)},this);this._maxResults&&
(b=e.take(b,this._maxResults));return b};return c});return d});;
;/* module-key = 'com.atlassian.stash.stash-bower-components-plugin:codemirror-raw', location = '/static/bower/CodeMirror/lib/codemirror.js' */
(function(q){if("object"==typeof exports&&"object"==typeof module)module.exports=q();else{if("function"==typeof define&&define.amd)return define([],q);this.CodeMirror=q()}})(function(){function q(a,b){if(!(this instanceof q))return new q(a,b);this.options=b=b?V(b):{};V(rf,b,!1);wc(b);var c=b.value;"string"==typeof c&&(c=new P(c,b.mode));this.doc=c;var d=new q.inputStyles[b.inputStyle](this),d=this.display=new sf(a,c,d);d.wrapper.CodeMirror=this;Ad(this);Bd(this);b.lineWrapping&&(this.display.wrapper.className+=
" CodeMirror-wrap");b.autofocus&&!ab&&d.input.focus();Cd(this);this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,cutIncoming:!1,draggingText:!1,highlight:new bb,keySeq:null,specialChars:null};var e=this;B&&11>C&&setTimeout(function(){e.display.input.reset(!0)},20);tf(this);Dd||(uf(),Dd=!0);Ja(this);this.curOp.forceUpdate=!0;Ed(this,c);b.autofocus&&!ab||e.hasFocus()?setTimeout(cb(xc,this),20):db(this);for(var f in Ka)if(Ka.hasOwnProperty(f))Ka[f](this,
b[f],Fd);Gd(this);b.finishInit&&b.finishInit(this);for(c=0;c<yc.length;++c)yc[c](this);La(this);J&&b.lineWrapping&&"optimizelegibility"==getComputedStyle(d.lineDiv).textRendering&&(d.lineDiv.style.textRendering="auto")}function sf(a,b,c){this.input=c;this.scrollbarFiller=t("div",null,"CodeMirror-scrollbar-filler");this.scrollbarFiller.setAttribute("cm-not-content","true");this.gutterFiller=t("div",null,"CodeMirror-gutter-filler");this.gutterFiller.setAttribute("cm-not-content","true");this.lineDiv=
t("div",null,"CodeMirror-code");this.selectionDiv=t("div",null,null,"position: relative; z-index: 1");this.cursorDiv=t("div",null,"CodeMirror-cursors");this.measure=t("div",null,"CodeMirror-measure");this.lineMeasure=t("div",null,"CodeMirror-measure");this.lineSpace=t("div",[this.measure,this.lineMeasure,this.selectionDiv,this.cursorDiv,this.lineDiv],null,"position: relative; outline: none");this.mover=t("div",[t("div",[this.lineSpace],"CodeMirror-lines")],null,"position: relative");this.sizer=t("div",
[this.mover],"CodeMirror-sizer");this.sizerWidth=null;this.heightForcer=t("div",null,null,"position: absolute; height: "+Hd+"px; width: 1px;");this.gutters=t("div",null,"CodeMirror-gutters");this.lineGutter=null;this.scroller=t("div",[this.sizer,this.heightForcer,this.gutters],"CodeMirror-scroll");this.scroller.setAttribute("tabIndex","-1");this.wrapper=t("div",[this.scrollbarFiller,this.gutterFiller,this.scroller],"CodeMirror");B&&8>C&&(this.gutters.style.zIndex=-1,this.scroller.style.paddingRight=
0);J||va&&ab||(this.scroller.draggable=!0);a&&(a.appendChild?a.appendChild(this.wrapper):a(this.wrapper));this.reportedViewFrom=this.reportedViewTo=this.viewFrom=this.viewTo=b.first;this.view=[];this.externalMeasured=this.renderedView=null;this.lastWrapHeight=this.lastWrapWidth=this.viewOffset=0;this.updateLineNumbers=null;this.nativeBarWidth=this.barHeight=this.barWidth=0;this.scrollbarsClipped=!1;this.lineNumWidth=this.lineNumInnerWidth=this.lineNumChars=null;this.alignWidgets=!1;this.maxLine=this.cachedCharWidth=
this.cachedTextHeight=this.cachedPaddingH=null;this.maxLineLength=0;this.maxLineChanged=!1;this.wheelDX=this.wheelDY=this.wheelStartX=this.wheelStartY=null;this.shift=!1;this.activeTouch=this.selForContextMenu=null;c.init(this)}function zc(a){a.doc.mode=q.getMode(a.options,a.doc.modeOption);eb(a)}function eb(a){a.doc.iter(function(a){a.stateAfter&&(a.stateAfter=null);a.styles&&(a.styles=null)});a.doc.frontier=a.doc.first;fb(a,100);a.state.modeGen++;a.curOp&&Q(a)}function Id(a){var b=wa(a.display),
c=a.options.lineWrapping,d=c&&Math.max(5,a.display.scroller.clientWidth/gb(a.display)-3);return function(e){if(xa(a.doc,e))return 0;var f=0;if(e.widgets)for(var g=0;g<e.widgets.length;g++)e.widgets[g].height&&(f+=e.widgets[g].height);return c?f+(Math.ceil(e.text.length/d)||1)*b:f+b}}function Ac(a){var b=a.doc,c=Id(a);b.iter(function(a){var b=c(a);b!=a.height&&ca(a,b)})}function Bd(a){a.display.wrapper.className=a.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+a.options.theme.replace(/(^|\s)\s*/g,
" cm-s-");hb(a)}function ib(a){Ad(a);Q(a);setTimeout(function(){Bc(a)},20)}function Ad(a){var b=a.display.gutters,c=a.options.gutters;ya(b);for(var d=0;d<c.length;++d){var e=c[d],f=b.appendChild(t("div",null,"CodeMirror-gutter "+e));"CodeMirror-linenumbers"==e&&(a.display.lineGutter=f,f.style.width=(a.display.lineNumWidth||1)+"px")}b.style.display=d?"":"none";Cc(a)}function Cc(a){a.display.sizer.style.marginLeft=a.display.gutters.offsetWidth+"px"}function Kb(a){if(0==a.height)return 0;for(var b=a.text.length,
c,d=a;c=za(d,!0);)c=c.find(0,!0),d=c.from.line,b+=c.from.ch-c.to.ch;for(d=a;c=za(d,!1);)c=c.find(0,!0),b-=d.text.length-c.from.ch,d=c.to.line,b+=d.text.length-c.to.ch;return b}function Dc(a){var b=a.display;a=a.doc;b.maxLine=u(a,a.first);b.maxLineLength=Kb(b.maxLine);b.maxLineChanged=!0;a.iter(function(a){var d=Kb(a);d>b.maxLineLength&&(b.maxLineLength=d,b.maxLine=a)})}function wc(a){var b=L(a.gutters,"CodeMirror-linenumbers");-1==b&&a.lineNumbers?a.gutters=a.gutters.concat(["CodeMirror-linenumbers"]):
-1<b&&!a.lineNumbers&&(a.gutters=a.gutters.slice(0),a.gutters.splice(b,1))}function jb(a){var b=a.display,c=b.gutters.offsetWidth,d=Math.round(a.doc.height+Ec(a.display));return{clientHeight:b.scroller.clientHeight,viewHeight:b.wrapper.clientHeight,scrollWidth:b.scroller.scrollWidth,clientWidth:b.scroller.clientWidth,viewWidth:b.wrapper.clientWidth,barLeft:a.options.fixedGutter?c:0,docHeight:d,scrollHeight:d+da(a)+b.barHeight,nativeBarWidth:b.nativeBarWidth,gutterWidth:c}}function Fc(a,b,c){this.cm=
c;var d=this.vert=t("div",[t("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),e=this.horiz=t("div",[t("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");a(d);a(e);v(d,"scroll",function(){d.clientHeight&&b(d.scrollTop,"vertical")});v(e,"scroll",function(){e.clientWidth&&b(e.scrollLeft,"horizontal")});this.checkedOverlay=!1;B&&8>C&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")}function Gc(){}function Cd(a){a.display.scrollbars&&(a.display.scrollbars.clear(),
a.display.scrollbars.addClass&&kb(a.display.wrapper,a.display.scrollbars.addClass));a.display.scrollbars=new q.scrollbarModel[a.options.scrollbarStyle](function(b){a.display.wrapper.insertBefore(b,a.display.scrollbarFiller);v(b,"mousedown",function(){a.state.focused&&setTimeout(function(){a.display.input.focus()},0)});b.setAttribute("cm-not-content","true")},function(b,c){"horizontal"==c?Ma(a,b):lb(a,b)},a);a.display.scrollbars.addClass&&mb(a.display.wrapper,a.display.scrollbars.addClass)}function Na(a,
b){b||(b=jb(a));var c=a.display.barWidth,d=a.display.barHeight;Jd(a,b);for(var e=0;4>e&&c!=a.display.barWidth||d!=a.display.barHeight;e++)c!=a.display.barWidth&&a.options.lineWrapping&&Lb(a),Jd(a,jb(a)),c=a.display.barWidth,d=a.display.barHeight}function Jd(a,b){var c=a.display,d=c.scrollbars.update(b);c.sizer.style.paddingRight=(c.barWidth=d.right)+"px";c.sizer.style.paddingBottom=(c.barHeight=d.bottom)+"px";d.right&&d.bottom?(c.scrollbarFiller.style.display="block",c.scrollbarFiller.style.height=
d.bottom+"px",c.scrollbarFiller.style.width=d.right+"px"):c.scrollbarFiller.style.display="";d.bottom&&a.options.coverGutterNextToScrollbar&&a.options.fixedGutter?(c.gutterFiller.style.display="block",c.gutterFiller.style.height=d.bottom+"px",c.gutterFiller.style.width=b.gutterWidth+"px"):c.gutterFiller.style.display=""}function Hc(a,b,c){var d=c&&null!=c.top?Math.max(0,c.top):a.scroller.scrollTop,d=Math.floor(d-a.lineSpace.offsetTop),e=c&&null!=c.bottom?c.bottom:d+a.wrapper.clientHeight,d=Aa(b,d),
e=Aa(b,e);if(c&&c.ensure){var f=c.ensure.from.line;c=c.ensure.to.line;f<d?(d=f,e=Aa(b,ea(u(b,f))+a.wrapper.clientHeight)):Math.min(c,b.lastLine())>=e&&(d=Aa(b,ea(u(b,c))-a.wrapper.clientHeight),e=c)}return{from:d,to:Math.max(e,d+1)}}function Bc(a){var b=a.display,c=b.view;if(b.alignWidgets||b.gutters.firstChild&&a.options.fixedGutter){for(var d=Ic(b)-b.scroller.scrollLeft+a.doc.scrollLeft,e=b.gutters.offsetWidth,f=d+"px",g=0;g<c.length;g++)if(!c[g].hidden){a.options.fixedGutter&&c[g].gutter&&(c[g].gutter.style.left=
f);var h=c[g].alignable;if(h)for(var k=0;k<h.length;k++)h[k].style.left=f}a.options.fixedGutter&&(b.gutters.style.left=d+e+"px")}}function Gd(a){if(!a.options.lineNumbers)return!1;var b=a.doc,b=Jc(a.options,b.first+b.size-1),c=a.display;if(b.length!=c.lineNumChars){var d=c.measure.appendChild(t("div",[t("div",b)],"CodeMirror-linenumber CodeMirror-gutter-elt")),e=d.firstChild.offsetWidth,d=d.offsetWidth-e;c.lineGutter.style.width="";c.lineNumInnerWidth=Math.max(e,c.lineGutter.offsetWidth-d)+1;c.lineNumWidth=
c.lineNumInnerWidth+d;c.lineNumChars=c.lineNumInnerWidth?b.length:-1;c.lineGutter.style.width=c.lineNumWidth+"px";Cc(a);return!0}return!1}function Jc(a,b){return String(a.lineNumberFormatter(b+a.firstLineNumber))}function Ic(a){return a.scroller.getBoundingClientRect().left-a.sizer.getBoundingClientRect().left}function Mb(a,b,c){var d=a.display;this.viewport=b;this.visible=Hc(d,a.doc,b);this.editorIsHidden=!d.wrapper.offsetWidth;this.wrapperHeight=d.wrapper.clientHeight;this.wrapperWidth=d.wrapper.clientWidth;
this.oldDisplayWidth=pa(a);this.force=c;this.dims=Kc(a);this.events=[]}function Lc(a,b){var c=a.display,d=a.doc;if(b.editorIsHidden)return qa(a),!1;if(!b.force&&b.visible.from>=c.viewFrom&&b.visible.to<=c.viewTo&&(null==c.updateLineNumbers||c.updateLineNumbers>=c.viewTo)&&c.renderedView==c.view&&0==Kd(a))return!1;Gd(a)&&(qa(a),b.dims=Kc(a));var e=d.first+d.size,f=Math.max(b.visible.from-a.options.viewportMargin,d.first),g=Math.min(e,b.visible.to+a.options.viewportMargin);c.viewFrom<f&&20>f-c.viewFrom&&
(f=Math.max(d.first,c.viewFrom));c.viewTo>g&&20>c.viewTo-g&&(g=Math.min(e,c.viewTo));ra&&(f=Mc(a.doc,f),g=Ld(a.doc,g));d=f!=c.viewFrom||g!=c.viewTo||c.lastWrapHeight!=b.wrapperHeight||c.lastWrapWidth!=b.wrapperWidth;e=a.display;0==e.view.length||f>=e.viewTo||g<=e.viewFrom?(e.view=Nb(a,f,g),e.viewFrom=f):(e.viewFrom>f?e.view=Nb(a,f,e.viewFrom).concat(e.view):e.viewFrom<f&&(e.view=e.view.slice(Ba(a,f))),e.viewFrom=f,e.viewTo<g?e.view=e.view.concat(Nb(a,e.viewTo,g)):e.viewTo>g&&(e.view=e.view.slice(0,
Ba(a,g))));e.viewTo=g;c.viewOffset=ea(u(a.doc,c.viewFrom));a.display.mover.style.top=c.viewOffset+"px";g=Kd(a);if(!d&&0==g&&!b.force&&c.renderedView==c.view&&(null==c.updateLineNumbers||c.updateLineNumbers>=c.viewTo))return!1;f=fa();4<g&&(c.lineDiv.style.display="none");vf(a,c.updateLineNumbers,b.dims);4<g&&(c.lineDiv.style.display="");c.renderedView=c.view;f&&fa()!=f&&f.offsetHeight&&f.focus();ya(c.cursorDiv);ya(c.selectionDiv);c.gutters.style.height=0;d&&(c.lastWrapHeight=b.wrapperHeight,c.lastWrapWidth=
b.wrapperWidth,fb(a,400));c.updateLineNumbers=null;return!0}function Md(a,b){for(var c=b.viewport,d=!0;;d=!1){if(!d||!a.options.lineWrapping||b.oldDisplayWidth==pa(a))if(c&&null!=c.top&&(c={top:Math.min(a.doc.height+Ec(a.display)-Nc(a),c.top)}),b.visible=Hc(a.display,a.doc,c),b.visible.from>=a.display.viewFrom&&b.visible.to<=a.display.viewTo)break;if(!Lc(a,b))break;Lb(a);d=jb(a);nb(a);Oc(a,d);Na(a,d)}b.signal(a,"update",a);if(a.display.viewFrom!=a.display.reportedViewFrom||a.display.viewTo!=a.display.reportedViewTo)b.signal(a,
"viewportChange",a,a.display.viewFrom,a.display.viewTo),a.display.reportedViewFrom=a.display.viewFrom,a.display.reportedViewTo=a.display.viewTo}function Pc(a,b){var c=new Mb(a,b);if(Lc(a,c)){Lb(a);Md(a,c);var d=jb(a);nb(a);Oc(a,d);Na(a,d);c.finish()}}function Oc(a,b){a.display.sizer.style.minHeight=b.docHeight+"px";var c=b.docHeight+a.display.barHeight;a.display.heightForcer.style.top=c+"px";a.display.gutters.style.height=Math.max(c+da(a),b.clientHeight)+"px"}function Lb(a){a=a.display;for(var b=
a.lineDiv.offsetTop,c=0;c<a.view.length;c++){var d=a.view[c],e;if(!d.hidden){if(B&&8>C){var f=d.node.offsetTop+d.node.offsetHeight;e=f-b;b=f}else e=d.node.getBoundingClientRect(),e=e.bottom-e.top;f=d.line.height-e;2>e&&(e=wa(a));if(.001<f||-.001>f)if(ca(d.line,e),Nd(d.line),d.rest)for(e=0;e<d.rest.length;e++)Nd(d.rest[e])}}}function Nd(a){if(a.widgets)for(var b=0;b<a.widgets.length;++b)a.widgets[b].height=a.widgets[b].node.offsetHeight}function Kc(a){for(var b=a.display,c={},d={},e=b.gutters.clientLeft,
f=b.gutters.firstChild,g=0;f;f=f.nextSibling,++g)c[a.options.gutters[g]]=f.offsetLeft+f.clientLeft+e,d[a.options.gutters[g]]=f.clientWidth;return{fixedPos:Ic(b),gutterTotalWidth:b.gutters.offsetWidth,gutterLeft:c,gutterWidth:d,wrapperWidth:b.wrapper.clientWidth}}function vf(a,b,c){function d(b){var c=b.nextSibling;J&&W&&a.display.currentWheelTarget==b?b.style.display="none":b.parentNode.removeChild(b);return c}for(var e=a.display,f=a.options.lineNumbers,g=e.lineDiv,h=g.firstChild,k=e.view,e=e.viewFrom,
l=0;l<k.length;l++){var m=k[l];if(!m.hidden)if(m.node&&m.node.parentNode==g){for(;h!=m.node;)h=d(h);h=f&&null!=b&&b<=e&&m.lineNumber;m.changes&&(-1<L(m.changes,"gutter")&&(h=!1),Od(a,m,e,c));h&&(ya(m.lineNumber),m.lineNumber.appendChild(document.createTextNode(Jc(a.options,e))));h=m.node.nextSibling}else{var p=wf(a,m,e,c);g.insertBefore(p,h)}e+=m.size}for(;h;)h=d(h)}function Od(a,b,c,d){for(var e=0;e<b.changes.length;e++){var f=b.changes[e];if("text"==f){var f=b,g=f.text.className,h=Pd(a,f);f.text==
f.node&&(f.node=h.pre);f.text.parentNode.replaceChild(h.pre,f.text);f.text=h.pre;h.bgClass!=f.bgClass||h.textClass!=f.textClass?(f.bgClass=h.bgClass,f.textClass=h.textClass,Qc(f)):g&&(f.text.className=g)}else if("gutter"==f)Qd(a,b,c,d);else if("class"==f)Qc(b);else if("widget"==f){f=a;g=b;h=d;g.alignable&&(g.alignable=null);for(var k=g.node.firstChild,l=void 0;k;k=l)l=k.nextSibling,"CodeMirror-linewidget"==k.className&&g.node.removeChild(k);Rd(f,g,h)}}b.changes=null}function Ob(a){a.node==a.text&&
(a.node=t("div",null,null,"position: relative"),a.text.parentNode&&a.text.parentNode.replaceChild(a.node,a.text),a.node.appendChild(a.text),B&&8>C&&(a.node.style.zIndex=2));return a.node}function Pd(a,b){var c=a.display.externalMeasured;return c&&c.line==b.line?(a.display.externalMeasured=null,b.measure=c.measure,c.built):Sd(a,b)}function Qc(a){var b=a.bgClass?a.bgClass+" "+(a.line.bgClass||""):a.line.bgClass;b&&(b+=" CodeMirror-linebackground");if(a.background)b?a.background.className=b:(a.background.parentNode.removeChild(a.background),
a.background=null);else if(b){var c=Ob(a);a.background=c.insertBefore(t("div",null,b),c.firstChild)}a.line.wrapClass?Ob(a).className=a.line.wrapClass:a.node!=a.text&&(a.node.className="");a.text.className=(a.textClass?a.textClass+" "+(a.line.textClass||""):a.line.textClass)||""}function Qd(a,b,c,d){b.gutter&&(b.node.removeChild(b.gutter),b.gutter=null);var e=b.line.gutterMarkers;if(a.options.lineNumbers||e){var f=Ob(b),g=b.gutter=t("div",null,"CodeMirror-gutter-wrapper","left: "+(a.options.fixedGutter?
d.fixedPos:-d.gutterTotalWidth)+"px; width: "+d.gutterTotalWidth+"px");a.display.input.setUneditable(g);f.insertBefore(g,b.text);b.line.gutterClass&&(g.className+=" "+b.line.gutterClass);!a.options.lineNumbers||e&&e["CodeMirror-linenumbers"]||(b.lineNumber=g.appendChild(t("div",Jc(a.options,c),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+d.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+a.display.lineNumInnerWidth+"px")));if(e)for(b=0;b<a.options.gutters.length;++b)c=a.options.gutters[b],
(f=e.hasOwnProperty(c)&&e[c])&&g.appendChild(t("div",[f],"CodeMirror-gutter-elt","left: "+d.gutterLeft[c]+"px; width: "+d.gutterWidth[c]+"px"))}}function wf(a,b,c,d){var e=Pd(a,b);b.text=b.node=e.pre;e.bgClass&&(b.bgClass=e.bgClass);e.textClass&&(b.textClass=e.textClass);Qc(b);Qd(a,b,c,d);Rd(a,b,d);return b.node}function Rd(a,b,c){Td(a,b.line,b,c,!0);if(b.rest)for(var d=0;d<b.rest.length;d++)Td(a,b.rest[d],b,c,!1)}function Td(a,b,c,d,e){if(b.widgets){var f=Ob(c),g=0;for(b=b.widgets;g<b.length;++g){var h=
b[g],k=t("div",[h.node],"CodeMirror-linewidget");h.handleMouseEvents||k.setAttribute("cm-ignore-events","true");var l=h,m=k,p=d;if(l.noHScroll){(c.alignable||(c.alignable=[])).push(m);var n=p.wrapperWidth;m.style.left=p.fixedPos+"px";l.coverGutter||(n-=p.gutterTotalWidth,m.style.paddingLeft=p.gutterTotalWidth+"px");m.style.width=n+"px"}l.coverGutter&&(m.style.zIndex=5,m.style.position="relative",l.noHScroll||(m.style.marginLeft=-p.gutterTotalWidth+"px"));a.display.input.setUneditable(k);e&&h.above?
f.insertBefore(k,c.gutter||c.text):f.appendChild(k);M(h,"redraw")}}}function Rc(a){return r(a.line,a.ch)}function Pb(a,b){return 0>y(a,b)?b:a}function Qb(a,b){return 0>y(a,b)?a:b}function Ud(a){a.state.focused||(a.display.input.focus(),xc(a))}function Rb(a){return a.options.readOnly||a.doc.cantEdit}function Sc(a,b,c,d,e){var f=a.doc;a.display.shift=!1;d||(d=f.sel);var g=sa(b),h=null;a.state.pasteIncoming&&1<d.ranges.length&&(X&&X.join("\n")==b?h=0==d.ranges.length%X.length&&ob(X,sa):g.length==d.ranges.length&&
(h=ob(g,function(a){return[a]})));for(var k=d.ranges.length-1;0<=k;k--){var l=d.ranges[k],m=l.from(),p=l.to();l.empty()&&(c&&0<c?m=r(m.line,m.ch-c):a.state.overwrite&&!a.state.pasteIncoming&&(p=r(p.line,Math.min(u(f,p.line).text.length,p.ch+A(g).length))));l=a.curOp.updateInput;m={from:m,to:p,text:h?h[k%h.length]:g,origin:e||(a.state.pasteIncoming?"paste":a.state.cutIncoming?"cut":"+input")};Oa(a.doc,m);M(a,"inputRead",a,m)}b&&!a.state.pasteIncoming&&Vd(a,b);Pa(a);a.curOp.updateInput=l;a.curOp.typing=
!0;a.state.pasteIncoming=a.state.cutIncoming=!1}function Vd(a,b){if(a.options.electricChars&&a.options.smartIndent)for(var c=a.doc.sel,d=c.ranges.length-1;0<=d;d--){var e=c.ranges[d];if(!(100<e.head.ch||d&&c.ranges[d-1].head.line==e.head.line)){var f=a.getModeAt(e.head),g=!1;if(f.electricChars)for(var h=0;h<f.electricChars.length;h++){if(-1<b.indexOf(f.electricChars.charAt(h))){g=pb(a,e.head.line,"smart");break}}else f.electricInput&&f.electricInput.test(u(a.doc,e.head.line).text.slice(0,e.head.ch))&&
(g=pb(a,e.head.line,"smart"));g&&M(a,"electricInput",a,e.head.line)}}}function Wd(a){for(var b=[],c=[],d=0;d<a.doc.sel.ranges.length;d++){var e=a.doc.sel.ranges[d].head.line,e={anchor:r(e,0),head:r(e+1,0)};c.push(e);b.push(a.getRange(e.anchor,e.head))}return{text:b,ranges:c}}function Xd(a){a.setAttribute("autocorrect","off");a.setAttribute("autocapitalize","off");a.setAttribute("spellcheck","false")}function Tc(a){this.cm=a;this.prevInput="";this.pollingFast=!1;this.polling=new bb;this.hasSelection=
this.inaccurateSelection=!1;this.composing=null}function Yd(){var a=t("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em; outline: none"),b=t("div",[a],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");J?a.style.width="1000px":a.setAttribute("wrap","off");Qa&&(a.style.border="1px solid black");Xd(a);return b}function Uc(a){this.cm=a;this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null;this.polling=new bb;this.gracePeriod=
!1}function Zd(a,b){var c=Vc(a,b.line);if(!c||c.hidden)return null;var d=u(a.doc,b.line),c=$d(c,d,b.line),d=Y(d),e="left";d&&(e=Sb(d,b.ch)%2?"right":"left");c=ae(c.map,b.ch,e);c.offset="right"==c.collapse?c.end:c.start;return c}function Ra(a,b){b&&(a.bad=!0);return a}function Tb(a,b,c){var d;if(b==a.display.lineDiv){d=a.display.lineDiv.childNodes[c];if(!d)return Ra(a.clipPos(r(a.display.viewTo-1)),!0);b=null;c=0}else for(d=b;;d=d.parentNode){if(!d||d==a.display.lineDiv)return null;if(d.parentNode&&
d.parentNode==a.display.lineDiv)break}for(var e=0;e<a.display.view.length;e++){var f=a.display.view[e];if(f.node==d)return xf(f,b,c)}}function xf(a,b,c){function d(b,c,d){for(var e=-1;e<(l?l.length:0);e++)for(var f=0>e?k.map:l[e],g=0;g<f.length;g+=3){var h=f[g+2];if(h==b||h==c){c=E(0>e?a.line:a.rest[e]);e=f[g]+d;if(0>d||h!=b)e=f[g+(d?1:0)];return r(c,e)}}}var e=a.text.firstChild,f=!1;if(!b||!Wc(e,b))return Ra(r(E(a.line),0),!0);if(b==e&&(f=!0,b=e.childNodes[c],c=0,!b))return c=a.rest?A(a.rest):a.line,
Ra(r(E(c),c.text.length),f);var g=3==b.nodeType?b:null,h=b;g||1!=b.childNodes.length||3!=b.firstChild.nodeType||(g=b.firstChild,c&&(c=g.nodeValue.length));for(;h.parentNode!=e;)h=h.parentNode;var k=a.measure,l=k.maps;if(b=d(g,h,c))return Ra(b,f);e=h.nextSibling;for(g=g?g.nodeValue.length-c:0;e;e=e.nextSibling){if(b=d(e,e.firstChild,0))return Ra(r(b.line,b.ch-g),f);g+=e.textContent.length}h=h.previousSibling;for(g=c;h;h=h.previousSibling){if(b=d(h,h.firstChild,-1))return Ra(r(b.line,b.ch+g),f);g+=
e.textContent.length}}function yf(a,b,c,d,e){function f(a){return function(b){return b.id==a}}function g(b){if(1==b.nodeType){var c=b.getAttribute("cm-text");if(null!=c)""==c&&(c=b.textContent.replace(/\u200b/g,"")),h+=c;else{var c=b.getAttribute("cm-marker"),p;if(c)b=a.findMarks(r(d,0),r(e+1,0),f(+c)),b.length&&(p=b[0].find())&&(h+=Ca(a.doc,p.from,p.to).join("\n"));else if("false"!=b.getAttribute("contenteditable")){for(p=0;p<b.childNodes.length;p++)g(b.childNodes[p]);/^(pre|div|p)$/i.test(b.nodeName)&&
(k=!0)}}}else 3==b.nodeType&&(b=b.nodeValue)&&(k&&(h+="\n",k=!1),h+=b)}for(var h="",k=!1;;){g(b);if(b==c)break;b=b.nextSibling}return h}function la(a,b){this.ranges=a;this.primIndex=b}function z(a,b){this.anchor=a;this.head=b}function Z(a,b){var c=a[b];a.sort(function(a,b){return y(a.from(),b.from())});b=L(a,c);for(c=1;c<a.length;c++){var d=a[c],e=a[c-1];if(0<=y(e.to(),d.from())){var f=Qb(e.from(),d.from()),g=Pb(e.to(),d.to()),d=e.empty()?d.from()==d.head:e.from()==e.head;c<=b&&--b;a.splice(--c,2,
new z(d?g:f,d?f:g))}}return new la(a,b)}function ga(a,b){return new la([new z(a,b||a)],0)}function x(a,b){if(b.line<a.first)return r(a.first,0);var c=a.first+a.size-1;if(b.line>c)return r(c,u(a,c).text.length);var c=u(a,b.line).text.length,d=b.ch,c=null==d||d>c?r(b.line,c):0>d?r(b.line,0):b;return c}function qb(a,b){return b>=a.first&&b<a.first+a.size}function rb(a,b,c,d){return a.cm&&a.cm.display.shift||a.extend?(a=b.anchor,d&&(b=0>y(c,a),b!=0>y(d,a)?(a=c,c=d):b!=0>y(c,d)&&(c=d)),new z(a,c)):new z(d||
c,c)}function Ub(a,b,c,d){G(a,new la([rb(a,a.sel.primary(),b,c)],0),d)}function be(a,b,c){for(var d=[],e=0;e<a.sel.ranges.length;e++)d[e]=rb(a,a.sel.ranges[e],b[e],null);b=Z(d,a.sel.primIndex);G(a,b,c)}function Xc(a,b,c,d){var e=a.sel.ranges.slice(0);e[b]=c;G(a,Z(e,a.sel.primIndex),d)}function zf(a,b){var c={ranges:b.ranges,update:function(b){this.ranges=[];for(var c=0;c<b.length;c++)this.ranges[c]=new z(x(a,b[c].anchor),x(a,b[c].head))}};K(a,"beforeSelectionChange",a,c);a.cm&&K(a.cm,"beforeSelectionChange",
a.cm,c);return c.ranges!=b.ranges?Z(c.ranges,c.ranges.length-1):b}function ce(a,b,c){var d=a.history.done,e=A(d);e&&e.ranges?(d[d.length-1]=b,Vb(a,b,c)):G(a,b,c)}function G(a,b,c){Vb(a,b,c);b=a.sel;var d=a.cm?a.cm.curOp.id:NaN,e=a.history,f=c&&c.origin,g;if(!(g=d==e.lastSelOp)&&(g=f&&e.lastSelOrigin==f)&&!(g=e.lastModTime==e.lastSelTime&&e.lastOrigin==f)){g=A(e.done);var h=f.charAt(0);g="*"==h||"+"==h&&g.ranges.length==b.ranges.length&&g.somethingSelected()==b.somethingSelected()&&new Date-a.history.lastSelTime<=
(a.cm?a.cm.options.historyEventDelay:500)}g?e.done[e.done.length-1]=b:Wb(b,e.done);e.lastSelTime=+new Date;e.lastSelOrigin=f;e.lastSelOp=d;c&&!1!==c.clearRedo&&de(e.undone)}function Vb(a,b,c){if(S(a,"beforeSelectionChange")||a.cm&&S(a.cm,"beforeSelectionChange"))b=zf(a,b);var d=c&&c.bias||(0>y(b.primary().head,a.sel.primary().head)?-1:1);ee(a,fe(a,b,d,!0));c&&!1===c.scroll||!a.cm||Pa(a.cm)}function ee(a,b){b.equals(a.sel)||(a.sel=b,a.cm&&(a.cm.curOp.updateInput=a.cm.curOp.selectionChanged=!0,ge(a.cm)),
M(a,"cursorActivity",a))}function he(a){ee(a,fe(a,a.sel,null,!1),ha)}function fe(a,b,c,d){for(var e,f=0;f<b.ranges.length;f++){var g=b.ranges[f],h=Xb(a,g.anchor,c,d),k=Xb(a,g.head,c,d);if(e||h!=g.anchor||k!=g.head)e||(e=b.ranges.slice(0,f)),e[f]=new z(h,k)}return e?Z(e,b.primIndex):b}function Xb(a,b,c,d){var e=!1,f=b,g=c||1;a.cantEdit=!1;a:for(;;){var h=u(a,f.line);if(h.markedSpans)for(var k=0;k<h.markedSpans.length;++k){var l=h.markedSpans[k],m=l.marker;if((null==l.from||(m.inclusiveLeft?l.from<=
f.ch:l.from<f.ch))&&(null==l.to||(m.inclusiveRight?l.to>=f.ch:l.to>f.ch))){if(d&&(K(m,"beforeCursorEnter"),m.explicitlyCleared))if(h.markedSpans){--k;continue}else break;if(m.atomic){k=m.find(0>g?-1:1);if(0==y(k,f)&&(k.ch+=g,0>k.ch?k=k.line>a.first?x(a,r(k.line-1)):null:k.ch>h.text.length&&(k=k.line<a.first+a.size-1?r(k.line+1,0):null),!k)){if(e){if(!d)return Xb(a,b,c,!0);a.cantEdit=!0;return r(a.first,0)}e=!0;k=b;g=-g}f=k;continue a}}}return f}}function nb(a){a.display.input.showSelection(a.display.input.prepareSelection())}
function ie(a,b){for(var c=a.doc,d={},e=d.cursors=document.createDocumentFragment(),f=d.selection=document.createDocumentFragment(),g=0;g<c.sel.ranges.length;g++)if(!1!==b||g!=c.sel.primIndex){var h=c.sel.ranges[g],k=h.empty();if(k||a.options.showCursorWhenSelecting){var l=a,m=e,p=ma(l,h.head,"div",null,null,!l.options.singleCursorHeightPerLine),n=m.appendChild(t("div","\u00a0","CodeMirror-cursor"));n.style.left=p.left+"px";n.style.top=p.top+"px";n.style.height=Math.max(0,p.bottom-p.top)*l.options.cursorHeight+
"px";p.other&&(l=m.appendChild(t("div","\u00a0","CodeMirror-cursor CodeMirror-secondarycursor")),l.style.display="",l.style.left=p.other.left+"px",l.style.top=p.other.top+"px",l.style.height=.85*(p.other.bottom-p.other.top)+"px")}k||Af(a,h,f)}return d}function Af(a,b,c){function d(a,b,c,d){0>b&&(b=0);b=Math.round(b);d=Math.round(d);h.appendChild(t("div",null,"CodeMirror-selected","position: absolute; left: "+a+"px; top: "+b+"px; width: "+(null==c?m-a:c)+"px; height: "+(d-b)+"px"))}function e(b,c,
e){var f=u(g,b),h=f.text.length,k,p;Bf(Y(f),c||0,null==e?h:e,function(g,q,t){var u=Yb(a,r(b,g),"div",f,"left"),v,x;g==q?(v=u,t=x=u.left):(v=Yb(a,r(b,q-1),"div",f,"right"),"rtl"==t&&(t=u,u=v,v=t),t=u.left,x=v.right);null==c&&0==g&&(t=l);3<v.top-u.top&&(d(t,u.top,null,u.bottom),t=l,u.bottom<v.top&&d(t,u.bottom,null,v.top));null==e&&q==h&&(x=m);if(!k||u.top<k.top||u.top==k.top&&u.left<k.left)k=u;if(!p||v.bottom>p.bottom||v.bottom==p.bottom&&v.right>p.right)p=v;t<l+1&&(t=l);d(t,v.top,x-t,v.bottom)});
return{start:k,end:p}}var f=a.display,g=a.doc,h=document.createDocumentFragment(),k=je(a.display),l=k.left,m=Math.max(f.sizerWidth,pa(a)-f.sizer.offsetLeft)-k.right,f=b.from();b=b.to();if(f.line==b.line)e(f.line,f.ch,b.ch);else{var p=u(g,f.line),k=u(g,b.line),k=ia(p)==ia(k),f=e(f.line,f.ch,k?p.text.length+1:null).end;b=e(b.line,k?0:null,b.ch).start;k&&(f.top<b.top-2?(d(f.right,f.top,null,f.bottom),d(l,b.top,b.left,b.bottom)):d(f.right,f.top,b.left-f.right,f.bottom));f.bottom<b.top&&d(l,f.bottom,null,
b.top)}c.appendChild(h)}function Yc(a){if(a.state.focused){var b=a.display;clearInterval(b.blinker);var c=!0;b.cursorDiv.style.visibility="";0<a.options.cursorBlinkRate?b.blinker=setInterval(function(){b.cursorDiv.style.visibility=(c=!c)?"":"hidden"},a.options.cursorBlinkRate):0>a.options.cursorBlinkRate&&(b.cursorDiv.style.visibility="hidden")}}function fb(a,b){a.doc.mode.startState&&a.doc.frontier<a.display.viewTo&&a.state.highlight.set(b,cb(Cf,a))}function Cf(a){var b=a.doc;b.frontier<b.first&&
(b.frontier=b.first);if(!(b.frontier>=a.display.viewTo)){var c=+new Date+a.options.workTime,d=Sa(b.mode,sb(a,b.frontier)),e=[];b.iter(b.frontier,Math.min(b.first+b.size,a.display.viewTo+500),function(f){if(b.frontier>=a.display.viewFrom){var g=f.styles,h=ke(a,f,d,!0);f.styles=h.styles;var k=f.styleClasses;(h=h.classes)?f.styleClasses=h:k&&(f.styleClasses=null);k=!g||g.length!=f.styles.length||k!=h&&(!k||!h||k.bgClass!=h.bgClass||k.textClass!=h.textClass);for(h=0;!k&&h<g.length;++h)k=g[h]!=f.styles[h];
k&&e.push(b.frontier);f.stateAfter=Sa(b.mode,d)}else Zc(a,f.text,d),f.stateAfter=0==b.frontier%5?Sa(b.mode,d):null;++b.frontier;if(+new Date>c)return fb(a,a.options.workDelay),!0});e.length&&T(a,function(){for(var b=0;b<e.length;b++)na(a,e[b],"text")})}}function Df(a,b,c){for(var d,e,f=a.doc,g=c?-1:b-(a.doc.mode.innerMode?1E3:100);b>g;--b){if(b<=f.first)return f.first;var h=u(f,b-1);if(h.stateAfter&&(!c||b<=f.frontier))return b;h=aa(h.text,null,a.options.tabSize);if(null==e||d>h)e=b-1,d=h}return e}
function sb(a,b,c){var d=a.doc,e=a.display;if(!d.mode.startState)return!0;var f=Df(a,b,c),g=f>d.first&&u(d,f-1).stateAfter,g=g?Sa(d.mode,g):Ef(d.mode);d.iter(f,b,function(c){Zc(a,c.text,g);c.stateAfter=f==b-1||0==f%5||f>=e.viewFrom&&f<e.viewTo?Sa(d.mode,g):null;++f});c&&(d.frontier=f);return g}function Ec(a){return a.mover.offsetHeight-a.lineSpace.offsetHeight}function je(a){if(a.cachedPaddingH)return a.cachedPaddingH;var b=U(a.measure,t("pre","x")),b=window.getComputedStyle?window.getComputedStyle(b):
b.currentStyle,b={left:parseInt(b.paddingLeft),right:parseInt(b.paddingRight)};isNaN(b.left)||isNaN(b.right)||(a.cachedPaddingH=b);return b}function da(a){return Hd-a.display.nativeBarWidth}function pa(a){return a.display.scroller.clientWidth-da(a)-a.display.barWidth}function Nc(a){return a.display.scroller.clientHeight-da(a)-a.display.barHeight}function $d(a,b,c){if(a.line==b)return{map:a.measure.map,cache:a.measure.cache};for(var d=0;d<a.rest.length;d++)if(a.rest[d]==b)return{map:a.measure.maps[d],
cache:a.measure.caches[d]};for(d=0;d<a.rest.length;d++)if(E(a.rest[d])>c)return{map:a.measure.maps[d],cache:a.measure.caches[d],before:!0}}function Vc(a,b){if(b>=a.display.viewFrom&&b<a.display.viewTo)return a.display.view[Ba(a,b)];var c=a.display.externalMeasured;if(c&&b>=c.lineN&&b<c.lineN+c.size)return c}function Zb(a,b){var c=E(b),d=Vc(a,c);d&&!d.text?d=null:d&&d.changes&&Od(a,d,c,Kc(a));if(!d){var e;e=ia(b);d=E(e);e=a.display.externalMeasured=new le(a.doc,e,d);e.lineN=d;d=e.built=Sd(a,e);e.text=
d.pre;U(a.display.lineMeasure,d.pre);d=e}c=$d(d,b,c);return{line:b,view:d,rect:null,map:c.map,cache:c.cache,before:c.before,hasHeights:!1}}function $c(a,b,c,d,e){b.before&&(c=-1);var f=c+(d||"");if(b.cache.hasOwnProperty(f))a=b.cache[f];else{b.rect||(b.rect=b.view.text.getBoundingClientRect());if(!b.hasHeights){var g=b.view,h=b.rect,k=a.options.lineWrapping,l=k&&pa(a);if(!g.measure.heights||k&&g.measure.width!=l){var m=g.measure.heights=[];if(k)for(g.measure.width=l,g=g.text.firstChild.getClientRects(),
k=0;k<g.length-1;k++){var l=g[k],p=g[k+1];2<Math.abs(l.bottom-p.bottom)&&m.push((l.bottom+p.top)/2-h.top)}m.push(h.bottom-h.top)}b.hasHeights=!0}g=d;k=ae(b.map,c,g);d=k.node;h=k.start;l=k.end;c=k.collapse;var n;if(3==d.nodeType){for(m=0;4>m;m++){for(;h&&tb(b.line.text.charAt(k.coverStart+h));)--h;for(;k.coverStart+l<k.coverEnd&&tb(b.line.text.charAt(k.coverStart+l));)++l;if(B&&9>C&&0==h&&l==k.coverEnd-k.coverStart)n=d.parentNode.getBoundingClientRect();else if(B&&a.options.lineWrapping){var H=Da(d,
h,l).getClientRects();n=H.length?H["right"==g?H.length-1:0]:ad}else n=Da(d,h,l).getBoundingClientRect()||ad;if(n.left||n.right||0==h)break;l=h;--h;c="right"}B&&11>C&&((H=!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI)||(null!=bd?H=bd:(m=U(a.display.measure,t("span","x")),H=m.getBoundingClientRect(),m=Da(m,0,1).getBoundingClientRect(),H=bd=1<Math.abs(H.left-m.left)),H=!H),H||(H=screen.logicalXDPI/screen.deviceXDPI,m=screen.logicalYDPI/screen.deviceYDPI,n={left:n.left*
H,right:n.right*H,top:n.top*m,bottom:n.bottom*m}))}else 0<h&&(c=g="right"),n=a.options.lineWrapping&&1<(H=d.getClientRects()).length?H["right"==g?H.length-1:0]:d.getBoundingClientRect();!(B&&9>C)||h||n&&(n.left||n.right)||(n=(n=d.parentNode.getClientRects()[0])?{left:n.left,right:n.left+gb(a.display),top:n.top,bottom:n.bottom}:ad);H=n.top-b.rect.top;d=n.bottom-b.rect.top;h=(H+d)/2;g=b.view.measure.heights;for(m=0;m<g.length-1&&!(h<g[m]);m++);c={left:("right"==c?n.right:n.left)-b.rect.left,right:("left"==
c?n.left:n.right)-b.rect.left,top:m?g[m-1]:0,bottom:g[m]};n.left||n.right||(c.bogus=!0);a.options.singleCursorHeightPerLine||(c.rtop=H,c.rbottom=d);a=c;a.bogus||(b.cache[f]=a)}return{left:a.left,right:a.right,top:e?a.rtop:a.top,bottom:e?a.rbottom:a.bottom}}function ae(a,b,c){for(var d,e,f,g,h=0;h<a.length;h+=3){var k=a[h],l=a[h+1];if(b<k)e=0,f=1,g="left";else if(b<l)e=b-k,f=e+1;else if(h==a.length-3||b==l&&a[h+3]>b)f=l-k,e=f-1,b>=l&&(g="right");if(null!=e){d=a[h+2];k==l&&c==(d.insertLeft?"left":"right")&&
(g=c);if("left"==c&&0==e)for(;h&&a[h-2]==a[h-3]&&a[h-1].insertLeft;)d=a[(h-=3)+2],g="left";if("right"==c&&e==l-k)for(;h<a.length-3&&a[h+3]==a[h+4]&&!a[h+5].insertLeft;)d=a[(h+=3)+2],g="right";break}}return{node:d,start:e,end:f,collapse:g,coverStart:k,coverEnd:l}}function me(a){if(a.measure&&(a.measure.cache={},a.measure.heights=null,a.rest))for(var b=0;b<a.rest.length;b++)a.measure.caches[b]={}}function ne(a){a.display.externalMeasure=null;ya(a.display.lineMeasure);for(var b=0;b<a.display.view.length;b++)me(a.display.view[b])}
function hb(a){ne(a);a.display.cachedCharWidth=a.display.cachedTextHeight=a.display.cachedPaddingH=null;a.options.lineWrapping||(a.display.maxLineChanged=!0);a.display.lineNumChars=null}function cd(a,b,c,d){if(b.widgets)for(var e=0;e<b.widgets.length;++e)if(b.widgets[e].above){var f=ub(b.widgets[e]);c.top+=f;c.bottom+=f}if("line"==d)return c;d||(d="local");b=ea(b);b="local"==d?b+a.display.lineSpace.offsetTop:b-a.display.viewOffset;if("page"==d||"window"==d)a=a.display.lineSpace.getBoundingClientRect(),
b+=a.top+("window"==d?0:window.pageYOffset||(document.documentElement||document.body).scrollTop),d=a.left+("window"==d?0:window.pageXOffset||(document.documentElement||document.body).scrollLeft),c.left+=d,c.right+=d;c.top+=b;c.bottom+=b;return c}function oe(a,b,c){if("div"==c)return b;var d=b.left;b=b.top;"page"==c?(d-=window.pageXOffset||(document.documentElement||document.body).scrollLeft,b-=window.pageYOffset||(document.documentElement||document.body).scrollTop):"local"!=c&&c||(c=a.display.sizer.getBoundingClientRect(),
d+=c.left,b+=c.top);a=a.display.lineSpace.getBoundingClientRect();return{left:d-a.left,top:b-a.top}}function Yb(a,b,c,d,e){d||(d=u(a.doc,b.line));var f=d;b=b.ch;d=$c(a,Zb(a,d),b,e);return cd(a,f,d,c)}function ma(a,b,c,d,e,f){function g(b,g){var h=$c(a,e,b,g?"right":"left",f);g?h.left=h.right:h.right=h.left;return cd(a,d,h,c)}function h(a,b){var c=k[b],d=c.level%2;a==dd(c)&&b&&c.level<k[b-1].level?(c=k[--b],a=ed(c)-(c.level%2?0:1),d=!0):a==ed(c)&&b<k.length-1&&c.level<k[b+1].level&&(c=k[++b],a=dd(c)-
c.level%2,d=!1);return d&&a==c.to&&a>c.from?g(a-1):g(a,d)}d=d||u(a.doc,b.line);e||(e=Zb(a,d));var k=Y(d);b=b.ch;if(!k)return g(b);var l=Sb(k,b),l=h(b,l);null!=vb&&(l.other=h(b,vb));return l}function pe(a,b){var c=0;b=x(a.doc,b);a.options.lineWrapping||(c=gb(a.display)*b.ch);var d=u(a.doc,b.line),e=ea(d)+a.display.lineSpace.offsetTop;return{left:c,right:c,top:e,bottom:e+d.height}}function $b(a,b,c,d){a=r(a,b);a.xRel=d;c&&(a.outside=!0);return a}function fd(a,b,c){var d=a.doc;c+=a.display.viewOffset;
if(0>c)return $b(d.first,0,!0,-1);var e=Aa(d,c),f=d.first+d.size-1;if(e>f)return $b(d.first+d.size-1,u(d,f).text.length,!0,1);0>b&&(b=0);for(d=u(d,e);;)if(e=Ff(a,d,e,b,c),f=(d=za(d,!1))&&d.find(0,!0),d&&(e.ch>f.from.ch||e.ch==f.from.ch&&0<e.xRel))e=E(d=f.to.line);else return e}function Ff(a,b,c,d,e){function f(d){d=ma(a,r(c,d),"line",b,l);h=!0;if(g>d.bottom)return d.left-k;if(g<d.top)return d.left+k;h=!1;return d.left}var g=e-ea(b),h=!1,k=2*a.display.wrapper.clientWidth,l=Zb(a,b),m=Y(b),p=b.text.length;
e=ac(b);var n=bc(b),q=f(e),t=h,u=f(n),v=h;if(d>u)return $b(c,n,v,1);for(;;){if(m?n==e||n==gd(b,e,1):1>=n-e){m=d<q||d-q<=u-d?e:n;for(d-=m==e?q:u;tb(b.text.charAt(m));)++m;return $b(c,m,m==e?t:v,-1>d?-1:1<d?1:0)}var x=Math.ceil(p/2),w=e+x;if(m)for(var w=e,y=0;y<x;++y)w=gd(b,w,1);y=f(w);if(y>d){n=w;u=y;if(v=h)u+=1E3;p=x}else e=w,q=y,t=h,p-=x}}function wa(a){if(null!=a.cachedTextHeight)return a.cachedTextHeight;if(null==Ea){Ea=t("pre");for(var b=0;49>b;++b)Ea.appendChild(document.createTextNode("x")),
Ea.appendChild(t("br"));Ea.appendChild(document.createTextNode("x"))}U(a.measure,Ea);b=Ea.offsetHeight/50;3<b&&(a.cachedTextHeight=b);ya(a.measure);return b||1}function gb(a){if(null!=a.cachedCharWidth)return a.cachedCharWidth;var b=t("span","xxxxxxxxxx"),c=t("pre",[b]);U(a.measure,c);b=b.getBoundingClientRect();b=(b.right-b.left)/10;2<b&&(a.cachedCharWidth=b);return b||10}function Ja(a){a.curOp={cm:a,viewChanged:!1,startHeight:a.doc.height,forceUpdate:!1,updateInput:null,typing:!1,changeObjs:null,
cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++Gf};Ta?Ta.ops.push(a.curOp):a.curOp.ownsGroup=Ta={ops:[a.curOp],delayedCallbacks:[]}}function La(a){if(a=a.curOp.ownsGroup)try{var b=a.delayedCallbacks,c=0;do{for(;c<b.length;c++)b[c]();for(var d=0;d<a.ops.length;d++){var e=a.ops[d];if(e.cursorActivityHandlers)for(;e.cursorActivityCalled<e.cursorActivityHandlers.length;)e.cursorActivityHandlers[e.cursorActivityCalled++](e.cm)}}while(c<
b.length)}finally{Ta=null;for(b=0;b<a.ops.length;b++)a.ops[b].cm.curOp=null;a=a.ops;for(b=0;b<a.length;b++){var e=a[b],c=e.cm,f=d=c.display;!f.scrollbarsClipped&&f.scroller.offsetWidth&&(f.nativeBarWidth=f.scroller.offsetWidth-f.scroller.clientWidth,f.heightForcer.style.height=da(c)+"px",f.sizer.style.marginBottom=-f.nativeBarWidth+"px",f.sizer.style.borderRightWidth=da(c)+"px",f.scrollbarsClipped=!0);e.updateMaxLine&&Dc(c);e.mustUpdate=e.viewChanged||e.forceUpdate||null!=e.scrollTop||e.scrollToPos&&
(e.scrollToPos.from.line<d.viewFrom||e.scrollToPos.to.line>=d.viewTo)||d.maxLineChanged&&c.options.lineWrapping;e.update=e.mustUpdate&&new Mb(c,e.mustUpdate&&{top:e.scrollTop,ensure:e.scrollToPos},e.forceUpdate)}for(b=0;b<a.length;b++)e=a[b],e.updatedDisplay=e.mustUpdate&&Lc(e.cm,e.update);for(b=0;b<a.length;b++)if(e=a[b],c=e.cm,d=c.display,e.updatedDisplay&&Lb(c),e.barMeasure=jb(c),d.maxLineChanged&&!c.options.lineWrapping&&(f=void 0,f=d.maxLine.text.length,f=$c(c,Zb(c,d.maxLine),f,void 0),e.adjustWidthTo=
f.left+3,c.display.sizerWidth=e.adjustWidthTo,e.barMeasure.scrollWidth=Math.max(d.scroller.clientWidth,d.sizer.offsetLeft+e.adjustWidthTo+da(c)+c.display.barWidth),e.maxScrollLeft=Math.max(0,d.sizer.offsetLeft+e.adjustWidthTo-pa(c))),e.updatedDisplay||e.selectionChanged)e.preparedSelection=d.input.prepareSelection();for(b=0;b<a.length;b++)e=a[b],c=e.cm,null!=e.adjustWidthTo&&(c.display.sizer.style.minWidth=e.adjustWidthTo+"px",e.maxScrollLeft<c.doc.scrollLeft&&Ma(c,Math.min(c.display.scroller.scrollLeft,
e.maxScrollLeft),!0),c.display.maxLineChanged=!1),e.preparedSelection&&c.display.input.showSelection(e.preparedSelection),e.updatedDisplay&&Oc(c,e.barMeasure),(e.updatedDisplay||e.startHeight!=c.doc.height)&&Na(c,e.barMeasure),e.selectionChanged&&Yc(c),c.state.focused&&e.updateInput&&c.display.input.reset(e.typing),e.focus&&e.focus==fa()&&Ud(e.cm);for(b=0;b<a.length;b++){e=a[b];c=e.cm;d=c.display;f=c.doc;e.updatedDisplay&&Md(c,e.update);null==d.wheelStartX||null==e.scrollTop&&null==e.scrollLeft&&
!e.scrollToPos||(d.wheelStartX=d.wheelStartY=null);null==e.scrollTop||d.scroller.scrollTop==e.scrollTop&&!e.forceScroll||(f.scrollTop=Math.max(0,Math.min(d.scroller.scrollHeight-d.scroller.clientHeight,e.scrollTop)),d.scrollbars.setScrollTop(f.scrollTop),d.scroller.scrollTop=f.scrollTop);null==e.scrollLeft||d.scroller.scrollLeft==e.scrollLeft&&!e.forceScroll||(f.scrollLeft=Math.max(0,Math.min(d.scroller.scrollWidth-pa(c),e.scrollLeft)),d.scrollbars.setScrollLeft(f.scrollLeft),d.scroller.scrollLeft=
f.scrollLeft,Bc(c));if(e.scrollToPos){var g=void 0,h=x(f,e.scrollToPos.from),g=x(f,e.scrollToPos.to),k=e.scrollToPos.margin;null==k&&(k=0);for(var l=0;5>l;l++){var m=!1,p=ma(c,h),n=g&&g!=h?ma(c,g):p,n=cc(c,Math.min(p.left,n.left),Math.min(p.top,n.top)-k,Math.max(p.left,n.left),Math.max(p.bottom,n.bottom)+k),q=c.doc.scrollTop,r=c.doc.scrollLeft;null!=n.scrollTop&&(lb(c,n.scrollTop),1<Math.abs(c.doc.scrollTop-q)&&(m=!0));null!=n.scrollLeft&&(Ma(c,n.scrollLeft),1<Math.abs(c.doc.scrollLeft-r)&&(m=!0));
if(!m)break}g=p;e.scrollToPos.isCursor&&c.state.focused&&(ja(c,"scrollCursorIntoView")||(k=c.display,l=k.sizer.getBoundingClientRect(),h=null,0>g.top+l.top?h=!0:g.bottom+l.top>(window.innerHeight||document.documentElement.clientHeight)&&(h=!1),null==h||Hf||(g=t("div","\u200b",null,"position: absolute; top: "+(g.top-k.viewOffset-c.display.lineSpace.offsetTop)+"px; height: "+(g.bottom-g.top+da(c)+k.barHeight)+"px; left: "+g.left+"px; width: 2px;"),c.display.lineSpace.appendChild(g),g.scrollIntoView(h),
c.display.lineSpace.removeChild(g))))}h=e.maybeHiddenMarkers;g=e.maybeUnhiddenMarkers;if(h)for(k=0;k<h.length;++k)h[k].lines.length||K(h[k],"hide");if(g)for(k=0;k<g.length;++k)g[k].lines.length&&K(g[k],"unhide");d.wrapper.offsetHeight&&(f.scrollTop=c.display.scroller.scrollTop);e.changeObjs&&K(c,"changes",c,e.changeObjs);e.update&&e.update.finish()}}}function T(a,b){if(a.curOp)return b();Ja(a);try{return b()}finally{La(a)}}function F(a,b){return function(){if(a.curOp)return b.apply(a,arguments);Ja(a);
try{return b.apply(a,arguments)}finally{La(a)}}}function D(a){return function(){if(this.curOp)return a.apply(this,arguments);Ja(this);try{return a.apply(this,arguments)}finally{La(this)}}}function N(a){return function(){var b=this.cm;if(!b||b.curOp)return a.apply(this,arguments);Ja(b);try{return a.apply(this,arguments)}finally{La(b)}}}function le(a,b,c){for(var d=this.line=b,e;d=za(d,!1);)d=d.find(1,!0).line,(e||(e=[])).push(d);this.size=(this.rest=e)?E(A(this.rest))-c+1:1;this.node=this.text=null;
this.hidden=xa(a,b)}function Nb(a,b,c){var d=[],e;for(e=b;e<c;)b=new le(a.doc,u(a.doc,e),e),e+=b.size,d.push(b);return d}function Q(a,b,c,d){null==b&&(b=a.doc.first);null==c&&(c=a.doc.first+a.doc.size);d||(d=0);var e=a.display;d&&c<e.viewTo&&(null==e.updateLineNumbers||e.updateLineNumbers>b)&&(e.updateLineNumbers=b);a.curOp.viewChanged=!0;if(b>=e.viewTo)ra&&Mc(a.doc,b)<e.viewTo&&qa(a);else if(c<=e.viewFrom)ra&&Ld(a.doc,c+d)>e.viewFrom?qa(a):(e.viewFrom+=d,e.viewTo+=d);else if(b<=e.viewFrom&&c>=e.viewTo)qa(a);
else if(b<=e.viewFrom){var f=dc(a,c,c+d,1);f?(e.view=e.view.slice(f.index),e.viewFrom=f.lineN,e.viewTo+=d):qa(a)}else if(c>=e.viewTo)(f=dc(a,b,b,-1))?(e.view=e.view.slice(0,f.index),e.viewTo=f.lineN):qa(a);else{var f=dc(a,b,b,-1),g=dc(a,c,c+d,1);f&&g?(e.view=e.view.slice(0,f.index).concat(Nb(a,f.lineN,g.lineN)).concat(e.view.slice(g.index)),e.viewTo+=d):qa(a)}if(a=e.externalMeasured)c<a.lineN?a.lineN+=d:b<a.lineN+a.size&&(e.externalMeasured=null)}function na(a,b,c){a.curOp.viewChanged=!0;var d=a.display,
e=a.display.externalMeasured;e&&b>=e.lineN&&b<e.lineN+e.size&&(d.externalMeasured=null);b<d.viewFrom||b>=d.viewTo||(a=d.view[Ba(a,b)],null!=a.node&&(a=a.changes||(a.changes=[]),-1==L(a,c)&&a.push(c)))}function qa(a){a.display.viewFrom=a.display.viewTo=a.doc.first;a.display.view=[];a.display.viewOffset=0}function Ba(a,b){if(b>=a.display.viewTo)return null;b-=a.display.viewFrom;if(0>b)return null;for(var c=a.display.view,d=0;d<c.length;d++)if(b-=c[d].size,0>b)return d}function dc(a,b,c,d){var e=Ba(a,
b),f=a.display.view;if(!ra||c==a.doc.first+a.doc.size)return{index:e,lineN:c};for(var g=0,h=a.display.viewFrom;g<e;g++)h+=f[g].size;if(h!=b){if(0<d){if(e==f.length-1)return null;b=h+f[e].size-b;e++}else b=h-b;c+=b}for(;Mc(a.doc,c)!=c;){if(e==(0>d?0:f.length-1))return null;c+=d*f[e-(0>d?1:0)].size;e+=d}return{index:e,lineN:c}}function Kd(a){a=a.display.view;for(var b=0,c=0;c<a.length;c++){var d=a[c];d.hidden||d.node&&!d.changes||++b}return b}function tf(a){function b(){d.activeTouch&&(e=setTimeout(function(){d.activeTouch=
null},1E3),f=d.activeTouch,f.end=+new Date)}function c(a,b){if(null==b.left)return!0;var c=b.left-a.left,d=b.top-a.top;return 400<c*c+d*d}var d=a.display;v(d.scroller,"mousedown",F(a,qe));B&&11>C?v(d.scroller,"dblclick",F(a,function(b){if(!ja(a,b)){var c=Ua(a,b);!c||hd(a,b,"gutterClick",!0,M)||oa(a.display,b)||(O(b),b=a.findWordAt(c),Ub(a.doc,b.anchor,b.head))}})):v(d.scroller,"dblclick",function(b){ja(a,b)||O(b)});id||v(d.scroller,"contextmenu",function(b){re(a,b)});var e,f={end:0};v(d.scroller,
"touchstart",function(a){var b;1!=a.touches.length?b=!1:(b=a.touches[0],b=1>=b.radiusX&&1>=b.radiusY);b||(clearTimeout(e),b=+new Date,d.activeTouch={start:b,moved:!1,prev:300>=b-f.end?f:null},1==a.touches.length&&(d.activeTouch.left=a.touches[0].pageX,d.activeTouch.top=a.touches[0].pageY))});v(d.scroller,"touchmove",function(){d.activeTouch&&(d.activeTouch.moved=!0)});v(d.scroller,"touchend",function(e){var f=d.activeTouch;if(f&&!oa(d,e)&&null!=f.left&&!f.moved&&300>new Date-f.start){var g=a.coordsChar(d.activeTouch,
"page"),f=!f.prev||c(f,f.prev)?new z(g,g):!f.prev.prev||c(f,f.prev.prev)?a.findWordAt(g):new z(r(g.line,0),x(a.doc,r(g.line+1,0)));a.setSelection(f.anchor,f.head);a.focus();O(e)}b()});v(d.scroller,"touchcancel",b);v(d.scroller,"scroll",function(){d.scroller.clientHeight&&(lb(a,d.scroller.scrollTop),Ma(a,d.scroller.scrollLeft,!0),K(a,"scroll",a))});v(d.scroller,"mousewheel",function(b){se(a,b)});v(d.scroller,"DOMMouseScroll",function(b){se(a,b)});v(d.wrapper,"scroll",function(){d.wrapper.scrollTop=
d.wrapper.scrollLeft=0});d.dragFunctions={simple:function(b){ja(a,b)||jd(b)},start:function(b){if(B&&(!a.state.draggingText||100>+new Date-te))jd(b);else if(!ja(a,b)&&!oa(a.display,b)&&(b.dataTransfer.setData("Text",a.getSelection()),b.dataTransfer.setDragImage&&!ue)){var c=t("img",null,null,"position: fixed; left: 0; top: 0;");c.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw\x3d\x3d";ba&&(c.width=c.height=1,a.display.wrapper.appendChild(c),c._top=c.offsetTop);b.dataTransfer.setDragImage(c,
0,0);ba&&c.parentNode.removeChild(c)}},drop:F(a,If)};var g=d.input.getField();v(g,"keyup",function(b){ve.call(a,b)});v(g,"keydown",F(a,we));v(g,"keypress",F(a,xe));v(g,"focus",cb(xc,a));v(g,"blur",cb(db,a))}function Jf(a){var b=a.display;if(b.lastWrapHeight!=b.wrapper.clientHeight||b.lastWrapWidth!=b.wrapper.clientWidth)b.cachedCharWidth=b.cachedTextHeight=b.cachedPaddingH=null,b.scrollbarsClipped=!1,a.setSize()}function oa(a,b){for(var c=b.target||b.srcElement;c!=a.wrapper;c=c.parentNode)if(!c||
1==c.nodeType&&"true"==c.getAttribute("cm-ignore-events")||c.parentNode==a.sizer&&c!=a.mover)return!0}function Ua(a,b,c,d){var e=a.display;if(!c&&"true"==(b.target||b.srcElement).getAttribute("cm-not-content"))return null;var f,g;c=e.lineSpace.getBoundingClientRect();try{f=b.clientX-c.left,g=b.clientY-c.top}catch(h){return null}b=fd(a,f,g);var k;d&&1==b.xRel&&(k=u(a.doc,b.line).text).length==b.ch&&(d=aa(k,k.length,a.options.tabSize)-k.length,b=r(b.line,Math.max(0,Math.round((f-je(a.display).left)/
gb(a.display))-d)));return b}function qe(a){var b=this.display;if(!(b.activeTouch&&b.input.supportsTouch()||ja(this,a)))if(b.shift=a.shiftKey,oa(b,a))J||(b.scroller.draggable=!1,setTimeout(function(){b.scroller.draggable=!0},100));else if(!hd(this,a,"gutterClick",!0,M)){var c=Ua(this,a);window.focus();switch(ye(a)){case 1:c?Kf(this,a,c):(a.target||a.srcElement)==b.scroller&&O(a);break;case 2:J&&(this.state.lastMiddleDown=+new Date);c&&Ub(this.doc,c);setTimeout(function(){b.input.focus()},20);O(a);
break;case 3:id?re(this,a):Lf(this)}}}function Kf(a,b,c){B?setTimeout(cb(Ud,a),0):a.curOp.focus=fa();var d=+new Date,e;ec&&ec.time>d-400&&0==y(ec.pos,c)?e="triple":fc&&fc.time>d-400&&0==y(fc.pos,c)?(e="double",ec={time:d,pos:c}):(e="single",fc={time:d,pos:c});var d=a.doc.sel,f=W?b.metaKey:b.ctrlKey,g;a.options.dragDrop&&Mf&&!Rb(a)&&"single"==e&&-1<(g=d.contains(c))&&!d.ranges[g].empty()?Nf(a,b,c,f):Of(a,b,c,e,f)}function Nf(a,b,c,d){var e=a.display,f=+new Date,g=F(a,function(h){J&&(e.scroller.draggable=
!1);a.state.draggingText=!1;ka(document,"mouseup",g);ka(e.scroller,"drop",g);10>Math.abs(b.clientX-h.clientX)+Math.abs(b.clientY-h.clientY)&&(O(h),!d&&+new Date-200<f&&Ub(a.doc,c),J||B&&9==C?setTimeout(function(){document.body.focus();e.input.focus()},20):e.input.focus())});J&&(e.scroller.draggable=!0);a.state.draggingText=g;e.scroller.dragDrop&&e.scroller.dragDrop();v(document,"mouseup",g);v(e.scroller,"drop",g)}function Of(a,b,c,d,e){function f(b){if(0!=y(w,b))if(w=b,"rect"==d){for(var e=[],f=a.options.tabSize,
g=aa(u(l,c.line).text,c.ch,f),h=aa(u(l,b.line).text,b.ch,f),k=Math.min(g,h),g=Math.max(g,h),h=Math.min(c.line,b.line),q=Math.min(a.lastLine(),Math.max(c.line,b.line));h<=q;h++){var t=u(l,h).text,H=ze(t,k,f);k==g?e.push(new z(r(h,H),r(h,H))):t.length>H&&e.push(new z(r(h,H),r(h,ze(t,g,f))))}e.length||e.push(new z(c,c));G(l,Z(n.ranges.slice(0,p).concat(e),p),{origin:"*mouse",scroll:!1});a.scrollIntoView(b)}else e=m,f=e.anchor,k=b,"single"!=d&&(b="double"==d?a.findWordAt(b):new z(r(b.line,0),x(l,r(b.line+
1,0))),0<y(b.anchor,f)?(k=b.head,f=Qb(e.from(),b.anchor)):(k=b.anchor,f=Pb(e.to(),b.head))),e=n.ranges.slice(0),e[p]=new z(x(l,f),k),G(l,Z(e,p),kd)}function g(b){var c=++A,e=Ua(a,b,!0,"rect"==d);if(e)if(0!=y(e,w)){a.curOp.focus=fa();f(e);var h=Hc(k,l);(e.line>=h.to||e.line<h.from)&&setTimeout(F(a,function(){A==c&&g(b)}),150)}else{var m=b.clientY<B.top?-20:b.clientY>B.bottom?20:0;m&&setTimeout(F(a,function(){A==c&&(k.scroller.scrollTop+=m,g(b))}),50)}}function h(a){A=Infinity;O(a);k.input.focus();
ka(document,"mousemove",E);ka(document,"mouseup",C);l.history.lastSelOrigin=null}var k=a.display,l=a.doc;O(b);var m,p,n=l.sel,q=n.ranges;e&&!b.shiftKey?(p=l.sel.contains(c),m=-1<p?q[p]:new z(c,c)):(m=l.sel.primary(),p=l.sel.primIndex);if(b.altKey)d="rect",e||(m=new z(c,c)),c=Ua(a,b,!0,!0),p=-1;else if("double"==d){var t=a.findWordAt(c);m=a.display.shift||l.extend?rb(l,m,t.anchor,t.head):t}else"triple"==d?(t=new z(r(c.line,0),x(l,r(c.line+1,0))),m=a.display.shift||l.extend?rb(l,m,t.anchor,t.head):
t):m=rb(l,m,c);e?-1==p?(p=q.length,G(l,Z(q.concat([m]),p),{scroll:!1,origin:"*mouse"})):1<q.length&&q[p].empty()&&"single"==d&&!b.shiftKey?(G(l,Z(q.slice(0,p).concat(q.slice(p+1)),0)),n=l.sel):Xc(l,p,m,kd):(p=0,G(l,new la([m],0),kd),n=l.sel);var w=c,B=k.wrapper.getBoundingClientRect(),A=0,E=F(a,function(a){ye(a)?g(a):h(a)}),C=F(a,h);v(document,"mousemove",E);v(document,"mouseup",C)}function hd(a,b,c,d,e){try{var f=b.clientX,g=b.clientY}catch(h){return!1}if(f>=Math.floor(a.display.gutters.getBoundingClientRect().right))return!1;
d&&O(b);d=a.display;var k=d.lineDiv.getBoundingClientRect();if(g>k.bottom||!S(a,c))return ld(b);g-=k.top-d.viewOffset;for(k=0;k<a.options.gutters.length;++k){var l=d.gutters.childNodes[k];if(l&&l.getBoundingClientRect().right>=f)return f=Aa(a.doc,g),e(a,c,a,f,a.options.gutters[k],b),ld(b)}}function If(a){var b=this;if(!ja(b,a)&&!oa(b.display,a)){O(a);B&&(te=+new Date);var c=Ua(b,a,!0),d=a.dataTransfer.files;if(c&&!Rb(b))if(d&&d.length&&window.FileReader&&window.File){var e=d.length,f=Array(e),g=0;
a=function(a,d){var h=new FileReader;h.onload=F(b,function(){f[d]=h.result;if(++g==e){c=x(b.doc,c);var a={from:c,to:c,text:sa(f.join("\n")),origin:"paste"};Oa(b.doc,a);ce(b.doc,ga(c,Fa(a)))}});h.readAsText(a)};for(var h=0;h<e;++h)a(d[h],h)}else if(b.state.draggingText&&-1<b.doc.sel.contains(c))b.state.draggingText(a),setTimeout(function(){b.display.input.focus()},20);else try{if(f=a.dataTransfer.getData("Text")){if(b.state.draggingText&&(W?!a.altKey:!a.ctrlKey))var k=b.listSelections();Vb(b.doc,ga(c,
c));if(k)for(h=0;h<k.length;++h)wb(b.doc,"",k[h].anchor,k[h].head,"drag");b.replaceSelection(f,"around","paste");b.display.input.focus()}}catch(l){}}}function lb(a,b){2>Math.abs(a.doc.scrollTop-b)||(a.doc.scrollTop=b,va||Pc(a,{top:b}),a.display.scroller.scrollTop!=b&&(a.display.scroller.scrollTop=b),a.display.scrollbars.setScrollTop(b),va&&Pc(a),fb(a,100))}function Ma(a,b,c){(c?b==a.doc.scrollLeft:2>Math.abs(a.doc.scrollLeft-b))||(b=Math.min(b,a.display.scroller.scrollWidth-a.display.scroller.clientWidth),
a.doc.scrollLeft=b,Bc(a),a.display.scroller.scrollLeft!=b&&(a.display.scroller.scrollLeft=b),a.display.scrollbars.setScrollLeft(b))}function se(a,b){var c=Ae(b),d=c.x,c=c.y,e=a.display,f=e.scroller;if(d&&f.scrollWidth>f.clientWidth||c&&f.scrollHeight>f.clientHeight){if(c&&W&&J){var g=b.target,h=e.view;a:for(;g!=f;g=g.parentNode)for(var k=0;k<h.length;k++)if(h[k].node==g){a.display.currentWheelTarget=g;break a}}!d||va||ba||null==R?(c&&null!=R&&(g=c*R,h=a.doc.scrollTop,k=h+e.wrapper.clientHeight,0>
g?h=Math.max(0,h+g-50):k=Math.min(a.doc.height,k+g+50),Pc(a,{top:h,bottom:k})),20>gc&&(null==e.wheelStartX?(e.wheelStartX=f.scrollLeft,e.wheelStartY=f.scrollTop,e.wheelDX=d,e.wheelDY=c,setTimeout(function(){if(null!=e.wheelStartX){var a=f.scrollLeft-e.wheelStartX,b=f.scrollTop-e.wheelStartY,a=b&&e.wheelDY&&b/e.wheelDY||a&&e.wheelDX&&a/e.wheelDX;e.wheelStartX=e.wheelStartY=null;a&&(R=(R*gc+a)/(gc+1),++gc)}},200)):(e.wheelDX+=d,e.wheelDY+=c))):(c&&lb(a,Math.max(0,Math.min(f.scrollTop+c*R,f.scrollHeight-
f.clientHeight))),Ma(a,Math.max(0,Math.min(f.scrollLeft+d*R,f.scrollWidth-f.clientWidth))),O(b),e.wheelStartX=null)}}function hc(a,b,c){if("string"==typeof b&&(b=ic[b],!b))return!1;a.display.input.ensurePolled();var d=a.display.shift,e=!1;try{Rb(a)&&(a.state.suppressEdits=!0),c&&(a.display.shift=!1),e=b(a)!=Be}finally{a.display.shift=d,a.state.suppressEdits=!1}return e}function Pf(a,b,c){for(var d=0;d<a.state.keyMaps.length;d++){var e=xb(b,a.state.keyMaps[d],c,a);if(e)return e}return a.options.extraKeys&&
xb(b,a.options.extraKeys,c,a)||xb(b,a.options.keyMap,c,a)}function jc(a,b,c,d){var e=a.state.keySeq;if(e){if(Qf(b))return"handled";Rf.set(50,function(){a.state.keySeq==e&&(a.state.keySeq=null,a.display.input.reset())});b=e+" "+b}d=Pf(a,b,d);"multi"==d&&(a.state.keySeq=b);"handled"==d&&M(a,"keyHandled",a,b,c);if("handled"==d||"multi"==d)O(c),Yc(a);return e&&!d&&/\'$/.test(b)?(O(c),!0):!!d}function Ce(a,b){var c=Sf(b,!0);return c?b.shiftKey&&!a.state.keySeq?jc(a,"Shift-"+c,b,function(b){return hc(a,
b,!0)})||jc(a,c,b,function(b){if("string"==typeof b?/^go[A-Z]/.test(b):b.motion)return hc(a,b)}):jc(a,c,b,function(b){return hc(a,b)}):!1}function Tf(a,b,c){return jc(a,"'"+c+"'",b,function(b){return hc(a,b,!0)})}function we(a){this.curOp.focus=fa();if(!ja(this,a)){B&&11>C&&27==a.keyCode&&(a.returnValue=!1);var b=a.keyCode;this.display.shift=16==b||a.shiftKey;var c=Ce(this,a);ba&&(md=c?b:null,!c&&88==b&&!De&&(W?a.metaKey:a.ctrlKey)&&this.replaceSelection("",null,"cut"));18!=b||/\bCodeMirror-crosshair\b/.test(this.display.lineDiv.className)||
Uf(this)}}function Uf(a){function b(a){18!=a.keyCode&&a.altKey||(kb(c,"CodeMirror-crosshair"),ka(document,"keyup",b),ka(document,"mouseover",b))}var c=a.display.lineDiv;mb(c,"CodeMirror-crosshair");v(document,"keyup",b);v(document,"mouseover",b)}function ve(a){16==a.keyCode&&(this.doc.sel.shift=!1);ja(this,a)}function xe(a){if(!(oa(this.display,a)||ja(this,a)||a.ctrlKey&&!a.altKey||W&&a.metaKey)){var b=a.keyCode,c=a.charCode;if(ba&&b==md)md=null,O(a);else if(!ba||a.which&&!(10>a.which)||!Ce(this,
a))if(b=String.fromCharCode(null==c?b:c),!Tf(this,a,b))this.display.input.onKeyPress(a)}}function Lf(a){a.state.delayingBlurEvent=!0;setTimeout(function(){a.state.delayingBlurEvent&&(a.state.delayingBlurEvent=!1,db(a))},100)}function xc(a){a.state.delayingBlurEvent&&(a.state.delayingBlurEvent=!1);"nocursor"!=a.options.readOnly&&(a.state.focused||(K(a,"focus",a),a.state.focused=!0,mb(a.display.wrapper,"CodeMirror-focused"),a.curOp||a.display.selForContextMenu==a.doc.sel||(a.display.input.reset(),J&&
setTimeout(function(){a.display.input.reset(!0)},20)),a.display.input.receivedFocus()),Yc(a))}function db(a){a.state.delayingBlurEvent||(a.state.focused&&(K(a,"blur",a),a.state.focused=!1,kb(a.display.wrapper,"CodeMirror-focused")),clearInterval(a.display.blinker),setTimeout(function(){a.state.focused||(a.display.shift=!1)},150))}function re(a,b){var c;(c=oa(a.display,b))||(c=S(a,"gutterContextMenu")?hd(a,b,"gutterContextMenu",!1,K):!1);if(!c)a.display.input.onContextMenu(b)}function Ee(a,b){if(0>
y(a,b.from))return a;if(0>=y(a,b.to))return Fa(b);var c=a.line+b.text.length-(b.to.line-b.from.line)-1,d=a.ch;a.line==b.to.line&&(d+=Fa(b).ch-b.to.ch);return r(c,d)}function nd(a,b){for(var c=[],d=0;d<a.sel.ranges.length;d++){var e=a.sel.ranges[d];c.push(new z(Ee(e.anchor,b),Ee(e.head,b)))}return Z(c,a.sel.primIndex)}function Fe(a,b,c){return a.line==b.line?r(c.line,a.ch-b.ch+c.ch):r(c.line+(a.line-b.line),a.ch)}function Ge(a,b,c){b={canceled:!1,from:b.from,to:b.to,text:b.text,origin:b.origin,cancel:function(){this.canceled=
!0}};c&&(b.update=function(b,c,f,g){b&&(this.from=x(a,b));c&&(this.to=x(a,c));f&&(this.text=f);void 0!==g&&(this.origin=g)});K(a,"beforeChange",a,b);a.cm&&K(a.cm,"beforeChange",a.cm,b);return b.canceled?null:{from:b.from,to:b.to,text:b.text,origin:b.origin}}function Oa(a,b,c){if(a.cm){if(!a.cm.curOp)return F(a.cm,Oa)(a,b,c);if(a.cm.state.suppressEdits)return}if(S(a,"beforeChange")||a.cm&&S(a.cm,"beforeChange"))if(b=Ge(a,b,!0),!b)return;if(c=He&&!c&&Vf(a,b.from,b.to))for(var d=c.length-1;0<=d;--d)Ie(a,
{from:c[d].from,to:c[d].to,text:d?[""]:b.text});else Ie(a,b)}function Ie(a,b){if(1!=b.text.length||""!=b.text[0]||0!=y(b.from,b.to)){var c=nd(a,b);Je(a,b,c,a.cm?a.cm.curOp.id:NaN);yb(a,b,c,od(a,b));var d=[];Ga(a,function(a,c){c||-1!=L(d,a.history)||(Ke(a.history,b),d.push(a.history));yb(a,b,null,od(a,b))})}}function kc(a,b,c){if(!a.cm||!a.cm.state.suppressEdits){for(var d=a.history,e,f=a.sel,g="undo"==b?d.done:d.undone,h="undo"==b?d.undone:d.done,k=0;k<g.length&&(e=g[k],c?!e.ranges||e.equals(a.sel):
e.ranges);k++);if(k!=g.length){for(d.lastOrigin=d.lastSelOrigin=null;;)if(e=g.pop(),e.ranges){Wb(e,h);if(c&&!e.equals(a.sel)){G(a,e,{clearRedo:!1});return}f=e}else break;c=[];Wb(f,h);h.push({changes:c,generation:d.generation});d.generation=e.generation||++d.maxGeneration;d=S(a,"beforeChange")||a.cm&&S(a.cm,"beforeChange");for(k=e.changes.length-1;0<=k;--k){var l=e.changes[k];l.origin=b;if(d&&!Ge(a,l,!1)){g.length=0;break}c.push(pd(a,l));f=k?nd(a,l):A(g);yb(a,l,f,Le(a,l));!k&&a.cm&&a.cm.scrollIntoView({from:l.from,
to:Fa(l)});var m=[];Ga(a,function(a,b){b||-1!=L(m,a.history)||(Ke(a.history,l),m.push(a.history));yb(a,l,null,Le(a,l))})}}}}function Me(a,b){if(0!=b&&(a.first+=b,a.sel=new la(ob(a.sel.ranges,function(a){return new z(r(a.anchor.line+b,a.anchor.ch),r(a.head.line+b,a.head.ch))}),a.sel.primIndex),a.cm)){Q(a.cm,a.first,a.first-b,b);for(var c=a.cm.display,d=c.viewFrom;d<c.viewTo;d++)na(a.cm,d,"gutter")}}function yb(a,b,c,d){if(a.cm&&!a.cm.curOp)return F(a.cm,yb)(a,b,c,d);if(b.to.line<a.first)Me(a,b.text.length-
1-(b.to.line-b.from.line));else if(!(b.from.line>a.lastLine())){if(b.from.line<a.first){var e=b.text.length-1-(a.first-b.from.line);Me(a,e);b={from:r(a.first,0),to:r(b.to.line+e,b.to.ch),text:[A(b.text)],origin:b.origin}}e=a.lastLine();b.to.line>e&&(b={from:b.from,to:r(e,u(a,e).text.length),text:[b.text[0]],origin:b.origin});b.removed=Ca(a,b.from,b.to);c||(c=nd(a,b));a.cm?Wf(a.cm,b,d):qd(a,b,d);Vb(a,c,ha)}}function Wf(a,b,c){var d=a.doc,e=a.display,f=b.from,g=b.to,h=!1,k=f.line;a.options.lineWrapping||
(k=E(ia(u(d,f.line))),d.iter(k,g.line+1,function(a){if(a==e.maxLine)return h=!0}));-1<d.sel.contains(b.from,b.to)&&ge(a);qd(d,b,c,Id(a));a.options.lineWrapping||(d.iter(k,f.line+b.text.length,function(a){var b=Kb(a);b>e.maxLineLength&&(e.maxLine=a,e.maxLineLength=b,e.maxLineChanged=!0,h=!1)}),h&&(a.curOp.updateMaxLine=!0));d.frontier=Math.min(d.frontier,f.line);fb(a,400);c=b.text.length-(g.line-f.line)-1;b.full?Q(a):f.line!=g.line||1!=b.text.length||Ne(a.doc,b)?Q(a,f.line,g.line+1,c):na(a,f.line,
"text");c=S(a,"changes");if((d=S(a,"change"))||c)b={from:f,to:g,text:b.text,removed:b.removed,origin:b.origin},d&&M(a,"change",a,b),c&&(a.curOp.changeObjs||(a.curOp.changeObjs=[])).push(b);a.display.selForContextMenu=null}function wb(a,b,c,d,e){d||(d=c);if(0>y(d,c)){var f=d;d=c;c=f}"string"==typeof b&&(b=sa(b));Oa(a,{from:c,to:d,text:b,origin:e})}function cc(a,b,c,d,e){var f=a.display,g=wa(a.display);0>c&&(c=0);var h=a.curOp&&null!=a.curOp.scrollTop?a.curOp.scrollTop:f.scroller.scrollTop,k=Nc(a),
l={};e-c>k&&(e=c+k);var m=a.doc.height+Ec(f),p=c<g,g=e>m-g;c<h?l.scrollTop=p?0:c:e>h+k&&(c=Math.min(c,(g?m:e)-k),c!=h&&(l.scrollTop=c));h=a.curOp&&null!=a.curOp.scrollLeft?a.curOp.scrollLeft:f.scroller.scrollLeft;a=pa(a)-(a.options.fixedGutter?f.gutters.offsetWidth:0);(f=d-b>a)&&(d=b+a);10>b?l.scrollLeft=0:b<h?l.scrollLeft=Math.max(0,b-(f?0:10)):d>a+h-3&&(l.scrollLeft=d+(f?0:10)-a);return l}function lc(a,b,c){null==b&&null==c||mc(a);null!=b&&(a.curOp.scrollLeft=(null==a.curOp.scrollLeft?a.doc.scrollLeft:
a.curOp.scrollLeft)+b);null!=c&&(a.curOp.scrollTop=(null==a.curOp.scrollTop?a.doc.scrollTop:a.curOp.scrollTop)+c)}function Pa(a){mc(a);var b=a.getCursor(),c=b,d=b;a.options.lineWrapping||(c=b.ch?r(b.line,b.ch-1):b,d=r(b.line,b.ch+1));a.curOp.scrollToPos={from:c,to:d,margin:a.options.cursorScrollMargin,isCursor:!0}}function mc(a){var b=a.curOp.scrollToPos;if(b){a.curOp.scrollToPos=null;var c=pe(a,b.from),d=pe(a,b.to),b=cc(a,Math.min(c.left,d.left),Math.min(c.top,d.top)-b.margin,Math.max(c.right,d.right),
Math.max(c.bottom,d.bottom)+b.margin);a.scrollTo(b.scrollLeft,b.scrollTop)}}function pb(a,b,c,d){var e=a.doc,f;null==c&&(c="add");"smart"==c&&(e.mode.indent?f=sb(a,b):c="prev");var g=a.options.tabSize,h=u(e,b),k=aa(h.text,null,g);h.stateAfter&&(h.stateAfter=null);var l=h.text.match(/^\s*/)[0],m;if(!d&&!/\S/.test(h.text))m=0,c="not";else if("smart"==c&&(m=e.mode.indent(f,h.text.slice(l.length),h.text),m==Be||150<m)){if(!d)return;c="prev"}"prev"==c?m=b>e.first?aa(u(e,b-1).text,null,g):0:"add"==c?m=
k+a.options.indentUnit:"subtract"==c?m=k-a.options.indentUnit:"number"==typeof c&&(m=k+c);m=Math.max(0,m);c="";d=0;if(a.options.indentWithTabs)for(a=Math.floor(m/g);a;--a)d+=g,c+="\t";d<m&&(c+=Oe(m-d));if(c!=l)return wb(e,c,r(b,0),r(b,l.length),"+input"),h.stateAfter=null,!0;for(a=0;a<e.sel.ranges.length;a++)if(g=e.sel.ranges[a],g.head.line==b&&g.head.ch<l.length){d=r(b,l.length);Xc(e,a,new z(d,d));break}}function nc(a,b,c,d){var e=b,f=b;"number"==typeof b?f=u(a,Math.max(a.first,Math.min(b,a.first+
a.size-1))):e=E(b);if(null==e)return null;d(f,e)&&a.cm&&na(a.cm,e,c);return f}function Va(a,b){for(var c=a.doc.sel.ranges,d=[],e=0;e<c.length;e++){for(var f=b(c[e]);d.length&&0>=y(f.from,A(d).to);){var g=d.pop();if(0>y(g.from,f.from)){f.from=g.from;break}}d.push(f)}T(a,function(){for(var b=d.length-1;0<=b;b--)wb(a.doc,"",d[b].from,d[b].to,"+delete");Pa(a)})}function rd(a,b,c,d,e){function f(b){var d=(e?gd:Pe)(l,h,c,!0);if(null==d){if(b=!b)b=g+c,b<a.first||b>=a.first+a.size?b=m=!1:(g=b,b=l=u(a,b));
if(b)h=e?(0>c?bc:ac)(l):0>c?l.text.length:0;else return m=!1}else h=d;return!0}var g=b.line,h=b.ch,k=c,l=u(a,g),m=!0;if("char"==d)f();else if("column"==d)f(!0);else if("word"==d||"group"==d){var p=null;d="group"==d;b=a.cm&&a.cm.getHelper(b,"wordChars");for(var n=!0;!(0>c)||f(!n);n=!1){var q=l.text.charAt(h)||"\n",q=oc(q,b)?"w":d&&"\n"==q?"n":!d||/\s/.test(q)?null:"p";!d||n||q||(q="s");if(p&&p!=q){0>c&&(c=1,f());break}q&&(p=q);if(0<c&&!f(!n))break}}k=Xb(a,r(g,h),k,!0);m||(k.hitSide=!0);return k}function Qe(a,
b,c,d){var e=a.doc,f=b.left,g;"page"==d?(g=Math.min(a.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),g=b.top+c*(g-(0>c?1.5:.5)*wa(a.display))):"line"==d&&(g=0<c?b.bottom+3:b.top-3);for(;;){b=fd(a,f,g);if(!b.outside)break;if(0>c?0>=g:g>=e.height){b.hitSide=!0;break}g+=5*c}return b}function w(a,b,c,d){q.defaults[a]=b;c&&(Ka[a]=d?function(a,b,d){d!=Fd&&c(a,b,d)}:c)}function Xf(a){var b=a.split(/-(?!$)/);a=b[b.length-1];for(var c,d,e,f,g=0;g<b.length-1;g++){var h=
b[g];if(/^(cmd|meta|m)$/i.test(h))f=!0;else if(/^a(lt)?$/i.test(h))c=!0;else if(/^(c|ctrl|control)$/i.test(h))d=!0;else if(/^s(hift)$/i.test(h))e=!0;else throw Error("Unrecognized modifier name: "+h);}c&&(a="Alt-"+a);d&&(a="Ctrl-"+a);f&&(a="Cmd-"+a);e&&(a="Shift-"+a);return a}function pc(a){return"string"==typeof a?ta[a]:a}function Wa(a,b,c,d,e){if(d&&d.shared)return Yf(a,b,c,d,e);if(a.cm&&!a.cm.curOp)return F(a.cm,Wa)(a,b,c,d,e);var f=new Ha(a,e);e=y(b,c);d&&V(d,f,!1);if(0<e||0==e&&!1!==f.clearWhenEmpty)return f;
f.replacedWith&&(f.collapsed=!0,f.widgetNode=t("span",[f.replacedWith],"CodeMirror-widget"),d.handleMouseEvents||f.widgetNode.setAttribute("cm-ignore-events","true"),d.insertLeft&&(f.widgetNode.insertLeft=!0));if(f.collapsed){if(Re(a,b.line,b,c,f)||b.line!=c.line&&Re(a,c.line,b,c,f))throw Error("Inserting collapsed marker partially overlapping an existing one");ra=!0}f.addToHistory&&Je(a,{from:b,to:c,origin:"markText"},a.sel,NaN);var g=b.line,h=a.cm,k;a.iter(g,c.line+1,function(a){h&&f.collapsed&&
!h.options.lineWrapping&&ia(a)==h.display.maxLine&&(k=!0);f.collapsed&&g!=b.line&&ca(a,0);var d=new qc(f,g==b.line?b.ch:null,g==c.line?c.ch:null);a.markedSpans=a.markedSpans?a.markedSpans.concat([d]):[d];d.marker.attachLine(a);++g});f.collapsed&&a.iter(b.line,c.line+1,function(b){xa(a,b)&&ca(b,0)});f.clearOnEnter&&v(f,"beforeCursorEnter",function(){f.clear()});f.readOnly&&(He=!0,(a.history.done.length||a.history.undone.length)&&a.clearHistory());f.collapsed&&(f.id=++sd,f.atomic=!0);if(h){k&&(h.curOp.updateMaxLine=
!0);if(f.collapsed)Q(h,b.line,c.line+1);else if(f.className||f.title||f.startStyle||f.endStyle||f.css)for(d=b.line;d<=c.line;d++)na(h,d,"text");f.atomic&&he(h.doc);M(h,"markerAdded",h,f)}return f}function Yf(a,b,c,d,e){d=V(d);d.shared=!1;var f=[Wa(a,b,c,d,e)],g=f[0],h=d.widgetNode;Ga(a,function(a){h&&(d.widgetNode=h.cloneNode(!0));f.push(Wa(a,x(a,b),x(a,c),d,e));for(var l=0;l<a.linked.length;++l)if(a.linked[l].isParent)return;g=A(f)});return new rc(f,g)}function Se(a){return a.findMarks(r(a.first,
0),a.clipPos(r(a.lastLine())),function(a){return a.parent})}function Zf(a){for(var b=0;b<a.length;b++){var c=a[b],d=[c.primary.doc];Ga(c.primary.doc,function(a){d.push(a)});for(var e=0;e<c.markers.length;e++){var f=c.markers[e];-1==L(d,f.doc)&&(f.parent=null,c.markers.splice(e--,1))}}}function qc(a,b,c){this.marker=a;this.from=b;this.to=c}function zb(a,b){if(a)for(var c=0;c<a.length;++c){var d=a[c];if(d.marker==b)return d}}function od(a,b){if(b.full)return null;var c=qb(a,b.from.line)&&u(a,b.from.line).markedSpans,
d=qb(a,b.to.line)&&u(a,b.to.line).markedSpans;if(!c&&!d)return null;var e=b.from.ch,f=b.to.ch,g=0==y(b.from,b.to);if(c)for(var h=0,k;h<c.length;++h){var l=c[h],m=l.marker;if(null==l.from||(m.inclusiveLeft?l.from<=e:l.from<e)||!(l.from!=e||"bookmark"!=m.type||g&&l.marker.insertLeft)){var p=null==l.to||(m.inclusiveRight?l.to>=e:l.to>e);(k||(k=[])).push(new qc(m,l.from,p?null:l.to))}}c=k;if(d)for(var h=0,n;h<d.length;++h)if(k=d[h],l=k.marker,null==k.to||(l.inclusiveRight?k.to>=f:k.to>f)||k.from==f&&
"bookmark"==l.type&&(!g||k.marker.insertLeft))m=null==k.from||(l.inclusiveLeft?k.from<=f:k.from<f),(n||(n=[])).push(new qc(l,m?null:k.from-f,null==k.to?null:k.to-f));d=n;g=1==b.text.length;n=A(b.text).length+(g?e:0);if(c)for(f=0;f<c.length;++f)if(h=c[f],null==h.to)(k=zb(d,h.marker),k)?g&&(h.to=null==k.to?null:k.to+n):h.to=e;if(d)for(f=0;f<d.length;++f)h=d[f],null!=h.to&&(h.to+=n),null==h.from?(k=zb(c,h.marker),k||(h.from=n,g&&(c||(c=[])).push(h))):(h.from+=n,g&&(c||(c=[])).push(h));c&&(c=Te(c));d&&
d!=c&&(d=Te(d));e=[c];if(!g){var g=b.text.length-2,q;if(0<g&&c)for(f=0;f<c.length;++f)null==c[f].to&&(q||(q=[])).push(new qc(c[f].marker,null,null));for(f=0;f<g;++f)e.push(q);e.push(d)}return e}function Te(a){for(var b=0;b<a.length;++b){var c=a[b];null!=c.from&&c.from==c.to&&!1!==c.marker.clearWhenEmpty&&a.splice(b--,1)}return a.length?a:null}function Le(a,b){var c;if(c=b["spans_"+a.id]){for(var d=0,e=[];d<b.text.length;++d)e.push($f(c[d]));c=e}else c=null;d=od(a,b);if(!c)return d;if(!d)return c;
for(e=0;e<c.length;++e){var f=c[e],g=d[e];if(f&&g){var h=0;a:for(;h<g.length;++h){for(var k=g[h],l=0;l<f.length;++l)if(f[l].marker==k.marker)continue a;f.push(k)}}else g&&(c[e]=g)}return c}function Vf(a,b,c){var d=null;a.iter(b.line,c.line+1,function(a){if(a.markedSpans)for(var b=0;b<a.markedSpans.length;++b){var c=a.markedSpans[b].marker;!c.readOnly||d&&-1!=L(d,c)||(d||(d=[])).push(c)}});if(!d)return null;a=[{from:b,to:c}];for(b=0;b<d.length;++b){c=d[b];for(var e=c.find(0),f=0;f<a.length;++f){var g=
a[f];if(!(0>y(g.to,e.from)||0<y(g.from,e.to))){var h=[f,1],k=y(g.from,e.from),l=y(g.to,e.to);(0>k||!c.inclusiveLeft&&!k)&&h.push({from:g.from,to:e.from});(0<l||!c.inclusiveRight&&!l)&&h.push({from:e.to,to:g.to});a.splice.apply(a,h);f+=h.length-1}}}return a}function Ue(a){var b=a.markedSpans;if(b){for(var c=0;c<b.length;++c)b[c].marker.detachLine(a);a.markedSpans=null}}function Ve(a,b){if(b){for(var c=0;c<b.length;++c)b[c].marker.attachLine(a);a.markedSpans=b}}function We(a,b){var c=a.lines.length-
b.lines.length;if(0!=c)return c;var c=a.find(),d=b.find(),e=y(c.from,d.from)||(a.inclusiveLeft?-1:0)-(b.inclusiveLeft?-1:0);return e?-e:(c=y(c.to,d.to)||(a.inclusiveRight?1:0)-(b.inclusiveRight?1:0))?c:b.id-a.id}function za(a,b){var c=ra&&a.markedSpans,d;if(c)for(var e,f=0;f<c.length;++f)e=c[f],e.marker.collapsed&&null==(b?e.from:e.to)&&(!d||0>We(d,e.marker))&&(d=e.marker);return d}function Re(a,b,c,d,e){a=u(a,b);if(a=ra&&a.markedSpans)for(b=0;b<a.length;++b){var f=a[b];if(f.marker.collapsed){var g=
f.marker.find(0),h=y(g.from,c)||(f.marker.inclusiveLeft?-1:0)-(e.inclusiveLeft?-1:0),k=y(g.to,d)||(f.marker.inclusiveRight?1:0)-(e.inclusiveRight?1:0);if(!(0<=h&&0>=k||0>=h&&0<=k)&&(0>=h&&(0<y(g.to,c)||f.marker.inclusiveRight&&e.inclusiveLeft)||0<=h&&(0>y(g.from,d)||f.marker.inclusiveLeft&&e.inclusiveRight)))return!0}}}function ia(a){for(var b;b=za(a,!0);)a=b.find(-1,!0).line;return a}function Mc(a,b){var c=u(a,b),d=ia(c);return c==d?b:E(d)}function Ld(a,b){if(b>a.lastLine())return b;var c=u(a,b),
d;if(!xa(a,c))return b;for(;d=za(c,!1);)c=d.find(1,!0).line;return E(c)+1}function xa(a,b){var c=ra&&b.markedSpans;if(c)for(var d,e=0;e<c.length;++e)if(d=c[e],d.marker.collapsed&&(null==d.from||!d.marker.widgetNode&&0==d.from&&d.marker.inclusiveLeft&&td(a,b,d)))return!0}function td(a,b,c){if(null==c.to)return b=c.marker.find(1,!0),td(a,b.line,zb(b.line.markedSpans,c.marker));if(c.marker.inclusiveRight&&c.to==b.text.length)return!0;for(var d,e=0;e<b.markedSpans.length;++e)if(d=b.markedSpans[e],d.marker.collapsed&&
!d.marker.widgetNode&&d.from==c.to&&(null==d.to||d.to!=c.from)&&(d.marker.inclusiveLeft||c.marker.inclusiveRight)&&td(a,b,d))return!0}function ub(a){if(null!=a.height)return a.height;var b=a.doc.cm;if(!b)return 0;if(!Wc(document.body,a.node)){var c="position: relative;";a.coverGutter&&(c+="margin-left: -"+b.display.gutters.offsetWidth+"px;");a.noHScroll&&(c+="width: "+b.display.wrapper.clientWidth+"px;");U(b.display.measure,t("div",[a.node],null,c))}return a.height=a.node.offsetHeight}function ag(a,
b,c,d){var e=new sc(a,c,d),f=a.cm;f&&e.noHScroll&&(f.display.alignWidgets=!0);nc(a,b,"widget",function(b){var c=b.widgets||(b.widgets=[]);null==e.insertAt?c.push(e):c.splice(Math.min(c.length-1,Math.max(0,e.insertAt)),0,e);e.line=b;f&&!xa(a,b)&&(c=ea(b)<a.scrollTop,ca(b,b.height+ub(e)),c&&lc(f,null,e.height),f.curOp.forceUpdate=!0);return!0});return e}function Xe(a,b){if(a)for(;;){var c=a.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!c)break;a=a.slice(0,c.index)+a.slice(c.index+c[0].length);var d=
c[1]?"bgClass":"textClass";null==b[d]?b[d]=c[2]:(new RegExp("(?:^|s)"+c[2]+"(?:$|s)")).test(b[d])||(b[d]+=" "+c[2])}return a}function Ye(a,b){if(a.blankLine)return a.blankLine(b);if(a.innerMode){var c=q.innerMode(a,b);if(c.mode.blankLine)return c.mode.blankLine(c.state)}}function ud(a,b,c,d){for(var e=0;10>e;e++){d&&(d[0]=q.innerMode(a,c).mode);var f=a.token(b,c);if(b.pos>b.start)return f}throw Error("Mode "+a.name+" failed to advance stream.");}function Ze(a,b,c,d){function e(a){return{start:m.start,
end:m.pos,string:m.current(),type:h||null,state:a?Sa(f.mode,l):l}}var f=a.doc,g=f.mode,h;b=x(f,b);var k=u(f,b.line),l=sb(a,b.line,c),m=new tc(k.text,a.options.tabSize),p;for(d&&(p=[]);(d||m.pos<b.ch)&&!m.eol();)m.start=m.pos,h=ud(g,m,l),d&&p.push(e(!0));return d?p:e()}function $e(a,b,c,d,e,f,g){var h=c.flattenSpans;null==h&&(h=a.options.flattenSpans);var k=0,l=null,m=new tc(b,a.options.tabSize),p,n=a.options.addModeClass&&[null];for(""==b&&Xe(Ye(c,d),f);!m.eol();){m.pos>a.options.maxHighlightLength?
(h=!1,g&&Zc(a,b,d,m.pos),m.pos=b.length,p=null):p=Xe(ud(c,m,d,n),f);if(n){var q=n[0].name;q&&(p="m-"+(p?q+" "+p:q))}if(!h||l!=p){for(;k<m.start;)k=Math.min(m.start,k+5E4),e(k,l);l=p}m.start=m.pos}for(;k<m.pos;)a=Math.min(m.pos,k+5E4),e(a,l),k=a}function ke(a,b,c,d){var e=[a.state.modeGen],f={};$e(a,b.text,a.doc.mode,c,function(a,b){e.push(a,b)},f,d);for(c=0;c<a.state.overlays.length;++c){var g=a.state.overlays[c],h=1,k=0;$e(a,b.text,g.mode,!0,function(a,b){for(var c=h;k<a;){var d=e[h];d>a&&e.splice(h,
1,a,e[h+1],d);h+=2;k=Math.min(a,d)}if(b)if(g.opaque)e.splice(c,h-c,a,"cm-overlay "+b),h=c+2;else for(;c<h;c+=2)d=e[c+1],e[c+1]=(d?d+" ":"")+"cm-overlay "+b},f)}return{styles:e,classes:f.bgClass||f.textClass?f:null}}function af(a,b,c){if(!b.styles||b.styles[0]!=a.state.modeGen){var d=ke(a,b,b.stateAfter=sb(a,E(b)));b.styles=d.styles;d.classes?b.styleClasses=d.classes:b.styleClasses&&(b.styleClasses=null);c===a.doc.frontier&&a.doc.frontier++}return b.styles}function Zc(a,b,c,d){var e=a.doc.mode,f=new tc(b,
a.options.tabSize);f.start=f.pos=d||0;for(""==b&&Ye(e,c);!f.eol()&&f.pos<=a.options.maxHighlightLength;)ud(e,f,c),f.start=f.pos}function bf(a,b){if(!a||/^\s*$/.test(a))return null;var c=b.addModeClass?bg:cg;return c[a]||(c[a]=a.replace(/\S+/g,"cm-$\x26"))}function Sd(a,b){var c=t("span",null,null,J?"padding-right: .1px":null),c={pre:t("pre",[c]),content:c,col:0,pos:0,cm:a,splitSpaces:(B||J)&&a.getOption("lineWrapping")};b.measure={};for(var d=0;d<=(b.rest?b.rest.length:0);d++){var e=d?b.rest[d-1]:
b.line,f;c.pos=0;c.addToken=dg;var g;if(null!=vd)g=vd;else{g=U(a.display.measure,document.createTextNode("A\u062eA"));var h=Da(g,0,1).getBoundingClientRect();g=h&&h.left!=h.right?vd=3>Da(g,1,2).getBoundingClientRect().right-h.right:!1}g&&(f=Y(e))&&(c.addToken=eg(c.addToken,f));c.map=[];h=b!=a.display.externalMeasured&&E(e);a:{g=c;var h=af(a,e,h),k=e.markedSpans,l=e.text,m=0;if(k)for(var p=l.length,n=0,q=1,r="",u=void 0,v=void 0,w=0,x=void 0,y=void 0,A=void 0,C=void 0,z=void 0;;){if(w==n){for(var x=
y=A=C=v="",z=null,w=Infinity,F=[],G=0;G<k.length;++G){var I=k[G],D=I.marker;"bookmark"==D.type&&I.from==n&&D.widgetNode?F.push(D):I.from<=n&&(null==I.to||I.to>n||D.collapsed&&I.to==n&&I.from==n)?(null!=I.to&&I.to!=n&&w>I.to&&(w=I.to,y=""),D.className&&(x+=" "+D.className),D.css&&(v=D.css),D.startStyle&&I.from==n&&(A+=" "+D.startStyle),D.endStyle&&I.to==w&&(y+=" "+D.endStyle),D.title&&!C&&(C=D.title),D.collapsed&&(!z||0>We(z.marker,D))&&(z=I)):I.from>n&&w>I.from&&(w=I.from)}if(z&&(z.from||0)==n){cf(g,
(null==z.to?p+1:z.to)-n,z.marker,null==z.from);if(null==z.to)break a;z.to==n&&(z=!1)}if(!z&&F.length)for(G=0;G<F.length;++G)cf(g,0,F[G])}if(n>=p)break;for(F=Math.min(p,w);;){if(r){G=n+r.length;z||(I=G>F?r.slice(0,F-n):r,g.addToken(g,I,u?u+x:x,A,n+I.length==w?y:"",C,v));if(G>=F){r=r.slice(F-n);n=F;break}n=G;A=""}r=l.slice(m,m=h[q++]);u=bf(h[q++],g.cm.options)}}else for(var q=1;q<h.length;q+=2)g.addToken(g,l.slice(m,m=h[q]),bf(h[q+1],g.cm.options))}e.styleClasses&&(e.styleClasses.bgClass&&(c.bgClass=
wd(e.styleClasses.bgClass,c.bgClass||"")),e.styleClasses.textClass&&(c.textClass=wd(e.styleClasses.textClass,c.textClass||"")));0==c.map.length&&c.map.push(0,0,c.content.appendChild(fg(a.display.measure)));0==d?(b.measure.map=c.map,b.measure.cache={}):((b.measure.maps||(b.measure.maps=[])).push(c.map),(b.measure.caches||(b.measure.caches=[])).push({}))}J&&/\bcm-tab\b/.test(c.content.lastChild.className)&&(c.content.className="cm-tab-wrap-hack");K(a,"renderLine",a,b.line,c.pre);c.pre.className&&(c.textClass=
wd(c.pre.className,c.textClass||""));return c}function dg(a,b,c,d,e,f,g){if(b){var h=a.splitSpaces?b.replace(/ {3,}/g,gg):b,k=a.cm.state.specialChars,l=!1;if(k.test(b))for(var m=document.createDocumentFragment(),p=0;;){k.lastIndex=p;var n=k.exec(b),q=n?n.index-p:b.length-p;if(q){var r=document.createTextNode(h.slice(p,p+q));B&&9>C?m.appendChild(t("span",[r])):m.appendChild(r);a.map.push(a.pos,a.pos+q,r);a.col+=q;a.pos+=q}if(!n)break;p+=q+1;"\t"==n[0]?(r=a.cm.options.tabSize,n=r-a.col%r,r=m.appendChild(t("span",
Oe(n),"cm-tab")),r.setAttribute("role","presentation"),r.setAttribute("cm-text","\t"),a.col+=n):(r=a.cm.options.specialCharPlaceholder(n[0]),r.setAttribute("cm-text",n[0]),B&&9>C?m.appendChild(t("span",[r])):m.appendChild(r),a.col+=1);a.map.push(a.pos,a.pos+1,r);a.pos++}else{a.col+=b.length;var m=document.createTextNode(h);a.map.push(a.pos,a.pos+b.length,m);B&&9>C&&(l=!0);a.pos+=b.length}if(c||d||e||l||g)return b=c||"",d&&(b+=d),e&&(b+=e),d=t("span",[m],b,g),f&&(d.title=f),a.content.appendChild(d);
a.content.appendChild(m)}}function gg(a){for(var b=" ",c=0;c<a.length-2;++c)b+=c%2?" ":"\u00a0";return b+" "}function eg(a,b){return function(c,d,e,f,g,h,k){e=e?e+" cm-force-border":"cm-force-border";for(var l=c.pos,m=l+d.length;;){for(var p=0;p<b.length;p++){var n=b[p];if(n.to>l&&n.from<=l)break}if(n.to>=m)return a(c,d,e,f,g,h,k);a(c,d.slice(0,n.to-l),e,f,null,h,k);f=null;d=d.slice(n.to-l);l=n.to}}}function cf(a,b,c,d){var e=!d&&c.widgetNode;e&&a.map.push(a.pos,a.pos+b,e);!d&&a.cm.display.input.needsContentAttribute&&
(e||(e=a.content.appendChild(document.createElement("span"))),e.setAttribute("cm-marker",c.id));e&&(a.cm.display.input.setUneditable(e),a.content.appendChild(e));a.pos+=b}function Ne(a,b){return 0==b.from.ch&&0==b.to.ch&&""==A(b.text)&&(!a.cm||a.cm.options.wholeLineUpdateBefore)}function qd(a,b,c,d){function e(a,c,e){a.text=c;a.stateAfter&&(a.stateAfter=null);a.styles&&(a.styles=null);null!=a.order&&(a.order=null);Ue(a);Ve(a,e);c=d?d(a):1;c!=a.height&&ca(a,c);M(a,"change",a,b)}function f(a,b){for(var e=
a,f=[];e<b;++e)f.push(new Ab(k[e],c?c[e]:null,d));return f}var g=b.from,h=b.to,k=b.text,l=u(a,g.line),m=u(a,h.line),p=A(k),n=c?c[k.length-1]:null,q=h.line-g.line;if(b.full)a.insert(0,f(0,k.length)),a.remove(k.length,a.size-k.length);else if(Ne(a,b)){var r=f(0,k.length-1);e(m,m.text,n);q&&a.remove(g.line,q);r.length&&a.insert(g.line,r)}else l==m?1==k.length?e(l,l.text.slice(0,g.ch)+p+l.text.slice(h.ch),n):(r=f(1,k.length-1),r.push(new Ab(p+l.text.slice(h.ch),n,d)),e(l,l.text.slice(0,g.ch)+k[0],c?c[0]:
null),a.insert(g.line+1,r)):1==k.length?(e(l,l.text.slice(0,g.ch)+k[0]+m.text.slice(h.ch),c?c[0]:null),a.remove(g.line+1,q)):(e(l,l.text.slice(0,g.ch)+k[0],c?c[0]:null),e(m,p+m.text.slice(h.ch),n),r=f(1,k.length-1),1<q&&a.remove(g.line+1,q-1),a.insert(g.line+1,r));M(a,"change",a,b)}function Bb(a){this.lines=a;this.parent=null;for(var b=0,c=0;b<a.length;++b)a[b].parent=this,c+=a[b].height;this.height=c}function Cb(a){this.children=a;for(var b=0,c=0,d=0;d<a.length;++d){var e=a[d],b=b+e.chunkSize(),
c=c+e.height;e.parent=this}this.size=b;this.height=c;this.parent=null}function Ga(a,b,c){function d(a,f,g){if(a.linked)for(var h=0;h<a.linked.length;++h){var k=a.linked[h];if(k.doc!=f){var l=g&&k.sharedHist;if(!c||l)b(k.doc,l),d(k.doc,a,l)}}}d(a,null,!0)}function Ed(a,b){if(b.cm)throw Error("This document is already in use.");a.doc=b;b.cm=a;Ac(a);zc(a);a.options.lineWrapping||Dc(a);a.options.mode=b.modeOption;Q(a)}function u(a,b){b-=a.first;if(0>b||b>=a.size)throw Error("There is no line "+(b+a.first)+
" in the document.");for(var c=a;!c.lines;)for(var d=0;;++d){var e=c.children[d],f=e.chunkSize();if(b<f){c=e;break}b-=f}return c.lines[b]}function Ca(a,b,c){var d=[],e=b.line;a.iter(b.line,c.line+1,function(a){a=a.text;e==c.line&&(a=a.slice(0,c.ch));e==b.line&&(a=a.slice(b.ch));d.push(a);++e});return d}function xd(a,b,c){var d=[];a.iter(b,c,function(a){d.push(a.text)});return d}function ca(a,b){var c=b-a.height;if(c)for(var d=a;d;d=d.parent)d.height+=c}function E(a){if(null==a.parent)return null;
var b=a.parent;a=L(b.lines,a);for(var c=b.parent;c;b=c,c=c.parent)for(var d=0;c.children[d]!=b;++d)a+=c.children[d].chunkSize();return a+b.first}function Aa(a,b){var c=a.first;a:do{for(var d=0;d<a.children.length;++d){var e=a.children[d],f=e.height;if(b<f){a=e;continue a}b-=f;c+=e.chunkSize()}return c}while(!a.lines);for(d=0;d<a.lines.length;++d){e=a.lines[d].height;if(b<e)break;b-=e}return c+d}function ea(a){a=ia(a);for(var b=0,c=a.parent,d=0;d<c.lines.length;++d){var e=c.lines[d];if(e==a)break;
else b+=e.height}for(a=c.parent;a;c=a,a=c.parent)for(d=0;d<a.children.length&&(e=a.children[d],e!=c);++d)b+=e.height;return b}function Y(a){var b=a.order;null==b&&(b=a.order=hg(a.text));return b}function uc(a){this.done=[];this.undone=[];this.undoDepth=Infinity;this.lastModTime=this.lastSelTime=0;this.lastOrigin=this.lastSelOrigin=this.lastOp=this.lastSelOp=null;this.generation=this.maxGeneration=a||1}function pd(a,b){var c={from:Rc(b.from),to:Fa(b),text:Ca(a,b.from,b.to)};df(a,c,b.from.line,b.to.line+
1);Ga(a,function(a){df(a,c,b.from.line,b.to.line+1)},!0);return c}function de(a){for(;a.length;)if(A(a).ranges)a.pop();else break}function Je(a,b,c,d){var e=a.history;e.undone.length=0;var f=+new Date,g,h;if(h=e.lastOp==d||e.lastOrigin==b.origin&&b.origin&&("+"==b.origin.charAt(0)&&a.cm&&e.lastModTime>f-a.cm.options.historyEventDelay||"*"==b.origin.charAt(0)))e.lastOp==d?(de(e.done),g=A(e.done)):e.done.length&&!A(e.done).ranges?g=A(e.done):1<e.done.length&&!e.done[e.done.length-2].ranges?(e.done.pop(),
g=A(e.done)):g=void 0,h=g;if(h){var k=A(g.changes);0==y(b.from,b.to)&&0==y(b.from,k.to)?k.to=Fa(b):g.changes.push(pd(a,b))}else for((g=A(e.done))&&g.ranges||Wb(a.sel,e.done),g={changes:[pd(a,b)],generation:e.generation},e.done.push(g);e.done.length>e.undoDepth;)e.done.shift(),e.done[0].ranges||e.done.shift();e.done.push(c);e.generation=++e.maxGeneration;e.lastModTime=e.lastSelTime=f;e.lastOp=e.lastSelOp=d;e.lastOrigin=e.lastSelOrigin=b.origin;k||K(a,"historyAdded")}function Wb(a,b){var c=A(b);c&&
c.ranges&&c.equals(a)||b.push(a)}function df(a,b,c,d){var e=b["spans_"+a.id],f=0;a.iter(Math.max(a.first,c),Math.min(a.first+a.size,d),function(c){c.markedSpans&&((e||(e=b["spans_"+a.id]={}))[f]=c.markedSpans);++f})}function $f(a){if(!a)return null;for(var b=0,c;b<a.length;++b)a[b].marker.explicitlyCleared?c||(c=a.slice(0,b)):c&&c.push(a[b]);return c?c.length?c:null:a}function Xa(a,b,c){for(var d=0,e=[];d<a.length;++d){var f=a[d];if(f.ranges)e.push(c?la.prototype.deepCopy.call(f):f);else{var f=f.changes,
g=[];e.push({changes:g});for(var h=0;h<f.length;++h){var k=f[h],l;g.push({from:k.from,to:k.to,text:k.text});if(b)for(var m in k)(l=m.match(/^spans_(\d+)$/))&&-1<L(b,Number(l[1]))&&(A(g)[m]=k[m],delete k[m])}}}return e}function ef(a,b,c,d){c<a.line?a.line+=d:b<a.line&&(a.line=b,a.ch=0)}function ff(a,b,c,d){for(var e=0;e<a.length;++e){var f=a[e],g=!0;if(f.ranges){f.copied||(f=a[e]=f.deepCopy(),f.copied=!0);for(var h=0;h<f.ranges.length;h++)ef(f.ranges[h].anchor,b,c,d),ef(f.ranges[h].head,b,c,d)}else{for(h=
0;h<f.changes.length;++h){var k=f.changes[h];if(c<k.from.line)k.from=r(k.from.line+d,k.from.ch),k.to=r(k.to.line+d,k.to.ch);else if(b<=k.to.line){g=!1;break}}g||(a.splice(0,e+1),e=0)}}}function Ke(a,b){var c=b.from.line,d=b.to.line,e=b.text.length-(d-c)-1;ff(a.done,c,d,e);ff(a.undone,c,d,e)}function ld(a){return null!=a.defaultPrevented?a.defaultPrevented:0==a.returnValue}function ye(a){var b=a.which;null==b&&(a.button&1?b=1:a.button&2?b=3:a.button&4&&(b=2));W&&a.ctrlKey&&1==b&&(b=3);return b}function M(a,
b){function c(a){return function(){a.apply(null,e)}}var d=a._handlers&&a._handlers[b];if(d){var e=Array.prototype.slice.call(arguments,2),f;Ta?f=Ta.delayedCallbacks:Db?f=Db:(f=Db=[],setTimeout(ig,0));for(var g=0;g<d.length;++g)f.push(c(d[g]))}}function ig(){var a=Db;Db=null;for(var b=0;b<a.length;++b)a[b]()}function ja(a,b,c){"string"==typeof b&&(b={type:b,preventDefault:function(){this.defaultPrevented=!0}});K(a,c||b.type,a,b);return ld(b)||b.codemirrorIgnore}function ge(a){var b=a._handlers&&a._handlers.cursorActivity;
if(b){a=a.curOp.cursorActivityHandlers||(a.curOp.cursorActivityHandlers=[]);for(var c=0;c<b.length;++c)-1==L(a,b[c])&&a.push(b[c])}}function S(a,b){var c=a._handlers&&a._handlers[b];return c&&0<c.length}function Ya(a){a.prototype.on=function(a,c){v(this,a,c)};a.prototype.off=function(a,c){ka(this,a,c)}}function bb(){this.id=null}function ze(a,b,c){for(var d=0,e=0;;){var f=a.indexOf("\t",d);-1==f&&(f=a.length);var g=f-d;if(f==a.length||e+g>=b)return d+Math.min(g,b-e);e+=f-d;e+=c-e%c;d=f+1;if(e>=b)return d}}
function Oe(a){for(;vc.length<=a;)vc.push(A(vc)+" ");return vc[a]}function A(a){return a[a.length-1]}function L(a,b){for(var c=0;c<a.length;++c)if(a[c]==b)return c;return-1}function ob(a,b){for(var c=[],d=0;d<a.length;d++)c[d]=b(a[d],d);return c}function Eb(){}function gf(a,b){var c;Object.create?c=Object.create(a):(Eb.prototype=a,c=new Eb);b&&V(b,c);return c}function V(a,b,c){b||(b={});for(var d in a)!a.hasOwnProperty(d)||!1===c&&b.hasOwnProperty(d)||(b[d]=a[d]);return b}function cb(a){var b=Array.prototype.slice.call(arguments,
1);return function(){return a.apply(null,b)}}function oc(a,b){return b?-1<b.source.indexOf("\\w")&&hf(a)?!0:b.test(a):hf(a)}function jf(a){for(var b in a)if(a.hasOwnProperty(b)&&a[b])return!1;return!0}function tb(a){return 768<=a.charCodeAt(0)&&jg.test(a)}function t(a,b,c,d){a=document.createElement(a);c&&(a.className=c);d&&(a.style.cssText=d);if("string"==typeof b)a.appendChild(document.createTextNode(b));else if(b)for(c=0;c<b.length;++c)a.appendChild(b[c]);return a}function ya(a){for(var b=a.childNodes.length;0<
b;--b)a.removeChild(a.firstChild);return a}function U(a,b){return ya(a).appendChild(b)}function fa(){return document.activeElement}function Fb(a){return new RegExp("(^|\\s)"+a+"(?:$|\\s)\\s*")}function wd(a,b){for(var c=a.split(" "),d=0;d<c.length;d++)c[d]&&!Fb(c[d]).test(b)&&(b+=" "+c[d]);return b}function kf(a){if(document.body.getElementsByClassName)for(var b=document.body.getElementsByClassName("CodeMirror"),c=0;c<b.length;c++){var d=b[c].CodeMirror;d&&a(d)}}function uf(){var a;v(window,"resize",
function(){null==a&&(a=setTimeout(function(){a=null;kf(Jf)},100))});v(window,"blur",function(){kf(db)})}function fg(a){if(null==yd){var b=t("span","\u200b");U(a,t("span",[b,document.createTextNode("x")]));0!=a.firstChild.offsetHeight&&(yd=1>=b.offsetWidth&&2<b.offsetHeight&&!(B&&8>C))}a=yd?t("span","\u200b"):t("span","\u00a0",null,"display: inline-block; width: 1px; margin-right: -1px");a.setAttribute("cm-text","");return a}function Bf(a,b,c,d){if(!a)return d(b,c,"ltr");for(var e=!1,f=0;f<a.length;++f){var g=
a[f];if(g.from<c&&g.to>b||b==c&&g.to==b)d(Math.max(g.from,b),Math.min(g.to,c),1==g.level?"rtl":"ltr"),e=!0}e||d(b,c,"ltr")}function dd(a){return a.level%2?a.to:a.from}function ed(a){return a.level%2?a.from:a.to}function ac(a){return(a=Y(a))?dd(a[0]):0}function bc(a){var b=Y(a);return b?ed(A(b)):a.text.length}function lf(a,b){var c=u(a.doc,b),d=ia(c);d!=c&&(b=E(d));d=(c=Y(d))?c[0].level%2?bc(d):ac(d):0;return r(b,d)}function mf(a,b){var c=lf(a,b.line),d=u(a.doc,c.line),e=Y(d);return e&&0!=e[0].level?
c:(d=Math.max(0,d.text.search(/\S/)),r(c.line,b.line==c.line&&b.ch<=d&&b.ch?0:d))}function Sb(a,b){vb=null;for(var c=0,d;c<a.length;++c){var e=a[c];if(e.from<b&&e.to>b)return c;if(e.from==b||e.to==b)if(null==d)d=c;else{var f;f=e.level;var g=a[d].level,h=a[0].level;f=f==h?!0:g==h?!1:f<g;if(f)return e.from!=e.to&&(vb=d),c;e.from!=e.to&&(vb=c);break}}return d}function zd(a,b,c,d){if(!d)return b+c;do b+=c;while(0<b&&tb(a.text.charAt(b)));return b}function gd(a,b,c,d){var e=Y(a);if(!e)return Pe(a,b,c,
d);var f=Sb(e,b),g=e[f];for(b=zd(a,b,g.level%2?-c:c,d);;){if(b>g.from&&b<g.to)return b;if(b==g.from||b==g.to){if(Sb(e,b)==f)return b;g=e[f+c];return 0<c==g.level%2?g.to:g.from}g=e[f+=c];if(!g)return null;b=0<c==g.level%2?zd(a,g.to,-1,d):zd(a,g.from,1,d)}}function Pe(a,b,c,d){b+=c;if(d)for(;0<b&&tb(a.text.charAt(b));)b+=c;return 0>b||b>a.text.length?null:b}var va=/gecko\/\d/i.test(navigator.userAgent),nf=/MSIE \d/.test(navigator.userAgent),of=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),
B=nf||of,C=B&&(nf?document.documentMode||6:of[1]),J=/WebKit\//.test(navigator.userAgent),kg=J&&/Qt\/\d+\.\d+/.test(navigator.userAgent),lg=/Chrome\//.test(navigator.userAgent),ba=/Opera\//.test(navigator.userAgent),ue=/Apple Computer/.test(navigator.vendor),mg=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(navigator.userAgent),Hf=/PhantomJS/.test(navigator.userAgent),Qa=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),ab=Qa||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(navigator.userAgent),
W=Qa||/Mac/.test(navigator.platform),ng=/win/i.test(navigator.platform),Ia=ba&&navigator.userAgent.match(/Version\/(\d*\.\d*)/);Ia&&(Ia=Number(Ia[1]));Ia&&15<=Ia&&(ba=!1,J=!0);var pf=W&&(kg||ba&&(null==Ia||12.11>Ia)),id=va||B&&9<=C,He=!1,ra=!1;Fc.prototype=V({update:function(a){var b=a.scrollWidth>a.clientWidth+1,c=a.scrollHeight>a.clientHeight+1,d=a.nativeBarWidth;c?(this.vert.style.display="block",this.vert.style.bottom=b?d+"px":"0",this.vert.firstChild.style.height=Math.max(0,a.scrollHeight-a.clientHeight+
(a.viewHeight-(b?d:0)))+"px"):(this.vert.style.display="",this.vert.firstChild.style.height="0");b?(this.horiz.style.display="block",this.horiz.style.right=c?d+"px":"0",this.horiz.style.left=a.barLeft+"px",this.horiz.firstChild.style.width=a.scrollWidth-a.clientWidth+(a.viewWidth-a.barLeft-(c?d:0))+"px"):(this.horiz.style.display="",this.horiz.firstChild.style.width="0");!this.checkedOverlay&&0<a.clientHeight&&(0==d&&this.overlayHack(),this.checkedOverlay=!0);return{right:c?d:0,bottom:b?d:0}},setScrollLeft:function(a){this.horiz.scrollLeft!=
a&&(this.horiz.scrollLeft=a)},setScrollTop:function(a){this.vert.scrollTop!=a&&(this.vert.scrollTop=a)},overlayHack:function(){this.horiz.style.minHeight=this.vert.style.minWidth=W&&!mg?"12px":"18px";var a=this,b=function(b){(b.target||b.srcElement)!=a.vert&&(b.target||b.srcElement)!=a.horiz&&F(a.cm,qe)(b)};v(this.vert,"mousedown",b);v(this.horiz,"mousedown",b)},clear:function(){var a=this.horiz.parentNode;a.removeChild(this.horiz);a.removeChild(this.vert)}},Fc.prototype);Gc.prototype=V({update:function(){return{bottom:0,
right:0}},setScrollLeft:function(){},setScrollTop:function(){},clear:function(){}},Gc.prototype);q.scrollbarModel={"native":Fc,"null":Gc};Mb.prototype.signal=function(a,b){S(a,b)&&this.events.push(arguments)};Mb.prototype.finish=function(){for(var a=0;a<this.events.length;a++)K.apply(null,this.events[a])};var r=q.Pos=function(a,b){if(!(this instanceof r))return new r(a,b);this.line=a;this.ch=b},y=q.cmpPos=function(a,b){return a.line-b.line||a.ch-b.ch},X=null;Tc.prototype=V({init:function(a){function b(a){if(d.somethingSelected())X=
d.getSelections(),c.inaccurateSelection&&(c.prevInput="",c.inaccurateSelection=!1,f.value=X.join("\n"),Za(f));else if(d.options.lineWiseCopyCut){var b=Wd(d);X=b.text;"cut"==a.type?d.setSelections(b.ranges,null,ha):(c.prevInput="",f.value=b.text.join("\n"),Za(f))}else return;"cut"==a.type&&(d.state.cutIncoming=!0)}var c=this,d=this.cm,e=this.wrapper=Yd(),f=this.textarea=e.firstChild;a.wrapper.insertBefore(e,a.wrapper.firstChild);Qa&&(f.style.width="0px");v(f,"input",function(){B&&9<=C&&c.hasSelection&&
(c.hasSelection=null);c.poll()});v(f,"paste",function(){if(J&&!d.state.fakedLastChar&&!(200>new Date-d.state.lastMiddleDown)){var a=f.selectionStart,b=f.selectionEnd;f.value+="$";f.selectionEnd=b;f.selectionStart=a;d.state.fakedLastChar=!0}d.state.pasteIncoming=!0;c.fastPoll()});v(f,"cut",b);v(f,"copy",b);v(a.scroller,"paste",function(b){oa(a,b)||(d.state.pasteIncoming=!0,c.focus())});v(a.lineSpace,"selectstart",function(b){oa(a,b)||O(b)});v(f,"compositionstart",function(){var a=d.getCursor("from");
c.composing={start:a,range:d.markText(a,d.getCursor("to"),{className:"CodeMirror-composing"})}});v(f,"compositionend",function(){c.composing&&(c.poll(),c.composing.range.clear(),c.composing=null)})},prepareSelection:function(){var a=this.cm,b=a.display,c=a.doc,d=ie(a);if(a.options.moveInputWithCursor){var a=ma(a,c.sel.primary().head,"div"),c=b.wrapper.getBoundingClientRect(),e=b.lineDiv.getBoundingClientRect();d.teTop=Math.max(0,Math.min(b.wrapper.clientHeight-10,a.top+e.top-c.top));d.teLeft=Math.max(0,
Math.min(b.wrapper.clientWidth-10,a.left+e.left-c.left))}return d},showSelection:function(a){var b=this.cm.display;U(b.cursorDiv,a.cursors);U(b.selectionDiv,a.selection);null!=a.teTop&&(this.wrapper.style.top=a.teTop+"px",this.wrapper.style.left=a.teLeft+"px")},reset:function(a){if(!this.contextMenuPending){var b,c,d=this.cm,e=d.doc;d.somethingSelected()?(this.prevInput="",b=e.sel.primary(),c=(b=De&&(100<b.to().line-b.from().line||1E3<(c=d.getSelection()).length))?"-":c||d.getSelection(),this.textarea.value=
c,d.state.focused&&Za(this.textarea),B&&9<=C&&(this.hasSelection=c)):a||(this.prevInput=this.textarea.value="",B&&9<=C&&(this.hasSelection=null));this.inaccurateSelection=b}},getField:function(){return this.textarea},supportsTouch:function(){return!1},focus:function(){if("nocursor"!=this.cm.options.readOnly&&(!ab||fa()!=this.textarea))try{this.textarea.focus()}catch(a){}},blur:function(){this.textarea.blur()},resetPosition:function(){this.wrapper.style.top=this.wrapper.style.left=0},receivedFocus:function(){this.slowPoll()},
slowPoll:function(){var a=this;a.pollingFast||a.polling.set(this.cm.options.pollInterval,function(){a.poll();a.cm.state.focused&&a.slowPoll()})},fastPoll:function(){function a(){c.poll()||b?(c.pollingFast=!1,c.slowPoll()):(b=!0,c.polling.set(60,a))}var b=!1,c=this;c.pollingFast=!0;c.polling.set(20,a)},poll:function(){var a=this.cm,b=this.textarea,c=this.prevInput;if(!a.state.focused||og(b)&&!c||Rb(a)||a.options.disableInput||a.state.keySeq)return!1;a.state.pasteIncoming&&a.state.fakedLastChar&&(b.value=
b.value.substring(0,b.value.length-1),a.state.fakedLastChar=!1);var d=b.value;if(d==c&&!a.somethingSelected())return!1;if(B&&9<=C&&this.hasSelection===d||W&&/[\uf700-\uf7ff]/.test(d))return a.display.input.reset(),!1;if(a.doc.sel==a.display.selForContextMenu){var e=d.charCodeAt(0);8203!=e||c||(c="\u200b");if(8666==e)return this.reset(),this.cm.execCommand("undo")}for(var f=0,e=Math.min(c.length,d.length);f<e&&c.charCodeAt(f)==d.charCodeAt(f);)++f;var g=this;T(a,function(){Sc(a,d.slice(f),c.length-
f,null,g.composing?"*compose":null);1E3<d.length||-1<d.indexOf("\n")?b.value=g.prevInput="":g.prevInput=d;g.composing&&(g.composing.range.clear(),g.composing.range=a.markText(g.composing.start,a.getCursor("to"),{className:"CodeMirror-composing"}))});return!0},ensurePolled:function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},onKeyPress:function(){B&&9<=C&&(this.hasSelection=null);this.fastPoll()},onContextMenu:function(a){function b(){if(null!=g.selectionStart){var a=e.somethingSelected(),
b="\u200b"+(a?g.value:"");g.value="\u21da";g.value=b;d.prevInput=a?"":"\u200b";g.selectionStart=1;g.selectionEnd=b.length;f.selForContextMenu=e.doc.sel}}function c(){d.contextMenuPending=!1;d.wrapper.style.position="relative";g.style.cssText=l;B&&9>C&&f.scrollbars.setScrollTop(f.scroller.scrollTop=k);if(null!=g.selectionStart){(!B||B&&9>C)&&b();var a=0,c=function(){f.selForContextMenu==e.doc.sel&&0==g.selectionStart&&0<g.selectionEnd&&"\u200b"==d.prevInput?F(e,ic.selectAll)(e):10>a++?f.detectingSelectAll=
setTimeout(c,500):f.input.reset()};f.detectingSelectAll=setTimeout(c,200)}}var d=this,e=d.cm,f=e.display,g=d.textarea,h=Ua(e,a),k=f.scroller.scrollTop;if(h&&!ba){e.options.resetSelectionOnContextMenu&&-1==e.doc.sel.contains(h)&&F(e,G)(e.doc,ga(h),ha);var l=g.style.cssText;d.wrapper.style.position="absolute";g.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(a.clientY-5)+"px; left: "+(a.clientX-5)+"px; z-index: 1000; background: "+(B?"rgba(255, 255, 255, .05)":"transparent")+"; outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity\x3d5);";
if(J)var m=window.scrollY;f.input.focus();J&&window.scrollTo(null,m);f.input.reset();e.somethingSelected()||(g.value=d.prevInput=" ");d.contextMenuPending=!0;f.selForContextMenu=e.doc.sel;clearTimeout(f.detectingSelectAll);B&&9<=C&&b();if(id){jd(a);var p=function(){ka(window,"mouseup",p);setTimeout(c,20)};v(window,"mouseup",p)}else setTimeout(c,50)}},setUneditable:Eb,needsContentAttribute:!1},Tc.prototype);Uc.prototype=V({init:function(a){function b(a){if(d.somethingSelected())X=d.getSelections(),
"cut"==a.type&&d.replaceSelection("",null,"cut");else if(d.options.lineWiseCopyCut){var b=Wd(d);X=b.text;"cut"==a.type&&d.operation(function(){d.setSelections(b.ranges,0,ha);d.replaceSelection("",null,"cut")})}else return;if(a.clipboardData&&!Qa)a.preventDefault(),a.clipboardData.clearData(),a.clipboardData.setData("text/plain",X.join("\n"));else{var c=Yd();a=c.firstChild;d.display.lineSpace.insertBefore(c,d.display.lineSpace.firstChild);a.value=X.join("\n");var h=document.activeElement;Za(a);setTimeout(function(){d.display.lineSpace.removeChild(c);
h.focus()},50)}}var c=this,d=c.cm;a=c.div=a.lineDiv;a.contentEditable="true";Xd(a);v(a,"paste",function(a){var b=a.clipboardData&&a.clipboardData.getData("text/plain");b&&(a.preventDefault(),d.replaceSelection(b,null,"paste"))});v(a,"compositionstart",function(a){a=a.data;c.composing={sel:d.doc.sel,data:a,startData:a};if(a){var b=d.doc.sel.primary(),g=d.getLine(b.head.line).indexOf(a,Math.max(0,b.head.ch-a.length));-1<g&&g<=b.head.ch&&(c.composing.sel=ga(r(b.head.line,g),r(b.head.line,g+a.length)))}});
v(a,"compositionupdate",function(a){c.composing.data=a.data});v(a,"compositionend",function(a){var b=c.composing;b&&(a.data==b.startData||/\u200b/.test(a.data)||(b.data=a.data),setTimeout(function(){b.handled||c.applyComposition(b);c.composing==b&&(c.composing=null)},50))});v(a,"touchstart",function(){c.forceCompositionEnd()});v(a,"input",function(){c.composing||c.pollContent()||T(c.cm,function(){Q(d)})});v(a,"copy",b);v(a,"cut",b)},prepareSelection:function(){var a=ie(this.cm,!1);a.focus=this.cm.state.focused;
return a},showSelection:function(a){a&&this.cm.display.view.length&&(a.focus&&this.showPrimarySelection(),this.showMultipleSelections(a))},showPrimarySelection:function(){var a=window.getSelection(),b=this.cm.doc.sel.primary(),c=Tb(this.cm,a.anchorNode,a.anchorOffset),d=Tb(this.cm,a.focusNode,a.focusOffset);if(!c||c.bad||!d||d.bad||0!=y(Qb(c,d),b.from())||0!=y(Pb(c,d),b.to()))if(c=Zd(this.cm,b.from()),d=Zd(this.cm,b.to()),c||d){var e=this.cm.display.view,b=a.rangeCount&&a.getRangeAt(0);c?d||(d=e[e.length-
1].measure,d=d.maps?d.maps[d.maps.length-1]:d.map,d={node:d[d.length-1],offset:d[d.length-2]-d[d.length-3]}):c={node:e[0].measure.map[2],offset:0};try{var f=Da(c.node,c.offset,d.offset,d.node)}catch(g){}f&&(a.removeAllRanges(),a.addRange(f),b&&null==a.anchorNode?a.addRange(b):va&&this.startGracePeriod());this.rememberSelection()}},startGracePeriod:function(){var a=this;clearTimeout(this.gracePeriod);this.gracePeriod=setTimeout(function(){a.gracePeriod=!1;a.selectionChanged()&&a.cm.operation(function(){a.cm.curOp.selectionChanged=
!0})},20)},showMultipleSelections:function(a){U(this.cm.display.cursorDiv,a.cursors);U(this.cm.display.selectionDiv,a.selection)},rememberSelection:function(){var a=window.getSelection();this.lastAnchorNode=a.anchorNode;this.lastAnchorOffset=a.anchorOffset;this.lastFocusNode=a.focusNode;this.lastFocusOffset=a.focusOffset},selectionInEditor:function(){var a=window.getSelection();if(!a.rangeCount)return!1;a=a.getRangeAt(0).commonAncestorContainer;return Wc(this.div,a)},focus:function(){"nocursor"!=
this.cm.options.readOnly&&this.div.focus()},blur:function(){this.div.blur()},getField:function(){return this.div},supportsTouch:function(){return!0},receivedFocus:function(){function a(){b.cm.state.focused&&(b.pollSelection(),b.polling.set(b.cm.options.pollInterval,a))}var b=this;this.selectionInEditor()?this.pollSelection():T(this.cm,function(){b.cm.curOp.selectionChanged=!0});this.polling.set(this.cm.options.pollInterval,a)},selectionChanged:function(){var a=window.getSelection();return a.anchorNode!=
this.lastAnchorNode||a.anchorOffset!=this.lastAnchorOffset||a.focusNode!=this.lastFocusNode||a.focusOffset!=this.lastFocusOffset},pollSelection:function(){if(!this.composing&&!this.gracePeriod&&this.selectionChanged()){var a=window.getSelection(),b=this.cm;this.rememberSelection();var c=Tb(b,a.anchorNode,a.anchorOffset),d=Tb(b,a.focusNode,a.focusOffset);c&&d&&T(b,function(){G(b.doc,ga(c,d),ha);if(c.bad||d.bad)b.curOp.selectionChanged=!0})}},pollContent:function(){var a=this.cm,b=a.display,c=a.doc.sel.primary(),
d=c.from(),c=c.to();if(d.line<b.viewFrom||c.line>b.viewTo-1)return!1;var e;d.line==b.viewFrom||0==(e=Ba(a,d.line))?(d=E(b.view[0].line),e=b.view[0].node):(d=E(b.view[e].line),e=b.view[e-1].node.nextSibling);var f=Ba(a,c.line);f==b.view.length-1?(c=b.viewTo-1,b=b.view[f].node):(c=E(b.view[f+1].line)-1,b=b.view[f+1].node.previousSibling);b=sa(yf(a,e,b,d,c));for(e=Ca(a.doc,r(d,0),r(c,u(a.doc,c).text.length));1<b.length&&1<e.length;)if(A(b)==A(e))b.pop(),e.pop(),c--;else if(b[0]==e[0])b.shift(),e.shift(),
d++;else break;for(var g=0,f=0,h=b[0],k=e[0],l=Math.min(h.length,k.length);g<l&&h.charCodeAt(g)==k.charCodeAt(g);)++g;h=A(b);k=A(e);for(l=Math.min(h.length-(1==b.length?g:0),k.length-(1==e.length?g:0));f<l&&h.charCodeAt(h.length-f-1)==k.charCodeAt(k.length-f-1);)++f;b[b.length-1]=h.slice(0,h.length-f);b[0]=b[0].slice(g);d=r(d,g);c=r(c,e.length?A(e).length-f:0);if(1<b.length||b[0]||y(d,c))return wb(a.doc,b,d,c,"+input"),!0},ensurePolled:function(){this.forceCompositionEnd()},reset:function(){this.forceCompositionEnd()},
forceCompositionEnd:function(){this.composing&&!this.composing.handled&&(this.applyComposition(this.composing),this.composing.handled=!0,this.div.blur(),this.div.focus())},applyComposition:function(a){a.data&&a.data!=a.startData&&F(this.cm,Sc)(this.cm,a.data,0,a.sel)},setUneditable:function(a){a.setAttribute("contenteditable","false")},onKeyPress:function(a){a.preventDefault();F(this.cm,Sc)(this.cm,String.fromCharCode(null==a.charCode?a.keyCode:a.charCode),0)},onContextMenu:Eb,resetPosition:Eb,needsContentAttribute:!0},
Uc.prototype);q.inputStyles={textarea:Tc,contenteditable:Uc};la.prototype={primary:function(){return this.ranges[this.primIndex]},equals:function(a){if(a==this)return!0;if(a.primIndex!=this.primIndex||a.ranges.length!=this.ranges.length)return!1;for(var b=0;b<this.ranges.length;b++){var c=this.ranges[b],d=a.ranges[b];if(0!=y(c.anchor,d.anchor)||0!=y(c.head,d.head))return!1}return!0},deepCopy:function(){for(var a=[],b=0;b<this.ranges.length;b++)a[b]=new z(Rc(this.ranges[b].anchor),Rc(this.ranges[b].head));
return new la(a,this.primIndex)},somethingSelected:function(){for(var a=0;a<this.ranges.length;a++)if(!this.ranges[a].empty())return!0;return!1},contains:function(a,b){b||(b=a);for(var c=0;c<this.ranges.length;c++){var d=this.ranges[c];if(0<=y(b,d.from())&&0>=y(a,d.to()))return c}return-1}};z.prototype={from:function(){return Qb(this.anchor,this.head)},to:function(){return Pb(this.anchor,this.head)},empty:function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch}};var ad={left:0,
right:0,top:0,bottom:0},Ea,Ta=null,Gf=0,fc,ec,te=0,gc=0,R=null;B?R=-.53:va?R=15:lg?R=-.7:ue&&(R=-1/3);var Ae=function(a){var b=a.wheelDeltaX,c=a.wheelDeltaY;null==b&&a.detail&&a.axis==a.HORIZONTAL_AXIS&&(b=a.detail);null==c&&a.detail&&a.axis==a.VERTICAL_AXIS?c=a.detail:null==c&&(c=a.wheelDelta);return{x:b,y:c}};q.wheelEventPixels=function(a){a=Ae(a);a.x*=R;a.y*=R;return a};var Rf=new bb,md=null,Fa=q.changeEnd=function(a){return a.text?r(a.from.line+a.text.length-1,A(a.text).length+(1==a.text.length?
a.from.ch:0)):a.to};q.prototype={constructor:q,focus:function(){window.focus();this.display.input.focus()},setOption:function(a,b){var c=this.options,d=c[a];if(c[a]!=b||"mode"==a)c[a]=b,Ka.hasOwnProperty(a)&&F(this,Ka[a])(this,b,d)},getOption:function(a){return this.options[a]},getDoc:function(){return this.doc},addKeyMap:function(a,b){this.state.keyMaps[b?"push":"unshift"](pc(a))},removeKeyMap:function(a){for(var b=this.state.keyMaps,c=0;c<b.length;++c)if(b[c]==a||b[c].name==a)return b.splice(c,
1),!0},addOverlay:D(function(a,b){var c=a.token?a:q.getMode(this.options,a);if(c.startState)throw Error("Overlays may not be stateful.");this.state.overlays.push({mode:c,modeSpec:a,opaque:b&&b.opaque});this.state.modeGen++;Q(this)}),removeOverlay:D(function(a){for(var b=this.state.overlays,c=0;c<b.length;++c){var d=b[c].modeSpec;if(d==a||"string"==typeof a&&d.name==a){b.splice(c,1);this.state.modeGen++;Q(this);break}}}),indentLine:D(function(a,b,c){"string"!=typeof b&&"number"!=typeof b&&(b=null==
b?this.options.smartIndent?"smart":"prev":b?"add":"subtract");qb(this.doc,a)&&pb(this,a,b,c)}),indentSelection:D(function(a){for(var b=this.doc.sel.ranges,c=-1,d=0;d<b.length;d++){var e=b[d];if(e.empty())e.head.line>c&&(pb(this,e.head.line,a,!0),c=e.head.line,d==this.doc.sel.primIndex&&Pa(this));else{for(var f=e.from(),e=e.to(),g=Math.max(c,f.line),c=Math.min(this.lastLine(),e.line-(e.ch?0:1))+1,e=g;e<c;++e)pb(this,e,a);e=this.doc.sel.ranges;0==f.ch&&b.length==e.length&&0<e[d].from().ch&&Xc(this.doc,
d,new z(f,e[d].to()),ha)}}}),getTokenAt:function(a,b){return Ze(this,a,b)},getLineTokens:function(a,b){return Ze(this,r(a),b,!0)},getTokenTypeAt:function(a){a=x(this.doc,a);var b=af(this,u(this.doc,a.line)),c=0,d=(b.length-1)/2;a=a.ch;if(0==a)b=b[2];else for(;;){var e=c+d>>1;if((e?b[2*e-1]:0)>=a)d=e;else if(b[2*e+1]<a)c=e+1;else{b=b[2*e+2];break}}c=b?b.indexOf("cm-overlay "):-1;return 0>c?b:0==c?null:b.slice(0,c-1)},getModeAt:function(a){var b=this.doc.mode;return b.innerMode?q.innerMode(b,this.getTokenAt(a).state).mode:
b},getHelper:function(a,b){return this.getHelpers(a,b)[0]},getHelpers:function(a,b){var c=[];if(!$a.hasOwnProperty(b))return c;var d=$a[b],e=this.getModeAt(a);if("string"==typeof e[b])d[e[b]]&&c.push(d[e[b]]);else if(e[b])for(var f=0;f<e[b].length;f++){var g=d[e[b][f]];g&&c.push(g)}else e.helperType&&d[e.helperType]?c.push(d[e.helperType]):d[e.name]&&c.push(d[e.name]);for(f=0;f<d._global.length;f++)g=d._global[f],g.pred(e,this)&&-1==L(c,g.val)&&c.push(g.val);return c},getStateAfter:function(a,b){var c=
this.doc;a=Math.max(c.first,Math.min(null==a?c.first+c.size-1:a,c.first+c.size-1));return sb(this,a+1,b)},cursorCoords:function(a,b){var c;c=this.doc.sel.primary();c=null==a?c.head:"object"==typeof a?x(this.doc,a):a?c.from():c.to();return ma(this,c,b||"page")},charCoords:function(a,b){return Yb(this,x(this.doc,a),b||"page")},coordsChar:function(a,b){a=oe(this,a,b||"page");return fd(this,a.left,a.top)},lineAtHeight:function(a,b){a=oe(this,{top:a,left:0},b||"page").top;return Aa(this.doc,a+this.display.viewOffset)},
heightAtLine:function(a,b){var c=!1,d;"number"==typeof a?(d=this.doc.first+this.doc.size-1,a<this.doc.first?a=this.doc.first:a>d&&(a=d,c=!0),d=u(this.doc,a)):d=a;return cd(this,d,{top:0,left:0},b||"page").top+(c?this.doc.height-ea(d):0)},defaultTextHeight:function(){return wa(this.display)},defaultCharWidth:function(){return gb(this.display)},setGutterMarker:D(function(a,b,c){return nc(this.doc,a,"gutter",function(a){var e=a.gutterMarkers||(a.gutterMarkers={});e[b]=c;!c&&jf(e)&&(a.gutterMarkers=null);
return!0})}),clearGutter:D(function(a){var b=this,c=b.doc,d=c.first;c.iter(function(c){c.gutterMarkers&&c.gutterMarkers[a]&&(c.gutterMarkers[a]=null,na(b,d,"gutter"),jf(c.gutterMarkers)&&(c.gutterMarkers=null));++d})}),lineInfo:function(a){if("number"==typeof a){if(!qb(this.doc,a))return null;var b=a;a=u(this.doc,a);if(!a)return null}else if(b=E(a),null==b)return null;return{line:b,handle:a,text:a.text,gutterMarkers:a.gutterMarkers,textClass:a.textClass,bgClass:a.bgClass,wrapClass:a.wrapClass,widgets:a.widgets}},
getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(a,b,c,d,e){var f=this.display;a=ma(this,x(this.doc,a));var g=a.bottom,h=a.left;b.style.position="absolute";b.setAttribute("cm-ignore-events","true");this.display.input.setUneditable(b);f.sizer.appendChild(b);if("over"==d)g=a.top;else if("above"==d||"near"==d){var k=Math.max(f.wrapper.clientHeight,this.doc.height),l=Math.max(f.sizer.clientWidth,f.lineSpace.clientWidth);("above"==d||a.bottom+b.offsetHeight>
k)&&a.top>b.offsetHeight?g=a.top-b.offsetHeight:a.bottom+b.offsetHeight<=k&&(g=a.bottom);h+b.offsetWidth>l&&(h=l-b.offsetWidth)}b.style.top=g+"px";b.style.left=b.style.right="";"right"==e?(h=f.sizer.clientWidth-b.offsetWidth,b.style.right="0px"):("left"==e?h=0:"middle"==e&&(h=(f.sizer.clientWidth-b.offsetWidth)/2),b.style.left=h+"px");c&&(a=cc(this,h,g,h+b.offsetWidth,g+b.offsetHeight),null!=a.scrollTop&&lb(this,a.scrollTop),null!=a.scrollLeft&&Ma(this,a.scrollLeft))},triggerOnKeyDown:D(we),triggerOnKeyPress:D(xe),
triggerOnKeyUp:ve,execCommand:function(a){if(ic.hasOwnProperty(a))return ic[a](this)},triggerElectric:D(function(a){Vd(this,a)}),findPosH:function(a,b,c,d){var e=1;0>b&&(e=-1,b=-b);var f=0;for(a=x(this.doc,a);f<b&&(a=rd(this.doc,a,e,c,d),!a.hitSide);++f);return a},moveH:D(function(a,b){var c=this;c.extendSelectionsBy(function(d){return c.display.shift||c.doc.extend||d.empty()?rd(c.doc,d.head,a,b,c.options.rtlMoveVisually):0>a?d.from():d.to()},Gb)}),deleteH:D(function(a,b){var c=this.doc;this.doc.sel.somethingSelected()?
c.replaceSelection("",null,"+delete"):Va(this,function(d){var e=rd(c,d.head,a,b,!1);return 0>a?{from:e,to:d.head}:{from:d.head,to:e}})}),findPosV:function(a,b,c,d){var e=1;0>b&&(e=-1,b=-b);var f=0;for(a=x(this.doc,a);f<b&&(a=ma(this,a,"div"),null==d?d=a.left:a.left=d,a=Qe(this,a,e,c),!a.hitSide);++f);return a},moveV:D(function(a,b){var c=this,d=this.doc,e=[],f=!c.display.shift&&!d.extend&&d.sel.somethingSelected();d.extendSelectionsBy(function(g){if(f)return 0>a?g.from():g.to();var k=ma(c,g.head,
"div");null!=g.goalColumn&&(k.left=g.goalColumn);e.push(k.left);var l=Qe(c,k,a,b);"page"==b&&g==d.sel.primary()&&lc(c,null,Yb(c,l,"div").top-k.top);return l},Gb);if(e.length)for(var g=0;g<d.sel.ranges.length;g++)d.sel.ranges[g].goalColumn=e[g]}),findWordAt:function(a){var b=u(this.doc,a.line).text,c=a.ch,d=a.ch;if(b){var e=this.getHelper(a,"wordChars");(0>a.xRel||d==b.length)&&c?--c:++d;for(var f=b.charAt(c),f=oc(f,e)?function(a){return oc(a,e)}:/\s/.test(f)?function(a){return/\s/.test(a)}:function(a){return!/\s/.test(a)&&
!oc(a)};0<c&&f(b.charAt(c-1));)--c;for(;d<b.length&&f(b.charAt(d));)++d}return new z(r(a.line,c),r(a.line,d))},toggleOverwrite:function(a){if(null==a||a!=this.state.overwrite)(this.state.overwrite=!this.state.overwrite)?mb(this.display.cursorDiv,"CodeMirror-overwrite"):kb(this.display.cursorDiv,"CodeMirror-overwrite"),K(this,"overwriteToggle",this,this.state.overwrite)},hasFocus:function(){return this.display.input.getField()==fa()},scrollTo:D(function(a,b){null==a&&null==b||mc(this);null!=a&&(this.curOp.scrollLeft=
a);null!=b&&(this.curOp.scrollTop=b)}),getScrollInfo:function(){var a=this.display.scroller;return{left:a.scrollLeft,top:a.scrollTop,height:a.scrollHeight-da(this)-this.display.barHeight,width:a.scrollWidth-da(this)-this.display.barWidth,clientHeight:Nc(this),clientWidth:pa(this)}},scrollIntoView:D(function(a,b){null==a?(a={from:this.doc.sel.primary().head,to:null},null==b&&(b=this.options.cursorScrollMargin)):"number"==typeof a?a={from:r(a,0),to:null}:null==a.from&&(a={from:a,to:null});a.to||(a.to=
a.from);a.margin=b||0;if(null!=a.from.line)mc(this),this.curOp.scrollToPos=a;else{var c=cc(this,Math.min(a.from.left,a.to.left),Math.min(a.from.top,a.to.top)-a.margin,Math.max(a.from.right,a.to.right),Math.max(a.from.bottom,a.to.bottom)+a.margin);this.scrollTo(c.scrollLeft,c.scrollTop)}}),setSize:D(function(a,b){function c(a){return"number"==typeof a||/^\d+$/.test(String(a))?a+"px":a}var d=this;null!=a&&(d.display.wrapper.style.width=c(a));null!=b&&(d.display.wrapper.style.height=c(b));d.options.lineWrapping&&
ne(this);var e=d.display.viewFrom;d.doc.iter(e,d.display.viewTo,function(a){if(a.widgets)for(var b=0;b<a.widgets.length;b++)if(a.widgets[b].noHScroll){na(d,e,"widget");break}++e});d.curOp.forceUpdate=!0;K(d,"refresh",this)}),operation:function(a){return T(this,a)},refresh:D(function(){var a=this.display.cachedTextHeight;Q(this);this.curOp.forceUpdate=!0;hb(this);this.scrollTo(this.doc.scrollLeft,this.doc.scrollTop);Cc(this);(null==a||.5<Math.abs(a-wa(this.display)))&&Ac(this);K(this,"refresh",this)}),
swapDoc:D(function(a){var b=this.doc;b.cm=null;Ed(this,a);hb(this);this.display.input.reset();this.scrollTo(a.scrollLeft,a.scrollTop);this.curOp.forceScroll=!0;M(this,"swapDoc",this,b);return b}),getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}};Ya(q);var rf=q.defaults={},Ka=q.optionHandlers={},Fd=q.Init={toString:function(){return"CodeMirror.Init"}};
w("value","",function(a,b){a.setValue(b)},!0);w("mode",null,function(a,b){a.doc.modeOption=b;zc(a)},!0);w("indentUnit",2,zc,!0);w("indentWithTabs",!1);w("smartIndent",!0);w("tabSize",4,function(a){eb(a);hb(a);Q(a)},!0);w("specialChars",/[\t\u0000-\u0019\u00ad\u200b-\u200f\u2028\u2029\ufeff]/g,function(a,b,c){a.state.specialChars=new RegExp(b.source+(b.test("\t")?"":"|\t"),"g");c!=q.Init&&a.refresh()});w("specialCharPlaceholder",function(a){var b=t("span","\u2022","cm-invalidchar");b.title="\\u"+a.charCodeAt(0).toString(16);
b.setAttribute("aria-label",b.title);return b},function(a){a.refresh()},!0);w("electricChars",!0);w("inputStyle",ab?"contenteditable":"textarea",function(){throw Error("inputStyle can not (yet) be changed in a running editor");},!0);w("rtlMoveVisually",!ng);w("wholeLineUpdateBefore",!0);w("theme","default",function(a){Bd(a);ib(a)},!0);w("keyMap","default",function(a,b,c){b=pc(b);(c=c!=q.Init&&pc(c))&&c.detach&&c.detach(a,b);b.attach&&b.attach(a,c||null)});w("extraKeys",null);w("lineWrapping",!1,function(a){a.options.lineWrapping?
(mb(a.display.wrapper,"CodeMirror-wrap"),a.display.sizer.style.minWidth="",a.display.sizerWidth=null):(kb(a.display.wrapper,"CodeMirror-wrap"),Dc(a));Ac(a);Q(a);hb(a);setTimeout(function(){Na(a)},100)},!0);w("gutters",[],function(a){wc(a.options);ib(a)},!0);w("fixedGutter",!0,function(a,b){a.display.gutters.style.left=b?Ic(a.display)+"px":"0";a.refresh()},!0);w("coverGutterNextToScrollbar",!1,function(a){Na(a)},!0);w("scrollbarStyle","native",function(a){Cd(a);Na(a);a.display.scrollbars.setScrollTop(a.doc.scrollTop);
a.display.scrollbars.setScrollLeft(a.doc.scrollLeft)},!0);w("lineNumbers",!1,function(a){wc(a.options);ib(a)},!0);w("firstLineNumber",1,ib,!0);w("lineNumberFormatter",function(a){return a},ib,!0);w("showCursorWhenSelecting",!1,nb,!0);w("resetSelectionOnContextMenu",!0);w("lineWiseCopyCut",!0);w("readOnly",!1,function(a,b){"nocursor"==b?(db(a),a.display.input.blur(),a.display.disabled=!0):(a.display.disabled=!1,b||a.display.input.reset())});w("disableInput",!1,function(a,b){b||a.display.input.reset()},
!0);w("dragDrop",!0,function(a,b,c){!b!=!(c&&c!=q.Init)&&(c=a.display.dragFunctions,b=b?v:ka,b(a.display.scroller,"dragstart",c.start),b(a.display.scroller,"dragenter",c.simple),b(a.display.scroller,"dragover",c.simple),b(a.display.scroller,"drop",c.drop))});w("cursorBlinkRate",530);w("cursorScrollMargin",0);w("cursorHeight",1,nb,!0);w("singleCursorHeightPerLine",!0,nb,!0);w("workTime",100);w("workDelay",100);w("flattenSpans",!0,eb,!0);w("addModeClass",!1,eb,!0);w("pollInterval",100);w("undoDepth",
200,function(a,b){a.doc.history.undoDepth=b});w("historyEventDelay",1250);w("viewportMargin",10,function(a){a.refresh()},!0);w("maxHighlightLength",1E4,eb,!0);w("moveInputWithCursor",!0,function(a,b){b||a.display.input.resetPosition()});w("tabindex",null,function(a,b){a.display.input.getField().tabIndex=b||""});w("autofocus",null);var qf=q.modes={},Hb=q.mimeModes={};q.defineMode=function(a,b){q.defaults.mode||"null"==a||(q.defaults.mode=a);2<arguments.length&&(b.dependencies=Array.prototype.slice.call(arguments,
2));qf[a]=b};q.defineMIME=function(a,b){Hb[a]=b};q.resolveMode=function(a){if("string"==typeof a&&Hb.hasOwnProperty(a))a=Hb[a];else if(a&&"string"==typeof a.name&&Hb.hasOwnProperty(a.name)){var b=Hb[a.name];"string"==typeof b&&(b={name:b});a=gf(b,a);a.name=b.name}else if("string"==typeof a&&/^[\w\-]+\/[\w\-]+\+xml$/.test(a))return q.resolveMode("application/xml");return"string"==typeof a?{name:a}:a||{name:"null"}};q.getMode=function(a,b){b=q.resolveMode(b);var c=qf[b.name];if(!c)return q.getMode(a,
"text/plain");c=c(a,b);if(Ib.hasOwnProperty(b.name)){var d=Ib[b.name],e;for(e in d)d.hasOwnProperty(e)&&(c.hasOwnProperty(e)&&(c["_"+e]=c[e]),c[e]=d[e])}c.name=b.name;b.helperType&&(c.helperType=b.helperType);if(b.modeProps)for(e in b.modeProps)c[e]=b.modeProps[e];return c};q.defineMode("null",function(){return{token:function(a){a.skipToEnd()}}});q.defineMIME("text/plain","null");var Ib=q.modeExtensions={};q.extendMode=function(a,b){var c=Ib.hasOwnProperty(a)?Ib[a]:Ib[a]={};V(b,c)};q.defineExtension=
function(a,b){q.prototype[a]=b};q.defineDocExtension=function(a,b){P.prototype[a]=b};q.defineOption=w;var yc=[];q.defineInitHook=function(a){yc.push(a)};var $a=q.helpers={};q.registerHelper=function(a,b,c){$a.hasOwnProperty(a)||($a[a]=q[a]={_global:[]});$a[a][b]=c};q.registerGlobalHelper=function(a,b,c,d){q.registerHelper(a,b,d);$a[a]._global.push({pred:c,val:d})};var Sa=q.copyState=function(a,b){if(!0===b)return b;if(a.copyState)return a.copyState(b);var c={},d;for(d in b){var e=b[d];e instanceof
Array&&(e=e.concat([]));c[d]=e}return c},Ef=q.startState=function(a,b,c){return a.startState?a.startState(b,c):!0};q.innerMode=function(a,b){for(;a.innerMode;){var c=a.innerMode(b);if(!c||c.mode==a)break;b=c.state;a=c.mode}return c||{mode:a,state:b}};var ic=q.commands={selectAll:function(a){a.setSelection(r(a.firstLine(),0),r(a.lastLine()),ha)},singleSelection:function(a){a.setSelection(a.getCursor("anchor"),a.getCursor("head"),ha)},killLine:function(a){Va(a,function(b){if(b.empty()){var c=u(a.doc,
b.head.line).text.length;return b.head.ch==c&&b.head.line<a.lastLine()?{from:b.head,to:r(b.head.line+1,0)}:{from:b.head,to:r(b.head.line,c)}}return{from:b.from(),to:b.to()}})},deleteLine:function(a){Va(a,function(b){return{from:r(b.from().line,0),to:x(a.doc,r(b.to().line+1,0))}})},delLineLeft:function(a){Va(a,function(a){return{from:r(a.from().line,0),to:a.from()}})},delWrappedLineLeft:function(a){Va(a,function(b){var c=a.charCoords(b.head,"div").top+5;return{from:a.coordsChar({left:0,top:c},"div"),
to:b.from()}})},delWrappedLineRight:function(a){Va(a,function(b){var c=a.charCoords(b.head,"div").top+5,c=a.coordsChar({left:a.display.lineDiv.offsetWidth+100,top:c},"div");return{from:b.from(),to:c}})},undo:function(a){a.undo()},redo:function(a){a.redo()},undoSelection:function(a){a.undoSelection()},redoSelection:function(a){a.redoSelection()},goDocStart:function(a){a.extendSelection(r(a.firstLine(),0))},goDocEnd:function(a){a.extendSelection(r(a.lastLine()))},goLineStart:function(a){a.extendSelectionsBy(function(b){return lf(a,
b.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(a){a.extendSelectionsBy(function(b){return mf(a,b.head)},{origin:"+move",bias:1})},goLineEnd:function(a){a.extendSelectionsBy(function(b){b=b.head.line;for(var c,d=u(a.doc,b);c=za(d,!1);)d=c.find(1,!0).line,b=null;c=(c=Y(d))?c[0].level%2?ac(d):bc(d):d.text.length;return r(null==b?E(d):b,c)},{origin:"+move",bias:-1})},goLineRight:function(a){a.extendSelectionsBy(function(b){b=a.charCoords(b.head,"div").top+5;return a.coordsChar({left:a.display.lineDiv.offsetWidth+
100,top:b},"div")},Gb)},goLineLeft:function(a){a.extendSelectionsBy(function(b){b=a.charCoords(b.head,"div").top+5;return a.coordsChar({left:0,top:b},"div")},Gb)},goLineLeftSmart:function(a){a.extendSelectionsBy(function(b){var c=a.charCoords(b.head,"div").top+5,c=a.coordsChar({left:0,top:c},"div");return c.ch<a.getLine(c.line).search(/\S/)?mf(a,b.head):c},Gb)},goLineUp:function(a){a.moveV(-1,"line")},goLineDown:function(a){a.moveV(1,"line")},goPageUp:function(a){a.moveV(-1,"page")},goPageDown:function(a){a.moveV(1,
"page")},goCharLeft:function(a){a.moveH(-1,"char")},goCharRight:function(a){a.moveH(1,"char")},goColumnLeft:function(a){a.moveH(-1,"column")},goColumnRight:function(a){a.moveH(1,"column")},goWordLeft:function(a){a.moveH(-1,"word")},goGroupRight:function(a){a.moveH(1,"group")},goGroupLeft:function(a){a.moveH(-1,"group")},goWordRight:function(a){a.moveH(1,"word")},delCharBefore:function(a){a.deleteH(-1,"char")},delCharAfter:function(a){a.deleteH(1,"char")},delWordBefore:function(a){a.deleteH(-1,"word")},
delWordAfter:function(a){a.deleteH(1,"word")},delGroupBefore:function(a){a.deleteH(-1,"group")},delGroupAfter:function(a){a.deleteH(1,"group")},indentAuto:function(a){a.indentSelection("smart")},indentMore:function(a){a.indentSelection("add")},indentLess:function(a){a.indentSelection("subtract")},insertTab:function(a){a.replaceSelection("\t")},insertSoftTab:function(a){for(var b=[],c=a.listSelections(),d=a.options.tabSize,e=0;e<c.length;e++){var f=c[e].from(),f=aa(a.getLine(f.line),f.ch,d);b.push(Array(d-
f%d+1).join(" "))}a.replaceSelections(b)},defaultTab:function(a){a.somethingSelected()?a.indentSelection("add"):a.execCommand("insertTab")},transposeChars:function(a){T(a,function(){for(var b=a.listSelections(),c=[],d=0;d<b.length;d++){var e=b[d].head,f=u(a.doc,e.line).text;if(f)if(e.ch==f.length&&(e=new r(e.line,e.ch-1)),0<e.ch)e=new r(e.line,e.ch+1),a.replaceRange(f.charAt(e.ch-1)+f.charAt(e.ch-2),r(e.line,e.ch-2),e,"+transpose");else if(e.line>a.doc.first){var g=u(a.doc,e.line-1).text;g&&a.replaceRange(f.charAt(0)+
"\n"+g.charAt(g.length-1),r(e.line-1,g.length-1),r(e.line,1),"+transpose")}c.push(new z(e,e))}a.setSelections(c)})},newlineAndIndent:function(a){T(a,function(){for(var b=a.listSelections().length,c=0;c<b;c++){var d=a.listSelections()[c];a.replaceRange("\n",d.anchor,d.head,"+input");a.indentLine(d.from().line+1,null,!0);Pa(a)}})},toggleOverwrite:function(a){a.toggleOverwrite()}},ta=q.keyMap={};ta.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",
PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"};ta.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart",
"Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"};ta.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft",
"Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars"};ta.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft",
"Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]};ta["default"]=
W?ta.macDefault:ta.pcDefault;q.normalizeKeyMap=function(a){var b={},c;for(c in a)if(a.hasOwnProperty(c)){var d=a[c];if(!/^(name|fallthrough|(de|at)tach)$/.test(c)){if("..."!=d)for(var e=ob(c.split(" "),Xf),f=0;f<e.length;f++){var g,h;f==e.length-1?(h=e.join(" "),g=d):(h=e.slice(0,f+1).join(" "),g="...");var k=b[h];if(!k)b[h]=g;else if(k!=g)throw Error("Inconsistent bindings for "+h);}delete a[c]}}for(var l in b)a[l]=b[l];return a};var xb=q.lookupKey=function(a,b,c,d){b=pc(b);var e=b.call?b.call(a,
d):b[a];if(!1===e)return"nothing";if("..."===e)return"multi";if(null!=e&&c(e))return"handled";if(b.fallthrough){if("[object Array]"!=Object.prototype.toString.call(b.fallthrough))return xb(a,b.fallthrough,c,d);for(e=0;e<b.fallthrough.length;e++){var f=xb(a,b.fallthrough[e],c,d);if(f)return f}}},Qf=q.isModifierKey=function(a){a="string"==typeof a?a:ua[a.keyCode];return"Ctrl"==a||"Alt"==a||"Shift"==a||"Mod"==a},Sf=q.keyName=function(a,b){if(ba&&34==a.keyCode&&a["char"])return!1;var c=ua[a.keyCode],
d=c;if(null==d||a.altGraphKey)return!1;a.altKey&&"Alt"!=c&&(d="Alt-"+d);(pf?a.metaKey:a.ctrlKey)&&"Ctrl"!=c&&(d="Ctrl-"+d);(pf?a.ctrlKey:a.metaKey)&&"Cmd"!=c&&(d="Cmd-"+d);!b&&a.shiftKey&&"Shift"!=c&&(d="Shift-"+d);return d};q.fromTextArea=function(a,b){function c(){a.value=k.getValue()}b=b?V(b):{};b.value=a.value;!b.tabindex&&a.tabIndex&&(b.tabindex=a.tabIndex);!b.placeholder&&a.placeholder&&(b.placeholder=a.placeholder);if(null==b.autofocus){var d=fa();b.autofocus=d==a||null!=a.getAttribute("autofocus")&&
d==document.body}if(a.form&&(v(a.form,"submit",c),!b.leaveSubmitMethodAlone)){var e=a.form,f=e.submit;try{var g=e.submit=function(){c();e.submit=f;e.submit();e.submit=g}}catch(h){}}b.finishInit=function(b){b.save=c;b.getTextArea=function(){return a};b.toTextArea=function(){b.toTextArea=isNaN;c();a.parentNode.removeChild(b.getWrapperElement());a.style.display="";a.form&&(ka(a.form,"submit",c),"function"==typeof a.form.submit&&(a.form.submit=f))}};a.style.display="none";var k=q(function(b){a.parentNode.insertBefore(b,
a.nextSibling)},b);return k};var tc=q.StringStream=function(a,b){this.pos=this.start=0;this.string=a;this.tabSize=b||8;this.lineStart=this.lastColumnPos=this.lastColumnValue=0};tc.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==this.lineStart},peek:function(){return this.string.charAt(this.pos)||void 0},next:function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},eat:function(a){var b=this.string.charAt(this.pos);if("string"==
typeof a?b==a:b&&(a.test?a.test(b):a(b)))return++this.pos,b},eatWhile:function(a){for(var b=this.pos;this.eat(a););return this.pos>b},eatSpace:function(){for(var a=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>a},skipToEnd:function(){this.pos=this.string.length},skipTo:function(a){a=this.string.indexOf(a,this.pos);if(-1<a)return this.pos=a,!0},backUp:function(a){this.pos-=a},column:function(){this.lastColumnPos<this.start&&(this.lastColumnValue=aa(this.string,
this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start);return this.lastColumnValue-(this.lineStart?aa(this.string,this.lineStart,this.tabSize):0)},indentation:function(){return aa(this.string,null,this.tabSize)-(this.lineStart?aa(this.string,this.lineStart,this.tabSize):0)},match:function(a,b,c){if("string"==typeof a){var d=function(a){return c?a.toLowerCase():a},e=this.string.substr(this.pos,a.length);if(d(e)==d(a))return!1!==b&&(this.pos+=a.length),!0}else{if((a=
this.string.slice(this.pos).match(a))&&0<a.index)return null;a&&!1!==b&&(this.pos+=a[0].length);return a}},current:function(){return this.string.slice(this.start,this.pos)},hideFirstChars:function(a,b){this.lineStart+=a;try{return b()}finally{this.lineStart-=a}}};var sd=0,Ha=q.TextMarker=function(a,b){this.lines=[];this.type=b;this.doc=a;this.id=++sd};Ya(Ha);Ha.prototype.clear=function(){if(!this.explicitlyCleared){var a=this.doc.cm,b=a&&!a.curOp;b&&Ja(a);if(S(this,"clear")){var c=this.find();c&&
M(this,"clear",c.from,c.to)}for(var d=c=null,e=0;e<this.lines.length;++e){var f=this.lines[e],g=zb(f.markedSpans,this);a&&!this.collapsed?na(a,E(f),"text"):a&&(null!=g.to&&(d=E(f)),null!=g.from&&(c=E(f)));for(var h=f,k=f.markedSpans,l=g,m=void 0,p=0;p<k.length;++p)k[p]!=l&&(m||(m=[])).push(k[p]);h.markedSpans=m;null==g.from&&this.collapsed&&!xa(this.doc,f)&&a&&ca(f,wa(a.display))}if(a&&this.collapsed&&!a.options.lineWrapping)for(e=0;e<this.lines.length;++e)f=ia(this.lines[e]),g=Kb(f),g>a.display.maxLineLength&&
(a.display.maxLine=f,a.display.maxLineLength=g,a.display.maxLineChanged=!0);null!=c&&a&&this.collapsed&&Q(a,c,d+1);this.lines.length=0;this.explicitlyCleared=!0;this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,a&&he(a.doc));a&&M(a,"markerCleared",a,this);b&&La(a);this.parent&&this.parent.clear()}};Ha.prototype.find=function(a,b){null==a&&"bookmark"==this.type&&(a=1);for(var c,d,e=0;e<this.lines.length;++e){var f=this.lines[e],g=zb(f.markedSpans,this);if(null!=g.from&&(c=r(b?f:E(f),g.from),-1==
a))return c;if(null!=g.to&&(d=r(b?f:E(f),g.to),1==a))return d}return c&&{from:c,to:d}};Ha.prototype.changed=function(){var a=this.find(-1,!0),b=this,c=this.doc.cm;a&&c&&T(c,function(){var d=a.line,e=E(a.line);if(e=Vc(c,e))me(e),c.curOp.selectionChanged=c.curOp.forceUpdate=!0;c.curOp.updateMaxLine=!0;xa(b.doc,d)||null==b.height||(e=b.height,b.height=null,(e=ub(b)-e)&&ca(d,d.height+e))})};Ha.prototype.attachLine=function(a){if(!this.lines.length&&this.doc.cm){var b=this.doc.cm.curOp;b.maybeHiddenMarkers&&
-1!=L(b.maybeHiddenMarkers,this)||(b.maybeUnhiddenMarkers||(b.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(a)};Ha.prototype.detachLine=function(a){this.lines.splice(L(this.lines,a),1);!this.lines.length&&this.doc.cm&&(a=this.doc.cm.curOp,(a.maybeHiddenMarkers||(a.maybeHiddenMarkers=[])).push(this))};var sd=0,rc=q.SharedTextMarker=function(a,b){this.markers=a;this.primary=b;for(var c=0;c<a.length;++c)a[c].parent=this};Ya(rc);rc.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=
!0;for(var a=0;a<this.markers.length;++a)this.markers[a].clear();M(this,"clear")}};rc.prototype.find=function(a,b){return this.primary.find(a,b)};var sc=q.LineWidget=function(a,b,c){if(c)for(var d in c)c.hasOwnProperty(d)&&(this[d]=c[d]);this.doc=a;this.node=b};Ya(sc);sc.prototype.clear=function(){var a=this.doc.cm,b=this.line.widgets,c=this.line,d=E(c);if(null!=d&&b){for(var e=0;e<b.length;++e)b[e]==this&&b.splice(e--,1);b.length||(c.widgets=null);var f=ub(this);ca(c,Math.max(0,c.height-f));a&&T(a,
function(){var b=-f;ea(c)<(a.curOp&&a.curOp.scrollTop||a.doc.scrollTop)&&lc(a,null,b);na(a,d,"widget")})}};sc.prototype.changed=function(){var a=this.height,b=this.doc.cm,c=this.line;this.height=null;var d=ub(this)-a;d&&(ca(c,c.height+d),b&&T(b,function(){b.curOp.forceUpdate=!0;ea(c)<(b.curOp&&b.curOp.scrollTop||b.doc.scrollTop)&&lc(b,null,d)}))};var Ab=q.Line=function(a,b,c){this.text=a;Ve(this,b);this.height=c?c(this):1};Ya(Ab);Ab.prototype.lineNo=function(){return E(this)};var cg={},bg={};Bb.prototype=
{chunkSize:function(){return this.lines.length},removeInner:function(a,b){for(var c=a,d=a+b;c<d;++c){var e=this.lines[c];this.height-=e.height;var f=e;f.parent=null;Ue(f);M(e,"delete")}this.lines.splice(a,b)},collapse:function(a){a.push.apply(a,this.lines)},insertInner:function(a,b,c){this.height+=c;this.lines=this.lines.slice(0,a).concat(b).concat(this.lines.slice(a));for(a=0;a<b.length;++a)b[a].parent=this},iterN:function(a,b,c){for(b=a+b;a<b;++a)if(c(this.lines[a]))return!0}};Cb.prototype={chunkSize:function(){return this.size},
removeInner:function(a,b){this.size-=b;for(var c=0;c<this.children.length;++c){var d=this.children[c],e=d.chunkSize();if(a<e){var f=Math.min(b,e-a),g=d.height;d.removeInner(a,f);this.height-=g-d.height;e==f&&(this.children.splice(c--,1),d.parent=null);if(0==(b-=f))break;a=0}else a-=e}25>this.size-b&&(1<this.children.length||!(this.children[0]instanceof Bb))&&(c=[],this.collapse(c),this.children=[new Bb(c)],this.children[0].parent=this)},collapse:function(a){for(var b=0;b<this.children.length;++b)this.children[b].collapse(a)},
insertInner:function(a,b,c){this.size+=b.length;this.height+=c;for(var d=0;d<this.children.length;++d){var e=this.children[d],f=e.chunkSize();if(a<=f){e.insertInner(a,b,c);if(e.lines&&50<e.lines.length){for(;50<e.lines.length;)a=e.lines.splice(e.lines.length-25,25),a=new Bb(a),e.height-=a.height,this.children.splice(d+1,0,a),a.parent=this;this.maybeSpill()}break}a-=f}},maybeSpill:function(){if(!(10>=this.children.length)){var a=this;do{var b=a.children.splice(a.children.length-5,5),b=new Cb(b);if(a.parent){a.size-=
b.size;a.height-=b.height;var c=L(a.parent.children,a);a.parent.children.splice(c+1,0,b)}else c=new Cb(a.children),c.parent=a,a.children=[c,b],a=c;b.parent=a.parent}while(10<a.children.length);a.parent.maybeSpill()}},iterN:function(a,b,c){for(var d=0;d<this.children.length;++d){var e=this.children[d],f=e.chunkSize();if(a<f){f=Math.min(b,f-a);if(e.iterN(a,f,c))return!0;if(0==(b-=f))break;a=0}else a-=f}}};var pg=0,P=q.Doc=function(a,b,c){if(!(this instanceof P))return new P(a,b,c);null==c&&(c=0);Cb.call(this,
[new Bb([new Ab("",null)])]);this.first=c;this.scrollTop=this.scrollLeft=0;this.cantEdit=!1;this.cleanGeneration=1;this.frontier=c;c=r(c,0);this.sel=ga(c);this.history=new uc(null);this.id=++pg;this.modeOption=b;"string"==typeof a&&(a=sa(a));qd(this,{from:c,to:c,text:a});G(this,ga(c),ha)};P.prototype=gf(Cb.prototype,{constructor:P,iter:function(a,b,c){c?this.iterN(a-this.first,b-a,c):this.iterN(this.first,this.first+this.size,a)},insert:function(a,b){for(var c=0,d=0;d<b.length;++d)c+=b[d].height;
this.insertInner(a-this.first,b,c)},remove:function(a,b){this.removeInner(a-this.first,b)},getValue:function(a){var b=xd(this,this.first,this.first+this.size);return!1===a?b:b.join(a||"\n")},setValue:N(function(a){var b=r(this.first,0),c=this.first+this.size-1;Oa(this,{from:b,to:r(c,u(this,c).text.length),text:sa(a),origin:"setValue",full:!0},!0);G(this,ga(b))}),replaceRange:function(a,b,c,d){b=x(this,b);c=c?x(this,c):b;wb(this,a,b,c,d)},getRange:function(a,b,c){a=Ca(this,x(this,a),x(this,b));return!1===
c?a:a.join(c||"\n")},getLine:function(a){return(a=this.getLineHandle(a))&&a.text},getLineHandle:function(a){if(qb(this,a))return u(this,a)},getLineNumber:function(a){return E(a)},getLineHandleVisualStart:function(a){"number"==typeof a&&(a=u(this,a));return ia(a)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(a){return x(this,a)},getCursor:function(a){var b=this.sel.primary();return null==a||"head"==
a?b.head:"anchor"==a?b.anchor:"end"==a||"to"==a||!1===a?b.to():b.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:N(function(a,b,c){a=x(this,"number"==typeof a?r(a,b||0):a);G(this,ga(a,null),c)}),setSelection:N(function(a,b,c){var d=x(this,a);a=x(this,b||a);G(this,ga(d,a),c)}),extendSelection:N(function(a,b,c){Ub(this,x(this,a),b&&x(this,b),c)}),extendSelections:N(function(a,b){for(var c=[],d=0;d<a.length;d++)c[d]=
x(this,a[d]);be(this,c)}),extendSelectionsBy:N(function(a,b){be(this,ob(this.sel.ranges,a),b)}),setSelections:N(function(a,b,c){if(a.length){for(var d=0,e=[];d<a.length;d++)e[d]=new z(x(this,a[d].anchor),x(this,a[d].head));null==b&&(b=Math.min(a.length-1,this.sel.primIndex));G(this,Z(e,b),c)}}),addSelection:N(function(a,b,c){var d=this.sel.ranges.slice(0);d.push(new z(x(this,a),x(this,b||a)));G(this,Z(d,d.length-1),c)}),getSelection:function(a){for(var b=this.sel.ranges,c,d=0;d<b.length;d++){var e=
Ca(this,b[d].from(),b[d].to());c=c?c.concat(e):e}return!1===a?c:c.join(a||"\n")},getSelections:function(a){for(var b=[],c=this.sel.ranges,d=0;d<c.length;d++){var e=Ca(this,c[d].from(),c[d].to());!1!==a&&(e=e.join(a||"\n"));b[d]=e}return b},replaceSelection:function(a,b,c){for(var d=[],e=0;e<this.sel.ranges.length;e++)d[e]=a;this.replaceSelections(d,b,c||"+input")},replaceSelections:N(function(a,b,c){for(var d=[],e=this.sel,f=0;f<e.ranges.length;f++){var g=e.ranges[f];d[f]={from:g.from(),to:g.to(),
text:sa(a[f]),origin:c}}if(f=b&&"end"!=b){f=[];c=a=r(this.first,0);for(e=0;e<d.length;e++){var h=d[e],g=Fe(h.from,a,c),k=Fe(Fa(h),a,c);a=h.to;c=k;"around"==b?(h=this.sel.ranges[e],h=0>y(h.head,h.anchor),f[e]=new z(h?k:g,h?g:k)):f[e]=new z(g,g)}f=new la(f,this.sel.primIndex)}b=f;for(f=d.length-1;0<=f;f--)Oa(this,d[f]);b?ce(this,b):this.cm&&Pa(this.cm)}),undo:N(function(){kc(this,"undo")}),redo:N(function(){kc(this,"redo")}),undoSelection:N(function(){kc(this,"undo",!0)}),redoSelection:N(function(){kc(this,
"redo",!0)}),setExtending:function(a){this.extend=a},getExtending:function(){return this.extend},historySize:function(){for(var a=this.history,b=0,c=0,d=0;d<a.done.length;d++)a.done[d].ranges||++b;for(d=0;d<a.undone.length;d++)a.undone[d].ranges||++c;return{undo:b,redo:c}},clearHistory:function(){this.history=new uc(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(a){a&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=
null);return this.history.generation},isClean:function(a){return this.history.generation==(a||this.cleanGeneration)},getHistory:function(){return{done:Xa(this.history.done),undone:Xa(this.history.undone)}},setHistory:function(a){var b=this.history=new uc(this.history.maxGeneration);b.done=Xa(a.done.slice(0),null,!0);b.undone=Xa(a.undone.slice(0),null,!0)},addLineClass:N(function(a,b,c){return nc(this,a,"gutter"==b?"gutter":"class",function(a){var e="text"==b?"textClass":"background"==b?"bgClass":
"gutter"==b?"gutterClass":"wrapClass";if(a[e]){if(Fb(c).test(a[e]))return!1;a[e]+=" "+c}else a[e]=c;return!0})}),removeLineClass:N(function(a,b,c){return nc(this,a,"gutter"==b?"gutter":"class",function(a){var e="text"==b?"textClass":"background"==b?"bgClass":"gutter"==b?"gutterClass":"wrapClass",f=a[e];if(f)if(null==c)a[e]=null;else{var g=f.match(Fb(c));if(!g)return!1;var h=g.index+g[0].length;a[e]=f.slice(0,g.index)+(g.index&&h!=f.length?" ":"")+f.slice(h)||null}else return!1;return!0})}),addLineWidget:N(function(a,
b,c){return ag(this,a,b,c)}),removeLineWidget:function(a){a.clear()},markText:function(a,b,c){return Wa(this,x(this,a),x(this,b),c,"range")},setBookmark:function(a,b){var c={replacedWith:b&&(null==b.nodeType?b.widget:b),insertLeft:b&&b.insertLeft,clearWhenEmpty:!1,shared:b&&b.shared,handleMouseEvents:b&&b.handleMouseEvents};a=x(this,a);return Wa(this,a,a,c,"bookmark")},findMarksAt:function(a){a=x(this,a);var b=[],c=u(this,a.line).markedSpans;if(c)for(var d=0;d<c.length;++d){var e=c[d];(null==e.from||
e.from<=a.ch)&&(null==e.to||e.to>=a.ch)&&b.push(e.marker.parent||e.marker)}return b},findMarks:function(a,b,c){a=x(this,a);b=x(this,b);var d=[],e=a.line;this.iter(a.line,b.line+1,function(f){if(f=f.markedSpans)for(var g=0;g<f.length;g++){var h=f[g];e==a.line&&a.ch>h.to||null==h.from&&e!=a.line||e==b.line&&h.from>b.ch||c&&!c(h.marker)||d.push(h.marker.parent||h.marker)}++e});return d},getAllMarks:function(){var a=[];this.iter(function(b){if(b=b.markedSpans)for(var c=0;c<b.length;++c)null!=b[c].from&&
a.push(b[c].marker)});return a},posFromIndex:function(a){var b,c=this.first;this.iter(function(d){d=d.text.length+1;if(d>a)return b=a,!0;a-=d;++c});return x(this,r(c,b))},indexFromPos:function(a){a=x(this,a);var b=a.ch;if(a.line<this.first||0>a.ch)return 0;this.iter(this.first,a.line,function(a){b+=a.text.length+1});return b},copy:function(a){var b=new P(xd(this,this.first,this.first+this.size),this.modeOption,this.first);b.scrollTop=this.scrollTop;b.scrollLeft=this.scrollLeft;b.sel=this.sel;b.extend=
!1;a&&(b.history.undoDepth=this.history.undoDepth,b.setHistory(this.getHistory()));return b},linkedDoc:function(a){a||(a={});var b=this.first,c=this.first+this.size;null!=a.from&&a.from>b&&(b=a.from);null!=a.to&&a.to<c&&(c=a.to);b=new P(xd(this,b,c),a.mode||this.modeOption,b);a.sharedHist&&(b.history=this.history);(this.linked||(this.linked=[])).push({doc:b,sharedHist:a.sharedHist});b.linked=[{doc:this,isParent:!0,sharedHist:a.sharedHist}];a=Se(this);for(c=0;c<a.length;c++){var d=a[c],e=d.find(),
f=b.clipPos(e.from),e=b.clipPos(e.to);y(f,e)&&(f=Wa(b,f,e,d.primary,d.primary.type),d.markers.push(f),f.parent=d)}return b},unlinkDoc:function(a){a instanceof q&&(a=a.doc);if(this.linked)for(var b=0;b<this.linked.length;++b)if(this.linked[b].doc==a){this.linked.splice(b,1);a.unlinkDoc(this);Zf(Se(this));break}if(a.history==this.history){var c=[a.id];Ga(a,function(a){c.push(a.id)},!0);a.history=new uc(null);a.history.done=Xa(this.history.done,c);a.history.undone=Xa(this.history.undone,c)}},iterLinkedDocs:function(a){Ga(this,
a)},getMode:function(){return this.mode},getEditor:function(){return this.cm}});P.prototype.eachLine=P.prototype.iter;var qg=["iter","insert","remove","copy","getEditor"],Jb;for(Jb in P.prototype)P.prototype.hasOwnProperty(Jb)&&0>L(qg,Jb)&&(q.prototype[Jb]=function(a){return function(){return a.apply(this.doc,arguments)}}(P.prototype[Jb]));Ya(P);var O=q.e_preventDefault=function(a){a.preventDefault?a.preventDefault():a.returnValue=!1},rg=q.e_stopPropagation=function(a){a.stopPropagation?a.stopPropagation():
a.cancelBubble=!0},jd=q.e_stop=function(a){O(a);rg(a)},v=q.on=function(a,b,c){a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent?a.attachEvent("on"+b,c):(a=a._handlers||(a._handlers={}),(a[b]||(a[b]=[])).push(c))},ka=q.off=function(a,b,c){if(a.removeEventListener)a.removeEventListener(b,c,!1);else if(a.detachEvent)a.detachEvent("on"+b,c);else if(a=a._handlers&&a._handlers[b])for(b=0;b<a.length;++b)if(a[b]==c){a.splice(b,1);break}},K=q.signal=function(a,b){var c=a._handlers&&a._handlers[b];
if(c)for(var d=Array.prototype.slice.call(arguments,2),e=0;e<c.length;++e)c[e].apply(null,d)},Db=null,Hd=30,Be=q.Pass={toString:function(){return"CodeMirror.Pass"}},ha={scroll:!1},kd={origin:"*mouse"},Gb={origin:"+move"};bb.prototype.set=function(a,b){clearTimeout(this.id);this.id=setTimeout(b,a)};var aa=q.countColumn=function(a,b,c,d,e){null==b&&(b=a.search(/[^\s\u00a0]/),-1==b&&(b=a.length));d=d||0;for(e=e||0;;){var f=a.indexOf("\t",d);if(0>f||f>=b)return e+(b-d);e+=f-d;e+=c-e%c;d=f+1}},vc=[""],
Za=function(a){a.select()};Qa?Za=function(a){a.selectionStart=0;a.selectionEnd=a.value.length}:B&&(Za=function(a){try{a.select()}catch(b){}});var sg=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,hf=q.isWordChar=function(a){return/\w/.test(a)||"\u0080"<a&&(a.toUpperCase()!=a.toLowerCase()||sg.test(a))},jg=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/,
Da;Da=document.createRange?function(a,b,c,d){var e=document.createRange();e.setEnd(d||a,c);e.setStart(a,b);return e}:function(a,b,c){var d=document.body.createTextRange();try{d.moveToElementText(a.parentNode)}catch(e){return d}d.collapse(!0);d.moveEnd("character",c);d.moveStart("character",b);return d};var Wc=q.contains=function(a,b){3==b.nodeType&&(b=b.parentNode);if(a.contains)return a.contains(b);do if(11==b.nodeType&&(b=b.host),b==a)return!0;while(b=b.parentNode)};B&&11>C&&(fa=function(){try{return document.activeElement}catch(a){return document.body}});
var kb=q.rmClass=function(a,b){var c=a.className,d=Fb(b).exec(c);if(d){var e=c.slice(d.index+d[0].length);a.className=c.slice(0,d.index)+(e?d[1]+e:"")}},mb=q.addClass=function(a,b){var c=a.className;Fb(b).test(c)||(a.className+=(c?" ":"")+b)},Dd=!1,Mf=function(){if(B&&9>C)return!1;var a=t("div");return"draggable"in a||"dragDrop"in a}(),yd,vd,sa=q.splitLines=3!="\n\nb".split(/\n/).length?function(a){for(var b=0,c=[],d=a.length;b<=d;){var e=a.indexOf("\n",b);-1==e&&(e=a.length);var f=a.slice(b,"\r"==
a.charAt(e-1)?e-1:e),g=f.indexOf("\r");-1!=g?(c.push(f.slice(0,g)),b+=g+1):(c.push(f),b=e+1)}return c}:function(a){return a.split(/\r\n?|\n/)},og=window.getSelection?function(a){try{return a.selectionStart!=a.selectionEnd}catch(b){return!1}}:function(a){try{var b=a.ownerDocument.selection.createRange()}catch(c){}return b&&b.parentElement()==a?0!=b.compareEndPoints("StartToEnd",b):!1},De=function(){var a=t("div");if("oncopy"in a)return!0;a.setAttribute("oncopy","return;");return"function"==typeof a.oncopy}(),
bd=null,ua={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"\x3d",91:"Mod",92:"Mod",93:"Mod",107:"\x3d",109:"-",127:"Delete",173:"-",186:";",187:"\x3d",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",
63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"};q.keyNames=ua;(function(){for(var a=0;10>a;a++)ua[a+48]=ua[a+96]=String(a);for(a=65;90>=a;a++)ua[a]=String.fromCharCode(a);for(a=1;12>=a;a++)ua[a+111]=ua[a+63235]="F"+a})();var vb,hg=function(){function a(a){return 247>=a?"bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN".charAt(a):
1424<=a&&1524>=a?"R":1536<=a&&1773>=a?"rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmm".charAt(a-1536):1774<=a&&2220>=a?"r":8192<=a&&8203>=a?"w":8204==a?"b":"L"}function b(a,b,c){this.level=a;this.from=b;this.to=c}var c=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,d=/[stwN]/,e=/[LRr]/,f=/[Lb1n]/,g=/[1n]/;return function(h){if(!c.test(h))return!1;
for(var k=h.length,l=[],m=0,p;m<k;++m)l.push(a(h.charCodeAt(m)));for(var m=0,n="L";m<k;++m)p=l[m],"m"==p?l[m]=n:n=p;m=0;for(n="L";m<k;++m)p=l[m],"1"==p&&"r"==n?l[m]="n":e.test(p)&&(n=p,"r"==p&&(l[m]="R"));m=1;for(n=l[0];m<k-1;++m)p=l[m],"+"==p&&"1"==n&&"1"==l[m+1]?l[m]="1":","!=p||n!=l[m+1]||"1"!=n&&"n"!=n||(l[m]=n),n=p;for(m=0;m<k;++m)if(p=l[m],","==p)l[m]="N";else if("%"==p){for(n=m+1;n<k&&"%"==l[n];++n);var q=m&&"!"==l[m-1]||n<k&&"1"==l[n]?"1":"N";for(p=m;p<n;++p)l[p]=q;m=n-1}m=0;for(n="L";m<k;++m)p=
l[m],"L"==n&&"1"==p?l[m]="L":e.test(p)&&(n=p);for(m=0;m<k;++m)if(d.test(l[m])){for(n=m+1;n<k&&d.test(l[n]);++n);p="L"==(n<k?l[n]:"L");q="L"==(m?l[m-1]:"L")||p?"L":"R";for(p=m;p<n;++p)l[p]=q;m=n-1}for(var n=[],r,m=0;m<k;)if(f.test(l[m])){p=m;for(++m;m<k&&f.test(l[m]);++m);n.push(new b(0,p,m))}else{var t=m,q=n.length;for(++m;m<k&&"L"!=l[m];++m);for(p=t;p<m;)if(g.test(l[p])){t<p&&n.splice(q,0,new b(1,t,p));t=p;for(++p;p<m&&g.test(l[p]);++p);n.splice(q,0,new b(2,t,p));t=p}else++p;t<m&&n.splice(q,0,new b(1,
t,m))}1==n[0].level&&(r=h.match(/^\s+/))&&(n[0].from=r[0].length,n.unshift(new b(0,0,r[0].length)));1==A(n).level&&(r=h.match(/\s+$/))&&(A(n).to-=r[0].length,n.push(new b(0,k-r[0].length,k)));2==n[0].level&&n.unshift(new b(1,n[0].to,n[0].to));n[0].level!=A(n).level&&n.push(new b(n[0].level,k,k));return n}}();q.version="5.3.0";return q});;
;/* module-key = 'com.atlassian.stash.stash-bower-components-plugin:codemirror-raw', location = '/static/bower/CodeMirror/addon/selection/selection-pointer.js' */
(function(c){"object"==typeof exports&&"object"==typeof module?c(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],c):c(CodeMirror)})(function(c){function e(b){b.state.selectionPointer.rects=null;f(b)}function f(b){b.state.selectionPointer.willUpdate||(b.state.selectionPointer.willUpdate=!0,setTimeout(function(){var a=b.state.selectionPointer;if(a){if(null==a.rects&&null!=a.mouseX&&(a.rects=[],b.somethingSelected()))for(var d=b.display.selectionDiv.firstChild;d;d=
d.nextSibling)a.rects.push(d.getBoundingClientRect());d=!1;if(null!=a.mouseX)for(var g=0;g<a.rects.length;g++){var c=a.rects[g];c.left<=a.mouseX&&c.right>=a.mouseX&&c.top<=a.mouseY&&c.bottom>=a.mouseY&&(d=!0)}a=d?a.value:"";b.display.lineDiv.style.cursor!=a&&(b.display.lineDiv.style.cursor=a)}b.state.selectionPointer.willUpdate=!1},50))}c.defineOption("selectionPointer",!1,function(b,a){var d=b.state.selectionPointer;d&&(c.off(b.getWrapperElement(),"mousemove",d.mousemove),c.off(b.getWrapperElement(),
"mouseout",d.mouseout),c.off(window,"scroll",d.windowScroll),b.off("cursorActivity",e),b.off("scroll",e),b.state.selectionPointer=null,b.display.lineDiv.style.cursor="");a&&(d=b.state.selectionPointer={value:"string"==typeof a?a:"default",mousemove:function(a){var c=b.state.selectionPointer;(null==a.buttons?a.which:a.buttons)?c.mouseX=c.mouseY=null:(c.mouseX=a.clientX,c.mouseY=a.clientY);f(b)},mouseout:function(a){b.getWrapperElement().contains(a.relatedTarget)||(a=b.state.selectionPointer,a.mouseX=
a.mouseY=null,f(b))},windowScroll:function(){e(b)},rects:null,mouseX:null,mouseY:null,willUpdate:!1},c.on(b.getWrapperElement(),"mousemove",d.mousemove),c.on(b.getWrapperElement(),"mouseout",d.mouseout),c.on(window,"scroll",d.windowScroll),b.on("cursorActivity",e),b.on("scroll",e))})});;
;/* module-key = 'com.atlassian.stash.stash-bower-components-plugin:codemirror-raw', location = '/static/bower/CodeMirror/addon/selection/mark-selection.js' */
(function(b){"object"==typeof exports&&"object"==typeof module?b(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],b):b(CodeMirror)})(function(b){function n(a){a.operation(function(){t(a)})}function p(a){a.state.markedSelection.length&&a.operation(function(){h(a)})}function e(a,c,d,q){if(0!=k(c,d))for(var f=a.state.markedSelection,g=a.state.markedSelectionStyle,b=c.line;;){var e=b==c.line?c:r(b,0),b=b+m,h=b>=d.line,l=h?d:r(b,0),e=a.markText(e,l,
{className:g});null==q?f.push(e):f.splice(q++,0,e);if(h)break}}function h(a){a=a.state.markedSelection;for(var c=0;c<a.length;++c)a[c].clear();a.length=0}function l(a){h(a);for(var c=a.listSelections(),d=0;d<c.length;d++)e(a,c[d].from(),c[d].to())}function t(a){if(!a.somethingSelected())return h(a);if(1<a.listSelections().length)return l(a);var c=a.getCursor("start"),d=a.getCursor("end"),b=a.state.markedSelection;if(!b.length)return e(a,c,d);var f=b[0].find(),g=b[b.length-1].find();if(!f||!g||d.line-
c.line<m||0<=k(c,g.to)||0>=k(d,f.from))return l(a);for(;0<k(c,f.from);)b.shift().clear(),f=b[0].find();0>k(c,f.from)&&(f.to.line-c.line<m?(b.shift().clear(),e(a,c,f.to,0)):e(a,c,f.from,0));for(;0>k(d,g.to);)b.pop().clear(),g=b[b.length-1].find();0<k(d,g.to)&&(d.line-g.from.line<m?(b.pop().clear(),e(a,g.from,d)):e(a,g.to,d))}b.defineOption("styleSelectedText",!1,function(a,c,d){d=d&&d!=b.Init;c&&!d?(a.state.markedSelection=[],a.state.markedSelectionStyle="string"==typeof c?c:"CodeMirror-selectedtext",
l(a),a.on("cursorActivity",n),a.on("change",p)):!c&&d&&(a.off("cursorActivity",n),a.off("change",p),h(a),a.state.markedSelection=a.state.markedSelectionStyle=null)});var m=8,r=b.Pos,k=b.cmpPos});;
;/* module-key = 'com.atlassian.stash.stash-bower-components-plugin:codemirror-raw', location = '/static/bower/CodeMirror/addon/selection/active-line.js' */
(function(d){"object"==typeof exports&&"object"==typeof module?d(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],d):d(CodeMirror)})(function(d){function f(a){for(var b=0;b<a.state.activeLines.length;b++)a.removeLineClass(a.state.activeLines[b],"wrap","CodeMirror-activeline"),a.removeLineClass(a.state.activeLines[b],"background","CodeMirror-activeline-background")}function k(a,b){if(a.length!=b.length)return!1;for(var c=0;c<a.length;c++)if(a[c]!=
b[c])return!1;return!0}function g(a,b){for(var c=[],d=0;d<b.length;d++){var e=b[d];e.empty()&&(e=a.getLineHandleVisualStart(e.head.line),c[c.length-1]!=e&&c.push(e))}k(a.state.activeLines,c)||a.operation(function(){f(a);for(var b=0;b<c.length;b++)a.addLineClass(c[b],"wrap","CodeMirror-activeline"),a.addLineClass(c[b],"background","CodeMirror-activeline-background");a.state.activeLines=c})}function h(a,b){g(a,b.ranges)}d.defineOption("styleActiveLine",!1,function(a,b,c){c=c&&c!=d.Init;b&&!c?(a.state.activeLines=
[],g(a,a.listSelections()),a.on("beforeSelectionChange",h)):!b&&c&&(a.off("beforeSelectionChange",h),f(a),delete a.state.activeLines)})});;
;/* module-key = 'com.atlassian.stash.stash-bower-components-plugin:codemirror-raw', location = '/static/bower/CodeMirror/addon/search/matchesonscrollbar.js' */
(function(d){"object"==typeof exports&&"object"==typeof module?d(require("../../lib/codemirror"),require("./searchcursor"),require("../scroll/annotatescrollbar")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","./searchcursor","../scroll/annotatescrollbar"],d):d(CodeMirror)})(function(d){function g(a,c,b,e){this.cm=a;this.options=e;var f={listenForChanges:!1},d;for(d in e)f[d]=e[d];f.className||(f.className="CodeMirror-search-match");this.annotation=a.annotateScrollbar(f);this.query=
c;this.caseFold=b;this.gap={from:a.firstLine(),to:a.lastLine()+1};this.matches=[];this.update=null;this.findMatches();this.annotation.update(this.matches);var g=this;a.on("change",this.changeHandler=function(a,b){g.onChange(b)})}function h(a,c,b){return a<=c?a:Math.max(c,a+b)}d.defineExtension("showMatchesOnScrollbar",function(a,c,b){"string"==typeof b&&(b={className:b});b||(b={});return new g(this,a,c,b)});g.prototype.findMatches=function(){if(this.gap){for(var a=0;a<this.matches.length;a++){var c=
this.matches[a];if(c.from.line>=this.gap.to)break;c.to.line>=this.gap.from&&this.matches.splice(a--,1)}for(var b=this.cm.getSearchCursor(this.query,d.Pos(this.gap.from,0),this.caseFold),e=this.options&&this.options.maxMatches||1E3;b.findNext();){c={from:b.from(),to:b.to()};if(c.from.line>=this.gap.to)break;this.matches.splice(a++,0,c);if(this.matches.length>e)break}this.gap=null}};g.prototype.onChange=function(a){var c=a.from.line,b=d.changeEnd(a).line,e=b-a.to.line;this.gap?(this.gap.from=Math.min(h(this.gap.from,
c,e),a.from.line),this.gap.to=Math.max(h(this.gap.to,c,e),a.from.line)):this.gap={from:a.from.line,to:b+1};if(e)for(a=0;a<this.matches.length;a++){var b=this.matches[a],f=h(b.from.line,c,e);f!=b.from.line&&(b.from=d.Pos(f,b.from.ch));f=h(b.to.line,c,e);f!=b.to.line&&(b.to=d.Pos(f,b.to.ch))}clearTimeout(this.update);var g=this;this.update=setTimeout(function(){g.updateAfterChange()},250)};g.prototype.updateAfterChange=function(){this.findMatches();this.annotation.update(this.matches)};g.prototype.clear=
function(){this.cm.off("change",this.changeHandler);this.annotation.clear()}});;
;/* module-key = 'com.atlassian.stash.stash-bower-components-plugin:codemirror-raw', location = '/static/bower/CodeMirror/addon/search/search.js' */
(function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror"),require("./searchcursor"),require("../dialog/dialog")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","./searchcursor","../dialog/dialog"],e):e(CodeMirror)})(function(e){function t(a,c){"string"==typeof a?a=new RegExp(a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$\x26"),c?"gi":"g"):a.global||(a=new RegExp(a.source,a.ignoreCase?"gi":"g"));return{token:function(b){a.lastIndex=
b.pos;var d=a.exec(b.string);if(d&&d.index==b.pos)return b.pos+=d[0].length,"searching";d?b.pos=d.index:b.skipToEnd()}}}function u(){this.overlay=this.posFrom=this.posTo=this.lastQuery=this.query=null}function g(a){return a.state.search||(a.state.search=new u)}function h(a){return"string"==typeof a&&a==a.toLowerCase()}function k(a,c,b){return a.getSearchCursor(c,b,h(c))}function l(a,c,b,d,e){a.openDialog?a.openDialog(c,e,{value:d,selectValueOnOpen:!0}):e(prompt(b,d))}function v(a,c,b,d){if(a.openConfirm)a.openConfirm(c,
d);else if(confirm(b))d[0]()}function p(a){var c=a.match(/^\/(.*)\/([a-z]*)$/);if(c)try{a=new RegExp(c[1],-1==c[2].indexOf("i")?"":"i")}catch(b){}if("string"==typeof a?""==a:a.test(""))a=/x^/;return a}function m(a,c){var b=g(a);if(b.query)return q(a,c);var d=a.getSelection()||b.lastQuery;l(a,'Search: \x3cinput type\x3d"text" style\x3d"width: 10em" class\x3d"CodeMirror-search-field"/\x3e \x3cspan style\x3d"color: #888" class\x3d"CodeMirror-search-hint"\x3e(Use /re/ syntax for regexp search)\x3c/span\x3e',
"Search for:",d,function(d){a.operation(function(){d&&!b.query&&(b.query=p(d),a.removeOverlay(b.overlay,h(b.query)),b.overlay=t(b.query,h(b.query)),a.addOverlay(b.overlay),a.showMatchesOnScrollbar&&(b.annotate&&(b.annotate.clear(),b.annotate=null),b.annotate=a.showMatchesOnScrollbar(b.query,h(b.query))),b.posFrom=b.posTo=a.getCursor(),q(a,c))})})}function q(a,c){a.operation(function(){var b=g(a),d=k(a,b.query,c?b.posFrom:b.posTo);if(!d.find(c)&&(d=k(a,b.query,c?e.Pos(a.lastLine()):e.Pos(a.firstLine(),
0)),!d.find(c)))return;a.setSelection(d.from(),d.to());a.scrollIntoView({from:d.from(),to:d.to()});b.posFrom=d.from();b.posTo=d.to()})}function n(a){a.operation(function(){var c=g(a);if(c.lastQuery=c.query)c.query=null,a.removeOverlay(c.overlay),c.annotate&&(c.annotate.clear(),c.annotate=null)})}function r(a,c){if(!a.getOption("readOnly")){var b=a.getSelection()||g(a).lastQuery;l(a,'Replace: \x3cinput type\x3d"text" style\x3d"width: 10em" class\x3d"CodeMirror-search-field"/\x3e \x3cspan style\x3d"color: #888" class\x3d"CodeMirror-search-hint"\x3e(Use /re/ syntax for regexp search)\x3c/span\x3e',
"Replace:",b,function(b){b&&(b=p(b),l(a,'With: \x3cinput type\x3d"text" style\x3d"width: 10em" class\x3d"CodeMirror-search-field"/\x3e',"Replace with:","",function(e){if(c)a.operation(function(){for(var c=k(a,b);c.findNext();)if("string"!=typeof b){var f=a.getRange(c.from(),c.to()).match(b);c.replace(e.replace(/\$(\d)/g,function(a,b){return f[b]}))}else c.replace(e)});else{n(a);var f=k(a,b,a.getCursor()),g=function(){var c=f.from(),e;if(!(e=f.findNext())&&(f=k(a,b),!(e=f.findNext())||c&&f.from().line==
c.line&&f.from().ch==c.ch))return;a.setSelection(f.from(),f.to());a.scrollIntoView({from:f.from(),to:f.to()});v(a,"Replace? \x3cbutton\x3eYes\x3c/button\x3e \x3cbutton\x3eNo\x3c/button\x3e \x3cbutton\x3eStop\x3c/button\x3e","Replace?",[function(){h(e)},g])},h=function(a){f.replace("string"==typeof b?e:e.replace(/\$(\d)/g,function(b,c){return a[c]}));g()};g()}}))})}}e.commands.find=function(a){n(a);m(a)};e.commands.findNext=m;e.commands.findPrev=function(a){m(a,!0)};e.commands.clearSearch=n;e.commands.replace=
r;e.commands.replaceAll=function(a){r(a,!0)}});;
;/* module-key = 'com.atlassian.stash.stash-bower-components-plugin:codemirror-raw', location = '/static/bower/CodeMirror/addon/search/match-highlighter.js' */
(function(f){"object"==typeof exports&&"object"==typeof module?f(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],f):f(CodeMirror)})(function(f){function l(a){"object"==typeof a&&(this.minChars=a.minChars,this.style=a.style,this.showToken=a.showToken,this.delay=a.delay,this.wordsOnly=a.wordsOnly);null==this.style&&(this.style="matchhighlight");null==this.minChars&&(this.minChars=2);null==this.delay&&(this.delay=100);null==this.wordsOnly&&(this.wordsOnly=
!1);this.overlay=this.timeout=null}function g(a){var c=a.state.matchHighlighter;clearTimeout(c.timeout);c.timeout=setTimeout(function(){h(a)},c.delay)}function h(a){a.operation(function(){var c=a.state.matchHighlighter;c.overlay&&(a.removeOverlay(c.overlay),c.overlay=null);if(!a.somethingSelected()&&c.showToken){for(var d=!0===c.showToken?/[\w$]/:c.showToken,b=a.getCursor(),e=a.getLine(b.line),f=b=b.ch;b&&d.test(e.charAt(b-1));)--b;for(;f<e.length&&d.test(e.charAt(f));)++f;b<f&&a.addOverlay(c.overlay=
k(e.slice(b,f),d,c.style))}else if(d=a.getCursor("from"),e=a.getCursor("to"),d.line==e.line){if(b=c.wordsOnly){a:if(null!==a.getRange(d,e).match(/^\w+$/)){if(0<d.ch&&(b={line:d.line,ch:d.ch-1},b=a.getRange(b,d),null===b.match(/\W/))){b=!1;break a}if(e.ch<a.getLine(d.line).length&&(b={line:e.line,ch:e.ch+1},b=a.getRange(e,b),null===b.match(/\W/))){b=!1;break a}b=!0}else b=!1;b=!b}b||(d=a.getRange(d,e).replace(/^\s+|\s+$/g,""),d.length>=c.minChars&&a.addOverlay(c.overlay=k(d,!1,c.style)))}})}function k(a,
c,d){return{token:function(b){var e;if(e=b.match(a))(e=!c)||(e=(!b.start||!c.test(b.string.charAt(b.start-1)))&&(b.pos==b.string.length||!c.test(b.string.charAt(b.pos))));if(e)return d;b.next();b.skipTo(a.charAt(0))||b.skipToEnd()}}}f.defineOption("highlightSelectionMatches",!1,function(a,c,d){d&&d!=f.Init&&((d=a.state.matchHighlighter.overlay)&&a.removeOverlay(d),clearTimeout(a.state.matchHighlighter.timeout),a.state.matchHighlighter=null,a.off("cursorActivity",g));c&&(a.state.matchHighlighter=new l(c),
h(a),a.on("cursorActivity",g))})});;
;/* module-key = 'com.atlassian.stash.stash-bower-components-plugin:codemirror-raw', location = '/static/bower/CodeMirror/addon/search/searchcursor.js' */
(function(g){"object"==typeof exports&&"object"==typeof module?g(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],g):g(CodeMirror)})(function(g){function r(e,b,c,a){this.atOccurrence=!1;this.doc=e;null==a&&"string"==typeof b&&(a=!1);c=c?e.clipPos(c):k(0,0);this.pos={from:c,to:c};if("string"!=typeof b)b.global||(b=new RegExp(b.source,b.ignoreCase?"ig":"g")),this.matches=function(c,n){if(c){b.lastIndex=0;for(var a=e.getLine(n.line).slice(0,n.ch),
f=0,d,h;;){b.lastIndex=f;f=b.exec(a);if(!f)break;d=f;h=d.index;f=d.index+(d[0].length||1);if(f==a.length)break}(f=d&&d[0].length||0)||(0==h&&0==a.length?d=void 0:h!=e.getLine(n.line).length&&f++)}else b.lastIndex=n.ch,a=e.getLine(n.line),f=(d=b.exec(a))&&d[0].length||0,h=d&&d.index,h+f==a.length||f||(f=1);if(d&&f)return{from:k(n.line,h),to:k(n.line,h+f),match:d}};else{var g=b;a&&(b=b.toLowerCase());var m=a?function(b){return b.toLowerCase()}:function(b){return b},l=b.split("\n");if(1==l.length)this.matches=
b.length?function(c,a){if(c){var q=e.getLine(a.line).slice(0,a.ch),f=m(q),d=f.lastIndexOf(b);if(-1<d)return d=t(q,f,d),{from:k(a.line,d),to:k(a.line,d+g.length)}}else if(q=e.getLine(a.line).slice(a.ch),f=m(q),d=f.indexOf(b),-1<d)return d=t(q,f,d)+a.ch,{from:k(a.line,d),to:k(a.line,d+g.length)}}:function(){};else{var p=g.split("\n");this.matches=function(b,a){var c=l.length-1;if(b){if(!(a.line-(l.length-1)<e.firstLine())&&m(e.getLine(a.line).slice(0,p[c].length))==l[l.length-1]){for(var f=k(a.line,
p[c].length),d=a.line-1,h=c-1;1<=h;--h,--d)if(l[h]!=m(e.getLine(d)))return;var h=e.getLine(d),g=h.length-p[0].length;if(m(h.slice(g))==l[0])return{from:k(d,g),to:f}}}else if(!(a.line+(l.length-1)>e.lastLine())&&(h=e.getLine(a.line),g=h.length-p[0].length,m(h.slice(g))==l[0])){f=k(a.line,g);d=a.line+1;for(h=1;h<c;++h,++d)if(l[h]!=m(e.getLine(d)))return;if(m(e.getLine(d).slice(0,p[c].length))==l[c])return{from:f,to:k(d,p[c].length)}}}}}}function t(e,b,c){if(e.length==b.length)return c;for(b=Math.min(c,
e.length);;){var a=e.slice(0,b).toLowerCase().length;if(a<c)++b;else if(a>c)--b;else return b}}var k=g.Pos;r.prototype={findNext:function(){return this.find(!1)},findPrevious:function(){return this.find(!0)},find:function(e){function b(a){a=k(a,0);c.pos={from:a,to:a};return c.atOccurrence=!1}for(var c=this,a=this.doc.clipPos(e?this.pos.from:this.pos.to);;){if(this.pos=this.matches(e,a))return this.atOccurrence=!0,this.pos.match||!0;if(e){if(!a.line)return b(0);a=k(a.line-1,this.doc.getLine(a.line-
1).length)}else{var g=this.doc.lineCount();if(a.line==g-1)return b(g);a=k(a.line+1,0)}}},from:function(){if(this.atOccurrence)return this.pos.from},to:function(){if(this.atOccurrence)return this.pos.to},replace:function(e,b){if(this.atOccurrence){var c=g.splitLines(e);this.doc.replaceRange(c,this.pos.from,this.pos.to,b);this.pos.to=k(this.pos.from.line+c.length-1,c[c.length-1].length+(1==c.length?this.pos.from.ch:0))}}};g.defineExtension("getSearchCursor",function(e,b,c){return new r(this.doc,e,b,
c)});g.defineDocExtension("getSearchCursor",function(e,b,c){return new r(this,e,b,c)});g.defineExtension("selectMatches",function(e,b){for(var c=[],a=this.getSearchCursor(e,this.getCursor("from"),b);a.findNext()&&!(0<g.cmpPos(a.to(),this.getCursor("to")));)c.push({anchor:a.from(),head:a.to()});c.length&&this.setSelections(c,0)})});;
;/* module-key = 'com.atlassian.stash.stash-bower-components-plugin:codemirror-raw', location = '/static/bower/CodeMirror/addon/dialog/dialog.js' */
(function(b){"object"==typeof exports&&"object"==typeof module?b(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],b):b(CodeMirror)})(function(b){function l(c,b,a){c=c.getWrapperElement().appendChild(document.createElement("div"));c.className=a?"CodeMirror-dialog CodeMirror-dialog-bottom":"CodeMirror-dialog CodeMirror-dialog-top";"string"==typeof b?c.innerHTML=b:c.appendChild(b);return c}function m(b,g){b.state.currentNotificationClose&&b.state.currentNotificationClose();
b.state.currentNotificationClose=g}b.defineExtension("openDialog",function(c,g,a){function e(b){if("string"==typeof b)d.value=b;else if(!h&&(h=!0,f.parentNode.removeChild(f),k.focus(),a.onClose))a.onClose(f)}a||(a={});m(this,null);var f=l(this,c,a.bottom),h=!1,k=this,d=f.getElementsByTagName("input")[0];if(d){a.value&&(d.value=a.value,!1!==a.selectValueOnOpen&&d.select());if(a.onInput)b.on(d,"input",function(b){a.onInput(b,d.value,e)});if(a.onKeyUp)b.on(d,"keyup",function(b){a.onKeyUp(b,d.value,e)});
b.on(d,"keydown",function(c){if(!(a&&a.onKeyDown&&a.onKeyDown(c,d.value,e))){if(27==c.keyCode||!1!==a.closeOnEnter&&13==c.keyCode)d.blur(),b.e_stop(c),e();13==c.keyCode&&g(d.value,c)}});if(!1!==a.closeOnBlur)b.on(d,"blur",e);d.focus()}else if(c=f.getElementsByTagName("button")[0]){b.on(c,"click",function(){e();k.focus()});if(!1!==a.closeOnBlur)b.on(c,"blur",e);c.focus()}return e});b.defineExtension("openConfirm",function(c,g,a){function e(){h||(h=!0,f.parentNode.removeChild(f),k.focus())}m(this,null);
var f=l(this,c,a&&a.bottom);c=f.getElementsByTagName("button");var h=!1,k=this,d=1;c[0].focus();for(a=0;a<c.length;++a){var n=c[a];(function(a){b.on(n,"click",function(c){b.e_preventDefault(c);e();a&&a(k)})})(g[a]);b.on(n,"blur",function(){--d;setTimeout(function(){0>=d&&e()},200)});b.on(n,"focus",function(){++d})}});b.defineExtension("openNotification",function(c,g){function a(){f||(f=!0,clearTimeout(h),e.parentNode.removeChild(e))}m(this,a);var e=l(this,c,g&&g.bottom),f=!1,h,k=g&&"undefined"!==
typeof g.duration?g.duration:5E3;b.on(e,"click",function(c){b.e_preventDefault(c);a()});k&&(h=setTimeout(a,k));return a})});;
;/* module-key = 'com.atlassian.stash.stash-bower-components-plugin:codemirror-mode-meta', location = '/static/bower/CodeMirror/mode/meta.js' */
(function(b){"object"==typeof exports&&"object"==typeof module?b(require("../lib/codemirror")):"function"==typeof define&&define.amd?define(["../lib/codemirror"],b):b(CodeMirror)})(function(b){b.modeInfo=[{name:"APL",mime:"text/apl",mode:"apl",ext:["dyalog","apl"]},{name:"PGP",mimes:["application/pgp","application/pgp-keys","application/pgp-signature"],mode:"asciiarmor",ext:["pgp"]},{name:"Asterisk",mime:"text/x-asterisk",mode:"asterisk",file:/^extensions\.conf$/i},{name:"C",mime:"text/x-csrc",mode:"clike",
ext:["c","h"]},{name:"C++",mime:"text/x-c++src",mode:"clike",ext:"cpp c++ cc cxx hpp h++ hh hxx".split(" "),alias:["cpp"]},{name:"Cobol",mime:"text/x-cobol",mode:"cobol",ext:["cob","cpy"]},{name:"C#",mime:"text/x-csharp",mode:"clike",ext:["cs"],alias:["csharp"]},{name:"Clojure",mime:"text/x-clojure",mode:"clojure",ext:["clj"]},{name:"CMake",mime:"text/x-cmake",mode:"cmake",ext:["cmake","cmake.in"],file:/^CMakeLists.txt$/},{name:"CoffeeScript",mime:"text/x-coffeescript",mode:"coffeescript",ext:["coffee"],
alias:["coffee","coffee-script"]},{name:"Common Lisp",mime:"text/x-common-lisp",mode:"commonlisp",ext:["cl","lisp","el"],alias:["lisp"]},{name:"Cypher",mime:"application/x-cypher-query",mode:"cypher",ext:["cyp","cypher"]},{name:"Cython",mime:"text/x-cython",mode:"python",ext:["pyx","pxd","pxi"]},{name:"CSS",mime:"text/css",mode:"css",ext:["css"]},{name:"CQL",mime:"text/x-cassandra",mode:"sql",ext:["cql"]},{name:"D",mime:"text/x-d",mode:"d",ext:["d"]},{name:"Dart",mimes:["application/dart","text/x-dart"],
mode:"dart",ext:["dart"]},{name:"diff",mime:"text/x-diff",mode:"diff",ext:["diff","patch"]},{name:"Django",mime:"text/x-django",mode:"django"},{name:"Dockerfile",mime:"text/x-dockerfile",mode:"dockerfile",file:/^Dockerfile$/},{name:"DTD",mime:"application/xml-dtd",mode:"dtd",ext:["dtd"]},{name:"Dylan",mime:"text/x-dylan",mode:"dylan",ext:["dylan","dyl","intr"]},{name:"EBNF",mime:"text/x-ebnf",mode:"ebnf"},{name:"ECL",mime:"text/x-ecl",mode:"ecl",ext:["ecl"]},{name:"Eiffel",mime:"text/x-eiffel",mode:"eiffel",
ext:["e"]},{name:"Embedded Javascript",mime:"application/x-ejs",mode:"htmlembedded",ext:["ejs"]},{name:"Embedded Ruby",mime:"application/x-erb",mode:"htmlembedded",ext:["erb"]},{name:"Erlang",mime:"text/x-erlang",mode:"erlang",ext:["erl"]},{name:"Forth",mime:"text/x-forth",mode:"forth",ext:["forth","fth","4th"]},{name:"Fortran",mime:"text/x-fortran",mode:"fortran",ext:["f","for","f77","f90"]},{name:"F#",mime:"text/x-fsharp",mode:"mllike",ext:["fs"],alias:["fsharp"]},{name:"Gas",mime:"text/x-gas",
mode:"gas",ext:["s"]},{name:"Gherkin",mime:"text/x-feature",mode:"gherkin",ext:["feature"]},{name:"GitHub Flavored Markdown",mime:"text/x-gfm",mode:"gfm",file:/^(readme|contributing|history).md$/i},{name:"Go",mime:"text/x-go",mode:"go",ext:["go"]},{name:"Groovy",mime:"text/x-groovy",mode:"groovy",ext:["groovy"]},{name:"HAML",mime:"text/x-haml",mode:"haml",ext:["haml"]},{name:"Haskell",mime:"text/x-haskell",mode:"haskell",ext:["hs"]},{name:"Haxe",mime:"text/x-haxe",mode:"haxe",ext:["hx"]},{name:"HXML",
mime:"text/x-hxml",mode:"haxe",ext:["hxml"]},{name:"ASP.NET",mime:"application/x-aspx",mode:"htmlembedded",ext:["aspx"],alias:["asp","aspx"]},{name:"HTML",mime:"text/html",mode:"htmlmixed",ext:["html","htm"],alias:["xhtml"]},{name:"HTTP",mime:"message/http",mode:"http"},{name:"IDL",mime:"text/x-idl",mode:"idl",ext:["pro"]},{name:"Jade",mime:"text/x-jade",mode:"jade",ext:["jade"]},{name:"Java",mime:"text/x-java",mode:"clike",ext:["java"]},{name:"Java Server Pages",mime:"application/x-jsp",mode:"htmlembedded",
ext:["jsp"],alias:["jsp"]},{name:"JavaScript",mimes:["text/javascript","text/ecmascript","application/javascript","application/x-javascript","application/ecmascript"],mode:"javascript",ext:["js"],alias:["ecmascript","js","node"]},{name:"JSON",mimes:["application/json","application/x-json"],mode:"javascript",ext:["json","map"],alias:["json5"]},{name:"JSON-LD",mime:"application/ld+json",mode:"javascript",ext:["jsonld"],alias:["jsonld"]},{name:"Jinja2",mime:"null",mode:"jinja2"},{name:"Julia",mime:"text/x-julia",
mode:"julia",ext:["jl"]},{name:"Kotlin",mime:"text/x-kotlin",mode:"kotlin",ext:["kt"]},{name:"LESS",mime:"text/x-less",mode:"css",ext:["less"]},{name:"LiveScript",mime:"text/x-livescript",mode:"livescript",ext:["ls"],alias:["ls"]},{name:"Lua",mime:"text/x-lua",mode:"lua",ext:["lua"]},{name:"Markdown",mime:"text/x-markdown",mode:"markdown",ext:["markdown","md","mkd"]},{name:"mIRC",mime:"text/mirc",mode:"mirc"},{name:"MariaDB SQL",mime:"text/x-mariadb",mode:"sql"},{name:"Mathematica",mime:"text/x-mathematica",
mode:"mathematica",ext:["m","nb"]},{name:"Modelica",mime:"text/x-modelica",mode:"modelica",ext:["mo"]},{name:"MUMPS",mime:"text/x-mumps",mode:"mumps"},{name:"MS SQL",mime:"text/x-mssql",mode:"sql"},{name:"MySQL",mime:"text/x-mysql",mode:"sql"},{name:"Nginx",mime:"text/x-nginx-conf",mode:"nginx",file:/nginx.*\.conf$/i},{name:"NTriples",mime:"text/n-triples",mode:"ntriples",ext:["nt"]},{name:"Objective C",mime:"text/x-objectivec",mode:"clike",ext:["m","mm"]},{name:"OCaml",mime:"text/x-ocaml",mode:"mllike",
ext:["ml","mli","mll","mly"]},{name:"Octave",mime:"text/x-octave",mode:"octave",ext:["m"]},{name:"Pascal",mime:"text/x-pascal",mode:"pascal",ext:["p","pas"]},{name:"PEG.js",mime:"null",mode:"pegjs",ext:["jsonld"]},{name:"Perl",mime:"text/x-perl",mode:"perl",ext:["pl","pm"]},{name:"PHP",mime:"application/x-httpd-php",mode:"php",ext:["php","php3","php4","php5","phtml"]},{name:"Pig",mime:"text/x-pig",mode:"pig",ext:["pig"]},{name:"Plain Text",mime:"text/plain",mode:"null",ext:"txt text conf def list log".split(" ")},
{name:"PLSQL",mime:"text/x-plsql",mode:"sql",ext:["pls"]},{name:"Properties files",mime:"text/x-properties",mode:"properties",ext:["properties","ini","in"],alias:["ini","properties"]},{name:"Python",mime:"text/x-python",mode:"python",ext:["py","pyw"]},{name:"Puppet",mime:"text/x-puppet",mode:"puppet",ext:["pp"]},{name:"Q",mime:"text/x-q",mode:"q",ext:["q"]},{name:"R",mime:"text/x-rsrc",mode:"r",ext:["r"],alias:["rscript"]},{name:"reStructuredText",mime:"text/x-rst",mode:"rst",ext:["rst"],alias:["rst"]},
{name:"RPM Changes",mime:"text/x-rpm-changes",mode:"rpm"},{name:"RPM Spec",mime:"text/x-rpm-spec",mode:"rpm",ext:["spec"]},{name:"Ruby",mime:"text/x-ruby",mode:"ruby",ext:["rb"],alias:["jruby","macruby","rake","rb","rbx"]},{name:"Rust",mime:"text/x-rustsrc",mode:"rust",ext:["rs"]},{name:"Sass",mime:"text/x-sass",mode:"sass",ext:["sass"]},{name:"Scala",mime:"text/x-scala",mode:"clike",ext:["scala"]},{name:"Scheme",mime:"text/x-scheme",mode:"scheme",ext:["scm","ss"]},{name:"SCSS",mime:"text/x-scss",
mode:"css",ext:["scss"]},{name:"Shell",mime:"text/x-sh",mode:"shell",ext:["sh","ksh","bash"],alias:["bash","sh","zsh"]},{name:"Sieve",mime:"application/sieve",mode:"sieve",ext:["siv","sieve"]},{name:"Slim",mimes:["text/x-slim","application/x-slim"],mode:"slim",ext:["slim"]},{name:"Smalltalk",mime:"text/x-stsrc",mode:"smalltalk",ext:["st"]},{name:"Smarty",mime:"text/x-smarty",mode:"smarty",ext:["tpl"]},{name:"Solr",mime:"text/x-solr",mode:"solr"},{name:"Soy",mime:"text/x-soy",mode:"soy",ext:["soy"],
alias:["closure template"]},{name:"SPARQL",mime:"application/sparql-query",mode:"sparql",ext:["rq","sparql"],alias:["sparul"]},{name:"Spreadsheet",mime:"text/x-spreadsheet",mode:"spreadsheet",alias:["excel","formula"]},{name:"SQL",mime:"text/x-sql",mode:"sql",ext:["sql"]},{name:"MariaDB",mime:"text/x-mariadb",mode:"sql"},{name:"sTeX",mime:"text/x-stex",mode:"stex"},{name:"LaTeX",mime:"text/x-latex",mode:"stex",ext:["text","ltx"],alias:["tex"]},{name:"SystemVerilog",mime:"text/x-systemverilog",mode:"verilog",
ext:["v"]},{name:"Tcl",mime:"text/x-tcl",mode:"tcl",ext:["tcl"]},{name:"Textile",mime:"text/x-textile",mode:"textile",ext:["textile"]},{name:"TiddlyWiki ",mime:"text/x-tiddlywiki",mode:"tiddlywiki"},{name:"Tiki wiki",mime:"text/tiki",mode:"tiki"},{name:"TOML",mime:"text/x-toml",mode:"toml",ext:["toml"]},{name:"Tornado",mime:"text/x-tornado",mode:"tornado"},{name:"troff",mime:"troff",mode:"troff",ext:"123456789".split("")},{name:"Turtle",mime:"text/turtle",mode:"turtle",ext:["ttl"]},{name:"TypeScript",
mime:"application/typescript",mode:"javascript",ext:["ts"],alias:["ts"]},{name:"VB.NET",mime:"text/x-vb",mode:"vb",ext:["vb"]},{name:"VBScript",mime:"text/vbscript",mode:"vbscript",ext:["vbs"]},{name:"Velocity",mime:"text/velocity",mode:"velocity",ext:["vtl"]},{name:"Verilog",mime:"text/x-verilog",mode:"verilog",ext:["v"]},{name:"XML",mimes:["application/xml","text/xml"],mode:"xml",ext:["xml","xsl","xsd"],alias:["rss","wsdl","xsd"]},{name:"XQuery",mime:"application/xquery",mode:"xquery",ext:["xy",
"xquery"]},{name:"YAML",mime:"text/x-yaml",mode:"yaml",ext:["yaml","yml"],alias:["yml"]},{name:"Z80",mime:"text/x-z80",mode:"z80",ext:["z80"]}];for(var f=0;f<b.modeInfo.length;f++){var g=b.modeInfo[f];g.mimes&&(g.mime=g.mimes[0])}b.findModeByMIME=function(c){c=c.toLowerCase();for(var d=0;d<b.modeInfo.length;d++){var a=b.modeInfo[d];if(a.mime==c)return a;if(a.mimes)for(var e=0;e<a.mimes.length;e++)if(a.mimes[e]==c)return a}};b.findModeByExtension=function(c){for(var d=0;d<b.modeInfo.length;d++){var a=
b.modeInfo[d];if(a.ext)for(var e=0;e<a.ext.length;e++)if(a.ext[e]==c)return a}};b.findModeByFileName=function(c){for(var d=0;d<b.modeInfo.length;d++){var a=b.modeInfo[d];if(a.file&&a.file.test(c))return a}d=c.lastIndexOf(".");if(c=-1<d&&c.substring(d+1,c.length))return b.findModeByExtension(c)};b.findModeByName=function(c){c=c.toLowerCase();for(var d=0;d<b.modeInfo.length;d++){var a=b.modeInfo[d];if(a.name.toLowerCase()==c)return a;if(a.alias)for(var e=0;e<a.alias.length;e++)if(a.alias[e].toLowerCase()==
c)return a}}});;
;/* module-key = 'com.atlassian.stash.stash-bower-components-plugin:codemirror', location = '/static/lib/CodeMirror/codemirror-AMD.js' */
define("codemirror",function(){return CodeMirror});;
;/* module-key = 'com.atlassian.stash.stash-bower-components-plugin:codemirror', location = '/static/bower/CodeMirror/addon/runmode/runmode.js' */
(function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],a):a(CodeMirror)})(function(a){a.runMode=function(l,d,h,c){d=a.getMode(a.defaults,d);var p=/MSIE \d/.test(navigator.userAgent)&&(null==document.documentMode||9>document.documentMode);if(1==h.nodeType){var n=c&&c.tabSize||a.defaults.tabSize,m=h,f=0;m.innerHTML="";h=function(a,c){if("\n"==a)m.appendChild(document.createTextNode(p?"\r":
a)),f=0;else{for(var g="",e=0;;){var b=a.indexOf("\t",e);if(-1==b){g+=a.slice(e);f+=a.length-e;break}else{f+=b-e;g+=a.slice(e,b);e=n-f%n;f+=e;for(var d=0;d<e;++d)g+=" ";e=b+1}}c?(b=m.appendChild(document.createElement("span")),b.className="cm-"+c.replace(/ +/g," cm-"),b.appendChild(document.createTextNode(g))):m.appendChild(document.createTextNode(g))}}}l=a.splitLines(l);c=c&&c.state||a.startState(d);for(var k=0,q=l.length;k<q;++k){k&&h("\n");var b=new a.StringStream(l[k]);for(!b.string&&d.blankLine&&
d.blankLine(c);!b.eol();){var r=d.token(b,c);h(b.current(),r,k,b.start,c);b.start=b.pos}}}});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:codemirror', location = '/static/lib/CodeMirror/codemirror-AMD.js' */
define("codemirror",function(){return CodeMirror});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:codemirror', location = '/static/bower/CodeMirror/addon/runmode/runmode.js' */
(function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],a):a(CodeMirror)})(function(a){a.runMode=function(l,d,h,c){d=a.getMode(a.defaults,d);var p=/MSIE \d/.test(navigator.userAgent)&&(null==document.documentMode||9>document.documentMode);if(1==h.nodeType){var n=c&&c.tabSize||a.defaults.tabSize,m=h,f=0;m.innerHTML="";h=function(a,c){if("\n"==a)m.appendChild(document.createTextNode(p?"\r":
a)),f=0;else{for(var g="",e=0;;){var b=a.indexOf("\t",e);if(-1==b){g+=a.slice(e);f+=a.length-e;break}else{f+=b-e;g+=a.slice(e,b);e=n-f%n;f+=e;for(var d=0;d<e;++d)g+=" ";e=b+1}}c?(b=m.appendChild(document.createElement("span")),b.className="cm-"+c.replace(/ +/g," cm-"),b.appendChild(document.createTextNode(g))):m.appendChild(document.createTextNode(g))}}}l=a.splitLines(l);c=c&&c.state||a.startState(d);for(var k=0,q=l.length;k<q;++k){k&&h("\n");var b=new a.StringStream(l[k]);for(!b.string&&d.blankLine&&
d.blankLine(c);!b.eol();){var r=d.token(b,c);h(b.current(),r,k,b.start,c);b.start=b.pos}}}});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:determine-language', location = '/static/util/determine-language.js' */
define("util/determine-language",["codemirror","jquery","lodash","exports"],function(f,q,g,k){document.documentElement.className+=" cm-s-stash-default";var r={bash:"text/x-sh",clojure:"text/x-clojure",coffeescript:"text/x-coffeescript",cpp:"text/x-c++src",cs:"text/x-csharp",css:"text/css",d:"text/x-d",diff:"text/x-diff",dos:"text/x-sh",erlang:"text/x-erlang",go:"text/x-go",haskell:"text/x-haskell",html:"text/html",ini:"text/x-toml",java:"text/x-java",javascript:"text/javascript",json:"application/json",
less:"text/x-less",lisp:"text/x-common-lisp",lua:"text/x-lua",markdown:"text/x-markdown",objectivec:"text/x-csrc",perl:"text/x-perl",php:"application/x-httpd-php",python:"text/x-python",ruby:"text/x-ruby",scala:"text/x-scala",sql:"text/x-sql",tex:"text/x-stex",vbscript:"text/vbscript",xml:"application/xml"},t=WRM.data.claim("com.atlassian.stash.stash-web-plugin:determine-language.syntax-highlighters")||{},l={},m={};g.forEach(t,function(c,a){-1===a.indexOf("/")&&console&&console.warn&&console.warn("DEPRECATED - Using HighlightJS mapping ("+
a+") has been has been deprecated since 3.5 and will be removed in 4.0. See https://confluence.atlassian.com/display/STASHKB/Syntax+highlight+changes");g.forEach(c.e,function(b){l[b]=a});g.forEach(c.x,function(b){m[b]=a})});var n={},p={};k.fromFileInfo=function(c){var a=c.path,b=a.lastIndexOf("."),b=-1===b?a:a.substring(b+1),d;if(1<c.firstLine.length)if(d=/^#!(?:\/(?:usr\/)?(?:local\/)?bin\/([^\s]+))(?:\s+([^\s]+))?/.exec(c.firstLine)){var e=d[1];"env"===e&&(e=d[2]);d=e}else d=null;else d=null;var e=
n.hasOwnProperty(b)?n[b]:d&&p.hasOwnProperty(d)?p[d]:null,h;e||((h=g.has(l,b)?l[b]:null)||(h=null!=d?g.has(m,d)?m[d]:null:null),h?(b=a=h,-1===a.indexOf("/")&&(b=r[a]),e=f.findModeByMIME(b)):e=f.findModeByFileName(a),e=e||f.findModeByMIME("text/plain"),e.builtIn=!0);return c.legacy?h||"text":e};k.registerCodeMirrorMode=function(c,a,b){a&&a.forEach(function(a){n[a]=c});b&&b.forEach(function(a){p[a]=c})};k.getCodeMirrorModeForName=function(c){var a=f.findModeByName(c)||f.findModeByExtension(c);return a?
"undefined"===typeof f.mimeModes[a.mime]?WRM.require("wr!com.atlassian.stash.stash-highlight-plugin:"+a.mode).then(function(){return a}):q.Deferred().resolve(a):q.Deferred().resolve(f.findModeByMIME("text/plain"))}});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:stash-codemirror', location = '/static/feature/file-content/stash-codemirror/search.js' */
define("feature/file-content/stash-codemirror/search",["codemirror","jquery","util/navigator"],function(e,l,q){function r(a,b){a="string"===typeof a?new RegExp("^"+a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$\x26"),b?"i":""):new RegExp("^(?:"+a.source+")",a.ignoreCase?"i":"");return{token:function(c){if(c.match(a))return"searching";for(;!c.eol()&&(c.next(),!c.match(a,!1)););}}}function t(){this.query=this.overlay=this.dialogEl=this.cursor=null}function f(a){return a.state.search||(a.state.search=
new t)}function m(a){var b=a.match(/^\/(.*)\/([a-z]*)$/);return b?new RegExp(b[1],-1===b[2].indexOf("i")?"":"i"):a}function k(a,b){a.operation(function(){a.removeOverlay(b.overlay);b.overlay=r(b.query,"string"===typeof b.query);a.addOverlay(b.overlay)})}function n(a,b){a.operation(function(){a.removeOverlay(b.overlay);b.overlay=null})}function g(a,b,c){(b=b&&b.trim())&&0!==b.length&&a.operation(function(){var d=f(a);b!==d.query?(d.query=m(b),d.cursor=null,k(a,d)):d.overlay||k(a,d);h(a,c)})}function p(a,
b){var c=f(a);if(c.dialogEl){var d=c.dialogEl.getElementsByClassName("search-query")[0];d.focus()}else{d=l(stash.feature.fileContent.codemirror.searchQuery());d.find(".search-button").on("click",function(c){h(a,l(c.target).closest(".aui-button").data("rev"))}).tooltip();var e=d.find("input")[0];e.onkeydown=function(b){c.query=void 0;var d=q.isMac(),f=String.fromCharCode(b.keyCode),d=d&&b.metaKey&&!b.ctrlKey||!d&&!b.metaKey&&b.ctrlKey;"F"!==f||!d||b.shiftKey||b.altKey?"G"!==f||!d||b.shiftKey||b.altKey?
"G"===f&&d&&b.shiftKey&&!b.altKey&&(b.preventDefault(),g(a,e.value,!0)):(b.preventDefault(),g(a,e.value)):b.preventDefault()};c.dialogEl=d[0];d={value:a.getSelection()||c.query,closeOnEnter:!1,closeOnBlur:!1,onClose:function(){n(a,c);c.dialogEl=c.cursor=null}};a.openDialog(c.dialogEl,function(b,c){c.preventDefault();g(a,b)},d)}g(a,d.value,b)}function h(a,b){a.operation(function(){var c=f(a);if(c.query&&c.dialogEl){if(!c.cursor){b&&a.execCommand("goCharLeft");var d;d=c.query;var g=a.getCursor();d=
a.getSearchCursor(d,g,"string"===typeof d);c.cursor=d}if(!c.cursor.find(b)&&(d=c.query,g=b?e.Pos(a.lastLine()):e.Pos(a.firstLine(),0),d=a.getSearchCursor(d,g,"string"===typeof d),c.cursor=d,!c.cursor.find(b)))return;a.setSelection(c.cursor.from(),c.cursor.to());c={from:c.cursor.from(),to:c.cursor.to()};(d=a.getOption("scrollLineIntoViewFunc"))?(d(c),c=a.charCoords(c.from,"local"),d=a.getScrollInfo(),(d.left>c.left||d.left+d.clientWidth<c.left)&&a.scrollTo(Math.max(0,c.left-20),null)):a.scrollIntoView(c,
100)}else p(a,b)})}e.defineOption("scrollLineIntoViewFunc",null);e.commands.find=p;e.commands.findNext=h;e.commands.findPrev=function(a){return h(a,!0)};e.commands.highlight=function(a,b){var c=f(a);0===b.length?n(a,c):(c.query=m(b),k(a,c))}});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:stash-codemirror', location = '/static/feature/file-content/stash-codemirror/codemirror-search.soy' */
// This file was automatically generated from codemirror-search.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace stash.feature.fileContent.codemirror.
 */

if (typeof stash == 'undefined') { var stash = {}; }
if (typeof stash.feature == 'undefined') { stash.feature = {}; }
if (typeof stash.feature.fileContent == 'undefined') { stash.feature.fileContent = {}; }
if (typeof stash.feature.fileContent.codemirror == 'undefined') { stash.feature.fileContent.codemirror = {}; }


stash.feature.fileContent.codemirror.searchQuery = function(opt_data, opt_ignored) {
  return '<div class="codemirror-search-query">' + soy.$$escapeHtml("Search:") + '<div class="search-box"><input class="search-query" type="text" style="width: 10em"/></div>' + aui.buttons.buttons({content: '' + aui.buttons.button({text: '', iconType: 'aui', iconClass: 'aui-icon-small aui-iconfont-up', extraClasses: ['search-button'], extraAttributes: {type: 'button', 'data-rev': 'true', title: "Previous match"}}) + aui.buttons.button({text: '', iconType: 'aui', iconClass: 'aui-icon-small aui-iconfont-down', extraClasses: ['search-button'], extraAttributes: {type: 'button', title: "Next match"}})}) + '</div>';
};
if (goog.DEBUG) {
  stash.feature.fileContent.codemirror.searchQuery.soyTemplateName = 'stash.feature.fileContent.codemirror.searchQuery';
}
;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:stash-codemirror', location = '/static/feature/file-content/stash-codemirror/stash-codemirror.js' */
define("feature/file-content/stash-codemirror","aui codemirror jquery lodash util/function feature/file-content/stash-codemirror/stash-scrollbar".split(" "),function(m,h,e,g,d){function n(b){b.on("keydown",function(c,a){33<=a.which&&40>=a.which&&!a.shiftKey&&!c.somethingSelected()&&(37>a.which&&a.preventDefault(),c.getInputField().blur())})}function p(b){var c=!1,a=d.lazyDelay(function(){var a;c||(a=b.lineAtHeight(b.getScrollInfo().top+b.heightAtLine(0)),b.setSelection({line:a+1,ch:0}));c=!1},10);
b.on("contextmenu",function(){c=!0});b.on("blur",function(b){b.somethingSelected()&&a();c=!1})}function q(b){b.on("keydown",f);b.on("keypress",f)}function f(b,c){var a=g.extend(jQuery.Event(c.type),g.pick(c,r));e(document).trigger(a);c.codemirrorIgnore=!!k[c.which||c.keyCode]}function t(b){var c={},a=Array.prototype.slice.call(arguments,1),e=d.spread(function(a,l){c[a]=void 0!==l?g.compose(d.constant(l),b[a].bind(b)):b[a].bind(b)});a.forEach(d.unary(e));return c}var k={};k[m.keyCode.TAB]=!0;var r=
["which","keyCode","shiftKey","ctrlKey","metaKey"];return function(b,c){var a=new h(b,e.extend({mode:"text/plain",readOnly:!0,lineNumbers:!1,wholeLineUpdateBefore:!1,scrollbarStyle:"stash",cursorBlinkRate:0,styleSelectedText:!0,theme:"stash-default"},{viewportMargin:c&&c.autoResizing?Infinity:void 0},c));e(a.getWrapperElement()).find(".CodeMirror-lines, .CodeMirror-code").attr("data-skate-ignore","true");c&&c.autoResizing&&(b.className+=" codemirror-auto-resizing-container");n(a);q(a);p(a);var f=
t(a,["addLineClass",this],"addLineWidget","charCoords","execCommand","getDoc","getInputField","getLine","getLineHandle","getLineNumber","getOption","getScrollInfo","getWrapperElement","heightAtLine","lastLine","lineAtHeight",["markText",this],["off",this],["on",this],["refresh",this],["removeLineClass",this],"replaceRange",["scrollIntoView",this],["scrollTo",this],["setGutterMarker",this],["setOption",this],["setSelection",this],["setValue",this]);e.extend(this,f);this.operation=function(b){a.operation(d.unary(g.partial(b,
this)));return this};this._highlight=function(b){h.commands.highlight(a,b)};this._insert=function(b,c,e){var d=0===c;--c;var g=a.getOption("wholeLineUpdateBefore");a.setOption("wholeLineUpdateBefore",d);var f=a.getDoc(),h={line:c,ch:d?0:a.getLine(c).length};f.replaceRange(d?b+"\n":"\n"+b,h);e&&f.setSelection({line:c,ch:0});a.setOption("wholeLineUpdateBefore",g)};return this}});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:stash-codemirror', location = '/static/feature/file-content/stash-codemirror/stash-scrollbar.js' */
define("feature/file-content/stash-codemirror/stash-scrollbar",["codemirror","jquery"],function(e,f){function g(a,c,b){this.cm=b;b=f("\x3cdiv\x3e").css("height","100%").css("min-height","1px");var d=this.horiz=f("\x3cdiv\x3e").addClass("CodeMirror-hscrollbar").css("min-height","18px").append(b)[0];a(d);e.on(d,"scroll",function(){d.clientWidth&&c(d.scrollLeft,"horizontal")})}g.prototype={update:function(a){var c=a.scrollWidth>a.clientWidth+1,b=a.nativeBarWidth;c?(this.horiz.style.display="block",this.horiz.style.right=
"0",this.horiz.style.left=a.barLeft+"px",this.horiz.firstChild.style.width=a.scrollWidth-a.clientWidth+(a.barWidth||this.horiz.clientWidth)+"px"):(this.horiz.style.display="",this.horiz.firstChild.style.width="0");return{right:0,bottom:c?b:0}},setScrollLeft:function(a){this.horiz.scrollLeft!==a&&(this.horiz.scrollLeft=a)},setScrollTop:function(a){},clear:function(){var a=this.horiz.parentNode;a.removeChild(this.horiz);a.removeChild(this.vert)}};e.scrollbarModel.stash=g});;
;/* module-key = 'com.atlassian.stash.stash-highlight-plugin:clike', location = '/static/bower/CodeMirror/mode/clike/clike.js' */
(function(k){"object"==typeof exports&&"object"==typeof module?k(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],k):k(CodeMirror)})(function(k){function a(b){var d={};b=b.split(" ");for(var a=0;a<b.length;++a)d[b[a]]=!0;return d}function h(b,d){if(!d.startOfLine)return!1;for(;;)if(b.skipTo("\\")){if(b.next(),b.eol()){d.tokenize=h;break}}else{b.skipToEnd();d.tokenize=null;break}return"meta"}function n(b,d){return"variable-3"==d.prevToken?"variable-3":
!1}function l(b,d){b.backUp(1);if(b.match(/(R|u8R|uR|UR|LR)/)){var a=b.match(/"([^\s\\()]{0,16})\(/);if(!a)return!1;d.cpp11RawStringDelim=a[1];d.tokenize=q;return q(b,d)}if(b.match(/(u8|u|U|L)/))return b.match(/["']/,!1)?"string":!1;b.next();return!1}function r(b,d){for(var a;null!=(a=b.next());)if('"'==a&&!b.eat('"')){d.tokenize=null;break}return"string"}function q(b,a){var g=a.cpp11RawStringDelim.replace(/[^\w\s]/g,"\\$\x26");b.match(new RegExp(".*?\\)"+g+'"'))?a.tokenize=null:b.skipToEnd();return"string"}
function e(b,a){function g(a){if(a)for(var b in a)a.hasOwnProperty(b)&&e.push(b)}"string"==typeof b&&(b=[b]);var e=[];g(a.keywords);g(a.types);g(a.builtin);g(a.atoms);e.length&&(a.helperType=b[0],k.registerHelper("hintWords",b[0],e));for(var h=0;h<b.length;++h)k.defineMIME(b[h],a)}function v(a,d){for(var g=!1;!a.eol();){if(!g&&a.match('"""')){d.tokenize=null;break}g="\\"==a.next()&&!g}return"string"}k.defineMode("clike",function(a,d){function g(a,b){var c=a.next();if(x[c]){var d=x[c](a,b);if(!1!==
d)return d}if('"'==c||"'"==c)return b.tokenize=e(c),b.tokenize(a,b);if(/[\[\]{}\(\),;\:\.]/.test(c))return f=c,null;if(/\d/.test(c))return a.eatWhile(/[\w\.]/),"number";if("/"==c){if(a.eat("*"))return b.tokenize=h,h(a,b);if(a.eat("/"))return a.skipToEnd(),"comment"}if(y.test(c))return a.eatWhile(y),"operator";a.eatWhile(/[\w\$_\xa1-\uffff]/);c=a.current();return r.propertyIsEnumerable(c)?(z.propertyIsEnumerable(c)&&(f="newstatement"),B.propertyIsEnumerable(c)&&(w=!0),"keyword"):v.propertyIsEnumerable(c)?
"variable-3":C.propertyIsEnumerable(c)?(z.propertyIsEnumerable(c)&&(f="newstatement"),"builtin"):D.propertyIsEnumerable(c)?"atom":"variable"}function e(a){return function(b,c){for(var d=!1,f,e=!1;null!=(f=b.next());){if(f==a&&!d){e=!0;break}d=!d&&"\\"==f}if(e||!d&&!E)c.tokenize=null;return"string"}}function h(a,b){for(var c=!1,d;d=a.next();){if("/"==d&&c){b.tokenize=null;break}c="*"==d}return"comment"}function l(a,b,c,d,f){this.indented=a;this.column=b;this.type=c;this.align=d;this.prev=f}function m(a){return"statement"==
a.type||"switchstatement"==a.type}function t(a,b,c){var d=a.indented;a.context&&m(a.context)&&(d=a.context.indented);return a.context=new l(d,b,c,null,a.context)}function p(a){var b=a.context.type;if(")"==b||"]"==b||"}"==b)a.indented=a.context.indented;return a.context=a.context.prev}var u=a.indentUnit,n=d.statementIndentUnit||u,q=d.dontAlignCalls,r=d.keywords||{},v=d.types||{},C=d.builtin||{},z=d.blockKeywords||{},B=d.defKeywords||{},D=d.atoms||{},x=d.hooks||{},E=d.multiLineStrings,F=!1!==d.indentStatements,
A=!1!==d.indentSwitch,y=/[+\-*&%=<>!?|\/]/,f,w;return{startState:function(a){return{tokenize:null,context:new l((a||0)-u,0,"top",!1),indented:0,startOfLine:!0,prevToken:null}},token:function(a,b){var c=b.context;a.sol()&&(null==c.align&&(c.align=!1),b.indented=a.indentation(),b.startOfLine=!0);if(a.eatSpace())return null;f=w=null;var e=(b.tokenize||g)(a,b);if("comment"==e||"meta"==e)return e;null==c.align&&(c.align=!0);if(";"!=f&&":"!=f&&","!=f||!m(c))if("{"==f)t(b,a.column(),"}");else if("["==f)t(b,
a.column(),"]");else if("("==f)t(b,a.column(),")");else if("}"==f){for(;m(c);)c=p(b);for("}"==c.type&&(c=p(b));m(c);)c=p(b)}else f==c.type?p(b):F&&(("}"==c.type||"top"==c.type)&&";"!=f||m(c)&&"newstatement"==f)&&(c="statement","newstatement"==f&&A&&"switch"==a.current()&&(c="switchstatement"),t(b,a.column(),c));else p(b);if((c="variable"==e)&&!(c="def"==b.prevToken)){if(c=d.typeFirstDefinitions)c="variable"==b.prevToken||"variable-3"==b.prevToken?!0:/\S[>*\]]\s*$|\*$/.test(a.string.slice(0,a.start))?
!0:void 0;c=c&&a.match(/^\s*\(/,!1)}c&&(e="def");b.startOfLine=!1;b.prevToken=w?"def":e;return e},indent:function(a,b){if(a.tokenize!=g&&null!=a.tokenize)return k.Pass;var c=a.context,d=b&&b.charAt(0);m(c)&&"}"==d&&(c=c.prev);var e=d==c.type,f=c.prev&&"switchstatement"==c.prev.type;return m(c)?c.indented+("{"==d?0:n):!c.align||q&&")"==c.type?")"!=c.type||e?c.indented+(e?0:u)+(e||!f||/^(?:case|default)\b/.test(b)?0:u):c.indented+n:c.column+(e?0:1)},electricInput:A?/^\s*(?:case .*?:|default:|\{|\})$/:
/^\s*[{}]$/,blockCommentStart:"/*",blockCommentEnd:"*/",lineComment:"//",fold:"brace"}});e(["text/x-csrc","text/x-c","text/x-chdr"],{name:"clike",keywords:a("auto if break case register continue return default do sizeof static else struct switch extern typedef float union for goto while enum const volatile true false"),types:a("int long char short double float unsigned signed void size_t ptrdiff_t bool _Complex _Bool float_t double_t intptr_t intmax_t int8_t int16_t int32_t int64_t uintptr_t uintmax_t uint8_t uint16_t uint32_t uint64_t"),
blockKeywords:a("case do else for if switch while struct"),defKeywords:a("struct"),typeFirstDefinitions:!0,atoms:a("null"),hooks:{"#":h,"*":n},modeProps:{fold:["brace","include"]}});e(["text/x-c++src","text/x-c++hdr"],{name:"clike",keywords:a("auto if break case register continue return default do sizeof static else struct switch extern typedef float union for goto while enum const volatile true false asm dynamic_cast namespace reinterpret_cast try bool explicit new static_cast typeid catch operator template typename class friend private this using const_cast inline public throw virtual delete mutable protected wchar_t alignas alignof constexpr decltype nullptr noexcept thread_local final static_assert override"),
types:a("int long char short double float unsigned signed void size_t ptrdiff_tbool wchar_t"),blockKeywords:a("catch class do else finally for if struct switch try while"),defKeywords:a("class namespace struct enum union"),typeFirstDefinitions:!0,atoms:a("true false null"),hooks:{"#":h,"*":n,u:l,U:l,L:l,R:l},modeProps:{fold:["brace","include"]}});e("text/x-java",{name:"clike",keywords:a("abstract assert break case catch class const continue default do else enum extends final finally float for goto if implements import instanceof interface native new package private protected public return static strictfp super switch synchronized this throw throws transient try volatile while"),
types:a("byte short int long float double boolean char void Boolean Byte Character Double Float Integer Long Number Object Short String StringBuffer StringBuilder Void"),blockKeywords:a("catch class do else finally for if switch try while"),defKeywords:a("class interface package enum"),typeFirstDefinitions:!0,atoms:a("true false null"),hooks:{"@":function(a){a.eatWhile(/[\w\$_]/);return"meta"}},modeProps:{fold:["brace","import"]}});e("text/x-csharp",{name:"clike",keywords:a("abstract as async await base break case catch checked class const continue default delegate do else enum event explicit extern finally fixed for foreach goto if implicit in interface internal is lock namespace new operator out override params private protected public readonly ref return sealed sizeof stackalloc static struct switch this throw try typeof unchecked unsafe using virtual void volatile while add alias ascending descending dynamic from get global group into join let orderby partial remove select set value var yield"),
types:a("Action Boolean Byte Char DateTime DateTimeOffset Decimal Double Func Guid Int16 Int32 Int64 Object SByte Single String Task TimeSpan UInt16 UInt32 UInt64 bool byte char decimal double short int long object sbyte float string ushort uint ulong"),blockKeywords:a("catch class do else finally for foreach if struct switch try while"),defKeywords:a("class interface namespace struct var"),typeFirstDefinitions:!0,atoms:a("true false null"),hooks:{"@":function(a,d){if(a.eat('"'))return d.tokenize=
r,r(a,d);a.eatWhile(/[\w\$_]/);return"meta"}}});e("text/x-scala",{name:"clike",keywords:a("abstract case catch class def do else extends false final finally for forSome if implicit import lazy match new null object override package private protected return sealed super this throw trait try type val var while with yield _ : \x3d \x3d\x3e \x3c- \x3c: \x3c% \x3e: # @ assert assume require print println printf readLine readBoolean readByte readShort readChar readInt readLong readFloat readDouble :: #:: "),
types:a("AnyVal App Application Array BufferedIterator BigDecimal BigInt Char Console Either Enumeration Equiv Error Exception Fractional Function IndexedSeq Integral Iterable Iterator List Map Numeric Nil NotNull Option Ordered Ordering PartialFunction PartialOrdering Product Proxy Range Responder Seq Serializable Set Specializable Stream StringBuilder StringContext Symbol Throwable Traversable TraversableOnce Tuple Unit Vector Boolean Byte Character CharSequence Class ClassLoader Cloneable Comparable Compiler Double Exception Float Integer Long Math Number Object Package Pair Process Runtime Runnable SecurityManager Short StackTraceElement StrictMath String StringBuffer System Thread ThreadGroup ThreadLocal Throwable Triple Void"),
multiLineStrings:!0,blockKeywords:a("catch class do else finally for forSome if match switch try while"),defKeywords:a("class def object package trait type val var"),atoms:a("true false null"),indentStatements:!1,indentSwitch:!1,hooks:{"@":function(a){a.eatWhile(/[\w\$_]/);return"meta"},'"':function(a,d){if(!a.match('""'))return!1;d.tokenize=v;return d.tokenize(a,d)},"'":function(a){a.eatWhile(/[\w\$_\xa1-\uffff]/);return"atom"}},modeProps:{closeBrackets:{triples:'"'}}});e(["x-shader/x-vertex","x-shader/x-fragment"],
{name:"clike",keywords:a("sampler1D sampler2D sampler3D samplerCube sampler1DShadow sampler2DShadow const attribute uniform varying break continue discard return for while do if else struct in out inout"),types:a("float int bool void vec2 vec3 vec4 ivec2 ivec3 ivec4 bvec2 bvec3 bvec4 mat2 mat3 mat4"),blockKeywords:a("for while do if else struct"),builtin:a("radians degrees sin cos tan asin acos atan pow exp log exp2 sqrt inversesqrt abs sign floor ceil fract mod min max clamp mix step smoothstep length distance dot cross normalize ftransform faceforward reflect refract matrixCompMult lessThan lessThanEqual greaterThan greaterThanEqual equal notEqual any all not texture1D texture1DProj texture1DLod texture1DProjLod texture2D texture2DProj texture2DLod texture2DProjLod texture3D texture3DProj texture3DLod texture3DProjLod textureCube textureCubeLod shadow1D shadow2D shadow1DProj shadow2DProj shadow1DLod shadow2DLod shadow1DProjLod shadow2DProjLod dFdx dFdy fwidth noise1 noise2 noise3 noise4"),
atoms:a("true false gl_FragColor gl_SecondaryColor gl_Normal gl_Vertex gl_MultiTexCoord0 gl_MultiTexCoord1 gl_MultiTexCoord2 gl_MultiTexCoord3 gl_MultiTexCoord4 gl_MultiTexCoord5 gl_MultiTexCoord6 gl_MultiTexCoord7 gl_FogCoord gl_PointCoord gl_Position gl_PointSize gl_ClipVertex gl_FrontColor gl_BackColor gl_FrontSecondaryColor gl_BackSecondaryColor gl_TexCoord gl_FogFragCoord gl_FragCoord gl_FrontFacing gl_FragData gl_FragDepth gl_ModelViewMatrix gl_ProjectionMatrix gl_ModelViewProjectionMatrix gl_TextureMatrix gl_NormalMatrix gl_ModelViewMatrixInverse gl_ProjectionMatrixInverse gl_ModelViewProjectionMatrixInverse gl_TexureMatrixTranspose gl_ModelViewMatrixInverseTranspose gl_ProjectionMatrixInverseTranspose gl_ModelViewProjectionMatrixInverseTranspose gl_TextureMatrixInverseTranspose gl_NormalScale gl_DepthRange gl_ClipPlane gl_Point gl_FrontMaterial gl_BackMaterial gl_LightSource gl_LightModel gl_FrontLightModelProduct gl_BackLightModelProduct gl_TextureColor gl_EyePlaneS gl_EyePlaneT gl_EyePlaneR gl_EyePlaneQ gl_FogParameters gl_MaxLights gl_MaxClipPlanes gl_MaxTextureUnits gl_MaxTextureCoords gl_MaxVertexAttribs gl_MaxVertexUniformComponents gl_MaxVaryingFloats gl_MaxVertexTextureImageUnits gl_MaxTextureImageUnits gl_MaxFragmentUniformComponents gl_MaxCombineTextureImageUnits gl_MaxDrawBuffers"),
indentSwitch:!1,hooks:{"#":h},modeProps:{fold:["brace","include"]}});e("text/x-nesc",{name:"clike",keywords:a("auto if break case register continue return default do sizeof static else struct switch extern typedef float union for goto while enum const volatile true falseas atomic async call command component components configuration event generic implementation includes interface module new norace nx_struct nx_union post provides signal task uses abstract extends"),types:a("int long char short double float unsigned signed void size_t ptrdiff_t"),
blockKeywords:a("case do else for if switch while struct"),atoms:a("null"),hooks:{"#":h},modeProps:{fold:["brace","include"]}});e("text/x-objectivec",{name:"clike",keywords:a("auto if break case register continue return default do sizeof static else struct switch extern typedef float union for goto while enum const volatile true falseinline restrict _Bool _Complex _Imaginery BOOL Class bycopy byref id IMP in inout nil oneway out Protocol SEL self super atomic nonatomic retain copy readwrite readonly"),
types:a("int long char short double float unsigned signed void size_t ptrdiff_t"),atoms:a("YES NO NULL NILL ON OFF"),hooks:{"@":function(a){a.eatWhile(/[\w\$]/);return"keyword"},"#":h},modeProps:{fold:"brace"}})});;
;/* module-key = 'com.atlassian.stash.stash-highlight-plugin:commonlisp', location = '/static/bower/CodeMirror/mode/commonlisp/commonlisp.js' */
(function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)})(function(e){e.defineMode("commonlisp",function(e){function g(b){for(var c;c=b.next();)if("\\"==c)b.next();else if(!k.test(c)){b.backUp(1);break}return b.current()}function f(b,c){if(b.eatSpace())return d="ws",null;if(b.match(l))return"number";var a=b.next();"\\"==a&&(a=b.next());if('"'==a)return(c.tokenize=m)(b,c);
if("("==a)return d="open","bracket";if(")"==a||"]"==a)return d="close","bracket";if(";"==a)return b.skipToEnd(),d="ws","comment";if(/['`,@]/.test(a))return null;if("|"==a){if(b.skipTo("|"))return b.next(),"symbol";b.skipToEnd();return"error"}if("#"==a)return a=b.next(),"["==a?(d="open","bracket"):/[+\-=\.']/.test(a)||/\d/.test(a)&&b.match(/^\d*#/)?null:"|"==a?(c.tokenize=n)(b,c):":"==a?(g(b),"meta"):"error";a=g(b);if("."==a)return null;d="symbol";return"nil"==a||"t"==a||":"==a.charAt(0)?"atom":"open"==
c.lastType&&(p.test(a)||h.test(a))?"keyword":"\x26"==a.charAt(0)?"variable-2":"variable"}function m(b,c){for(var a=!1,d;d=b.next();){if('"'==d&&!a){c.tokenize=f;break}a=!a&&"\\"==d}return"string"}function n(b,c){for(var a,e;a=b.next();){if("#"==a&&"|"==e){c.tokenize=f;break}e=a}d="ws";return"comment"}var p=/^(block|let*|return-from|catch|load-time-value|setq|eval-when|locally|symbol-macrolet|flet|macrolet|tagbody|function|multiple-value-call|the|go|multiple-value-prog1|throw|if|progn|unwind-protect|labels|progv|let|quote)$/,
h=/^with|^def|^do|^prog|case$|^cond$|bind$|when$|unless$/,l=/^(?:[+\-]?(?:\d+|\d*\.\d+)(?:[efd][+\-]?\d+)?|[+\-]?\d+(?:\/[+\-]?\d+)?|#b[+\-]?[01]+|#o[+\-]?[0-7]+|#x[+\-]?[\da-f]+)/,k=/[^\s'`,@()\[\]";]/,d;return{startState:function(){return{ctx:{prev:null,start:0,indentTo:0},lastType:null,tokenize:f}},token:function(b,c){b.sol()&&"number"!=typeof c.ctx.indentTo&&(c.ctx.indentTo=c.ctx.start+1);d=null;var a=c.tokenize(b,c);"ws"!=d&&(null==c.ctx.indentTo?"symbol"==d&&h.test(b.current())?c.ctx.indentTo=
c.ctx.start+e.indentUnit:c.ctx.indentTo="next":"next"==c.ctx.indentTo&&(c.ctx.indentTo=b.column()),c.lastType=d);"open"==d?c.ctx={prev:c.ctx,start:b.column(),indentTo:null}:"close"==d&&(c.ctx=c.ctx.prev||c.ctx);return a},indent:function(b,c){var a=b.ctx.indentTo;return"number"==typeof a?a:b.ctx.start+1},closeBrackets:{pairs:'()[]{}""'},lineComment:";;",blockCommentStart:"#|",blockCommentEnd:"|#"}});e.defineMIME("text/x-common-lisp","commonlisp")});;
;/* module-key = 'com.atlassian.stash.stash-highlight-plugin:css', location = '/static/bower/CodeMirror/mode/css/css.js' */
(function(k){"object"==typeof exports&&"object"==typeof module?k(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],k):k(CodeMirror)})(function(k){function l(d){for(var e={},f=0;f<d.length;++f)e[d[f]]=!0;return e}function m(d,e){for(var f=!1,k;null!=(k=d.next());){if(f&&"/"==k){e.tokenize=null;break}f="*"==k}return["comment","comment"]}k.defineMode("css",function(d,e){function f(a,c){H=c;return a}function l(a,c){var b=a.next();if(w[b]){var d=w[b](a,
c);if(!1!==d)return d}if("@"==b)return a.eatWhile(/[\w\\\-]/),f("def",a.current());if("\x3d"==b||("~"==b||"|"==b)&&a.eat("\x3d"))return f(null,"compare");if('"'==b||"'"==b)return c.tokenize=m(b),c.tokenize(a,c);if("#"==b)return a.eatWhile(/[\w\\\-]/),f("atom","hash");if("!"==b)return a.match(/^\s*\w*/),f("keyword","important");if(/\d/.test(b)||"."==b&&a.eat(/\d/))return a.eatWhile(/[\w.%]/),f("number","unit");if("-"===b){if(/[\d.]/.test(a.peek()))return a.eatWhile(/[\w.%]/),f("number","unit");if(a.match(/^-[\w\\\-]+/))return a.eatWhile(/[\w\\\-]/),
a.match(/^\s*:/,!1)?f("variable-2","variable-definition"):f("variable-2","variable");if(a.match(/^\w+-/))return f("meta","meta")}else return/[,+>*\/]/.test(b)?f(null,"select-op"):"."==b&&a.match(/^-?[_a-z][_a-z0-9-]*/i)?f("qualifier","qualifier"):/[:;{}\[\]\(\)]/.test(b)?f(null,b):"u"==b&&a.match(/rl(-prefix)?\(/)||"d"==b&&a.match("omain(")||"r"==b&&a.match("egexp(")?(a.backUp(1),c.tokenize=r,f("property","word")):/[\w\\\-]/.test(b)?(a.eatWhile(/[\w\\\-]/),f("property","word")):f(null,null)}function m(a){return function(c,
b){for(var d=!1,e;null!=(e=c.next());){if(e==a&&!d){")"==a&&c.backUp(1);break}d=!d&&"\\"==e}if(e==a||!d&&")"!=a)b.tokenize=null;return f("string","string")}}function r(a,c){a.next();a.match(/\s*[\"\')]/,!1)?c.tokenize=null:c.tokenize=m(")");return f(null,"(")}function t(a,c,b){this.type=a;this.indent=c;this.prev=b}function h(a,c,b){a.context=new t(b,c.indentation()+v,a.context);return b}function n(a){a.context=a.context.prev;return a.context.type}function q(a,c,b,d){for(d=d||1;0<d;d--)b.context=b.context.prev;
return p[b.context.type](a,c,b)}function u(a){a=a.current().toLowerCase();g=C.hasOwnProperty(a)?"atom":G.hasOwnProperty(a)?"keyword":"variable"}e.propertyKeywords||(e=k.resolveMode("text/css"));var v=d.indentUnit,w=e.tokenHooks,A=e.documentTypes||{},B=e.mediaTypes||{},D=e.mediaFeatures||{},y=e.propertyKeywords||{},z=e.nonStandardPropertyKeywords||{},E=e.fontProperties||{},F=e.counterDescriptors||{},G=e.colorKeywords||{},C=e.valueKeywords||{},x=e.allowNested,H,g,p={top:function(a,c,b){if("{"==a)return h(b,
c,"block");if("}"==a&&b.context.prev)return n(b);if(/@(media|supports|(-moz-)?document)/.test(a))return h(b,c,"atBlock");if(/@(font-face|counter-style)/.test(a))return b.stateArg=a,"restricted_atBlock_before";if(/^@(-(moz|ms|o|webkit)-)?keyframes$/.test(a))return"keyframes";if(a&&"@"==a.charAt(0))return h(b,c,"at");if("hash"==a)g="builtin";else if("word"==a)g="tag";else{if("variable-definition"==a)return"maybeprop";if("interpolation"==a)return h(b,c,"interpolation");if(":"==a)return"pseudo";if(x&&
"("==a)return h(b,c,"parens")}return b.context.type},block:function(a,c,b){if("word"==a){a=c.current().toLowerCase();if(y.hasOwnProperty(a))return g="property","maybeprop";if(z.hasOwnProperty(a))return g="string-2","maybeprop";if(x)return g=c.match(/^\s*:(?:\s|$)/,!1)?"property":"tag","block";g+=" error";return"maybeprop"}if("meta"==a)return"block";if(x||"hash"!=a&&"qualifier"!=a)return p.top(a,c,b);g="error";return"block"},maybeprop:function(a,c,b){return":"==a?h(b,c,"prop"):p[b.context.type](a,
c,b)},prop:function(a,c,b){if(";"==a)return n(b);if("{"==a&&x)return h(b,c,"propBlock");if("}"==a||"{"==a)return q(a,c,b);if("("==a)return h(b,c,"parens");if("hash"==a&&!/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/.test(c.current()))g+=" error";else if("word"==a)u(c);else if("interpolation"==a)return h(b,c,"interpolation");return"prop"},propBlock:function(a,c,b){return"}"==a?n(b):"word"==a?(g="property","maybeprop"):b.context.type},parens:function(a,c,b){if("{"==a||"}"==a)return q(a,c,b);if(")"==a)return n(b);
if("("==a)return h(b,c,"parens");if("interpolation"==a)return h(b,c,"interpolation");"word"==a&&u(c);return"parens"},pseudo:function(a,c,b){return"word"==a?(g="variable-3",b.context.type):p[b.context.type](a,c,b)},atBlock:function(a,c,b){if("("==a)return h(b,c,"atBlock_parens");if("}"==a)return q(a,c,b);if("{"==a)return n(b)&&h(b,c,x?"block":"top");"word"==a&&(a=c.current().toLowerCase(),g="only"==a||"not"==a||"and"==a||"or"==a?"keyword":A.hasOwnProperty(a)?"tag":B.hasOwnProperty(a)?"attribute":D.hasOwnProperty(a)?
"property":y.hasOwnProperty(a)?"property":z.hasOwnProperty(a)?"string-2":C.hasOwnProperty(a)?"atom":"error");return b.context.type},atBlock_parens:function(a,c,b){return")"==a?n(b):"{"==a||"}"==a?q(a,c,b,2):p.atBlock(a,c,b)},restricted_atBlock_before:function(a,c,b){return"{"==a?h(b,c,"restricted_atBlock"):"word"==a&&"@counter-style"==b.stateArg?(g="variable","restricted_atBlock_before"):p[b.context.type](a,c,b)},restricted_atBlock:function(a,c,b){return"}"==a?(b.stateArg=null,n(b)):"word"==a?(g=
"@font-face"==b.stateArg&&!E.hasOwnProperty(c.current().toLowerCase())||"@counter-style"==b.stateArg&&!F.hasOwnProperty(c.current().toLowerCase())?"error":"property","maybeprop"):"restricted_atBlock"},keyframes:function(a,c,b){return"word"==a?(g="variable","keyframes"):"{"==a?h(b,c,"top"):p[b.context.type](a,c,b)},at:function(a,c,b){if(";"==a)return n(b);if("{"==a||"}"==a)return q(a,c,b);"word"==a?g="tag":"hash"==a&&(g="builtin");return"at"},interpolation:function(a,c,b){if("}"==a)return n(b);if("{"==
a||";"==a)return q(a,c,b);"word"==a?g="variable":"variable"!=a&&"("!=a&&")"!=a&&(g="error");return"interpolation"}};return{startState:function(a){return{tokenize:null,state:"top",stateArg:null,context:new t("top",a||0,null)}},token:function(a,c){if(!c.tokenize&&a.eatSpace())return null;var b=(c.tokenize||l)(a,c);b&&"object"==typeof b&&(H=b[1],b=b[0]);g=b;c.state=p[c.state](H,a,c);return g},indent:function(a,c){var b=a.context,d=c&&c.charAt(0),e=b.indent;"prop"!=b.type||"}"!=d&&")"!=d||(b=b.prev);
!b.prev||("}"!=d||"block"!=b.type&&"top"!=b.type&&"interpolation"!=b.type&&"restricted_atBlock"!=b.type)&&(")"!=d||"parens"!=b.type&&"atBlock_parens"!=b.type)&&("{"!=d||"at"!=b.type&&"atBlock"!=b.type)||(e=b.indent-v);return e},electricChars:"}",blockCommentStart:"/*",blockCommentEnd:"*/",fold:"brace"}});var r=["domain","regexp","url","url-prefix"],I=l(r),y="all aural braille handheld print projection screen tty tv embossed".split(" "),t=l(y),z="width min-width max-width height min-height max-height device-width min-device-width max-device-width device-height min-device-height max-device-height aspect-ratio min-aspect-ratio max-aspect-ratio device-aspect-ratio min-device-aspect-ratio max-device-aspect-ratio color min-color max-color color-index min-color-index max-color-index monochrome min-monochrome max-monochrome resolution min-resolution max-resolution scan grid".split(" "),
u=l(z),E="align-content align-items align-self alignment-adjust alignment-baseline anchor-point animation animation-delay animation-direction animation-duration animation-fill-mode animation-iteration-count animation-name animation-play-state animation-timing-function appearance azimuth backface-visibility background background-attachment background-clip background-color background-image background-origin background-position background-repeat background-size baseline-shift binding bleed bookmark-label bookmark-level bookmark-state bookmark-target border border-bottom border-bottom-color border-bottom-left-radius border-bottom-right-radius border-bottom-style border-bottom-width border-collapse border-color border-image border-image-outset border-image-repeat border-image-slice border-image-source border-image-width border-left border-left-color border-left-style border-left-width border-radius border-right border-right-color border-right-style border-right-width border-spacing border-style border-top border-top-color border-top-left-radius border-top-right-radius border-top-style border-top-width border-width bottom box-decoration-break box-shadow box-sizing break-after break-before break-inside caption-side clear clip color color-profile column-count column-fill column-gap column-rule column-rule-color column-rule-style column-rule-width column-span column-width columns content counter-increment counter-reset crop cue cue-after cue-before cursor direction display dominant-baseline drop-initial-after-adjust drop-initial-after-align drop-initial-before-adjust drop-initial-before-align drop-initial-size drop-initial-value elevation empty-cells fit fit-position flex flex-basis flex-direction flex-flow flex-grow flex-shrink flex-wrap float float-offset flow-from flow-into font font-feature-settings font-family font-kerning font-language-override font-size font-size-adjust font-stretch font-style font-synthesis font-variant font-variant-alternates font-variant-caps font-variant-east-asian font-variant-ligatures font-variant-numeric font-variant-position font-weight grid grid-area grid-auto-columns grid-auto-flow grid-auto-position grid-auto-rows grid-column grid-column-end grid-column-start grid-row grid-row-end grid-row-start grid-template grid-template-areas grid-template-columns grid-template-rows hanging-punctuation height hyphens icon image-orientation image-rendering image-resolution inline-box-align justify-content left letter-spacing line-break line-height line-stacking line-stacking-ruby line-stacking-shift line-stacking-strategy list-style list-style-image list-style-position list-style-type margin margin-bottom margin-left margin-right margin-top marker-offset marks marquee-direction marquee-loop marquee-play-count marquee-speed marquee-style max-height max-width min-height min-width move-to nav-down nav-index nav-left nav-right nav-up object-fit object-position opacity order orphans outline outline-color outline-offset outline-style outline-width overflow overflow-style overflow-wrap overflow-x overflow-y padding padding-bottom padding-left padding-right padding-top page page-break-after page-break-before page-break-inside page-policy pause pause-after pause-before perspective perspective-origin pitch pitch-range play-during position presentation-level punctuation-trim quotes region-break-after region-break-before region-break-inside region-fragment rendering-intent resize rest rest-after rest-before richness right rotation rotation-point ruby-align ruby-overhang ruby-position ruby-span shape-image-threshold shape-inside shape-margin shape-outside size speak speak-as speak-header speak-numeral speak-punctuation speech-rate stress string-set tab-size table-layout target target-name target-new target-position text-align text-align-last text-decoration text-decoration-color text-decoration-line text-decoration-skip text-decoration-style text-emphasis text-emphasis-color text-emphasis-position text-emphasis-style text-height text-indent text-justify text-outline text-overflow text-shadow text-size-adjust text-space-collapse text-transform text-underline-position text-wrap top transform transform-origin transform-style transition transition-delay transition-duration transition-property transition-timing-function unicode-bidi vertical-align visibility voice-balance voice-duration voice-family voice-pitch voice-range voice-rate voice-stress voice-volume volume white-space widows width word-break word-spacing word-wrap z-index clip-path clip-rule mask enable-background filter flood-color flood-opacity lighting-color stop-color stop-opacity pointer-events color-interpolation color-interpolation-filters color-rendering fill fill-opacity fill-rule image-rendering marker marker-end marker-mid marker-start shape-rendering stroke stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-rendering baseline-shift dominant-baseline glyph-orientation-horizontal glyph-orientation-vertical text-anchor writing-mode".split(" "),
v=l(E),F="scrollbar-arrow-color scrollbar-base-color scrollbar-dark-shadow-color scrollbar-face-color scrollbar-highlight-color scrollbar-shadow-color scrollbar-3d-light-color scrollbar-track-color shape-inside searchfield-cancel-button searchfield-decoration searchfield-results-button searchfield-results-decoration zoom".split(" "),w=l(F),A=l("font-family src unicode-range font-variant font-feature-settings font-stretch font-weight font-style".split(" ")),J=l("additive-symbols fallback negative pad prefix range speak-as suffix symbols system".split(" ")),
G="aliceblue antiquewhite aqua aquamarine azure beige bisque black blanchedalmond blue blueviolet brown burlywood cadetblue chartreuse chocolate coral cornflowerblue cornsilk crimson cyan darkblue darkcyan darkgoldenrod darkgray darkgreen darkkhaki darkmagenta darkolivegreen darkorange darkorchid darkred darksalmon darkseagreen darkslateblue darkslategray darkturquoise darkviolet deeppink deepskyblue dimgray dodgerblue firebrick floralwhite forestgreen fuchsia gainsboro ghostwhite gold goldenrod gray grey green greenyellow honeydew hotpink indianred indigo ivory khaki lavender lavenderblush lawngreen lemonchiffon lightblue lightcoral lightcyan lightgoldenrodyellow lightgray lightgreen lightpink lightsalmon lightseagreen lightskyblue lightslategray lightsteelblue lightyellow lime limegreen linen magenta maroon mediumaquamarine mediumblue mediumorchid mediumpurple mediumseagreen mediumslateblue mediumspringgreen mediumturquoise mediumvioletred midnightblue mintcream mistyrose moccasin navajowhite navy oldlace olive olivedrab orange orangered orchid palegoldenrod palegreen paleturquoise palevioletred papayawhip peachpuff peru pink plum powderblue purple rebeccapurple red rosybrown royalblue saddlebrown salmon sandybrown seagreen seashell sienna silver skyblue slateblue slategray snow springgreen steelblue tan teal thistle tomato turquoise violet wheat white whitesmoke yellow yellowgreen".split(" "),
B=l(G),C="above absolute activeborder additive activecaption afar after-white-space ahead alias all all-scroll alphabetic alternate always amharic amharic-abegede antialiased appworkspace arabic-indic armenian asterisks attr auto avoid avoid-column avoid-page avoid-region background backwards baseline below bidi-override binary bengali blink block block-axis bold bolder border border-box both bottom break break-all break-word bullets button button-bevel buttonface buttonhighlight buttonshadow buttontext calc cambodian capitalize caps-lock-indicator caption captiontext caret cell center checkbox circle cjk-decimal cjk-earthly-branch cjk-heavenly-stem cjk-ideographic clear clip close-quote col-resize collapse column compact condensed contain content content-box context-menu continuous copy counter counters cover crop cross crosshair currentcolor cursive cyclic dashed decimal decimal-leading-zero default default-button destination-atop destination-in destination-out destination-over devanagari disc discard disclosure-closed disclosure-open document dot-dash dot-dot-dash dotted double down e-resize ease ease-in ease-in-out ease-out element ellipse ellipsis embed end ethiopic ethiopic-abegede ethiopic-abegede-am-et ethiopic-abegede-gez ethiopic-abegede-ti-er ethiopic-abegede-ti-et ethiopic-halehame-aa-er ethiopic-halehame-aa-et ethiopic-halehame-am-et ethiopic-halehame-gez ethiopic-halehame-om-et ethiopic-halehame-sid-et ethiopic-halehame-so-et ethiopic-halehame-ti-er ethiopic-halehame-ti-et ethiopic-halehame-tig ethiopic-numeric ew-resize expanded extends extra-condensed extra-expanded fantasy fast fill fixed flat flex footnotes forwards from geometricPrecision georgian graytext groove gujarati gurmukhi hand hangul hangul-consonant hebrew help hidden hide higher highlight highlighttext hiragana hiragana-iroha horizontal hsl hsla icon ignore inactiveborder inactivecaption inactivecaptiontext infinite infobackground infotext inherit initial inline inline-axis inline-block inline-flex inline-table inset inside intrinsic invert italic japanese-formal japanese-informal justify kannada katakana katakana-iroha keep-all khmer korean-hangul-formal korean-hanja-formal korean-hanja-informal landscape lao large larger left level lighter line-through linear linear-gradient lines list-item listbox listitem local logical loud lower lower-alpha lower-armenian lower-greek lower-hexadecimal lower-latin lower-norwegian lower-roman lowercase ltr malayalam match matrix matrix3d media-controls-background media-current-time-display media-fullscreen-button media-mute-button media-play-button media-return-to-realtime-button media-rewind-button media-seek-back-button media-seek-forward-button media-slider media-sliderthumb media-time-remaining-display media-volume-slider media-volume-slider-container media-volume-sliderthumb medium menu menulist menulist-button menulist-text menulist-textfield menutext message-box middle min-intrinsic mix mongolian monospace move multiple myanmar n-resize narrower ne-resize nesw-resize no-close-quote no-drop no-open-quote no-repeat none normal not-allowed nowrap ns-resize numbers numeric nw-resize nwse-resize oblique octal open-quote optimizeLegibility optimizeSpeed oriya oromo outset outside outside-shape overlay overline padding padding-box painted page paused persian perspective plus-darker plus-lighter pointer polygon portrait pre pre-line pre-wrap preserve-3d progress push-button radial-gradient radio read-only read-write read-write-plaintext-only rectangle region relative repeat repeating-linear-gradient repeating-radial-gradient repeat-x repeat-y reset reverse rgb rgba ridge right rotate rotate3d rotateX rotateY rotateZ round row-resize rtl run-in running s-resize sans-serif scale scale3d scaleX scaleY scaleZ scroll scrollbar se-resize searchfield searchfield-cancel-button searchfield-decoration searchfield-results-button searchfield-results-decoration semi-condensed semi-expanded separate serif show sidama simp-chinese-formal simp-chinese-informal single skew skewX skewY skip-white-space slide slider-horizontal slider-vertical sliderthumb-horizontal sliderthumb-vertical slow small small-caps small-caption smaller solid somali source-atop source-in source-out source-over space spell-out square square-button start static status-bar stretch stroke sub subpixel-antialiased super sw-resize symbolic symbols table table-caption table-cell table-column table-column-group table-footer-group table-header-group table-row table-row-group tamil telugu text text-bottom text-top textarea textfield thai thick thin threeddarkshadow threedface threedhighlight threedlightshadow threedshadow tibetan tigre tigrinya-er tigrinya-er-abegede tigrinya-et tigrinya-et-abegede to top trad-chinese-formal trad-chinese-informal translate translate3d translateX translateY translateZ transparent ultra-condensed ultra-expanded underline up upper-alpha upper-armenian upper-greek upper-hexadecimal upper-latin upper-norwegian upper-roman uppercase urdu url var vertical vertical-text visible visibleFill visiblePainted visibleStroke visual w-resize wait wave wider window windowframe windowtext words x-large x-small xor xx-large xx-small".split(" "),
D=l(C),r=r.concat(y).concat(z).concat(E).concat(F).concat(G).concat(C);k.registerHelper("hintWords","css",r);k.defineMIME("text/css",{documentTypes:I,mediaTypes:t,mediaFeatures:u,propertyKeywords:v,nonStandardPropertyKeywords:w,fontProperties:A,counterDescriptors:J,colorKeywords:B,valueKeywords:D,tokenHooks:{"/":function(d,e){if(!d.eat("*"))return!1;e.tokenize=m;return m(d,e)}},name:"css"});k.defineMIME("text/x-scss",{mediaTypes:t,mediaFeatures:u,propertyKeywords:v,nonStandardPropertyKeywords:w,colorKeywords:B,
valueKeywords:D,fontProperties:A,allowNested:!0,tokenHooks:{"/":function(d,e){return d.eat("/")?(d.skipToEnd(),["comment","comment"]):d.eat("*")?(e.tokenize=m,m(d,e)):["operator","operator"]},":":function(d){return d.match(/\s*\{/)?[null,"{"]:!1},$:function(d){d.match(/^[\w-]+/);return d.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"]},"#":function(d){return d.eat("{")?[null,"interpolation"]:!1}},name:"css",helperType:"scss"});k.defineMIME("text/x-less",{mediaTypes:t,
mediaFeatures:u,propertyKeywords:v,nonStandardPropertyKeywords:w,colorKeywords:B,valueKeywords:D,fontProperties:A,allowNested:!0,tokenHooks:{"/":function(d,e){return d.eat("/")?(d.skipToEnd(),["comment","comment"]):d.eat("*")?(e.tokenize=m,m(d,e)):["operator","operator"]},"@":function(d){if(d.eat("{"))return[null,"interpolation"];if(d.match(/^(charset|document|font-face|import|(-(moz|ms|o|webkit)-)?keyframes|media|namespace|page|supports)\b/,!1))return!1;d.eatWhile(/[\w\\\-]/);return d.match(/^\s*:/,
!1)?["variable-2","variable-definition"]:["variable-2","variable"]},"\x26":function(){return["atom","atom"]}},name:"css",helperType:"less"})});;
;/* module-key = 'com.atlassian.stash.stash-highlight-plugin:javascript', location = '/static/bower/CodeMirror/mode/javascript/javascript.js' */
(function(p){"object"==typeof exports&&"object"==typeof module?p(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],p):p(CodeMirror)})(function(p){p.defineMode("javascript",function(oa,t){function q(a,c,e){E=a;I=e;return c}function w(a,c){var e=a.next();if('"'==e||"'"==e)return c.tokenize=pa(e),c.tokenize(a,c);if("."==e&&a.match(/^\d+(?:[eE][+\-]?\d+)?/))return q("number","number");if("."==e&&a.match(".."))return q("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(e))return q(e);
if("\x3d"==e&&a.eat("\x3e"))return q("\x3d\x3e","operator");if("0"==e&&a.eat(/x/i))return a.eatWhile(/[\da-f]/i),q("number","number");if(/\d/.test(e))return a.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/),q("number","number");if("/"==e){if(a.eat("*"))return c.tokenize=J,J(a,c);if(a.eat("/"))return a.skipToEnd(),q("comment","comment");if("operator"==c.lastType||"keyword c"==c.lastType||"sof"==c.lastType||/^[\[{}\(,;:]$/.test(c.lastType)){a:for(var e=!1,d,b=!1;null!=(d=a.next());){if(!e){if("/"==d&&!b)break a;
"["==d?b=!0:b&&"]"==d&&(b=!1)}e=!e&&"\\"==d}a.match(/^\b(([gimyu])(?![gimyu]*\2))+\b/);return q("regexp","string-2")}a.eatWhile(K);return q("operator","operator",a.current())}if("`"==e)return c.tokenize=Q,Q(a,c);if("#"==e)return a.skipToEnd(),q("error","error");if(K.test(e))return a.eatWhile(K),q("operator","operator",a.current());if(R.test(e))return a.eatWhile(R),e=a.current(),(d=ba.propertyIsEnumerable(e)&&ba[e])&&"."!=c.lastType?q(d.type,d.style,e):q("variable","variable",e)}function pa(a){return function(c,
e){var d=!1,b;if(L&&"@"==c.peek()&&c.match(qa))return e.tokenize=w,q("jsonld-keyword","meta");for(;null!=(b=c.next())&&(b!=a||d);)d=!d&&"\\"==b;d||(e.tokenize=w);return q("string","string")}}function J(a,c){for(var e=!1,d;d=a.next();){if("/"==d&&e){c.tokenize=w;break}e="*"==d}return q("comment","comment")}function Q(a,c){for(var e=!1,d;null!=(d=a.next());){if(!e&&("`"==d||"$"==d&&a.eat("{"))){c.tokenize=w;break}e=!e&&"\\"==d}return q("quasi","string-2",a.current())}function S(a,c){c.fatArrowAt&&(c.fatArrowAt=
null);var e=a.string.indexOf("\x3d\x3e",a.start);if(!(0>e)){for(var d=0,b=!1,e=e-1;0<=e;--e){var f=a.string.charAt(e),g="([{}])".indexOf(f);if(0<=g&&3>g){if(!d){++e;break}if(0==--d)break}else if(3<=g&&6>g)++d;else if(R.test(f))b=!0;else{if(/["'\/]/.test(f))return;if(b&&!d){++e;break}}}b&&!d&&(c.fatArrowAt=e)}}function ca(a,c,b,d,f,h){this.indented=a;this.column=c;this.type=b;this.prev=f;this.info=h;null!=d&&(this.align=d)}function g(){for(var a=arguments.length-1;0<=a;a--)f.cc.push(arguments[a])}
function b(){g.apply(null,arguments);return!0}function x(a){function c(c){for(;c;c=c.next)if(c.name==a)return!0;return!1}var b=f.state;b.context?(f.marked="def",c(b.localVars)||(b.localVars={name:a,next:b.localVars})):!c(b.globalVars)&&t.globalVars&&(b.globalVars={name:a,next:b.globalVars})}function y(){f.state.context={prev:f.state.context,vars:f.state.localVars};f.state.localVars=ra}function z(){f.state.localVars=f.state.context.vars;f.state.context=f.state.context.prev}function l(a,c){var b=function(){var b=
f.state,e=b.indented;if("stat"==b.lexical.type)e=b.lexical.indented;else for(var h=b.lexical;h&&")"==h.type&&h.align;h=h.prev)e=h.indented;b.lexical=new ca(e,f.stream.column(),a,null,b.lexical,c)};b.lex=!0;return b}function k(){var a=f.state;a.lexical.prev&&(")"==a.lexical.type&&(a.indented=a.lexical.indented),a.lexical=a.lexical.prev)}function m(a){function c(e){return e==a?b():";"==a?g():b(c)}return c}function r(a,c){return"var"==a?b(l("vardef",c.length),T,m(";"),k):"keyword a"==a?b(l("form"),n,
r,k):"keyword b"==a?b(l("form"),r,k):"{"==a?b(l("}"),U,k):";"==a?b():"if"==a?("else"==f.state.lexical.info&&f.state.cc[f.state.cc.length-1]==k&&f.state.cc.pop()(),b(l("form"),n,r,k,da)):"function"==a?b(v):"for"==a?b(l("form"),ea,r,k):"variable"==a?b(l("stat"),sa):"switch"==a?b(l("form"),n,l("}","switch"),m("{"),U,k,k):"case"==a?b(n,m(":")):"default"==a?b(m(":")):"catch"==a?b(l("form"),y,m("("),V,m(")"),r,k,z):"module"==a?b(l("form"),y,ta,z,k):"class"==a?b(l("form"),ua,k):"export"==a?b(l("form"),va,
k):"import"==a?b(l("form"),wa,k):g(l("stat"),n,m(";"),k)}function n(a){return fa(a,!1)}function u(a){return fa(a,!0)}function fa(a,c){if(f.state.fatArrowAt==f.stream.start){var e=c?ga:ha;if("("==a)return b(y,l(")"),F(A,")"),k,m("\x3d\x3e"),e,z);if("variable"==a)return g(y,A,m("\x3d\x3e"),e,z)}e=c?W:M;return xa.hasOwnProperty(a)?b(e):"function"==a?b(v,e):"keyword c"==a?b(c?ia:X):"("==a?b(l(")"),X,N,m(")"),k,e):"operator"==a||"spread"==a?b(c?u:n):"["==a?b(l("]"),ya,k,e):"{"==a?G(za,"}",null,e):"quasi"==
a?g(O,e):b()}function X(a){return a.match(/[;\}\)\],]/)?g():g(n)}function ia(a){return a.match(/[;\}\)\],]/)?g():g(u)}function M(a,c){return","==a?b(n):W(a,c,!1)}function W(a,c,e){var d=0==e?M:W,f=0==e?n:u;if("\x3d\x3e"==a)return b(y,e?ga:ha,z);if("operator"==a)return/\+\+|--/.test(c)?b(d):"?"==c?b(n,m(":"),f):b(f);if("quasi"==a)return g(O,d);if(";"!=a){if("("==a)return G(u,")","call",d);if("."==a)return b(Aa,d);if("["==a)return b(l("]"),X,m("]"),k,d)}}function O(a,c){return"quasi"!=a?g():"${"!=c.slice(c.length-
2)?b(O):b(n,Ba)}function Ba(a){if("}"==a)return f.marked="string-2",f.state.tokenize=Q,b(O)}function ha(a){S(f.stream,f.state);return g("{"==a?r:n)}function ga(a){S(f.stream,f.state);return g("{"==a?r:u)}function sa(a){return":"==a?b(k,r):g(M,m(";"),k)}function Aa(a){if("variable"==a)return f.marked="property",b()}function za(a,c){if("variable"==a||"keyword"==f.style)return f.marked="property","get"==c||"set"==c?b(Ca):b(H);if("number"==a||"string"==a)return f.marked=L?"property":f.style+" property",
b(H);if("jsonld-keyword"==a)return b(H);if("["==a)return b(n,m("]"),H)}function Ca(a){if("variable"!=a)return g(H);f.marked="property";return b(v)}function H(a){if(":"==a)return b(u);if("("==a)return g(v)}function F(a,c){function e(d){return","==d?(d=f.state.lexical,"call"==d.info&&(d.pos=(d.pos||0)+1),b(a,e)):d==c?b():b(m(c))}return function(d){return d==c?b():g(a,e)}}function G(a,c,e){for(var d=3;d<arguments.length;d++)f.cc.push(arguments[d]);return b(l(c,e),F(a,c),k)}function U(a){return"}"==a?
b():g(r,U)}function ja(a){if(ka&&":"==a)return b(Da)}function Da(a){if("variable"==a)return f.marked="variable-3",b()}function T(){return g(A,ja,Y,Ea)}function A(a,c){if("variable"==a)return x(c),b();if("["==a)return G(A,"]");if("{"==a)return G(Fa,"}")}function Fa(a,c){if("variable"==a&&!f.stream.match(/^\s*:/,!1))return x(c),b(Y);"variable"==a&&(f.marked="property");return b(m(":"),A,Y)}function Y(a,c){if("\x3d"==c)return b(u)}function Ea(a){if(","==a)return b(T)}function da(a,c){if("keyword b"==
a&&"else"==c)return b(l("form","else"),r,k)}function ea(a){if("("==a)return b(l(")"),Ga,m(")"),k)}function Ga(a){return"var"==a?b(T,m(";"),P):";"==a?b(P):"variable"==a?b(Ha):g(n,m(";"),P)}function Ha(a,c){return"in"==c||"of"==c?(f.marked="keyword",b(n)):b(M,P)}function P(a,c){return";"==a?b(la):"in"==c||"of"==c?(f.marked="keyword",b(n)):g(n,m(";"),la)}function la(a){")"!=a&&b(n)}function v(a,c){if("*"==c)return f.marked="keyword",b(v);if("variable"==a)return x(c),b(v);if("("==a)return b(y,l(")"),
F(V,")"),k,r,z)}function V(a){return"spread"==a?b(V):g(A,ja)}function ua(a,c){if("variable"==a)return x(c),b(ma)}function ma(a,c){if("extends"==c)return b(n,ma);if("{"==a)return b(l("}"),B,k)}function B(a,c){if("variable"==a||"keyword"==f.style){if("static"==c)return f.marked="keyword",b(B);f.marked="property";return"get"==c||"set"==c?b(Ia,v,B):b(v,B)}if("*"==c)return f.marked="keyword",b(B);if(";"==a)return b(B);if("}"==a)return b()}function Ia(a){if("variable"!=a)return g();f.marked="property";
return b()}function ta(a,c){if("string"==a)return b(r);if("variable"==a)return x(c),b(Z)}function va(a,c){return"*"==c?(f.marked="keyword",b(Z,m(";"))):"default"==c?(f.marked="keyword",b(n,m(";"))):g(r)}function wa(a){return"string"==a?b():g(aa,Z)}function aa(a,c){if("{"==a)return G(aa,"}");"variable"==a&&x(c);"*"==c&&(f.marked="keyword");return b(Ja)}function Ja(a,c){if("as"==c)return f.marked="keyword",b(aa)}function Z(a,c){if("from"==c)return f.marked="keyword",b(n)}function ya(a){return"]"==a?
b():g(u,Ka)}function Ka(a){return"for"==a?g(N,m("]")):","==a?b(F(ia,"]")):g(F(u,"]"))}function N(a){if("for"==a)return b(ea,N);if("if"==a)return b(n,N)}var C=oa.indentUnit,na=t.statementIndent,L=t.jsonld,D=t.json||L,ka=t.typescript,R=t.wordCharacters||/[\w$\xa1-\uffff]/,ba=function(){function a(a){return{type:a,style:"keyword"}}var c=a("keyword a"),b=a("keyword b"),d=a("keyword c"),f=a("operator"),h={type:"atom",style:"atom"},c={"if":a("if"),"while":c,"with":c,"else":b,"do":b,"try":b,"finally":b,
"return":d,"break":d,"continue":d,"new":d,"delete":d,"throw":d,"debugger":d,"var":a("var"),"const":a("var"),let:a("var"),"function":a("function"),"catch":a("catch"),"for":a("for"),"switch":a("switch"),"case":a("case"),"default":a("default"),"in":f,"typeof":f,"instanceof":f,"true":h,"false":h,"null":h,undefined:h,NaN:h,Infinity:h,"this":a("this"),module:a("module"),"class":a("class"),"super":a("atom"),yield:d,"export":a("export"),"import":a("import"),"extends":d};if(ka){var b={type:"variable",style:"variable-3"},
b={"interface":a("interface"),"extends":a("extends"),constructor:a("constructor"),"public":a("public"),"private":a("private"),"protected":a("protected"),"static":a("static"),string:b,number:b,bool:b,any:b},g;for(g in b)c[g]=b[g]}return c}(),K=/[+\-*&%=<>!?|~^]/,qa=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/,E,I,xa={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,"this":!0,"jsonld-keyword":!0},f={state:null,column:null,marked:null,cc:null},ra={name:"this",
next:{name:"arguments"}};k.lex=!0;return{startState:function(a){a={tokenize:w,lastType:"sof",cc:[],lexical:new ca((a||0)-C,0,"block",!1),localVars:t.localVars,context:t.localVars&&{vars:t.localVars},indented:0};t.globalVars&&"object"==typeof t.globalVars&&(a.globalVars=t.globalVars);return a},token:function(a,b){a.sol()&&(b.lexical.hasOwnProperty("align")||(b.lexical.align=!1),b.indented=a.indentation(),S(a,b));if(b.tokenize!=J&&a.eatSpace())return null;var e=b.tokenize(a,b);if("comment"==E)return e;
b.lastType="operator"!=E||"++"!=I&&"--"!=I?E:"incdec";a:{var d=E,g=I,h=b.cc;f.state=b;f.stream=a;f.marked=null;f.cc=h;f.style=e;b.lexical.hasOwnProperty("align")||(b.lexical.align=!0);for(;;)if((h.length?h.pop():D?n:r)(d,g)){for(;h.length&&h[h.length-1].lex;)h.pop()();if(f.marked){e=f.marked;break a}if(d="variable"==d)b:{for(d=b.localVars;d;d=d.next)if(d.name==g){d=!0;break b}for(h=b.context;h;h=h.prev)for(d=h.vars;d;d=d.next)if(d.name==g){d=!0;break b}d=void 0}if(d){e="variable-2";break a}break a}}return e},
indent:function(a,b){if(a.tokenize==J)return p.Pass;if(a.tokenize!=w)return 0;var e=b&&b.charAt(0),d=a.lexical;if(!/^\s*else\b/.test(b))for(var f=a.cc.length-1;0<=f;--f){var g=a.cc[f];if(g==k)d=d.prev;else if(g!=da)break}"stat"==d.type&&"}"==e&&(d=d.prev);na&&")"==d.type&&"stat"==d.prev.type&&(d=d.prev);f=d.type;g=e==f;return"vardef"==f?d.indented+("operator"==a.lastType||","==a.lastType?d.info+1:0):"form"==f&&"{"==e?d.indented:"form"==f?d.indented+C:"stat"==f?(e=d.indented,d="operator"==a.lastType||
","==a.lastType||K.test(b.charAt(0))||/[,.]/.test(b.charAt(0)),e+(d?na||C:0)):"switch"!=d.info||g||0==t.doubleIndentSwitch?d.align?d.column+(g?0:1):d.indented+(g?0:C):d.indented+(/^(?:case|default)\b/.test(b)?C:2*C)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:D?null:"/*",blockCommentEnd:D?null:"*/",lineComment:D?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:D?"json":"javascript",jsonldMode:L,jsonMode:D}});p.registerHelper("wordChars","javascript",/[\w$]/);
p.defineMIME("text/javascript","javascript");p.defineMIME("text/ecmascript","javascript");p.defineMIME("application/javascript","javascript");p.defineMIME("application/x-javascript","javascript");p.defineMIME("application/ecmascript","javascript");p.defineMIME("application/json",{name:"javascript",json:!0});p.defineMIME("application/x-json",{name:"javascript",json:!0});p.defineMIME("application/ld+json",{name:"javascript",jsonld:!0});p.defineMIME("text/typescript",{name:"javascript",typescript:!0});
p.defineMIME("application/typescript",{name:"javascript",typescript:!0})});;
;/* module-key = 'com.atlassian.stash.stash-highlight-plugin:xml', location = '/static/bower/CodeMirror/mode/xml/xml.js' */
(function(f){"object"==typeof exports&&"object"==typeof module?f(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],f):f(CodeMirror)})(function(f){f.defineMode("xml",function(B,h){function k(a,c){function b(b){c.tokenize=b;return b(a,c)}var d=a.next();if("\x3c"==d){if(a.eat("!"))return a.eat("[")?a.match("CDATA[")?b(p("atom","]]\x3e")):null:a.match("--")?b(p("comment","--\x3e")):a.match("DOCTYPE",!0,!0)?(a.eatWhile(/[\w\._\-]/),b(q(1))):null;if(a.eat("?"))return a.eatWhile(/[\w\._\-]/),
c.tokenize=p("meta","?\x3e"),"meta";l=a.eat("/")?"closeTag":"openTag";c.tokenize=r;return"tag bracket"}if("\x26"==d)return(a.eat("#")?a.eat("x")?a.eatWhile(/[a-fA-F\d]/)&&a.eat(";"):a.eatWhile(/[\d]/)&&a.eat(";"):a.eatWhile(/[\w\.\-:]/)&&a.eat(";"))?"atom":"error";a.eatWhile(/[^&<]/);return null}function r(a,c){var b=a.next();if("\x3e"==b||"/"==b&&a.eat("\x3e"))return c.tokenize=k,l="\x3e"==b?"endTag":"selfcloseTag","tag bracket";if("\x3d"==b)return l="equals",null;if("\x3c"==b)return c.tokenize=
k,c.state=n,c.tagName=c.tagStart=null,(b=c.tokenize(a,c))?b+" tag error":"tag error";if(/[\'\"]/.test(b))return c.tokenize=C(b),c.stringStartCol=a.column(),c.tokenize(a,c);a.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/);return"word"}function C(a){var c=function(b,c){for(;!b.eol();)if(b.next()==a){c.tokenize=r;break}return"string"};c.isInAttribute=!0;return c}function p(a,c){return function(b,d){for(;!b.eol();){if(b.match(c)){d.tokenize=k;break}b.next()}return a}}function q(a){return function(c,
b){for(var d;null!=(d=c.next());){if("\x3c"==d)return b.tokenize=q(a+1),b.tokenize(c,b);if("\x3e"==d)if(1==a){b.tokenize=k;break}else return b.tokenize=q(a-1),b.tokenize(c,b)}return"meta"}}function D(a,c,b){this.prev=a.context;this.tagName=c;this.indent=a.indented;this.startOfLine=b;if(g.doNotIndent.hasOwnProperty(c)||a.context&&a.context.noIndent)this.noIndent=!0}function t(a){a.context&&(a.context=a.context.prev)}function x(a,c){for(var b;a.context;){b=a.context.tagName;if(!g.contextGrabbers.hasOwnProperty(b)||
!g.contextGrabbers[b].hasOwnProperty(c))break;t(a)}}function n(a,c,b){return"openTag"==a?(b.tagStart=c.column(),y):"closeTag"==a?E:n}function y(a,c,b){if("word"==a)return b.tagName=c.current(),e="tag",m;e="error";return y}function E(a,c,b){if("word"==a){a=c.current();b.context&&b.context.tagName!=a&&g.implicitlyClosed.hasOwnProperty(b.context.tagName)&&t(b);if(b.context&&b.context.tagName==a)return e="tag",u;e="tag error";return z}e="error";return z}function u(a,c,b){if("endTag"!=a)return e="error",
u;t(b);return n}function z(a,c,b){e="error";return u(a,c,b)}function m(a,c,b){if("word"==a)return e="attribute",F;if("endTag"==a||"selfcloseTag"==a){c=b.tagName;var d=b.tagStart;b.tagName=b.tagStart=null;"selfcloseTag"==a||g.autoSelfClosers.hasOwnProperty(c)?x(b,c):(x(b,c),b.context=new D(b,c,d==b.indented));return n}e="error";return m}function F(a,c,b){if("equals"==a)return G;g.allowMissing||(e="error");return m(a,c,b)}function G(a,c,b){if("string"==a)return A;if("word"==a&&g.allowUnquoted)return e=
"string",m;e="error";return m(a,c,b)}function A(a,c,b){return"string"==a?A:m(a,c,b)}var v=B.indentUnit,H=h.multilineTagIndentFactor||1,w=h.multilineTagIndentPastTag;null==w&&(w=!0);var g=h.htmlMode?{autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,
dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,
caseFold:!0}:{autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,caseFold:!1},I=h.alignCDATA,l,e;return{startState:function(){return{tokenize:k,state:n,indented:0,tagName:null,tagStart:null,context:null}},token:function(a,c){!c.tagName&&a.sol()&&(c.indented=a.indentation());if(a.eatSpace())return null;l=null;var b=c.tokenize(a,c);(b||l)&&"comment"!=b&&(e=null,c.state=c.state(l||b,a,c),e&&(b="error"==e?b+" error":e));return b},indent:function(a,
c,b){var d=a.context;if(a.tokenize.isInAttribute)return a.tagStart==a.indented?a.stringStartCol+1:a.indented+v;if(d&&d.noIndent)return f.Pass;if(a.tokenize!=r&&a.tokenize!=k)return b?b.match(/^(\s*)/)[0].length:0;if(a.tagName)return w?a.tagStart+a.tagName.length+2:a.tagStart+v*H;if(I&&/<!\[CDATA\[/.test(c))return 0;if((a=c&&/^<(\/)?([\w_:\.-]*)/.exec(c))&&a[1])for(;d;)if(d.tagName==a[2]){d=d.prev;break}else if(g.implicitlyClosed.hasOwnProperty(d.tagName))d=d.prev;else break;else if(a)for(;d;)if((c=
g.contextGrabbers[d.tagName])&&c.hasOwnProperty(a[2]))d=d.prev;else break;for(;d&&!d.startOfLine;)d=d.prev;return d?d.indent+v:0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"\x3c!--",blockCommentEnd:"--\x3e",configuration:h.htmlMode?"html":"xml",helperType:h.htmlMode?"html":"xml"}});f.defineMIME("text/xml","xml");f.defineMIME("application/xml","xml");f.mimeModes.hasOwnProperty("text/html")||f.defineMIME("text/html",{name:"xml",htmlMode:!0})});;
;/* module-key = 'com.atlassian.stash.stash-highlight-plugin:htmlmixed', location = '/static/bower/CodeMirror/mode/htmlmixed/htmlmixed.js' */
(function(c){"object"==typeof exports&&"object"==typeof module?c(require("../../lib/codemirror"),require("../xml/xml"),require("../javascript/javascript"),require("../css/css")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","../xml/xml","../javascript/javascript","../css/css"],c):c(CodeMirror)})(function(c){c.defineMode("htmlmixed",function(h,l){function m(a,b){var d=b.htmlState.tagName;d&&(d=d.toLowerCase());var c=e.token(a,b.htmlState);if("script"==d&&/\btag\b/.test(c)&&"\x3e"==
a.current()){(d=(d=a.string.slice(Math.max(0,a.pos-100),a.pos).match(/\btype\s*=\s*("[^"]+"|'[^']+'|\S+)[^<]*$/i))?d[1]:"")&&/[\"\']/.test(d.charAt(0))&&(d=d.slice(1,d.length-1));for(var g=0;g<k.length;++g){var f=k[g];if("string"==typeof f.matches?d==f.matches:f.matches.test(d)){f.mode&&(b.token=u,b.localMode=f.mode,b.localState=f.mode.startState&&f.mode.startState(e.indent(b.htmlState,"")));break}}}else"style"==d&&/\btag\b/.test(c)&&"\x3e"==a.current()&&(b.token=v,b.localMode=n,b.localState=n.startState(e.indent(b.htmlState,
"")));return c}function t(a,b,c){var e=a.current(),g=e.search(b);-1<g?a.backUp(e.length-g):e.match(/<\/?$/)&&(a.backUp(e.length),a.match(b,!1)||a.match(e));return c}function u(a,b){return a.match(/^<\/\s*script\s*>/i,!1)?(b.token=m,b.localState=b.localMode=null):t(a,/<\/\s*script\s*>/,b.localMode.token(a,b.localState))}function v(a,b){return a.match(/^<\/\s*style\s*>/i,!1)?(b.token=m,b.localState=b.localMode=null):t(a,/<\/\s*style\s*>/,n.token(a,b.localState))}var e=c.getMode(h,{name:"xml",htmlMode:!0,
multilineTagIndentFactor:l.multilineTagIndentFactor,multilineTagIndentPastTag:l.multilineTagIndentPastTag}),n=c.getMode(h,"css"),k=[],p=l&&l.scriptTypes;k.push({matches:/^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^$/i,mode:c.getMode(h,"javascript")});if(p)for(var q=0;q<p.length;++q){var r=p[q];k.push({matches:r.matches,mode:r.mode&&c.getMode(h,r.mode)})}k.push({matches:/./,mode:c.getMode(h,"text/plain")});return{startState:function(){var a=e.startState();return{token:m,localMode:null,localState:null,
htmlState:a}},copyState:function(a){if(a.localState)var b=c.copyState(a.localMode,a.localState);return{token:a.token,localMode:a.localMode,localState:b,htmlState:c.copyState(e,a.htmlState)}},token:function(a,b){return b.token(a,b)},indent:function(a,b){return!a.localMode||/^\s*<\//.test(b)?e.indent(a.htmlState,b):a.localMode.indent?a.localMode.indent(a.localState,b):c.Pass},innerMode:function(a){return{state:a.localState||a.htmlState,mode:a.localMode||e}}}},"xml","javascript","css");c.defineMIME("text/html",
"htmlmixed")});;
;/* module-key = 'com.atlassian.stash.stash-highlight-plugin:markdown', location = '/static/bower/CodeMirror/mode/markdown/markdown.js' */
(function(h){"object"==typeof exports&&"object"==typeof module?h(require("../../lib/codemirror"),require("../xml/xml"),require("../meta")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","../xml/xml","../meta"],h):h(CodeMirror)})(function(h){h.defineMode("markdown",function(t,e){function n(b,a,c){a.f=a.inline=c;return c(b,a)}function u(b){b.linkTitle=!1;b.em=!1;b.strong=!1;b.strikethrough=!1;b.quote=0;p||b.f!=q||(b.f=k,b.block=l);b.trailingSpace=0;b.trailingSpaceNewLine=!1;b.thisLineHasContent=
!1;return null}function l(b,a){var c=b.sol(),d=!1!==a.list;d&&(0<=a.indentationDiff?(4>a.indentationDiff&&(a.indentation-=a.indentationDiff),a.list=null):0<a.indentation?(a.list=null,a.listDepth=Math.floor(a.indentation/4)):(a.list=!1,a.listDepth=0));var g=null;return 4<=a.indentationDiff?(a.indentation-=4,b.skipToEnd(),"comment"):b.eatSpace()?null:(g=b.match(C))?(a.header=Math.min(6,-1!==g[0].indexOf(" ")?g[0].length-1:g[0].length),e.highlightFormatting&&(a.formatting="header"),a.f=a.inline,f(a)):
a.prevLineHasContent&&(g=b.match(D))?(a.header="\x3d"==g[0].charAt(0)?1:2,e.highlightFormatting&&(a.formatting="header"),a.f=a.inline,f(a)):b.eat("\x3e")?(a.indentation++,a.quote=c?1:a.quote+1,e.highlightFormatting&&(a.formatting="quote"),b.eatSpace(),f(a)):"["===b.peek()?n(b,a,E):b.match(F,!0)?"hr":a.prevLineHasContent&&!d||!b.match(v,!1)&&!b.match(w,!1)?e.fencedCodeBlocks&&b.match(/^```[ \t]*([\w+#]*)/,!0)?(c=RegExp.$1,h.findModeByName&&(d=h.findModeByName(c))&&(c=d.mime||d.mimes[0]),c=h.getMode(t,
c),a.localMode="null"==c.name?null:c,a.localMode&&(a.localState=a.localMode.startState()),a.f=a.block=G,e.highlightFormatting&&(a.formatting="code-block"),a.code=!0,f(a)):n(b,a,a.inline):(c=null,b.match(v,!0)?c="ul":(b.match(w,!0),c="ol"),a.indentation+=4,a.list=!0,a.listDepth++,e.taskLists&&b.match(x,!1)&&(a.taskList=!0),a.f=a.inline,e.highlightFormatting&&(a.formatting=["list","list-"+c]),f(a))}function q(b,a){var c=m.token(b,a.htmlState);if(p&&null===a.htmlState.tagStart&&!a.htmlState.context||
a.md_inside&&-1<b.current().indexOf("\x3e"))a.f=k,a.block=l,a.htmlState=null;return c}function G(b,a){if(b.sol()&&b.match("```",!1))return a.localMode=a.localState=null,a.f=a.block=H,null;if(a.localMode)return a.localMode.token(b,a.localState);b.skipToEnd();return"comment"}function H(b,a){b.match("```");a.block=l;a.f=k;e.highlightFormatting&&(a.formatting="code-block");a.code=!0;var c=f(a);a.code=!1;return c}function f(b){var a=[];if(b.formatting){a.push("formatting");"string"===typeof b.formatting&&
(b.formatting=[b.formatting]);for(var c=0;c<b.formatting.length;c++)a.push("formatting-"+b.formatting[c]),"header"===b.formatting[c]&&a.push("formatting-"+b.formatting[c]+"-"+b.header),"quote"===b.formatting[c]&&(!e.maxBlockquoteDepth||e.maxBlockquoteDepth>=b.quote?a.push("formatting-"+b.formatting[c]+"-"+b.quote):a.push("error"))}if(b.taskOpen)return a.push("meta"),a.length?a.join(" "):null;if(b.taskClosed)return a.push("property"),a.length?a.join(" "):null;if(b.linkHref)return a.push("string"),
a.length?a.join(" "):null;b.strong&&a.push("strong");b.em&&a.push("em");b.strikethrough&&a.push("strikethrough");b.linkText&&a.push("link");b.code&&a.push("comment");b.header&&(a.push("header"),a.push("header-"+b.header));b.quote&&(a.push("quote"),!e.maxBlockquoteDepth||e.maxBlockquoteDepth>=b.quote?a.push("quote-"+b.quote):a.push("quote-"+e.maxBlockquoteDepth));!1!==b.list&&((c=(b.listDepth-1)%3)?1===c?a.push("variable-3"):a.push("keyword"):a.push("variable-2"));b.trailingSpaceNewLine?a.push("trailing-space-new-line"):
b.trailingSpace&&a.push("trailing-space-"+(b.trailingSpace%2?"a":"b"));return a.length?a.join(" "):null}function I(b,a){if(b.match(J,!0))return f(a)}function k(b,a){var c=a.text(b,a);if("undefined"!==typeof c)return c;if(a.list)return a.list=null,f(a);if(a.taskList)return"x"!==b.match(x,!0)[1]?a.taskOpen=!0:a.taskClosed=!0,e.highlightFormatting&&(a.formatting="task"),a.taskList=!1,f(a);a.taskOpen=!1;a.taskClosed=!1;if(a.header&&b.match(/^#+$/,!0))return e.highlightFormatting&&(a.formatting="header"),
f(a);var c=b.sol(),d=b.next();if("\\"===d&&(b.next(),e.highlightFormatting))return(c=f(a))?c+" formatting-escape":"formatting-escape";if(a.linkTitle){a.linkTitle=!1;var g=d;"("===d&&(g=")");g=(g+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1");if(b.match(new RegExp("^\\s*(?:[^"+g+"\\\\]+|\\\\\\\\|\\\\.)"+g),!0))return"string"}if("`"===d){c=a.formatting;e.highlightFormatting&&(a.formatting="code");d=f(a);g=b.pos;b.eatWhile("`");g=1+b.pos-g;if(a.code){if(g===y)return a.code=!1,d;a.formatting=c}else y=g,
a.code=!0;return f(a)}if(a.code)return f(a);if("!"===d&&b.match(/\[[^\]]*\] ?(?:\(|\[)/,!1))return b.match(/\[[^\]]*\]/),a.inline=a.f=z,"tag";if("["===d&&b.match(/.*\](\(.*\)| ?\[.*\])/,!1))return a.linkText=!0,e.highlightFormatting&&(a.formatting="link"),f(a);if("]"===d&&a.linkText&&b.match(/\(.*\)| ?\[.*\]/,!1))return e.highlightFormatting&&(a.formatting="link"),c=f(a),a.linkText=!1,a.inline=a.f=z,c;if("\x3c"===d&&b.match(/^(https?|ftps?):\/\/(?:[^\\>]|\\.)+>/,!1))return a.f=a.inline=A,e.highlightFormatting&&
(a.formatting="link"),c=f(a),(c?c+" ":"")+"link";if("\x3c"===d&&b.match(/^[^> \\]+@(?:[^\\>]|\\.)+>/,!1))return a.f=a.inline=A,e.highlightFormatting&&(a.formatting="link"),c=(c=f(a))?c+" ":"",c+"link";if("\x3c"===d&&b.match(/^\w/,!1))return-1!=b.string.indexOf("\x3e")&&(c=b.string.substring(1,b.string.indexOf("\x3e")),/markdown\s*=\s*('|"){0,1}1('|"){0,1}/.test(c)&&(a.md_inside=!0)),b.backUp(1),a.htmlState=h.startState(m),c=q,a.f=a.block=c,c(b,a);if("\x3c"===d&&b.match(/^\/\w*?>/))return a.md_inside=
!1,"tag";g=!1;if(!e.underscoresBreakWords&&"_"===d&&"_"!==b.peek()&&b.match(/(\w)/,!1)){var k=b.pos-2;0<=k&&(k=b.string.charAt(k),"_"!==k&&k.match(/(\w)/,!1)&&(g=!0))}if("*"===d||"_"===d&&!g){if(!c||" "!==b.peek()){if(a.strong===d&&b.eat(d))return e.highlightFormatting&&(a.formatting="strong"),d=f(a),a.strong=!1,d;if(!a.strong&&b.eat(d))return a.strong=d,e.highlightFormatting&&(a.formatting="strong"),f(a);if(a.em===d)return e.highlightFormatting&&(a.formatting="em"),d=f(a),a.em=!1,d;if(!a.em)return a.em=
d,e.highlightFormatting&&(a.formatting="em"),f(a)}}else if(" "===d&&(b.eat("*")||b.eat("_"))){if(" "===b.peek())return f(a);b.backUp(1)}if(e.strikethrough)if("~"===d&&b.eatWhile(d)){if(a.strikethrough)return e.highlightFormatting&&(a.formatting="strikethrough"),d=f(a),a.strikethrough=!1,d;if(b.match(/^[^\s]/,!1))return a.strikethrough=!0,e.highlightFormatting&&(a.formatting="strikethrough"),f(a)}else if(" "===d&&b.match(/^~~/,!0)){if(" "===b.peek())return f(a);b.backUp(2)}" "===d&&(b.match(/ +$/,
!1)?a.trailingSpace++:a.trailingSpace&&(a.trailingSpaceNewLine=!0));return f(a)}function A(b,a){if("\x3e"===b.next()){a.f=a.inline=k;e.highlightFormatting&&(a.formatting="link");var c=f(a);return(c?c+" ":"")+"link"}b.match(/^[^>]+/,!0);return"link"}function z(b,a){if(b.eatSpace())return null;var c=b.next();return"("===c||"["===c?(a.f=a.inline=K("("===c?")":"]"),e.highlightFormatting&&(a.formatting="link-string"),a.linkHref=!0,f(a)):"error"}function K(b){return function(a,c){if(a.next()===b){c.f=c.inline=
k;e.highlightFormatting&&(c.formatting="link-string");var d=f(c);c.linkHref=!1;return d}a.match(L(b),!0)&&a.backUp(1);c.linkHref=!0;return f(c)}}function E(b,a){return b.match(/^[^\]]*\]:/,!1)?(a.f=M,b.next(),e.highlightFormatting&&(a.formatting="link"),a.linkText=!0,f(a)):n(b,a,k)}function M(b,a){if(b.match(/^\]:/,!0)){a.f=a.inline=N;e.highlightFormatting&&(a.formatting="link");var c=f(a);a.linkText=!1;return c}b.match(/^[^\]]+/,!0);return"link"}function N(b,a){if(b.eatSpace())return null;b.match(/^[^\s]+/,
!0);void 0===b.peek()?a.linkTitle=!0:b.match(/^(?:\s+(?:"(?:[^"\\]|\\\\|\\.)+"|'(?:[^'\\]|\\\\|\\.)+'|\((?:[^)\\]|\\\\|\\.)+\)))?/,!0);a.f=a.inline=k;return"string"}function L(b){r[b]||(b=(b+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1"),r[b]=new RegExp("^(?:[^\\\\]|\\\\.)*?("+b+")"));return r[b]}var p=h.modes.hasOwnProperty("xml"),m=h.getMode(t,p?{name:"xml",htmlMode:!0}:"text/plain");void 0===e.highlightFormatting&&(e.highlightFormatting=!1);void 0===e.maxBlockquoteDepth&&(e.maxBlockquoteDepth=0);
void 0===e.underscoresBreakWords&&(e.underscoresBreakWords=!0);void 0===e.fencedCodeBlocks&&(e.fencedCodeBlocks=!1);void 0===e.taskLists&&(e.taskLists=!1);void 0===e.strikethrough&&(e.strikethrough=!1);var y=0,F=/^([*\-=_])(?:\s*\1){2,}\s*$/,v=/^[*\-+]\s+/,w=/^[0-9]+\.\s+/,x=/^\[(x| )\](?=\s)/,C=/^#+ ?/,D=/^(?:\={1,}|-{1,})$/,J=/^[^#!\[\]*_\\<>` "'(~]+/,r=[],B={startState:function(){return{f:l,prevLineHasContent:!1,thisLineHasContent:!1,block:l,htmlState:null,indentation:0,inline:k,text:I,formatting:!1,
linkText:!1,linkHref:!1,linkTitle:!1,em:!1,strong:!1,header:0,taskList:!1,list:!1,listDepth:0,quote:0,trailingSpace:0,trailingSpaceNewLine:!1,strikethrough:!1}},copyState:function(b){return{f:b.f,prevLineHasContent:b.prevLineHasContent,thisLineHasContent:b.thisLineHasContent,block:b.block,htmlState:b.htmlState&&h.copyState(m,b.htmlState),indentation:b.indentation,localMode:b.localMode,localState:b.localMode?h.copyState(b.localMode,b.localState):null,inline:b.inline,text:b.text,formatting:!1,linkTitle:b.linkTitle,
em:b.em,strong:b.strong,strikethrough:b.strikethrough,header:b.header,taskList:b.taskList,list:b.list,listDepth:b.listDepth,quote:b.quote,trailingSpace:b.trailingSpace,trailingSpaceNewLine:b.trailingSpaceNewLine,md_inside:b.md_inside}},token:function(b,a){a.formatting=!1;if(b.sol()){var c=!!a.header;a.header=0;if(b.match(/^\s*$/,!0)||c)return a.prevLineHasContent=!1,u(a),c?this.token(b,a):null;a.prevLineHasContent=a.thisLineHasContent;a.thisLineHasContent=!0;a.taskList=!1;a.code=!1;a.trailingSpace=
0;a.trailingSpaceNewLine=!1;a.f=a.block;var c=b.match(/^\s*/,!0)[0].replace(/\t/g,"    ").length,d=4*Math.floor((c-a.indentation)/4);4<d&&(d=4);d=a.indentation+d;a.indentationDiff=d-a.indentation;a.indentation=d;if(0<c)return null}return a.f(b,a)},innerMode:function(b){return b.block==q?{state:b.htmlState,mode:m}:b.localState?{state:b.localState,mode:b.localMode}:{state:b,mode:B}},blankLine:u,getType:f,fold:"markdown"};return B},"xml");h.defineMIME("text/x-markdown","markdown")});;
;/* module-key = 'com.atlassian.stash.stash-highlight-plugin:perl', location = '/static/bower/CodeMirror/mode/perl/perl.js' */
(function(k){"object"==typeof exports&&"object"==typeof module?k(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],k):k(CodeMirror)})(function(k){function g(d,e){return d.string.charAt(d.pos+(e||0))}function q(d,e){if(e){var g=d.pos-e;return d.string.substr(0<=g?g:0,e)}return d.string.substr(0,d.pos-1)}function p(d,e){var g=d.string.length,m=g-d.pos+1;return d.string.substr(d.pos,e&&e<g?e:m)}function e(d,e){var g=d.pos+e,m;0>=g?d.pos=0:g>=(m=d.string.length-
1)?d.pos=m:d.pos=g}k.defineMode("perl",function(){function d(a,c,d,e,b){c.chain=null;c.style=null;c.tail=null;c.tokenize=function(a,c){for(var f=!1,g,k=0;g=a.next();){if(g===d[k]&&!f){void 0!==d[++k]?(c.chain=d[k],c.style=e,c.tail=b):b&&a.eatWhile(b);c.tokenize=n;break}f=!f&&"\\"==g}return e};return c.tokenize(a,c)}function k(a,c,d){c.tokenize=function(a,b){a.string==d&&(b.tokenize=n);a.skipToEnd();return"string"};return c.tokenize(a,c)}function n(a,c){if(a.eatSpace())return null;if(c.chain)return d(a,
c,c.chain,c.style,c.tail);if(a.match(/^\-?[\d\.]/,!1)&&a.match(/^(\-?(\d*\.\d+(e[+-]?\d+)?|\d+\.\d*)|0x[\da-fA-F]+|0b[01]+|\d+(e[+-]?\d+)?)/))return"number";if(a.match(/^<<(?=\w)/))return a.eatWhile(/\w/),k(a,c,a.current().substr(2));if(a.sol()&&a.match(/^\=item(?!\w)/))return k(a,c,"\x3dcut");var h=a.next();if('"'==h||"'"==h){if(q(a,3)=="\x3c\x3c"+h){var l=a.pos;a.eatWhile(/\w/);var b=a.current().substr(1);if(b&&a.eat(h))return k(a,c,b);a.pos=l}return d(a,c,[h],"string")}if("q"==h&&(b=g(a,-2),!b||
!/\w/.test(b)))if(b=g(a,0),"x"==b){b=g(a,1);if("("==b)return e(a,2),d(a,c,[")"],"string-2",f);if("["==b)return e(a,2),d(a,c,["]"],"string-2",f);if("{"==b)return e(a,2),d(a,c,["}"],"string-2",f);if("\x3c"==b)return e(a,2),d(a,c,["\x3e"],"string-2",f);if(/[\^'"!~\/]/.test(b))return e(a,1),d(a,c,[a.eat(b)],"string-2",f)}else if("q"==b){b=g(a,1);if("("==b)return e(a,2),d(a,c,[")"],"string");if("["==b)return e(a,2),d(a,c,["]"],"string");if("{"==b)return e(a,2),d(a,c,["}"],"string");if("\x3c"==b)return e(a,
2),d(a,c,["\x3e"],"string");if(/[\^'"!~\/]/.test(b))return e(a,1),d(a,c,[a.eat(b)],"string")}else if("w"==b){b=g(a,1);if("("==b)return e(a,2),d(a,c,[")"],"bracket");if("["==b)return e(a,2),d(a,c,["]"],"bracket");if("{"==b)return e(a,2),d(a,c,["}"],"bracket");if("\x3c"==b)return e(a,2),d(a,c,["\x3e"],"bracket");if(/[\^'"!~\/]/.test(b))return e(a,1),d(a,c,[a.eat(b)],"bracket")}else if("r"==b){b=g(a,1);if("("==b)return e(a,2),d(a,c,[")"],"string-2",f);if("["==b)return e(a,2),d(a,c,["]"],"string-2",f);
if("{"==b)return e(a,2),d(a,c,["}"],"string-2",f);if("\x3c"==b)return e(a,2),d(a,c,["\x3e"],"string-2",f);if(/[\^'"!~\/]/.test(b))return e(a,1),d(a,c,[a.eat(b)],"string-2",f)}else if(/[\^'"!~\/(\[{<]/.test(b)){if("("==b)return e(a,1),d(a,c,[")"],"string");if("["==b)return e(a,1),d(a,c,["]"],"string");if("{"==b)return e(a,1),d(a,c,["}"],"string");if("\x3c"==b)return e(a,1),d(a,c,["\x3e"],"string");if(/[\^'"!~\/]/.test(b))return d(a,c,[a.eat(b)],"string")}if("m"==h&&(b=g(a,-2),!b||!/\w/.test(b))&&(b=
a.eat(/[(\[{<\^'"!~\/]/))){if(/[\^'"!~\/]/.test(b))return d(a,c,[b],"string-2",f);if("("==b)return d(a,c,[")"],"string-2",f);if("["==b)return d(a,c,["]"],"string-2",f);if("{"==b)return d(a,c,["}"],"string-2",f);if("\x3c"==b)return d(a,c,["\x3e"],"string-2",f)}if("s"==h&&(b=/[\/>\]})\w]/.test(g(a,-2)),!b&&(b=a.eat(/[(\[{<\^'"!~\/]/)))||"y"==h&&(b=/[\/>\]})\w]/.test(g(a,-2)),!b&&(b=a.eat(/[(\[{<\^'"!~\/]/)))||"t"==h&&(b=/[\/>\]})\w]/.test(g(a,-2)),!b&&(b=a.eat("r")))&&(b=a.eat(/[(\[{<\^'"!~\/]/)))return"["==
b?d(a,c,["]","]"],"string-2",f):"{"==b?d(a,c,["}","}"],"string-2",f):"\x3c"==b?d(a,c,["\x3e","\x3e"],"string-2",f):"("==b?d(a,c,[")",")"],"string-2",f):d(a,c,[b,b],"string-2",f);if("`"==h)return d(a,c,[h],"variable-2");if("/"==h)return/~\s*$/.test(q(a))?d(a,c,[h],"string-2",f):"operator";if("$"==h){l=a.pos;if(a.eatWhile(/\d/)||a.eat("{")&&a.eatWhile(/\d/)&&a.eat("}"))return"variable-2";a.pos=l}if(/[$@%]/.test(h)){l=a.pos;if(a.eat("^")&&a.eat(/[A-Z]/)||!/[@$%&]/.test(g(a,-2))&&a.eat(/[=|\\\-#?@;:&`~\^!\[\]*'"$+.,\/<>()]/))if(b=
a.current(),m[b])return"variable-2";a.pos=l}if(/[$@%&]/.test(h)&&(a.eatWhile(/[\w$\[\]]/)||a.eat("{")&&a.eatWhile(/[\w$\[\]]/)&&a.eat("}")))return b=a.current(),m[b]?"variable-2":"variable";if("#"==h&&"$"!=g(a,-2))return a.skipToEnd(),"comment";if(/[:+\-\^*$&%@=<>!?|\/~\.]/.test(h)){l=a.pos;a.eatWhile(/[:+\-\^*$&%@=<>!?|\/~\.]/);if(m[a.current()])return"operator";a.pos=l}if("_"==h&&1==a.pos){if("_END__"==p(a,6))return d(a,c,["\x00"],"comment");if("_DATA__"==p(a,7))return d(a,c,["\x00"],"variable-2");
if("_C__"==p(a,7))return d(a,c,["\x00"],"string")}if(/\w/.test(h)){l=a.pos;if("{"==g(a,-2)&&("}"==g(a,0)||a.eatWhile(/\w/)&&"}"==g(a,0)))return"string";a.pos=l}if(/[A-Z]/.test(h)){var n=g(a,-2),l=a.pos;a.eatWhile(/[A-Z_]/);if(/[\da-z]/.test(g(a,0)))a.pos=l;else{b=m[a.current()];if(!b)return"meta";b[1]&&(b=b[0]);return":"!=n?1==b?"keyword":2==b?"def":3==b?"atom":4==b?"operator":5==b?"variable-2":"meta":"meta"}}if(/[a-zA-Z_]/.test(h)){n=g(a,-2);a.eatWhile(/\w/);b=m[a.current()];if(!b)return"meta";b[1]&&
(b=b[0]);return":"!=n?1==b?"keyword":2==b?"def":3==b?"atom":4==b?"operator":5==b?"variable-2":"meta":"meta"}return null}var m={"-\x3e":4,"++":4,"--":4,"**":4,"\x3d~":4,"!~":4,"*":4,"/":4,"%":4,x:4,"+":4,"-":4,".":4,"\x3c\x3c":4,"\x3e\x3e":4,"\x3c":4,"\x3e":4,"\x3c\x3d":4,"\x3e\x3d":4,lt:4,gt:4,le:4,ge:4,"\x3d\x3d":4,"!\x3d":4,"\x3c\x3d\x3e":4,eq:4,ne:4,cmp:4,"~~":4,"\x26":4,"|":4,"^":4,"\x26\x26":4,"||":4,"//":4,"..":4,"...":4,"?":4,":":4,"\x3d":4,"+\x3d":4,"-\x3d":4,"*\x3d":4,",":4,"\x3d\x3e":4,
"::":4,not:4,and:4,or:4,xor:4,BEGIN:[5,1],END:[5,1],PRINT:[5,1],PRINTF:[5,1],GETC:[5,1],READ:[5,1],READLINE:[5,1],DESTROY:[5,1],TIE:[5,1],TIEHANDLE:[5,1],UNTIE:[5,1],STDIN:5,STDIN_TOP:5,STDOUT:5,STDOUT_TOP:5,STDERR:5,STDERR_TOP:5,$ARG:5,$_:5,"@ARG":5,"@_":5,$LIST_SEPARATOR:5,'$"':5,$PROCESS_ID:5,$PID:5,$$:5,$REAL_GROUP_ID:5,$GID:5,"$(":5,$EFFECTIVE_GROUP_ID:5,$EGID:5,"$)":5,$PROGRAM_NAME:5,$0:5,$SUBSCRIPT_SEPARATOR:5,$SUBSEP:5,"$;":5,$REAL_USER_ID:5,$UID:5,"$\x3c":5,$EFFECTIVE_USER_ID:5,$EUID:5,"$\x3e":5,
$a:5,$b:5,$COMPILING:5,"$^C":5,$DEBUGGING:5,"$^D":5,"${^ENCODING}":5,$ENV:5,"%ENV":5,$SYSTEM_FD_MAX:5,"$^F":5,"@F":5,"${^GLOBAL_PHASE}":5,"$^H":5,"%^H":5,"@INC":5,"%INC":5,$INPLACE_EDIT:5,"$^I":5,"$^M":5,$OSNAME:5,"$^O":5,"${^OPEN}":5,$PERLDB:5,"$^P":5,$SIG:5,"%SIG":5,$BASETIME:5,"$^T":5,"${^TAINT}":5,"${^UNICODE}":5,"${^UTF8CACHE}":5,"${^UTF8LOCALE}":5,$PERL_VERSION:5,"$^V":5,"${^WIN32_SLOPPY_STAT}":5,$EXECUTABLE_NAME:5,"$^X":5,$1:5,$MATCH:5,"$\x26":5,"${^MATCH}":5,$PREMATCH:5,"$`":5,"${^PREMATCH}":5,
$POSTMATCH:5,"$'":5,"${^POSTMATCH}":5,$LAST_PAREN_MATCH:5,"$+":5,$LAST_SUBMATCH_RESULT:5,"$^N":5,"@LAST_MATCH_END":5,"@+":5,"%LAST_PAREN_MATCH":5,"%+":5,"@LAST_MATCH_START":5,"@-":5,"%LAST_MATCH_START":5,"%-":5,$LAST_REGEXP_CODE_RESULT:5,"$^R":5,"${^RE_DEBUG_FLAGS}":5,"${^RE_TRIE_MAXBUF}":5,$ARGV:5,"@ARGV":5,ARGV:5,ARGVOUT:5,$OUTPUT_FIELD_SEPARATOR:5,$OFS:5,"$,":5,$INPUT_LINE_NUMBER:5,$NR:5,"$.":5,$INPUT_RECORD_SEPARATOR:5,$RS:5,"$/":5,$OUTPUT_RECORD_SEPARATOR:5,$ORS:5,"$\\":5,$OUTPUT_AUTOFLUSH:5,
"$|":5,$ACCUMULATOR:5,"$^A":5,$FORMAT_FORMFEED:5,"$^L":5,$FORMAT_PAGE_NUMBER:5,"$%":5,$FORMAT_LINES_LEFT:5,"$-":5,$FORMAT_LINE_BREAK_CHARACTERS:5,"$:":5,$FORMAT_LINES_PER_PAGE:5,"$\x3d":5,$FORMAT_TOP_NAME:5,"$^":5,$FORMAT_NAME:5,"$~":5,"${^CHILD_ERROR_NATIVE}":5,$EXTENDED_OS_ERROR:5,"$^E":5,$EXCEPTIONS_BEING_CAUGHT:5,"$^S":5,$WARNING:5,"$^W":5,"${^WARNING_BITS}":5,$OS_ERROR:5,$ERRNO:5,"$!":5,"%OS_ERROR":5,"%ERRNO":5,"%!":5,$CHILD_ERROR:5,"$?":5,$EVAL_ERROR:5,"$@":5,$OFMT:5,"$#":5,"$*":5,$ARRAY_BASE:5,
"$[":5,$OLD_PERL_VERSION:5,"$]":5,"if":[1,1],elsif:[1,1],"else":[1,1],"while":[1,1],unless:[1,1],"for":[1,1],foreach:[1,1],abs:1,accept:1,alarm:1,atan2:1,bind:1,binmode:1,bless:1,bootstrap:1,"break":1,caller:1,chdir:1,chmod:1,chomp:1,chop:1,chown:1,chr:1,chroot:1,close:1,closedir:1,connect:1,"continue":[1,1],cos:1,crypt:1,dbmclose:1,dbmopen:1,"default":1,defined:1,"delete":1,die:1,"do":1,dump:1,each:1,endgrent:1,endhostent:1,endnetent:1,endprotoent:1,endpwent:1,endservent:1,eof:1,eval:1,exec:1,exists:1,
exit:1,exp:1,fcntl:1,fileno:1,flock:1,fork:1,format:1,formline:1,getc:1,getgrent:1,getgrgid:1,getgrnam:1,gethostbyaddr:1,gethostbyname:1,gethostent:1,getlogin:1,getnetbyaddr:1,getnetbyname:1,getnetent:1,getpeername:1,getpgrp:1,getppid:1,getpriority:1,getprotobyname:1,getprotobynumber:1,getprotoent:1,getpwent:1,getpwnam:1,getpwuid:1,getservbyname:1,getservbyport:1,getservent:1,getsockname:1,getsockopt:1,given:1,glob:1,gmtime:1,"goto":1,grep:1,hex:1,"import":1,index:1,"int":1,ioctl:1,join:1,keys:1,
kill:1,last:1,lc:1,lcfirst:1,length:1,link:1,listen:1,local:2,localtime:1,lock:1,log:1,lstat:1,m:null,map:1,mkdir:1,msgctl:1,msgget:1,msgrcv:1,msgsnd:1,my:2,"new":1,next:1,no:1,oct:1,open:1,opendir:1,ord:1,our:2,pack:1,"package":1,pipe:1,pop:1,pos:1,print:1,printf:1,prototype:1,push:1,q:null,qq:null,qr:null,quotemeta:null,qw:null,qx:null,rand:1,read:1,readdir:1,readline:1,readlink:1,readpipe:1,recv:1,redo:1,ref:1,rename:1,require:1,reset:1,"return":1,reverse:1,rewinddir:1,rindex:1,rmdir:1,s:null,
say:1,scalar:1,seek:1,seekdir:1,select:1,semctl:1,semget:1,semop:1,send:1,setgrent:1,sethostent:1,setnetent:1,setpgrp:1,setpriority:1,setprotoent:1,setpwent:1,setservent:1,setsockopt:1,shift:1,shmctl:1,shmget:1,shmread:1,shmwrite:1,shutdown:1,sin:1,sleep:1,socket:1,socketpair:1,sort:1,splice:1,split:1,sprintf:1,sqrt:1,srand:1,stat:1,state:1,study:1,sub:1,substr:1,symlink:1,syscall:1,sysopen:1,sysread:1,sysseek:1,system:1,syswrite:1,tell:1,telldir:1,tie:1,tied:1,time:1,times:1,tr:null,truncate:1,uc:1,
ucfirst:1,umask:1,undef:1,unlink:1,unpack:1,unshift:1,untie:1,use:1,utime:1,values:1,vec:1,wait:1,waitpid:1,wantarray:1,warn:1,when:1,write:1,y:null},f=/[goseximacplud]/;return{startState:function(){return{tokenize:n,chain:null,style:null,tail:null}},token:function(a,c){return(c.tokenize||n)(a,c)},lineComment:"#"}});k.registerHelper("wordChars","perl",/[\w$]/);k.defineMIME("text/x-perl","perl")});;
;/* module-key = 'com.atlassian.stash.stash-highlight-plugin:php', location = '/static/bower/CodeMirror/mode/php/php.js' */
(function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror"),require("../htmlmixed/htmlmixed"),require("../clike/clike")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","../htmlmixed/htmlmixed","../clike/clike"],e):e(CodeMirror)})(function(e){function g(b){var a={};b=b.split(" ");for(var d=0;d<b.length;++d)a[b[d]]=!0;return a}function l(b,a){return 0==b.length?h(a):function(d,f){for(var k=b[0],c=0;c<k.length;c++)if(d.match(k[c][0]))return f.tokenize=
l(b.slice(1),a),k[c][1];f.tokenize=h(a);return"string"}}function h(b){return function(a,d){var f;if(a.match("${",!1)||a.match("{$",!1))d.tokenize=null,f="string";else if(a.match(/^\$[a-zA-Z_][a-zA-Z0-9_]*/))a.match("[",!1)&&(d.tokenize=l([[["[",null]],[[/\d[\w\.]*/,"number"],[/\$[a-zA-Z_][a-zA-Z0-9_]*/,"variable-2"],[/[\w\$]+/,"variable"]],[["]",null]]],b)),a.match(/\-\>\w/,!1)&&(d.tokenize=l([[["-\x3e",null]],[[/[\w]+/,"variable"]]],b)),f="variable-2";else{for(f=!1;!a.eol()&&(f||!a.match("{$",!1)&&
!a.match(/^(\$[a-zA-Z_][a-zA-Z0-9_]*|\$\{)/,!1));){if(!f&&a.match(b)){d.tokenize=null;d.tokStack.pop();d.tokStack.pop();break}f="\\"==a.next()&&!f}f="string"}return f}}e.registerHelper("hintWords","php","abstract and array as break case catch class clone const continue declare default do else elseif enddeclare endfor endforeach endif endswitch endwhile extends final for foreach function global goto if implements interface instanceof namespace new or private protected public static switch throw trait try use var while xor die echo empty exit eval include include_once isset list require require_once return print unset __halt_compiler self static parent yield insteadof finally true false null TRUE FALSE NULL __CLASS__ __DIR__ __FILE__ __LINE__ __METHOD__ __FUNCTION__ __NAMESPACE__ __TRAIT__ func_num_args func_get_arg func_get_args strlen strcmp strncmp strcasecmp strncasecmp each error_reporting define defined trigger_error user_error set_error_handler restore_error_handler get_declared_classes get_loaded_extensions extension_loaded get_extension_funcs debug_backtrace constant bin2hex hex2bin sleep usleep time mktime gmmktime strftime gmstrftime strtotime date gmdate getdate localtime checkdate flush wordwrap htmlspecialchars htmlentities html_entity_decode md5 md5_file crc32 getimagesize image_type_to_mime_type phpinfo phpversion phpcredits strnatcmp strnatcasecmp substr_count strspn strcspn strtok strtoupper strtolower strpos strrpos strrev hebrev hebrevc nl2br basename dirname pathinfo stripslashes stripcslashes strstr stristr strrchr str_shuffle str_word_count strcoll substr substr_replace quotemeta ucfirst ucwords strtr addslashes addcslashes rtrim str_replace str_repeat count_chars chunk_split trim ltrim strip_tags similar_text explode implode setlocale localeconv parse_str str_pad chop strchr sprintf printf vprintf vsprintf sscanf fscanf parse_url urlencode urldecode rawurlencode rawurldecode readlink linkinfo link unlink exec system escapeshellcmd escapeshellarg passthru shell_exec proc_open proc_close rand srand getrandmax mt_rand mt_srand mt_getrandmax base64_decode base64_encode abs ceil floor round is_finite is_nan is_infinite bindec hexdec octdec decbin decoct dechex base_convert number_format fmod ip2long long2ip getenv putenv getopt microtime gettimeofday getrusage uniqid quoted_printable_decode set_time_limit get_cfg_var magic_quotes_runtime set_magic_quotes_runtime get_magic_quotes_gpc get_magic_quotes_runtime import_request_variables error_log serialize unserialize memory_get_usage var_dump var_export debug_zval_dump print_r highlight_file show_source highlight_string ini_get ini_get_all ini_set ini_alter ini_restore get_include_path set_include_path restore_include_path setcookie header headers_sent connection_aborted connection_status ignore_user_abort parse_ini_file is_uploaded_file move_uploaded_file intval floatval doubleval strval gettype settype is_null is_resource is_bool is_long is_float is_int is_integer is_double is_real is_numeric is_string is_array is_object is_scalar ereg ereg_replace eregi eregi_replace split spliti join sql_regcase dl pclose popen readfile rewind rmdir umask fclose feof fgetc fgets fgetss fread fopen fpassthru ftruncate fstat fseek ftell fflush fwrite fputs mkdir rename copy tempnam tmpfile file file_get_contents stream_select stream_context_create stream_context_set_params stream_context_set_option stream_context_get_options stream_filter_prepend stream_filter_append fgetcsv flock get_meta_tags stream_set_write_buffer set_file_buffer set_socket_blocking stream_set_blocking socket_set_blocking stream_get_meta_data stream_register_wrapper stream_wrapper_register stream_set_timeout socket_set_timeout socket_get_status realpath fnmatch fsockopen pfsockopen pack unpack get_browser crypt opendir closedir chdir getcwd rewinddir readdir dir glob fileatime filectime filegroup fileinode filemtime fileowner fileperms filesize filetype file_exists is_writable is_writeable is_readable is_executable is_file is_dir is_link stat lstat chown touch clearstatcache mail ob_start ob_flush ob_clean ob_end_flush ob_end_clean ob_get_flush ob_get_clean ob_get_length ob_get_level ob_get_status ob_get_contents ob_implicit_flush ob_list_handlers ksort krsort natsort natcasesort asort arsort sort rsort usort uasort uksort shuffle array_walk count end prev next reset current key min max in_array array_search extract compact array_fill range array_multisort array_push array_pop array_shift array_unshift array_splice array_slice array_merge array_merge_recursive array_keys array_values array_count_values array_reverse array_reduce array_pad array_flip array_change_key_case array_rand array_unique array_intersect array_intersect_assoc array_diff array_diff_assoc array_sum array_filter array_map array_chunk array_key_exists pos sizeof key_exists assert assert_options version_compare ftok str_rot13 aggregate session_name session_module_name session_save_path session_id session_regenerate_id session_decode session_register session_unregister session_is_registered session_encode session_start session_destroy session_unset session_set_save_handler session_cache_limiter session_cache_expire session_set_cookie_params session_get_cookie_params session_write_close preg_match preg_match_all preg_replace preg_replace_callback preg_split preg_quote preg_grep overload ctype_alnum ctype_alpha ctype_cntrl ctype_digit ctype_lower ctype_graph ctype_print ctype_punct ctype_space ctype_upper ctype_xdigit virtual apache_request_headers apache_note apache_lookup_uri apache_child_terminate apache_setenv apache_response_headers apache_get_version getallheaders mysql_connect mysql_pconnect mysql_close mysql_select_db mysql_create_db mysql_drop_db mysql_query mysql_unbuffered_query mysql_db_query mysql_list_dbs mysql_list_tables mysql_list_fields mysql_list_processes mysql_error mysql_errno mysql_affected_rows mysql_insert_id mysql_result mysql_num_rows mysql_num_fields mysql_fetch_row mysql_fetch_array mysql_fetch_assoc mysql_fetch_object mysql_data_seek mysql_fetch_lengths mysql_fetch_field mysql_field_seek mysql_free_result mysql_field_name mysql_field_table mysql_field_len mysql_field_type mysql_field_flags mysql_escape_string mysql_real_escape_string mysql_stat mysql_thread_id mysql_client_encoding mysql_get_client_info mysql_get_host_info mysql_get_proto_info mysql_get_server_info mysql_info mysql mysql_fieldname mysql_fieldtable mysql_fieldlen mysql_fieldtype mysql_fieldflags mysql_selectdb mysql_createdb mysql_dropdb mysql_freeresult mysql_numfields mysql_numrows mysql_listdbs mysql_listtables mysql_listfields mysql_db_name mysql_dbname mysql_tablename mysql_table_name pg_connect pg_pconnect pg_close pg_connection_status pg_connection_busy pg_connection_reset pg_host pg_dbname pg_port pg_tty pg_options pg_ping pg_query pg_send_query pg_cancel_query pg_fetch_result pg_fetch_row pg_fetch_assoc pg_fetch_array pg_fetch_object pg_fetch_all pg_affected_rows pg_get_result pg_result_seek pg_result_status pg_free_result pg_last_oid pg_num_rows pg_num_fields pg_field_name pg_field_num pg_field_size pg_field_type pg_field_prtlen pg_field_is_null pg_get_notify pg_get_pid pg_result_error pg_last_error pg_last_notice pg_put_line pg_end_copy pg_copy_to pg_copy_from pg_trace pg_untrace pg_lo_create pg_lo_unlink pg_lo_open pg_lo_close pg_lo_read pg_lo_write pg_lo_read_all pg_lo_import pg_lo_export pg_lo_seek pg_lo_tell pg_escape_string pg_escape_bytea pg_unescape_bytea pg_client_encoding pg_set_client_encoding pg_meta_data pg_convert pg_insert pg_update pg_delete pg_select pg_exec pg_getlastoid pg_cmdtuples pg_errormessage pg_numrows pg_numfields pg_fieldname pg_fieldsize pg_fieldtype pg_fieldnum pg_fieldprtlen pg_fieldisnull pg_freeresult pg_result pg_loreadall pg_locreate pg_lounlink pg_loopen pg_loclose pg_loread pg_lowrite pg_loimport pg_loexport http_response_code get_declared_traits getimagesizefromstring socket_import_stream stream_set_chunk_size trait_exists header_register_callback class_uses session_status session_register_shutdown echo print global static exit array empty eval isset unset die include require include_once require_once json_decode json_encode json_last_error json_last_error_msg curl_close curl_copy_handle curl_errno curl_error curl_escape curl_exec curl_file_create curl_getinfo curl_init curl_multi_add_handle curl_multi_close curl_multi_exec curl_multi_getcontent curl_multi_info_read curl_multi_init curl_multi_remove_handle curl_multi_select curl_multi_setopt curl_multi_strerror curl_pause curl_reset curl_setopt_array curl_setopt curl_share_close curl_share_init curl_share_setopt curl_strerror curl_unescape curl_version mysqli_affected_rows mysqli_autocommit mysqli_change_user mysqli_character_set_name mysqli_close mysqli_commit mysqli_connect_errno mysqli_connect_error mysqli_connect mysqli_data_seek mysqli_debug mysqli_dump_debug_info mysqli_errno mysqli_error_list mysqli_error mysqli_fetch_all mysqli_fetch_array mysqli_fetch_assoc mysqli_fetch_field_direct mysqli_fetch_field mysqli_fetch_fields mysqli_fetch_lengths mysqli_fetch_object mysqli_fetch_row mysqli_field_count mysqli_field_seek mysqli_field_tell mysqli_free_result mysqli_get_charset mysqli_get_client_info mysqli_get_client_stats mysqli_get_client_version mysqli_get_connection_stats mysqli_get_host_info mysqli_get_proto_info mysqli_get_server_info mysqli_get_server_version mysqli_info mysqli_init mysqli_insert_id mysqli_kill mysqli_more_results mysqli_multi_query mysqli_next_result mysqli_num_fields mysqli_num_rows mysqli_options mysqli_ping mysqli_prepare mysqli_query mysqli_real_connect mysqli_real_escape_string mysqli_real_query mysqli_reap_async_query mysqli_refresh mysqli_rollback mysqli_select_db mysqli_set_charset mysqli_set_local_infile_default mysqli_set_local_infile_handler mysqli_sqlstate mysqli_ssl_set mysqli_stat mysqli_stmt_init mysqli_store_result mysqli_thread_id mysqli_thread_safe mysqli_use_result mysqli_warning_count".split(" "));
e.registerHelper("wordChars","php",/[\w$]/);var m={name:"clike",helperType:"php",keywords:g("abstract and array as break case catch class clone const continue declare default do else elseif enddeclare endfor endforeach endif endswitch endwhile extends final for foreach function global goto if implements interface instanceof namespace new or private protected public static switch throw trait try use var while xor die echo empty exit eval include include_once isset list require require_once return print unset __halt_compiler self static parent yield insteadof finally"),
blockKeywords:g("catch do else elseif for foreach if switch try while finally"),defKeywords:g("class function interface namespace trait"),atoms:g("true false null TRUE FALSE NULL __CLASS__ __DIR__ __FILE__ __LINE__ __METHOD__ __FUNCTION__ __NAMESPACE__ __TRAIT__"),builtin:g("func_num_args func_get_arg func_get_args strlen strcmp strncmp strcasecmp strncasecmp each error_reporting define defined trigger_error user_error set_error_handler restore_error_handler get_declared_classes get_loaded_extensions extension_loaded get_extension_funcs debug_backtrace constant bin2hex hex2bin sleep usleep time mktime gmmktime strftime gmstrftime strtotime date gmdate getdate localtime checkdate flush wordwrap htmlspecialchars htmlentities html_entity_decode md5 md5_file crc32 getimagesize image_type_to_mime_type phpinfo phpversion phpcredits strnatcmp strnatcasecmp substr_count strspn strcspn strtok strtoupper strtolower strpos strrpos strrev hebrev hebrevc nl2br basename dirname pathinfo stripslashes stripcslashes strstr stristr strrchr str_shuffle str_word_count strcoll substr substr_replace quotemeta ucfirst ucwords strtr addslashes addcslashes rtrim str_replace str_repeat count_chars chunk_split trim ltrim strip_tags similar_text explode implode setlocale localeconv parse_str str_pad chop strchr sprintf printf vprintf vsprintf sscanf fscanf parse_url urlencode urldecode rawurlencode rawurldecode readlink linkinfo link unlink exec system escapeshellcmd escapeshellarg passthru shell_exec proc_open proc_close rand srand getrandmax mt_rand mt_srand mt_getrandmax base64_decode base64_encode abs ceil floor round is_finite is_nan is_infinite bindec hexdec octdec decbin decoct dechex base_convert number_format fmod ip2long long2ip getenv putenv getopt microtime gettimeofday getrusage uniqid quoted_printable_decode set_time_limit get_cfg_var magic_quotes_runtime set_magic_quotes_runtime get_magic_quotes_gpc get_magic_quotes_runtime import_request_variables error_log serialize unserialize memory_get_usage var_dump var_export debug_zval_dump print_r highlight_file show_source highlight_string ini_get ini_get_all ini_set ini_alter ini_restore get_include_path set_include_path restore_include_path setcookie header headers_sent connection_aborted connection_status ignore_user_abort parse_ini_file is_uploaded_file move_uploaded_file intval floatval doubleval strval gettype settype is_null is_resource is_bool is_long is_float is_int is_integer is_double is_real is_numeric is_string is_array is_object is_scalar ereg ereg_replace eregi eregi_replace split spliti join sql_regcase dl pclose popen readfile rewind rmdir umask fclose feof fgetc fgets fgetss fread fopen fpassthru ftruncate fstat fseek ftell fflush fwrite fputs mkdir rename copy tempnam tmpfile file file_get_contents stream_select stream_context_create stream_context_set_params stream_context_set_option stream_context_get_options stream_filter_prepend stream_filter_append fgetcsv flock get_meta_tags stream_set_write_buffer set_file_buffer set_socket_blocking stream_set_blocking socket_set_blocking stream_get_meta_data stream_register_wrapper stream_wrapper_register stream_set_timeout socket_set_timeout socket_get_status realpath fnmatch fsockopen pfsockopen pack unpack get_browser crypt opendir closedir chdir getcwd rewinddir readdir dir glob fileatime filectime filegroup fileinode filemtime fileowner fileperms filesize filetype file_exists is_writable is_writeable is_readable is_executable is_file is_dir is_link stat lstat chown touch clearstatcache mail ob_start ob_flush ob_clean ob_end_flush ob_end_clean ob_get_flush ob_get_clean ob_get_length ob_get_level ob_get_status ob_get_contents ob_implicit_flush ob_list_handlers ksort krsort natsort natcasesort asort arsort sort rsort usort uasort uksort shuffle array_walk count end prev next reset current key min max in_array array_search extract compact array_fill range array_multisort array_push array_pop array_shift array_unshift array_splice array_slice array_merge array_merge_recursive array_keys array_values array_count_values array_reverse array_reduce array_pad array_flip array_change_key_case array_rand array_unique array_intersect array_intersect_assoc array_diff array_diff_assoc array_sum array_filter array_map array_chunk array_key_exists pos sizeof key_exists assert assert_options version_compare ftok str_rot13 aggregate session_name session_module_name session_save_path session_id session_regenerate_id session_decode session_register session_unregister session_is_registered session_encode session_start session_destroy session_unset session_set_save_handler session_cache_limiter session_cache_expire session_set_cookie_params session_get_cookie_params session_write_close preg_match preg_match_all preg_replace preg_replace_callback preg_split preg_quote preg_grep overload ctype_alnum ctype_alpha ctype_cntrl ctype_digit ctype_lower ctype_graph ctype_print ctype_punct ctype_space ctype_upper ctype_xdigit virtual apache_request_headers apache_note apache_lookup_uri apache_child_terminate apache_setenv apache_response_headers apache_get_version getallheaders mysql_connect mysql_pconnect mysql_close mysql_select_db mysql_create_db mysql_drop_db mysql_query mysql_unbuffered_query mysql_db_query mysql_list_dbs mysql_list_tables mysql_list_fields mysql_list_processes mysql_error mysql_errno mysql_affected_rows mysql_insert_id mysql_result mysql_num_rows mysql_num_fields mysql_fetch_row mysql_fetch_array mysql_fetch_assoc mysql_fetch_object mysql_data_seek mysql_fetch_lengths mysql_fetch_field mysql_field_seek mysql_free_result mysql_field_name mysql_field_table mysql_field_len mysql_field_type mysql_field_flags mysql_escape_string mysql_real_escape_string mysql_stat mysql_thread_id mysql_client_encoding mysql_get_client_info mysql_get_host_info mysql_get_proto_info mysql_get_server_info mysql_info mysql mysql_fieldname mysql_fieldtable mysql_fieldlen mysql_fieldtype mysql_fieldflags mysql_selectdb mysql_createdb mysql_dropdb mysql_freeresult mysql_numfields mysql_numrows mysql_listdbs mysql_listtables mysql_listfields mysql_db_name mysql_dbname mysql_tablename mysql_table_name pg_connect pg_pconnect pg_close pg_connection_status pg_connection_busy pg_connection_reset pg_host pg_dbname pg_port pg_tty pg_options pg_ping pg_query pg_send_query pg_cancel_query pg_fetch_result pg_fetch_row pg_fetch_assoc pg_fetch_array pg_fetch_object pg_fetch_all pg_affected_rows pg_get_result pg_result_seek pg_result_status pg_free_result pg_last_oid pg_num_rows pg_num_fields pg_field_name pg_field_num pg_field_size pg_field_type pg_field_prtlen pg_field_is_null pg_get_notify pg_get_pid pg_result_error pg_last_error pg_last_notice pg_put_line pg_end_copy pg_copy_to pg_copy_from pg_trace pg_untrace pg_lo_create pg_lo_unlink pg_lo_open pg_lo_close pg_lo_read pg_lo_write pg_lo_read_all pg_lo_import pg_lo_export pg_lo_seek pg_lo_tell pg_escape_string pg_escape_bytea pg_unescape_bytea pg_client_encoding pg_set_client_encoding pg_meta_data pg_convert pg_insert pg_update pg_delete pg_select pg_exec pg_getlastoid pg_cmdtuples pg_errormessage pg_numrows pg_numfields pg_fieldname pg_fieldsize pg_fieldtype pg_fieldnum pg_fieldprtlen pg_fieldisnull pg_freeresult pg_result pg_loreadall pg_locreate pg_lounlink pg_loopen pg_loclose pg_loread pg_lowrite pg_loimport pg_loexport http_response_code get_declared_traits getimagesizefromstring socket_import_stream stream_set_chunk_size trait_exists header_register_callback class_uses session_status session_register_shutdown echo print global static exit array empty eval isset unset die include require include_once require_once json_decode json_encode json_last_error json_last_error_msg curl_close curl_copy_handle curl_errno curl_error curl_escape curl_exec curl_file_create curl_getinfo curl_init curl_multi_add_handle curl_multi_close curl_multi_exec curl_multi_getcontent curl_multi_info_read curl_multi_init curl_multi_remove_handle curl_multi_select curl_multi_setopt curl_multi_strerror curl_pause curl_reset curl_setopt_array curl_setopt curl_share_close curl_share_init curl_share_setopt curl_strerror curl_unescape curl_version mysqli_affected_rows mysqli_autocommit mysqli_change_user mysqli_character_set_name mysqli_close mysqli_commit mysqli_connect_errno mysqli_connect_error mysqli_connect mysqli_data_seek mysqli_debug mysqli_dump_debug_info mysqli_errno mysqli_error_list mysqli_error mysqli_fetch_all mysqli_fetch_array mysqli_fetch_assoc mysqli_fetch_field_direct mysqli_fetch_field mysqli_fetch_fields mysqli_fetch_lengths mysqli_fetch_object mysqli_fetch_row mysqli_field_count mysqli_field_seek mysqli_field_tell mysqli_free_result mysqli_get_charset mysqli_get_client_info mysqli_get_client_stats mysqli_get_client_version mysqli_get_connection_stats mysqli_get_host_info mysqli_get_proto_info mysqli_get_server_info mysqli_get_server_version mysqli_info mysqli_init mysqli_insert_id mysqli_kill mysqli_more_results mysqli_multi_query mysqli_next_result mysqli_num_fields mysqli_num_rows mysqli_options mysqli_ping mysqli_prepare mysqli_query mysqli_real_connect mysqli_real_escape_string mysqli_real_query mysqli_reap_async_query mysqli_refresh mysqli_rollback mysqli_select_db mysqli_set_charset mysqli_set_local_infile_default mysqli_set_local_infile_handler mysqli_sqlstate mysqli_ssl_set mysqli_stat mysqli_stmt_init mysqli_store_result mysqli_thread_id mysqli_thread_safe mysqli_use_result mysqli_warning_count"),
multiLineStrings:!0,hooks:{$:function(b){b.eatWhile(/[\w\$_]/);return"variable-2"},"\x3c":function(b,a){if(b.match(/<</)){b.eatWhile(/[\w\.]/);var d=b.current().slice(3);if(d)return(a.tokStack||(a.tokStack=[])).push(d,0),a.tokenize=h(d),"string"}return!1},"#":function(b){for(;!b.eol()&&!b.match("?\x3e",!1);)b.next();return"comment"},"/":function(b){if(b.eat("/")){for(;!b.eol()&&!b.match("?\x3e",!1);)b.next();return"comment"}return!1},'"':function(b,a){(a.tokStack||(a.tokStack=[])).push('"',0);a.tokenize=
h('"');return"string"},"{":function(b,a){a.tokStack&&a.tokStack.length&&a.tokStack[a.tokStack.length-1]++;return!1},"}":function(b,a){a.tokStack&&0<a.tokStack.length&&!--a.tokStack[a.tokStack.length-1]&&(a.tokenize=h(a.tokStack[a.tokStack.length-2]));return!1}}};e.defineMode("php",function(b,a){var d=e.getMode(b,"text/html"),f=e.getMode(b,m);return{startState:function(){var k=e.startState(d),c=e.startState(f);return{html:k,php:c,curMode:a.startOpen?f:d,curState:a.startOpen?c:k,pending:null}},copyState:function(a){var c=
e.copyState(d,a.html),b=e.copyState(f,a.php);return{html:c,php:b,curMode:a.curMode,curState:a.curMode==d?c:b,pending:a.pending}},token:function(a,c){var b=c.curMode==f;a.sol()&&c.pending&&'"'!=c.pending&&"'"!=c.pending&&(c.pending=null);if(b)return b&&null==c.php.tokenize&&a.match("?\x3e")?(c.curMode=d,c.curState=c.html,"meta"):f.token(a,c.curState);if(a.match(/^<\?\w*/))return c.curMode=f,c.curState=c.php,"meta";if('"'==c.pending||"'"==c.pending){for(;!a.eol()&&a.next()!=c.pending;);b="string"}else c.pending&&
a.pos<c.pending.end?(a.pos=c.pending.end,b=c.pending.style):b=d.token(a,c.curState);c.pending&&(c.pending=null);var e=a.current(),g=e.search(/<\?/),h;-1!=g&&("string"==b&&(h=e.match(/[\'\"]$/))&&!/\?>/.test(e)?c.pending=h[0]:c.pending={end:a.pos,style:b},a.backUp(e.length-g));return b},indent:function(a,b){return a.curMode!=f&&/^\s*<\//.test(b)||a.curMode==f&&/^\?>/.test(b)?d.indent(a.html,b):a.curMode.indent(a.curState,b)},blockCommentStart:"/*",blockCommentEnd:"*/",lineComment:"//",innerMode:function(a){return{state:a.curState,
mode:a.curMode}}}},"htmlmixed","clike");e.defineMIME("application/x-httpd-php","php");e.defineMIME("application/x-httpd-php-open",{name:"php",startOpen:!0});e.defineMIME("text/x-php",m)});;
;/* module-key = 'com.atlassian.stash.stash-highlight-plugin:python', location = '/static/bower/CodeMirror/mode/python/python.js' */
(function(g){"object"==typeof exports&&"object"==typeof module?g(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],g):g(CodeMirror)})(function(g){function n(f){return new RegExp("^(("+f.join(")|(")+"))\\b")}function f(f){return f.scopes[f.scopes.length-1]}var y=n(["and","or","not","is"]),r="as assert break class continue def del elif else except finally for from global if import lambda pass raise return try while with yield in".split(" "),t="abs all any bin bool bytearray callable chr classmethod compile complex delattr dict dir divmod enumerate eval filter float format frozenset getattr globals hasattr hash help hex id input int isinstance issubclass iter len list locals map max memoryview min next object oct open ord pow property range repr reversed round set setattr slice sorted staticmethod str sum super tuple type vars zip __import__ NotImplemented Ellipsis __debug__".split(" "),
z="apply basestring buffer cmp coerce execfile file intern long raw_input reduce reload unichr unicode xrange False True None".split(" "),A=["exec","print"],B=["ascii","bytes","exec","print"],C=["nonlocal","False","True","None"];g.registerHelper("hintWords","python",r.concat(t));g.defineMode("python",function(q,e){function m(a,b){if(a.sol()&&"py"==f(b).type){var c=f(b).offset;if(a.eatSpace()){var d=a.indentation();d>c?p(a,b,"py"):d<c&&u(a,b)&&(b.errorToken=!0);return null}d=v(a,b);0<c&&u(a,b)&&(d+=
" error");return d}return v(a,b)}function v(a,b){if(a.eatSpace())return null;if("#"==a.peek())return a.skipToEnd(),"comment";if(a.match(/^[0-9\.]/,!1)){var c=!1;a.match(/^\d*\.\d+(e[\+\-]?\d+)?/i)&&(c=!0);a.match(/^\d+\.\d*/)&&(c=!0);a.match(/^\.\d+/)&&(c=!0);if(c)return a.eat(/J/i),"number";c=!1;a.match(/^0x[0-9a-f]+/i)&&(c=!0);a.match(/^0b[01]+/i)&&(c=!0);a.match(/^0o[0-7]+/i)&&(c=!0);a.match(/^[1-9]\d*(e[\+\-]?\d+)?/)&&(a.eat(/J/i),c=!0);a.match(/^0(?![\dx])/i)&&(c=!0);if(c)return a.eat(/L/i),
"number"}if(a.match(w))return b.tokenize=D(a.current()),b.tokenize(a,b);if(a.match(E)||a.match(F))return null;if(a.match(G)||a.match(x))return"operator";if(a.match(H))return null;if(a.match(I)||a.match(y))return"keyword";if(a.match(J))return"builtin";if(a.match(/^(self|cls)\b/))return"variable-2";if(a.match(l))return"def"==b.lastToken||"class"==b.lastToken?"def":"variable";a.next();return"error"}function D(a){function b(b,f){for(;!b.eol();)if(b.eatWhile(/[^'"\\]/),b.eat("\\")){if(b.next(),c&&b.eol())return"string"}else{if(b.match(a))return f.tokenize=
m,"string";b.eat(/['"]/)}if(c){if(e.singleLineStringErrors)return"error";f.tokenize=m}return"string"}for(;0<="rub".indexOf(a.charAt(0).toLowerCase());)a=a.substr(1);var c=1==a.length;b.isString=!0;return b}function p(a,b,c){var d=0,e=null;if("py"==c)for(;"py"!=f(b).type;)b.scopes.pop();d=f(b).offset+("py"==c?q.indentUnit:K);"py"==c||a.match(/^(\s|#.*)*$/,!1)||(e=a.column()+1);b.scopes.push({offset:d,type:c,align:e})}function u(a,b){for(var c=a.indentation();f(b).offset>c;){if("py"!=f(b).type)return!0;
b.scopes.pop()}return f(b).offset!=c}function L(a,b){var c=b.tokenize(a,b),d=a.current();if("."==d)return c=a.match(l,!1)?null:"error",null==c&&"meta"==b.lastStyle&&(c="meta"),c;if("@"==d)return e.version&&3==parseInt(e.version,10)?a.match(l,!1)?"meta":"operator":a.match(l,!1)?"meta":"error";"variable"!=c&&"builtin"!=c||"meta"!=b.lastStyle||(c="meta");if("pass"==d||"return"==d)b.dedent+=1;"lambda"==d&&(b.lambda=!0);":"!=d||b.lambda||"py"!=f(b).type||p(a,b,"py");var g=1==d.length?"[({".indexOf(d):
-1;-1!=g&&p(a,b,"])}".slice(g,g+1));g="])}".indexOf(d);if(-1!=g)if(f(b).type==d)b.scopes.pop();else return"error";0<b.dedent&&a.eol()&&"py"==f(b).type&&(1<b.scopes.length&&b.scopes.pop(),--b.dedent);return c}var H=e.singleDelimiters||/^[\(\)\[\]\{\}@,:`=;\.]/,G=e.doubleOperators||/^((==)|(!=)|(<=)|(>=)|(<>)|(<<)|(>>)|(\/\/)|(\*\*))/,F=e.doubleDelimiters||/^((\+=)|(\-=)|(\*=)|(%=)|(\/=)|(&=)|(\|=)|(\^=))/,E=e.tripleDelimiters||/^((\/\/=)|(>>=)|(<<=)|(\*\*=))/;if(e.version&&3==parseInt(e.version,10))var x=
e.singleOperators||/^[\+\-\*/%&|\^~<>!@]/,l=e.identifiers||/^[_A-Za-z\u00a1-\uffff][_A-Za-z0-9\u00a1-\uffff]*/;else x=e.singleOperators||/^[\+\-\*/%&|\^~<>!]/,l=e.identifiers||/^[_A-Za-z][_A-Za-z0-9]*/;var K=e.hangingIndent||q.indentUnit,h=r,k=t;void 0!=e.extra_keywords&&(h=h.concat(e.extra_keywords));void 0!=e.extra_builtins&&(k=k.concat(e.extra_builtins));if(e.version&&3==parseInt(e.version,10))var h=h.concat(C),k=k.concat(B),w=/^(([rb]|(br))?('{3}|"{3}|['"]))/i;else h=h.concat(A),k=k.concat(z),
w=/^(([rub]|(ur)|(br))?('{3}|"{3}|['"]))/i;var I=n(h),J=n(k);return{startState:function(a){return{tokenize:m,scopes:[{offset:a||0,type:"py",align:null}],lastStyle:null,lastToken:null,lambda:!1,dedent:0}},token:function(a,b){var c=b.errorToken;c&&(b.errorToken=!1);var d=L(a,b);b.lastStyle=d;var e=a.current();e&&d&&(b.lastToken=e);a.eol()&&b.lambda&&(b.lambda=!1);return c?d+" error":d},indent:function(a,b){if(a.tokenize!=m)return a.tokenize.isString?g.Pass:0;var c=f(a),d=b&&b.charAt(0)==c.type;return null!=
c.align?c.align-(d?1:0):d&&1<a.scopes.length?a.scopes[a.scopes.length-2].offset:c.offset},closeBrackets:{triples:"'\""},lineComment:"#",fold:"indent"}});g.defineMIME("text/x-python","python");g.defineMIME("text/x-cython",{name:"python",extra_keywords:"by cdef cimport cpdef ctypedef enum exceptextern gil include nogil property publicreadonly struct union DEF IF ELIF ELSE".split(" ")})});;
;/* module-key = 'com.atlassian.stash.stash-highlight-plugin:ruby', location = '/static/bower/CodeMirror/mode/ruby/ruby.js' */
(function(f){"object"==typeof exports&&"object"==typeof module?f(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],f):f(CodeMirror)})(function(f){f.defineMode("ruby",function(f){function n(a){for(var c={},b=0,d=a.length;b<d;++b)c[a[b]]=!0;return c}function k(a,c,b){b.tokenize.push(a);return a(c,b)}function m(a,c){g=null;if(a.sol()&&a.match("\x3dbegin")&&a.eol())return c.tokenize.push(r),"comment";if(a.eatSpace())return null;var b=a.next(),d;if("`"==
b||"'"==b||'"'==b)return k(l(b,"string",'"'==b||"`"==b),a,c);if("/"==b){d=a.current().length;if(a.skipTo("/")){var h=a.current().length;a.backUp(a.current().length-d);for(var e=0;a.current().length<h;){var f=a.next();"("==f?e+=1:")"==f&&--e;if(0>e)break}a.backUp(a.current().length-d);if(0==e)return k(l(b,"string-2",!0),a,c)}return"operator"}if("%"==b){b="string";d=!0;a.eat("s")?b="atom":a.eat(/[WQ]/)?b="string":a.eat(/[r]/)?b="string-2":a.eat(/[wxq]/)&&(b="string",d=!1);h=a.eat(/[^\w\s=]/);if(!h)return"operator";
p.propertyIsEnumerable(h)&&(h=p[h]);return k(l(h,b,d,!0),a,c)}if("#"==b)return a.skipToEnd(),"comment";if("\x3c"==b&&(d=a.match(/^<-?[\`\"\']?([a-zA-Z_?]\w*)[\`\"\']?(?:;|$)/)))return k(t(d[1]),a,c);if("0"==b)return a.eat("x")?a.eatWhile(/[\da-fA-F]/):a.eat("b")?a.eatWhile(/[01]/):a.eatWhile(/[0-7]/),"number";if(/\d/.test(b))return a.match(/^[\d_]*(?:\.[\d_]+)?(?:[eE][+\-]?[\d_]+)?/),"number";if("?"==b){for(;a.match(/^\\[CM]-/););a.eat("\\")?a.eatWhile(/\w/):a.next();return"string"}if(":"==b)return a.eat("'")?
k(l("'","atom",!1),a,c):a.eat('"')?k(l('"',"atom",!0),a,c):a.eat(/[\<\>]/)?(a.eat(/[\<\>]/),"atom"):a.eat(/[\+\-\*\/\&\|\:\!]/)?"atom":a.eat(/[a-zA-Z$@_\xa1-\uffff]/)?(a.eatWhile(/[\w$\xa1-\uffff]/),a.eat(/[\?\!\=]/),"atom"):"operator";if("@"==b&&a.match(/^@?[a-zA-Z_\xa1-\uffff]/))return a.eat("@"),a.eatWhile(/[\w\xa1-\uffff]/),"variable-2";if("$"==b)return a.eat(/[a-zA-Z_]/)?a.eatWhile(/[\w]/):a.eat(/\d/)?a.eat(/\d/):a.next(),"variable-3";if(/[a-zA-Z_\xa1-\uffff]/.test(b))return a.eatWhile(/[\w\xa1-\uffff]/),
a.eat(/[\?\!]/),a.eat(":")?"atom":"ident";if("|"!=b||!c.varList&&"{"!=c.lastTok&&"do"!=c.lastTok)return/[\(\)\[\]{}\\;]/.test(b)?(g=b,null):"-"==b&&a.eat("\x3e")?"arrow":/[=+\-\/*:\.^%<>~|]/.test(b)?(d=a.eatWhile(/[=+\-\/*:\.^%<>~|]/),"."!=b||d||(g="."),"operator"):null;g="|";return null}function q(a){a||(a=1);return function(c,b){if("}"==c.peek()){if(1==a)return b.tokenize.pop(),b.tokenize[b.tokenize.length-1](c,b);b.tokenize[b.tokenize.length-1]=q(a-1)}else"{"==c.peek()&&(b.tokenize[b.tokenize.length-
1]=q(a+1));return m(c,b)}}function u(){var a=!1;return function(c,b){if(a)return b.tokenize.pop(),b.tokenize[b.tokenize.length-1](c,b);a=!0;return m(c,b)}}function l(a,c,b,d){return function(h,e){var f=!1,g;"read-quoted-paused"===e.context.type&&(e.context=e.context.prev,h.eat("}"));for(;null!=(g=h.next());){if(g==a&&(d||!f)){e.tokenize.pop();break}if(b&&"#"==g&&!f)if(h.eat("{")){"}"==a&&(e.context={prev:e.context,type:"read-quoted-paused"});e.tokenize.push(q());break}else if(/[@\$]/.test(h.peek())){e.tokenize.push(u());
break}f=!f&&"\\"==g}return c}}function t(a){return function(c,b){c.match(a)?b.tokenize.pop():c.skipToEnd();return"string"}}function r(a,c){a.sol()&&a.match("\x3dend")&&a.eol()&&c.tokenize.pop();a.skipToEnd();return"comment"}var v=n("alias and BEGIN begin break case class def defined? do else elsif END end ensure false for if in module next not or redo rescue retry return self super then true undef unless until when while yield nil raise throw catch fail loop callcc caller lambda proc public protected private require load require_relative extend autoload __END__ __FILE__ __LINE__ __dir__".split(" ")),
w=n("def class case for while module then catch loop proc begin".split(" ")),x=n(["end","until"]),p={"[":"]","{":"}","(":")"},g;return{startState:function(){return{tokenize:[m],indented:0,context:{type:"top",indented:-f.indentUnit},continuedLine:!1,lastTok:null,varList:!1}},token:function(a,c){a.sol()&&(c.indented=a.indentation());var b=c.tokenize[c.tokenize.length-1](a,c),d,f=g;if("ident"==b){var e=a.current(),b="."==c.lastTok?"property":v.propertyIsEnumerable(a.current())?"keyword":/^[A-Z]/.test(e)?
"tag":"def"==c.lastTok||"class"==c.lastTok||c.varList?"def":"variable";"keyword"==b&&(f=e,w.propertyIsEnumerable(e)?d="indent":x.propertyIsEnumerable(e)?d="dedent":"if"!=e&&"unless"!=e||a.column()!=a.indentation()?"do"==e&&c.context.indented<c.indented&&(d="indent"):d="indent")}if(g||b&&"comment"!=b)c.lastTok=f;"|"==g&&(c.varList=!c.varList);"indent"==d||/[\(\[\{]/.test(g)?c.context={prev:c.context,type:g||b,indented:c.indented}:("dedent"==d||/[\)\]\}]/.test(g))&&c.context.prev&&(c.context=c.context.prev);
a.eol()&&(c.continuedLine="\\"==g||"operator"==b);return b},indent:function(a,c){if(a.tokenize[a.tokenize.length-1]!=m)return 0;var b=c&&c.charAt(0),d=a.context,b=d.type==p[b]||"keyword"==d.type&&/^(?:end|until|else|elsif|when|rescue)\b/.test(c);return d.indented+(b?0:f.indentUnit)+(a.continuedLine?f.indentUnit:0)},electricChars:"}de",lineComment:"#"}});f.defineMIME("text/x-ruby","ruby")});;
;/* module-key = 'com.atlassian.stash.stash-highlight-plugin:sass', location = '/static/bower/CodeMirror/mode/sass/sass.js' */
(function(f){"object"==typeof exports&&"object"==typeof module?f(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],f):f(CodeMirror)})(function(f){f.defineMode("sass",function(f){function k(a,b){var c=a.peek();if(")"===c)return a.next(),b.tokenizer=g,"operator";if("("===c)return a.next(),a.eatSpace(),"operator";b.tokenizer="'"===c||'"'===c?h(a.next()):h(")",!1);return"string"}function l(a,b){return function(c,d){if(c.sol()&&c.indentation()<=a)return d.tokenizer=
g,g(c,d);b&&c.skipTo("*/")?(c.next(),c.next(),d.tokenizer=g):c.skipToEnd();return"comment"}}function h(a,b){function c(d,f){var e=d.next(),m=d.peek(),h=d.string.charAt(d.pos-2);return"\\"!==e&&m===a||e===a&&"\\"!==h?(e!==a&&b&&d.next(),f.tokenizer=g,"string"):"#"===e&&"{"===m?(f.tokenizer=n(c),d.next(),"operator"):"string"}null==b&&(b=!0);return c}function n(a){return function(b,c){return"}"===b.peek()?(b.next(),c.tokenizer=a,"operator"):g(b,c)}}function e(a){0==a.indentCount&&(a.indentCount++,a.scopes.unshift({offset:a.scopes[0].offset+
f.indentUnit}))}function g(a,b){var c=a.peek();if(a.match("/*"))return b.tokenizer=l(a.indentation(),!0),b.tokenizer(a,b);if(a.match("//"))return b.tokenizer=l(a.indentation(),!1),b.tokenizer(a,b);if(a.match("#{"))return b.tokenizer=n(g),"operator";if('"'===c||"'"===c)return a.next(),b.tokenizer=h(c),"string";if(b.cursorHalf){if("#"===c&&(a.next(),a.match(/[0-9a-fA-F]{6}|[0-9a-fA-F]{3}/))||a.match(/^-?[0-9\.]+/))return a.peek()||(b.cursorHalf=0),"number";if(a.match(/^(px|em|in)\b/))return a.peek()||
(b.cursorHalf=0),"unit";if(a.match(p))return a.peek()||(b.cursorHalf=0),"keyword";if(a.match(/^url/)&&"("===a.peek())return b.tokenizer=k,a.peek()||(b.cursorHalf=0),"atom";if("$"===c)return a.next(),a.eatWhile(/[\w-]/),a.peek()||(b.cursorHalf=0),"variable-3";if("!"===c)return a.next(),a.peek()||(b.cursorHalf=0),a.match(/^[\w]+/)?"keyword":"operator";if(a.match(q))return a.peek()||(b.cursorHalf=0),"operator";if(a.eatWhile(/[\w-]/))return a.peek()||(b.cursorHalf=0),"attribute";if(!a.peek())return b.cursorHalf=
0,null}else{if("."===c&&(a.next(),a.match(/^[\w-]+/)||"#"===a.peek())||"#"===c&&(a.next(),a.match(/^[\w-]+/)||"#"===a.peek()))return e(b),"atom";if("$"===c)return a.next(),a.eatWhile(/[\w-]/),"variable-2";if(a.match(/^-?[0-9\.]+/))return"number";if(a.match(/^(px|em|in)\b/))return"unit";if(a.match(p))return"keyword";if(a.match(/^url/)&&"("===a.peek())return b.tokenizer=k,"atom";if("\x3d"===c&&a.match(/^=[\w-]+/))return e(b),"meta";if("+"===c&&a.match(/^\+[\w-]+/))return"variable-3";"@"===c&&a.match(/@extend/)&&
!a.match(/\s*[\w]/)&&1!=b.scopes.length&&b.scopes.shift();if(a.match(/^@(else if|if|media|else|for|each|while|mixin|function)/))return e(b),"meta";if("@"===c)return a.next(),a.eatWhile(/[\w-]/),"meta";if(a.eatWhile(/[\w-]/)){if(a.match(/ *: *[\w-\+\$#!\("']/,!1))return"property";a.match(/ *:/,!1)?(e(b),b.cursorHalf=1):a.match(/ *,/,!1)||e(b);return"atom"}if(":"===c){if(a.match(r))return"keyword";a.next();b.cursorHalf=1;return"operator"}}if(a.match(q))return"operator";a.next();return null}var p=/^true|false|null|auto/,
q=/^\(|\)|=|>|<|==|>=|<=|\+|-|\!=|\/|\*|%|and|or|not|;|\{|\}|:/,r=/^::?[a-zA-Z_][\w\-]*/;return{startState:function(){return{tokenizer:g,scopes:[{offset:0,type:"sass"}],indentCount:0,cursorHalf:0,definedVars:[],definedMixins:[]}},token:function(a,b){a.sol()&&(b.indentCount=0);var c=b.tokenizer(a,b),d=a.current();"@return"!==d&&"}"!==d||1==b.scopes.length||b.scopes.shift();if(null!==c){for(var d=a.pos-d.length+f.indentUnit*b.indentCount,e=[],g=0;g<b.scopes.length;g++){var h=b.scopes[g];h.offset<=d&&
e.push(h)}b.scopes=e}b.lastToken={style:c,content:a.current()};return c},indent:function(a){return a.scopes[0].offset}}});f.defineMIME("text/x-sass","sass")});;
;/* module-key = 'com.atlassian.stash.stash-highlight-plugin:shell', location = '/static/bower/CodeMirror/mode/shell/shell.js' */
(function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)})(function(e){e.defineMode("shell",function(){function e(a,c){for(var d=c.split(" "),b=0;b<d.length;b++)h[d[b]]=a}function g(a,c){if(a.eatSpace())return null;var d=a.sol(),b=a.next();if("\\"===b)return a.next(),null;if("'"===b||'"'===b||"`"===b)return c.tokens.unshift(k(b)),(c.tokens[0]||g)(a,c);if("#"===b){if(d&&a.eat("!"))return a.skipToEnd(),
"meta";a.skipToEnd();return"comment"}if("$"===b)return c.tokens.unshift(l),(c.tokens[0]||g)(a,c);if("+"===b||"\x3d"===b)return"operator";if("-"===b)return a.eat("-"),a.eatWhile(/\w/),"attribute";if(/\d/.test(b)&&(a.eatWhile(/\d/),a.eol()||!/\w/.test(a.peek())))return"number";a.eatWhile(/[\w-]/);d=a.current();return"\x3d"===a.peek()&&/\w+/.test(d)?"def":h.hasOwnProperty(d)?h[d]:null}function k(a){return function(c,d){for(var b,e=!1,f=!1;null!=(b=c.next());){if(b===a&&!f){e=!0;break}if("$"===b&&!f&&
"'"!==a){f=!0;c.backUp(1);d.tokens.unshift(l);break}f=!f&&"\\"===b}!e&&f||d.tokens.shift();return"`"===a||")"===a?"quote":"string"}}var h={};e("atom","true false");e("keyword","if then do else elif while until for in esac fi fin fil done exit set unset export function");e("builtin","ab awk bash beep cat cc cd chown chmod chroot clear cp curl cut diff echo find gawk gcc get git grep kill killall ln ls make mkdir openssl mv nc node npm ping ps restart rm rmdir sed service sh shopt shred source sort sleep ssh start stop su sudo tee telnet top touch vi vim wall wc wget who write yes zsh");
var l=function(a,c){1<c.tokens.length&&a.eat("$");var d=a.next(),b=/\w/;"{"===d&&(b=/[^}]/);if("("===d)return c.tokens[0]=k(")"),(c.tokens[0]||g)(a,c);/\d/.test(d)||(a.eatWhile(b),a.eat("}"));c.tokens.shift();return"def"};return{startState:function(){return{tokens:[]}},token:function(a,c){return(c.tokens[0]||g)(a,c)},lineComment:"#",fold:"brace"}});e.defineMIME("text/x-sh","shell")});;
;/* module-key = 'com.atlassian.stash.stash-highlight-plugin:sql', location = '/static/bower/CodeMirror/mode/sql/sql.js' */
(function(d){"object"==typeof exports&&"object"==typeof module?d(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],d):d(CodeMirror)})(function(d){d.defineMode("sql",function(l,e){function k(b,h){var c=b.next();if(m[c]){var d=m[c](b,h);if(!1!==d)return d}if(1==f.hexNumber&&("0"==c&&b.match(/^[xX][0-9a-fA-F]+/)||("x"==c||"X"==c)&&b.match(/^'[0-9a-fA-F]+'/))||1==f.binaryNumber&&(("b"==c||"B"==c)&&b.match(/^'[01]+'/)||"0"==c&&b.match(/^b[01]+/)))return"number";
if(47<c.charCodeAt(0)&&58>c.charCodeAt(0))return b.match(/^[0-9]*\.?[0-9]+([eE][-+]?[0-9]+)?/),1==f.decimallessFloat&&b.eat("."),"number";if("?"==c&&(b.eatSpace()||b.eol()||b.eat(";")))return"variable-3";if("'"==c||'"'==c&&f.doubleQuote)return h.tokenize=a(c),h.tokenize(b,h);if(!(1==f.nCharCast&&("n"==c||"N"==c)||1==f.charsetCast&&"_"==c&&b.match(/[a-z][a-z0-9]*/i))||"'"!=b.peek()&&'"'!=b.peek()){if(/^[\(\),\;\[\]]/.test(c))return null;if(f.commentSlashSlash&&"/"==c&&b.eat("/")||f.commentHash&&"#"==
c||"-"==c&&b.eat("-")&&(!f.commentSpaceRequired||b.eat(" ")))return b.skipToEnd(),"comment";if("/"==c&&b.eat("*"))return h.tokenize=g,h.tokenize(b,h);if("."==c){if(1==f.zerolessFloat&&b.match(/^(?:\d+(?:e[+-]?\d+)?)/i))return"number";if(1==f.ODBCdotTable&&b.match(/^[a-zA-Z_]+/))return"variable-2"}else{if(n.test(c))return b.eatWhile(n),null;if("{"==c&&(b.match(/^( )*(d|D|t|T|ts|TS)( )*'[^']*'( )*}/)||b.match(/^( )*(d|D|t|T|ts|TS)( )*"[^"]*"( )*}/)))return"number";b.eatWhile(/^[_\w\d]/);c=b.current().toLowerCase();
return q.hasOwnProperty(c)&&(b.match(/^( )+'[^']*'/)||b.match(/^( )+"[^"]*"/))?"number":r.hasOwnProperty(c)?"atom":t.hasOwnProperty(c)?"builtin":u.hasOwnProperty(c)?"keyword":v.hasOwnProperty(c)?"string-2":null}}else return"keyword"}function a(b){return function(a,c){for(var g=!1,d;null!=(d=a.next());){if(d==b&&!g){c.tokenize=k;break}g=!g&&"\\"==d}return"string"}}function g(b,a){for(;;)if(b.skipTo("*")){if(b.next(),b.eat("/")){a.tokenize=k;break}}else{b.skipToEnd();break}return"comment"}function p(b,
a,c){a.context={prev:a.context,indent:b.indentation(),col:b.column(),type:c}}var v=e.client||{},r=e.atoms||{"false":!0,"true":!0,"null":!0},t=e.builtin||{},u=e.keywords||{},n=e.operatorChars||/^[*+\-%<>!=&|~^]/,f=e.support||{},m=e.hooks||{},q=e.dateSQL||{date:!0,time:!0,timestamp:!0};return{startState:function(){return{tokenize:k,context:null}},token:function(b,a){b.sol()&&a.context&&null==a.context.align&&(a.context.align=!1);if(b.eatSpace())return null;var c=a.tokenize(b,a);if("comment"==c)return c;
a.context&&null==a.context.align&&(a.context.align=!0);var g=b.current();"("==g?p(b,a,")"):"["==g?p(b,a,"]"):a.context&&a.context.type==g&&(a.indent=a.context.indent,a.context=a.context.prev);return c},indent:function(a,g){var c=a.context;if(!c)return d.Pass;var f=g.charAt(0)==c.type;return c.align?c.col+(f?0:1):c.indent+(f?0:l.indentUnit)},blockCommentStart:"/*",blockCommentEnd:"*/",lineComment:f.commentSlashSlash?"//":f.commentHash?"#":null}});(function(){function l(a){for(var d;null!=(d=a.next());)if("`"==
d&&!a.eat("`"))return"variable-2";a.backUp(a.current().length-1);return a.eatWhile(/\w/)?"variable-2":null}function e(a){a.eat("@")&&(a.match(/^session\./),a.match(/^local\./),a.match(/^global\./));return a.eat("'")?(a.match(/^.*'/),"variable-2"):a.eat('"')?(a.match(/^.*"/),"variable-2"):a.eat("`")?(a.match(/^.*`/),"variable-2"):a.match(/^[0-9a-zA-Z$\.\_]+/)?"variable-2":null}function k(a){return a.eat("N")?"atom":a.match(/^[a-zA-Z.#!?]/)?"variable-2":null}function a(a){var d={};a=a.split(" ");for(var e=
0;e<a.length;++e)d[a[e]]=!0;return d}d.defineMIME("text/x-sql",{name:"sql",keywords:a("alter and as asc between by count create delete desc distinct drop from group having in insert into is join like not on or order select set table union update values where begin"),builtin:a("bool boolean bit blob enum long longblob longtext medium mediumblob mediumint mediumtext time timestamp tinyblob tinyint tinytext text bigint int int1 int2 int3 int4 int8 integer float float4 float8 double char varbinary varchar varcharacter precision real date datetime year unsigned signed decimal numeric"),
atoms:a("false true null unknown"),operatorChars:/^[*+\-%<>!=]/,dateSQL:a("date time timestamp"),support:a("ODBCdotTable doubleQuote binaryNumber hexNumber")});d.defineMIME("text/x-mssql",{name:"sql",client:a("charset clear connect edit ego exit go help nopager notee nowarning pager print prompt quit rehash source status system tee"),keywords:a("alter and as asc between by count create delete desc distinct drop from group having in insert into is join like not on or order select set table union update values where begin trigger proc view index for add constraint key primary foreign collate clustered nonclustered declare"),
builtin:a("bigint numeric bit smallint decimal smallmoney int tinyint money float real char varchar text nchar nvarchar ntext binary varbinary image cursor timestamp hierarchyid uniqueidentifier sql_variant xml table "),atoms:a("false true null unknown"),operatorChars:/^[*+\-%<>!=]/,dateSQL:a("date datetimeoffset datetime2 smalldatetime datetime time"),hooks:{"@":e}});d.defineMIME("text/x-mysql",{name:"sql",client:a("charset clear connect edit ego exit go help nopager notee nowarning pager print prompt quit rehash source status system tee"),
keywords:a("alter and as asc between by count create delete desc distinct drop from group having in insert into is join like not on or order select set table union update values where accessible action add after algorithm all analyze asensitive at authors auto_increment autocommit avg avg_row_length before binary binlog both btree cache call cascade cascaded case catalog_name chain change changed character check checkpoint checksum class_origin client_statistics close coalesce code collate collation collations column columns comment commit committed completion concurrent condition connection consistent constraint contains continue contributors convert cross current current_date current_time current_timestamp current_user cursor data database databases day_hour day_microsecond day_minute day_second deallocate dec declare default delay_key_write delayed delimiter des_key_file describe deterministic dev_pop dev_samp deviance diagnostics directory disable discard distinctrow div dual dumpfile each elseif enable enclosed end ends engine engines enum errors escape escaped even event events every execute exists exit explain extended fast fetch field fields first flush for force foreign found_rows full fulltext function general get global grant grants group group_concat handler hash help high_priority hosts hour_microsecond hour_minute hour_second if ignore ignore_server_ids import index index_statistics infile inner innodb inout insensitive insert_method install interval invoker isolation iterate key keys kill language last leading leave left level limit linear lines list load local localtime localtimestamp lock logs low_priority master master_heartbeat_period master_ssl_verify_server_cert masters match max max_rows maxvalue message_text middleint migrate min min_rows minute_microsecond minute_second mod mode modifies modify mutex mysql_errno natural next no no_write_to_binlog offline offset one online open optimize option optionally out outer outfile pack_keys parser partition partitions password phase plugin plugins prepare preserve prev primary privileges procedure processlist profile profiles purge query quick range read read_write reads real rebuild recover references regexp relaylog release remove rename reorganize repair repeatable replace require resignal restrict resume return returns revoke right rlike rollback rollup row row_format rtree savepoint schedule schema schema_name schemas second_microsecond security sensitive separator serializable server session share show signal slave slow smallint snapshot soname spatial specific sql sql_big_result sql_buffer_result sql_cache sql_calc_found_rows sql_no_cache sql_small_result sqlexception sqlstate sqlwarning ssl start starting starts status std stddev stddev_pop stddev_samp storage straight_join subclass_origin sum suspend table_name table_statistics tables tablespace temporary terminated to trailing transaction trigger triggers truncate uncommitted undo uninstall unique unlock upgrade usage use use_frm user user_resources user_statistics using utc_date utc_time utc_timestamp value variables varying view views warnings when while with work write xa xor year_month zerofill begin do then else loop repeat"),
builtin:a("bool boolean bit blob decimal double float long longblob longtext medium mediumblob mediumint mediumtext time timestamp tinyblob tinyint tinytext text bigint int int1 int2 int3 int4 int8 integer float float4 float8 double char varbinary varchar varcharacter precision date datetime year unsigned signed numeric"),atoms:a("false true null unknown"),operatorChars:/^[*+\-%<>!=&|^]/,dateSQL:a("date time timestamp"),support:a("ODBCdotTable decimallessFloat zerolessFloat binaryNumber hexNumber doubleQuote nCharCast charsetCast commentHash commentSpaceRequired"),
hooks:{"@":e,"`":l,"\\":k}});d.defineMIME("text/x-mariadb",{name:"sql",client:a("charset clear connect edit ego exit go help nopager notee nowarning pager print prompt quit rehash source status system tee"),keywords:a("alter and as asc between by count create delete desc distinct drop from group having in insert into is join like not on or order select set table union update values where accessible action add after algorithm all always analyze asensitive at authors auto_increment autocommit avg avg_row_length before binary binlog both btree cache call cascade cascaded case catalog_name chain change changed character check checkpoint checksum class_origin client_statistics close coalesce code collate collation collations column columns comment commit committed completion concurrent condition connection consistent constraint contains continue contributors convert cross current current_date current_time current_timestamp current_user cursor data database databases day_hour day_microsecond day_minute day_second deallocate dec declare default delay_key_write delayed delimiter des_key_file describe deterministic dev_pop dev_samp deviance diagnostics directory disable discard distinctrow div dual dumpfile each elseif enable enclosed end ends engine engines enum errors escape escaped even event events every execute exists exit explain extended fast fetch field fields first flush for force foreign found_rows full fulltext function general generated get global grant grants group groupby_concat handler hard hash help high_priority hosts hour_microsecond hour_minute hour_second if ignore ignore_server_ids import index index_statistics infile inner innodb inout insensitive insert_method install interval invoker isolation iterate key keys kill language last leading leave left level limit linear lines list load local localtime localtimestamp lock logs low_priority master master_heartbeat_period master_ssl_verify_server_cert masters match max max_rows maxvalue message_text middleint migrate min min_rows minute_microsecond minute_second mod mode modifies modify mutex mysql_errno natural next no no_write_to_binlog offline offset one online open optimize option optionally out outer outfile pack_keys parser partition partitions password persistent phase plugin plugins prepare preserve prev primary privileges procedure processlist profile profiles purge query quick range read read_write reads real rebuild recover references regexp relaylog release remove rename reorganize repair repeatable replace require resignal restrict resume return returns revoke right rlike rollback rollup row row_format rtree savepoint schedule schema schema_name schemas second_microsecond security sensitive separator serializable server session share show shutdown signal slave slow smallint snapshot soft soname spatial specific sql sql_big_result sql_buffer_result sql_cache sql_calc_found_rows sql_no_cache sql_small_result sqlexception sqlstate sqlwarning ssl start starting starts status std stddev stddev_pop stddev_samp storage straight_join subclass_origin sum suspend table_name table_statistics tables tablespace temporary terminated to trailing transaction trigger triggers truncate uncommitted undo uninstall unique unlock upgrade usage use use_frm user user_resources user_statistics using utc_date utc_time utc_timestamp value variables varying view views virtual warnings when while with work write xa xor year_month zerofill begin do then else loop repeat"),
builtin:a("bool boolean bit blob decimal double float long longblob longtext medium mediumblob mediumint mediumtext time timestamp tinyblob tinyint tinytext text bigint int int1 int2 int3 int4 int8 integer float float4 float8 double char varbinary varchar varcharacter precision date datetime year unsigned signed numeric"),atoms:a("false true null unknown"),operatorChars:/^[*+\-%<>!=&|^]/,dateSQL:a("date time timestamp"),support:a("ODBCdotTable decimallessFloat zerolessFloat binaryNumber hexNumber doubleQuote nCharCast charsetCast commentHash commentSpaceRequired"),
hooks:{"@":e,"`":l,"\\":k}});d.defineMIME("text/x-cassandra",{name:"sql",client:{},keywords:a("add all allow alter and any apply as asc authorize batch begin by clustering columnfamily compact consistency count create custom delete desc distinct drop each_quorum exists filtering from grant if in index insert into key keyspace keyspaces level limit local_one local_quorum modify nan norecursive nosuperuser not of on one order password permission permissions primary quorum rename revoke schema select set storage superuser table three to token truncate ttl two type unlogged update use user users using values where with writetime"),
builtin:a("ascii bigint blob boolean counter decimal double float frozen inet int list map static text timestamp timeuuid tuple uuid varchar varint"),atoms:a("false true infinity NaN"),operatorChars:/^[<>=]/,dateSQL:{},support:a("commentSlashSlash decimallessFloat"),hooks:{}});d.defineMIME("text/x-plsql",{name:"sql",client:a("appinfo arraysize autocommit autoprint autorecovery autotrace blockterminator break btitle cmdsep colsep compatibility compute concat copycommit copytypecheck define describe echo editfile embedded escape exec execute feedback flagger flush heading headsep instance linesize lno loboffset logsource long longchunksize markup native newpage numformat numwidth pagesize pause pno recsep recsepchar release repfooter repheader serveroutput shiftinout show showmode size spool sqlblanklines sqlcase sqlcode sqlcontinue sqlnumber sqlpluscompatibility sqlprefix sqlprompt sqlterminator suffix tab term termout time timing trimout trimspool ttitle underline verify version wrap"),
keywords:a("abort accept access add all alter and any array arraylen as asc assert assign at attributes audit authorization avg base_table begin between binary_integer body boolean by case cast char char_base check close cluster clusters colauth column comment commit compress connect connected constant constraint crash create current currval cursor data_base database date dba deallocate debugoff debugon decimal declare default definition delay delete desc digits dispose distinct do drop else elseif elsif enable end entry escape exception exception_init exchange exclusive exists exit external fast fetch file for force form from function generic goto grant group having identified if immediate in increment index indexes indicator initial initrans insert interface intersect into is key level library like limited local lock log logging long loop master maxextents maxtrans member minextents minus mislabel mode modify multiset new next no noaudit nocompress nologging noparallel not nowait number_base object of off offline on online only open option or order out package parallel partition pctfree pctincrease pctused pls_integer positive positiven pragma primary prior private privileges procedure public raise range raw read rebuild record ref references refresh release rename replace resource restrict return returning returns reverse revoke rollback row rowid rowlabel rownum rows run savepoint schema segment select separate session set share snapshot some space split sql start statement storage subtype successful synonym tabauth table tables tablespace task terminate then to trigger truncate type union unique unlimited unrecoverable unusable update use using validate value values variable view views when whenever where while with work"),
builtin:a("abs acos add_months ascii asin atan atan2 average bfile bfilename bigserial bit blob ceil character chartorowid chr clob concat convert cos cosh count dec decode deref dual dump dup_val_on_index empty error exp false float floor found glb greatest hextoraw initcap instr instrb int integer isopen last_day least lenght lenghtb ln lower lpad ltrim lub make_ref max min mlslabel mod months_between natural naturaln nchar nclob new_time next_day nextval nls_charset_decl_len nls_charset_id nls_charset_name nls_initcap nls_lower nls_sort nls_upper nlssort no_data_found notfound null number numeric nvarchar2 nvl others power rawtohex real reftohex round rowcount rowidtochar rowtype rpad rtrim serial sign signtype sin sinh smallint soundex sqlcode sqlerrm sqrt stddev string substr substrb sum sysdate tan tanh to_char text to_date to_label to_multi_byte to_number to_single_byte translate true trunc uid unlogged upper user userenv varchar varchar2 variance varying vsize xml"),
operatorChars:/^[*+\-%<>!=~]/,dateSQL:a("date time timestamp"),support:a("doubleQuote nCharCast zerolessFloat binaryNumber hexNumber")});d.defineMIME("text/x-hive",{name:"sql",keywords:a("select alter $elem$ $key$ $value$ add after all analyze and archive as asc before between binary both bucket buckets by cascade case cast change cluster clustered clusterstatus collection column columns comment compute concatenate continue create cross cursor data database databases dbproperties deferred delete delimited desc describe directory disable distinct distribute drop else enable end escaped exclusive exists explain export extended external false fetch fields fileformat first format formatted from full function functions grant group having hold_ddltime idxproperties if import in index indexes inpath inputdriver inputformat insert intersect into is items join keys lateral left like limit lines load local location lock locks mapjoin materialized minus msck no_drop nocompress not of offline on option or order out outer outputdriver outputformat overwrite partition partitioned partitions percent plus preserve procedure purge range rcfile read readonly reads rebuild recordreader recordwriter recover reduce regexp rename repair replace restrict revoke right rlike row schema schemas semi sequencefile serde serdeproperties set shared show show_database sort sorted ssl statistics stored streamtable table tables tablesample tblproperties temporary terminated textfile then tmp to touch transform trigger true unarchive undo union uniquejoin unlock update use using utc utc_tmestamp view when where while with"),
builtin:a("bool boolean long timestamp tinyint smallint bigint int float double date datetime unsigned string array struct map uniontype"),atoms:a("false true null unknown"),operatorChars:/^[*+\-%<>!=]/,dateSQL:a("date timestamp"),support:a("ODBCdotTable doubleQuote binaryNumber hexNumber")})})()});;
;/* module-key = 'com.atlassian.stash.stash-highlight-plugin:vbscript', location = '/static/bower/CodeMirror/mode/vbscript/vbscript.js' */
(function(e){"object"==typeof exports&&"object"==typeof module?e(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],e):e(CodeMirror)})(function(e){e.defineMode("vbscript",function(e,n){function d(a){return new RegExp("^(("+a.join(")|(")+"))\\b","i")}function h(a,c){if(a.eatSpace())return"space";if("'"===a.peek()||a.match(p))return a.skipToEnd(),"comment";if(a.match(/^((&H)|(&O))?[0-9\.]/i,!1)&&!a.match(/^((&H)|(&O))?[0-9\.]+[a-z_]/i,!1)){var b=!1;
a.match(/^\d*\.\d+/i)?b=!0:a.match(/^\d+\.\d*/)?b=!0:a.match(/^\.\d+/)&&(b=!0);if(b)return a.eat(/J/i),"number";b=!1;a.match(/^&H[0-9a-f]+/i)?b=!0:a.match(/^&O[0-7]+/i)?b=!0:a.match(/^[1-9]\d*F?/)?(a.eat(/J/i),b=!0):a.match(/^0(?![\dx])/i)&&(b=!0);if(b)return a.eat(/L/i),"number"}if(a.match('"'))return c.tokenize=q(a.current()),c.tokenize(a,c);if(a.match(r)||a.match(t)||a.match(u))return"operator";if(a.match(v))return null;if(a.match(w))return"bracket";if(a.match(x))return c.doInCurrentLine=!0,"keyword";
if(a.match(y))return c.currentIndent++,c.doInCurrentLine=!0,"keyword";if(a.match(z))return c.doInCurrentLine?c.doInCurrentLine=!1:c.currentIndent++,"keyword";if(a.match(k))return"keyword";if(a.match(l))return c.currentIndent--,c.currentIndent--,"keyword";if(a.match(m))return c.doInCurrentLine?c.doInCurrentLine=!1:c.currentIndent--,"keyword";if(a.match(A))return"keyword";if(a.match(B))return"atom";if(a.match(C))return"variable-2";if(a.match(D))return"builtin";if(a.match(E))return"variable-2";if(a.match(F))return"variable";
a.next();return"error"}function q(a){var c=1==a.length;return function(b,d){for(;!b.eol();){b.eatWhile(/[^'"]/);if(b.match(a))return d.tokenize=h,"string";b.eat(/['"]/)}if(c){if(n.singleLineStringErrors)return"error";d.tokenize=h}return"string"}}var t=/^[\+\-\*/&\\\^<>=]/,r=/^((<>)|(<=)|(>=))/,v=/^[\.,]/,w=/^[\(\)]/,F=/^[A-Za-z][_A-Za-z0-9]*/,u=d("and or not xor is mod eqv imp".split(" ")),f=["WScript","err","debug","RegExp"],G=["server","response","request","session","application"],H="buffer cachecontrol charset contenttype expires expiresabsolute isclientconnected pics status clientcertificate cookies form querystring servervariables totalbytes contents staticobjects codepage lcid sessionid timeout scripttimeout".split(" "),
I="addheader appendtolog binarywrite end flush redirect binaryread remove removeall lock unlock abandon getlasterror htmlencode mappath transfer urlencode".split(" "),g="clear execute raise replace test write writeline close open state eof update addnew end createobject quit".split(" ").concat("description firstindex global helpcontext helpfile ignorecase length number pattern source value count".split(" ")),f=f.concat("vbBlack vbRed vbGreen vbYellow vbBlue vbMagenta vbCyan vbWhite vbBinaryCompare vbTextCompare vbSunday vbMonday vbTuesday vbWednesday vbThursday vbFriday vbSaturday vbUseSystemDayOfWeek vbFirstJan1 vbFirstFourDays vbFirstFullWeek vbGeneralDate vbLongDate vbShortDate vbLongTime vbShortTime vbObjectError vbOKOnly vbOKCancel vbAbortRetryIgnore vbYesNoCancel vbYesNo vbRetryCancel vbCritical vbQuestion vbExclamation vbInformation vbDefaultButton1 vbDefaultButton2 vbDefaultButton3 vbDefaultButton4 vbApplicationModal vbSystemModal vbOK vbCancel vbAbort vbRetry vbIgnore vbYes vbNo vbCr VbCrLf vbFormFeed vbLf vbNewLine vbNullChar vbNullString vbTab vbVerticalTab vbUseDefault vbTrue vbFalse vbEmpty vbNull vbInteger vbLong vbSingle vbDouble vbCurrency vbDate vbString vbObject vbError vbBoolean vbVariant vbDataObject vbDecimal vbByte vbArray".split(" "));
e.isASP&&(f=f.concat(G),g=g.concat(I,H));var A=d("dim;redim;then;until;randomize;byval;byref;new;property;exit;in;const;private;public;get;set;let;stop;on error resume next;on error goto 0;option explicit;call;me".split(";")),B=d(["true","false","nothing","empty","null"]),D=d("abs array asc atn cbool cbyte ccur cdate cdbl chr cint clng cos csng cstr date dateadd datediff datepart dateserial datevalue day escape eval execute exp filter formatcurrency formatdatetime formatnumber formatpercent getlocale getobject getref hex hour inputbox instr instrrev int fix isarray isdate isempty isnull isnumeric isobject join lbound lcase left len loadpicture log ltrim rtrim trim maths mid minute month monthname msgbox now oct replace rgb right rnd round scriptengine scriptenginebuildversion scriptenginemajorversion scriptengineminorversion second setlocale sgn sin space split sqr strcomp string strreverse tan time timer timeserial timevalue typename ubound ucase unescape vartype weekday weekdayname year".split(" ")),
E=d(f),C=d(g),z=d("class sub select while if function property with for".split(" ")),k=d(["else","elseif","case"]),m=d(["next","loop","wend"]),l=d(["end"]),y=d(["do"]),x=d(["on error resume next","exit"]),p=d(["rem"]);return{electricChars:"dDpPtTfFeE ",startState:function(){return{tokenize:h,lastToken:null,currentIndent:0,nextLineIndent:0,doInCurrentLine:!1,ignoreKeyword:!1}},token:function(a,c){a.sol()&&(c.currentIndent+=c.nextLineIndent,c.nextLineIndent=0,c.doInCurrentLine=0);var b;b=c.tokenize(a,
c);var d=a.current();if("."===d)if(b=c.tokenize(a,c),d=a.current(),!b||"variable"!==b.substr(0,8)&&"builtin"!==b&&"keyword"!==b)b="error";else{if("builtin"===b||"keyword"===b)b="variable";-1<g.indexOf(d.substr(1))&&(b="variable-2")}c.lastToken={style:b,content:a.current()};"space"===b&&(b=null);return b},indent:function(a,c){var b=c.replace(/^\s+|\s+$/g,"");return b.match(m)||b.match(l)||b.match(k)?e.indentUnit*(a.currentIndent-1):0>a.currentIndent?0:a.currentIndent*e.indentUnit}}});e.defineMIME("text/vbscript",
"vbscript")});;
;/* module-key = 'com.atlassian.stash.stash-highlight-plugin:yaml', location = '/static/bower/CodeMirror/mode/yaml/yaml.js' */
(function(c){"object"==typeof exports&&"object"==typeof module?c(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],c):c(CodeMirror)})(function(c){c.defineMode("yaml",function(){var c=/\b((true)|(false)|(on)|(off)|(yes)|(no))$/i;return{token:function(b,a){var d=b.peek(),e=a.escaped;a.escaped=!1;if("#"==d&&(0==b.pos||/\s/.test(b.string.charAt(b.pos-1))))return b.skipToEnd(),"comment";if(b.match(/^('([^']|\\.)*'?|"([^"]|\\.)*"?)/))return"string";if(a.literal&&
b.indentation()>a.keyCol)return b.skipToEnd(),"string";a.literal&&(a.literal=!1);if(b.sol()){a.keyCol=0;a.pair=!1;a.pairStart=!1;if(b.match(/---/)||b.match(/\.\.\./))return"def";if(b.match(/\s*-\s+/))return"meta"}if(b.match(/^(\{|\}|\[|\])/))return"{"==d?a.inlinePairs++:"}"==d?a.inlinePairs--:"["==d?a.inlineList++:a.inlineList--,"meta";if(0<a.inlineList&&!e&&","==d)return b.next(),"meta";if(0<a.inlinePairs&&!e&&","==d)return a.keyCol=0,a.pair=!1,a.pairStart=!1,b.next(),"meta";if(a.pairStart){if(b.match(/^\s*(\||\>)\s*/))return a.literal=
!0,"meta";if(b.match(/^\s*(\&|\*)[a-z0-9\._-]+\b/i))return"variable-2";if(0==a.inlinePairs&&b.match(/^\s*-?[0-9\.\,]+\s?$/)||0<a.inlinePairs&&b.match(/^\s*-?[0-9\.\,]+\s?(?=(,|}))/))return"number";if(b.match(c))return"keyword"}if(!a.pair&&b.match(/^\s*(?:[,\[\]{}&*!|>'"%@`][^\s'":]|[^,\[\]{}#&*!|>'"%@`])[^#]*?(?=\s*:($|\s))/))return a.pair=!0,a.keyCol=b.indentation(),"atom";if(a.pair&&b.match(/^:\s*/))return a.pairStart=!0,"meta";a.pairStart=!1;a.escaped="\\"==d;b.next();return null},startState:function(){return{pair:!1,
pairStart:!1,keyCol:0,inlinePairs:0,inlineList:0,literal:!1,escaped:!1}}}});c.defineMIME("text/x-yaml","yaml")});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:syntax-highlight', location = '/static/util/syntax-highlight.js' */
define("util/syntax-highlight",["codemirror","jquery","util/determine-language","exports"],function(f,e,g,a){function b(h){function a(b){f.runMode(c.text(),b.mime||{name:d},c[0])}function b(a){console.warn(a||d+" could not be loaded for syntax highlighting.")}var c=e(h);if(c.length){var d=c.attr("data-language");g.getCodeMirrorModeForName(d).then(a).fail(b)}}a.codeblock=b;a.container=function(a){e(a).find("pre \x3e code[data-language]").each(function(){b(this)})}});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:markup-preview', location = '/static/widget/markup-preview/markup-preview.js' */
define("widget/markup-preview","aui jquery lodash stash/api/util/navbuilder util/ajax util/dom-event util/events util/navigator util/syntax-highlight".split(" "),function(d,f,b,l,m,g,c,n,p){function a(a){this.init.apply(this,arguments)}var e="ctrl+shift+p";c.on("stash.keyboard.shortcuts.requestPreviewComment",function(a){e=a;this.unbind()});c.addLocalEventMixin(a.prototype);a.prototype.init=function(a){b.bindAll(this,"togglePreview","updatePreview","refreshPreview","hidePreview","cancelPreview");
var q=n.isMac?e.replace(/ctrl/i,"meta"):e;this.$editor=f(a);this.$textarea=this.$editor.find("textarea");this.$previewButton=this.$editor.find(".markup-preview-button");this.$previewPanel=this.$editor.find(".markup-preview");this._destroyables=[];var h=this.$textarea.add(this.$previewButton);h.on("keydown",[q],this.togglePreview);this._destroyables.push({destroy:function(){h.off("keydown",this.togglePreview)}.bind(this)});this._destroyables.push(c.chainWith(this.$previewButton).on("click",this.togglePreview));
this._destroyables.push(c.chainWith(this.$previewPanel).on("click",g.filterByTarget(":not(a, a \x3e img)",this.togglePreview)));this._destroyables.push(c.chainWith(this.$textarea).on("input",b.debounce(this.refreshPreview,100)));this._destroyables.push({destroy:this.cancelPreview});var k=this;this.$previewButton.tooltip({gravity:function(){return f.fn.tipsy.autoNS.apply(this,arguments)+"e"},title:function(){return k.isPreviewing()?"Continue editing":
k.$previewButton.attr("data-preview-tooltip")}})};a.prototype.isPreviewing=function(){return this.$editor.hasClass("previewing")};a.prototype.togglePreview=g.preventDefault(function(){this.isPreviewing()?this.cancelPreview():this.showPreview()});a.prototype.showPreview=function(){this.$editor.addClass("previewing");this.$textarea.parent().spin("medium");this.$previewButton.text("Edit");this._request&&this._request.abort();this._request=m.rest({type:"POST",url:r(),
data:this.$textarea.val(),dataType:"json"}).done(this.updatePreview).fail(function(a,b){"abort"!==b&&this.hidePreview()}.bind(this)).always(function(){this.$textarea.parent().spinStop();this._request=null}.bind(this))};a.prototype.refreshPreview=function(){this.isPreviewing()&&this.showPreview()};a.prototype.updatePreview=function(a){this.$previewPanel.html(a.html);this.$previewPanel.find("a").attr("target","_blank");this.$editor.addClass("loaded");this.$previewButton.focus();p.container(this.$previewPanel);
a=this.trigger.bind(this,"resize");b.defer(a);this.$previewPanel.imagesLoaded(a)};a.prototype.cancelPreview=function(){this._request&&this._request.abort();this.hidePreview()};a.prototype.hidePreview=function(){this.$editor.removeClass("previewing loaded");this.$previewButton.text("Preview");this.$textarea.focus();this.trigger("resize")};a.prototype.destroy=function(){b.invoke(this._destroyables,"destroy")};var r=b.once(function(){return l.rest().markup().preview().build()});
return a});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:markup-preview', location = '/static/widget/markup-preview/markup-preview.soy' */
// This file was automatically generated from markup-preview.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace stash.widget.markupPreview.
 */

if (typeof stash == 'undefined') { var stash = {}; }
if (typeof stash.widget == 'undefined') { stash.widget = {}; }
if (typeof stash.widget.markupPreview == 'undefined') { stash.widget.markupPreview = {}; }


stash.widget.markupPreview.preview = function(opt_data, opt_ignored) {
  return '<div class="markup-preview markup" title="' + soy.$$escapeHtml("Click to edit") + '"></div>';
};
if (goog.DEBUG) {
  stash.widget.markupPreview.preview.soyTemplateName = 'stash.widget.markupPreview.preview';
}


stash.widget.markupPreview.previewHelp = function(opt_data, opt_ignored) {
  return '' + stash.buttons.button({href: 'http:\/\/docs.atlassian.com\/stash\/docs-0311\/Markdown+syntax+guide', extraClasses: 'aui-button-subtle aui-button-compact markup-preview-help', title: "Markup syntax guide", iconType: 'custom', iconClass: 'aui-icon aui-icon-small aui-iconfont-help', iconText: "Markup syntax guide", buttonText: '', extraAttributes: {target: '_blank'}});
};
if (goog.DEBUG) {
  stash.widget.markupPreview.previewHelp.soyTemplateName = 'stash.widget.markupPreview.previewHelp';
}


stash.widget.markupPreview.previewButton = function(opt_data, opt_ignored) {
  return '' + stash.buttons.button({extraClasses: 'aui-button-subtle aui-button-compact markup-preview-button', buttonText: "Preview", extraAttributes: {type: 'button', 'data-preview-tooltip': opt_data.title}});
};
if (goog.DEBUG) {
  stash.widget.markupPreview.previewButton.soyTemplateName = 'stash.widget.markupPreview.previewButton';
}
;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:client-file-handlers', location = '/static/widget/client-file-handlers/client-file-handler.js' */
define("widget/client-file-handlers/client-file-handler",["jquery","lodash","util/events"],function(f,e,g){function b(a){return this.init(a)}g.addLocalEventMixin(b.prototype);b.typeFilters={all:/.*/,application:/^application\/.*/i,audio:/^audio\/.*/i,image:/^image\/.*/i,imageWeb:/^image\/(jpeg|png|gif)$/i,text:/^text\/.*/i,video:/^video\/.*/i};b.prototype.defaults={fileTypeFilter:b.typeFilters.all,fileCountLimit:Infinity,fileSizeLimit:10485760,onSuccess:f.noop,onError:f.noop};b.prototype.init=function(a){this.options=
f.extend({},this.defaults,a);a&&!a.fileSizeLimit&&(this.options.fileSizeLimit=this.defaults.fileSizeLimit);a&&!a.fileCountLimit&&(this.options.fileCountLimit=this.defaults.fileCountLimit);e.bindAll(this,"handleFiles","filterFiles");return this};b.prototype.handleFiles=function(a,b){this.trigger("filesSelected",a);var c=this.filterFiles(a);0<c.valid.length?(e.isFunction(this.options.onSuccess)&&this.options.onSuccess(c.valid),this.trigger("validFiles",c.valid)):e.isFunction(this.options.onError)&&
this.options.onError(c.invalid);e.keys(c.invalid).length&&this.trigger("invalidFiles",c.invalid)};b.prototype.filterFiles=function(a){var b=e.isRegExp(this.options.fileTypeFilter)?this.options.fileTypeFilter:this.defaults.fileTypeFilter,c=this.options.fileSizeLimit;a=e.reduce(a,function(a,d){b.test(d.type)?d.size>c?a.invalid.bySize=a.invalid.bySize?a.invalid.bySize.concat(d):[d]:a.valid.push(d):a.invalid.byType=a.invalid.byType?a.invalid.byType.concat(d):[d];return a},{valid:[],invalid:{}});a.valid.length>
this.options.fileCountLimit&&(a.invalid.byCount=a.valid.slice(this.options.fileCountLimit),a.valid=a.valid.slice(0,this.options.fileCountLimit));return a};return b});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:client-file-handlers', location = '/static/widget/client-file-handlers/client-file-uploader.js' */
define("widget/client-file-handlers/client-file-uploader",["jquery","lodash","util/ajax","util/feature-detect","widget/client-file-handlers/client-file-handler"],function(d,f,h,k,b){function a(d){if(!a.isSupported())throw Error("ClientFileUploader requires FormData support");this.init.apply(this,arguments)}a.isSupported=k.formData;a.typeFilters=b.typeFilters;d.extend(a.prototype,b.prototype);a.prototype.defaults=d.extend({},b.prototype.defaults,{url:void 0,fieldName:"file",fileSizeLimit:void 0});
a.prototype.init=function(a){f.bindAll(this,"uploadFiles");b.prototype.init.call(this,a);this.uploads=[];this.on("validFiles",this.uploadFiles)};a.prototype.uploadFiles=function(a){var c=this;f.forEach(a,function(a){var b=new FormData,e=d.Deferred();b.append(c.options.fieldName,a,a.name);var g=h.ajax({url:c.options.url,type:"POST",data:b,xhr:function(){var a=d.ajaxSettings.xhr();(a.upload?a.upload:a).addEventListener("progress",function(a){a.lengthComputable&&e.notify(Math.max(0,Math.min(100,100*
a.loaded/a.total)))});return a},statusCode:{500:!1},processData:!1,contentType:!1}).done(function(){e.notify(100);e.resolveWith(this,arguments)}).fail(function(){e.rejectWith(this,arguments)}).always(function(){c.uploads=f.without(c.uploads,g)});e.promise(g);c.uploads.push(g);c.trigger("uploadStarted",g,a)})};a.prototype.destroy=function(){f.invoke(this.uploads,"abort");this.uploads=[]};return a});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:client-file-handlers', location = '/static/widget/client-file-handlers/client-file-reader.js' */
define("widget/client-file-handlers/client-file-reader",["jquery","lodash","util/feature-detect","widget/client-file-handlers/client-file-handler"],function(c,d,f,b){function a(g){if(!a.isSupported())throw Error("ClientFileReader requires FileReaderAPI support");return this.init(g)}var e={ArrayBuffer:"readAsArrayBuffer",BinaryString:"readAsBinaryString",DataURL:"readAsDataURL",Text:"readAsText"};a.isSupported=f.fileReader;c.extend(a.prototype,b.prototype);a.readMethods={ArrayBuffer:"ArrayBuffer",
BinaryString:"BinaryString",DataURL:"DataURL",Text:"Text"};a.typeFilters=b.typeFilters;a.prototype.defaults=c.extend({},b.prototype.defaults,{readMethod:a.readMethods.DataURL,onRead:c.noop});a.prototype.init=function(a){d.bindAll(this,"onSuccess","readFile");b.prototype.init.call(this,a);this.options.onSuccess=this.onSuccess;return this};a.prototype.onSuccess=function(a){var b=d.has(e,this.options.readMethod)?e[this.options.readMethod]:void 0;b&&d.each(a,d.bind(function(a){var c=new FileReader;c.onload=
d.bind(this.readFile,this,a);c[b](a)},this))};a.prototype.readFile=function(a,b){d.isFunction(this.options.onRead)&&this.options.onRead(b.target.result,a)};return a});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:client-file-handlers', location = '/static/widget/client-file-handlers/client-file-iframe-uploader.js' */
define("widget/client-file-handlers/client-file-iframe-uploader",["jquery","lodash","util/deprecation","widget/client-file-handlers/client-file-handler"],function(a,f,g,c){function b(a){h();return this.init(a)}var h=g.getMessageLogger("widget/client-file-handlers/client-file-iframe-uploader",null,"3.7","4.0");a.extend(b.prototype,c.prototype);b.prototype.defaults=a.extend({},c.prototype.defaults,{uploadURL:"",uploadFieldName:"file",onUpload:a.noop,responseHandler:function(b,e){var d;try{d=JSON.parse(a(b).html())}catch(f){e.reject()}d?
e.resolve(d):e.reject()}});b.prototype.states={IN_PROGRESS:"IN_PROGRESS",IDLE:"IDLE"};b.prototype.init=function(b){f.bindAll(this,"createHiddenIframe","onIframeLoad","handleFiles","setStateInProgress","setStateIdle","cancelUpload");this.options=a.extend({},this.defaults,b);this.$uploadIframe=this.createHiddenIframe();this.options.cancelTrigger&&(this.$cancelTrigger=a(this.options.cancelTrigger),this.$cancelTrigger.click(f.bind(function(){this.cancelUpload()},this)));this.state=this.states.IDLE;return this};
b.prototype.createHiddenIframe=function(){return a("\x3ciframe\x3e").attr("name","hidden-upload-iframe").hide().appendTo(document.body).on("load",this.onIframeLoad)};b.prototype.onIframeLoad=function(a){this.state===this.states.IN_PROGRESS&&(this.requestPromise.done(this.options.onUpload).fail(this.options.onError),this.options.responseHandler(a.target.contentDocument.body,this.requestPromise))};b.prototype.handleFiles=function(b,e){this.state===this.states.IN_PROGRESS&&this.cancelUpload();if(!this.$fileSourceElem){this.$fileSourceElem=
a(e);this.$fileSourceElem.attr("name",this.options.uploadFieldName);this.$fileSourceElem.prop("form")||this.$fileSourceElem.wrap("\x3cform\x3e");var d=a(this.$fileSourceElem.prop("form"));d.addClass("hidden-upload-form").attr("action",this.options.uploadURL).attr("method","post").attr("enctype","multipart/form-data").attr("encoding","multipart/form-data").attr("target",this.$uploadIframe.attr("name"));this.$spinner=a('\x3cdiv class\x3d"spinner"\x3e\x3c/div\x3e').insertBefore(this.$fileSourceElem);
a.isPlainObject(this.options.extraData)&&f.each(this.options.extraData,function(b,c){a('\x3cinput type\x3d"hidden"\x3e').attr("name",c).val(b).appendTo(d)})}var c=a(this.$fileSourceElem.prop("form"));this.options.xsrfToken&&this.options.xsrfToken.name&&this.options.xsrfToken.value&&c.append("\x3cinput type\x3d'hidden' name\x3d'"+this.options.xsrfToken.name+"' value\x3d'"+this.options.xsrfToken.value+"'/\x3e");c.submit();this.requestPromise=a.Deferred();this.requestPromise.always(this.setStateIdle);
this.setStateInProgress()};b.prototype.setStateInProgress=function(){this.state=this.states.IN_PROGRESS;this.$spinner&&this.$spinner.spin();this.$fileSourceElem&&this.$fileSourceElem.attr("disabled","disabled")};b.prototype.setStateIdle=function(){this.state=this.states.IDLE;this.$spinner&&this.$spinner.spinStop();this.$fileSourceElem&&this.$fileSourceElem.removeAttr("disabled");this.requestPromise=null};b.prototype.cancelUpload=function(){this.$uploadIframe.remove();this.setStateIdle();this.$uploadIframe=
this.createHiddenIframe()};return b});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:drag-drop-file-target', location = '/static/widget/drag-drop-file-target/drag-drop-file-target.js' */
define("widget/drag-drop-file-target",["jquery","lodash","util/events"],function(c,d,e){function b(a,b){return this.init.apply(this,arguments)}b.prototype.getDefaults=function(){return{activeDropTargetClass:"active-drop-target",uploadPrompt:"Drag a file here to upload",clientFileHandler:null}};b.prototype.init=function(a,b){d.bindAll(this,"onDragOver","onDragEnd","onDrop");this.$target=c(a);this.options=c.extend({},this.getDefaults(),b);this.$target.attr("data-upload-prompt",this.options.uploadPrompt);
this._destroyables=[];this._destroyables.push(e.chainWith(this.$target).on("dragover",this.onDragOver).on("dragleave",this.onDragEnd).on("dragend",this.onDragEnd).on("drop",this.onDrop))};b.prototype.onDragOver=function(a){a.preventDefault();this.$target.addClass(this.options.activeDropTargetClass)};b.prototype.onDragEnd=function(a){a.preventDefault();this.$target.removeClass(this.options.activeDropTargetClass)};b.prototype.onDrop=function(a){a.preventDefault();a.originalEvent.preventDefault();this.$target.removeClass(this.options.activeDropTargetClass);
this.options.clientFileHandler&&this.options.clientFileHandler.handleFiles(a.originalEvent.dataTransfer.files,a.originalEvent.target)};b.prototype.destroy=function(){this.$target.removeAttr("data-upload-prompt");this.$target.removeClass(this.options.activeDropTargetClass);d.invoke(this._destroyables,"destroy")};return b});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:paste-image-target', location = '/static/widget/paste-image-target/paste-image-target.js' */
define("widget/paste-image-target",["jquery","lodash","util/events","util/function","widget/client-file-handlers/client-file-handler"],function(d,c,e,f,g){function b(a,c){this.init.apply(this,arguments)}b.prototype.init=function(a,b){c.bindAll(this,"handlePaste","processClipboardItem");this.$el=d(a);this.clientFileHandler=b;this._destroyables=[];this._destroyables.push(e.chainWith(this.$el).on("paste",this.handlePaste))};b.prototype.handlePaste=function(a){var b=g.typeFilters.image;a=a.originalEvent;
a=a.clipboardData&&a.clipboardData.items;this.clientFileHandler&&a&&1===a.length&&c.toArray(a).filter(c.compose(b.test.bind(b),f.dot("type"))).forEach(this.processClipboardItem)};b.prototype.processClipboardItem=function(a){a=a.getAsFile();a.name="upload."+c.last(a.type.split("/"));this.clientFileHandler.handleFiles([a],this.$el)};b.prototype.destroy=function(){c.invoke(this._destroyables,"destroy")};return b});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:upload-interceptor', location = '/static/widget/upload-interceptor/upload-interceptor.js' */
define("widget/upload-interceptor",["jquery","lodash","util/events"],function(c,d,e){function b(a,b){this.init.apply(this,arguments)}b.prototype.init=function(a,b){d.bindAll(this,"onSelectFile");this.$el=c(a);this.clientFileHandler=b;this._destroyables=[];this._destroyables.push(e.chainWith(this.$el).on("change",this.onSelectFile))};b.prototype.onSelectFile=function(a){a=a.target;(""!==a.value||a.files&&a.files.length)&&this.clientFileHandler&&(this.clientFileHandler.handleFiles(a.files,a),c(a).wrap("\x3cform\x3e").parent("form").trigger("reset").end().unwrap())};
b.prototype.destroy=function(){d.invoke(this._destroyables,"destroy")};return b});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:faux-upload-field', location = '/static/widget/faux-upload-field/faux-upload-field.js' */
define("widget/faux-upload-field","jquery lodash util/dom-event util/events util/navigator widget/client-file-handlers/client-file-handler widget/upload-interceptor".split(" "),function(c,f,h,k,l,d,m){function b(c,a){this.init.apply(this,arguments)}b.prototype.defaults={clientFileHandler:null,accept:null,allowMultiple:!1};b.prototype.init=function(b,a){this.$el=c(b);this._destroyables=[];switch(a.accept){case d.typeFilters.audio:a.accept="audio/*";break;case d.typeFilters.image:a.accept="image/*";
break;case d.typeFilters.imageWeb:a.accept="image/jpeg, image/gif, image/png";break;case d.typeFilters.video:a.accept="video/*"}this.options=c.extend({},this.defaults,a);var g=f.uniqueId("faux-upload-field-"),e=c(stash.widget.fauxUploadField.uploadField({id:g,accept:this.options.accept,allowMultiple:this.options.allowMultiple})).hide().insertAfter(this.$el);this.$el.tooltip({gravity:c.fn.tipsy.autoNS});this.$el.is("label")?this.$el.attr("for",g):l.isIE()?(this.$el.hide(),e.show()):this._destroyables.push(k.chainWith(this.$el).on("click",
h.preventDefault(e.click.bind(e))));this.options.clientFileHandler&&this._destroyables.push(new m(e,this.options.clientFileHandler))};b.prototype.destroy=function(){f.invoke(this._destroyables,"destroy")};return b});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:faux-upload-field', location = '/static/widget/faux-upload-field/faux-upload-field.soy' */
// This file was automatically generated from faux-upload-field.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace stash.widget.fauxUploadField.
 */

if (typeof stash == 'undefined') { var stash = {}; }
if (typeof stash.widget == 'undefined') { stash.widget = {}; }
if (typeof stash.widget.fauxUploadField == 'undefined') { stash.widget.fauxUploadField = {}; }


stash.widget.fauxUploadField.uploadField = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<input type="file" ' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + 'class="faux-upload-field ' + ((opt_data.extraClasses) ? soy.$$escapeHtml(opt_data.extraClasses) : '') + '"' + ((opt_data.accept) ? ' accept="' + soy.$$escapeHtml(opt_data.accept) + '"' : '') + ((opt_data.allowMultiple) ? ' multiple' : '') + '/>';
};
if (goog.DEBUG) {
  stash.widget.fauxUploadField.uploadField.soyTemplateName = 'stash.widget.fauxUploadField.uploadField';
}


stash.widget.fauxUploadField.labelButton = function(opt_data, opt_ignored) {
  return '' + aui.buttons.button({tagName: 'label', extraClasses: 'faux-upload-label-button ' + opt_data.extraClasses, text: opt_data.text});
};
if (goog.DEBUG) {
  stash.widget.fauxUploadField.labelButton.soyTemplateName = 'stash.widget.fauxUploadField.labelButton';
}
;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:drag-drop-file-uploader', location = '/static/widget/drag-drop-file-uploader/drag-drop-file-uploader.js' */
define("widget/drag-drop-file-uploader","jquery lodash util/events widget/client-file-handlers/client-file-uploader widget/drag-drop-file-target widget/faux-upload-field widget/paste-image-target".split(" "),function(d,f,e,c,g,h,k){function a(c,d){if(!a.isSupported())throw Error("DragDropUploader requires ClientFileUploader support");this.init.apply(this,arguments)}a.typeFilters=c.typeFilters;a.isSupported=c.isSupported;e.addLocalEventMixin(a.prototype);a.prototype.defaults={url:null,fieldName:"file",
uploadButton:void 0,fileTypeFilter:void 0,fileCountLimit:void 0,fileSizeLimit:void 0,pasteUpload:!0};a.prototype.init=function(a,e){this.$target=d(a);var b=f.pick(c.prototype.defaults,"fileTypeFilter","fileCountLimit","fileSizeLimit");this.options=d.extend({},this.defaults,b,e);this._destroyables=[];b=new c({url:this.options.url,fieldName:this.options.fieldName});this._destroyables.push(this.retriggerFrom(b,"filesSelected","validFiles","invalidFiles","uploadStarted"));this._destroyables.push(b);this._destroyables.push(new g(this.$target,
{clientFileHandler:b}));this.options.uploadButton&&this._destroyables.push(new h(d(this.options.uploadButton),{clientFileHandler:b,allowMultiple:1<this.options.fileCountLimit}));this.options.pasteUpload&&this._destroyables.push(new k(this.$target,b))};a.prototype.destroy=function(){f.invoke(this._destroyables,"destroy")};return a});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:inline-error-dialog', location = '/static/widget/inline-error-dialog/inline-error-dialog.js' */
define("widget/inline-error-dialog",["aui","jquery","lodash","util/events"],function(e,c,b,f){function a(a,b){this.init.apply(this,arguments)}a.prototype.init=function(a,g){this.errors=[];this.options=c.extend({persistent:!0},g);this._destroyables=[];b.bindAll(this,"_renderDialogContents","hide","show","refresh","add","reset","destroy");var d={noBind:!0,persistent:this.options.persistent,addActiveClass:!1,fadeTime:0};this._$inlineDialog=e.InlineDialog(c(a),b.uniqueId("inline-error-dialog-"),this._renderDialogContents,
d);this.options.persistent&&this._destroyables.push(f.chainWith(this._$inlineDialog).on("click",".dismiss-button",this.hide))};a.prototype._renderDialogContents=function(a,c,d){a.html(stash.widget.inlineErrorDialog.contents({title:b.isFunction(this.options.title)?this.options.title(this.errors):this.options.title,subtitle:b.isFunction(this.options.subtitle)?this.options.subtitle(this.errors):this.options.subtitle,errors:this.errors,persistent:this.options.persistent})).addClass("inline-error-contents");
d()};a.prototype.hide=function(){this._$inlineDialog.hide();this.reset()};a.prototype.show=function(){this._$inlineDialog.show();this.refresh()};a.prototype.refresh=function(){this._$inlineDialog.refresh()};a.prototype.add=function(a){this.errors.push(a)};a.prototype.reset=function(){this.errors.length=0};a.prototype.destroy=function(){this.errors.length=0;b.invoke(this._destroyables,"destroy");this._$inlineDialog.remove()};return a});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:inline-error-dialog', location = '/static/widget/inline-error-dialog/inline-error-dialog.soy' */
// This file was automatically generated from inline-error-dialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace stash.widget.inlineErrorDialog.
 */

if (typeof stash == 'undefined') { var stash = {}; }
if (typeof stash.widget == 'undefined') { stash.widget = {}; }
if (typeof stash.widget.inlineErrorDialog == 'undefined') { stash.widget.inlineErrorDialog = {}; }


stash.widget.inlineErrorDialog.contents = function(opt_data, opt_ignored) {
  var output = '<h4>' + aui.icons.icon({icon: 'error', useIconFont: true}) + ((opt_data.title) ? soy.$$escapeHtml(opt_data.title) : '') + '</h4>' + ((opt_data.subtitle) ? '<h6>' + soy.$$escapeHtml(opt_data.subtitle) + '</h6>' : '');
  var errorList16 = opt_data.errors;
  var errorListLen16 = errorList16.length;
  for (var errorIndex16 = 0; errorIndex16 < errorListLen16; errorIndex16++) {
    var errorData16 = errorList16[errorIndex16];
    output += ((errorIndex16 == 0) ? '<ul>' : '') + '<li>' + soy.$$escapeHtml(errorData16) + '</li>' + ((errorIndex16 == errorListLen16 - 1) ? '</ul>' : '');
  }
  output += (opt_data.persistent) ? stash.buttons.button({extraClasses: 'dismiss-button', type: 'button', buttonText: "Dismiss"}) : '';
  return output;
};
if (goog.DEBUG) {
  stash.widget.inlineErrorDialog.contents.soyTemplateName = 'stash.widget.inlineErrorDialog.contents';
}
;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:property-util', location = '/static/util/property.js' */
define("util/property",["jquery","exports"],function(e,b){function c(a,b){if(null==a)return a;switch(b){case "STRING":return a;case "NUMBER":return Number(a);case "BOOLEAN":return"true"===a.toLowerCase()}}var d={};b.getFromProvider=function(a){a=d[a]||(d[a]=WRM.data.claim("com.atlassian.stash.config-wrm-data:"+a+".data"));return e.Deferred().resolve(c(a.value,a.type))};b._coerce=c});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:feature-enabled', location = '/static/util/feature-enabled.js' */
define("util/feature-enabled",["jquery","exports"],function(c,d){var b={},e=Object.prototype.hasOwnProperty;d.getFromProvider=function(a){a=e.call(b,a)?b[a]:b[a]=WRM.data.claim("com.atlassian.stash.feature-wrm-data:"+a+".data");return c.Deferred().resolve(a)}});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:markup-attachments', location = '/static/widget/markup-attachments/markup-attachments.soy' */
// This file was automatically generated from markup-attachments.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace stash.widget.markupAttachments.
 */

if (typeof stash == 'undefined') { var stash = {}; }
if (typeof stash.widget == 'undefined') { stash.widget = {}; }
if (typeof stash.widget.markupAttachments == 'undefined') { stash.widget.markupAttachments = {}; }


stash.widget.markupAttachments.uploadTrigger = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '' + stash.buttons.button({tagName: 'label', extraClasses: 'aui-button-subtle aui-button-compact markup-attachments-button', title: opt_data.title, iconType: 'aui', iconClass: 'aui-icon-small aui-iconfont-attachment', iconText: opt_data.accessibilityText, buttonText: opt_data.buttonText ? opt_data.buttonText : ''});
};
if (goog.DEBUG) {
  stash.widget.markupAttachments.uploadTrigger.soyTemplateName = 'stash.widget.markupAttachments.uploadTrigger';
}
;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:markup-attachments', location = '/static/widget/markup-attachments/markup-attachments.js' */
define("widget/markup-attachments","aui jquery lodash stash/api/util/navbuilder util/events util/feature-enabled util/function util/promise util/property util/text model/page-state widget/drag-drop-file-uploader widget/inline-error-dialog".split(" "),function(g,h,e,n,k,p,c,q,r,t,u,f,v){function b(a){if(!b.isSupported())throw Error("MarkupAttachments requires DragDropFileUploader support");this.init.apply(this,arguments)}function w(a,d,b){var c=a.links.attachment;a=c&&c.href||a.links.self.href;d=(d||
"").replace(/[^\w\.\-]/g,"");d=0===d.length||"."===e.first(d)?"upload"+d:d;a=a.replace(/([\(\)])/g,"\\$1");return"["+(f.typeFilters.image.test(b)?"!["+d+"]("+a+")":d)+"]("+a+")"}function x(a){return a+(a.length&&"\n"!==e.last(a)?"\n":"")}var l;p.getFromProvider("attachments").done(function(a){l=a});var m;r.getFromProvider("attachment.upload.max.size").done(function(a){m=a});b.isEnabled=function(){return l};b.isSupported=f.isSupported;b._editorClass="markup-attachments";b.prototype.init=function(a){this.$editor=
h(a);this.$textarea=this.$editor.find("textarea");this.$uploadButton=this.$editor.find(".markup-attachments-button");this._destroyables=[];e.bindAll(this,"handleUpload","handleAttachment","handleFailures","hideErrors");this.$editor.addClass(b._editorClass);this.dragDropFileUploader=new f(this.$editor,{url:y(),fieldName:"files",uploadButton:this.$uploadButton,fileSizeLimit:m});this._destroyables.push(this.dragDropFileUploader);this._destroyables.push(k.chainWith(this.dragDropFileUploader).on({filesSelected:this.hideErrors,
invalidFiles:c.partialRight(e.forEach,c.binary(this.handleFailures)),uploadStarted:this.handleUpload}));a=t.formatSizeInBytes(this.dragDropFileUploader.options.fileSizeLimit);this.errorDialog=new v(this.$uploadButton,{title:function(a){return g.format("{0,choice,1#There was a problem with your upload and the following file was not added|1\u003cThere was a problem with your upload and the following files were not added}",a.length)},subtitle:g.format("Note: There is a {0} size limit per file",a)});this._destroyables.push(this.errorDialog);this._destroyables.push(k.chainWith(this.$editor).on("resize",this.errorDialog.refresh));
a=h(aui.icons.icon({icon:"success",useIconFont:!0})).appendTo(this.$uploadButton);this._destroyables.push({destroy:a.remove.bind(a)});this.rollingSpinner=q.rollingSpinner(this.$uploadButton)};b.prototype.handleUpload=function(a,d){this.rollingSpinner.add(a);var b=e.compose(c.partialRight(e.forEach,e.partial(this.handleAttachment,d)),c.dot("attachments"));a.done(b).fail(function(a,b){this.handleFailures([d],b,{statusCode:a.status})}.bind(this))};b.prototype.handleAttachment=function(a,b){if(b.errors){var c=
e.first(b.errors);this.handleFailures([a],c.exceptionName,{message:c.message})}else this.$textarea.val(x(this.$textarea.val())+w(b,a.name,a.type)).trigger("input").focus()};b.prototype.handleFailures=function(a,b,c){"abort"===b||"error"===b&&500!==c.statusCode?this.hideErrors():(e.pluck(a,"name").forEach(this.errorDialog.add),this.errorDialog.show())};b.prototype.hideErrors=function(){this.errorDialog.hide()};b.prototype.destroy=function(){this.$editor.removeClass(b._editorClass);e.invoke(this._destroyables,
"destroy")};var y=e.once(function(){return u.getRepository()&&n.currentRepo().attachments().build()});return b});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:markup-editor', location = '/static/widget/markup-editor/markup-editor.soy' */
// This file was automatically generated from markup-editor.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace stash.widget.markupEditor.
 */

if (typeof stash == 'undefined') { var stash = {}; }
if (typeof stash.widget == 'undefined') { stash.widget = {}; }
if (typeof stash.widget.markupEditor == 'undefined') { stash.widget.markupEditor = {}; }


stash.widget.markupEditor.editor = function(opt_data, opt_ignored) {
  return '<div class="markup-editor">' + stash.widget.markupPreview.preview(null) + widget.aui.form.expandingTextarea({id: opt_data.textareaId, name: opt_data.textareaName ? opt_data.textareaName : 'text', extraClasses: 'text', initialValue: opt_data.text, placeholderText: opt_data.placeholderText}) + '<div class="markup-toolbar"><div class="secondary">' + stash.widget.markupPreview.previewHelp(null) + stash.widget.markupPreview.previewButton({title: opt_data.previewButtonTitle}) + '</div><div class="primary">' + stash.widget.markupAttachments.uploadTrigger({title: opt_data.attachmentButtonTitle, accessibilityText: opt_data.attachmentButtonAccessibilityText}) + '</div><div class="tertiary"></div></div></div>';
};
if (goog.DEBUG) {
  stash.widget.markupEditor.editor.soyTemplateName = 'stash.widget.markupEditor.editor';
}
;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:markup-editor', location = '/static/widget/markup-editor/markup-editor.js' */
define("widget/markup-editor","aui jquery lodash util/events widget/markup-attachments widget/markup-preview widget/mentionable-textarea".split(" "),function(g,d,h,e,f,k,l){function b(a){this.init.apply(this,arguments)}b._dataKey="markup-editor";b.bindTo=function(a){a=b.unbindFrom(a);var c=new b(a);a.data(b._dataKey,c);return c};b.unbindFrom=function(a){a=d(a);a=a.is(".markup-editor")?a:a.find(".markup-editor");var c=a.data(b._dataKey);c&&c.destroy();return a};e.addLocalEventMixin(b.prototype);b.prototype.init=
function(a){a=d(a);this.$editor=a.is(".markup-editor")?a:a.find(".markup-editor");this._destroyables=[];a=this.$editor.find("textarea");a.is(document.activeElement)&&h.defer(a.focus.bind(a));a=this.$editor.find("textarea.expanding").expandingTextarea();this._destroyables.push(e.chainWith(a).on("resize.expanding",this.onComponentResize.bind(this,!1)));this._destroyables.push({destroy:a.expandingTextarea.bind(a,"destroy")});a=new k(this.$editor);this._destroyables.push(e.chainWith(a).on("resize",this.onComponentResize.bind(this,
!0)));this._destroyables.push(a);this._destroyables.push(new l({$container:this.$editor}));a=function(a){this.$editor.find(".markup-attachments-button").addClass("disabled").prop("disabled","disabled").attr("aria-disabled",!0).attr("title",a)}.bind(this);f.isEnabled()?f.isSupported()?this._destroyables.push(new f(this.$editor)):a("Uploading attachments is not supported in this browser"):a("Your system administrator has disabled uploading attachments");this.$editor.find(".markup-preview-help").tooltip({gravity:d.fn.tipsy.autoNS})};
b.prototype.onComponentResize=function(a){this.$editor.triggerHandler("resize");this.trigger("resize",a)};b.prototype.destroy=function(){h.invoke(this._destroyables,"destroy");this.$editor.data(b._dataKey,null);this.$editor=null;this.off()};return b});;
;/* module-key = 'com.atlassian.stash.stash-page-data-plugin:page-data-loader', location = '/static/util/page-data-loader.js' */
var _PageDataPlugin=function(){function k(){e.each(f,function(a,d){e.each(d,function(b,c){c.reject(h[a]?Error("Provider "+a+" not included with context "+b):Error("Provider "+a+" not included on page."))})})}var l=Object.prototype.hasOwnProperty,e=jQuery,h={},f={};e(document).ready(k);return{load:function(a,d){for(var b in d)if(l.call(d,b)){var c=f[b]||(f[b]={}),c=c[a]||(c[a]=e.Deferred()),g=h[b]||(h[b]={});g[a]=d[b];if("pending"!==c.state())throw Error("Attempt to set context "+a+" for plugin key "+
b+" multiple times.");c.resolve(g[a])}},data:h,ready:function(a,d){var b=Array.prototype.slice.call(arguments,2),c=f[a]||(f[a]={}),g=c[d]||(c[d]=e.Deferred());b.forEach(function(a){g.done(a)});return g},_domReady:k}}();;
;/* module-key = 'com.atlassian.stash.stash-client-web-fragments-plugin:web-fragment-manager', location = '/static/util/web-fragment-manager.js' */
var WebFragments=function(){function x(a){var b=Array.prototype.slice.call(arguments,1),c,f=b.length;for(c=0;c<f;c++){var g=b[c];if(g){var q=p(g),h,w=q.length;for(h=0;h<w;h++){var d=q[h];a[d]=g[d]}}}return a}function t(a,b){return"function"===typeof a?a(x({},b)):a}function e(a){var b=l[a];return function(c,f){var g=b[c],q=[];if(g&&g.length){var h,w=g.length;for(h=0;h<w;h++){var d;d=g[h];var m=f,r=void 0,n=void 0,k=void 0,e=void 0,l={type:a.toUpperCase()};if(u.call(d,"serverCondition")&&!d.serverCondition)d=
null;else if(m=x({},m,d.serverContext,d.params),u.call(d,"condition")&&!t(d.condition,m))d=null;else{d["context-provider"]&&"function"===typeof d["context-provider"]&&(m=t(d["context-provider"],m));r=p(d);k=0;for(e=r.length;k<e;k++)n=r[k],/con(dition|text-provider)|params/.test(n)||(l[n]=t(d[n],m));if(d.params)for(var v=l.params={},r=p(d.params),k=0,e=r.length;k<e;k++)n=r[k],v[n]=t(d.params[n],m);d=l}d&&q.push(d)}}(new RegExp("[\\?\x26]web\\."+a+"s(\x3d|\x26|$)")).test(window.location.search)&&q.push(A[a](c,
f));return q}}function v(a){var b=l[a];return function(a){if(!a)throw Error("No descriptor provided");if("string"!==typeof a.location)throw Error("No location provided, or location was not a string.");if("string"!==typeof a.completeModuleKey)throw Error("No completeModuleKey provided, or completeModuleKey was not a string.");y(a);b[a.location]||(b[a.location]=[]);b[a.location].push(a);b[a.location].sort(z)}}function z(a,b){return(0<=a.weight?a.weight:1E3)-(0<=b.weight?b.weight:1E3)}var u=Object.prototype.hasOwnProperty,
l={item:{},section:{},panel:{}},p=function(a){var b=[],c;for(c in a)u.call(a,c)&&b.push(c);return b},y;y=window._PageDataPlugin&&_PageDataPlugin.ready?function(a){_PageDataPlugin.ready(a.completeModuleKey,a.location,function(b){u.call(b,"serverCondition")&&(a.serverCondition=b.serverCondition);u.call(b,"serverContext")&&(a.serverContext=b.serverContext)})}:function(a){return a};var A={item:function(a,b){return{url:"#example-web-item-url",pluginKey:"org.example.plugins",moduleKey:"example-web-item",
completeModuleKey:"org.example.plugins:example-web-item",linkText:"Client Web Item: "+a,hasTooltip:!0,tooltip:"Client Context Items: "+p(b).join(", "),hasIcon:!1,iconUrl:null,iconWidth:0,iconHeight:0,styleClass:"plugin-point",linkId:null,description:null,params:{},type:"ITEM",weight:1E3}},section:function(a,b){return{name:"example-web-section",key:"example-web-section",location:a,labelText:"Client Web Section: "+a,type:"SECTION",params:{},weight:1E3}},panel:function(a,b){return{view:'\x3cdiv class\x3d"plugin-point web-panel"\x3e\x3cstrong\x3eClient Web Panel\x3c/strong\x3e: '+
a+"\x3cbr /\x3e\x3cstrong\x3eClient Context Items\x3c/strong\x3e: "+p(b).join(", ")+"\x3c/div\x3e",weight:1E3}}},B=e("panel");e("item");return{getWebItems:e("item"),getWebSections:e("section"),getWebPanels:function(a,b){var c=B(a,b),f,g=c.length;for(f=0;f<g;f++)c[f]=c[f].view;return c},getWebFragmentDescriptors:function(a,b){var c=l[b];return(c=c&&c[a])&&c.slice()},addWebItemDescriptor:v("item"),addWebSectionDescriptor:v("section"),addWebPanelDescriptor:v("panel"),getWebFragments:function(a,b,c){"string"!==
typeof b&&(c=b,b=a);a=this.getWebItems(a,c);b=this.getWebSections(b,c);b=a.concat(b);b.sort(z);return b},_getValue:t,_formatI18n:function(a,b,c){var f=(a===b?c:a)||b||c||"";return function(a){var b=[],c=p(a);c.sort();var e,d=c.length;for(e=0;e<d;e++)b.push(a[c[e]]);return AJS.format(f,b)}}}}();;
;/* module-key = 'com.atlassian.stash.stash-client-web-fragments-plugin:comment-create-task', location = '/web-fragment-placeholder.config' */
WebFragments.addWebItemDescriptor({'pluginKey':'com.atlassian.stash.stash-client-web-fragments-plugin','key':'comment-create-task','moduleKey':'comment-create-task','completeModuleKey':'com.atlassian.stash.stash-client-web-fragments-plugin:comment-create-task','weight':40.0,'condition':function(ctx) { return WebFragments._getValue((require('feature/tasks/taskable-comment').isPullRequest), ctx); },'params':{},'styleClass':WebFragments._formatI18n(null, null, 'task-create'),'location':'stash.comments.actions','url':WebFragments._formatI18n(null, null, '#'),'linkText':WebFragments._formatI18n("Create task", 'stash.web.tasks.createTask', '')});;
;/* module-key = 'com.atlassian.stash.stash-comment-likes:comment-likes-resources', location = '/static/feature/comments/likes/comment-likes.soy' */
// This file was automatically generated from comment-likes.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace stash.plugin.comment.likes.
 */

if (typeof stash == 'undefined') { var stash = {}; }
if (typeof stash.plugin == 'undefined') { stash.plugin = {}; }
if (typeof stash.plugin.comment == 'undefined') { stash.plugin.comment = {}; }
if (typeof stash.plugin.comment.likes == 'undefined') { stash.plugin.comment.likes = {}; }


stash.plugin.comment.likes.likeButton = function(opt_data, opt_ignored) {
  return '' + stash.buttons.linkButton({content: '' + ((opt_data.userHasLiked) ? soy.$$escapeHtml("Unlike") : soy.$$escapeHtml("Like")), extraClasses: 'comment-likes-button'});
};
if (goog.DEBUG) {
  stash.plugin.comment.likes.likeButton.soyTemplateName = 'stash.plugin.comment.likes.likeButton';
}


stash.plugin.comment.likes.likeInfo = function(opt_data, opt_ignored) {
  return '<span class="comment-likes-info">' + aui.icons.icon({icon: 'like-small', useIconFont: true}) + ((opt_data.userHasLiked) ? (opt_data.likerCount == 1) ? soy.$$escapeHtml("You like this") : (opt_data.likerCount == 2) ? soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml(AJS.format("You and \x3cspan class\x3d\x22comment-liker\x22 title\x3d\x22{0}\x22\x3e{0}\x3c/span\x3e like this",typeof (opt_data.otherLiker.displayName || opt_data.otherLiker.name) === 'number' ? opt_data.otherLiker.displayName || opt_data.otherLiker.name : soy.$$escapeHtml(opt_data.otherLiker.displayName || opt_data.otherLiker.name)))) : soy.$$filterNoAutoescape(AJS.format("You and {1}{0} others{2} like this",opt_data.likerCount - 1,'<button class="stash-link-button">','</button>')) : (opt_data.likerCount == 1) ? soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml(AJS.format("\x3cspan class\x3d\x22comment-liker\x22 title\x3d\x22{0}\x22\x3e{0}\x3c/span\x3e likes this",typeof (opt_data.otherLiker.displayName || opt_data.otherLiker.name) === 'number' ? opt_data.otherLiker.displayName || opt_data.otherLiker.name : soy.$$escapeHtml(opt_data.otherLiker.displayName || opt_data.otherLiker.name)))) : soy.$$filterNoAutoescape(AJS.format("{1}{0} people{2} like this",opt_data.likerCount,'<button class="stash-link-button">','</button>'))) + '</span>';
};
if (goog.DEBUG) {
  stash.plugin.comment.likes.likeInfo.soyTemplateName = 'stash.plugin.comment.likes.likeInfo';
}


stash.plugin.comment.likes.dialog = function(opt_data, opt_ignored) {
  var output = '<div class="comment-likes-dialog"><h5 class="title">' + soy.$$escapeHtml("People who like this") + '</h5><ul class="user-list">';
  var likerList38 = opt_data.otherLikers;
  var likerListLen38 = likerList38.length;
  for (var likerIndex38 = 0; likerIndex38 < likerListLen38; likerIndex38++) {
    var likerData38 = likerList38[likerIndex38];
    output += '<li>' + stash.widget.avatar({size: 'small', person: likerData38}) + stash.widget.userLink({user: likerData38}) + '</li>';
  }
  output += '</ul></div>';
  return output;
};
if (goog.DEBUG) {
  stash.plugin.comment.likes.dialog.soyTemplateName = 'stash.plugin.comment.likes.dialog';
}
;
;/* module-key = 'com.atlassian.stash.stash-comment-likes:comment-likes-resources', location = '/static/feature/comments/likes/analytics.js' */
define("feature/comments/likes/analytics",["stash/api/util/events","stash/api/util/state","util/analytics","util/function","exports"],function(i,g,e,f,c){function h(){i.on("stash.feature.comments.likes.like",b.bind(null,"like"));i.on("stash.feature.comments.likes.unlike",b.bind(null,"unlike"));i.on("stash.feature.comments.likes.actions.like",b.bind(null,"actions.like"))}var d="comment.";function b(k,j){e.add(d+k,a(j))}function a(l){var n=g.getPullRequest();var m=g.getRepository();var o={"comment.id":l.commentId,"repository.id":m.id,totalLikes:l.likerCount};if(n){var k=g.getCurrentUser().slug;var j=n.reviewers.map(f.dot("user.slug"));o.isAuthor=n.author.user.slug===k;o.isReviewer=j.indexOf(k)!==-1;o["pullRequest.id"]=n.id}return o}c.init=h});;
;/* module-key = 'com.atlassian.stash.stash-comment-likes:comment-likes-resources', location = '/static/feature/comments/likes/analytics-init.js' */
jQuery(document).ready(function(){require("feature/comments/likes/analytics").init()});;
;/* module-key = 'com.atlassian.stash.stash-comment-likes:comment-likes-resources', location = '/static/feature/comments/likes/controller.js' */
define("feature/comments/likes/controller",["aui","jquery","lib/jsuri","lodash","stash/api/util/events","stash/api/util/navbuilder","stash/api/util/server","stash/api/util/state"],function(k,f,c,l,m,h,d,j){function g(o){l.bindAll(this);this.options=o;this.$buttonEl=null;this.$infoPanel=null;this.likes=o.likes;this.dialog=null;this.$infoPanel=o.$infoPlaceholder.parent();this.$infoPanel.on("click","button",this.onInfoClicked);this.updateLikeInfo();if(this.likes.canLike){this.$buttonEl=this.$infoPanel.parentsUntil(".content").find(".comment-likes-button");this.$buttonEl.on("click",this.onLikeClick);this.likeIfDeepLinked()}else{if(this.likes.likerCount===0){this.$infoPanel.remove()}}}g.prototype.updateLikeButton=function(){var o=this.likes.userHasLiked?"Unlike":"Like";this.$buttonEl.text(o)};g.prototype.updateLikeInfo=function(){if(this.likes.likerCount===0){this.$infoPanel.addClass("hidden")}else{this.$infoPanel.html(stash.plugin.comment.likes.likeInfo(this.likes));this.$infoPanel.removeClass("hidden");this.dialog=null}};g.prototype.getLikesURL=function(){var o=j.getPullRequest();var q=j.getCommit();var p=h.rest("comment-likes");if(o){p=p.currentPullRequest()}else{if(q){p=p.project(j.getProject().key).repo(j.getRepository().slug).commit(q.id)}}return p.addPathComponents("comments",this.options.commentId,"likes").build()};g.prototype.onInfoClicked=function(p){p.preventDefault();var o=this;if(!this.dialog){this.dialog=k.InlineDialog(p.target,"likes-info-panel",function(r,q,s){r.html(stash.plugin.comment.likes.dialog(o.likes));s()},{closeOnTriggerClick:true,initCallback:e,hideCallback:a});this.dialog.show()}};g.prototype.likeIfDeepLinked=function(){var o=new c(window.location);if(o.getQueryParamValue("action")==="like"&&parseInt(o.getQueryParamValue("commentId"),10)===this.options.commentId&&!this.likes.userHasLiked){this.setLike(true);this._triggerEvent("actions.like")}};function n(o){if(this.popup&&!this.popup.has(o.target).length){this.hide()}}var b;function e(){b=n.bind(this);f(document).on("mouseup",b)}function a(){f(document).off("mouseup",b);b=null}g.prototype.onLikeClick=function(o){o.preventDefault();this.setLike(!this.likes.userHasLiked)};g.prototype.setLike=function(o){this._setInteralLikeStatus(o);this._syncLike(o)};g.prototype._setInteralLikeStatus=function(o){this.likes.userHasLiked=o;this.likes.likerCount=o?this.likes.likerCount+1:this.likes.likerCount-1;this.updateLikeButton();this.updateLikeInfo()};var i={"404":function(t,o,s,r){var p=r&&r.errors&&r.errors.length&&r.errors[0];var q=p&&p.message;return{title:"Comment not found",message:q,shouldReload:true,fallbackUrl:undefined}}};g.prototype._syncLike=function(o){d.rest({type:o?"POST":"DELETE",url:this.getLikesURL(),statusCode:i}).done(this._triggerEvent.bind(this,o?"like":"unlike")).fail(this._setInteralLikeStatus.bind(this,!o))};g.prototype._triggerEvent=function(o){m.trigger("stash.feature.comments.likes."+o,null,l.extend({commentId:this.options.commentId},this.likes))};return g});;
;/* module-key = 'com.atlassian.stash.stash-comment-likes:comment-likes-resources', location = '/static/feature/comments/likes/web-panel.js' */
define("feature/comments/likes/web-panel",["stash/api/util/state","feature/comments/comment-async-web-panel","feature/comments/likes/controller","exports"],function(e,g,c,b){function d(i){var l=i.comment;var k=l.properties&&l.properties.likedBy;var h=e.getCurrentUser().slug;var j={userHasLiked:false,otherLiker:null,likerCount:0,otherLikers:[],canLike:l.author.slug!==h};if(k){j.userHasLiked=k.total>0&&k.likers[0].slug===h;if(j.userHasLiked){j.otherLiker=k.total>1?k.likers[1]:null}else{j.otherLiker=k.total>0?k.likers[0]:null}j.likerCount=k.total;j.otherLikers=j.userHasLiked?k.likers.slice(1):k.likers}return j}function a(h){return d(h).canLike}function f(h){return g.getWebPanelEl(function(i){new c({commentId:h.comment.id,likes:d(h),$infoPlaceholder:i})})}b.contextProvider=d;b.buttonPanelCondition=a;b.infoPanel=f});;
;/* module-key = 'com.atlassian.stash.stash-comment-likes:comment-likes-button', location = '/web-fragment-placeholder.config' */
WebFragments.addWebPanelDescriptor({'pluginKey':'com.atlassian.stash.stash-comment-likes','key':'comment-likes-button','moduleKey':'comment-likes-button','completeModuleKey':'com.atlassian.stash.stash-comment-likes:comment-likes-button','weight':110.0,'condition':function(ctx) { return WebFragments._getValue((require('feature/comments/likes/web-panel').buttonPanelCondition), ctx); },'context-provider':function(ctx) { return WebFragments._getValue((require('feature/comments/likes/web-panel').contextProvider), ctx); },'params':{},'location':'stash.comments.info','view':function(ctx) { return WebFragments._getValue((stash.plugin.comment.likes.likeButton), ctx); }});;
;/* module-key = 'com.atlassian.stash.stash-comment-likes:comment-likes-info', location = '/web-fragment-placeholder.config' */
WebFragments.addWebPanelDescriptor({'pluginKey':'com.atlassian.stash.stash-comment-likes','key':'comment-likes-info','moduleKey':'comment-likes-info','completeModuleKey':'com.atlassian.stash.stash-comment-likes:comment-likes-info','weight':111.0,'params':{},'location':'stash.comments.info','view':function(ctx) { return WebFragments._getValue((require('feature/comments/likes/web-panel').infoPanel), ctx); }});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:task-model-resources', location = '/static/feature/tasks/model/task-collection.js' */
define("feature/tasks/model/task-collection","backbone-brace stash/api/util/events stash/api/util/navbuilder stash/api/util/state feature/tasks/model/task feature/tasks/model/task-state".split(" "),function(b,d,e,c,f,g){b=b.Collection.extend({model:f,initialize:function(){this.on("remove",function(a){a.isNew()||(a=a.toJSON(),a.lastState=a.state,a.state=g.DEFAULT,d.trigger("stash.feature.pull-request-tasks.deleted",null,{task:a}))})},url:e.rest("tasks").addPathComponents("pull-requests").withParams({repositoryId:c.getRepository().id,
pullRequestId:c.getPullRequest().id,start:0,limit:1E3}).build()});var h=new b;b.getCollection=function(){return h};return b});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:task-model-resources', location = '/static/feature/tasks/model/task-state.js' */
define("feature/tasks/model/task-state",function(){var a={DEFAULT:"NONE",OPEN:"OPEN",RESOLVED:"RESOLVED",DELETED:"DELETED",Transitions:{}};a.Transitions[a.DEFAULT]=a.OPEN;a.Transitions[a.OPEN]=a.RESOLVED;a.Transitions[a.RESOLVED]=a.OPEN;return a});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:task-model-resources', location = '/static/feature/tasks/model/task.js' */
define("feature/tasks/model/task","aui backbone backbone-brace lodash stash/api/util/events stash/api/util/navbuilder model/stash-user feature/tasks/model/task-state".split(" "),function(f,h,l,k,m,n,p,b){function d(a){return a&&"stash.feature.pull-request-tasks."+a}var q=n.rest().addPathComponents("tasks"),g=l.Model.extend({namedAttributes:{id:"number",anchor:null,state:"string",author:p,createdDate:"number",text:"string",html:"string",properties:null,permittedOperations:null,lastState:"string",pendingSync:"boolean",
pullRequestId:"number",repositoryId:"number"},defaults:{state:b.OPEN,text:"",pendingSync:!1,permittedOperations:{}},url:function(){var a=q;this.isNew()||(a=a.addPathComponents(this.getId()));return a.build()},initialize:function(){this.getState()===b.OPEN&&this.isNew()&&this._triggerTaskEvent(this.eventNameForState(this.getState()));this.on("destroy",this._onDestroy);this.on("sync",this._triggerTaskEvent.bind(this,d("saved")))},_onDestroy:function(){this.isNew()&&this.changeState(b.DELETED)},nextState:function(){return b.Transitions[this.getState()]},
eventNameForState:function(a){switch(a){case b.OPEN:return this.isNew()?d("created"):d("reopened");case b.RESOLVED:return d("resolved");case b.DELETED:return d("deleted");default:return d("default")}},transitionToNextState:function(){return this._updateState(this.nextState())},changeState:function(a){this.set({state:a,lastState:this.getState()},{local:!0});this._triggerTaskEvent(this.eventNameForState(a))},_updateState:function(a){var e=this.getState(),b=this.eventNameForState(a),c=this;this.changeState(a);
return this.save().done(function(){c.getState()!==a&&(b=c.eventNameForState(c.getState()),c._triggerTaskEvent(b))}).fail(function(){c.set({state:e,lastState:a});c._triggerTaskEvent(d("failed-transition"))})},updateText:function(a){var e=this,b=this.getText(),c=g.sanitiseText(a);this.setText(c);return(this.save()||h.$.Deferred().reject(this.validationError)).fail(function(){""!==c&&e.setText(b)})},validate:function(a,e){if(g.sanitiseText(a.text)!==a.text)return "Invalid task text";
if(""===a.text)return "Please enter some text"},sync:function(a,e,b){this.setPendingSync(!0);e=h.sync(a,e,k.extend(b,{statusCode:{404:function(c,b,e,d){c=(c=d&&d.errors&&d.errors.length&&d.errors[0])&&c.message;"create"!==a&&(c="Stash could not update this task, it has been deleted.");return{title:"Task not found",message:c,shouldReload:!0,fallbackUrl:void 0}}}}));e.always(this.setPendingSync.bind(this,!1));return e},_triggerTaskEvent:function(a,b){b===
this&&(b={});m.trigger(a,null,k.extend({task:this.toJSON()},b))}},{Anchor:{COMMENT:"COMMENT"}});g.sanitiseText=function(a){return a.trim().replace(/\s+/gm," ")};return g});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:task-view-resources', location = '/static/feature/tasks/task-view/task-view.js' */
define("feature/tasks/task-view","aui backbone jquery lodash util/events util/function feature/tasks/model/task-state".split(" "),function(d,f,e,c,g,h,k){var b={VIEW:"view",EDIT:"edit"};return f.View.extend({events:{"click .task-checkbox":"transitionTaskHandler","click .task-edit":"onTaskEditClick","click .task-save":"onTaskSaveClick","click .task-cancel":"onTaskCancelClick","keydown .task-text":"onTaskKeyDown","click .task-delete":"onTaskDeleteClick","keypress textarea":"onTaskTextareaKeypress"},
defaults:{showLink:!1,mode:b.VIEW},initialize:function(a){c.bindAll(this,"focusEditor","_onResize");this.listenTo(this.model,"change invalid",this.render);this.listenToOnce(this.model,"destroy",this._onResize);this.options=c.extend({},this.defaults,a);this.mode=this.options.mode;this.mode===b.EDIT&&(this.originalText=this.model.getText());this._enableExpandingTextareas()},template:h.dot("stash.feature.tasks.taskView.task")(window),render:function(){var a=e(this.template({task:this.model.toJSON(),
mode:this.mode,showLink:this.options.showLink,error:this.model.validationError}));this.$el.replaceWith(a);this.setElement(a);this._enableExpandingTextareas();this.mode===b.EDIT&&c.defer(this.focusEditor);c.defer(this._onResize);return this},transitionTaskHandler:function(){this.model.transitionToNextState()},saveTask:function(){var a=this,l=this.$(".task-text").val();a.switchMode(b.VIEW);this.model.updateText(l).fail(function(){a.switchMode(b.EDIT)})},switchMode:function(a){this.mode=a;a===b.EDIT&&
(this.originalText=this.model.getText()||this.originalText);this.render()},cancelTaskEdit:function(){this.model.isNew()?this.model.destroy():(this.model.setText(this.originalText),this.model.isValid(),this.originalText=null,this.switchMode(b.VIEW))},onTaskDeleteClick:function(a){var b=this;a.preventDefault();this.model.isNew()||(b.model.changeState(k.DELETED),b.model.destroy({wait:!0,error:function(){b.model.changeState(b.model.getLastState())}}))},focusEditor:function(){this.$(".task-text").focus()},
getEditorText:function(){return this.$(".task-text").val()},onTaskKeyDown:function(a){a.keyCode===d.keyCode.ESCAPE?(a.preventDefault(),a.stopPropagation(),this.cancelTaskEdit()):a.keyCode===d.keyCode.ENTER&&(a.preventDefault(),this.saveTask())},onTaskEditClick:function(a){a.preventDefault();this.model.isNew()||this.switchMode(b.EDIT)},onTaskSaveClick:function(a){a.preventDefault();this.saveTask()},onTaskCancelClick:function(a){a.preventDefault();this.cancelTaskEdit()},onTaskTextareaKeypress:c.debounce(function(a){e(a.target).removeClass("task-error")},
300),_enableExpandingTextareas:function(){if(this.mode===b.EDIT)this.$("textarea.expanding").expandingTextarea().on("input.expanding",this._onResize)},_onResize:function(){g.trigger("stash.webpanel.resize",null,{location:"internal.stash.comments.extra",el:this.$el.get(0)})}},{Mode:b})});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:task-view-resources', location = '/static/feature/tasks/task-view/task-view.soy' */
// This file was automatically generated from task-view.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace stash.feature.tasks.taskView.
 */

if (typeof stash == 'undefined') { var stash = {}; }
if (typeof stash.feature == 'undefined') { stash.feature = {}; }
if (typeof stash.feature.tasks == 'undefined') { stash.feature.tasks = {}; }
if (typeof stash.feature.tasks.taskView == 'undefined') { stash.feature.tasks.taskView = {}; }


stash.feature.tasks.taskView.task = function(opt_data, opt_ignored) {
  var output = '<div class="task task-status-' + soy.$$escapeHtml(opt_data.task.state.toLowerCase()) + ((opt_data.error) ? ' task-error' : '') + ((opt_data.task.pendingSync) ? ' task-pending-sync' : '') + ((opt_data.task.text == '' && ! opt_data.task.id) ? ' task-blank' : '') + '" data-task-state="' + soy.$$escapeHtml(opt_data.task.state) + '" data-task-id="' + soy.$$escapeHtml([opt_data ? opt_data.task.id : null,''].filter(function(x){return x != null;})[0]) + '" data-comment-id="' + soy.$$escapeHtml(opt_data.task.anchor.id) + '"><div class="task-action task-checkbox-container"><input type="checkbox" class="task-checkbox checkbox"' + ((opt_data.task.state == 'RESOLVED') ? ' checked="checked"' : '') + ((opt_data.mode == 'edit' || ! opt_data.task.permittedOperations.transitionable) ? ' disabled=\'disabled\'' : '') + ' /></div>' + ((opt_data.mode == 'edit') ? stash.feature.tasks.taskView.editTaskForm(opt_data) : stash.feature.tasks.taskView.viewTask(opt_data)) + ((opt_data.showLink) ? aui.buttons.button({text: '', type: 'link', extraClasses: 'task-action task-link-button', iconType: 'aui', iconClass: 'aui-icon-small aui-iconfont-link'}) : '') + '<div class="task-footer">';
  var diffAnchorPath__soy45 = opt_data.task.properties && opt_data.task.properties.diffAnchorPath;
  output += ((opt_data.showLink && diffAnchorPath__soy45) ? '<aside class="comment-diff-anchor">' + aui.icons.icon({useIconFont: true, icon: 'file', iconFontSet: 'devtools'}) + aui.buttons.button({text: new (require('model/path'))(diffAnchorPath__soy45).getName(), type: 'link', extraAttributes: {'data-path': diffAnchorPath__soy45}}) + '</aside>' : '') + ((opt_data.mode == 'edit' || (opt_data.task.permittedOperations.editable || opt_data.task.permittedOperations.deletable) || opt_data.task.id == null) ? '<ul class="actions">' + ((opt_data.mode == 'edit') ? stash.feature.tasks.taskView.editTaskActions(null) : stash.feature.tasks.taskView.viewTaskActions(opt_data)) + '</ul>' : '') + ((opt_data.mode == 'edit') ? '<div class="task-tip">' + soy.$$escapeHtml("Tip: Try selecting some of the comment before clicking \x22Create task\x22") + '</div>' : '') + '</div></div>';
  return output;
};
if (goog.DEBUG) {
  stash.feature.tasks.taskView.task.soyTemplateName = 'stash.feature.tasks.taskView.task';
}


stash.feature.tasks.taskView.viewTask = function(opt_data, opt_ignored) {
  return '<div class="task-content message ' + soy.$$escapeHtml(opt_data.task.html ? 'markup' : 'plaintext') + '">' + ((opt_data.task.html) ? soy.$$filterNoAutoescape(opt_data.task.html) : soy.$$escapeHtml(opt_data.task.text)) + '</div>';
};
if (goog.DEBUG) {
  stash.feature.tasks.taskView.viewTask.soyTemplateName = 'stash.feature.tasks.taskView.viewTask';
}


stash.feature.tasks.taskView.viewTaskActions = function(opt_data, opt_ignored) {
  return '' + ((opt_data.task.permittedOperations.editable || opt_data.task.id == null) ? '<li><a href="#" class="task-edit">' + soy.$$escapeHtml("Edit") + '</a></li>' : '') + ((opt_data.task.permittedOperations.deletable || opt_data.task.id == null) ? '<li><a href="#" class="task-delete">' + soy.$$escapeHtml("Delete") + '</a></li>' : '');
};
if (goog.DEBUG) {
  stash.feature.tasks.taskView.viewTaskActions.soyTemplateName = 'stash.feature.tasks.taskView.viewTaskActions';
}


stash.feature.tasks.taskView.editTaskForm = function(opt_data, opt_ignored) {
  return '' + widget.aui.form.expandingTextarea({name: 'task-text', initialValue: opt_data.task.text, placeholderText: '' + ((opt_data.error) ? soy.$$escapeHtml(opt_data.error) : (opt_data.task.text) ? soy.$$escapeHtml("Please enter some text") : soy.$$escapeHtml("Add new task")), extraClasses: 'task-text' + ((opt_data.error) ? ' task-error' : '')});
};
if (goog.DEBUG) {
  stash.feature.tasks.taskView.editTaskForm.soyTemplateName = 'stash.feature.tasks.taskView.editTaskForm';
}


stash.feature.tasks.taskView.editTaskActions = function(opt_data, opt_ignored) {
  return '<li><a href="#" class="task-save">' + soy.$$escapeHtml("Save") + '</a></li><li><a href="#" class="task-cancel">' + soy.$$escapeHtml("Cancel") + '</a></li>';
};
if (goog.DEBUG) {
  stash.feature.tasks.taskView.editTaskActions.soyTemplateName = 'stash.feature.tasks.taskView.editTaskActions';
}
;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:task-list-resources', location = '/static/feature/tasks/task-list/task-list.js' */
define("feature/tasks/task-list","jquery stash/api/util/events stash/api/util/state feature/tasks/model/task-collection feature/tasks/task-list/task-list-dialog exports".split(" "),function(f,g,a,m,n,h){function k(a,c,d,e){a={projectKey:a,repository:c,pullRequestId:d};l.sourceEl=e;b||(b=new n(m.getCollection()),b._dialog.on("beforeShow",function(){g.trigger("stash.feature.tasks.list.opened",null,l)}),b._dialog.on("close",function(){g.trigger("stash.feature.tasks.list.closed")}));b.openDialog(a)}var b,
l={};h.openTaskListDialogForCurrentPullRequest=function(){k(a.getProject(),a.getRepository(),a.getPullRequest().id)};h.onReady=function(){f(document).on("click",".task-list-dialog-link",function(b){b.preventDefault();var c=f(b.currentTarget),d=c.data("project-key")||a.getProject().key,e=c.data("pull-request-id")||a.getPullRequest().id,c={id:c.data("repository-id")||a.getRepository().id,slug:c.data("repository-slug")||a.getRepository().slug};k(d,c,e,b.currentTarget)})}});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:task-list-resources', location = '/static/feature/tasks/task-list/task-list-dialog.js' */
define("feature/tasks/task-list/task-list-dialog","aui jquery lodash stash/api/util/events stash/api/util/server util/navbuilder feature/tasks/model/task-state feature/tasks/task-list/task-list-table".split(" "),function(k,e,l,g,m,n,h,p){function c(b){this.init.apply(this,arguments)}function f(b){var d={E:"stash.feature.tasks.dialog.action.edit",J:"stash.feature.tasks.dialog.action.moveNext",K:"stash.feature.tasks.dialog.action.movePrevious",O:"stash.feature.tasks.dialog.action.open",SPACE:"stash.feature.tasks.dialog.action.transitionToNextState",
DELETE:"stash.feature.tasks.dialog.action.delete"},a={69:"E",74:"J",75:"K",79:"O",32:"SPACE",46:"DELETE"}[b.keyCode];"TEXTAREA"!==b.target.nodeName&&a&&(g.trigger(d[a]),b.preventDefault())}var q=n.rest().currentPullRequest().addPathComponents("tasks","count").build();c.prototype.init=function(b){l.bindAll(this,"openDialog","updateDialog","closeDialog","_updateTaskCounts");var d=stash.feature.tasks.taskList.dialog(),a=e("#task-list-dialog");0<a.length&&a.remove();e(document.body).append(d);this._dialog=
k.dialog2("#task-list-dialog");this._table=null;this._taskCollection=b;jQuery("#dialog-close-button").click(this.closeDialog);g.on("stash.feature.tasks.visit-task",this.closeDialog);this._dialog.on("show",function(){e(document).on("keydown",f)});this._dialog.on("hide",function(){e(document).off("keydown",f)})};c.prototype.updateDialog=function(){this._table&&this._table.update()};c.prototype.openDialog=function(b){this._dialog.show();if(!this._table){var d=this._dialog.$el.find(".aui-dialog2-content"),
a=this._dialog.$el.find("#task-list-dialog-list");this._table=new p(a,d,this._taskCollection,b);this._table.on("dataLoaded",this._updateTaskCounts.bind(this,b))}this._table.update()};c.prototype._updateTaskCounts=function(b,d){var a,c=new e.Deferred;if(d.isLastPage){a=this._taskCollection.groupBy("state");var f=a[h.OPEN];a=a[h.RESOLVED];c.resolve({open:f?f.length:0,resolved:a?a.length:0})}else c=m.rest({url:q});c.done(function(a){g.trigger("stash.feature.pull-request-tasks.set-counts",null,{openTaskCount:a.open,
resolvedTaskCount:a.resolved,pullRequestId:b.pullRequestId,repositoryId:b.repository.id,isReset:!0})})};c.prototype.closeDialog=function(){this._dialog.hide()};return c});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:task-list-resources', location = '/static/feature/tasks/task-list/task-list.soy' */
// This file was automatically generated from task-list.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace stash.feature.tasks.taskList.
 */

if (typeof stash == 'undefined') { var stash = {}; }
if (typeof stash.feature == 'undefined') { stash.feature = {}; }
if (typeof stash.feature.tasks == 'undefined') { stash.feature.tasks = {}; }
if (typeof stash.feature.tasks.taskList == 'undefined') { stash.feature.tasks.taskList = {}; }


stash.feature.tasks.taskList.dialog = function(opt_data, opt_ignored) {
  return '' + aui.dialog.dialog2({id: 'task-list-dialog', size: 'medium', titleText: "Tasks", extraClasses: 'task-list-dialog', content: '' + stash.feature.tasks.taskList.dialogContent(null), footerHintText: "Tip: Use Shift + T to open the task list.", footerActionContent: '' + aui.buttons.button({id: 'dialog-close-button', text: "Close", extraClasses: 'aui-button-link'})});
};
if (goog.DEBUG) {
  stash.feature.tasks.taskList.dialog.soyTemplateName = 'stash.feature.tasks.taskList.dialog';
}


stash.feature.tasks.taskList.dialogContent = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<ul id="' + soy.$$escapeHtml([opt_data ? opt_data.id : null,'task-list-dialog-list'].filter(function(x){return x != null;})[0]) + '" class="paged-table task-list"></ul>';
};
if (goog.DEBUG) {
  stash.feature.tasks.taskList.dialogContent.soyTemplateName = 'stash.feature.tasks.taskList.dialogContent';
}


stash.feature.tasks.taskList.dialogContentSection = function(opt_data, opt_ignored) {
  return '<li class="task-list-row section-heading"><h6>' + soy.$$escapeHtml(opt_data.title) + '</h6></li>';
};
if (goog.DEBUG) {
  stash.feature.tasks.taskList.dialogContentSection.soyTemplateName = 'stash.feature.tasks.taskList.dialogContentSection';
}


stash.feature.tasks.taskList.taskListRow = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<li class="task-list-row' + soy.$$escapeHtml(opt_data.isCollapsed ? ' collapsed' : ' expanded') + ' task-container"></li>';
};
if (goog.DEBUG) {
  stash.feature.tasks.taskList.taskListRow.soyTemplateName = 'stash.feature.tasks.taskList.taskListRow';
}


stash.feature.tasks.taskList.dialogEmptyMessage = function(opt_data, opt_ignored) {
  return '<p>' + soy.$$escapeHtml("There are no tasks for this pull request.") + '</p>';
};
if (goog.DEBUG) {
  stash.feature.tasks.taskList.dialogEmptyMessage.soyTemplateName = 'stash.feature.tasks.taskList.dialogEmptyMessage';
}
;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:task-list-resources', location = '/static/feature/tasks/task-list/task-list-table.js' */
define("feature/tasks/task-list/task-list-table","aui jquery lodash stash/api/util/navbuilder util/events util/function widget/paged-table feature/tasks/model/task feature/tasks/model/task-state feature/tasks/task-list/task-list-row-view".split(" "),function(n,k,d,l,m,g,e,p,h,q){function a(c,a,b,f){var r=this;this._scrollable=k(a);this.$target=k(c);this.collection=b;this.context=f;this._destroyables=[];this._resolvedHeaderOutput=!1;d.bindAll(this,"_onTaskDestroy","_handleEdit","_handleMoveNext","_handleMovePrevious",
"_handleOpen","_handleTransitionToNextState","_handleDelete");this.collection.on("destroy",this._onTaskDestroy);this._taskRowViews=[];e.call(this,{target:this.$target,noneFoundMessageHtml:stash.feature.tasks.taskList.dialogEmptyMessage,scrollPaneSelector:a,rowSelector:"\x3e li",taskContainerSelector:".task-container",paginationContext:"task-list",focusOptions:{rowSelector:"\x3e li",focusedClass:"focused"},statusCode:{"*":function(c,a,b,t,d){return"timeout"===b||500<=c.status&&599>=c.status?(stash.widget.paragraph({text:d.message}),
r._addNoRowsMessage(d.message),!1):!0}}});this.prNavBuilder=l.project(f.projectKey).repo(f.repository).pullRequest(f.pullRequestId);this.bindNavigationHandlers()}d.extend(a.prototype,e.prototype);m.addLocalEventMixin(a.prototype);a.prototype._addNoRowsMessage=function(c){this.$table.addClass("no-rows").after(this._new$Message(c||this.options.noneFoundMessageHtml()))};a.prototype.update=function(c){this._resolvedHeaderOutput=!1;d.invoke(this._taskRowViews,"remove");this._taskRowViews=[];e.prototype.update.call(this,
c).done(this.trigger.bind(this,"dataLoaded"))};a.prototype.buildUrl=function(c,a){return l.rest().project(this.context.projectKey).repo(this.context.repository).pullRequest(this.context.pullRequestId).addPathComponents("tasks").withParams({start:c,limit:a,withComments:!0}).build()};a.prototype.handleNewRows=function(c,a){var b=this,f=[];d.each(c.values,function(c){var a=b.collection.get(c.id);a?a.set(c):(a=new p(c),a.setPullRequestId(b.context.pullRequestId),b.collection.add(a));c=new q({prNavBuilder:b.prNavBuilder,
model:a});b._taskRowViews.push(c);a.getState()!==h.RESOLVED||b._resolvedHeaderOutput||(a=stash.feature.tasks.taskList.dialogContentSection({title:"Resolved tasks"}),f.push(a),b._resolvedHeaderOutput=!0);f.push(c.render().$el)});b.$table.show()["html"!==a?a:"append"](f)};a.prototype.bindNavigationHandlers=function(){this._destroyables.push(m.chain().on("stash.feature.tasks.dialog.action.edit",this._handleEdit).on("stash.feature.tasks.dialog.action.moveNext",
this._handleMoveNext).on("stash.feature.tasks.dialog.action.movePrevious",this._handleMovePrevious).on("stash.feature.tasks.dialog.action.open",this._handleOpen).on("stash.feature.tasks.dialog.action.transitionToNextState",this._handleTransitionToNextState).on("stash.feature.tasks.dialog.action.delete",this._handleDelete));this._destroyables.push(e.prototype.initShortcuts.call(this))};a.prototype.destroy=function(){e.prototype.destroy.call(this);d.invoke(this._destroyables,"destroy")};a.prototype.getTaskListRowViewForTask=
function(a){var d=this._taskRowViews.filter(function(b){return b.model.getId()===a.getId()});return d&&d[0]};a.prototype.focusInitialRow=function(){this._$focusedRow=this.$target.find(this.options.focusOptions.rowSelector+this.options.taskContainerSelector).first().addClass(this.options.focusOptions.focusedClass)};a.prototype.scrollToRow=function(a){var d=this._scrollable.offset().top,b=this._scrollable.scrollTop();a=a.offset().top;this._scrollable.scrollTop(a-d+b)};a.prototype._handleMoveNext=function(){this._focusRow("nextAll")};
a.prototype._handleMovePrevious=function(){this._focusRow("prevAll")};a.prototype._focusRow=function(a,d){var b=this._$focusedRow[a](this.options.taskContainerSelector);b.length&&(this._$focusedRow.removeClass(this.options.focusOptions.focusedClass),this._$focusedRow=b.first().addClass(this.options.focusOptions.focusedClass),d||this.scrollToRow(this._$focusedRow))};a.prototype._handleOpen=function(){this._$focusedRow.find(".task-link-button").trigger("click")};a.prototype._handleEdit=function(){this.getTaskListRowViewForTask(this.getTaskFromFocusedRow()).setCollapsed(!1);
this._$focusedRow.find(".task-edit").trigger("click")};a.prototype._handleTransitionToNextState=function(){var a=this.getTaskFromFocusedRow();a&&a.transitionToNextState()};a.prototype._handleDelete=function(){this._$focusedRow.find(".task-delete").trigger("click")};a.prototype.getTaskFromFocusedRow=function(){var a=this._$focusedRow.find(".task").data("task-id");return a&&this.collection.get(a)};a.prototype._onTaskDestroy=function(a){var e=d.find(this._taskRowViews,g.dotEq("model",a));if(e){var b=
this._$focusedRow.is(this.options.taskContainerSelector+":last")?"prevAll":"nextAll";this._focusRow(b,!0);e.remove();this._taskRowViews=d.without(this._taskRowViews,e);a.getLastState()===h.RESOLVED&&(a=d.compose(g.eq(h.RESOLVED),g.invoke("model.getState")),this._taskRowViews.some(a)||(this._resolvedHeaderOutput=!1,this.$table.find(".section-heading").remove()));0===this._taskRowViews.length&&this._addNoRowsMessage()}};return a});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:task-list-resources', location = '/static/feature/tasks/task-list/task-list-row-view.js' */
define("feature/tasks/task-list/task-list-row-view","backbone jquery lodash stash/api/util/events util/feature-detect util/function feature/tasks/model/task-state feature/tasks/task-view".split(" "),function(l,h,c,d,g,m,k,e){return l.View.extend({events:{"click .task-content":"taskListContentClicked","click .task-link-button":"taskListLinkClicked","click .comment-diff-anchor .aui-button":"taskListDiffAnchorClicked"},defaults:{isCollapsible:!0,showLink:!0,initialTaskViewMode:e.Mode.VIEW},initialize:function(a){this.options=
c.extend({},this.defaults,a);this.isCollapsed=this.options.isCollapsible;this.taskView=new e({model:this.model,mode:this.options.initialTaskViewMode,prNavBuilder:this.prNavBuilder,showLink:this.options.showLink});this.focusEditor=this.taskView.focusEditor;this.getEditorText=this.taskView.getEditorText;this.listenTo(this.model,"change:state",this._handleTaskChangeState);this.listenTo(this.model,"change:text",this._handleTaskChangeText);this.options.isCollapsible&&(c.bindAll(this,"handleTaskExpand"),
d.on("stash.feature.tasks.list.expand",this.handleTaskExpand))},template:m.dot("stash.feature.tasks.taskList.taskListRow")(window),activityUrl:function(){var a=this.model.getAnchor();return this.options.prNavBuilder.overview().comment(a.id).build()},diffUrl:function(a){return this.options.prNavBuilder.diff().change(a).build()},render:function(){var a=h(this.template({isCollapsed:this.isCollapsed}));a.append(this.taskView.render().$el);this.$el.replaceWith(a);this.setElement(a);return this},transitionTaskHandler:function(){this.model.transitionToNextState()},
taskListContentClicked:function(a){this.options.isCollapsible&&(h(a.target).is("a")||this.setCollapsed(!this.isCollapsed))},setCollapsed:function(a){function b(a,b,c,d){function e(){f.$el.removeClass([b,d].join(" ")).addClass(c).css({height:""})}f.$el.css({height:a}).addClass(b);if(g.cssTransition())f.$el.one(g.transitionEndEventName(),e);else e()}var f=this;(this.isCollapsed=a)?(this.$el.css({height:f.$el.find(".task").get(0).scrollHeight}).removeClass("expanded"),c.defer(b.bind(this,"","collapsing",
"collapsed","expanded expanding"))):this.model.getState()===k.OPEN&&(d.trigger("stash.feature.tasks.list.expand",null,this),this.$el.removeClass("collapsed"),b(f.$el.find(".task").get(0).scrollHeight,"expanding","expanded","collapsed collapsing"))},taskListDiffAnchorClicked:function(a){var b=this.model.getProperties().diffAnchorPath;this._handleTaskClick(a,"stash.layout.pull-request.urlRequested",this.diffUrl(b));this.triggerTaskVisitedEvent({location:"diff"})},taskListLinkClicked:function(a){this._handleTaskClick(a,
"stash.layout.pull-request.urlRequested",this.activityUrl());this.triggerTaskVisitedEvent({location:"activity-stream"})},triggerTaskVisitedEvent:function(a){a=c.extend({},{task:this.model.toJSON()},a);d.trigger("stash.feature.tasks.visit-task",null,a)},handleTaskExpand:function(a){a===this||this.isCollapsed||(this.taskView.mode===e.Mode.EDIT&&this.taskView.cancelTaskEdit(),this.setCollapsed(!0))},highlight:function(){var a=this.$el.removeClass.bind(this.$el,"task-highlight");this.$el.addClass("task-highlight");
if(g.cssAnimation())this.$el.one(g.animationEndEventName(),a);else setTimeout(a,5E3)},_handleTaskClick:function(a,b){a.preventDefault();d.trigger.apply(this,[b,null].concat(c.toArray(arguments).slice(2)))},_handleTaskChangeState:function(a){this.$el.toggleClass("pending-delete",a.getState()===k.DELETED)},_handleTaskChangeText:function(a){a.isNew()&&""!==a.getText()&&this.highlight()}})});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:task-list-resources', location = '/static/feature/tasks/task-list/comment-task-list-view.js' */
define("feature/tasks/task-list/comment-task-list-view","backbone lodash util/events util/feature-detect util/function feature/tasks/model/task feature/tasks/task-list/task-list-row-view feature/tasks/task-view".split(" "),function(m,f,n,h,p,d,q,k){return m.View.extend({defaults:{pullRequestId:null},initialize:function(a){var b=this;this.comment=a.comment;["add","remove"].forEach(function(a){b.listenTo(b.collection,a,b.render.bind(b,a))});this.options=f.extend({},this.defaults,a);this.taskRowViews=
[]},getCurrentTask:function(){return this.collection.find(p.invoke("isNew"))},getCurrentTaskText:function(){return this.getCurrentTaskRowView().getEditorText()||""},getCurrentTaskRowView:function(){return this._findRowViewForTask(this.getCurrentTask())},createTask:function(a){var b=this.getCurrentTaskRowView();if(b)return b.focusEditor(),null;b=new d({anchor:{id:this.comment.id,type:d.Anchor.COMMENT},pullRequestId:this.options.pullRequestId,repositoryId:this.options.repositoryId,text:a});this.collection.unshift(b);
a&&(b.prefilled=!0,b.save().fail(this.collection.remove.bind(this.collection,b)));return b},render:function(a,b,c,e){function d(a){return new q({model:a,initialTaskViewMode:a.isNew()&&""===a.getText()?k.Mode.EDIT:k.Mode.VIEW,isCollapsible:!1,showLink:!1})}function l(a){g.$el.removeClass("transition-height").css({height:"auto"});a&&n.trigger("stash.webpanel.resize",null,{location:"internal.stash.comments.extra",el:g.$el.get(0)})}var g=this;this.$(".pending-delete").removeClass("pending-delete");c=
this.$el.outerHeight(!0);this.$el.css({height:c});c=!1;switch(a){case "remove":if(a=this._findRowViewForTask(b))a.$el.addClass("pending-delete").trigger("comment-child-removed"),a.remove(),this.taskRowViews=f.without(this.taskRowViews,a);c=!0;break;case "add":c=e.at;a=d(b);this.taskRowViews.splice(c,0,a);e=a.render().$el;c=this.$(this.$("li").get(c));c.length?c.before(e):this.$el.append(e);b.isNew()&&""!==b.getText()&&a.highlight();e.trigger("comment-child-added");c=!0;break;default:f.invoke(this.taskRowViews,
"remove"),this.taskRowViews=this.collection.map(d),this.$el.append(this.taskRowViews.map(function(a){return a.render().$el}))}b=this.taskRowViews.reduce(function(a,b){return a+b.$el.outerHeight(!0)},0);if(h.cssTransition()&&c)this.$el.addClass("transition-height").css({height:b}).one(h.transitionEndEventName(),l.bind(g,!0));else l(!1);return this},_findRowViewForTask:function(a){return f.find(this.taskRowViews,{model:a})}})});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:task-analytics-resources', location = '/static/feature/tasks/task-analytics/task-analytics.js' */
define("feature/tasks/task-analytics","jquery lodash stash/api/util/events stash/api/util/state util/analytics feature/tasks/model/task feature/tasks/model/task-collection feature/tasks/model/task-state exports".split(" "),function(k,n,t,f,u,p,v,w,x){function d(a,b){u.add("pullRequest.task."+a,b)}function g(a,b){var c;if(a){c=a.text.length;var e=a.id,d;d=a.createdDate;d=Date.now()-d;c={"task.text.length":c,"task.id":e,"task.time.since.created":d}}e=k("#task-list-dialog");e.length&&"false"===e.attr("aria-hidden")?
e=l.TASK_LIST:(e=k(".active-tab[data-module-key]").attr("data-module-key"),e=n.endsWith(e,"diff")?l.DIFF:n.endsWith(e,"commits")?l.COMMITS:l.ACTIVITY_STREAM);e={source:e,"pullRequest.id":f.getPullRequest().id,"repository.id":f.getRepository().id};return k.extend({},e,b,c)}function y(a){d("resolved."+h.taskTransitionAction(a.task),g(a.task))}function z(a){d("reopened."+h.taskTransitionAction(a.task),g(a.task))}function A(a){q=Date.now();var b="keyboard-shortcut";a&&a.sourceEl&&(b="link");d("list.opened."+
h.genericAction(),g(null,{"source.secondary":b}))}function B(){var a="list.closed."+h.genericAction(),b;b=q;b=Date.now()-b;d(a,g(null,{age:b}))}function C(a){d("list.expandTask."+h.genericAction(),g(a.model.toJSON()))}function D(a){var b="gotoTask";"diff"===a.location&&(b="gotoFile");d("list."+b+"."+h.genericAction(),g(a.task))}function E(a){var b=a.toJSON(),c;b.anchor.type===p.Anchor.COMMENT&&(b.anchor.type!==p.Anchor.COMMENT?c=null:(c=k('.comment[data-id\x3d"'+b.anchor.id+'"]'),c={text:c.find("\x3e .content \x3e .message").text(),
author:c.find("span[data-username]").attr("data-username")}),c={"is.comment.owner":c.author===f.getCurrentUser().name,"duplicates.comment":b.text.trim()===c.text.trim()});d("created."+(a.prefilled?"prefilled.":"")+h.genericAction(),g(b,c))}function F(a){if(!a.isNew()){var b=a.getState()===w.RESOLVED;(m()||f.getCurrentUser().isAdmin||r(a.toJSON()))&&!b&&a.attributes.text!==a._previousAttributes.text&&d("edited."+h.taskAction(a.toJSON(),!0),g(a.toJSON()))}}function G(a){a.isNew()||d("deleted."+h.taskAction(a.toJSON(),
!0),g(a.toJSON()))}function m(){return f.getCurrentUser().id===f.getPullRequest().author.user.id}function H(){var a=f.getPullRequest().reviewers;return a.length&&a.some(function(a){return a.user.id===f.getCurrentUser().id})}function r(a){return f.getCurrentUser().name===a.author.name}var l={ACTIVITY_STREAM:"activity-stream",COMMITS:"commits-tab",DIFF:"diff-tab",TASK_LIST:"task-list"},I=v.getCollection(),q,h={Type:{other:"byOther",PRAuthor:"byPRAuthor",taskAuthor:"byTaskAuthor",admin:"byAdmin",reviewer:"byReviewer"},
genericAction:function(){var a=this.Type.other;m()?a=this.Type.PRAuthor:H()&&(a=this.Type.reviewer);return a},taskAction:function(a,b){var c=this.Type.other;b=!!b;f.getCurrentUser().isAdmin&&b&&(c=this.Type.admin);m()?c=this.Type.PRAuthor:r(a)&&(c=this.Type.taskAuthor);return c},taskTransitionAction:function(a){return this.taskAction(a,!1)}};x.init=function(){t.chain().on("stash.feature.pull-request-tasks.resolved",y).on("stash.feature.pull-request-tasks.reopened",z).on("stash.feature.tasks.list.opened",
A).on("stash.feature.tasks.list.closed",B).on("stash.feature.tasks.list.expand",C).on("stash.feature.tasks.visit-task",D);I.on("change:id",E).on("change:text",F).on("destroy",G)}});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:task-analytics-resources', location = '/static/feature/tasks/task-analytics/task-analytics-init.js' */
jQuery(document).ready(function(){require("feature/tasks/task-analytics").init()});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:updating-section', location = '/static/widget/updating-section/updating-section.js' */
define("widget/updating-section",["jquery","lodash"],function(e,c){function b(a,b,c,d){this.init.apply(this,arguments)}b.defaults={context:{},isVisibleProperty:null};b.prototype.init=function(a,f,g,d){this._$el=e(a);this._template=g;this._options=c.extend({},b.defaults,d);this._$placeholder=this._$el.find(".replacement-placeholder");this._currentValue={};c.bindAll(this,"updateValue","updateVisibility");this._destroyCallbacks=[f.onValue(this.updateValue)];this._options.isVisibleProperty&&this._destroyCallbacks.push(this._options.isVisibleProperty.onValue(this.updateVisibility))};
b.prototype.updateVisibility=function(a){this._$el.toggleClass("hidden",!a)};b.prototype.updateValue=function(a){a=c.extend({},a,this._options.context);c.isEqual(a,this._currentValue)||(this._currentValue=a,a=this._template(a),this._$placeholder.stop().fadeOut(0).html(a).fadeIn())};b.prototype.destroy=function(){this._destroyCallbacks.forEach(Function.prototype.call,Function.prototype.call)};return b});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:taskable-comment-resources', location = '/static/feature/tasks/taskable-comment/taskable-comment.js' */
define("feature/tasks/taskable-comment","jquery lodash stash/api/util/events stash/api/util/state feature/comments/comment-async-web-panel feature/tasks/model/task feature/tasks/model/task-collection feature/tasks/task-list/comment-task-list-view exports".split(" "),function(f,q,l,g,r,m,n,t,h){var d=n.getCollection(),k={};l.on("stash.feature.tasks.createTask",function(a){var b=f(a),c=b.data("id");a="";var e=window.getSelection();if(e){var p=b.find(".message").get(0);f.contains(p,e.anchorNode)&&(f.contains(p,
e.focusNode)||b.find(".actions").is(e.focusNode))&&(a=m.sanitiseText(e.toString()),e.removeAllRanges())}c=k[c];(b=c.createTask(a))?d.add(b):a&&(b=c.getCurrentTask(),c=(c=c.getCurrentTaskText())?c.trim()+" ":"",b.setText(c+a))});l.on("stash.feature.comments.commentDeleted",function(a){var b=d.find(function(b){return b.getAnchor().id===a.id});b&&d.remove(b)});h.newTaskableCommentView=function(a){var b=a.comment,c=new n;q.each(b.tasks,function(b){var a=d.get(b.id);a||(a=new m(b),a.setPullRequestId(g.getPullRequest().id),
a.setRepositoryId(g.getRepository().id),d.add(a));c.add(a)});return r.getWebPanelEl(function(a){var d=f(stash.feature.tasks.taskableComment.taskListPlaceholder());a.replaceWith(d);a=f(d);a=new t({collection:c,el:a,comment:b,pullRequestId:g.getPullRequest().id,repositoryId:g.getRepository().id});a.render();k[b.id]=a})};h.isPullRequest=function(a){return!!a.pullRequest};h._commentTaskListViews=k});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:taskable-comment-resources', location = '/static/feature/tasks/taskable-comment/taskable-comment.soy' */
// This file was automatically generated from taskable-comment.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace stash.feature.tasks.taskableComment.
 */

if (typeof stash == 'undefined') { var stash = {}; }
if (typeof stash.feature == 'undefined') { stash.feature = {}; }
if (typeof stash.feature.tasks == 'undefined') { stash.feature.tasks = {}; }
if (typeof stash.feature.tasks.taskableComment == 'undefined') { stash.feature.tasks.taskableComment = {}; }


stash.feature.tasks.taskableComment.taskListPlaceholder = function(opt_data, opt_ignored) {
  return '<ul class="task-list"></ul>';
};
if (goog.DEBUG) {
  stash.feature.tasks.taskableComment.taskListPlaceholder.soyTemplateName = 'stash.feature.tasks.taskableComment.taskListPlaceholder';
}
;
;/* module-key = 'com.atlassian.stash.stash-client-web-fragments-plugin:comment-task-list', location = '/web-fragment-placeholder.config' */
WebFragments.addWebPanelDescriptor({'pluginKey':'com.atlassian.stash.stash-client-web-fragments-plugin','key':'comment-task-list','moduleKey':'comment-task-list','completeModuleKey':'com.atlassian.stash.stash-client-web-fragments-plugin:comment-task-list','weight':100.0,'condition':function(ctx) { return WebFragments._getValue((require('feature/tasks/taskable-comment').isPullRequest), ctx); },'params':{},'location':'internal.stash.comments.extra','view':function(ctx) { return WebFragments._getValue((require('feature/tasks/taskable-comment').newTaskableCommentView), ctx); }});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:comments', location = '/static/feature/comments/activity-comment-context.js' */
define("feature/comments/activity-comment-context",["lodash","util/events","feature/comments/activity-comment-container","feature/comments/comment-context"],function(b,c,d,e){return e.extend({findContainerElements:function(){return[this.el]},_registerContainer:function(a,b,c){this._containers[a]=new d({name:a,context:this,el:b,anchor:c});return this._containers[a]},getActivityCommentContainer:function(){return this._containers[this.getAnchor().getId()]},restoreDrafts:function(){if(this.unrestoredDrafts.length){var a=
this.getActivityCommentContainer();this.unrestoredDrafts=b.reject(this.unrestoredDrafts,a.restoreDraftComment.bind(a));if(this.unrestoredDrafts.length)c.once("stash.feature.pullRequestActivity.dataLoaded",this.restoreDrafts.bind(this))}}})});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:comments', location = '/static/feature/comments/comment-tips.js' */
define("feature/comments/comment-tips",["aui","util/navigator"],function(a,b){return{tips:[b.isMac()?"\u2318 + Enter to post your comment":"Ctrl + Enter to post your comment","Type \u0027@\u0027 to mention other users",a.format("You can use {0}Markdown{1} in comments","\x3ca href\x3d'http:\/\/docs.atlassian.com\/stash\/docs-0311\/Markdown+syntax+guide' target\x3d\"_blank\"\x3e","\x3c/a\x3e")]}});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:comments', location = '/static/feature/comments/anchors.js' */
define("feature/comments/anchors",["jquery","stash/api/util/navbuilder","model/page-state"],function(g,f,b){function c(a){a=a||{};this._projectKey=a.projectKey||b.getProject().getKey();this._repoSlug=a.repoSlug||b.getRepository().getSlug();this._pullRequestId=a.pullRequestId||b.getPullRequest().getId()}function d(a){this._path=a.getPath();this._srcPath=a.getSrcPath();this._commitRange=a.getCommitRange();this._projectKey=(a.getRepository()||b).getProject().getKey();this._repoSlug=(a||b).getRepository().getSlug()}
function e(a,h,b,c){this._diffAnchor=a;this._lineType=h;this._line=b;this._fileType=c}c.prototype.getId=function(){return"pullrequest-"+this._projectKey+"-"+this._repoSlug+"-"+this._pullRequestId};c.prototype.toJSON=function(){};c.prototype.urlBuilder=function(){return f.rest().project(this._projectKey).repo(this._repoSlug).pullRequest(this._pullRequestId).comments()};d.prototype.getId=function(){return"diff-"+this._projectKey+"-"+this._repoSlug+"-"+this._commitRange.getId()+"-"+this._path};d.prototype.toJSON=
function(){var a={path:this._path.toString(),commitRange:this._commitRange.toJSON()},b=this._srcPath&&this._srcPath.toString();b&&(a.srcPath=b);return a};d.prototype.urlBuilder=function(){var a=f.rest().project(this._projectKey).repo(this._repoSlug),b=this._commitRange.getPullRequest();return b?a.pullRequest(b.getId()).comments():a.changeset(this._commitRange.getUntilRevision().getId()).comments()};e.prototype.getId=function(){var a=this._fileType?this._fileType+"-":"";return"line-"+this._diffAnchor.getId()+
"-"+a+this._lineType+"-"+this._line};e.prototype.toJSON=function(){var a=g.extend(this._diffAnchor.toJSON(),{line:this._line,lineType:this._lineType});this._fileType&&(a.fileType=this._fileType);return a};e.prototype.urlBuilder=function(){return this._diffAnchor.urlBuilder()};return{PullRequestAnchor:c,DiffAnchor:d,LineAnchor:e}});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:comments', location = '/static/feature/comments/comment-collection.js' */
define("feature/comments/comment-collection",["backbone","feature/comments/comment-model"],function(b,c){return b.Collection.extend({initialize:function(b,a){a=a||{};this.anchor=a.anchor},model:c,url:function(){return this.anchor.urlBuilder().build()}})});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:comments', location = '/static/feature/comments/comment-container.js' */
define("feature/comments/comment-container","aui backbone jquery lib/jsuri lodash memoir util/analytics util/dom-event util/events util/function util/syntax-highlight model/page-state widget/aui/form widget/confirm-dialog widget/markup-editor feature/comments/comment-collection feature/comments/comment-model feature/comments/comment-tips".split(" "),function(h,v,e,w,k,x,n,y,f,p,q,g,m,z,r,A,t,u){return v.View.extend({initialize:function(){k.bindAll(this,"onCommentEditorResize","onCommentFocused");
this.anchor=this.anchor||this.options.anchor;this.rootCommentListSelector=this.rootCommentListSelector||this.options.rootCommentListSelector;this.context=this.options.context;this.pullRequest=this.options.pullRequest||g.getPullRequest();this.collection||(this.collection=new A([],{anchor:this.anchor}));this.initDeleteButtons();this.$el.imagesLoaded(this.onImagesLoaded.bind(this));f.trigger("stash.feature.comments.commentContainerAdded",null,this.$el);this.updateDraftComment=k.debounce(this.updateDraftComment,
300);this.deleteDraftComment=k.debounce(this.deleteDraftComment,300);this.on("comment.saved",q.container.bind(null,this.$el));q.container(this.$el);f.once("stash.feature.pullRequestActivity.focused",this.onCommentFocused)},events:{"submit form":"onFormSubmit","click a.times":"onDateClicked","click .cancel":"onCancelClicked","click .reply":"onReplyClicked","click .edit":"onEditClicked","click .task-create":"onCreateTaskClicked","keydown form":"onFormKeydown","input textarea":"onTextareaInput","comment-child-added .comment ":"onChildrenChanged",
"comment-child-removed .comment ":"onChildrenChanged"},initDeleteButtons:function(a){this.createDeleteDialog().attachTo(".delete",null,this.el)},createDeleteDialog:function(){var a=this,b=new z({id:"delete-repository-dialog",titleText:"Delete comment",titleClass:"warning-header",panelContent:"\x3cp\x3e"+"Are you sure that you want to delete this comment?"+"\x3c/p\x3e",submitText:"Delete",submitToHref:!1});b.addConfirmListener(function(b,
c,e){e();a.deleteComment(c.closest(".comment"))});return b},onFormSubmit:function(a){a.preventDefault();a.stopPropagation();this.submitCommentForm(e(a.target))},onDateClicked:function(a){a.preventDefault();a.stopPropagation();e(".comment.focused").removeClass("focused");a=e(a.target).closest("a");a.closest(".comment").addClass("focused");x.pushState(null,null,a.prop("href"))},onCancelClicked:function(a){a.preventDefault();a.stopPropagation();this.cancelCommentForm(e(a.target).closest("form"))},onReplyClicked:function(a){a.preventDefault();
a.stopPropagation();this.openReplyForm(e(a.target).closest(".comment"))},onEditClicked:function(a){a.preventDefault();a.stopPropagation();this.openEditForm(e(a.target).closest(".comment"))},onCreateTaskClicked:function(a){a.preventDefault();a.stopPropagation();a=e(a.target).closest(".comment");f.trigger("stash.feature.tasks.createTask",null,a)},onImagesLoaded:function(a){this.trigger("change")},onFormKeydown:function(a){y.isCtrlish(a)&&a.which===h.keyCode.ENTER&&(a.preventDefault(),a.stopPropagation(),
e(a.target).closest("form").submit())},onTextareaInput:function(a){e(a.target).closest(".comment-container").is(this.el)&&this.updateDraftComment(a.target)},onChildrenChanged:function(a){if(a.target!==a.currentTarget){a.stopPropagation();a=e(a.currentTarget);var b=a.find("\x3e .content .task-list-row, \x3e .replies \x3e .comment").not(".pending-delete").length;a.find("\x3e .content \x3e .actions \x3e li \x3e .delete").parent().toggleClass("hidden",!!b)}},onCommentFocused:function(a){var b=(new w(window.location)).getQueryParamValue("action"),
d={"comment.id":this.getCommentJSON(a.closest(".comment")).id,"pullRequest.id":g.getPullRequest().id,"repository.id":g.getRepository().id};"reply"===b?(a.find(".reply").first().click(),n.add("stash.client.comment.actions.reply",d)):"view"===b&&n.add("stash.client.comment.actions.view",d)},updateDraftComment:function(a){a=this.getDraftCommentFromForm(e(a).closest("form"));this.context&&this.context.saveDraftComment(a)},getDraftCommentFromForm:function(a){a=this.getCommentFormJSON(a);a.anchor&&delete a.anchor.commitRange;
return e.extend({},a)},deleteDraftComment:function(a){this.context&&this.context.deleteDraftComment(a)},getRootCommentList:function(){var a=this.$(this.rootCommentListSelector);a.length||(a=this.$el);return a},render:function(){var a=stash.feature.comments(e.extend({comments:this.collection.toJSON()},this.anchor.toJSON()));this.$el.replaceWith(a);this.setElement(a[0])},_toJSON:function(a,b){var d=parseInt(a.parent().closest(".comment").attr("data-id"),10),c=parseInt(a.attr("data-id"),10),e=parseInt(a.attr("data-version"),
10);return{id:isNaN(c)?void 0:c,version:isNaN(e)?void 0:e,text:b,anchor:this.anchor.toJSON(),parent:isNaN(d)?void 0:{id:d}}},getCommentJSON:function(a){return this._toJSON(a,a.find("\x3e .content \x3e .message").attr("data-text"))},getCommentFormJSON:function(a){var b=a.parent().is(".comment")?a.parent():a;return this._toJSON(b,a.find("textarea").val())},renderContentUpdate:function(a,b){a.children(".content").replaceWith(stash.feature.commentContent({pullRequest:this.pullRequest&&this.pullRequest.toJSON(),
comment:b,hideDelete:!!a.find("\x3e .replies \x3e .comment").length}));a.attr("data-version",b.version).data("version",b.version);this.$el.imagesLoaded(this.onImagesLoaded.bind(this));this.scrollToComment(a);this.trigger("change");f.trigger("stash.feature.comments.commentEdited",null,b,a)},insertCommentIntoList:function(a,b,d){for(var c=b.children(".comment:first");c.length&&!(parseInt(c.data("id"),10)>d.id);)c=c.next(".comment");c=c.length?c:b.children(".comment-form-container:last");c.length?a.insertBefore(c):
b.append(a)},renderComment:function(a,b,d){var c;if(d&&(c=e('.comment[data-id\x3d"'+a.id+'"]')).length)return this.renderContentUpdate(c,a);a=e.extend({isNew:!0},a);b=(c=b&&this.$("[data-id\x3d"+b+"]"))?c.children(".replies"):this.getRootCommentList();c=e(stash.feature.comment({pullRequest:this.pullRequest&&this.pullRequest.toJSON(),numOfAncestors:b.parents(".comment").length,extraClasses:this.getExtraCommentClasses(),comment:a}));this.insertCommentIntoList(c,b,a);setTimeout(k.bind(c.removeClass,
c,"new"),5E3);this.scrollToComment(c);c.hide().fadeIn("slow");this.$el.imagesLoaded(this.onImagesLoaded.bind(this));this.trigger("change");f.trigger("stash.feature.comments.commentAdded",null,a,c);c.trigger("comment-child-added")},getExtraCommentClasses:function(){return""},showErrorMessage:function(a,b){var d=this.find(".error");d.length||(d=e('\x3cdiv class\x3d"error"\x3e\x3c/div\x3e'),this.find(".comment-form-footer").before(d));d.text(b)},cancelCommentForm:function(a){this.closeCommentForm(a)},
submitCommentForm:function(a){if(!m.isSubmissionPrevented(a)){var b=this,d=a.find(".comment-submit-spinner"),c=this.getCommentFormJSON(a),f=null!=c.id,g=f&&this.collection.get(c.id),h=c.parent&&c.parent.id,l=g?this.collection.get(c.id):new t;l.on("invalid",this.showErrorMessage,a);l.set(e.extend(c,{avatarSize:stash.widget.avatarSizeInPx({size:"medium"})}),{validate:!0})&&(g||this.collection.push(l),a.addClass("submitting"),d.spin("medium"),m.preventSubmission(a),l.save().done(function(c){c.createdDate=
Math.min(c.createdDate,(new Date).getTime());c.updatedDate=Math.min(c.updatedDate,(new Date).getTime());b.closeCommentForm(a,{doNotDestroy:!0});b.renderComment(c,h,f);b.trigger("comment.saved")}).fail(function(){g||f||b.collection.remove(c.id)}).always(function(){d.spinStop();a.removeClass("submitting");m.allowSubmission(a)}));l.off("invalid",this.showErrorMessage)}},deleteComment:function(a){var b=this.getCommentJSON(a),d;this.collection.get(b)?d=this.collection.get(b.id):(d=new t(b),this.collection.push(d));
var c=a.find("\x3e .content .delete"),e=c.height(),g=c.width();c.height(e).width(g).css("vertical-align","middle").empty().spin("small");var k=this;d.destroy({wait:!0}).always(function(){c.spinStop()}).done(function(){a.addClass("pending-delete").fadeOut(function(){a.trigger("comment-child-removed").remove();k.onCommentDeleted();k.trigger("change");f.trigger("stash.feature.comments.commentDeleted",null,b)})}).fail(function(){c.css("height","").css("width","").css("vertical-align","").text("Delete")})},
onCommentDeleted:function(){},onCommentEditorResize:e.noop,openEditForm:function(a){var b=this.getCommentJSON(a),b=e(stash.feature.commentForm(e.extend({tips:450<this.$el.width()?u.tips:[],currentUser:g.getCurrentUser()&&g.getCurrentUser().toJSON()},b))),d=a.find("\x3e .user-avatar, \x3e .content");d.detach();a.prepend(b).addClass("comment-form-container");b.data("originalContent",d);this._bindMarkupEditor(b);this.focusCommentForm(b);this.trigger("change");f.trigger("stash.feature.comments.commentFormShown",
null,b);return b},openReplyForm:function(a){a=a.children(".replies");return this.openCommentForm(a,{location:"top"})},openNewCommentForm:function(){return this.openCommentForm(this.getRootCommentList(),{location:"bottom"})},openCommentForm:function(a,b){var d=b&&"top"===b.location?"prependTo":"appendTo",c=a.children(".comment-form-container").not(".comment");c.length||(c=e(stash.feature.commentFormListItem({tips:450<this.$el.width()?u.tips:[],currentUser:g.getCurrentUser()&&g.getCurrentUser().toJSON()}))[d](a),
this._bindMarkupEditor(c.find("form")));d=c.find("form");this.focusCommentForm(d);this.trigger("change");f.trigger("stash.feature.comments.commentFormShown",null,d);return d},closeCommentForm:function(a){a.find(".error").remove();this.deleteDraftComment(this.getDraftCommentFromForm(a));this._unbindMarkupEditor(a);var b=a.data("originalContent"),d=a.parent();b?(d.removeClass("comment-form-container"),a.replaceWith(b)):d.remove();this.trigger("change");f.trigger("stash.feature.comments.commentFormHidden",
null,a)},focusCommentForm:p.lazyDefer(function(a){this.scrollToComment(a);a.find("textarea").focus()}),scrollToComment:e.noop,populateCommentFormFromDraft:function(a,b){e(a).find("textarea").val(b.text).addClass("restored").attr("title","This comment has been restored from an automatically saved draft.").trigger("input").one("click input",function(){e(this).removeClass("restored").removeAttr("title")})},getCommentElById:function(a){return this.$(".comment[data-id\x3d"+a+"]")},restoreDraftComment:function(a){var b;
if(a.id){var d=this.getCommentElById(a.id);if(d.length){if(parseInt(a.version,10)<parseInt(d.attr("data-version"),10))return this.context.deleteDraftComment(a),!0;b=this.openEditForm(d)}}else a.parent?(d=this.getCommentElById(a.parent.id),d.length&&(b=this.openReplyForm(d))):b=this.openNewCommentForm();b&&this.populateCommentFormFromDraft(b,a);return!!b},_bindMarkupEditor:function(a){r.bindTo(a).on("resize",this.onCommentEditorResize)},_unbindMarkupEditor:function(a){r.unbindFrom(a)},destroy:function(){this.$("form").each(p.thisToParam(this._unbindMarkupEditor.bind(this)))}})});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:comments', location = '/static/feature/comments/comments.soy' */
// This file was automatically generated from comments.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace stash.feature.
 */

if (typeof stash == 'undefined') { var stash = {}; }
if (typeof stash.feature == 'undefined') { stash.feature = {}; }


stash.feature.comments = function(opt_data, opt_ignored) {
  var output = '<div class="comment-container' + ((opt_data.extraClasses) ? ' ' + soy.$$escapeHtml(opt_data.extraClasses) : '') + '"' + ((opt_data.line) ? ' data-line-number="' + soy.$$escapeHtml(opt_data.line) + '"' : '') + ((opt_data.lineType) ? ' data-line-type="' + soy.$$escapeHtml(opt_data.lineType) + '"' : '') + '><div class="panel"><ol class="comment-list">';
  if (opt_data.comments) {
    var commentList22 = opt_data.comments;
    var commentListLen22 = commentList22.length;
    for (var commentIndex22 = 0; commentIndex22 < commentListLen22; commentIndex22++) {
      var commentData22 = commentList22[commentIndex22];
      output += stash.feature.comment({comment: commentData22, numOfAncestors: 0, pullRequest: opt_data.commitRange.pullRequest});
    }
  }
  output += '</ol></div></div>';
  return output;
};
if (goog.DEBUG) {
  stash.feature.comments.soyTemplateName = 'stash.feature.comments';
}


stash.feature.comment = function(opt_data, opt_ignored) {
  var output = '<li class="comment' + ((opt_data.comment.isNew) ? ' new' : '') + ((opt_data.comment.isUnread) ? ' unread' : '') + ((opt_data.comment.isFocused) ? ' focused' : '') + ((opt_data.extraClasses) ? ' ' + soy.$$escapeHtml(opt_data.extraClasses) : '') + '" data-id="' + soy.$$escapeHtml(opt_data.comment.id) + '" data-version="' + soy.$$escapeHtml(opt_data.comment.version) + '">' + stash.widget.avatar({size: 'medium', person: opt_data.comment.author}) + stash.feature.commentContent(opt_data) + '<ol class="replies' + ((opt_data.numOfAncestors >= 7) ? ' no-indent' : '') + '">';
  if (opt_data.comment.comments) {
    var replyList62 = opt_data.comment.comments;
    var replyListLen62 = replyList62.length;
    for (var replyIndex62 = 0; replyIndex62 < replyListLen62; replyIndex62++) {
      var replyData62 = replyList62[replyIndex62];
      output += stash.feature.comment({comment: replyData62, pullRequest: opt_data.pullRequest, numOfAncestors: opt_data.numOfAncestors + 1});
    }
  }
  output += '</ol></li>';
  return output;
};
if (goog.DEBUG) {
  stash.feature.comment.soyTemplateName = 'stash.feature.comment';
}


stash.feature.commentContent = function(opt_data, opt_ignored) {
  var output = '<div class="content">';
  if (opt_data.comment.deleted) {
    output += soy.$$escapeHtml("This comment has been removed by the author.");
  } else {
    output += stash.widget.userLink({user: opt_data.comment.author, extraClasses: 'user-name'}) + '<div class="message ' + soy.$$escapeHtml(opt_data.comment.html ? 'markup' : 'plaintext') + '" data-text="' + soy.$$escapeHtml(opt_data.comment.text) + '">' + ((opt_data.comment.html) ? soy.$$filterNoAutoescape(opt_data.comment.html) : '<p>' + soy.$$escapeHtml(opt_data.comment.text) + '</p>') + '</div><ul class="actions"><li>' + stash.buttons.linkButton({content: '' + soy.$$escapeHtml("Reply"), extraClasses: 'reply'}) + '</li>' + ((opt_data.comment.permittedOperations.editable) ? '<li>' + stash.buttons.linkButton({content: '' + soy.$$escapeHtml("Edit"), extraClasses: 'edit'}) + '</li>' : '') + ((opt_data.comment.permittedOperations.deletable) ? '<li' + ((opt_data.hideDelete || (opt_data.comment.comments && opt_data.comment.comments.length || opt_data.comment.tasks && opt_data.comment.tasks.length)) ? ' class="hidden"' : '') + '>' + stash.buttons.linkButton({content: '' + soy.$$escapeHtml("Delete"), extraClasses: 'delete'}) + '</li>' : '');
    var itemList117 = WebFragments.getWebItems('stash.comments.actions',{comment: opt_data.comment, pullRequest: opt_data.pullRequest});
    var itemListLen117 = itemList117.length;
    for (var itemIndex117 = 0; itemIndex117 < itemListLen117; itemIndex117++) {
      var itemData117 = itemList117[itemIndex117];
      output += '<li>' + stash.widget.webItem(itemData117) + '</li>';
    }
    output += '</ul><ul class="info">';
    var panelHtmlList123 = WebFragments.getWebPanels('stash.comments.info',{comment: opt_data.comment, pullRequest: opt_data.pullRequest}).map(function(webPanel) { return soydata.VERY_UNSAFE.ordainSanitizedHtml(webPanel); });
    var panelHtmlListLen123 = panelHtmlList123.length;
    for (var panelHtmlIndex123 = 0; panelHtmlIndex123 < panelHtmlListLen123; panelHtmlIndex123++) {
      var panelHtmlData123 = panelHtmlList123[panelHtmlIndex123];
      output += '<li>' + soy.$$escapeHtml(panelHtmlData123) + '</li>';
    }
    output += '<li>';
    if (opt_data.pullRequest) {
      var pullRequestCommentLink__soy131 = require('stash/api/util/navbuilder').project(opt_data.pullRequest.toRef.repository.project.key).repo(opt_data.pullRequest.toRef.repository.slug).pullRequest(opt_data.pullRequest.id).overview().comment(opt_data.comment.id).withParams(opt_data.comment.id).build();
      output += '<a class="times" href="' + soy.$$escapeHtml(pullRequestCommentLink__soy131) + '">' + stash.feature.commentDate(opt_data) + '</a>';
    } else {
      output += '<span class="times">' + stash.feature.commentDate(opt_data) + '</span>';
    }
    output += '</li></ul><div class="extras">';
    var panelHtmlList144 = WebFragments.getWebPanels('internal.stash.comments.extra',{comment: opt_data.comment, pullRequest: opt_data.pullRequest}).map(function(webPanel) { return soydata.VERY_UNSAFE.ordainSanitizedHtml(webPanel); });
    var panelHtmlListLen144 = panelHtmlList144.length;
    for (var panelHtmlIndex144 = 0; panelHtmlIndex144 < panelHtmlListLen144; panelHtmlIndex144++) {
      var panelHtmlData144 = panelHtmlList144[panelHtmlIndex144];
      output += (panelHtmlIndex144 == 0) ? soy.$$escapeHtml(panelHtmlData144) : '';
    }
    output += '</div>';
  }
  output += '</div>';
  return output;
};
if (goog.DEBUG) {
  stash.feature.commentContent.soyTemplateName = 'stash.feature.commentContent';
}


stash.feature.commentDate = function(opt_data, opt_ignored) {
  return '' + ((opt_data.comment.updatedDate - opt_data.comment.createdDate > 0) ? (require('util/time').format(opt_data.comment.createdDate, 'shortAge') != require('util/time').format(opt_data.comment.updatedDate, 'shortAge')) ? stash.feature.commentEditTimes({createdDateContent: '' + stash.widget.date.shortAge({date: opt_data.comment.createdDate}), updatedDateContent: '' + stash.widget.date.shortAge({date: opt_data.comment.updatedDate})}) : stash.widget.date.shortAge({date: opt_data.comment.createdDate, title: AJS.format("{0} (edited {1})",require('util/time').format(opt_data.comment.createdDate, 'full'),require('util/time').format(opt_data.comment.updatedDate, 'full'))}) : stash.widget.date.shortAge({date: opt_data.comment.createdDate}));
};
if (goog.DEBUG) {
  stash.feature.commentDate.soyTemplateName = 'stash.feature.commentDate';
}


stash.feature.commentEditTimes = function(opt_data, opt_ignored) {
  return '' + soy.$$filterNoAutoescape(AJS.format("{0} (edited {1})",opt_data.createdDateContent,opt_data.updatedDateContent));
};
if (goog.DEBUG) {
  stash.feature.commentEditTimes.soyTemplateName = 'stash.feature.commentEditTimes';
}


stash.feature.commentFormListItem = function(opt_data, opt_ignored) {
  return '<li class="comment-form-container' + ((opt_data.isHidden) ? ' hidden' : '') + '">' + stash.feature.commentForm({id: opt_data.id, version: opt_data.version, text: opt_data.text, tips: opt_data.tips, currentUser: opt_data.currentUser, extraClasses: opt_data.extraFormClasses}) + '</li>';
};
if (goog.DEBUG) {
  stash.feature.commentFormListItem.soyTemplateName = 'stash.feature.commentFormListItem';
}


stash.feature.commentForm = function(opt_data, opt_ignored) {
  return '<form' + ((opt_data.id) ? ' data-id="' + soy.$$escapeHtml(opt_data.id) + '" data-version="' + soy.$$escapeHtml(opt_data.version) + '"' : '') + ' class="new-comment-form' + ((opt_data.extraClasses) ? ' ' + soy.$$escapeHtml(opt_data.extraClasses) : '') + '">' + stash.widget.avatar({size: 'medium', person: opt_data.currentUser}) + '<div class="content">' + ((opt_data.text) ? '<input name="old_text" type="hidden" value="' + soy.$$escapeHtml(opt_data.text) + '" />' : '') + stash.widget.markupEditor.editor({text: opt_data.text, placeholderText: "What do you want to say?", previewButtonTitle: "View a preview of this comment", attachmentButtonTitle: "Attach a file to this comment. You can also drag and drop a file to attach it.", attachmentButtonAccessibilityText: "Attach file"}) + '<div class="comment-form-footer"><div class="buttons">' + stash.buttons.button({buttonText: opt_data.id ? "Save" : "Comment"}) + widget.aui.form.cancelButton({href: '#'}) + '</div>' + ((opt_data.tips.length) ? stash.feature.commentFormTip(opt_data) : '') + '</div></div></form>';
};
if (goog.DEBUG) {
  stash.feature.commentForm.soyTemplateName = 'stash.feature.commentForm';
}


stash.feature.commentFormTip = function(opt_data, opt_ignored) {
  return '<div class="tip"><span class="tip-label">' + soy.$$escapeHtml("Tip:") + ' </span>' + soy.$$filterNoAutoescape(opt_data.tips[Math.floor(Math.random() * opt_data.tips.length)]) + '</div>';
};
if (goog.DEBUG) {
  stash.feature.commentFormTip.soyTemplateName = 'stash.feature.commentFormTip';
}


stash.feature.addCommentTrigger = function(opt_data, opt_ignored) {
  return '<button class="add-comment-trigger" title="' + soy.$$escapeHtml("Add a comment on this line.") + '">' + aui.icons.icon({useIconFont: true, icon: 'comment', accessibilityText: "This line has a comment."}) + aui.icons.icon({useIconFont: true, icon: 'add-comment', accessibilityText: "Add a comment on this line."}) + '</button>';
};
if (goog.DEBUG) {
  stash.feature.addCommentTrigger.soyTemplateName = 'stash.feature.addCommentTrigger';
}


stash.feature.dummyCommentTrigger = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  var output = '';
  var changeLocation__soy249 = opt_data.relevantContextLines ? AJS.format("Comments can only be added within {0} lines of a change",opt_data.relevantContextLines) : "Comments can only be added near a change";
  output += '<div class="dummy-comment-trigger" title="' + soy.$$escapeHtml(changeLocation__soy249) + '" ></div>';
  return output;
};
if (goog.DEBUG) {
  stash.feature.dummyCommentTrigger.soyTemplateName = 'stash.feature.dummyCommentTrigger';
}


stash.feature.fileComments = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<div class="file-comments">' + ((opt_data.comments && opt_data.comments.length > 0) ? stash.feature.comments(opt_data) : '') + '</div>';
};
if (goog.DEBUG) {
  stash.feature.fileComments.soyTemplateName = 'stash.feature.fileComments';
}


stash.feature.commentAsyncWebPanelPlaceholder = function(opt_data, opt_ignored) {
  return '<div id="async-web-panel-' + soy.$$escapeHtml(opt_data.webPanelId) + '"></div>';
};
if (goog.DEBUG) {
  stash.feature.commentAsyncWebPanelPlaceholder.soyTemplateName = 'stash.feature.commentAsyncWebPanelPlaceholder';
}
;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:comments', location = '/static/feature/comments/diff-comment-context.js' */
define("feature/comments/diff-comment-context","jquery lodash util/events util/function util/shortcuts model/direction feature/comments/anchors feature/comments/comment-collection feature/comments/comment-context feature/comments/diff-comment-container feature/file-content/diff-view-file-types feature/file-content/diff-view-options feature/file-content/diff-view-segment-types".split(" "),function(g,b,l,k,m,p,t,u,h,q,r,v,n){var w=t.LineAnchor;return h.extend({events:{"click .add-comment-trigger":"addCommentClicked",
"mouseenter .dummy-comment-trigger, .add-comment-trigger":"initTooltip"},initialize:function(){this._destroyables=[];b.bindAll(this,"onDiffChange","onFileCommentsResized","onCommentContainerDestroyed","onDiffViewOptionsChange");this._initFileCommentButton=this._initFileCommentButton.bind(this,this.options.$toolbar);this._destroyables.push(l.chain().once("stash.feature.fileContent.requestHandled",this._initFileCommentButton));this.setDiffView(this.options.diffView);this._dvOptions=this.options.diffViewOptions||
v;this._commentsById=this.options.lineComments&&b.indexBy(this.options.lineComments,k.dot("id"));this.$el.toggleClass("commentable",this.options.allowCommenting);this.toggleComments(!this._dvOptions.get("hideComments"));this._dvOptions.on("change",this.onDiffViewOptionsChange);l.on("stash.comment.commentContainerDestroyed",this.onCommentContainerDestroyed);this.renderFileComments();h.prototype.initialize.apply(this,arguments);var a=this._getFileCommentContainer();a&&this._initializeFileCommentContainer(a)},
_initFileCommentButton:function(a){a.find(".add-file-comment-trigger").on("click",this.addFileCommentClicked.bind(this)).tooltip({gravity:"ne"})},_initializeFileCommentContainer:function(a){a.on("resize",this.onFileCommentsResized)},_getFileCommentContainer:function(){var a=this.options.anchor.getId();if(this.includesContainer(a))return this._containers[a]},_registerContainer:function(a,c,b){this._containers[a]=new q({anchor:b,context:this,el:c,name:a});return this._containers[a]},addFileCommentClicked:function(){this.forceShowingComments();
this.addCommentContainerForFile().openNewCommentForm()},initTooltip:function(a){a=g(a.currentTarget);a.data("tooltip-inited")||(a.data("tooltip-inited",!0),a.tooltip({gravity:"w",delayOut:200}).trigger("mouseenter"))},addCommentClicked:function(a){a.preventDefault();this.forceShowingComments();a=g(a.target).closest(".line");this.addCommentContainerForLine(a).openNewCommentForm()},forceShowingComments:function(){this._dvOptions.get("hideComments")&&this._dvOptions.set("hideComments",!1)},addCommentContainerForFile:function(){var a=
this._getFileCommentContainer();if(a)return a;a=g(stash.feature.comments(this.options.anchor.toJSON()));a.appendTo(this.$(".file-comments"));this.registerContainer(a[0],this.options.anchor);a=this._getFileCommentContainer();this._initializeFileCommentContainer(a);return a},addCommentContainerForLine:function(a,c){var b=this.getLineAnchor(a),d=a.lineType?a:this.diffView.getLineHandle(a),f=b.getId();this.includesContainer(f)||(this._containers[f]=new q({anchor:b,collection:c?new u(c,{anchor:b}):void 0,
context:this,lineHandle:d,name:f,showComments:!this._dvOptions.get("hideComments")}));return this._containers[f]},destroy:function(a){a||(this.diffView&&this.diffView.off("change",this.onDiffChange),this.$el.removeClass("commentable"),this._dvOptions.off("change",this.onDiffViewOptionsChange),this._dvOptions=null,l.off("stash.comment.commentContainerDestroyed",this.onCommentContainerDestroyed),b.invoke(this._destroyables,"destroy"),this._destroyables=null);h.prototype.destroy.apply(this,arguments)},
findContainerElements:function(){return this.$(".line .comment-box, .file-comments \x3e .comment-container")},getAnchor:function(a){return g(a).closest(".file-comments").length?this.options.anchor:this.getLineAnchor(g(a).closest(".line"))},getGutterId:function(){return this.options.allowCommenting?"add-comment-trigger":null},getLineAnchor:function(a){a=a.lineType?a:this.diffView.getLineHandle(a);return new w(this.options.anchor,a.lineType,a.lineNumber,a.fileType)},renderFileComments:function(){var a=
this.options.anchor.toJSON().commitRange;this.$el.prepend(stash.feature.fileComments({comments:this.options.fileComments,commitRange:a}))},addAnchoredComments:function(){function a(a){return b.chain(a).filter(function(a){return!(!a.anchor||!a.anchor.line)}).groupBy(function(a){return(a.anchor.fileType||"")+a.anchor.line}).value()}var c=this,e=this.diffView,d=this.options.lineComments;d&&d[0]&&!d[0].anchor||b.forEach(a(d),function(a){var b=a[0].anchor;(b=e.getLineHandle({fileType:b.fileType,lineType:b.lineType,
lineNumber:b.line}))&&c.addCommentContainerForLine(b,a)})},onFileCommentsResized:function(){this.trigger("fileCommentsResized")},onDiffChange:function(a){if("INITIAL"===a.type||"INSERT"===a.type){"INITIAL"===a.type&&this.addAnchoredComments();var c=this.diffView,e=this;a.eachLine(function(d){var f=d.line,h;h=!d.attributes.expanded&&"MARKER"!==d.line.conflictMarker&&e.options.allowCommenting&&"INITIAL"===a.type?stash.feature.addCommentTrigger():stash.feature.dummyCommentTrigger({relevantContextLines:e.options.relevantContextLines});
d.handles.FROM&&c.setGutterMarker(d.handles.FROM,e.getGutterId(),g(h)[0]);d.handles.TO&&d.handles.FROM!==d.handles.TO&&c.setGutterMarker(d.handles.TO,e.getGutterId(),g(h)[0]);f.commentIds&&(f=b.chain(f.commentIds).map(k.lookup(e._commentsById)).filter(b.identity).value(),f.length&&e.addCommentContainerForLine(d.handles.FROM||d.handles.TO,f));e.unrestoredDrafts.length&&"INITIAL"===a.type&&b.chain(d.handles).values().compact().uniq().forEach(e.restoreDraftsForLine.bind(e)).value()})}},onCommentContainerDestroyed:function(a){var c=
this._getFileCommentContainer();c&&a===c.$el&&b.defer(this.onFileCommentsResized.bind(this))},onDiffViewOptionsChange:function(a){"hideComments"===a.key&&this.toggleComments(!a.value)},restoreDraftsForLine:function(a){var b=g.extend({line:a.lineNumber,lineType:a.lineType},{fileType:a.fileType}),b=this.getUnrestoredDraftsForLine(b);b.length&&(a=this.addCommentContainerForLine(a),this._restoreDraftsToContainer(a,b),a.destroyIfEmpty())},_restoreDraftsToContainer:function(a,c){b.forEach(c,a.restoreDraftComment.bind(a));
this.unrestoredDrafts=b.difference(this.unrestoredDrafts,c)},restoreDrafts:function(){var a=this;this.options.allowCommenting||(this.unrestoredDrafts=b.filter(this.unrestoredDrafts,function(b){return(b.id||b.parent)&&(a.$el.is(".file-comment-activity")||b.anchor.line)}));this.restoreDraftFileComments()},restoreDraftFileComments:function(){var a=b.reject(this.unrestoredDrafts,k.dot("anchor.line"));a.length&&this._restoreDraftsToContainer(this.addCommentContainerForFile(),a)},getUnrestoredDraftsForLine:function(a){var c=
b.compose(k.partialRight(b.omit,"path","srcPath"),this.unifyAnchorFileTypes);a=b.isEqual.bind(b,c(a));c=b.compose(a,c,k.dot("anchor"));return b.filter(this.unrestoredDrafts,c)},unifyAnchorFileTypes:function(a){var c=a.lineType===n.ADDED&&a.fileType===r.TO;return(a.lineType===n.CONTEXT||a.lineType===n.REMOVED)&&a.fileType===r.FROM||c?b.omit(a,"fileType"):a},clarifyAmbiguousDraftProps:function(a){a=h.prototype.clarifyAmbiguousDraftProps.call(this,a);a.anchor=this.unifyAnchorFileTypes(a.anchor);return a},
setDiffView:function(a){this.diffView&&this.diffView.off("internal-change",this.onDiffChange);if(this.diffView=a)this.diffView.on("internal-change",this.onDiffChange),this._destroyables.push({destroy:m.bind("addFileComment",this.addFileCommentClicked.bind(this))}),this._destroyables.push({destroy:m.bind("requestTertiaryNext",a._scrollToComment.bind(a,p.DOWN))}),this._destroyables.push({destroy:m.bind("requestTertiaryPrevious",a._scrollToComment.bind(a,p.UP))})},toggleComments:function(a){this.$el.toggleClass("hide-comments",
!a);b.invoke(this._containers,"toggleComment",a)}})});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:comments', location = '/static/feature/comments/comment-model.js' */
define("feature/comments/comment-model",["aui","backbone","backbone-brace","lodash","stash/api/util/navbuilder"],function(d,h,c,g,k){var f=c.Model.extend({namedAttributes:{anchor:null,attributes:null,author:null,avatarSize:null,comments:null,tasks:null,createdDate:"number",html:"string",id:"number",isFocused:"boolean",isUnread:"boolean",parent:null,permittedOperations:null,properties:null,text:"string",updatedDate:"number",version:"number"},validate:function(a){if(!a.text||!/\S/.test(a.text))return "Please enter some text"},
url:function(){var a=k.parse(c.Model.prototype.url.apply(this,arguments)),b=this.get("anchor");b&&b.commitRange&&(b=b.commitRange.sinceRevision)&&a.addQueryParam("since",b.id);a.addQueryParam("version",this.get("version")).addQueryParam("avatarSize",this.get("avatarSize")).addQueryParam("markup",!0);return a.toString()},forEachCommentInThread:function(a){a(this);g.each(this.get("comments"),function(b){b.forEachCommentInThread(a)})},sync:function(a,b,c){return h.sync(a,b,g.extend(c,{statusCode:{404:function(c,
f,g,e,h){if((c=e&&e.errors&&e.errors.length&&e.errors[0])&&c.message&&/comment/i.test(c.message)){if("create"===a&&null!=b.get("parent"))return{title:"Comment not found",message:"The comment you are replying to no longer exists.",shouldReload:!0,fallbackUrl:void 0};if("update"===a)return{title:"Comment not found",message:"The comment you are updating no longer exists.",shouldReload:!0,fallbackUrl:void 0}}}}}))}});c.Mixins.applyMixin(f,
{namedAttributes:{comments:[f]}});return f});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:comments', location = '/static/feature/comments/comment-async-web-panel.js' */
define("feature/comments/comment-async-web-panel",["jquery","stash/api/util/events","util/promise","exports"],function(e,b,f,c){var d=[document.documentElement];b.on("stash.page.pull-request.view.contextRequested",function(){d=[document.documentElement]});b.on("stash.feature.comments.commentContainerAdded",function(a){d.push(a[0])});var a=0;c.getWebPanelEl=function(b){a++;var c="#async-web-panel-"+a;f.waitFor({predicate:function(){var a=e(c,d);return a.length?a:!1},name:"Async web panel "+a,interval:50}).then(b);
return stash.feature.commentAsyncWebPanelPlaceholder({webPanelId:a})}});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:comments', location = '/static/feature/comments/diff-comment-container.js' */
define("feature/comments/diff-comment-container",["jquery","lodash","util/events","util/function","feature/comments/comment-container"],function(b,f,e,g,d){e.on("memoir.changestate",function(){});return d.extend({rootCommentListSelector:".comment-list",initialize:function(){f.bindAll(this,"onResize","onWebPanelResize");this.$el.is(".comment-container")||this.setElement(b(stash.feature.comments(b.extend({extraClasses:"comment-box",comments:this.options.collection&&this.options.collection.toJSON()},
this.options.anchor.toJSON())))[0]);!this.isFileCommentContainer()&&this.options.context.diffView&&(this.toggleComment(this.options.showComments),this.options.context.diffView.addLineClass(this.options.lineHandle,"wrap","commented"));this.on("change",this.onResize);this.on("comment.saved",this.scrollIntoView);e.on("stash.webpanel.resize",this.onWebPanelResize);d.prototype.initialize.apply(this,arguments)},closeCommentForm:function(a,c){if(!c||!c.doNotDestroy){var b=a.parent().parent();if(b.is(this.rootCommentListSelector)&&
0===b.children(".comment").length)return this.deleteDraftComment(this.getDraftCommentFromForm(a)),this._unbindMarkupEditor(a),this.destroy()}return d.prototype.closeCommentForm.apply(this,arguments)},destroyIfEmpty:function(){var a=this.$(this.rootCommentListSelector);0!==a.children(".comment").length||a.find("textarea").val()||this.destroy()},destroy:function(a){d.prototype.destroy.apply(this,arguments);this._widget&&(this._widget.clear(),this._widget=null);this.off("change",this.onResize);this.options.lineHandle&&
this.options.context.diffView.removeLineClass(this.options.lineHandle,"wrap","commented");e.trigger("stash.comment.commentContainerDestroyed",null,this.$el);this.context.destroy(this,a)},focusCommentForm:g.lazyDefer(function(a){this.scrollToComment(a);a=a.find("textarea");this.isFileCommentContainer()?setTimeout(a.focus.bind(a),100):a.focus()}),onCommentDeleted:function(){this.destroyIfEmpty()},onCommentEditorResize:function(){this.onResize()},onWebPanelResize:function(a){if("internal.stash.comments.extra"===
a.location&&b.contains(this.$el.get(0),a.el))this.onResize()},onResize:function(){this._widget&&this._widget.changed();this.trigger("resize")},isFileCommentContainer:function(){return!!this.$el.closest(".file-comments").length},isActivityCommentContainer:function(){return!!this.$el.closest(".activity-item").length},scrollToComment:function(a){if(!this.isActivityCommentContainer()){var c=a.offset().top-this.$el.offset().top;this.isFileCommentContainer()?this.options.context.diffView&&this.options.context.diffView.scrollToFileComments(c,
a.height()):this.options.context.diffView.scrollToWidgetOffset(this.options.lineHandle,c,a.height())}},toggleComment:function(a){this.isFileCommentContainer()?this.options.context.trigger("fileCommentsResized"):a&&!this._widget?(this._widget=this.options.context.diffView.addLineWidget(this.options.lineHandle,this.el,{noHScroll:!0,coverGutter:!0,insertAt:0}),a=f.throttle(function(){var a=this.getHeight();this._previousHeight!==a&&(this.changed(),this._previousHeight=a)},200),this._widget.onRedraw(a.bind(this._widget))):
!a&&this._widget&&(this._widget.clear(),this._widget=null,this.el.parentElement.removeChild(this.el))}})});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:comments', location = '/static/feature/comments/activity-comment-container.js' */
define("feature/comments/activity-comment-container",["jquery","lodash","util/events","feature/comments/comment-container"],function(d,c,f,b){return b.extend({initialize:function(){b.prototype.initialize.apply(this,arguments)},rootCommentListSelector:".pull-request-activity",events:c.extend({},b.prototype.events,{"focus .general-comment-form textarea":"onGeneralFormTextareaFocused"}),initDeleteButtons:function(){this.createDeleteDialog().attachTo(".general-comment-activity .delete",null,this.el)},
insertCommentIntoList:function(a,e,d){if(e.is(this.rootCommentListSelector)){var c=e.children(":first");a.insertAfter(c)}else b.prototype.insertCommentIntoList.apply(this,arguments)},closeCommentForm:function(a){a.find(".error").remove();a.is(".general-comment-form")?(this._unbindMarkupEditor(a),a.addClass("collapsed"),a.find("textarea").val("").removeClass("restored").removeAttr("title").blur(),this.deleteDraftComment(this.getDraftCommentFromForm(a))):b.prototype.closeCommentForm.apply(this,arguments)},
getExtraCommentClasses:function(){return"general-comment-activity"},onGeneralFormTextareaFocused:function(a){a=d(a.target).closest(".general-comment-form");a.hasClass("collapsed")&&(this._bindMarkupEditor(a),a.removeClass("collapsed"))}})});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:comments', location = '/static/feature/comments/comment-context.js' */
define("feature/comments/comment-context","backbone jquery lodash util/client-storage util/events feature/comments/comment-container".split(" "),function(f,g,c,e,d,h){return f.View.extend({initialize:function(){this._containers={};this.checkForNewContainers();var a=this;d.on("stash.feature.comments.commentAdded",this._commentAddedHandler=function(b,c){a.$el.find(c).length&&1===a.$el.find(".comment").length&&d.trigger("stash.feature.comments.firstCommentAdded",null,a.$el)});var b=this.getDrafts()||
[];this.unrestoredDrafts=this.drafts=c.isArray(b)?b:[b];this.restoreDrafts()},includesContainer:function(a){return c.has(this._containers,a)},registerContainer:function(a,b){var c=b.getId();this.includesContainer(c)||this._registerContainer(c,a,b)},_registerContainer:function(a,b,c){this._containers[a]=new h({name:a,context:this,el:b,anchor:c});return this._containers[a]},checkForNewContainers:function(){var a=this;c.forEach(this.findContainerElements(),function(b){a.registerContainer(b,a.getAnchor(b))})},
findContainerElements:function(){return this.$(".comment-container")},getAnchor:function(){return this.options.anchor},clarifyAmbiguousDraftProps:function(a){return c.omit(a,"text")},deleteDraftComment:function(a,b){b=c.isBoolean(b)?b:!0;var d=c.isEqual.bind(c,this.clarifyAmbiguousDraftProps(a));this.drafts=c.reject(this.drafts,c.compose(d,this.clarifyAmbiguousDraftProps.bind(this)));b&&this.saveDraftComments()},getDrafts:function(){return e.getSessionItem(this.getDraftsKey())},getDraftsKey:function(){return e.buildKey(["draft-comment",
this.options.anchor.getId()],"user")},restoreDrafts:g.noop,saveDraftComment:function(a){this.deleteDraftComment(a,!1);a.text&&this.drafts.push(a);this.saveDraftComments()},saveDraftComments:function(){e.setSessionItem(this.getDraftsKey(),this.drafts)},destroy:function(a,b){a?(a.remove(),delete this._containers[a.options.name],this.$el.has(".comment").length||b||d.trigger("stash.feature.comments.lastCommentDeleted",null,this.$el)):(c.invoke(this._containers,"destroy",!0),this._containers=null,this._commentAddedHandler&&
(d.off("stash.feature.comments.commentAdded",this._commentAddedHandler),delete this._commentAddedHandler))}})});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:comments', location = '/static/feature/comments/comments.js' */
define("feature/comments",["jquery","feature/comments/activity-comment-context","feature/comments/anchors","feature/comments/comment-tips","feature/comments/diff-comment-context"],function(e,g,f,h,k){var c={CREATE_NEW:"create-new",REPLY_ONLY:"reply-only",READ:"read",NONE:"none"};return e.extend({bindContext:function(a,d,b){if(a.data("comment-context"))throw Error("Duplicate comment context registered.");b=e.extend({el:a[0],anchor:d,allowCommenting:b&&b.commentMode===c.CREATE_NEW,showComments:b&&(b.commentMode===
c.READ||b.commentMode===c.CREATE_NEW||b.commentMode===c.REPLY_ONLY)},b);d=d instanceof f.DiffAnchor?new k(b):new g(b);a.data("comment-context",d);return d},updateContext:function(a){(a=a.data("comment-context"))&&a.checkForNewContainers()},unbindContext:function(a){(a=a.data("comment-context"))&&a.destroy()},commentMode:c},f,h)});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:file-change-types', location = '/static/model/file-change-types.js' */
define("model/file-change-types",function(){return{ADD:"ADD",DELETE:"DELETE",MODIFY:"MODIFY",COPY:"COPY",MOVE:"MOVE",RENAME:"RENAME",UNKNOWN:"UNKNOWN",changeTypeFromId:function(a){if(Object.prototype.hasOwnProperty.call(this,a)&&"string"===typeof this[a])return this[a]},guessChangeTypeFromDiff:function(a){return a.binary?null===a.source?this.ADD:null===a.destination?this.DELETE:this.MODIFY:(a=a.hunks[0])?0===a.sourceLine?this.ADD:0===a.destinationLine?this.DELETE:this.MODIFY:this.UNKNOWN}}});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:file-content-modes', location = '/static/model/file-content-modes.js' */
define("model/file-content-modes",function(){return{SOURCE:"source",DIFF:"diff"}});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:web-fragment-templates', location = '/static/widget/web-fragment.soy' */
// This file was automatically generated from web-fragment.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace stash.widget.
 */

if (typeof stash == 'undefined') { var stash = {}; }
if (typeof stash.widget == 'undefined') { stash.widget = {}; }


stash.widget.webItem = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<' + soy.$$escapeHtml(opt_data.url || opt_data.forceLink ? 'a' : 'span') + ((opt_data.url) ? ' href="' + soy.$$escapeHtml(opt_data.url) + '"' : '') + ((opt_data.linkId) ? ' id="' + soy.$$escapeHtml(opt_data.linkId) + '"' : '') + ((opt_data.styleClass) ? ' class="' + soy.$$escapeHtml(opt_data.styleClass) + '"' : '') + ((opt_data.tooltip) ? ' title="' + soy.$$escapeHtml(opt_data.tooltip) + '"' : '') + ((opt_data.pluginKey && opt_data.moduleKey) ? ' data-web-item-key="' + soy.$$escapeHtml(opt_data.pluginKey) + ':' + soy.$$escapeHtml(opt_data.moduleKey) + '"' : '') + '>' + ((opt_data.content) ? soy.$$filterNoAutoescape(opt_data.content) : (opt_data.params && opt_data.params['stashIconClass']) ? '<span class="aui-icon ' + soy.$$escapeHtml(opt_data.params['stashIconClass']) + '">' + soy.$$escapeHtml(opt_data.linkText) + '</span>' : soy.$$escapeHtml(opt_data.linkText)) + '</' + soy.$$escapeHtml(opt_data.url || opt_data.forceLink ? 'a' : 'span') + '>';
};
if (goog.DEBUG) {
  stash.widget.webItem.soyTemplateName = 'stash.widget.webItem';
}


stash.widget.webItemButton = function(opt_data, opt_ignored) {
  return '' + stash.buttons.button({buttonText: opt_data.linkText ? opt_data.linkText : '', id: opt_data.linkId, title: opt_data.tooltip, extraClasses: opt_data.styleClass && opt_data.extraClasses ? opt_data.styleClass + ' ' + opt_data.extraClasses : opt_data.styleClass ? opt_data.styleClass : opt_data.extraClasses, href: opt_data.url, iconType: opt_data.params['stashIconClass'] ? 'custom' : '', iconClass: opt_data.params['stashIconClass'], iconText: ! opt_data.linkText ? opt_data.tooltip : ''});
};
if (goog.DEBUG) {
  stash.widget.webItemButton.soyTemplateName = 'stash.widget.webItemButton';
}


stash.widget.webItemtabMenuItem = function(opt_data, opt_ignored) {
  return '' + widget.aui.tabMenuItem({id: opt_data.linkId, tooltip: opt_data.tooltip, text: opt_data.linkText, url: opt_data.url, extraClasses: opt_data.styleClass, isActive: opt_data.isActive});
};
if (goog.DEBUG) {
  stash.widget.webItemtabMenuItem.soyTemplateName = 'stash.widget.webItemtabMenuItem';
}


stash.widget.webItemDropdownItem = function(opt_data, opt_ignored) {
  return '' + stash.widget.webItem(soy.$$augmentMap(opt_data, {forceLink: true}));
};
if (goog.DEBUG) {
  stash.widget.webItemDropdownItem.soyTemplateName = 'stash.widget.webItemDropdownItem';
}


stash.widget.headerDropdownWebItems = function(opt_data, opt_ignored) {
  return '<li class="' + ((opt_data.isActive) ? 'selected' : '') + ((opt_data.styleClass) ? ' ' + soy.$$escapeHtml(opt_data.styleClass) : '') + '"' + ((opt_data.tooltip) ? 'title="' + soy.$$escapeHtml(opt_data.tooltip) + '"' : '') + '>' + ((opt_data.dropdownWebSections.length > 0) ? aui.dropdown2.trigger({menu: {id: opt_data.pluginKey + '-' + opt_data.moduleKey}, id: opt_data.linkId ? opt_data.linkId : '', text: opt_data.params['stashIconClass'] ? null : opt_data.linkText, extraClasses: opt_data.hideDropdownArrow ? 'aui-dropdown2-trigger-arrowless' : null, content: '' + ((opt_data.iconUrl) ? '<img src="' + soy.$$escapeHtml(opt_data.iconUrl) + '" class="aui-icon"' + ((opt_data.iconWidth) ? ' width="' + soy.$$escapeHtml(opt_data.iconWidth) + '"' : '') + ((opt_data.iconHeight) ? ' height="' + soy.$$escapeHtml(opt_data.iconHeight) + '"' : '') + '/>' : '') + ((opt_data.params['stashIconClass']) ? '<span class="aui-icon ' + soy.$$escapeHtml(opt_data.params['stashIconClass']) + '">' + soy.$$escapeHtml(opt_data.linkText) + '</span>' : '')}) + aui.dropdown2.contents({id: opt_data.pluginKey + '-' + opt_data.moduleKey, extraClasses: 'aui-style-default', content: '' + stash.widget.headerDropdownWebSections({dropdownWebSections: opt_data.dropdownWebSections, locationPrefix: opt_data.moduleKey + '/'})}) : stash.widget.webItem(opt_data)) + '</li>';
};
if (goog.DEBUG) {
  stash.widget.headerDropdownWebItems.soyTemplateName = 'stash.widget.headerDropdownWebItems';
}


stash.widget.headerDropdownWebSections = function(opt_data, opt_ignored) {
  var output = '';
  var dropdownWebSectionList127 = opt_data.dropdownWebSections;
  var dropdownWebSectionListLen127 = dropdownWebSectionList127.length;
  for (var dropdownWebSectionIndex127 = 0; dropdownWebSectionIndex127 < dropdownWebSectionListLen127; dropdownWebSectionIndex127++) {
    var dropdownWebSectionData127 = dropdownWebSectionList127[dropdownWebSectionIndex127];
    var param130 = '<ul class="aui-list-truncate" role="presentation">';
    var sectionItemList132 = WebFragments.getWebItems((opt_data.locationPrefix ? opt_data.locationPrefix : '') + dropdownWebSectionData127.key,opt_data.context ? opt_data.context : {});
    var sectionItemListLen132 = sectionItemList132.length;
    for (var sectionItemIndex132 = 0; sectionItemIndex132 < sectionItemListLen132; sectionItemIndex132++) {
      var sectionItemData132 = sectionItemList132[sectionItemIndex132];
      param130 += '<li role="presentation">' + stash.widget.webItem(sectionItemData132) + '</li>';
    }
    param130 += '</ul>';
    output += aui.dropdown2.section({extraClasses: dropdownWebSectionData127.key, label: dropdownWebSectionData127.labelText, content: param130});
  }
  return output;
};
if (goog.DEBUG) {
  stash.widget.headerDropdownWebSections.soyTemplateName = 'stash.widget.headerDropdownWebSections';
}


stash.widget.webFragmentButtons = function(opt_data, opt_ignored) {
  var output = '';
  var webFragmentList141 = opt_data.isReverse ? WebFragments.getWebFragments(opt_data.location,opt_data.context).reverse() : WebFragments.getWebFragments(opt_data.location,opt_data.context);
  var webFragmentListLen141 = webFragmentList141.length;
  for (var webFragmentIndex141 = 0; webFragmentIndex141 < webFragmentListLen141; webFragmentIndex141++) {
    var webFragmentData141 = webFragmentList141[webFragmentIndex141];
    switch (webFragmentData141.type) {
      case 'ITEM':
        output += stash.buttons.buttons({content: '' + stash.widget.webItemButton(webFragmentData141)});
        break;
      case 'SECTION':
        var param149 = '';
        var webItemList150 = opt_data.isReverse ? WebFragments.getWebItems(opt_data.location + '/' + webFragmentData141.key,opt_data.context).reverse() : WebFragments.getWebItems(opt_data.location + '/' + webFragmentData141.key,opt_data.context);
        var webItemListLen150 = webItemList150.length;
        for (var webItemIndex150 = 0; webItemIndex150 < webItemListLen150; webItemIndex150++) {
          var webItemData150 = webItemList150[webItemIndex150];
          param149 += stash.widget.webItemButton(webItemData150);
        }
        output += stash.buttons.buttons({extraClasses: webFragmentData141.styleClass, content: param149});
        break;
    }
  }
  return output;
};
if (goog.DEBUG) {
  stash.widget.webFragmentButtons.soyTemplateName = 'stash.widget.webFragmentButtons';
}


stash.widget.webItemTabs = function(opt_data, opt_ignored) {
  var param156 = '' + ((opt_data.tabItemsContent) ? soy.$$filterNoAutoescape(opt_data.tabItemsContent) : '');
  var itemList161 = opt_data.webItems ? opt_data.webItems : WebFragments.getWebItems(opt_data.location,opt_data.context ? opt_data.context : null);
  var itemListLen161 = itemList161.length;
  for (var itemIndex161 = 0; itemIndex161 < itemListLen161; itemIndex161++) {
    var itemData161 = itemList161[itemIndex161];
    var param169 = '';
    var subPanelList170 = WebFragments.getWebPanels(itemData161.moduleKey + '.meta',opt_data.context ? opt_data.context : null).map(function(webPanel) { return soydata.VERY_UNSAFE.ordainSanitizedHtml(webPanel); });
    var subPanelListLen170 = subPanelList170.length;
    for (var subPanelIndex170 = 0; subPanelIndex170 < subPanelListLen170; subPanelIndex170++) {
      var subPanelData170 = subPanelList170[subPanelIndex170];
      param169 += soy.$$escapeHtml(subPanelData170);
    }
    param156 += widget.aui.tabMenuItem({url: itemData161.url, text: itemData161.linkText, id: itemData161.linkId, extraLinkClasses: itemData161.styleClass, tooltip: itemData161.tooltip, isActive: opt_data.showFirstTab ? itemIndex161 == 0 : opt_data.activeTab ? itemData161.moduleKey == opt_data.activeTab : false, extraAttributes: {'data-module-key': itemData161.moduleKey}, extraLinkContent: param169});
  }
  var output = '' + widget.aui.tabChrome(soy.$$augmentMap(opt_data, {tabItemsContent: param156}));
  return output;
};
if (goog.DEBUG) {
  stash.widget.webItemTabs.soyTemplateName = 'stash.widget.webItemTabs';
}


stash.widget.sidebarWebFragmentNavigation = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.primaryNavContent || opt_data.secondaryNavContent || opt_data.webFragments.length > 0) {
    var param183 = '<ul class="aui-nav">' + ((opt_data.primaryNavContent) ? soy.$$filterNoAutoescape(opt_data.primaryNavContent) : '');
    var fragmentList189 = opt_data.webFragments;
    var fragmentListLen189 = fragmentList189.length;
    for (var fragmentIndex189 = 0; fragmentIndex189 < fragmentListLen189; fragmentIndex189++) {
      var fragmentData189 = fragmentList189[fragmentIndex189];
      param183 += (fragmentData189.type == 'ITEM') ? stash.widget.sidebarNavItemWebItem({context: opt_data.context, isActive: fragmentData189.moduleKey == opt_data.activeNavItem, isTierOne: opt_data.isTierOne, webItem: fragmentData189}) : (fragmentData189.type == 'SECTION') ? stash.widget.sidebarNavWebSection({activeNavItem: opt_data.activeNavItem, context: opt_data.context, fragment: fragmentData189, isTierOne: opt_data.isTierOne}) : '';
    }
    param183 += '</ul>';
    output += widget.aui.sidebarNavGroup({extraClasses: opt_data.extraClasses, isTierOne: opt_data.isTierOne, isActions: opt_data.isActions, title: opt_data.title, navContent: param183, secondaryNavContent: '' + ((opt_data.secondaryNavContent) ? '<ul class="aui-nav">' + soy.$$filterNoAutoescape(opt_data.secondaryNavContent) + '</ul>' : '')});
  }
  return output;
};
if (goog.DEBUG) {
  stash.widget.sidebarWebFragmentNavigation.soyTemplateName = 'stash.widget.sidebarWebFragmentNavigation';
}


stash.widget.sidebarNavWebSection = function(opt_data, opt_ignored) {
  return '' + stash.widget.sidebarNavSectionWithItems({activeNavItem: opt_data.activeNavItem, context: opt_data.context, heading: opt_data.fragment.labelText, isTierOne: opt_data.isTierOne, webItems: WebFragments.getWebItems(opt_data.fragment.location + '/' + opt_data.fragment.key,opt_data.context ? opt_data.context : null)});
};
if (goog.DEBUG) {
  stash.widget.sidebarNavWebSection.soyTemplateName = 'stash.widget.sidebarNavWebSection';
}


stash.widget.sidebarNavSectionWithItems = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.webItems.length) {
    output += widget.aui.navHeading({text: opt_data.heading}) + '<ul class="aui-nav">';
    var webItemList226 = opt_data.webItems;
    var webItemListLen226 = webItemList226.length;
    for (var webItemIndex226 = 0; webItemIndex226 < webItemListLen226; webItemIndex226++) {
      var webItemData226 = webItemList226[webItemIndex226];
      output += stash.widget.sidebarNavItemWebItem({context: opt_data.context, isActive: webItemData226.moduleKey == opt_data.activeNavItem || webItemData226.linkId == opt_data.activeNavItem, isTierOne: opt_data.isTierOne, webItem: webItemData226});
    }
    output += '</ul>';
  }
  return output;
};
if (goog.DEBUG) {
  stash.widget.sidebarNavSectionWithItems.soyTemplateName = 'stash.widget.sidebarNavSectionWithItems';
}


stash.widget.sidebarNavItemWebItem = function(opt_data, opt_ignored) {
  var param244 = '';
  if (opt_data.webItem.moduleKey) {
    var badgeContentList247 = WebFragments.getWebPanels(opt_data.webItem.moduleKey + '.badge',opt_data.context ? opt_data.context : null).map(function(webPanel) { return soydata.VERY_UNSAFE.ordainSanitizedHtml(webPanel); });
    var badgeContentListLen247 = badgeContentList247.length;
    for (var badgeContentIndex247 = 0; badgeContentIndex247 < badgeContentListLen247; badgeContentIndex247++) {
      var badgeContentData247 = badgeContentList247[badgeContentIndex247];
      param244 += ' ' + soy.$$escapeHtml(badgeContentData247);
    }
  }
  var output = '' + widget.aui.sidebarNavItem({extraClasses: opt_data.webItem.styleClass, iconClass: opt_data.webItem.params['stashIconClass'], id: opt_data.webItem.linkId, webItemKey: opt_data.webItem.pluginKey + ':' + opt_data.webItem.moduleKey, isActive: opt_data.isActive, isTierOne: opt_data.isTierOne, text: opt_data.webItem.linkText, tooltip: opt_data.webItem.tooltip, url: opt_data.webItem.url, badgeContent: param244});
  return output;
};
if (goog.DEBUG) {
  stash.widget.sidebarNavItemWebItem.soyTemplateName = 'stash.widget.sidebarNavItemWebItem';
}
;
;/* module-key = 'com.atlassian.plugins.atlassian-chaperone:internals', location = '/internals/syncing.js' */
var Chaperone={_internal:{}};Chaperone._internal.syncing=(function(){function a(c,d){return(d||AJS.$).ajax({url:AJS.contextPath()+"/rest/chaperone/1/chaperone/"+c})}function b(c,e,d){return(d||AJS.$).ajax({url:AJS.contextPath()+"/rest/chaperone/1/chaperone/"+c,type:"POST",data:{json:e}})}return{syncToServer:b,syncFromServer:a}})();;
;/* module-key = 'com.atlassian.plugins.atlassian-chaperone:feature-discovery', location = '/feature-discovery/feature-discovery.js' */
(function(i,g,k,e,f){var j=e.syncFromServer;var h=e.syncToServer;var c=g.Callbacks();g(document).on("ajaxStop",function(){c.fire()});var b=g.Callbacks();g(window).on("resize",function(){b.fire()});function a(l){var m=g.Deferred();function n(){var o=g(l);if(o.length){m.resolve(o);c.remove(n)}}c.add(n);n();return m}function d(p,r,m,o){var l=g.Callbacks();var n=g.Callbacks();var s=g.Callbacks();function q(u){var w;function t(y){return function(){g(document).off("hideLayer",v);u.off(".chaperone");w.remove();b.remove(w.refresh);c.remove(x);if(y){y.fire()}}}function x(){if(!u.is(":visible")){t()()}}var v=t(l);w=new i.InlineDialog(u,"feature-discovery-"+p,function(A,y,D){A.html(chaperone.featureDiscovery.content({step:r,paging:m}));var C=A.find(".feature-discovery-action");var z=A.find(".feature-discovery-next");var B=A.find(".feature-discovery-close");if(r.action&&r.action.click){C.click(r.action.click)}u.on("click.chaperone",t(s));z.click(t(n));B.click(v);C.click(t(s));D();if(!o.modal){k.delay(function(){g(document).on("showLayer",v)},100)}},{closeOthers:false,hideDelay:null,noBind:true,gravity:r.gravity||(r.dir||"s").replace(/[nswe]/g,function(y){return{n:"s",s:"n",e:"w",w:"e"}[y]}),offsetX:r.offsetX,offsetY:r.offsetY,persistent:true,width:r.width||300,addActiveClass:false});b.add(w.refresh);c.add(x);w.show()}return{showWhenTargetVisible:function(){return a(r.selector).then(q)},on:function(t,u){switch(t){case"close":l.add(u);break;case"next":n.add(u);break;case"action":s.add(u);break}}}}f.registerFeature=function(n,l,m){m=m||{};var p=j(n).pipe(function(q){q=q||{};if(q.isAllDismissed){return g.Deferred().reject()}return q});function o(t,r,q){var s=r.stepInfoById[t.id||t.selector];switch(m.dismissalMode){case"progressive":s.isDismissed=true;h(n,JSON.stringify(r));break;default:if(q&&!r.isAllDismissed){r.isAllDismissed=true;h(n,JSON.stringify(r))}break}}k.reduce(l,function(r,q){return r.then(function(x){var D=x.stepInfoById=x.stepInfoById||{};var w=q.id||q.selector;var s=D[w]=D[w]||{};if(s.isDismissed){return r}var B=l.length;var v=k.indexOf(l,q);var t=v<B-1;var y=new d(n,q,{numSteps:B,stepIndex:v,hasNext:t},m);var C=g.Deferred();y.on("close",C.reject);y.on("next",k.bind(C.resolve,C,x));y.on("action",k.bind(C.resolve,C,x));var z=y.showWhenTargetVisible();var A=k.bind(o,null,q,x,!t);var u=k.bind(o,null,q,x,"all");if(q.once){z.then(A)}else{y.on("close",u);y.on("next",A);y.on("action",A)}return C})},p)};f.checkFeatureVisibility=function(){c.fire()};f.checkFeatureAlignment=function(){b.fire()}})(AJS,AJS.$,_,Chaperone._internal.syncing,Chaperone);;
;/* module-key = 'com.atlassian.plugins.atlassian-chaperone:feature-discovery', location = '/feature-discovery/feature-discovery.soy' */
// This file was automatically generated from feature-discovery.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace chaperone.featureDiscovery.
 */

if (typeof chaperone == 'undefined') { var chaperone = {}; }
if (typeof chaperone.featureDiscovery == 'undefined') { chaperone.featureDiscovery = {}; }


chaperone.featureDiscovery.content = function(opt_data, opt_ignored) {
  return '' + ((opt_data.step.title) ? '<h2>' + soy.$$escapeHtml(opt_data.step.title) + '</h2>' : '') + ((opt_data.step.content) ? soy.$$filterNoAutoescape(opt_data.step.content) : '') + aui.form.form({action: '', content: '' + ((opt_data.step.action && opt_data.step.action.text) ? aui.buttons.button(soy.$$augmentMap(opt_data.step.action, {extraClasses: aui.renderExtraClasses(opt_data.step.action) + ' feature-discovery-action', extraAttributes: aui.renderExtraAttributes(opt_data.step.action) + ' type="button"'})) : '') + ((opt_data.paging && opt_data.paging.hasNext) ? aui.buttons.button({text: "Next", type: opt_data.step.action && opt_data.step.action.text ? 'link' : null, extraClasses: 'feature-discovery-next', extraAttributes: {type: 'button'}}) : '') + aui.buttons.button({text: "Close", type: opt_data.step.action && opt_data.step.action.text || opt_data.paging && opt_data.paging.hasNext ? 'link' : null, extraClasses: 'feature-discovery-close', extraAttributes: {type: 'button'}}) + ((opt_data.step.moreInfo) ? aui.buttons.button(soy.$$augmentMap(opt_data.step.moreInfo, {text: opt_data.step.moreInfo.text ? opt_data.step.moreInfo.text : "Learn more", type: 'link'})) : '') + ((opt_data.paging && opt_data.paging.numSteps > 1) ? '<span class="multi-step-trigger">' + soy.$$escapeHtml(AJS.format("{0}/{1}",opt_data.paging.stepIndex + 1,opt_data.paging.numSteps)) + '</span>' : '')});
};
if (goog.DEBUG) {
  chaperone.featureDiscovery.content.soyTemplateName = 'chaperone.featureDiscovery.content';
}
;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:chaperone-feature-discovery', location = '/static/lib/chaperone-AMD.js' */
define("chaperone",function(){return Chaperone});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:diff-view-options', location = '/static/feature/file-content/diff-view-options.js' */
define("feature/file-content/diff-view-options",["jquery","lodash","util/client-storage","util/events"],function(k,d,f,g){function a(){}var h=d.once(function(){return f.buildKey(["diff-view","options"],"user")});g.addLocalEventMixin(a.prototype);a.prototype.getOptions=d.memoize(function(){return d.extend({},this.defaults,f.getItem(h()))});a.prototype.defaults={ignoreWhitespace:!1,hideComments:!1,hideEdiff:!1,diffType:"unified"};a.prototype.triggerUpdate=function(e,a){var b={key:e,value:a};this.trigger("change",
b);g.trigger("stash.feature.fileContent.optionsChanged",null,b)};a.prototype.set=function(a,c,b){this.getOptions()[a]=c;f.setItem(h(),this.getOptions());!1!==b&&this.triggerUpdate(a,c)};a.prototype.get=function(a){return this.getOptions()[a]};a.prototype.proxy=function(e){var c=this,b=new a;b.getOptions=function(){return k.extend({},c.getOptions(),e)};b.set=function(a,b,d){void 0===e[a]&&c.set(a,b,d)};b.destroy=g.chainWith(c).on("change",function(a){void 0===e[a.key]&&b.trigger("change",a)}).destroy;
return b};return new a});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:diff-view-options-panel', location = '/static/feature/file-content/diff-view-options-panel/diff-view-options-panel.js' */
define("feature/file-content/diff-view-options-panel","aui chaperone jquery lodash util/events util/function util/shortcuts".split(" "),function(a,l,g,m,h,n,f){l.registerFeature("side-by-side-diff-discovery",[{id:"side-by-side-diff-discovery",selector:"#diff-options-dropdown-trigger",title:"Side-by-side diff",content:a.escapeHtml("Stash has a new way to view diffs. Use this menu to try it."),once:!0}]);return function(a,d){function e(c){"false"===
a.find("#diff-options-dropdown").attr("aria-hidden")&&a.find("#diff-options-dropdown-trigger").trigger("aui-button-invoke")}function k(c){e();d.set(c,!d.get(c))}var b=[];b.push(f.bind("requestIgnoreWhitespace",k.bind(null,"ignoreWhitespace")));b.push(f.bind("requestHideComments",k.bind(null,"hideComments")));b.push(f.bind("requestHideEdiff",k.bind(null,"hideEdiff")));b.push(f.bind("changeDiffTypeRequested",function(){e();d.set("diffType","unified"===d.get("diffType")?"side-by-side":"unified")}));
b.push(h.chainWith(a).on("aui-dropdown2-item-check aui-dropdown2-item-uncheck","#diff-options-core .aui-dropdown2-checkbox, #diff-options-core .aui-dropdown2-radio",function(c){e();var a=g(this),b=a.attr("data-key"),p=a.attr("data-value");c="aui-dropdown2-item-check"===c.type;!c&&a.hasClass("aui-dropdown2-radio")||d.set(b,p||c)}).on("aui-dropdown2-show","#diff-options-dropdown",function(a){g(this).find("#diff-options-core .aui-dropdown2-checkbox, #diff-options-core .aui-dropdown2-radio").each(function(){var a=
g(this),c=a.attr("data-key"),b=a.attr("data-value"),b=(c=d.get(c))&&(c===b||!0===c);a.toggleClass("aui-dropdown2-checked",b).attr("aria-checked",b)});b.push(h.chain().on("window.scroll.throttled",e).destroy)}).on("aui-dropdown2-hide","#diff-options-dropdown",function(a){h.off("window.scroll.throttled",e)}).destroy);return{destroy:m.partial(n.applyAll,b)}}});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:diff-view-options-panel', location = '/static/feature/file-content/diff-view-options-panel/diff-view-options-panel.soy' */
// This file was automatically generated from diff-view-options-panel.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace stash.feature.fileContent.diffViewOptionsPanel.
 */

if (typeof stash == 'undefined') { var stash = {}; }
if (typeof stash.feature == 'undefined') { stash.feature = {}; }
if (typeof stash.feature.fileContent == 'undefined') { stash.feature.fileContent = {}; }
if (typeof stash.feature.fileContent.diffViewOptionsPanel == 'undefined') { stash.feature.fileContent.diffViewOptionsPanel = {}; }


stash.feature.fileContent.diffViewOptionsPanel.main = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  var output = stash.buttons.button({id: 'diff-options-dropdown-trigger', buttonText: '', extraClasses: 'aui-dropdown2-trigger aui-button-subtle aui-dropdown2-trigger-arrowless', extraAttributes: 'data-container=".diff-view-secondary-panel" aria-owns="diff-options-dropdown" aria-haspopup="true"', iconType: 'aui', iconText: "Diff options", iconClass: 'aui-icon-small aui-iconfont-more'}) + '<div id="diff-options-dropdown-container">';
  var param14 = '<div id="diff-options-core">' + aui.dropdown2.section({extraClasses: 'binary-options', extraAttributes: {role: 'presentation'}, content: '<div role="group"><ul class="aui-list-truncate" role="presentation"><li role="presentation">' + aui.dropdown2.menuCheckbox({text: "Ignore whitespace", extraAttributes: {'data-key': 'ignoreWhitespace', title: "Ignore whitespace for all diffs. (Type \x27Shift + w\x27)"}, extraClasses: 'diff-options-ignore-whitespace'}) + '</li>' + ((!!(require('model/page-state').getCurrentUser()) && opt_data.commentMode != 'none') ? '<li role="presentation">' + aui.dropdown2.menuCheckbox({text: "Hide comments", extraAttributes: {'data-key': 'hideComments', title: "Hide comments for all diffs. (Type \x27Shift + c\x27)"}, extraClasses: 'diff-options-hide-comments'}) + '</li>' : '') + '<li role="presentation">' + aui.dropdown2.menuCheckbox({text: "Hide e-diff", extraAttributes: {'data-key': 'hideEdiff', title: "Hide e-diff for all diffs. (Type \x27Shift + e\x27)"}, extraClasses: 'diff-options-hide-ediff'}) + '</li></ul></div>'}) + aui.dropdown2.itemGroup({extraClasses: 'diff-type-options', isTruncated: true, items: [{itemType: 'radio', isChecked: true, text: "Unified diff", extraAttributes: {'data-key': 'diffType', 'data-value': 'unified', title: "Show diffs in one continuous column. (Type \x27Shift + d\x27)"}}, {itemType: 'radio', isDisabled: true, text: "Side-by-side diff", extraAttributes: {'data-key': 'diffType', 'data-value': 'side-by-side', 'data-file-type-compatibility': "Side-by-side diff is not available for added or deleted files", title: "Show diffs split into two columns. (Type \x27Shift + d\x27)"}}]}) + '</div>';
  var param46 = '';
  var webItemsDiffViewOptions__soy47 = WebFragments.getWebItems('stash.file-content.diff-view.options',{displayType: opt_data.displayType, fileChange: opt_data.fileChange});
  if (webItemsDiffViewOptions__soy47.length > 0) {
    param46 += '<ul>';
    var itemList51 = webItemsDiffViewOptions__soy47;
    var itemListLen51 = itemList51.length;
    for (var itemIndex51 = 0; itemIndex51 < itemListLen51; itemIndex51++) {
      var itemData51 = itemList51[itemIndex51];
      param46 += '<li>' + stash.widget.webItemDropdownItem(itemData51) + '</li>';
    }
    param46 += '</ul>';
  }
  param14 += aui.dropdown2.section({id: 'diff-options-pluggable', content: param46});
  output += aui.dropdown2.contents({id: 'diff-options-dropdown', extraClasses: 'aui-style-default diff-options-dropdown', content: param14});
  output += '</div>';
  return output;
};
if (goog.DEBUG) {
  stash.feature.fileContent.diffViewOptionsPanel.main.soyTemplateName = 'stash.feature.fileContent.diffViewOptionsPanel.main';
}
;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:require-amd-context', location = '/static/util/require-amd-context.js' */
define("util/require-amd-context",["jquery"],function(b){return function(c,d){return WRM.require("wrc!"+c).pipe(function(){var a=b.Deferred();require(d,function(){a.resolve.apply(a,arguments)});return a.promise()})}});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:binary-view', location = '/static/feature/file-content/binary-view/binary-view.soy' */
// This file was automatically generated from binary-view.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace stash.feature.fileContent.binaryView.
 */

if (typeof stash == 'undefined') { var stash = {}; }
if (typeof stash.feature == 'undefined') { stash.feature = {}; }
if (typeof stash.feature.fileContent == 'undefined') { stash.feature.fileContent = {}; }
if (typeof stash.feature.fileContent.binaryView == 'undefined') { stash.feature.fileContent.binaryView = {}; }


stash.feature.fileContent.binaryView.container = function(opt_data, opt_ignored) {
  return '<div class="binary-container"></div>';
};
if (goog.DEBUG) {
  stash.feature.fileContent.binaryView.container.soyTemplateName = 'stash.feature.fileContent.binaryView.container';
}


stash.feature.fileContent.binaryView.cell = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<div class="' + soy.$$escapeHtml(opt_data.extraClasses ? opt_data.extraClasses + ' ' : '') + 'binary">' + ((opt_data.titleText) ? '<h5>' + soy.$$escapeHtml(opt_data.titleText) + '</h5>' : '') + ((opt_data.content) ? soy.$$filterNoAutoescape(opt_data.content) : '') + '</div>';
};
if (goog.DEBUG) {
  stash.feature.fileContent.binaryView.cell.soyTemplateName = 'stash.feature.fileContent.binaryView.cell';
}


stash.feature.fileContent.binaryView.unrenderable = function(opt_data, opt_ignored) {
  return '<p><b>' + soy.$$escapeHtml("This file cannot be rendered in your browser.") + '</b><br/><a href="' + soy.$$escapeHtml(opt_data.rawUrl) + '">' + soy.$$escapeHtml("Download this file") + '</a></p>';
};
if (goog.DEBUG) {
  stash.feature.fileContent.binaryView.unrenderable.soyTemplateName = 'stash.feature.fileContent.binaryView.unrenderable';
}
;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:binary-view', location = '/static/feature/file-content/binary-view/binary-view.js' */
define("feature/file-content/binary-view","jquery lodash stash/api/util/navbuilder util/deprecation util/events exports".split(" "),function(g,l,m,e,n,d){function p(a){return{$elem:g(stash.feature.fileContent.binaryView.unrenderable({rawUrl:a})),type:"link"}}function b(a,f){var c=g("\x3cimg /\x3e");c.attr("data-ext",f.extension);c.attr("src",a);return{$elem:c,type:"image"}}function h(a,f){var c=a.extension&&a.extension.toLowerCase(),b;b=m.currentRepo().browse().path(a.components).at(f).raw().build();
return(q[c]||p)(b,a)}function k(a){return a&&0<=l.indexOf(r,a)}var q={png:b,jpg:b,jpeg:b,bmp:b,ico:b,gif:b,svg:b},r=["svg"];d.renderBinaryFile=e.fn(function(a,b,c){c=c.getUntilRevision();var d=h(b,c&&c.getId());a.empty().addClass("binary").append(d.$elem);e.triggerDeprecated("stash.feature.sourceview.onBinary",null,{path:b,type:d.type,revision:c},"stash.feature.fileContent.binaryShown","3.3","4.0");n.trigger("stash.feature.fileContent.binaryShown",null,{containerEl:a.get(0),path:b,type:d.type,commit:c.toJSON()});
return a},null,"3.3","4.0");d.shouldRenderBinary=e.fn(function(a){var b=a.destination&&a.destination.extension;return!(!a||!a.binary&&!k(b))},null,"3.3","4.0");d.getRenderedBinary=h;d.treatTextAsBinary=k});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:content-message', location = '/static/feature/file-content/content-message/content-message.js' */
define("feature/file-content/content-message",["aui","lodash","util/deprecation","util/events","exports"],function(e,g,h,f,d){d.renderConflict=function(c,b){c.append(stash.feature.fileContent.contentMessage.conflict({titleContent:e.escapeHtml(b.getConflict().getConflictMessage()),nodeType:b.getNodeType()}))};d.renderEmptyDiff=function(c,b,a){c.append(stash.feature.fileContent.contentMessage.emptyDiff({fileChangeType:a.getType(),whitespace:b.whitespace}));var d=a.getCommitRange().getSinceRevision();
a=a.getCommitRange().getUntilRevision();f.trigger("stash.feature.fileContent.emptyDiffShown",{containerEl:c.get(0),sourcePath:b.source,sinceRevision:d&&d.toJSON(),destinationPath:b.destination,untilRevision:a&&a.toJSON()})};d.renderEmptyFile=function(c,b,a){c.append(stash.feature.fileContent.contentMessage.emptyFile());a=a.commitRange.untilRevision;h.triggerDeprecated("stash.feature.sourceview.onEmptyFile",{},b,"stash.feature.fileContent.emptyFileShown","3.3","4.0");f.trigger("stash.feature.fileContent.emptyFileShown",
{containerEl:c.get(0),path:b.path,commit:a})};d.renderErrors=function(c,b){var a=b&&b.errors&&b.errors.length?b.errors:[{message:"An unknown error has occurred"}];c.append(g.map(a,stash.feature.fileContent.contentMessage.error).join(""))};d.renderTooLargeDiff=function(c,b,a,d){a=a.getCommitRange();var e=a.getPullRequest();c.append(stash.feature.fileContent.contentMessage.tooLargeDiff({filePath:b.destination?b.destination.toString:b.source.toString,revisionId:!e&&a.getUntilRevision()&&
a.getUntilRevision().getId(),parentRevisionId:!e&&a.getSinceRevision()&&a.getSinceRevision().getId(),sideBySideDiffEnabled:d}))}});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:content-message', location = '/static/feature/file-content/content-message/content-message.soy' */
// This file was automatically generated from content-message.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace stash.feature.fileContent.contentMessage.
 */

if (typeof stash == 'undefined') { var stash = {}; }
if (typeof stash.feature == 'undefined') { stash.feature = {}; }
if (typeof stash.feature.fileContent == 'undefined') { stash.feature.fileContent = {}; }
if (typeof stash.feature.fileContent.contentMessage == 'undefined') { stash.feature.fileContent.contentMessage = {}; }


stash.feature.fileContent.contentMessage.emptyFile = function(opt_data, opt_ignored) {
  return '' + stash.widget.focusMessage.message({extraClasses: 'content-view source-view empty-file', iconClass: 'icon-empty-file', accessibilityText: "Empty file", title: "This file is empty"});
};
if (goog.DEBUG) {
  stash.feature.fileContent.contentMessage.emptyFile.soyTemplateName = 'stash.feature.fileContent.contentMessage.emptyFile';
}


stash.feature.fileContent.contentMessage.error = function(opt_data, opt_ignored) {
  return '<div class="content-message-container">' + aui.message.warning({extraClasses: 'content-message', content: '' + soy.$$escapeHtml(opt_data.message)}) + '</div>';
};
if (goog.DEBUG) {
  stash.feature.fileContent.contentMessage.error.soyTemplateName = 'stash.feature.fileContent.contentMessage.error';
}


stash.feature.fileContent.contentMessage.tooLargeDiff = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<div class="content-message-container">' + aui.message.warning({extraClasses: 'content-message', content: '' + ((opt_data.filePath && opt_data.revisionId) ? soy.$$escapeHtml("The diff for this file is too large to render. You can still retrieve it manually with the following Git command.") + '<p class="scm-command">' + ((opt_data.parentRevisionId) ? 'git diff -C -M ' + soy.$$escapeHtml(opt_data.parentRevisionId) + ' ' + soy.$$escapeHtml(opt_data.revisionId) + ' -- "' + soy.$$escapeHtml(opt_data.filePath) + '"' : 'git log -p ' + soy.$$escapeHtml(opt_data.revisionId) + ' -- "' + soy.$$escapeHtml(opt_data.filePath) + '"') + '</p>' : '<p>' + soy.$$escapeHtml("The diff for this file is too large to render") + '</p>' + ((opt_data.sideBySideDiffEnabled) ? '<p>' + soy.$$escapeHtml("It might be possible to view this diff using unified diff. You can switch to unified diff via the options menu.") + '</p>' : ''))}) + '</div>';
};
if (goog.DEBUG) {
  stash.feature.fileContent.contentMessage.tooLargeDiff.soyTemplateName = 'stash.feature.fileContent.contentMessage.tooLargeDiff';
}


stash.feature.fileContent.contentMessage.emptyDiff = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  var param54 = '';
  switch (opt_data.fileChangeType) {
    case 'ADD':
      param54 += soy.$$escapeHtml("The added file is empty");
      break;
    case 'DELETE':
      param54 += soy.$$escapeHtml("The removed file is empty");
      break;
    default:
      param54 += soy.$$escapeHtml("The contents for this file have not changed");
  }
  var output = '' + stash.widget.focusMessage.message({extraClasses: 'content-view diff-view empty-file', iconClass: 'icon-empty-file', accessibilityText: "No diff", title: param54, content: '' + ((opt_data.whitespace == 'IGNORE_ALL' && opt_data.fileChangeType == 'MODIFY') ? soy.$$escapeHtml("Or at least there are no visible changes. You may see more by disabling \x27Ignore whitespace\x27") : '')});
  return output;
};
if (goog.DEBUG) {
  stash.feature.fileContent.contentMessage.emptyDiff.soyTemplateName = 'stash.feature.fileContent.contentMessage.emptyDiff';
}


stash.feature.fileContent.contentMessage.conflict = function(opt_data, opt_ignored) {
  var output = '<div class="diff-conflict-message-container">';
  var param70 = '';
  if (opt_data.messageContent) {
    param70 += soy.$$filterNoAutoescape(opt_data.messageContent);
  } else {
    switch (opt_data.nodeType) {
      case 'SUBMODULE':
        param70 += soy.$$escapeHtml("This submodule is in a conflicted state. You will need to resolve the conflict manually before you can merge this pull request.");
        break;
      default:
        param70 += soy.$$escapeHtml("This file is in a conflicted state. You will need to resolve the conflict manually before you can merge this pull request.");
    }
  }
  output += aui.message.warning({titleContent: opt_data.titleContent, content: param70});
  output += '</div>';
  return output;
};
if (goog.DEBUG) {
  stash.feature.fileContent.contentMessage.conflict.soyTemplateName = 'stash.feature.fileContent.contentMessage.conflict';
}
;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:request-diff', location = '/static/feature/file-content/request-diff.js' */
define("feature/file-content/request-diff","jquery lodash stash/api/util/navbuilder util/ajax model/path feature/file-content/diff-view-options".split(" "),function(f,m,n,k,l,p){function q(b,a){f.isArray(a.diffs)&&a.diffs.length&&(a=m.find(a.diffs,function(a){return a.destination?a.destination.toString===(new l(b.path)).toString():b.srcPath?a.source.toString===(new l(b.srcPath)).toString():!1})||a.diffs[0]);return a}function r(b){var a=n.rest().project(b.repository.project.key).repo(b.repository.slug),
c=b.commitRange.pullRequest;return(c?a.pullRequest(c.id):a.changeset(b.commitRange)).diff(b)}var e={};return function(b,a){var c=b.toJSON?b.toJSON():b;if(c.diff)return f.Deferred().resolve(f.extend({lineComments:a.lineComments||[],fileComments:a.fileComments||[]},c.diff));a=a||{};var g=a.hasOwnProperty("ignoreWhitespace")?a.ignoreWhitespace:p.get("ignoreWhitespace"),h=isNaN(Number(a.contextLines))?-1:Math.floor(a.contextLines),d=(a.diffUrlBuilder||r)(c).withParams({avatarSize:stash.widget.avatarSizeInPx({size:a.avatarSize||
"medium"}),markup:!0,whitespace:g?"ignore-all":"",contextLines:h,withComments:a.withComments}).build();if(e.hasOwnProperty(d)&&"rejected"!==e[d].state())return e[d];g=k.rest({url:d,statusCode:a.statusCode||k.ignore404WithinRepository()});h=g.then(function(a){if(a.errors&&a.errors.length)return f.Deferred().rejectWith(this,[this,null,null,a]);a=q(c,a);setTimeout(function(){delete e[d]});return a});e[d]=h.promise(g);return e[d]}});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:revision', location = '/static/model/revision.js' */
define("model/revision",["backbone-brace","model/repository","model/revision-reference"],function(b,a,c){a=b.Model.extend({namedAttributes:{id:null,displayId:null,repository:a,message:null,author:null,authorTimestamp:null,parents:null,attributes:null,properties:null},hasParents:function(){return this.getParents()&&this.getParents().length},getRevisionReference:function(){return new c({id:this.getId(),displayId:this.getDisplayId(),type:c.type.COMMIT,repository:this.getRepository(),latestChangeset:this.getId()})}});
b.Mixins.applyMixin(a,{namedAttributes:{parents:[a]}});return a});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:participant-model', location = '/static/model/participant.js' */
define("model/participant",["backbone-brace","model/stash-user"],function(a,b){return a.Model.extend({namedAttributes:{approved:"boolean",role:"string",user:b}})});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:participant-model', location = '/static/model/participant-collection.js' */
define("model/participant-collection",["backbone-brace","lodash","model/participant"],function(c,d,e){return c.Collection.extend({model:e,comparator:function(a,b){return a.getApproved()===b.getApproved()?a.getUser().getDisplayName().localeCompare(b.getUser().getDisplayName()):a.getApproved()?-1:1},findByUser:function(a){return d.find(this.models,function(b){return b.getUser().getName()===a.getName()})}})});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:pull-request-model', location = '/static/model/pull-request.js' */
define("model/pull-request",["backbone-brace","model/participant","model/participant-collection","model/revision-reference"],function(c,d,a,b){return c.Model.extend({namedAttributes:{id:null,link:null,links:Object,fromRef:b,toRef:b,author:d,reviewers:a,participants:a,state:null,open:"boolean",closed:"boolean",locked:"boolean",title:null,createdDate:Date,updatedDate:Date,version:null,description:null,descriptionAsHtml:null,attributes:null,properties:null},addParticipant:function(a){this.getParticipants().findByUser(a.getUser())||
this.getParticipants().add(a)}},{state:{OPEN:"OPEN",MERGED:"MERGED",DECLINED:"DECLINED"}})});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:commit-range', location = '/static/model/commit-range.js' */
define("model/commit-range",["backbone-brace","model/pull-request","model/revision"],function(c,d,b){return c.Model.extend({namedAttributes:{pullRequest:d,untilRevision:b,sinceRevision:b},initialize:function(){if(!this.getUntilRevision())if(this.getPullRequest()){var a=this.getPullRequest().getFromRef();this.setUntilRevision(a&&new b({id:a.getLatestChangeset()}));a=this.getPullRequest().getToRef();this.setSinceRevision(a&&new b({id:a.getLatestChangeset()}))}else throw Error("Commits range requires either a pull request or revision(s)");
this.getSinceRevision()&&"ROOT"===this.getSinceRevision().getId()&&this.setSinceRevision(void 0);this.setId(this.getPullRequest()?this.getPullRequest().getId():this.getUntilRevision().getId()+"_"+(this.getSinceRevision()?this.getSinceRevision().getId():"ROOT"))}})});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:conflict-change-model', location = '/static/model/conflict-change.js' */
define("model/conflict-change",["backbone-brace","util/deprecation","model/file-change-types","model/path"],function(f,c,b,d){var a=f.Model.extend({namedAttributes:{srcPath:d,path:d,type:null},initialize:function(){this.setType(a._mapChangeType(this.getType(),this.getSrcPath(),this.getPath()))}},{_mapChangeType:function(a,e,c){return a===b.MOVE&&e&&e.isSameDirectory(c)?b.RENAME:b.changeTypeFromId(a)}});(function(b){a.prototype.toJSON=function(){var a=b.apply(this,arguments);this.getPath()&&(a.path=
c.jsonAsBrace(this.getPath(),"3.2","4.0"));this.getSrcPath()&&(a.srcPath=c.jsonAsBrace(this.getSrcPath(),"3.2","4.0"));return a}})(a.prototype.toJSON);return a});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:conflict-model', location = '/static/model/conflict.js' */
define("model/conflict",["aui","backbone-brace","model/conflict-change","model/file-change-types"],function(c,e,d,a){var b={};b[a.ADD]={};b[a.ADD][a.ADD]="Conflict: Added file to Source, Added same file to Target";b[a.ADD][a.RENAME]="Conflict: Added file to Source, Renamed to same on Target";b[a.ADD][a.MOVE]="Conflict: Added file to Source, Moved to same on Target";b[a.MODIFY]={};b[a.MODIFY][a.MODIFY]="Conflict: Modified on Source, Modified on Target";
b[a.MODIFY][a.RENAME]="Conflict: Modified on Source, Renamed on Target";b[a.MODIFY][a.MOVE]="Conflict: Modified on Source, Moved on Target";b[a.MODIFY][a.DELETE]="Conflict: Modified on Source, Deleted on Target";b[a.RENAME]={};b[a.RENAME][a.ADD]="Conflict: Renamed on Source, Added same to Target";b[a.RENAME][a.RENAME]="Conflict: Renamed on Source, Renamed on Target";b[a.RENAME][a.MOVE]=
"Conflict: Renamed on Source, Moved on Target";b[a.RENAME][a.DELETE]="Conflict: Renamed on Source, Deleted on Target";b[a.MOVE]={};b[a.MOVE][a.ADD]="Conflict: Moved on Source, Added same to Target";b[a.MOVE][a.RENAME]="Conflict: Moved on Source, Renamed on Target";b[a.MOVE][a.MOVE]="Conflict: Moved on Source, Moved on Target";b[a.MOVE][a.DELETE]="Conflict: Moved on Source, Deleted on Target";
b[a.DELETE]={};b[a.DELETE][a.MODIFY]="Conflict: Deleted on Source, Modified on Target";b[a.DELETE][a.RENAME]="Conflict: Deleted on Source, Renamed on Target";b[a.DELETE][a.MOVE]="Conflict: Deleted on Source, Moved on Target";return e.Model.extend({namedAttributes:{ourChange:d,theirChange:d},getConflictMessage:function(){var a=this.getOurChange()&&this.getOurChange().getType(),c=this.getTheirChange()&&this.getTheirChange().getType();
return b[c]&&b[c][a]||""}})});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:file-change', location = '/static/model/file-change.js' */
define("model/file-change","backbone-brace util/deprecation model/commit-range model/conflict model/file-change-types model/path model/repository".split(" "),function(h,g,k,l,e,f,m){var a=h.Model.extend({namedAttributes:{repository:m,commitRange:k,srcPath:f,path:f,line:null,search:null,type:null,nodeType:null,conflict:l,diff:null,srcExecutable:null,executable:null},initialize:function(){this.getPath()&&this.setPath(new f(this.getPath()));this.getSrcPath()&&this.setSrcPath(new f(this.getSrcPath()));
this.setType(a._mapChangeType(this.getType(),this.getSrcPath(),this.getPath()))}},{fromDiff:function(b,c,d){return new a({repository:d,commitRange:c,srcPath:b.source,path:b.destination,diff:b,type:e.guessChangeTypeFromDiff(b)})},_mapChangeType:function(b,c,d){return b===e.MOVE&&c&&c.isSameDirectory(d)?e.RENAME:e.changeTypeFromId(b)}});(function(b){a.prototype.toJSON=function(){var c=this.getPath(),d=this.getSrcPath();this.setPath(null);this.setSrcPath(null);var a=b.apply(this,arguments);c&&(a.path=
g.jsonAsBrace(c,"3.2","4.0"));d&&(a.srcPath=g.jsonAsBrace(d,"3.2","4.0"));this.setPath(c);this.setSrcPath(d);return a}})(a.prototype.toJSON);return a});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:object-util', location = '/static/util/object.js' */
define("util/object",["lodash","exports"],function(k,b){function e(c){return c}function l(c){return"object"===typeof c?JSON.stringify(c):String(c)}var h=Object.prototype.hasOwnProperty;b.uniqueFromArray=function(c,f,a){var g,d,b=f.length,h=a?l:e;return k.uniq(c,function(a){g=0;for(d="";g<b;g++)d+=h(a[f[g]]);return d})};b.freeze=Object.freeze||e;b.deepFreeze=Object.freeze?function f(a,b){if(null!==a&&"object"===typeof a){var d=Object.isFrozen(a);d||Object.freeze(a);if(!d||b)for(var e in a)h.call(a,
e)&&f(a[e])}return a}:e;b.inherits=function(b,a){b.prototype=Object.create(a.prototype);Object.defineProperty(b.prototype,"constructor",{value:b,configurable:!0})}});;
;/* module-key = 'com.atlassian.stash.stash-web-api:file-handlers', location = '/static/util/handler-registry.js' */
define("util/handler-registry",["jquery","lodash"],function(g,d){function b(){this.handlers=[]}b.prototype.register=function(a){if(!d.isFunction(a.handle))throw Error("Handler must have a handle function");a.weight="number"!==typeof a.weight||isNaN(a.weight)?1E3:a.weight;this.handlers.push(a);this.handlers=d.sortBy(this.handlers,function(a){return a.weight});var e=this;return function(){var c=e.handlers.indexOf(a);0<=c&&e.handlers.splice(c,1)}};b.prototype._handle=function(a){function e(h){if(b)return c.reject(Error("Handling aborted."));
if(h<d.length)return f=d[h].handle(a)||g.Deferred().reject(),g.when(f).done(function(a){c.resolve(a||{},k)}).fail(function(a){a&&k.push(a);e(h+1)});c.reject(Error("No registered handlers were able to handle file"))}var c=g.Deferred(),b,f,d=this.handlers,k=[];e(0);return c.promise({abort:function(){!b&&f&&f.abort&&f.abort();b=!0}})};b.prototype._clear=function(){this.handlers=[]};return b});;
;/* module-key = 'com.atlassian.stash.stash-web-api:file-handlers', location = '/static/stash/api/feature/files/file-handlers.js' */
define("stash/api/feature/files/file-handlers",["util/handler-registry","util/object"],function(b,c){var a=new b;a.builtInHandlers={ERROR:"error",SOURCE_TEXT:"source-text",SOURCE_EMPTY:"source-empty",SOURCE_IMAGE:"source-image",SOURCE_BINARY:"source-binary",DIFF_TEXT_SIDE_BY_SIDE:"diff-text-side-by-side",DIFF_TEXT_UNIFIED:"diff-text-unified",DIFF_EMPTY:"diff-empty",DIFF_TOO_LARGE:"diff-too-large",DIFF_IMAGE:"diff-image",DIFF_BINARY:"diff-binary"};c.freeze(a.builtInHandlers);return a});;
;/* module-key = 'com.atlassian.stash.stash-bower-components-plugin:bitbucket-widget', location = '/static/bower/bitbucket-widget/dist/bitbucket-widget.js' */
(function(e){"function"===typeof define&&define.amd?define(["exports","module","lodash"],e):"function"!==typeof define||define.amd?"undefined"!==typeof exports&&e(exports,module):define("bitbucket/internal/widget",["exports","module","lodash"],e)})(function(e,k){function g(c,a){var d=Object.getOwnPropertyNames(c).filter(function(a){return-1===l.indexOf(a)&&f.isFunction(c[a])}),b=Object.getPrototypeOf(c);return b.isPrototypeOf(a)?d:f.uniq(d.concat(g(b,a)))}var m=function(){function c(a,d){for(var b in d){var c=
d[b];c.configurable=!0;c.value&&(c.writable=!0)}Object.defineProperties(a,d)}return function(a,d,b){d&&c(a.prototype,d);b&&c(a,b);return a}}(),f=require("lodash"),h=function(){function c(a){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");f.bindAll(this,g(this,c));a&&(this.options=f.extend({},this.constructor.defaults,a))}m(c,{options:{get:function(){return this._options},set:function(a){this._options=a}},_getListeners:{value:function(a){this._listeners||(this._listeners=
{});this._listeners[a]||(this._listeners[a]=[]);return this._listeners[a]}},on:{value:function(a,d){var b=this._getListeners(a);f.contains(b,d)||b.push(d);return this}},off:{value:function(a,d){for(var b=this._getListeners(a),c=b.length;c--;)b[c]!==d&&b[c]._handler!==d||b.splice(c,1);return this}},once:{value:function(a,d){var b=this.off.bind(this,a,d);b._handler=d;this.on(a,d);this.on(a,b);return this}},trigger:{value:function(a){for(var d=this,b=arguments.length,c=Array(1<b?b-1:0),e=1;e<b;e++)c[e-
1]=arguments[e];this._getListeners(a).slice().forEach(function(a){try{a.apply(d,c)}catch(b){f.defer(function(){throw b;})}});return this}},_addDestroyable:{value:function(a){this._destroyables||(this._destroyables=[]);f.isFunction(a)&&(a={destroy:a});if(!f.isFunction(a.destroy))throw Error("Argument is not destroyable");this._destroyables.push(a);return this}},destroy:{value:function(){this._destroyables&&(f.invoke(this._destroyables,"destroy"),this._destroyables=null);this.trigger("destroy");this._listeners&&
(this._listeners=null)}}});return c}();Object.defineProperty(h.prototype,"__nonEnumerable",{enumerable:!0,get:function(){throw Error("BitbucketWidget is not enumerable. Inherit using Object.create().");}});var l=["constructor","__nonEnumerable"];k.exports=h});;
;/* module-key = 'com.atlassian.stash.stash-bower-components-plugin:resemblejs', location = '/static/bower/resemblejs/resemble.js' */
(function(v){function p(k,b){return(Math.abs(k.r-b.r)+Math.abs(k.g-b.g)+Math.abs(k.b-b.b))/3}var A=1,c={red:255,green:0,blue:255,alpha:255},w={flat:function(k,b){return{r:c.red,g:c.green,b:c.blue,a:c.alpha}},movement:function(k,b){return{r:(c.red/255*b.r+c.red)/2,g:(c.green/255*b.g+c.green)/2,b:(c.blue/255*b.b+c.blue)/2,a:b.a}},flatDifferenceIntensity:function(k,b){return{r:c.red,g:c.green,b:c.blue,a:p(k,b)}},movementDifferenceIntensity:function(k,b){var t=p(k,b)/255*.8;return{r:c.red/255*(1-t)*b.r+
t*c.red,g:c.green/255*(1-t)*b.g+t*c.green,b:c.blue/255*(1-t)*b.b+t*c.blue,a:b.a}}},I=w.flat,B=1200,N=/^https?:\/\//,O=new RegExp("^https?://"+document.domain);v.resemble=function(k){function b(){var a=x.length,d;for(d=0;d<a;d++)if("function"===typeof x[d])x[d](l)}function c(a,d,e){var f,m;for(f=0;f<a;f++)for(m=0;m<d;m++)e(f,m)}function w(a,d,e){var f=0,m=0,k=0,E=0,g=0;c(e,d,function(e,b){var c=4*(e*d+b),h=a[c],C=a[c+1],c=a[c+2];f++;m+=h/255*100;k+=C/255*100;E+=c/255*100;g+=(.3*h+.59*C+.11*c)/255*
100});l.red=Math.floor(m/f);l.green=Math.floor(k/f);l.blue=Math.floor(E/f);l.brightness=Math.floor(g/f);b()}function F(a,d){var e,f=new Image;N.test(a)&&!O.test(a)&&f.setAttribute("crossorigin","anonymous");f.onload=function(){var a=document.createElement("canvas"),e=f.width,c=f.height;a.width=e;a.height=c;a.getContext("2d").drawImage(f,0,0,e,c);a=a.getContext("2d").getImageData(0,0,e,c);g.push(a);d(a,e,c)};if("string"===typeof a){if(f.src=a,f.complete)f.onload()}else"undefined"!==typeof a.data&&
"number"===typeof a.width&&"number"===typeof a.height?(g.push(a),d(a,a.width,a.height)):(e=new FileReader,e.onload=function(a){f.src=a.target.result},e.readAsDataURL(a))}function u(a,d,e){var f=Math.abs(a-d);return"undefined"===typeof a||"undefined"===typeof d?!1:a===d?!0:f<h[e]?!0:!1}function v(a,d){var e=u(a.a,d.a,"alpha");return u(a.brightness,d.brightness,"minBrightness")&&e}function p(a,d,e){a/=255;d/=255;e/=255;var f=Math.max(a,d,e),m=Math.min(a,d,e),c;if(f==m)c=0;else{m=f-m;switch(f){case a:c=
(d-e)/m+(d<e?6:0);break;case d:c=(e-a)/m+2;break;case e:c=(a-d)/m+4}c/=6}return c}function J(a,d,e,f,c,k){var b,g,l,n=0,q=0,r=0;a.h=p(a.r,a.g,a.b);for(g=-1;1>=g;g++)for(l=-1;1>=l;l++)if(0!==g||0!==l)if(b=4*((f+l)*k+(c+g)),b=G(d,b,e),null!==b){y(b);b.h=p(b.r,b.g,b.b);Math.abs(a.brightness-b.brightness)>h.maxBrightness&&n++;var C=a.g===b.g,P=a.b===b.b;a.r===b.r&&C&&P&&r++;.3<Math.abs(b.h-a.h)&&q++;if(1<q||1<n)return!0}return 2>r?!0:!1}function H(a,d,e,f){e=I(e,f);a[d]=e.r;a[d+1]=e.g;a[d+2]=e.b;a[d+
3]=e.a}function K(a,d,e){a[d]=e.brightness;a[d+1]=e.brightness;a[d+2]=e.brightness;a[d+3]=e.a*A}function G(a,d,e){var f,c;e=a[d];return"undefined"!==typeof e?(f=a[d+1],c=a[d+2],a=a[d+3],a={r:e,g:f,b:c,a:a}):null}function y(a){a.brightness=.3*a.r+.59*a.g+.11*a.b}function Q(a,d,e,f){var b=document.createElement("canvas"),g=a.data,k=d.data;b.width=e;b.height=f;var h=b.getContext("2d"),p=h.createImageData(e,f),n=p.data,q=0;a=Date.now();var r;B&&z&&(e>B||f>B)&&(r=6);c(f,e,function(a,f){if(!r||0!==a%r&&
0!==f%r){var d=4*(a*e+f),b=G(g,d,1),c=G(k,d,2);if(null!==b&&null!==c)if(D)y(b),y(c),v(b,c)?K(n,d,c):(H(n,d,b,c),q++);else{var h=u(b.r,c.r,"red"),m=u(b.g,c.g,"green"),l=u(b.b,c.b,"blue"),p=u(b.a,c.a,"alpha");h&&m&&l&&p?(n[d]=b.r,n[d+1]=b.g,n[d+2]=b.b,n[d+3]=b.a*A):z&&(y(b),y(c),J(b,g,1,a,f,e)||J(c,k,2,a,f,e))?v(b,c)?K(n,d,c):(H(n,d,b,c),q++):(H(n,d,b,c),q++)}}});l.misMatchPercentage=(q/(f*e)*100).toFixed(2);l.analysisTime=Date.now()-a;l.getImageDataUrl=function(a){var d=0;a&&(h.font="12px sans-serif",
d=h.measureText(a).width+4,d>b.width&&(b.width=d),b.height+=22,h.fillStyle="#666",h.fillRect(0,0,b.width,18),h.fillStyle="#fff",h.fillRect(0,18,b.width,4),h.fillStyle="#fff",h.textBaseline="top",h.font="12px sans-serif",h.fillText(a,2,1),d=22);h.putImageData(p,0,d);return b.toDataURL("image/png")}}function L(a,d,b){var c;return a.height<b||a.width<d?(c=document.createElement("canvas"),c.width=d,c.height=b,c=c.getContext("2d"),c.putImageData(a,0,0),c.getImageData(0,0,d,b)):a}function R(a,d){function c(){var a,
d;2===g.length&&(a=g[0].width>g[1].width?g[0].width:g[1].width,d=g[0].height>g[1].height?g[0].height:g[1].height,l.isSameDimensions=g[0].width===g[1].width&&g[0].height===g[1].height?!0:!1,l.dimensionDifference={width:g[0].width-g[1].width,height:g[0].height-g[1].height},Q(L(g[0],a,d),L(g[1],a,d),a,d),b())}g=[];F(a,c);F(d,c)}function M(a){var d,b="function"===typeof a;b||(d=a);var c={ignoreNothing:function(){h.red=16;h.green=16;h.blue=16;h.alpha=16;h.minBrightness=16;h.maxBrightness=240;D=z=!1;b&&
a();return c},ignoreAntialiasing:function(){h.red=32;h.green=32;h.blue=32;h.alpha=32;h.minBrightness=64;h.maxBrightness=96;z=!0;D=!1;b&&a();return c},ignoreColors:function(){h.alpha=16;h.minBrightness=16;h.maxBrightness=240;z=!1;D=!0;b&&a();return c},repaint:function(){b&&a();return c},onComplete:function(a){x.push(a);a=function(){R(k,d)};a();return M(a)}};return c}var l={},g=[],x=[],h={red:16,green:16,blue:16,alpha:16,minBrightness:16,maxBrightness:240},z=!1,D=!1;return{onComplete:function(a){x.push(a);
F(k,function(a,b,c){w(a.data,b,c)})},compareTo:function(a){return M(a)}}};v.resemble.outputSettings=function(k){var b;if(k.errorColor)for(b in k.errorColor)c[b]=void 0===k.errorColor[b]?c[b]:k.errorColor[b];k.errorType&&w[k.errorType]&&(I=w[k.errorType]);A=isNaN(Number(k.transparency))?A:k.transparency;void 0!==k.largeImageThreshold&&(B=k.largeImageThreshold);return this}})(this);;
;/* module-key = 'com.atlassian.stash.stash-bower-components-plugin:resemblejs', location = '/static/lib/resemblejs/resemble-AMD.js' */
define("resemble",function(){return resemble});;
;/* module-key = 'com.atlassian.stash.stash-bower-components-plugin:bitbucket-image-differ', location = '/static/bower/bitbucket-image-differ/dist/image-differ.js' */
if("undefined"==typeof bitbucket)var bitbucket={};"undefined"==typeof bitbucket.component&&(bitbucket.component={});"undefined"==typeof bitbucket.component.imageDiffer&&(bitbucket.component.imageDiffer={});"undefined"==typeof bitbucket.component.imageDiffer.toolbar&&(bitbucket.component.imageDiffer.toolbar={});
bitbucket.component.imageDiffer.toolbar.main=function(e,g){return""+aui.toolbar2.toolbar2({content:""+aui.toolbar2.item({item:"primary",extraClasses:"image-differ-toggle",content:""+bitbucket.component.imageDiffer.toolbar.toggleButtons(null)}),extraClasses:"image-differ-toolbar"})};goog.DEBUG&&(bitbucket.component.imageDiffer.toolbar.main.soyTemplateName="bitbucket.component.imageDiffer.toolbar.main");
bitbucket.component.imageDiffer.toolbar.toggleButtons=function(e,g){return""+aui.buttons.buttons({content:""+aui.buttons.button({extraClasses:"image-differ-two-up",isPressed:!0,text:"Two-up",extraAttributes:{title:"Compare images alongside each other"}})+aui.buttons.button({extraClasses:"image-differ-blend",isDisabled:!0,text:"Blend",extraAttributes:{title:"Blend mode image diff is not available because images are not of the same dimension",
"data-enabled-title":"Compare the image changes by fading in the differences"}})+aui.buttons.button({extraClasses:"image-differ-split",isDisabled:!0,text:"Split",extraAttributes:{title:"Split mode image diff is not available because images are not of the same dimension","data-enabled-title":"Compare the image changes by moving your mouse cursor left or right over the image"}})+aui.buttons.button({extraClasses:"image-differ-pixeldiff",isDisabled:!0,text:"Pixel diff",
extraAttributes:{title:"Pixel diff mode image diff is not available because images are not of the same dimension","data-enabled-title":"Compare the image changes by seeing which pixels have changed"}})})};goog.DEBUG&&(bitbucket.component.imageDiffer.toolbar.toggleButtons.soyTemplateName="bitbucket.component.imageDiffer.toolbar.toggleButtons");"undefined"==typeof bitbucket&&(bitbucket={});"undefined"==typeof bitbucket.component&&(bitbucket.component={});
"undefined"==typeof bitbucket.component.imageDiffer&&(bitbucket.component.imageDiffer={});bitbucket.component.imageDiffer.imageContainer=function(e,g){return'\x3cdiv class\x3d"image-container" /\x3e'};goog.DEBUG&&(bitbucket.component.imageDiffer.imageContainer.soyTemplateName="bitbucket.component.imageDiffer.imageContainer");bitbucket.component.imageDiffer.splitContainer=function(e,g){return'\x3cdiv class\x3d"split-container" /\x3e'};
goog.DEBUG&&(bitbucket.component.imageDiffer.splitContainer.soyTemplateName="bitbucket.component.imageDiffer.splitContainer");bitbucket.component.imageDiffer.pixelDiffContainer=function(e,g){return'\x3cdiv class\x3d"pixeldiff-container" /\x3e'};goog.DEBUG&&(bitbucket.component.imageDiffer.pixelDiffContainer.soyTemplateName="bitbucket.component.imageDiffer.pixelDiffContainer");
bitbucket.component.imageDiffer.pixelDiffImage=function(e,g){return'\x3cdiv class\x3d"pixeldiff binary"\x3e\x3cimg src\x3d"'+soy.$$escapeHtml(e.imageSrc)+'" /\x3e\x3c/div\x3e'};goog.DEBUG&&(bitbucket.component.imageDiffer.pixelDiffImage.soyTemplateName="bitbucket.component.imageDiffer.pixelDiffImage");bitbucket.component.imageDiffer.opacitySlider=function(e,g){return'\x3cdiv class\x3d"opacity-slider-container"\x3e\x3cinput type\x3d"range" min\x3d"0" max\x3d"1" step\x3d"0.01" value\x3d"1" /\x3e\x3c/div\x3e'};
goog.DEBUG&&(bitbucket.component.imageDiffer.opacitySlider.soyTemplateName="bitbucket.component.imageDiffer.opacitySlider");bitbucket.component.imageDiffer.spinner=function(e,g){return'\x3cdiv class\x3d"spinner" /\x3e'};goog.DEBUG&&(bitbucket.component.imageDiffer.spinner.soyTemplateName="bitbucket.component.imageDiffer.spinner");
(function(e){"function"===typeof define&&define.amd?define("exports module jquery bitbucket/internal/widget lodash resemble".split(" "),e):"function"!==typeof define||define.amd?"undefined"!==typeof exports&&e(exports,module):define("bitbucket/internal/image-differ","exports module jquery bitbucket/internal/widget lodash resemble".split(" "),e)})(function(e,g){function l(k){var c=d(k);if(c.data("natural-size"))return d.Deferred().resolve(c.data("natural-size"));if(k.naturalWidth)return k={width:k.naturalWidth,
height:k.naturalHeight},c.data("natural-size",k),d.Deferred().resolve(k);var b=new Image,a=d.Deferred();k=n.once(function(){var h={width:b.width,height:b.height};c.data("natural-size",h);a.resolve(h)});b.onload=k;b.src=c.attr("src");b.complete&&k();return a}function m(d,c){var b=d.data("margin_border_padding");null==b&&(b=d.outerWidth(!0)-d.width(),d.data("margin_border_padding",b));return c-b}function u(d){var c=document.createElement("canvas"),b=c.getContext("2d");return l(d).then(function(a){c.height=
a.height;c.width=a.width;b.drawImage(d[0],0,0);return b.getImageData(0,0,c.width,c.height)})}var v=function c(b,a,h){var d=Object.getOwnPropertyDescriptor(b,a);if(void 0===d)return b=Object.getPrototypeOf(b),null===b?void 0:c(b,a,h);if("value"in d&&d.writable)return d.value;a=d.get;return void 0===a?void 0:a.call(h)},w=function(c,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);c.prototype=Object.create(b&&b.prototype,{constructor:{value:c,
enumerable:!1,writable:!0,configurable:!0}});b&&(c.__proto__=b)},r=function(){function c(b,a){for(var h in a){var c=a[h];c.configurable=!0;c.value&&(c.writable=!0)}Object.defineProperties(b,a)}return function(b,a,h){a&&c(b.prototype,a);h&&c(b,h);return b}}(),t=function(c,b){if(!(c instanceof b))throw new TypeError("Cannot call a class as a function");},d=require("jquery"),x=require("bitbucket/internal/widget"),n=require("lodash"),y=require("resemble"),f={TWO_UP:"two-up",BLEND:"blend",SPLIT:"split",
PIXEL_DIFF:"pixeldiff"},p=function(){function c(b,a){t(this,c);b&&(this.setup=b);a&&(this.destroy=a)}r(c,{setup:{value:function(){}},destroy:{value:function(){}}});return c}(),z=function(c){function b(a){t(this,b);v(Object.getPrototypeOf(b.prototype),"constructor",this).call(this);this._$container=d(a)}w(b,c);r(b,{init:{value:function(){var a=this,b=this._$imgs=this._$container.find("img");this._$sinceImg=b.eq(0);this._$untilImg=b.eq(1);this._$untilRevision=this._$untilImg.parent();this._$sinceRevision=
this._$sinceImg.parent();this._$revisions=this._$untilRevision.add(this._$sinceRevision);this._$untilRevisionLabel=this._$untilRevision.find("h5");this._$sinceRevisionLabel=this._$sinceRevision.find("h5");this._setupDiffModes();this.setMode(f.TWO_UP);var c=d.Deferred(),e=[f.TWO_UP],B=n.chain(f).values().difference(e).value();d.when(l(this._$sinceImg),l(this._$untilImg)).done(function(b,h){a.enabledModes=b.width===h.width&&b.height===h.height&&0<b.width?e.concat(B):e;c.resolve(a.enabledModes)}).fail(function(){c.reject()});
return c}},destroy:{value:function(){this.modes&&this._mode&&this.modes[this._mode].destroy();this._mode=null}},setMode:{value:function(a){this._mode!==a&&(this._onDiffModeChanged(a,this._mode),this._mode=a)}},_onDiffModeChanged:{value:function(a,b){this._$container.removeClass(n.values(f).join(" ")).addClass(a);b&&this.modes[b].destroy();a&&this.modes[a].setup();this.trigger("modeChanged",{newMode:a,oldMode:b})}},_setupDiffModes:{value:function(){var a=this;this.modes={};this.modes[f.TWO_UP]=new p;
this.modes[f.BLEND]=new p(function(){var b=d(bitbucket.component.imageDiffer.opacitySlider());a._$container.children(".since-revision").before(b);b.on("input change",'input[type\x3d"range"]',function(b){a._$untilImg.css("opacity",parseFloat(d(b.target).val()))})},function(){var b=a._$container.children(".opacity-slider-container");b.off("input change");b.remove();a._$untilImg.css("opacity","")});this.modes[f.SPLIT]=new p(function(){l(a._$imgs).done(function(b){a._$untilImg.wrap(bitbucket.component.imageDiffer.imageContainer());
a._$revisions.wrapAll(bitbucket.component.imageDiffer.splitContainer());a._$untilRevisionImageContainer=a._$untilImg.parent();a._$splitContainer=a._$container.find(".split-container");var c=void 0,e=function(){var d=a._$untilRevisionImageContainer,e=a._$splitContainer,q=m(a._$container,a._$container.parent().width()),e=m(e,q),e=m(a._$sinceRevision,e),q=m(a._$sinceImg,e),f=Math.min(b.width,q);a._$imgs.width(f);a._$imgs.height(Math.floor(f/b.width*b.height));d.height(a._$imgs.outerHeight(!0));d=f+(e-
q);a._$revisions.width(d);a._$untilRevision.css("margin-left",-d);c=a._$sinceImg.outerWidth(!0)};a._onResize=n.debounce(e,200);d(window).on("resize",a._onResize);e();50>b.width?(a._$untilRevisionLabel.css("margin-left","-50px"),a._$sinceRevisionLabel.css("margin-right","-50px")):100>b.width&&(a._$untilRevisionLabel.css("margin-left",-b.width),a._$sinceRevisionLabel.css("margin-right",-b.width));var f=function(b){a._$untilRevisionImageContainer.css("width",Math.min(b.pageX-b.data.offset.left,c))};
a._$splitContainer.hover(function(){a._$revisions.on("mousemove",{offset:a._$untilRevision.offset()},f)},function(){a._$revisions.off("mousemove",f)})})},function(){a._$imgs.css({width:"",height:""});a._$revisions.css("width","");a._$untilRevision.css("margin-left","");a._$untilRevisionLabel.add(a._$sinceRevisionLabel).css({marginLeft:"",marginRight:""});a._$untilImg.unwrap();a._$untilRevisionImageContainer.remove();delete a._$untilRevisionImageContainer;a._$revisions.unwrap();a._$splitContainer.remove();
delete a._$splitContainer;a._onResize&&(d(window).off("resize",a._onResize),delete a._onResize)});this.modes[f.PIXEL_DIFF]=new p(function(){a._$revisions.wrapAll(bitbucket.component.imageDiffer.pixelDiffContainer());a._$pixelDiffContainer=a._$container.find(".pixeldiff-container");if(a._$pixelDiffImg)a._$pixelDiffContainer.append(a._$pixelDiffImg);else{var b=d(bitbucket.component.imageDiffer.spinner());a._$pixelDiffContainer.append(b);b.spin("large");n.defer(function(){var c=u(a._$sinceImg),e=u(a._$untilImg);
d.when(c,e).then(function(a,b){y.outputSettings({errorColor:{red:208,green:68,blue:55},errorType:"flat",transparency:.1});var c=d.Deferred();y(a).compareTo(b).onComplete(function(a){return c.resolve(a)});return c}).done(function(b){a._$pixelDiffImg=d(bitbucket.component.imageDiffer.pixelDiffImage({imageSrc:b.getImageDataUrl()}));a._$pixelDiffContainer.append(a._$pixelDiffImg)}).always(function(){b.remove()})})}},function(){a._$pixelDiffImg&&a._$pixelDiffImg.remove();a._$revisions.unwrap();a._$pixelDiffContainer.remove();
delete a._$pixelDiffContainer})}}});return b}(x),A=function(c){function b(a){t(this,b);v(Object.getPrototypeOf(b.prototype),"constructor",this).call(this);this._$toolbar=d(a);this._$toggle=this._$toolbar.find(".image-differ-toggle")}w(b,c);r(b,{init:{value:function(a){var b=this,c={};n.values(f).forEach(function(d){var e=-1!==a.indexOf(d),f=b._$toggle.find(".image-differ-"+d);f.attr("aria-disabled",!e).prop("disabled",!e);e&&(f.attr("data-enabled-title")&&f.attr("data-disabled-title",f.attr("title")),
f.attr("data-mode",d),f.attr("title",f.attr("data-enabled-title")),c[d]=f)});if(-1!==a.indexOf(f.BLEND)){var e=function(){var a=document.createElement("input");a.setAttribute("type","range");return"range"===a.type}(),g=c[f.BLEND];g.attr("aria-disabled",!e).prop("disabled",!e);e||g.attr("title",g.attr("data-disabled-title"))}var l=function(a){var c=b._mode;b._mode=a;b.trigger("modeChanged",{newMode:a,oldMode:c})},m=this._$toggle.find(".aui-button");m.on("click",function(a){a.preventDefault();a=d(a.target);
if("true"!==a.attr("aria-disabled")&&"true"!==a.attr("aria-pressed")){var b=a.attr("data-mode");m.attr("aria-pressed","false");a.attr("aria-pressed","true");l(b)}}).tooltip({gravity:"s"});l(f.TWO_UP)}},getMode:{value:function(){return this._mode}},destroy:{value:function(){this._$toolbar&&(this._$toolbar.remove(),this._$toolbar=null);this._$toggle=null}}});return b}(x);g.exports={init:function(c){c=d(c);var b=new A(d(bitbucket.component.imageDiffer.toolbar.main()).prependTo(c)),a=new z(c);b.on("modeChanged",
function(b){a.setMode(b.newMode)});var e=new d.Deferred;a.init().done(function(c){b&&b.init(c);e.resolve({on:a.on.bind(a),enabledModes:c,_differ:a,_toolbar:b,destroy:function(){a.destroy();a=null;b.destroy();b=null}})});return e},Differ:z,Toolbar:A}});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:binary-diff-view', location = '/static/feature/file-content/binary-diff-view/binary-diff-view.js' */
define("feature/file-content/binary-diff-view","aui jquery bitbucket/internal/image-differ util/deprecation util/events model/file-change feature/file-content/binary-view".split(" "),function(k,f,m,g,n,p,q){function c(a,b){this._init(a,b)}function l(a,b){if(a&&b)return q.getRenderedBinary(a,b.getId())}c.prototype.isDiffingImages=function(){return this._isDiffingImages};c.prototype._init=function(a,b){var d=(new p(b.fileChange)).getCommitRange(),e=d.getUntilRevision(),d=d.getSinceRevision();this._$container=
f(stash.feature.fileContent.binaryView.container()).appendTo(b.$container);var h=l(a.source,d),c=l(a.destination,e);this._renderBinaryDiff(h,c).done(function(){b.$container.addClass("fully-loaded")});e={containerEl:this._$container.get(0),sourcePath:a.source,sourceType:h&&h.type,sinceRevision:d&&d.toJSON(),destinationPath:a.destination,destinationType:c&&c.type,untilRevision:e&&e.toJSON()};g.triggerDeprecated("stash.feature.fileContent.onBinaryDiffShown",null,e,"stash.feature.fileContent.binaryDiffShown",
"3.3","4.0");n.trigger("stash.feature.fileContent.binaryDiffShown",null,e)};c.prototype._renderBinaryDiff=function(a,b){var c=this;a&&f(stash.feature.fileContent.binaryView.cell({extraClasses:"since-revision",titleText:"Old"})).append(a.$elem).appendTo(this._$container);b&&f(stash.feature.fileContent.binaryView.cell({extraClasses:"until-revision",titleText:"New"})).append(b.$elem).appendTo(this._$container);return(this._isDiffingImages=
a&&b&&a.type===b.type&&"image"===a.type)?m.init(this._$container).done(function(a){a.on("modeChanged",function(a){g.triggerDeprecated("stash.feature.fileContent.imageDiffer.modeChanged",null,a.newMode,a.oldMode,"","3.4","4.0");g.triggerDeprecated("imageDiffer.modeChanged",null,a.newMode,a.oldMode,null,"3.9","4.0")});c.imageDiff=a}):f.Deferred().resolve()};c.prototype.destroy=function(){this.imageDiff&&(this.imageDiff.destroy(),this.imageDiff=null);this._$container&&(this._$container.remove(),this._$container=
null)};return c});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:diff-line-info', location = '/static/feature/file-content/diff-line-info.js' */
define("feature/file-content/diff-line-info",["lodash","util/deprecation","feature/file-content/diff-view-segment-types","exports"],function(a,m,k,p){function n(f,h,b,g,c,d,e){this.lineType=f;this.lineNumber=h;this.line=b;this.segment=g;this.hunk=c;this.diff=d;this.handles={FROM:null,TO:null,all:[]};this.attributes=e}var q={ADDED:"destination",REMOVED:"source",CONTEXT:"source"};n.prototype._setHandle=function(f,h){this.handles[f]=h;this.handles.all.push(h);this.handles.all=a.uniq(this.handles.all)};
p.convertToLineInfos=function(f,h){return a.chain(f.hunks).map(function(b){return a.map(b.segments,function(g,c){var d;var e=b.segments;d=h.relevantContextLines;var f=e[c-1],e=e[c+1];if(g.type!==k.CONTEXT)d=null;else{var a=0,l=g.lines.length;!f||f.type!==k.ADDED&&f.type!==k.REMOVED||(a=d);!e||e.type!==k.ADDED&&e.type!==k.REMOVED||(l-=d);d=l>a?{start:a-1,end:l}:null}return{hunk:b,segment:g,expandedRange:d}})}).flatten().map(function(b){var g=b.segment;return a.map(g.lines,function(c,d){var e=g.type,
a=c[q[g.type]];c.lineType=e;c.lineNumber=a;m.prop(c,"lineType","info.line.lineType","info.lineType","3.4","4.0");m.prop(c,"lineNumber","info.line.lineNumber","info.lineNumber","3.4","4.0");return new n(e,a,c,g,b.hunk,f,{expanded:b.expandedRange&&d<b.expandedRange.end&&d>b.expandedRange.start})})}).flatten().value()}});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:array-util', location = '/static/util/array.js' */
define("util/array",["lodash","util/function","exports"],function(e,f,a){function d(a){return function(c){for(var b=0;b<c.length;b++)if(a(c[b],b,c))return b;return-1}}function g(a){return function(c){var b=d(a)(c);return-1===b?[]:c.slice(b)}}function h(a){return function(c){var b=d(a)(c);return-1===b?c:c.slice(0,b)}}a.findIndex=d;a.skipUntil=g;a.skipWhile=e.compose(g,f.not);a.takeUntil=h;a.takeWhile=e.compose(h,f.not)});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:mixin-util', location = '/static/util/mixin.js' */
define("util/mixin",["lodash"],function(a){return function(){var b=[].slice.call(arguments);return{into:function(c){return a.extend.apply(a,[c].concat(b))}}}});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:text-view', location = '/static/feature/file-content/text-view/common-modes.js' */
(function(a){"object"===typeof exports&&"object"===typeof module?exports.commonModes=a():define("feature/file-content/text-view/common-modes",[],a)})(function(){return"clike commonlisp css htmlmixed javascript markdown perl php python ruby sass shell sql vbscript xml yaml".split(" ")});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:text-view', location = '/static/feature/file-content/text-view/text-view.js' */
define("feature/file-content/text-view","jquery lodash bitbucket/internal/widget util/determine-language util/events util/function util/horizontal-keyboard-scrolling util/object util/performance feature/file-content/stash-codemirror feature/file-content/text-view/common-modes feature/file-content/text-view/text-view-api feature/file-content/text-view/text-view-scrolling".split(" "),function(f,g,k,n,p,w,l,h,q,r,t,m,u){function e(a,b){k.call(this,b);var d=this;m.setupAPI(this);this._internalLines={ADDED:{},
REMOVED:{},CONTEXT:{}};this._editors=[];this._gutters=[];this._$container=a;this._$fileToolbar=this._$container.siblings(".file-toolbar");this._$container.addClass("text-view");this.registerGutter("CodeMirror-linewidget",{weight:0});this._addDestroyable(function(){d._$container.removeClass("text-view");d._editors.forEach(function(c){f(c.getWrapperElement()).remove()});d._editors=null;d._gutters=null;d._$container=null})}function v(a){var b=a.view;a.eachLine(function(d){d.handles.all.forEach(function(c){b.addLineClass(c,
"wrap","line")})})}h.inherits(e,k);m.mixInto(e.prototype);u.mixInto(e.prototype);e.defaults={focusPoint:.2};e.prototype.init=function(){p.trigger("stash.feature.fileContent.textViewInitializing",null,this._api,this._options);l.init()};e.prototype.markText=function(a,b,d,c){var e=this;return a.handles.all.map(function(a){var f=e._editorForHandle(a);a=f.getLineNumber(a._handle);return f.markText({line:a+b.lineOffset,ch:b.ch},{line:a+d.lineOffset,ch:d.ch},{className:c.className})})};e.prototype.refresh=
function(){g.invoke(this._editors,"refresh");this.trigger("resize")};e.prototype._createEditor=function(a,b){a=a||{};var d=new r(b&&b.length?b[0]:this._$container[0],f.extend({},a,{autoResizing:this._options.autoResizing,gutters:this._getGutters(a.gutterFilter),value:""}));d._gutterFilter=a.gutterFilter;this._editors.push(d);l.setEditors(this._editors);this._$firstEditor||(this._$firstEditor=f(d.getWrapperElement()));return d};e.prototype._editorForHandle=function(a){throw Error("TextView implementation must define _editorForHandle.");
};e.prototype._editorInnerOffset=function(){return this._$firstEditor[0].getBoundingClientRect().top-this._$container[0].getBoundingClientRect().top};e.prototype._getChangeAttributes=function(){return{}};e.prototype._getGutters=function(a){var b=this._gutters;a&&(b=b.filter(a));b=b.sort(function(a,c){return a.weight-c.weight});return g.chain(b).pluck("name").uniq().value()};e.prototype._modify=function(a,b,d){var c=this,e=[].slice.call(arguments);g.forEach(d,function(a){c._internalLines[a.lineType||
"CONTEXT"][a.lineNumber]=a});this.operation(function(){c._acceptModification.apply(c,e);c.trigger("internal.acceptedModification",e);var b=f.extend({type:a,linesAdded:d.length,eachLine:function(a){var b=(c._options.asyncDiffModifications?q.frameBatchedMap(a,{min:500,initial:200},c.operation.bind(c)):function(b){var c=f.Deferred();c.resolve(b.map(a));return c})(d);c._addDestroyable(b.reject.bind(b));return b.promise()},view:c._api},c._getChangeAttributes.apply(c,e));g.chain(d).pluck("handles").values().flatten().compact().forEach(h.freeze).value();
g.chain(d).pluck("handle").compact().forEach(h.freeze).value();g.chain(d).pluck("line").compact().forEach(h.freeze).value();h.deepFreeze(d,!1);h.deepFreeze(b,!1);v(b);"INITIAL"===a&&c.trigger("internal-load",b);c.trigger("internal-change",b);c.trigger("resize")})};e.prototype._highlight=function(a){this._editors&&this._editors.forEach(function(b){b._highlight(a)})};e.prototype._syntaxHighlighting=function(a,b,d){var c=n.fromFileInfo({firstLine:b,path:a});(c.wrmKey?WRM.require("wr!"+c.wrmKey):c.builtIn&&
-1===t.indexOf(c.mode)?WRM.require("wr!com.atlassian.stash.stash-highlight-plugin:"+c.mode):f.Deferred().resolve()).done(function(){d.setOption("mode",c.mime)})};e.prototype._whenOpDone=function(a){this._opCallbacks?this._opCallbacks.push(a):a()};return e});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:text-view', location = '/static/feature/file-content/text-view/text-view-api.js' */
define("feature/file-content/text-view/text-view-api","jquery lodash util/array util/function util/mixin util/object exports".split(" "),function(h,e,p,f,q,r,k){function t(a){h(a).addClass("stash-gutter-marker");return a}var m={addLineClass:function(a,b,d){this._editorForHandle(a).addLineClass(a._handle,b,d);return a},addLineWidget:function(a,b,d){var c=this._editorForHandle(a).addLineWidget(a._handle,b,d),g=this;g.trigger("widgetAdded");return{clear:function(){c.off("redraw");c.clear();g.trigger("widgetCleared")},
changed:function(){c.changed();g.trigger("widgetChanged")},onRedraw:function(a){c.on("redraw",a)},getHeight:function(){return c.height}}},getLine:function(a){return a._handle.text},getLineHandle:function(a){a&&null==a.lineNumber&&(a=h(a),a.is(".line-locator")||(a=a.closest(".line").find(".line-locator")),a={fileType:a.attr("data-file-type"),lineType:a.attr("data-line-type"),lineNumber:a.attr("data-line-number")});var b=a&&this._internalLines[a.lineType||"CONTEXT"][a.lineNumber]&&this._internalLines[a.lineType||
"CONTEXT"][a.lineNumber].handles;return b&&(b[a.fileType]||b.all[0])},operation:function(a){if(this._editors){a=this._editors.reduce(function(a,c){return c.operation.bind(c,a)},f.arity(a.bind(null),0));try{return this._inOp||(this._opCallbacks=[],this._inOp=0),this._inOp++,a()}finally{if(this._inOp--,!this._inOp){try{f.applyAll(this._opCallbacks)}catch(b){setTimeout(function(){throw b;},0)}this._opCallbacks=null}}}},registerGutter:function(a,b){b=b||{};if(this._editors){this._gutters.push({name:a,
weight:b.weight||0,fileType:b.fileType});this._gutters=r.uniqueFromArray(this._gutters,["name","fileType"]).sort(function(a,b){return a.weight-b.weight||a.name.localeCompare(b.name)});var d=this;this._editors.forEach(function(a){var b=d._getGutters(a._gutterFilter);e.isEqual(a.getOption("gutters"),b)||a.setOption("gutters",b)})}},removeLineClass:function(a,b,d){this._editorForHandle(a).removeLineClass(a._handle,b,d);return a},setGutterMarker:function(a,b,d){this._editorForHandle(a).setGutterMarker(a._handle,
b,t(d));return a},addContainerClass:function(a){this._$container.addClass(a);this.refresh()},removeContainerClass:function(a){this._$container.removeClass(a);this.refresh()}},u=Object.keys(m),n={destroy:0,load:1,change:1};k.setupAPI=function(a){var b={};a._api={};var d=[a].concat(u);e.bindAll.apply(e,d);e.extend(a._api,{on:function(c,d){if(e.has(n,c)){b[c]||(b[c]=[]);var l=f.arity(d.bind(a._api),n[c]);b[c].push({f:d,wrappedF:l});a.on(c,l)}},off:function(c,d){if(b[c]){var e=p.findIndex(f.dotEq("f",
d))(b[c]||[]);-1!==e&&(a.off(c,b[c][e].wrappedF),b[c].splice(e,1))}}},e.pick.apply(e,d))};k.mixInto=q(m).into});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:text-view', location = '/static/feature/file-content/text-view/request-window-scrolls.js' */
define("feature/file-content/text-view/request-window-scrolls","bacon jquery lodash util/bacon util/performance util/region-scroll-forwarder util/request-page-scrolling util/scroll".split(" "),function(g,p,q,h,r,t,e,u){return function(b,c){return e().done(function(f){var k=new g.Bus,a=b._$container.addClass("full-window-scrolling"),e=a.closest(".file-content"),l,v=u.fakeScroll(a[0]),a=g.mergeAll(["stash.feature.sidebar.expandEnd","stash.feature.sidebar.collapseEnd","stash.feature.changeset.difftree.collapseAnimationFinished",
"internal.stash.layout.body.resize"].map(h.events).concat(h.getWindowSizeProperty().toEventStream())).toProperty();b._addDestroyable(f);b._addDestroyable(a.scan(0,function(b,a){return a&&a.hasOwnProperty("width")&&a.hasOwnProperty("height")&&a||b}).filter(q.identity).onValue(function(a){l=a.height-b._$fileToolbar.outerHeight();c.resize(b._$container.width(),l)}));a=r.enqueueCapped(b._whenOpDone.bind(b),function(){b._$container&&f.refresh()});c.onSizeChange(a);b.on("widgetAdded",a);b.on("widgetChanged",
a);b.on("widgetCleared",a);b.on("internal-change",a);if(b._options.commentContext)b._options.commentContext.on("fileCommentsResized",a);a=new t(k,[{id:"file-comments-and-messages",getHeight:function(){return b._editorInnerOffset()||0},setScrollTop:function(a){v(0,a)}},{id:"editors",getHeight:function(){return Infinity},setScrollTop:function(a){c.scroll(null,a)}}]);b._addDestroyable(a);if(b._options.commentContext)b._options.commentContext.on("fileCommentsResized",a.heightsChanged.bind(a));f.setTarget({scrollSizing:function(){var a=
c.scrollSizing();return{height:a.height+b._editorInnerOffset(),clientHeight:a.clientHeight}},offset:function(){return e.offset()},scroll:function(a,b){null!=b&&k.push({top:b})}});var a=/Chrome\//.test(window.navigator.userAgent),m=/Apple Computer/.test(window.navigator.vendor),d=1;a?d=-.7:m&&(d=-1/3);var n=p(window);(a||m)&&b._$container[0].addEventListener("mousewheel",function(a){if(a.wheelDeltaX&&a.wheelDeltaY){if(Math.abs(a.wheelDeltaX)>Math.abs(a.wheelDeltaY)){var b=c.scrollSizing();c.scroll(b.left-
a.wheelDeltaX*d,null)}else n.scrollTop(n.scrollTop()+a.wheelDeltaY*d);a.stopImmediatePropagation();a.preventDefault()}},!0)})}});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:text-view', location = '/static/feature/file-content/text-view/text-view-scrolling.js' */
define("feature/file-content/text-view/text-view-scrolling",["jquery","util/mixin","feature/file-content/text-view/request-window-scrolls"],function(f,g,h){return{mixInto:g({scrollHandleIntoFocus:function(a){var b=this._editorForHandle(a),c=b.getScrollInfo();a=c.height>c.clientHeight?b.heightAtLine(a._handle.lineNo(),"local"):0;this._scrollToFocusedOffset(a,c,b)},scrollHandleIntoView:function(a){var b=this._editorForHandle(a);b.lastLine()===a._handle.lineNo()?b.scrollTo(null,b.heightAtLine(b.lastLine()+
1)):b.scrollIntoView(a._handle.lineNo()+1)},scrollToFileComments:function(a,b){var c=this._editors[0],e=c.getScrollInfo(),d=f("#page").offset().top;null!=b&&a>d&&a+b<d+e.clientHeight||this._scrollToFocusedOffset(a-this._editorInnerOffset(),e,c)},scrollToTop:function(){this._scrollToSourcePosition(null,0)},scrollToWidgetOffset:function(a,b,c){var e=this._editorForHandle(a),d=e.getScrollInfo();if(d.height>d.clientHeight){if(a=e.heightAtLine(a._handle.lineNo(),"local"),b=Math.max(0,a+b),null!=c&&(a=
b-d.top,0<=a&&a<d.clientHeight-c))return}else b=0;this._scrollToFocusedOffset(b,d,e)},_requestWindowScrolls:function(a){var b=this;return h(this,a).done(function(a){b._scrollToSourcePosition=function(e,d){a.scroll(e,null!=d?Math.max(0,d+b._editorInnerOffset()):null)}}).fail(function(a){b._scrollToSourcePosition=function(a,b){throw Error("Not implemented");}})},_scrollToFocusedOffset:function(a,b,c){c.getInputField().blur();this._scrollToSourcePosition(null,a-b.clientHeight*this._options.focusPoint)},
_scrollToSourcePosition:function(){throw Error("_scrollToSourcePosition can't be called until _requestWindowScrolls returns.");}}).into}});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:text-view', location = '/static/feature/file-content/text-view/attach-simple-scroll-behavior.js' */
define("feature/file-content/text-view/attach-simple-scroll-behavior",["jquery"],function(g){return function(e,a,c){return a?e._requestWindowScrolls({scrollSizing:function(){return a.getScrollInfo()},scroll:function(d,b){a.scrollTo(null,b)},resize:function(d,b){var a=c.data("height"),f=c.data("width");b!==a&&(c.height(b),c.data("height",b));d!==f&&c.data("width",d);b===a&&d===f||e.refresh()},onSizeChange:function(a){e.on("resize",a)}}):g.Deferred().reject()}});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:direction-enum', location = '/static/model/direction.js' */
define("model/direction",function(){return{UP:"UP",DOWN:"DOWN"}});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:region-scroll-forwarder', location = '/static/util/region-scroll-forwarder.js' */
define("util/region-scroll-forwarder",["bacon","jquery","lodash","util/bacon","util/function"],function(n,u,d,p,q){return function(r,c){function t(a,b){d.chain(a).filter(function(b,a,c){return!d.some(c.slice(0,a),function(a){return b.groupId&&b.groupId===a.groupId})}).forEach(function(a){a.setScrollTop("bottom"===b(a)?a.getCachedHeight():0)}).value()}var g=new n.Bus;c=c.map(function(a){var b=null;return u.extend({},a,{getCachedHeight:function(){null==b&&(b=a.getHeight());return b},invalidateCache:function(){b=
null}})});var e;r.subscribe(function(a){if(a.isInitial()){var b=a.value().top,k=0,e;d.forEach(c,function(a){var c=a.getCachedHeight(),d=k+c>=b;!e&&d?(e=a,a.setScrollTop(b-k)):a.setScrollTop(d?0:c);k+=c})}})();var m=r.takeUntil(g).slidingWindow(2,2).map(q.spread(function(a,b){var e=0,l,g=b.top-a.top,f,h=0;d.some(c,function(c){var d=c.getCachedHeight();!f&&h+d>=b.top&&(f=c,e=h);!l&&h+d>=a.top&&(l=c);h+=d;return f&&l});if(!f)throw Error("No forwardee handles "+b.top);return{scrollInfo:b,localTop:b.top-
e,diff:g,forwardTo:f,previousRegion:l}})),v=m.onValue(function(a){e=a;var b=a.previousRegion;if(b!==a.forwardTo){var b=p.toArray(p.takeBetween(n.fromArray(c),{start:b,end:a.forwardTo,startInclusive:!0,endInclusive:!1})),d=0<a.diff;t(d?b.reverse():b,q.constant(d?"bottom":"top"))}a.forwardTo.setScrollTop(a.localTop)});return{regionChanges:m.map(".forwardTo").skipDuplicates(),forwardingInfo:m,heightsChanged:function(){d.invoke(c,"invalidateCache");if(e){var a=d.indexOf(c,e.forwardTo);t(d.reject(c,function(a){return a===
e.forwardTo||a.groupId&&a.groupId===e.forwardTo.groupId}),function(b){return d.indexOf(c,b)<a?"bottom":"top"});e.forwardTo.setScrollTop(Math.min(e.localTop,e.forwardTo.getCachedHeight()))}},destroy:function(){v();g.push(!0);g.end()}}}});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:page-scrolling-manager', location = '/static/layout/page-scrolling-manager.js' */
define("layout/page-scrolling-manager","aui bacon jquery util/bacon util/events util/function util/region-scroll-forwarder util/scroll exports".split(" "),function(z,e,b,m,B,C,D,E,h){function u(){function d(a){var c=null,b=a;k.takeUntil(f).onValue(function(a){b=a});a=new D(m.getWindowScrollProperty(),[{id:"pre",groupId:"outside",setScrollTop:function(a){null===c&&(c=h.offset().top);v(null,a);q.$wrapper.css("top",Math.max(0,a-c));q.$wrapper.hasClass("aui-is-docked")&&0!==a||q.reflow()},getHeight:function(){var a=
b.offset().top,c=n.offset().top;return a-c}},{id:"in",groupId:"inside",setScrollTop:function(a){b.scroll(null,a)},getHeight:function(){return Infinity}}]);w.takeUntil(f).onValue(a,"heightsChanged");return a}var l=b(window),x=document.body,y=b(x),n=b("#page"),g=n[0],h=b(".aui-sidebar"),q=z.sidebar(h),t=x.style.height;y.addClass("scrolling-forwarded");var f=new e.Bus,r=new e.Bus,p=new e.Bus,k=new e.Bus,w=k.sampledBy(e.mergeAll(k,r,e.interval(1E3).takeUntil(f),m.getWindowSizeProperty().changes())).filter(function(a){return!!a}).takeUntil(f).map(".offset").map(function(a){var c=
n.offset();return{top:Math.round(a.top-c.top)}}).skipDuplicates(function(a,c){return a.top===c.top}).toProperty(),A=k.sampledBy(e.mergeAll(k,r)).filter(function(a){return!!a}).takeUntil(f).map(".scrollSizing").skipDuplicates(function(a,c){return a.height===c.height&&a.clientHeight===c.clientHeight}).toProperty();e.combineWith(function(a,c,b){return a.top+Math.max(c.height,c.clientHeight)+(b.height-c.clientHeight)},w,A,m.getWindowSizeProperty()).takeUntil(f).onValue(function(a){y.height(a);B.trigger("internal.stash.layout.body.resize")});
var v=E.fakeScroll(g);m.getWindowScrollProperty().takeUntil(f).onValue(function(a){v(a.left,null)});e.combineAsArray(p,w.sampledBy(p),A.sampledBy(p)).map(C.spread(function(a,c,b){return{scrollTop:null!=a.scrollTop?c.top+Math.max(0,Math.min(a.scrollTop,b.height-b.clientHeight)):null}})).onValue(function(a){null!=a.scrollTop&&l.scrollTop(a.scrollTop)});var u=k.onValue(function(a){f.onValue(d(a),"destroy");u()});return{setTarget:function(a){k.push(a)},scroll:function(a,b){p.push({scrollTop:b})},refresh:function(){r.push(!0)},
destroy:function(){y.removeClass("scrolling-forwarded");v(0,0);q.$wrapper.css("top","");x.style.height=t||null;p.end();f.push(!0);f.end();r.end();k.end()}}}var t=b(window),g=!1,l,d;h.acceptScrollForwardingRequests=function(){if(g)throw Error("acceptScrollForwardingRequests has already been called. It must be unregistered before it can be called again.");g=!0;l=null;return function(){d&&(z.log("Scroll control is not yet destroyed. Ongoing scroll requests will be ignored."),d.scrollTo=b.noop,d.destroy());
g=!1}};h._requestScrollControl=function(){function e(){t.scrollTop(Math.min(l,h.offset().top-b("#page").offset().top))}var h;if(!g)return b.Deferred().reject({reason:"NOT_ACCEPTING"});if(d)return b.Deferred().reject({reason:"CONTROL_TAKEN"});b("#footer").hide();d=u();d.setTarget=function(b){return function(g){var n=b.apply(this,arguments);h=g;var m=!d;null==l||m||(e(),l=null);return n}}(d.setTarget);d.destroy=function(g){return function(){h&&(l=t.scrollTop(),e());b("#footer").show();d=null;return g.apply(this,
arguments)}}(d.destroy);return b.Deferred().resolve(d)}});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:request-page-scrolling', location = '/static/util/request-page-scrolling.js' */
define("util/request-page-scrolling",["layout/page-scrolling-manager"],function(a){return function(){return a._requestScrollControl()}});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:ediff', location = '/static/feature/file-content/ediff/ediff.js' */
define("feature/file-content/ediff",["util/html"],function(v){function u(e){var d=e.comparableValue,g;"string"!==typeof d&&(g=d=e.value,w.lastIndex=0,w.test(g)&&(0===e.start&&(g="\n"+g),-1!==g.indexOf("\n")&&(d=g.replace(A,"\n"))),e.comparableValue=d);return d}function x(e,d,g,b,l){for(var k=g;k<g+b;k++){var c=d.length-1,h=d.length&&d[c],a=e[k];h&&h.end===a.start?d[c]={start:h.start,end:a.end,type:h.type}:d.push({start:a.start,end:a.end,type:l})}}function m(e){this._regions=e.slice(0);this._regionsLength=
this._regions.length;this._opened=!1;this._nextPosition=0;this._current=void 0}var r=/\w+|\s+|./gim,A=/\n[ \u00a0\t\r]+/mg,w=/\s/m,y=v.NodeType,z=y.OPEN,t=y.CLOSE;m.prototype=new v.NodeStream;m.prototype.hasNext=function(){return this._opened||this._nextPosition<this._regionsLength};m.prototype.next=function(){if(this.hasNext()){if(this._opened)return this._opened=!1,{type:t,textPosition:this._current.end,value:"\x3c/span\x3e"};this._opened=!0;var e=this._current=this._regions[this._nextPosition];
this._nextPosition++;return{type:z,textPosition:e.start,value:'\x3cspan class\x3d"ediff-'+e.type+'"\x3e',close:{type:t,value:"\x3c/span\x3e"}}}return null};m.prototype.getNextType=function(){return this.hasNext()?this._opened?t:z:null};m.prototype.getNextTextPosition=function(){return this.hasNext()?this._opened?this._current.end:this._regions[this._nextPosition].start:null};return{tokenizeString:function(e){var d=[],g;for(r.lastIndex=0;g=r.exec(e);)d.push({start:g.index,value:g[0],end:r.lastIndex});
return d},getTokensComparableValue:u,diff:function(e,d){var g=[];if(0!==e.length||0!==d.length){var b;a:{b=e.length;var l=d.length,k=b+l+1,c=1+2*k,h=(c+1)/2,a=[];a.length=c;a[h+1]={i:0,j:-1,prev:null,snake:!0};for(c=0;c<k;c++){for(var q=-c;q<=c;q+=2){var m=h+q,f=m+1,n=m-1,p;q===-c||q!==c&&a[n].i<a[f].i?(p=a[f].i,f=a[f]):(p=a[n].i+1,f=a[n]);a[n]=null;for(var n=p-q,r=p,t=n;f&&0!==f.i&&0!==f.j&&!f.snake&&f.prev;)f=f.prev;for(f={i:r,j:t,prev:f};p<b&&n<l&&u(e[p])===u(d[n]);)p++,n++;p>f.i&&(f={i:p,j:n,
prev:f,snake:!0});a[m]=f;if(p>=b&&n>=l){b=a[m];break a}}a[h+c-1]=null}throw"could not find a diff path";}b.snake&&(b=b.prev);for(;b&&b.prev&&0<=b.prev.j;){if(b.snake)throw"bad diffpath: found snake when looking for diff";a=b.i;h=b.j;b=b.prev;l=b.i;k=b.j;a-=l;h-=k;g.unshift({from:l,fromCount:a,to:k,toCount:h,type:0===a&&"add"||0===h&&"delete"||"change"});b.snake&&(b=b.prev)}}b=[];l=[];h=g.length;for(k=0;k<h;k++)a=g[k],c=a.type,"change"!==c&&"delete"!==c||x(e,b,a.from,a.fromCount,c),"change"!==c&&"add"!==
c||x(d,l,a.to,a.toCount,c);return{originalRegions:b,revisedRegions:l}},DiffRegionNodeStream:m}});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:ediff', location = '/static/feature/file-content/ediff/ediff-markers.js' */
define("feature/file-content/ediff/ediff-markers","bacon jquery lodash util/bacon util/function feature/file-content/diff-view-segment-types feature/file-content/ediff".split(" "),function(k,r,d,t,e,m,n){function u(a,c){var h=k.fromBinder(function(b){c.eachLine(b).done(d.partial(b,new k.End));return r.noop});p(h).onValue(function(b){a.markText(b.line,b.from,b.to,b.options)})}function p(a){var c=e.dot("0.line.conflictMarker");return t.split(a,e.dot("segment")).slidingWindow(2,2).filter(e.partialRight(d.every,
e.not(c))).filter(e.spread(function(a,b){return a[0].segment.type===m.REMOVED&&b[0].segment.type===m.ADDED})).flatMap(e.spread(function(a,b){function c(b,a){return k.fromArray(a).map(function(a){return d.extend({},a,{line:b[a.line]})})}var g=v(a[0].segment,b[0].segment);return c(a,g.from).merge(c(b,g.to))}))}function v(a,c){function h(a){a=d.pluck(a.lines,"line").join("\n");return{text:a,tokens:n.tokenizeString(a)}}var b=h(c),f=h(a);if(!(750>b.tokens.length&&750>f.tokens.length))return{to:[],from:[]};
var g=n.diff(f.tokens,b.tokens);return{from:d.map(g.originalRegions,d.partial(q,f.text)),to:d.map(g.revisedRegions,d.partial(q,b.text))}}function q(a,c){var d=a.slice(0,c.start),b=a.slice(c.start,c.end),f=d.lastIndexOf("\n")+1,g=b.lastIndexOf("\n")+1,e=c.start-f,f=c.end-(g?g+c.start:f),d=d.split("\n").length-1,b=b.split("\n").length-1;return{line:d,from:{lineOffset:0,ch:e},to:{lineOffset:b,ch:f},options:{className:"ediff-"+c.type}}}function w(a){a.off("internal-change",l)}var l;return{init:function(a){l=
d.partial(u,a.diffView);a.diffView.on("internal-change",l);return{destroy:d.partial(w,a.diffView)}},_convertLinesToMarkers:p}});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:diff-view', location = '/static/feature/file-content/diff-view/diff-view.js' */
define("feature/file-content/diff-view","jquery lodash util/array util/events util/function util/navigator util/object util/shortcuts model/direction feature/comments/anchors feature/file-content/diff-view-options feature/file-content/diff-view-segment-types feature/file-content/ediff/ediff-markers feature/file-content/text-view".split(" "),function(g,f,K,l,n,B,C,D,q,L,E,r,M,t){function N(a,b){return a.concat(b).sort(function(a,b){var e=f.first(a.lines),F=f.first(b.lines),k=f.last(a.lines),d=f.last(b.lines);
return e.destination-F.destination||e.source-F.source||k.destination-d.destination||k.source-d.source})}function O(a,b){var c=[];return b.eachLine(function(a){var b=a.line,d=a.handles.FROM,k=a.handles.TO,f=G.clone(),g=G.clone();f.addClass("line-number-from");g.addClass("line-number-to");f.html(a.lineType!==v?b.source:"\x26nbsp;");g.html(a.lineType!==w?b.destination:"\x26nbsp;");c.push([d||k,"line-number-from",f[0]]);c.push([k||d,"line-number-to",g[0]]);a.handles.all.forEach(function(b){var e=P.clone();
e.attr("data-file-type",b.fileType);e.attr("data-line-type",a.lineType);e.attr("data-line-number",a.lineNumber);e.html(b.lineType===v?"+":b.lineType===w?"-":"\x26nbsp;");c.push([b,"line-number-marker",e[0]])})}).done(function(){a.operation(function(){c.forEach(function(b){a.setGutterMarker.apply(a,b)})});a._$container.addClass("fully-loaded diff-api-ready");var h=Q(b);R(a,h);"INITIAL"===b.type&&S(a,h)})}function H(a,b,c,h){var e=x[a];a!==z&&(e+=" modified");if(!0===h||!0===c)e+=" expanded";e+=b?" conflict conflict-"+
b.toLowerCase():"";return e+(c?" new":"")}function T(a,b){var c="INSERT"===b.type,h=[];b.eachLine(function(b){var d=H(b.lineType,b.line.conflictMarker,c,b.attributes.expanded);b.handles.all.forEach(function(b){a.addLineClass(b,"wrap",d);c&&h.push(b)})}).done(function(){h.length&&U(a,h)})}function U(a,b){setTimeout(function(){a._editor&&a.operation(function(){f.each(b,function(b,h){a.removeLineClass(b,"wrap","new")})})},1500)}function Q(a){a=g.extend({},a);delete a.fileChange;return C.freeze(a)}function R(a,
b){a.trigger("change",b);l.trigger("stash.feature.fileContent.diffViewContentChanged",null,b)}function S(a,b){a.trigger("load",b);l.trigger("stash.feature.fileContent.diffViewContentLoaded",null,b)}function d(a,b){t.call(this,b.$container,b);this._data=a;this._scrollingReady=g.Deferred()}function I(a,b,c){var h;void 0!==c._line&&(b=b[c._lineType][c._line].handles,h=b[c._fileType]||b.FROM||b.TO);return{anchor:c,handle:h,offset:h?a.heightAtLine(h._handle.lineNo(),"local"):0}}function J(a,b,c,h){var e=
this;this._currAnimationPromise||(this._currAnimationPromise={});this._currAnimationPromise[a]&&f.invoke(this._currAnimationPromise[a],"abort");this._currAnimationPromise[a]=h.map(function(h){function d(a,b){var c=a?"addLineClass":"removeLineClass";u.operation(function(){y.forEach(function(a){u[c](a._handle,"wrap",b)})})}var y=h.handles,u=h.editor;if(!y||!y.length)return g.Deferred().reject().promise({abort:g.noop});var l=!1,p=g.Deferred(),m=g.Deferred();p.done(m.resolve.bind(m));var A=f.once(function(){u.off("scroll",
A);l||(e._$container&&e._$container.attr("data-last-updated",(new Date).getTime()),d(!0,b),p.always(d.bind(null,!1,b)),d(!0,a),m.always(d.bind(null,!1,a)),setTimeout(m.resolve.bind(m),c))});u.on("scroll",A);setTimeout(A,100);return p.promise({abort:function(){l=!0;p.resolve()}})})}var v=r.ADDED,w=r.REMOVED,z=r.CONTEXT,G=g(stash.feature.fileContent.diffView.lineNumber()),P=g(stash.feature.fileContent.diffView.lineNumberMarker()),x={};x[v]="added";x[w]="removed";x[z]="context";C.inherits(d,t);d.defaults=
t.defaults;d.contentChangeType={INITIAL:"INITIAL",INSERT:"INSERT"};d.prototype.init=function(){t.prototype.init.call(this);var a=this._options.diffViewOptions||E,b=!B.isIE()||11<=B.majorVersion();this.registerGutter("line-number-marker",{weight:1E3});this._$container.addClass("diff-type-"+this._options.fileChange.type).toggleClass("hide-ediff",a.get("hideEdiff")).toggleClass("animated",b);g("html").toggleClass("no-cssanimations",!b);var c=this;l.trigger("stash.feature.fileContent.diffViewDataLoaded",
null,this._data);this.on("internal-change",function(a){O(c,a).done(function(){c._selectLine(c._options.anchor);var a=c._options.fileChange.search;a&&c._highlight(a)})});this._addDestroyable(M.init({diffView:this}));this._addDestroyable(l.chainWith(g(window)).on("scroll",function(){c._expectFocusScroll||c._invalidateFocus();c._expectFocusScroll=!1}));this._addDestroyable(l.chainWith(a).on("change",function(a){"hideEdiff"===a.key&&c._$container.toggleClass("hide-ediff",a.value)}));this.on("internal.acceptedModification",
n.spread(function(a,b,c){T(this,{type:a,eachLine:function(a){return g.Deferred().resolve(f.map(c,a))}})}));this._options.attachScroll?f.defer(function(){c._attachScrollBehavior().then(c._scrollingReady.resolve.bind(c._scrollingReady),c._scrollingReady.reject.bind(c._scrollingReady))}):this._scrollingReady.resolve();this._addDestroyable(l.chain().on("internal.stash.feature.diffView.lineChange",this._selectLine.bind(this)).on("internal.stash.feature.diffView.highlightSearch",this._highlight.bind(this)));
this._addDestroyable(D.bind("requestSecondaryNext",this._scrollToChange.bind(this,q.DOWN)));this._addDestroyable(D.bind("requestSecondaryPrevious",this._scrollToChange.bind(this,q.UP)))};d.prototype._findNextChange=function(a,b,c){function d(a){return Boolean(a.lines[0].conflictMarker)||e._options.combineLinkedSegments&&a&&a.type!==r.CONTEXT}var e=this,f=!1,k=-1;null==a&&(c=q.DOWN,f=!0);var g,l=b.length;for(g=0;g<l;g++){var n=c===q.DOWN?g:l-g-1,p=b[n];if(f){var m=b[n-1];if(!(!p||p.type===r.CONTEXT||
Boolean(p.lines[0].conflictMarker)&&m&&Boolean(m.lines[0].conflictMarker)||e._options.combineLinkedSegments&&m&&m&&m.type!==r.CONTEXT)){k=n;break}}else p===a&&(f=!0)}if(-1<k){a=k;for(k+=1;k<b.length&&d(b[k]);)k++;return b.slice(a,k)}return null};d.prototype._selectLine=function(a){a&&(a=this.getLineHandleFromNumber(a.no,a.type))&&(this.scrollHandleIntoFocus(a),this._markLinesFocused([{editor:this._editorForHandle(a),handles:[a]}]))};d.prototype._scrollToChange=function(a){var b=this._focusedSegments&&
this._focusedSegments[0];b||(b=this._$fileToolbar.outerHeight(),b=this._$container[0].getBoundingClientRect().top-b,b=this._getFocusSegment(b));if(a=this._findNextChange(b,this._allSegments,a))this._setFocusSegment(a),this._expectFocusScroll=!0,this._focusedSegments=a};d.prototype._scrollToComment=function(a){E.set("hideComments",!1);var b=f.chain(this._options.commentContext._containers).pluck("anchor").filter(function(a){return a instanceof L.LineAnchor}).uniq(n.invoke("getId")).value();if(a=this._findNextAnchor(a,
b,this._focusedComment))this._expectFocusScroll=!0,this._focusedComment=a,a.handle?(this._highlightCommentForLine(a.handle),this.scrollHandleIntoFocus(a.handle)):this._scrollToSourcePosition(null,-this._editorInnerOffset())};d.prototype._invalidateFocus=function(){this._focusedComment=this._focusedSegments=null};d.prototype._findNextAnchorInEditor=function(a,b,c,d){if(0===b.length)return null;b=f.sortBy(b,n.dot("_line"));if(d){var e=K.findIndex(n.propEqual(f.pick(d.anchor,"_line","_lineType","_fileType")))(b);
if(-1!==e)return(c=b[e+(c===q.UP?-1:1)])&&I(a,this._internalLines,c)}var g;d?g=d.offset:(d=this._$fileToolbar.outerHeight(),d=this._$container[0].getBoundingClientRect().top-d,e=a.getScrollInfo(),g=e.top+this._options.focusPoint*e.clientHeight-d);a=b.map(I.bind(null,a,this._internalLines));return c===q.UP?f.find(a.reverse(),function(a){return a.offset<g}):f.find(a,function(a){return a.offset>g})};d.prototype._highlightCommentForLine=function(a){this._markLineCommentsFocused([{editor:this._editorForHandle(a),
handles:[a]}])};d.prototype.getLineHandleFromNumber=function(a,b){var c="TO"===b?this._internalLines[v][a]:this._internalLines[w][a];return(c=(c=c||f.find(this._internalLines[z],n.dotEq("TO"===b?"line.destination":"line.source",a)))&&c.handles)&&(c[b]||c.all[0])};d.prototype._acceptModification=function(){throw Error("DiffView implementation must define this.");};d._combineTexts=function(a){return f.chain(a).pluck("line").pluck("line").value().join("\n")};d.prototype._getChangeAttributes=function(a,
b){return{diff:b,fileChange:this._options.fileChange}};d.prototype._getLineClasses=H;d.prototype._modifyDiff=function(a,b,c){var d=[].slice.call(arguments,3);this._allSegments=N(this._allSegments||[],f.chain(b.hunks).pluck("segments").flatten(!0).value());this._modify.apply(this,[a,b,c].concat(d))};d.prototype._markLinesFocused=f.partial(J,"line-focused","last-focus",1E3);d.prototype._markLineCommentsFocused=f.partial(J,"line-comment-focused","last-comment-focus",1E3);return d});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:diff-view', location = '/static/feature/file-content/diff-view/diff-view.soy' */
// This file was automatically generated from diff-view.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace stash.feature.fileContent.diffView.
 */

if (typeof stash == 'undefined') { var stash = {}; }
if (typeof stash.feature == 'undefined') { stash.feature = {}; }
if (typeof stash.feature.fileContent == 'undefined') { stash.feature.fileContent = {}; }
if (typeof stash.feature.fileContent.diffView == 'undefined') { stash.feature.fileContent.diffView = {}; }


stash.feature.fileContent.diffView.editor = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<div class="diff-editor' + ((opt_data.editorClass) ? ' ' + soy.$$escapeHtml(opt_data.editorClass) : '') + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '></div>';
};
if (goog.DEBUG) {
  stash.feature.fileContent.diffView.editor.soyTemplateName = 'stash.feature.fileContent.diffView.editor';
}


stash.feature.fileContent.diffView.lineNumber = function(opt_data, opt_ignored) {
  return '<div class="line-number"></div>';
};
if (goog.DEBUG) {
  stash.feature.fileContent.diffView.lineNumber.soyTemplateName = 'stash.feature.fileContent.diffView.lineNumber';
}


stash.feature.fileContent.diffView.lineNumberMarker = function(opt_data, opt_ignored) {
  return '<div class="line-number-marker line-locator" data-file-type="" data-line-type="" data-line-number=""></div>';
};
if (goog.DEBUG) {
  stash.feature.fileContent.diffView.lineNumberMarker.soyTemplateName = 'stash.feature.fileContent.diffView.lineNumberMarker';
}
;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:math', location = '/static/util/math.js' */
define("util/math",["lodash","exports"],function(h,c){function f(a){return function(b){return Math.min(a,b)}}function g(a){return function(b){return Math.max(a,b)}}function d(a,b){if(!(this instanceof d))return new d(a,b);this.x=a;this.y=b}function e(a,b){if(!(this instanceof e))return new e(a,b);this.width=a;this.height=b}c.add=function(a,b){return a+b};c.clamp=function(a,b){return h.compose(g(a),f(b))};c.greaterThan=function(a,b){return a>b};c.highPass=g;c.isNegative=function(a){return 0>a};c.isPositive=
function(a){return 0<a};c.lowPass=f;c.lessThan=function(a,b){return a<b};c.multiply=function(a,b){return a*b};c.Point=d;c.Size=e});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:diff-hunk-map', location = '/static/feature/file-content/diff-hunk-map/diff-hunk-map.soy' */
// This file was automatically generated from diff-hunk-map.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace stash.feature.fileContent.
 */

if (typeof stash == 'undefined') { var stash = {}; }
if (typeof stash.feature == 'undefined') { stash.feature = {}; }
if (typeof stash.feature.fileContent == 'undefined') { stash.feature.fileContent = {}; }


stash.feature.fileContent.diffHunkMap = function(opt_data, opt_ignored) {
  return '<div class="diff-hunk-map"></div>';
};
if (goog.DEBUG) {
  stash.feature.fileContent.diffHunkMap.soyTemplateName = 'stash.feature.fileContent.diffHunkMap';
}


stash.feature.fileContent.diffHunkMapCanvas = function(opt_data, opt_ignored) {
  return '<canvas width="' + soy.$$escapeHtml(opt_data.size.width) + '" height="' + soy.$$escapeHtml(opt_data.size.height) + '"></canvas>';
};
if (goog.DEBUG) {
  stash.feature.fileContent.diffHunkMapCanvas.soyTemplateName = 'stash.feature.fileContent.diffHunkMapCanvas';
}


stash.feature.fileContent.diffHunkMapViewportIndicator = function(opt_data, opt_ignored) {
  return '<div class="viewport-indicator hidden"></div>';
};
if (goog.DEBUG) {
  stash.feature.fileContent.diffHunkMapViewportIndicator.soyTemplateName = 'stash.feature.fileContent.diffHunkMapViewportIndicator';
}
;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:diff-hunk-map', location = '/static/feature/file-content/diff-hunk-map/diff-hunk-map.js' */
define("feature/file-content/diff-hunk-map",["jquery","lodash","util/function","util/math","util/scroll"],function(c,f,h,d,k){function a(b,g,a){this.init.apply(this,arguments)}var e={CONTEXT:"#ffffff",ADDED:"#97f295",REMOVED:"#ffb6ba",CONFLICT:"#FFF986"};a.prototype.init=function(b,g,a){this.regions=g;this.options=c.extend({},a);this.$hunkMap=c(stash.feature.fileContent.diffHunkMap()).appendTo(b);this.hunkMapWidth=this.$hunkMap.width();this.$indicator=c(stash.feature.fileContent.diffHunkMapViewportIndicator()).appendTo(this.$hunkMap);
this.indicatorScroll=k.fakeScroll(this.$indicator[0],{withDocument:!0});this.addCanvas(d.Size(this.hunkMapWidth,this.$hunkMap.height()));this.redraw();if("function"===typeof this.options.scrollToFn)this.$hunkMap.on("click",this._hunkMapClicked.bind(this,this.options.scrollToFn))};a.prototype.setIndicator=function(){var b=this.hunkMapHeight/this.totalHeight*this.hunkMapHeight,a=0===this.hunkMapHeight||b===this.hunkMapHeight;this.$indicator.toggleClass("hidden",a);a||this.$indicator.height(b)};a.prototype.diffScrolled=
function(b){this.indicatorScroll(0,b.top/b.height*this.hunkMapHeight)};a.prototype._hunkMapClicked=function(b,a){var l=a.pageY-this.$hunkMap.offset().top;b(l/this.hunkMapHeight)};a.prototype.mapHeights=function(){var b=f.invoke(this.regions,"getHeight"),a=this;this.totalHeight=b.reduce(d.add,0);this.hunkMapHeight=Math.min(this.$hunkMap.height(),this.totalHeight);f.chain(this.regions).zip(b).forEach(h.spread(function(b,c){b.fraction=c/a.totalHeight})).value()};a.prototype.addHunkToMap=function(b,a){if(0===
a.fraction)return b;var c=this.getHunkHeight(a);this.setFillStyle(a._seg.lines[0].conflictMarker?e.CONFLICT:e[a._seg.type]||e.CONTEXT);this.drawHunk(d.Point(0,b),d.Size(this.hunkMapWidth,c));return b+c};a.prototype.getHunkHeight=function(a){return Math.max(a.fraction*this.hunkMapHeight,1)};a.prototype.clear=function(){this.canvasContext.clearRect(0,0,this.hunkMapWidth,this.hunkMapHeight)};a.prototype.draw=function(){this.$canvas.attr("height",this.hunkMapHeight);this.regions.reduce(this.addHunkToMap.bind(this),
0);this.setIndicator()};a.prototype.redraw=function(){this.clear();this.mapHeights();this.draw()};a.prototype.addCanvas=function(a){this.$canvas=c(stash.feature.fileContent.diffHunkMapCanvas({size:a})).appendTo(this.$hunkMap);this.canvasContext=this.$canvas[0].getContext("2d")};a.prototype.setFillStyle=function(a){this.canvasContext.fillStyle=a};a.prototype.drawHunk=function(a,c){this.canvasContext.fillRect(a.x,a.y,c.width,c.height)};a.prototype.destroy=function(){this.$hunkMap.remove()};return a});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:line-handle', location = '/static/feature/file-content/line-handle.js' */
define("feature/file-content/line-handle",function(){return function(b,c,d,a){this.fileType=b;this.lineType=c;this.lineNumber=d;this._handle=a;a._stashHandle=this}});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:synchronized-scroll', location = '/static/util/synchronized-scroll.js' */
define("util/synchronized-scroll","lodash util/function util/math util/performance model/direction exports".split(" "),function(f,n,u,E,l,m){function k(a){if(a instanceof k)return a;if(!(this instanceof k))return new k(a);this._el=a;this._programmatic=!1;return this}function g(a,b){if(!(this instanceof g))return new g(a,b);this._el=b;this._parentScrollable=a;if(!this._parentScrollable._el)throw Error("Regions can't (yet) be created for custom Scrollables. We would need to solve the API problem of where to put a function to get the offset relative to the top of the scrollable.");
return this}function w(a,b){return b}function x(a,b){return a.scrollHeight-a.clientHeight-b}function y(a){return a.scrollHeight-a.clientHeight-a.scrollTop}function F(a,b,c,d,e,h){var z=b.scrollTop!==a.scrollTop,k=b.scrollLeft!==a.scrollLeft;c=f.filter(c,function(a){return z&&a.canScrollVertically||k&&a.canScrollHorizontally});if(!c.length)return[];if(!z)return f.map(c,function(a){return v(a,null,b.scrollLeft)});var q=b.scrollTop>a.scrollTop?l.DOWN:l.UP,r=c.concat(b),p=f.filter(r,n.dot("canScrollVertically")),
m=n.binary(Math.max),r=f.chain(p).pluck("topness").reduce(m,0).value()*(q===l.UP?1:0),p=f.chain(p).pluck("bottomness").reduce(m,0).value()*(q===l.UP?0:1),g=G(r*r,p*p,q),p=g[1],r=g[2];d=0<g[0]?H(h,b,c,d,e):[];e=0<p?f.map(c,q===l.UP?A(a,b,B,w):C(a,b,B,w)):[];a=0<r?f.map(c,q===l.DOWN?A(a,b,y,x):C(a,b,y,x)):[];return f.chain(c).zip(f.zip(d,e,a)).map(n.spread(function(a,c){var d=a.scrollLeft!==b.scrollLeft;if(!a.canScrollVertically)return v(a,null,d&&a.canScrollHorizontally?b.scrollLeft:null);var h=c.map(n.defaultValue(0)).map(u.clamp(0,
a.scrollHeight)),h=f.chain(f.zip(h,g)).map(I).reduce(u.add,0).value(),e=0<(q===l.UP?-1:1)*(h-a.scrollTop);return e||d?v(a,e?h:null,d?b.scrollLeft:null):null})).filter(f.identity).value()}function G(a,b,c){var d=Math.max(a,b),e=Math.min(a,b),h=(1-d)*e/(1+e);a=a>b||a===b&&c===l.UP;return[(1-d)/(1+e),a?d:h,a?h:d]}function v(a,b,c){return{scrollable:a.scrollable,scrollTop:b,scrollLeft:c}}function A(a,b,c,d){a=Math.max(c(a),1);var e=(a-c(b))/a;return function(a){var b=Math.max(c(a),1),b=b-e*b;1>b&&(b=
0);return d(a,b)}}function C(a,b,c,d){a=c(a);var e=c(b)-a;return function(a){var b=c(a)+e;return d(a,b)}}function H(a,b,c,d,e){var h=b.clientHeight*a;b=d(b.scrollable);var g=J(h,b);b=c.map(function(a){return a.canScrollVertically?D(e(g.region,a.scrollable)):null});var k=Math.max(0,Math.min(1,(g.offsetTop+g.height-h)/g.height));return f.zip(b,c).map(n.spread(function(b,c){return c.canScrollVertically?Math.max(0,c.scrollTop+b.offsetTop-(k*b.height+c.clientHeight*a-b.height)):null}))}function J(a,b){var c;
f.some(b,function(b){b=D(b);var e=b.offsetTop,h=b.height;return a>e&&a<=e+h?(c=b,!0):!1});return c}function D(a){return{region:a,offsetTop:a.getOffsetTop(),height:a.getHeight()}}function t(a){var b=a.getScrollInfo(),b={scrollable:a,clientWidth:b.clientWidth,clientHeight:b.clientHeight,scrollWidth:b.width,scrollHeight:b.height,scrollTop:b.top,scrollLeft:b.left,canScrollHorizontally:b.clientWidth<b.width,canScrollVertically:b.clientHeight<b.height};a=b.clientHeight/2;b.topness=a?Math.max(0,(a-b.scrollTop)/
a):0;b.bottomness=a?Math.max(0,1-(b.scrollHeight-(b.scrollTop+b.clientHeight))/a):0;return b}var I=n.spread(u.multiply);k.prototype.getScrollInfo=function(){return{top:this._el.scrollTop,left:this._el.scrollLeft,width:this._el.scrollWidth,height:this._el.scrollHeight,clientWidth:this._el.clientWidth,clientHeight:this._el.clientHeight}};k.prototype.scrollTo=function(a,b){null!=b&&(this._programmatic=!0,this._el.scrollTop=b);null!=a&&(this._programmatic=!0,this._el.scrollLeft=a)};k.prototype.getAndUnsetProgrammaticScrollMarker=
function(){var a=this._programmatic;this._programmatic=!1;return a};g.prototype.getHeight=function(){return this._el.offsetHeight};g.prototype.getOffsetTop=function(){return this._el.getBoundingClientRect().top-this._parentScrollable._el.getBoundingClientRect().top};var B=n.dot("scrollTop");m.createScrollable=k;m.createRegion=g;m.getScrollHandler=function(a){a=f.extend({},m.getScrollHandler.defaults,a);var b=t(a.self),c,d=E.enqueueCapped(requestAnimationFrame,function(){var e=t(a.self),d=f.map(a.others,
t),d=F(c,e,d,a.getRegions,a.getLinkedRegion,a.focusHeightFraction);b=e;d.length&&a.executeCommands(d)});return{handle:function(){a.self.getAndUnsetProgrammaticScrollMarker()?b=t(a.self):(c=b,d())},reset:function(){b=t(a.self)}}};m.getScrollHandler.defaults={self:null,others:null,getRegions:null,getLinkedRegion:null,focusHeightFraction:.5,executeCommands:function(a){f.forEach(a,function(a){a.scrollable.scrollTo(a.scrollLeft,a.scrollTop)})}}});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:svg-util', location = '/static/util/svg.js' */
define("util/svg",["lodash","exports"],function(d,c){function a(){this._buffer=[]}a.prototype.moveTo=function(e,b){this._buffer.push("M",e,b);return this};a.prototype.curve=function(e,b,a,c,f,d){this._buffer.push("C",e,b,a,c,f,d);return this};a.prototype.lineTo=function(a,b){this._buffer.push("L",a,b);return this};a.prototype.close=function(){this._buffer.push("Z");return this};a.prototype.build=function(){return this._buffer.join(" ")};c.svgNS="http://www.w3.org/2000/svg";c.createElement=function(a,
b){var c=document.createElementNS("http://www.w3.org/2000/svg",a);d.forEach(b||[],function(a,b){c.setAttribute(b,a)});return c};c.PathBuilder=a});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:side-by-side-diff-view', location = '/static/feature/file-content/side-by-side-diff-view/side-by-side-diff-view.soy' */
// This file was automatically generated from side-by-side-diff-view.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace stash.feature.fileContent.sideBySideDiffView.
 */

if (typeof stash == 'undefined') { var stash = {}; }
if (typeof stash.feature == 'undefined') { stash.feature = {}; }
if (typeof stash.feature.fileContent == 'undefined') { stash.feature.fileContent = {}; }
if (typeof stash.feature.fileContent.sideBySideDiffView == 'undefined') { stash.feature.fileContent.sideBySideDiffView = {}; }


stash.feature.fileContent.sideBySideDiffView.layout = function(opt_data, opt_ignored) {
  return stash.feature.fileContent.diffView.editor({editorClass: 'side-by-side-diff-editor-from'}) + '<div class="segment-connector-column" ></div>' + stash.feature.fileContent.diffView.editor({editorClass: 'side-by-side-diff-editor-to'});
};
if (goog.DEBUG) {
  stash.feature.fileContent.sideBySideDiffView.layout.soyTemplateName = 'stash.feature.fileContent.sideBySideDiffView.layout';
}
;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:side-by-side-diff-view', location = '/static/feature/file-content/side-by-side-diff-view/synchronized-scroll.js' */
define("feature/file-content/side-by-side-diff-view/synchronized-scroll","jquery lodash util/events util/function util/math util/synchronized-scroll feature/file-content/diff-view-segment-types exports".split(" "),function(v,e,y,l,w,z,x,A){function B(a){function c(){d&&(d.end=f,d.from.end=b,d.to.end=g,m.push(d))}var d=null,f=0,b=0,g=0,m=[];e.forEach(a,function(a){d&&a.segment===d.segment||(c(),d={segment:a.segment,lineInfos:[],start:f,end:-1,from:{start:b,end:-1,lineInfos:[]},to:{start:g,end:-1,lineInfos:[]}});
f++;d.lineInfos.push(a);a.segment.type!==x.ADDED&&(b++,d.from.lineInfos.push(a));a.segment.type!==x.REMOVED&&(g++,d.to.lineInfos.push(a))});c();return m}function q(a,c){this._id=a;this._editor=c;this._programmatic=!1}function u(a,c,d,e,b,g){this._editor=a;this._startIndex=c;this._endIndex=d;this._numLines=d-c;this._id=e;this._seg=b;this._cachedInfo=null;this._lineInfos=g}function C(a,c){var d,f,b;return{_linkedRegions:a,_seg:a[0]._seg,_id:"combined_"+e.pluck(a,"_id").join("_"),_scrollable:b,_setCombinedScrollable:function(a){this._scrollable=
b=a},getHeight:function(){null==d&&(d=a.map(function(a){return a.getHeight()}).reduce(l.binary(Math.max),0));return d},_getOffset:function(){null==f&&(f=c());return f},getOffsetTop:function(){return this._getOffset()-b._getScrollTop()},_invalidateCache:function(){f=d=null}}}function D(a,c){function d(a){g=w.clamp(0,c.getScrollHeight()-c.getClientHeight())(a)}this._id=a;var e=l.constant(0);c=v.extend({initialScrollTop:0,getClientHeight:e,getScrollHeight:e},c);var b=!1,g=c.initialScrollTop,m,p=v.Callbacks();
this._getScrollTop=function(){return w.clamp(0,c.getScrollHeight()-c.getClientHeight())(g)};this.scrollToNative=function(a,b){null!=b&&(d(b),m&&m(),p.fire(a,b,"native"))};this._setScrollHandler=function(a){m=a};this.getScrollInfo=function(){return{top:this._getScrollTop(),left:0,height:c.getScrollHeight(),width:0,clientHeight:c.getClientHeight(),clientWidth:0}};this.scrollTo=function(a,c){null!=c&&(b=!0,d(c),p.fire(a,c,"sync"))};this.on=function(a,b){"scroll"===a&&p.add(b)};this.getAndUnsetProgrammaticScrollMarker=
function(){var a=b;b=!1;return a}}function E(a,c,d,f,b){function g(a,b,c,d,e){return new u(a,b.start,b.end,e+"_"+b.start+"_"+b.end,c,d)}function m(a,b){var c=g(d,a.from,a.segment,a.from.lineInfos,"from"),e=g(f,b.to,b.segment,b.to.lineInfos,"to");h.push(c);k.push(e)}function p(a){return e.invoke.bind(e,a,"_invalidateCache")}var h=[],k=[];c=B(c);var n=e.reduce(c,function(a,b){if(a&&b.segment.type===x.ADDED)return m(a,b),null;a&&m(a,a);if(b.segment.type===x.REMOVED)return b;m(b,b);return null},null);
n&&m(n,n);var n=e.zip(h,k),q=e.compose(l.partialRight(e.reduce,w.add,0),l.partialRight(e.invoke,"getHeight"),e.take);b=b.includeCombinedRegions?e.reduce(n,function(a,b,c){c=e.partial(q,a,c);a.push(C(b,c));return a},[]):[];var r={};b.length?e.chain(h).zip(k,b).forEach(l.spread(function(a,b,c){r[a._id]=[b,c];r[b._id]=[a,c];r[c._id]=[a,b]})).value():e.forEach(n,l.spread(function(a,b){r[a._id]=[b];r[b._id]=[a]}));d.on("change",p(h.concat(b)));f.on("change",p(k.concat(b)));var t=p(h.concat(k,b));v(window).on("resize",
t);a.on("widgetAdded",t);a.on("widgetChanged",t);a.on("widgetCleared",t);a.on("internal.acceptedModification",t);var F=y.chain().on("stash.feature.changeset.difftree.collapseAnimationFinished",t);return{combinedSegments:c,fromRegions:h,toRegions:k,combinedRegions:b,linkedFromAndToRegions:n,linkedRegionsByRegionId:r,destroy:function(){F.destroy();v(window).off("resize",t)}}}function G(a,c,d,f,b,g){function m(a,b){var c=r(a)||[];return e.find(c,l.dotEq("_editor",b._editor))}function p(a){a.scrollable.scrollTo(a.scrollLeft,
a.scrollTop)}function h(b){a.operation(e.forEach.bind(e,b,p));a.trigger("sync-scroll")}function k(a,b,c){var d;c.includeHorizontal?d=h:(d=l.partialRight(e.map,l.unary(l.partialRight(e.omit,"scrollLeft"))),d=e.compose(h,d));return z.getScrollHandler({self:a,others:b,getRegions:q,getLinkedRegion:m,executeCommands:d,focusHeightFraction:c.focusHeightFraction})}var n={};n[c._id]=b.fromRegions;n[d._id]=b.toRegions;f&&(n[f._id]=b.combinedRegions);var q=e.compose(l.lookup(n),l.dot("_id")),r=e.compose(l.lookup(b.linkedRegionsByRegionId),
l.dot("_id"));b={includeHorizontal:!0,focusHeightFraction:g.focusHeightFraction};b={fromHandler:k(c,e.compact([d,f]),b),toHandler:k(d,e.compact([c,f]),b)};f&&(b.combinedHandler=k(f,[c,d],{includeHorizontal:!1,focusHeightFraction:g.focusHeightFraction}));return b}q.prototype.getScrollInfo=function(){return this._editor.getScrollInfo()};q.prototype.scrollTo=function(a,c){this._programmatic=this._programmatic||null!=a||null!=c;this._editor.scrollTo(a,c)};q.prototype.getAndUnsetProgrammaticScrollMarker=
function(){var a=this._programmatic;this._programmatic=!1;return a};u.prototype.getHeight=function(){return this._getCachedInfo().height};u.prototype.getOffsetTop=function(){return this._getCachedInfo().offsetTop-this._editor.getScrollInfo().top};u.prototype._getCachedInfo=function(){if(!this._cachedInfo){this._cachedInfo={height:0,offsetTop:this._editor.heightAtLine(this._startIndex,"local")};if(!this._numLines)return this._cachedInfo;var a=this._editor.heightAtLine(this._endIndex,"local");this._cachedInfo.height=
a-this._cachedInfo.offsetTop}return this._cachedInfo};u.prototype._invalidateCache=function(){this._cachedInfo=null};A.setupScrolling=function(a,c,d,f,b){b=b||{};var g=E(a,c,d,f,{includeCombinedRegions:b.includeCombinedScrollable});c=new q("from",d);var m=new q("to",f),l=0,h;b.includeCombinedScrollable&&(h=new D("combined",{getScrollHeight:function(){return e.chain(g.combinedRegions).invoke("getHeight").reduce(w.add,0).value()},getClientHeight:function(){return l}}));var k=G(a,c,m,h,g,b);d.on("scroll",
k.fromHandler.handle);f.on("scroll",k.toHandler.handle);b={combinedSegments:g.combinedSegments,combinedRegions:g.combinedRegions,combinedScrollable:h,linkedFromAndToRegions:g.linkedFromAndToRegions,destroy:function(){d.off("scroll",k.fromHandler.handle);f.off("scroll",k.toHandler.handle);g.destroy()}};h&&(h._setScrollHandler(k.combinedHandler.handle),h.setClientHeight=function(a){l=h.clientHeight=a;k.combinedHandler.reset()},e.invoke(g.combinedRegions,"_setCombinedScrollable",h),b.combinedScrollable=
h);c=e.invoke.bind(e,k,"reset");a.on("widgetCleared",c);a.on("widgetChanged",c);a.on("widgetAdded",c);return b}});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:side-by-side-diff-view', location = '/static/feature/file-content/side-by-side-diff-view/side-by-side-diff-view.js' */
define("feature/file-content/side-by-side-diff-view","jquery lodash util/events util/feature-enabled util/function util/math util/object util/performance util/svg model/direction feature/file-content/diff-hunk-map feature/file-content/diff-line-info feature/file-content/diff-view feature/file-content/diff-view-file-types feature/file-content/diff-view-segment-types feature/file-content/line-handle feature/file-content/side-by-side-diff-view/synchronized-scroll feature/file-content/stash-codemirror/search".split(" "),
function(v,f,r,D,l,E,F,w,n,x,y,G,m,k,p,H,I){function h(a,b){b.combineLinkedSegments=!0;m.apply(this,arguments)}function J(a){var b=a&&a._seg;return b&&b.type!==p.CONTEXT&&0<a._numLines}function t(a){return a.conflicted||Boolean(a._seg.lines[0].conflictMarker)}function K(a){function b(a){if(!(this instanceof b))return new b(a);this._regions=[a];this.conflicted=!0;this.classesInfo={lineType:a._seg.type,conflictMarker:a._seg.lines[0].conflictMarker};this.getOffsetTop=function(){return this._regions[0].getOffsetTop()};
this.getHeight=function(){return f.chain(this._regions).invoke("getHeight").reduce(E.add).value()};this.push=function(a){this._regions.push(a)}}return a.reduce(function(a,c){var e=a.previous,g=e&&f.some(e,t),q=f.some(c,t);if(q&&g)return f.forEach(e,function(a,b){a.push(c[b])}),a;q&&(c=f.map(c,b));a.previous=c;a.regions.push(c);return a},{previous:null,regions:[]}).regions.filter(function(a){return a.some(l.or(J,t))})}function L(a,b,d){function c(a,b){if(a.region.classesInfo)return a.region.classesInfo;
var d=a.region._lineInfos[0],c=b.region._lineInfos[0];return d?{conflictMarker:d.line.conflictMarker,lineType:d.lineType}:{conflictMarker:null,lineType:c.lineType}}var e,g=b.offsetHeight||parseFloat((e=window.getComputedStyle(b)).height);e=b.offsetWidth||parseFloat(e.width);var q=e+1,z=.4*e,A=.6*e;for(a=a.map(function(a){return a.map(function(a){var b=a.getOffsetTop(),d=b+a.getHeight();return{region:a,top:b+.5,bottom:d+.5,above:0>b,inside:0<d&&b<g,below:d>g}})}).filter(function(a){return a.some(l.dot("inside"))||
a.some(l.dot("above"))&&a.some(l.dot("below"))}).map(l.spread(function(a,b){var e=(new n.PathBuilder).moveTo(-1,a.top).curve(z,a.top,A,b.top,q,b.top).lineTo(q,b.bottom).curve(A,b.bottom,z,a.bottom,-1,a.bottom).close().build(),g;g=c(a,b);var h=c(b,a);g=d(g.lineType,g.conflictMarker,!1)+" "+d(h.lineType,h.conflictMarker,!1);g=f.unique(g.split(/\s+/)).join(" ");return{path:e,extraClasses:g}}));b.hasChildNodes();)b.removeChild(b.firstChild);e=f.once(function(a){var b=[{"class":"removed",offset:"0%"},
{"class":"removed",offset:"30%"},{"class":"added",offset:"70%"},{"class":"added",offset:"100%"}],b=f.map(b,n.createElement.bind(n,"stop"));return f.reduce(b,function(a,b){a.appendChild(b);return a},n.createElement("linearGradient",{id:a}))});a=a.map(function(a){var b={"class":"segment-connector "+a.extraClasses,d:a.path};a=a.extraClasses;-1!==a.indexOf("added")&&-1!==a.indexOf("removed")&&(b.fill="url(#added-and-removed-svg-gradient)");return n.createElement("path",b)}).concat(e("added-and-removed-svg-gradient")).reduce(function(a,
b){a.appendChild(b);return a},document.createDocumentFragment());b.appendChild(a)}var B=p.ADDED,M=p.CONTEXT,C=p.REMOVED;F.inherits(h,m);h.defaults=m.defaults;h.prototype.init=function(){var a=this;if(this._$container){this._$container.addClass("side-by-side-diff");this._$container.append(stash.feature.fileContent.sideBySideDiffView.layout());this.fromEditorEl=this._$container.find(".side-by-side-diff-editor-from");this.toEditorEl=this._$container.find(".side-by-side-diff-editor-to");var b=this._options.commentContext&&
this._options.commentContext.getGutterId();b&&this.registerGutter(b,{weight:100});this.registerGutter("line-number-from",{weight:200,fileType:k.FROM});this.registerGutter("line-number-to",{weight:200,fileType:k.TO});this._fromEditor=this._createEditor({gutterFilter:function(a){return!a.fileType||a.fileType===k.FROM}},this.fromEditorEl);this._toEditor=this._createEditor({gutterFilter:function(a){return!a.fileType||a.fileType===k.TO}},this.toEditorEl);D.getFromProvider("source.codemirror").then(function(b){if(b){b=
l.dot("hunks.0.segments.0")(a._data);var c=l.dot("hunks.0.segments.0.lines.0.line")(a._data),e=l.dot("hunks.0.segments.1.lines.0.line")(a._data);a._syntaxHighlighting(null!==a._options.fileChange.srcPath?a._options.fileChange.srcPath.name:a._options.fileChange.path.name,b.type===B?e:c,a._fromEditor);a._syntaxHighlighting(a._options.fileChange.path.name,b.type===C&&e?e:c,a._toEditor)}});this._lineInfos=G.convertToLineInfos(this._data,this._options);this._scrollingReady.always(function(){a._modifyDiff("INITIAL",
a._data,a._lineInfos);a._setupFindScrollIntoViewFunction(a._fromEditor,k.FROM);a._setupFindScrollIntoViewFunction(a._toEditor,k.TO)});this.on("internal-load",function(){this._syncScrollingInfo&&(this.setupHunkmaps(this._syncScrollingInfo.linkedFromAndToRegions),this._initSegmentLinking(this._syncScrollingInfo.linkedFromAndToRegions),this.on("internal-change",function c(){this._whenOpDone(this._scrollEditorToFirstChange.bind(this));this.off("internal-change",c)}))});b=a.refresh.bind(a);r.on("stash.feature.sidebar.expandEnd",
b);r.on("stash.feature.sidebar.collapseEnd",b);r.on("stash.feature.changeset.difftree.collapseAnimationFinished",b);m.prototype.init.call(this)}};h.prototype.destroy=function(){m.prototype.destroy.call(this);this._toEditor=this._fromEditor=null};h.prototype._acceptModification=function(a,b,d){function c(a,b,d){var c;f.forEach(a,function(a,e){var f=b.getLineHandle(e);a._setHandle(d,new H(d,a.lineType,a.lineNumber,f));c&&c.segment!==a.segment&&c.lineType===p.CONTEXT&&a.lineType===p.CONTEXT&&b.addLineClass(f,
"wrap","paired-with-change");c=a})}if("INITIAL"!==a)throw Error("Unrecognized change type: "+a);a=f.filter(d,function(a){return a.lineType!==B});d=f.filter(d,function(a){return a.lineType!==C});this._fromEditor.setValue(m._combineTexts(a));this._toEditor.setValue(m._combineTexts(d));c(a,this._fromEditor,k.FROM);c(d,this._toEditor,k.TO)};var u={};u[k.FROM]="_fromEditor";u[k.TO]="_toEditor";h.prototype._editorForHandle=function(a){return this[u[a.fileType]]};h.prototype._getFocusSegment=function(a){var b=
this._fromEditor.getScrollInfo().clientHeight*this._options.focusPoint;if(a>b)return null;var d=b+this._syncScrollingInfo.combinedScrollable._getScrollTop()-a+1,d=Math.ceil(d);return(f.find(this._syncScrollingInfo.combinedRegions,function(a){return a._getOffset()<=d&&a._getOffset()+a.getHeight()>d})||f.last(this._syncScrollingInfo.combinedRegions))._seg};h.prototype._setFocusSegment=function(a){function b(a,b){return f.compact(a.map(function(a){return a.handles[b]}))}var d=f.filter(this._syncScrollingInfo.combinedRegions,
function(b){return f.contains(a,b._seg)}),c=this._fromEditor.getScrollInfo().clientHeight*this._options.focusPoint;this._scrollToSourcePosition(null,d[0]._getOffset()-c);var e=f.chain(d).pluck("_linkedRegions").flatten().pluck("_lineInfos").flatten().uniq().value(),g=this;this.operation(function(){g._markLinesFocused([{editor:g._fromEditor,handles:b(e,k.FROM)},{editor:g._toEditor,handles:b(e,k.TO)}])})};h.prototype._findNextAnchor=function(a,b,d){var c=f.groupBy(b,l.dot("_fileType"));b=c.FROM&&this._findNextAnchorInEditor(this._fromEditor,
c.FROM,a,d);d=c.TO&&this._findNextAnchorInEditor(this._toEditor,c.TO,a,d);return b&&d?a===x.UP&&d.offset<b.offset||a===x.DOWN&&d.offset>=b.offset?b:d:b||d||null};h.prototype.setupHunkmaps=function(a){function b(a,b,c){var g=a.getScrollInfo(),h=Math.max(0,g.height*c-g.clientHeight*e);a=f.findIndex(b,function(a){var b=g.top+a.getOffsetTop();return b<=h&&b+a.getHeight()>h});b=b[a];a=d._syncScrollingInfo.combinedRegions[a];c=d._syncScrollingInfo.combinedScrollable.getScrollInfo();b=(h-(g.top+b.getOffsetTop()))/
b.getHeight();b=c.top+a.getOffsetTop()+b*a.getHeight();d._scrollToSourcePosition(0,b)}var d=this,c=a.map(f.first);a=a.map(f.last);var e=this._options.focusPoint,g=new y(this.fromEditorEl,c,{scrollToFn:f.partial(b,this._fromEditor,c)}),h=new y(this.toEditorEl,a,{scrollToFn:f.partial(b,this._toEditor,a)}),c=f.debounce(f.invoke.bind(f,[g,h],"redraw"),100);this._addDestroyable(g);this._addDestroyable(h);this.on("widgetAdded",c);this.on("widgetChanged",c);this.on("widgetCleared",c);this.on("resize",c);
this._fromEditor.on("scroll",function(a){g.diffScrolled(a.getScrollInfo())});this._toEditor.on("scroll",function(a){h.diffScrolled(a.getScrollInfo())});this._addDestroyable(function(){d._fromEditor=null;d._toEditor=null})};h.prototype._attachScrollBehavior=function(){var a=this,b=this._fromEditor,d=this._toEditor,c=this._lineInfos;if(!b)return v.Deferred().reject();var e=I.setupScrolling(this,c,b,d,{includeCombinedScrollable:!0,focusHeightFraction:a._options.focusPoint});this._syncScrollingInfo=e;
var g=a._$container.children(".diff-editor, .segment-connector-column"),f,b=this._requestWindowScrolls({scrollSizing:function(){return e.combinedScrollable.getScrollInfo()},scroll:function(a,b){null!=b&&e.combinedScrollable.scrollToNative(null,b)},resize:function(b,c){f!==c&&(f=c,e.combinedScrollable.setClientHeight(c),g.height(c),a.refresh())},onSizeChange:function(b){a.on("resize",b)}});this._addDestroyable(e);return b};h.prototype._initSegmentLinking=function(a){var b=v(".segment-connector-column"),
d=n.createElement("svg",{});b.append(d);var c=L.bind(null,K(a),d,this._getLineClasses);a=w.enqueueCapped(requestAnimationFrame,function(){d.setAttribute("height",b.height());d.setAttribute("width",b.width());c()});var e=w.enqueueCapped(requestAnimationFrame,c);this.on("sync-scroll",c);this.on("widgetAdded",e);this.on("widgetChanged",e);this.on("widgetCleared",e);this.on("resize",a);a()};h.prototype.scrollHandleIntoFocus=function(a){var b=this._editorForHandle(a),d=b.getScrollInfo(),c=a.fileType===
k.FROM?0:1;a.lineType===M&&a.fileType===k.TO&&(b=this._fromEditor,c=0);var e=f.findIndex(this._syncScrollingInfo.linkedFromAndToRegions,function(b){return b[c]._startIndex<=a.lineNumber&&b[c]._endIndex>a.lineNumber}),g=this._syncScrollingInfo.linkedFromAndToRegions[e][c],e=this._syncScrollingInfo.combinedRegions[e],g=b.heightAtLine(a.lineNumber)-b.heightAtLine(g._startIndex),g=this._syncScrollingInfo.combinedScrollable.getScrollInfo().top+e.getOffsetTop()+g;this._scrollToFocusedOffset(g,d,b)};h.prototype._setupFindScrollIntoViewFunction=
function(a,b){var d=this;a.setOption("scrollLineIntoViewFunc",function(a){d.scrollHandleIntoFocus(d.getLineHandleFromNumber(a.from.line,b))})};h.prototype._scrollEditorToFirstChange=function(){var a=this._findNextChange(null,this._allSegments);a&&this._setFocusSegment(a)};return h});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:skipped-container', location = '/static/feature/file-content/skipped-container/skipped-container.soy' */
// This file was automatically generated from skipped-container.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace stash.feature.fileContent.
 */

if (typeof stash == 'undefined') { var stash = {}; }
if (typeof stash.feature == 'undefined') { stash.feature = {}; }
if (typeof stash.feature.fileContent == 'undefined') { stash.feature.fileContent = {}; }


stash.feature.fileContent.skippedContainer = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<div class="skipped-container' + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '>' + ((opt_data.hasContentAbove) ? '<div class="content-above"></div>' : '') + ((opt_data.content) ? soy.$$filterNoAutoescape(opt_data.content) : '') + ((opt_data.canShowMore) ? '<div class="showmore" title="' + soy.$$escapeHtml(opt_data.showMoreTooltip) + '">' + ((opt_data.hasContentAbove && opt_data.hasContentBelow) ? '<span>' + soy.$$escapeHtml("Show more") + '</span>' : '') + '</div>' : '') + ((opt_data.hasContentBelow) ? '<div class="content-below"></div>' : '') + '</div>';
};
if (goog.DEBUG) {
  stash.feature.fileContent.skippedContainer.soyTemplateName = 'stash.feature.fileContent.skippedContainer';
}
;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:diff-view-context', location = '/static/feature/file-content/diff-view-context/diff-view-context-internal.js' */
define("feature/file-content/diff-view-context/diff-view-context-internal","jquery lodash util/function model/file-change-types feature/file-content/diff-view-segment-types exports".split(" "),function(n,h,t,q,e,k){var u={destinationLine:1,destinationSpan:0,sourceLine:1,sourceSpan:0},r=t.eq(e.ADDED);k.isAdded=r;k.getSeparatedHunkHtml=function(b,f,l){function d(a){return{line:g?a.destinationLine:a.sourceLine,span:g?a.destinationSpan:a.sourceSpan}}var c;a:switch(f){case q.ADD:c=e.ADDED;break a;case q.DELETE:c=
e.REMOVED;break a;default:c=e.CONTEXT}var g=r(c);return h.map(h.zip([u].concat(b),b.concat({})),function(a){var b=d(a[0]),m=d(a[1]),p=1<m.line,v=0<b.span,b=b.line+b.span,m=m.line-1;g?a=0:(a=a[0],a=a.sourceLine+a.sourceSpan-(a.destinationLine+a.destinationSpan));return l(b,m,a,c,p,v)})};k.fetchContext=function(b,f,l,d,c){function g(a,p,b){return a&&h.extend({},a,{lines:a.lines.slice(p,b)})}var a=isNaN(f)?c.maxLimit:f-b+1,e=function(c){return n.when(0===b?null:c(b,d+(f?0:1)),f?c(b+a-d,d):null).then(function(a,
b){if(b)return a?{startSep:a.start+d,endSep:b.start,contexts:[a,b]}:{startSep:0,endSep:b.start,contexts:[null,b]};var c=a.lines.length>d;return{startSep:a.start+a.lines.length+(c?-1:0),contexts:c?[g(a,0,-1),null]:[a]}})};return a<c.maxLimit?l(b,a).then(function(b){return a<=2*d?n.Deferred().resolve({startSep:0,endSep:0,contexts:[b]}):e(function(a){return n.Deferred().resolve({start:a,lines:b.lines})}).then(function(a){return h.extend({},a,{contexts:[g(a.contexts[0],0,d),g(a.contexts[1],-d)]})})}):
e(l)};k.toHunks=function(b,f){return function(e){var d=[];h.each(e.contexts,function(c){c&&d.push({segments:[{type:f,lines:h.map(c.lines,function(b){return{line:b.text}})}],sourceLine:c.start+1,destinationLine:c.start+1-b,isLastPage:c.isLastPage})});return d.length?d:""}}});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:diff-view-context', location = '/static/feature/file-content/diff-view-context/diff-view-context.soy' */
// This file was automatically generated from diff-view-context.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace stash.feature.fileContent.
 */

if (typeof stash == 'undefined') { var stash = {}; }
if (typeof stash.feature == 'undefined') { stash.feature = {}; }
if (typeof stash.feature.fileContent == 'undefined') { stash.feature.fileContent = {}; }


stash.feature.fileContent.hunkSeparator = function(opt_data, opt_ignored) {
  return '' + stash.feature.fileContent.skippedContainer({hasContentAbove: opt_data.isAbove, hasContentBelow: opt_data.isBelow, canShowMore: true, showMoreTooltip: opt_data.tooltip, extraAttributes: 'data-line-start="' + soy.$$escapeHtml(opt_data.lineStart) + '"' + ((opt_data.lineEnd) ? ' data-line-end="' + soy.$$escapeHtml(opt_data.lineEnd) + '"' : '') + ' data-dest-offset="' + soy.$$escapeHtml(opt_data.destOffset) + '" data-change-type="' + soy.$$escapeHtml(opt_data.changeType) + '" data-below="' + soy.$$escapeHtml(opt_data.isBelow) + '" data-above="' + soy.$$escapeHtml(opt_data.isAbove) + '"'});
};
if (goog.DEBUG) {
  stash.feature.fileContent.hunkSeparator.soyTemplateName = 'stash.feature.fileContent.hunkSeparator';
}
;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:diff-view-context', location = '/static/feature/file-content/diff-view-context/diff-view-context.js' */
define("feature/file-content/diff-view-context","aui jquery lodash stash/api/util/navbuilder util/ajax util/dom-event util/navigator model/file-change feature/file-content/diff-view-context/diff-view-context-internal exports".split(" "),function(a,p,m,n,q,r,e,d,f,g){function k(a,b,f,u,c,h){return c||h?stash.feature.fileContent.hunkSeparator({tooltip:v,lineStart:a,lineEnd:b,destOffset:f,changeType:u,isBelow:c,isAbove:h}):""}var v=e.isMac()?"Click to reveal a few more lines\nCmd + Click to reveal them all":
"Click to reveal a few more lines\nCtrl + Click to reveal them all";a=n.parse(location.href).getQueryParamValue("context");var l={maxLimit:e.isIE()?1E3:5E3,maxContext:a&&parseInt(a,10)||10};g.attachExpandContext=function(a,b,e){b=new d(b);return a.on("click",".skipped-container:not(.loading)",function(a){a.preventDefault();var c=p(a.currentTarget);c.addClass("loading");c.find(".showmore span").html("\x26nbsp;");var h=c.find(".showmore").spin("small"),g=c.data("change-type"),d=c.data("dest-offset");a=r.isCtrlish(a)?
l.maxLimit-1:l.maxContext;var k=c.data("line-start")-1,t=c.data("line-end")-1;f.fetchContext(k,t,function(a,e){var d=b.getDiff()&&b.getDiff().properties||{};return q.rest({statusCode:{200:function(b,c,e,d){if(d&&d.message&&0<d.message.replace(/,/g,"").indexOf(" "+a+" "))return{promise:function(){return{lines:[]}}}}},url:n.currentRepo().browse().path(b.getSrcPath()&&""!==b.getSrcPath().toString()?b.getSrcPath():b.getPath()).at(f.isAdded(g)?d.toHash||b.getCommitRange().getUntilRevision().getId():d.fromHash||
b.getCommitRange().getSinceRevision().getId()).withParams({start:a,limit:e}).build()}).then(m.identity).always(function(){h.spinStop()}).fail(function(){c.removeClass("loading")})},a,l).then(f.toHunks(d,g)).then(m.bind(e,null,b,c))})};g.getSeparatedHunkHtml=function(a,b){return f.getSeparatedHunkHtml(a,b,k)}});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:unified-diff-view', location = '/static/feature/file-content/unified-diff-view/unified-diff-view.js' */
define("feature/file-content/unified-diff-view","jquery lodash util/events util/feature-enabled util/function util/object model/file-change-types feature/file-content/diff-line-info feature/file-content/diff-view feature/file-content/diff-view-context feature/file-content/diff-view-file-types feature/file-content/diff-view-options feature/file-content/diff-view-segment-types feature/file-content/line-handle feature/file-content/text-view/attach-simple-scroll-behavior feature/file-content/stash-codemirror/search".split(" "),
function(u,g,v,w,n,x,k,l,f,p,q,y,r,z,A){function B(a){var b=a.destinationLine,c=a.sourceLine;a.segments[0].lines=g.map(a.segments[0].lines,function(a){a.destination=b++;a.source=c++;return a});return a}function C(a,b){if(b.linesAdded){var c=b.diff,e=p.getSeparatedHunkHtml(c.hunks,a._options.fileChange.type),d,h=[],m,f;b.eachLine(function(a){var b=a.handles.FROM||a.handles.TO;a.hunk!==f&&(f=a.hunk,h.push(b));m=b}).done(function(){switch(b.type){case "INSERT":var f=a._editor.getLineNumber(h[0]._handle),
k=0===f,l=a._editor.lastLine()-b.linesAdded,f=f>l;1<c.hunks.length?(h.shift(),e.shift(),e.pop(),m=void 0):(k||(h.shift(),e.shift()),f?d=e.pop():(e.pop(),m=void 0));break;case "INITIAL":h.length===e.length-1&&(d=e.pop());break;default:throw Error("Unrecognized change type: "+b.type);}a.operation(function(){g.each(g.zip(e,h),n.spread(g.partial(t,a,!0)));d&&!a._isEntireFile()&&t(a,!1,d,m)})})}}function t(a,b,c,e){if(c){c=u(c);var d=a.addLineWidget(e,c[0],{coverGutter:!0,noHScroll:!0,above:b});b&&a.addLineClass(e,
"wrap","first-line-of-hunk");c.data("widget",d)}}function D(a){a&&a.clear()}function d(a,b){f.apply(this,arguments)}x.inherits(d,f);d.defaults=f.defaults;d.prototype.init=function(){if(this._$container){var a=this;this._$container.addClass("unified-diff");this.on("internal-change",g.partial(C,this));this._options.isExcerpt||p.attachExpandContext(this._$container,this._options.fileChange,this._expandContextLines);this._$container.append(stash.feature.fileContent.unifiedDiffView.layout());var b=this._options.commentContext&&
this._options.commentContext.getGutterId();b&&this.registerGutter(b,{weight:100});this.registerGutter("line-number-from",{weight:200});this.registerGutter("line-number-to",{weight:300});this.registerGutter("gutter-border",{weight:1500});this._editor=this._createEditor({},this._$container.children(".diff-editor"));b="side-by-side"===y.getOptions().diffType;this._isEntireFile()&&b&&w.getFromProvider("source.codemirror").then(function(b){b&&(b=n.dot("hunks.0.segments.0.lines.0.line")(a._data),a._syntaxHighlighting(a._options.fileChange.path.name,
b,a._editor))});this._addDestroyable(function(){a._editor=null});this._scrollingReady.always(function(){a._editor.setOption("scrollLineIntoViewFunc",function(b){b=a._editor.getLineHandle(b.from.line)._stashHandle;a.scrollHandleIntoFocus(b)});a._modifyDiff("INITIAL",a._data,l.convertToLineInfos(a._data,a._options))});f.prototype.init.call(this)}};d.prototype._acceptModification=function(a,b,c,e){e=e||0;var d=this._editor;b=f._combineTexts(c);switch(a){case "INITIAL":d.setValue(b);break;case "INSERT":d._insert(b,
e,!0);break;default:throw Error("Unrecognized change type: "+a);}g.each(c,function(a,b){var c=new z(void 0,a.lineType,a.lineNumber,d.getLineHandle(b+e));a.lineType!==r.ADDED&&a._setHandle(q.FROM,c);a.lineType!==r.REMOVED&&a._setHandle(q.TO,c)})};d.prototype._getFocusSegment=function(a){var b=this._editor,c=b.getScrollInfo();a=Math.ceil(c.clientHeight*this._options.focusPoint)-Math.floor(a);if(0>a)return null;c=Math.min(b.lastLine(),b.lineAtHeight(c.top+a+1,"local"));b=b.getLineHandle(c);return(b=
this._internalLines[b._stashHandle.lineType][b._stashHandle.lineNumber])&&b.segment};d.prototype._setFocusSegment=function(a){var b=a[0];this.scrollHandleIntoFocus(this.getLineHandle(b.lines&&b.lines[0]));a=g.chain(a).pluck("lines").flatten().map(this.getLineHandle).value();this._markLinesFocused([{editor:this._editor,handles:a}])};d.prototype._getFocusLine=function(){var a=this._editor,b=a.getScrollInfo(),c=this._$fileToolbar&&this._$fileToolbar.outerHeight(),c=this._$container[0].getBoundingClientRect().top-
c,d=Math.ceil(b.clientHeight*this._options.focusPoint)-(this._editorInnerOffset()-Math.abs(c)),c=0>=c?d:0,b=Math.min(a.lastLine(),a.lineAtHeight(b.top+c+1,"local"));return a.getLineHandle(b)._stashHandle};d.prototype._findNextAnchor=function(a,b,c){return this._findNextAnchorInEditor(this._editor,b,a,c)};d.prototype._attachScrollBehavior=function(){return A(this,this._editor,this._$container.children(".diff-editor"))};d.prototype._editorForHandle=function(){return this._editor};d.prototype._isEntireFile=
function(){return(this._options.fileChange.type===k.ADD||this._options.fileChange.type===k.DELETE)&&!this._options.isExcerpt};d.prototype._expandContextLines=function(a,b,c){if(this._editor){var d=this.getLineHandle(b);a=this._editor.getLineNumber(d._handle);var f=this._editor.lastLine()===a?a+1:a;this.removeLineClass(d,"wrap","first-line-of-hunk");c.forEach(function(a){a.sourceSpan=a.destinationSpan=a.segments[0].lines.length;B(a)});c.length&&c[0].segments.length&&c[0].segments[0].lines.length&&
(d={hunks:c},this._modifyDiff("INSERT",d,l.convertToLineInfos(d,this._options),f));D(b.data("widget"));v.trigger("stash.feature.fileContent.diffViewExpanded",null,{$context:b,hunk:c,at:a})}};return d});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:unified-diff-view', location = '/static/feature/file-content/unified-diff-view/unified-diff-view.soy' */
// This file was automatically generated from unified-diff-view.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace stash.feature.fileContent.unifiedDiffView.
 */

if (typeof stash == 'undefined') { var stash = {}; }
if (typeof stash.feature == 'undefined') { stash.feature = {}; }
if (typeof stash.feature.fileContent == 'undefined') { stash.feature.fileContent = {}; }
if (typeof stash.feature.fileContent.unifiedDiffView == 'undefined') { stash.feature.fileContent.unifiedDiffView = {}; }


stash.feature.fileContent.unifiedDiffView.layout = function(opt_data, opt_ignored) {
  return '' + stash.feature.fileContent.diffView.editor(null);
};
if (goog.DEBUG) {
  stash.feature.fileContent.unifiedDiffView.layout.soyTemplateName = 'stash.feature.fileContent.unifiedDiffView.layout';
}


stash.feature.fileContent.unifiedDiffView.lineNumbers = function(opt_data, opt_ignored) {
  return '<div class="diff-line-numbers" data-line-type="' + soy.$$escapeHtml(opt_data.lineType) + '" data-line-number="' + soy.$$escapeHtml(opt_data.lineNum) + '"><span class="from">' + soy.$$escapeHtml(opt_data.fromLine) + '</span><span class="to">' + soy.$$escapeHtml(opt_data.toLine) + '</span>' + ((opt_data.marker) ? '<span class="diff-change-marker">' + soy.$$escapeHtml(opt_data.marker) + '</span>' : '') + '</div>';
};
if (goog.DEBUG) {
  stash.feature.fileContent.unifiedDiffView.lineNumbers.soyTemplateName = 'stash.feature.fileContent.unifiedDiffView.lineNumbers';
}
;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:diff-handler', location = '/static/feature/file-content/handlers/diff-handler.js' */
require("stash/api/feature/files/file-handlers").register({weight:5E3,handle:function(f){return require("feature/file-content/handlers/diff-handler").handler.apply(this,arguments)}});
define("feature/file-content/handlers/diff-handler","jquery lodash stash/api/feature/files/file-handlers stash/api/util/navbuilder util/ajax util/function util/promise model/file-change model/file-change-types model/file-content-modes model/path feature/comments feature/file-content/binary-diff-view feature/file-content/binary-view feature/file-content/content-message feature/file-content/diff-view-options feature/file-content/diff-view-options-panel feature/file-content/handlers/diff-handler/diff-handler-internal feature/file-content/request-diff feature/file-content/side-by-side-diff-view feature/file-content/unified-diff-view exports".split(" "),function(f,
q,z,A,r,B,w,h,t,C,D,n,E,F,u,x,G,y,H,I,J,K){function L(a,b,c){var f=a.$container,d=new h(a.fileChange);return a.commentMode!==n.commentMode.NONE?(b=c?q.groupBy(c.values,function(a){return a.anchor.line?"line":"file"}):{line:b.lineComments||[],file:b.fileComments||[]},n.bindContext(f,new n.DiffAnchor(d),{lineComments:b.line,fileComments:b.file,commentMode:a.commentMode,relevantContextLines:a.relevantContextLines,diffViewOptions:a.diffViewOptions,$toolbar:a.$toolbar})):null}function M(a,b,c,k){var d=
z.builtInHandlers,g=a.$container,l=new h(a.fileChange);if(b.binary||F.treatTextAsBinary(b.destination&&b.destination.extension))return c=new E(b,a),c.handlerID=c.isDiffingImages()?d.DIFF_IMAGE:d.DIFF_BINARY,c;if(!b||!b.hunks||!b.hunks.length)return u.renderEmptyDiff(g,b,l),{handlerID:d.DIFF_EMPTY,extraClasses:"empty-diff message-content"};if(b.hunks[b.hunks.length-1].truncated)return u.renderTooLargeDiff(g,b,l,k),{handlerID:d.DIFF_TOO_LARGE,extraClasses:"too-large-diff message-content"};a=new (k?
I:J)(b,f.extend({commentContext:c},a));c&&c.setDiffView(a);q.defer(a.init.bind(a));a.handlerID=k?d.DIFF_TEXT_SIDE_BY_SIDE:d.DIFF_TEXT_UNIFIED;return a}K.handler=function(a){function b(){return"side-by-side"===x.get("diffType")&&m}function c(a){var b=new h(a.fileChange),e=b.getRepository(),b=b.getCommitRange(),e=A.rest().project(e.getProject().getKey()).repo(e.getSlug()),e=b.getPullRequest()?e.pullRequest(b.getPullRequest().getId()):e.commit(b),e=e.comments().withParams({avatarSize:stash.widget.avatarSizeInPx({size:a.avatarSize||
"medium"}),path:(new D(a.fileChange.path)).toString(),markup:!0}).build();a=a.statusCode||r.ignore404WithinRepository();f.extend(a,{401:function(){return f.Deferred().resolve({start:0,size:0,values:[],isLastPage:!0,filter:null}).promise()}});a=r.rest({url:e,statusCode:a});return a.then(function(a){return a.errors&&a.errors.length?f.Deferred().rejectWith(this,[this,null,null,a]):a}).promise(a)}if(a.contentMode!==C.DIFF)return!1;var k=a.$container,d=f('.diff-type-options .aui-dropdown2-radio[data-value\x3d"side-by-side"]'),
g=new h(a.fileChange),l=g.getType(),m=!(l===t.ADD||l===t.DELETE||a.isExcerpt);a.withComments=a.commentMode!==n.commentMode.NONE;b()&&(a.contextLines=1E4,a.withComments=!1);var p=b()?c:f.noop,p=q.compact([H(g,a),p(a)]);return w.whenAbortable.apply(w,p).thenAbortable(function(c,h){g.getType()&&g.getType!==t.UNKNOWN||(g.setType(t.guessChangeTypeFromDiff(c)),a.fileChange=g.toJSON());m=l?m:!y.isAddedOrRemoved(c);m?d.removeClass("aui-dropdown2-disabled").attr("aria-disabled",!1):m||d.tooltip({gravity:"e",
delayIn:0,title:"data-file-type-compatibility"});var e=y.optionsOverride(x,m,a.isExcerpt);a.relevantContextLines=a.relevantContextLines||10;a.diffViewOptions=e;g.getConflict()&&u.renderConflict(k,g);var p=new G(f(document),e),r=L(a,c,h),v=M(a,c,r,b());return{handlerID:v.handlerID,extraClasses:v.extraClasses,destroy:function(){n.unbindContext(a.$container);q.chain([v,p,e]).compact().filter(B.dot("destroy")).invoke("destroy").value()}}},function(a,b,c,d){if("abort"===c)return f.Deferred().resolve();
u.renderErrors(k,d);return f.Deferred().resolve({extraClasses:"diff-error message-content"})})}});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:diff-handler', location = '/static/feature/file-content/handlers/diff-handler/diff-handler-internal.js' */
define("feature/file-content/handlers/diff-handler/diff-handler-internal",["lodash","feature/file-content/diff-view-segment-types","exports"],function(c,d,e){e.isAddedOrRemoved=function(a){function b(b){return c.all(a.hunks,function(a){return c.all(a.segments,function(a){return a.type===b})})}return b(d.ADDED)||b(d.REMOVED)};e.optionsOverride=function(a,b,c){return a.proxy({diffType:b?void 0:"unified",hideComments:c?!1:void 0})}});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:file-content', location = '/static/feature/file-content/file-content.js' */
define("feature/file-content","aui jquery lodash memoir require stash/api/feature/files/file-handlers stash/api/util/navbuilder util/deprecation util/dom-event util/events util/promise model/content-tree-node-types model/file-change-types model/file-content-modes feature/comments feature/file-content/ediff".split(" "),function(m,f,k,x,y,z,q,n,A,r,t,B,v,p,C,u){function D(b,a){var d=q.currentRepo().browse().path(b);a&&!a.isDefault()&&(d=d.at(a.getId()));return d.raw().build()}function c(b,a){var d=
this;this._id=a||void 0;this._containerSelector=b;r.on("stash.feature.filehistory.revisionSelected",function(a){this===d.untilRevisionPicker&&r.trigger("stash.feature.filecontent.untilRevisionChanged",d,a)});this._lastInitPromise=t.thenAbortable(f.Deferred().resolve())}function w(b,a,d){for(var e="",c=0,f=0;f<a.length;f++)var h=a[f],e=e+(m.escapeHtml(b.substring(c,h.start))+'\x3cspan class\x3d"'+d+'"\x3e'+m.escapeHtml(b.substring(h.start,h.end))+"\x3c/span\x3e"),c=h.end;c<b.length&&(e+=m.escapeHtml(b.substring(c)));
return e}c.commentMode=C.commentMode;c.diffPreset={contentMode:p.DIFF,untilRevisionPicker:!0,rawLink:!1,sourceLink:!1,modeToggle:!0,changeTypeLozenge:!1,changeModeLozenge:!1,breadcrumbs:!1,commentMode:c.commentMode.NONE};c.sourcePreset={contentMode:p.SOURCE,untilRevisionPicker:!0,rawLink:!0,sourceLink:!1,modeToggle:!0,changeTypeLozenge:!1,changeModeLozenge:!1,breadcrumbs:!1,commentMode:c.commentMode.NONE};c.defaults={contentMode:p.SOURCE,untilRevisionPicker:!1,rawLink:!1,sourceLink:!1,modeToggle:!1,
changeTypeLozenge:!1,changeModeLozenge:!1,fileIcon:!1,breadcrumbs:!1,scrollPaneSelector:void 0,commentMode:c.commentMode.REPLY_ONLY,pullRequestDiffLink:!1,toolbarWebFragmentLocationPrimary:null,toolbarWebFragmentLocationSecondary:null,asyncDiffModifications:!0,attachScroll:!0};c.prototype.initToolbarItems=function(b,a){var d=f(this._containerSelector),c=a.getCommitRange().getUntilRevision(),c=f(stash.feature.fileContent.main(f.extend({id:this._id,preloaded:!!a.getDiff(),sourceUrl:this._options.sourceUrl||
this._options.modeToggle?q.currentRepo().browse().path(a.getPath()).at(b.getDisplayId()).until(c&&c.getId()).build():"",diffUrl:this._options.modeToggle?q.currentRepo().diff(a).at(b.getDisplayId()).build():"",fileChange:a.toJSON()},this._options)));this.$self&&this.$self.remove();this.$self=c.appendTo(d);d=this.$toolbar=c.children(".file-toolbar");this.$contentView=c.children(".content-view");this._initCommands();this.$breadcrumbs=this._options.breadcrumbs?d.find(".breadcrumbs"):null;this.$changeTypeLozenge=
this._options.changeTypeLozenge?d.find(".change-type-placeholder"):null;this.$changeModeLozenge=this._options.changeModeLozenge?d.find(".change-mode-placeholder"):null;this.$viewSource=this._options.sourceLink?d.find(".source-view-link").tooltip({gravity:"ne"}):null;this._options.pullRequestDiffLink&&d.find(".pull-request-diff-outdated-lozenge").tooltip({gravity:"ne"})};c.prototype._initCommands=function(){var b=this.$contentView,a=this.$toolbar;"self"===this._options.scrollPaneSelector&&b.addClass("scroll-x");
this.untilRevisionPicker&&this.untilRevisionPicker.destroy();this.untilRevisionPicker=this._options.untilRevisionPicker?new (y("feature/file-content/file-history"))(a.find(".until-changeset-button"),"until-changeset"):null;this.$viewRaw=this._options.rawLink?a.find(".raw-view-link"):null;this.$modeToggle=this._options.modeToggle?a.find(".mode-toggle").tooltip({gravity:"ne"}):null};c.prototype.initForContent=function(b,a,c){var e=a.getCommitRange().getUntilRevision();this.$viewSource&&(a.getType()===
v.DELETE||a.getNodeType()===B.SUBMODULE?this.$viewSource.addClass("hidden"):this.$viewSource.attr("href",q.currentRepo().browse().path(a.getPath()).at(e&&e.getId()).build()));this.$viewRaw&&this.$viewRaw.attr("href",D(a.getPath(),e&&e.getRevisionReference()));this.untilRevisionPicker&&this.untilRevisionPicker.init(a.getPath(),e&&e.getRevisionReference(),b);this.$breadcrumbs&&this.$breadcrumbs.html(this.renderBreadCrumbs(a.getPath()));if(this.$changeTypeLozenge){var g,l;b=a.getPath();e=a.getSrcPath();
a.getType()===v.RENAME?(g=m.escapeHtml(e.getName()),l=m.escapeHtml(b.toString())):e&&(g=e.toString(),l=b.toString(),b=u.diff(u.tokenizeString(g),u.tokenizeString(l)),g=w(g,b.originalRegions,"deleted"),l=w(l,b.revisedRegions,"added"));this.$changeTypeLozenge.append(stash.feature.fileContent.fileChangeTypeLozenge({changeType:a.getType(),previousPathContent:g,pathContent:l}));this.$changeTypeLozenge.find(".change-type-lozenge").tooltip({html:!0,className:"change-type-lozenge-tooltip",gravity:function(){var a=
f(document).width()-f(this).offset().left-f(this).width()/2,b=f(".tipsy").outerWidth();return a>b/2+10?"n":"ne"}})}this.$changeModeLozenge&&(g=this.getFileChangedModeLozenge(a))&&this.$changeModeLozenge.append(f(g).tooltip());if(this.$modeToggle&&x.nativeSupport())this.$modeToggle.on("click","a:not(.active,.disabled)",function(a){A.openInSameTab(a)&&(a.preventDefault(),r.trigger("stash.feature.filecontent.requestedModeChange",this,f(this).hasClass("mode-diff")?p.DIFF:p.SOURCE))});(g=k.isString(c)&&
c.match(/^(\d+)/))&&(g=0<g[1]?g[1]-1:void 0);var h={$toolbar:this.$toolbar,$container:this.$contentView,asyncDiffModifications:this._options.asyncDiffModifications,attachScroll:this._options.attachScroll,autoResizing:this._options.autoResizing,contentMode:this._options.contentMode,commentMode:this._options.commentMode,diffUrlBuilder:this._options.diffUrlBuilder,disable:n.fn(this.toggleToolbarDisable.bind(this,!0),"FileHandlingContext.disable()","handler-specific events","3.5","4.0"),enable:n.fn(this.toggleToolbarDisable.bind(this,
!1),"FileHandlingContext.enable()","handler-specific events","3.5","4.0"),fileChange:a.toJSON(),isExcerpt:!!this._options.isExcerpt,lineComments:this._options.lineComments,relevantContextLines:this._options.relevantContextLines,targetLine:g,anchor:c};n.prop(h,"targetLine","FileHandlingContext.targetLine","FileHandlingContext.anchor","3.8","4.0");a=f("\x3cdiv /\x3e").addClass("file-content-spinner").appendTo(this.$self);return t.spinner(a,z._handle(h).done(k.bind(function(a,b){this.renderErrors(b);
this.handler=a;this.$self.addClass(a.extraClasses);var c={handlerID:a.handlerID,displayType:this._options.contentMode,fileChange:h.fileChange,commentMode:this._options.commentMode};this._options.toolbarWebFragmentLocationPrimary&&this.$toolbar.children(".primary").append(stash.widget.webFragmentButtons({location:this._options.toolbarWebFragmentLocationPrimary,context:c}));this._options.toolbarWebFragmentLocationSecondary&&this.$toolbar.children(".secondary").prepend(stash.widget.webFragmentButtons({location:this._options.toolbarWebFragmentLocationSecondary,
context:c,isReverse:!0}))},this)),"large",{zIndex:10}).done(k.defer.bind(k,function(){r.trigger("stash.feature.fileContent.requestHandled",null,h)}))};c.prototype.renderErrors=function(b){this.$self.parent().find(".file-content-errors").remove();0<b.length&&this.$self.before(stash.feature.fileContent.errors({errors:k.map(b,function(a){return a.message||a})}))};c.prototype.toggleToolbarDisable=function(b){this.$self.find(".file-toolbar .aui-button").toggleClass("disabled",b).prop("disabled",b).attr("aria-disabled",
b);b?n.triggerDeprecated("stash.feature.filecontent.disabled",this,this.$self,"handler-specific events","3.5","4.0"):n.triggerDeprecated("stash.feature.filecontent.enabled",this,this.$self,"handler-specific events","3.5","4.0")};c.prototype.renderBreadCrumbs=function(b){b=k.map(b.getComponents(),function(a){return{text:a}});return stash.widget.breadcrumbs.crumbs({pathComponents:b,primaryLink:this._options.pullRequestDiffLinkUrl})};c.prototype.getFileChangedModeLozenge=function(b){var a=b.getSrcExecutable();
b=b.getExecutable();var c=null;null==a&&!0===b||!1===a&&!0===b?c=!0:!0===a&&!1===b&&(c=!1);return null!==c?f(stash.feature.fileContent.fileChangeModeLozenge({added:c})):null};c.prototype.init=function(b,a){var c=this._initInternal.bind(this,b,a);return this._lastInitPromise=this.reset().thenAbortable(c,c)};c.prototype._initInternal=function(b,a){a=this._options=f.extend({},c.defaults,a);var d=b.getCommitRange(),e=a.headRef||d.getUntilRevision()&&d.getUntilRevision().getRevisionReference();if(a.changeTypeLozenge&&
!b.getType())throw Error("Change type is required to show the change type lozenge.");if(!d.getUntilRevision()&&(a.sourceLink||a.rawLink||a.untilRevisionPicker))throw Error("Revision info is required to show a link to the source or raw file, or a revision picker.");this.initToolbarItems(e,b);return this.initForContent(e,b,a.anchor)};c.prototype.reset=function(){this._lastInitPromise&&this._lastInitPromise.abort();var b=this._resetInternal.bind(this);return t.thenAbortable(this._lastInitPromise.then(b,
b))};c.prototype._resetInternal=function(){this.handler&&(this.handler.extraClasses&&this.$self.removeClass(this.handler.extraClasses),k.isFunction(this.handler.destroy)&&this.handler.destroy(),delete this.handler);return f.Deferred().resolve()};c.prototype.destroy=function(){this.reset()};return c});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:file-content', location = '/static/feature/file-content/file-content.soy' */
// This file was automatically generated from file-content.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace stash.feature.fileContent.
 */

if (typeof stash == 'undefined') { var stash = {}; }
if (typeof stash.feature == 'undefined') { stash.feature = {}; }
if (typeof stash.feature.fileContent == 'undefined') { stash.feature.fileContent = {}; }


stash.feature.fileContent.main = function(opt_data, opt_ignored) {
  return '<div' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="file-content' + ((opt_data.extraClasses) ? ' ' + soy.$$escapeHtml(opt_data.extraClasses) : '') + '">' + stash.feature.file.fileToolbar({fileIcon: opt_data.fileIcon, breadcrumbs: opt_data.breadcrumbs, primaryToolbarContent: '' + ((opt_data.changeTypeLozenge) ? '<div class="change-type-placeholder"></div>' : '') + ((opt_data.changeModeLozenge) ? '<div class="change-mode-placeholder"></div>' : '') + ((opt_data.modeToggle) ? stash.buttons.buttons({extraClasses: 'mode-toggle', content: '' + stash.buttons.button({extraClasses: 'mode-source', isPressed: opt_data.contentMode == 'source', href: opt_data.sourceUrl, buttonText: "Source view", title: "View the full source of this file"}) + stash.buttons.button({extraClasses: 'mode-diff', isPressed: opt_data.contentMode == 'diff', href: opt_data.diffUrl, buttonText: "Diff to previous", title: "View the changes made in this revision"})}) : '') + ((opt_data.untilRevisionPicker) ? stash.buttons.button({extraClasses: 'aui-dd-trigger until-changeset-button', buttonText: "History", title: "View the history of this file"}) : ''), secondaryToolbarContent: '' + ((opt_data.sourceLink) ? stash.buttons.button({href: '#', extraClasses: 'aui-button-subtle source-view-link', title: "View the full source of this file", iconType: 'custom', iconClass: 'aui-icon aui-icon-small aui-iconfont-devtools-file', iconText: "View the full source of this file", buttonText: ''}) : '') + ((opt_data.rawLink) ? stash.buttons.button({href: '#', buttonText: "Raw file", extraClasses: 'aui-button-link raw-view-link'}) : '') + ((opt_data.pullRequestDiffLink) ? (opt_data.pullRequestDiffCurrent == false) ? stash.widget.lozenge.lozenge({text: "Outdated", htmlElement: 'span', extraClasses: 'aui-lozenge-current aui-lozenge-subtle pull-request-diff-outdated-lozenge', tooltip: "This diff has changed in more recent commits"}) : '' : (opt_data.contentMode == 'diff') ? '<div class="diff-view-options">' + stash.feature.fileContent.diffViewOptionsPanel.main({commentMode: opt_data.commentMode, displayType: opt_data.contentMode, fileChange: opt_data.fileChange}) + '</div>' : '')}) + '<div class="content-view ' + soy.$$escapeHtml(opt_data.contentMode) + '-view' + ((opt_data.preloaded) ? ' fully-loaded' : '') + '"></div></div>';
};
if (goog.DEBUG) {
  stash.feature.fileContent.main.soyTemplateName = 'stash.feature.fileContent.main';
}


stash.feature.fileContent.errors = function(opt_data, opt_ignored) {
  var output = '<div class="file-content-errors">';
  var errorList90 = opt_data.errors;
  var errorListLen90 = errorList90.length;
  for (var errorIndex90 = 0; errorIndex90 < errorListLen90; errorIndex90++) {
    var errorData90 = errorList90[errorIndex90];
    output += aui.message.warning({content: '' + soy.$$escapeHtml(errorData90), isCloseable: true});
  }
  output += '</div>';
  return output;
};
if (goog.DEBUG) {
  stash.feature.fileContent.errors.soyTemplateName = 'stash.feature.fileContent.errors';
}
;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:tree-and-diff-view', location = '/static/feature/changeset/tree-and-diff-view/tree-and-diff-view.js' */
define("feature/changeset/tree-and-diff-view","aui jquery lodash util/dom-event util/events util/feature-detect util/navigator util/shortcuts model/conflict model/file-change model/file-content-modes model/page-state model/path-and-line feature/changeset/difftree feature/file-content exports".split(" "),function(V,c,h,F,e,W,G,z,X,Y,Z,H,t,aa,I,g){function J(a){var c=new t(a.data("path")),b;b=a.data("srcPath")&&new t(a.data("srcPath"));var d=a.data("changeType"),e=a.data("nodeType"),g;g=a.data("conflict")&&
new X(a.data("conflict"));var l=a.data("executable");a=a.data("srcExecutable");return new Y({repository:H.getRepository(),commitRange:f,srcPath:b&&b.path,path:c.path,type:d,nodeType:e,line:c.line,search:A,conflict:g,srcExecutable:a,executable:l})}function B(a,b){k||(k=new I(v,"changeset-file-content"));b||(b=a.getLine());w=a;d=new t(a.getPath(),a.getLine());H.setFilePath(a.getPath());v.height(v.height());var e=m.scrollTop();return k.init(a,c.extend(x,{anchor:b})).done(function(){n=c("#changeset-file-content");
if(0!==n.length){n.find(".file-toolbar");n.find(".content-view");var a=e,b=n.offset();e=b?Math.min(a,b.top):a;m.scrollTop(e)}})}function K(){var a=c.Deferred();w=d=null;k&&(k.destroy(),k=null);c("#changeset-file-content").remove();return a.resolve()}function L(){var a=M=m.height();c(".file-tree-container").find(".aui-toolbar2").each(function(){a-=c(this).outerHeight()});return a}function N(){y=L();C.css({"max-height":y+"px","border-bottom-width":0})}function O(){D=!0;var a=E();if((Boolean(a)^Boolean(d)||
a&&a.path.toString()!==d.path.toString())&&b){if(b.selectFile(a.path.getComponents()),P(),a.line)e.once("stash.feature.fileContent.diffViewContentChanged",function(){e.trigger("internal.stash.feature.diffView.lineChange",null,a.line)})}else a.toString()!==d.toString()&&(e.trigger("internal.stash.feature.diffView.lineChange",null,a.line),d=a);D=!1}function P(){var a=b.getSelectedFile();a&&0<a.length?B(J(a)):w&&B(w)}function ba(a){p||(p=c("\x3cdiv class\x3d'spinner'/\x3e"));p.appendTo("#content .file-tree-wrapper").spin("large",
{zIndex:10});return b.init(a).always(function(){p&&(p.spinStop().remove(),p=null)}).done(function(){c(".file-tree");y=L();C.css("max-height",y)})}function E(){return new t(window.location.hash.substring(1))}function Q(){function a(){e.trigger("stash.feature.changeset.difftree.collapseAnimationFinished",null,f)}var b=c(".collapse-file-tree"),d=c(".changeset-files"),g=c(".file-tree-container"),f;g.on("transitionend",F.filterByTarget(g,a));var h,l=!1;g.on("mouseleave",function(){clearTimeout(h);l&&(l=
!1,q(!0))}).find(".file-tree-wrapper").on("mouseenter",function(){clearTimeout(h);d.hasClass("collapsed")&&(h=setTimeout(function(){l=!0;k(!1)},200))}).end().find(".diff-tree-toolbar").on("focus","input",function(){q(!1)});var k=function(b){var c=d.hasClass("collapsed");"undefined"===typeof b&&(b=!c);d.toggleClass("collapsed",b).toggleClass("quick-reveal-mode",l);f=d.hasClass("collapsed");f!==c&&(e.trigger("stash.feature.changeset.difftree.toggleCollapse",null,f),W.cssTransition()||a())};q=function(a){a=
l?!1:a;"object"===typeof a&&(a=void 0);l=!1;clearTimeout(h);k(a)};b.on("click",F.preventDefault(q))}function R(){c(".no-changes-placeholder").remove();var a=d?d:E();return ba(a.path.getComponents()).then(function(b){return(b=b.getSelectedFile())&&b.length?B(J(b),a.line):K().done(function(){c(".changeset-files").append(c("\x3cdiv class\x3d'message no-changes-placeholder'\x3e\x3c/div\x3e").text("No changes to show"))})})}function S(a){return new ca(".file-tree-wrapper",".diff-tree-toolbar .aui-toolbar2-primary",
f,{maxChanges:a.maxChanges,hasOtherParents:1<a.numberOfParents,urlBuilder:a.changesUrlBuilder,searchUrlBuilder:a.diffUrlBuilder})}function da(a,b){D||b||(window.location.hash=a?(new t(a.data("path"))).toString():"")}var ca=aa.DiffTree,x,f,w,d,A,D=!1,r=[],b,u={},k,m=c(window),T,v,p,M,y,n,U,C;e.on("stash.feature.fileContent.optionsChanged",function(a){h.contains(["hideComments","hideEdiff"],a.key)||P()});e.on("internal.stash.feature.diffView.highlightSearch",function(a){A=a});var q;g.updateCommitRange=
function(a){a.getId()!==f.getId()&&(f=a,b.reset(),Object.prototype.hasOwnProperty.call(u,f.getId())?b=u[f.getId()]:(b=S(x),u[f.getId()]=b),R())};g.init=function(a,k){x=c.extend({},g.defaults,k);c("#footer");T=c("#content");v=T.find(".changeset-files");U=c(".file-tree-container");C=U.children(".file-tree-wrapper");M=m.height();n=c("#changeset-file-content");f=a;b=S(x);u[f.getId()]=b;d=E();m.on("hashchange",O);r.push(e.chain().on("window.resize",N).on("stash.feature.fileContent.diffViewExpanded",N).on("stash.feature.changeset.difftree.selectedNodeChanged",
da));Q();R();(!G.isIE()||9<G.majorVersion())&&r.push({destroy:z.bind("requestToggleDiffTreeHandler",h.ary(q,0))});r.push({destroy:z.bind("requestMoveToNextHandler",h.ary(b.openNextFile.bind(b),0))});r.push({destroy:z.bind("requestMoveToPreviousHandler",h.ary(b.openPrevFile.bind(b),0))});r.push(e.chainWith(b).on("search-focus",h.partial(q,!1)))};g._initDiffTreeToggle=Q;g.reset=function(){b&&b.reset();b=f=void 0;u={};A=d=void 0;m.off("hashchange",O);h.invoke(r,"destroy");return K()};g.defaults={breadcrumbs:!0,
sourceLink:!0,changeTypeLozenge:!0,changeModeLozenge:!0,contentMode:Z.DIFF,toolbarWebFragmentLocationPrimary:null,toolbarWebFragmentLocationSecondary:null};g.commentMode=I.commentMode});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:tree-and-diff-view', location = '/static/feature/changeset/tree-and-diff-view/tree-and-diff-view.soy' */
// This file was automatically generated from tree-and-diff-view.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace stash.feature.
 */

if (typeof stash == 'undefined') { var stash = {}; }
if (typeof stash.feature == 'undefined') { stash.feature = {}; }


stash.feature.treeAndDiffView = function(opt_data, opt_ignored) {
  var output = '<div class="changeset-files' + ((opt_data.extraClasses) ? ' ' + soy.$$escapeHtml(opt_data.extraClasses) : '') + '"><div class="file-tree-container">';
  var param10 = '' + aui.toolbar2.item({item: 'primary', content: '<h4>' + soy.$$escapeHtml("Changed files") + '</h4>'});
  var param18 = '';
  var webItemList19 = opt_data.diffTreeHeaderWebItems;
  var webItemListLen19 = webItemList19.length;
  for (var webItemIndex19 = 0; webItemIndex19 < webItemListLen19; webItemIndex19++) {
    var webItemData19 = webItemList19[webItemIndex19];
    param18 += stash.widget.webItemButton(webItemData19);
  }
  param10 += aui.toolbar2.item({item: 'secondary', content: param18});
  output += aui.toolbar2.toolbar2({extraClasses: 'diff-tree-toolbar', content: param10});
  output += '<div class="file-tree-wrapper"><div class="file-tree"></div></div></div></div>';
  return output;
};
if (goog.DEBUG) {
  stash.feature.treeAndDiffView.soyTemplateName = 'stash.feature.treeAndDiffView';
}
;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:pull-request-history', location = '/static/feature/pull-request/pull-request-history/pull-request-history.js' */
define("feature/pull-request/pull-request-history",["jquery","util/client-storage","util/events","exports"],function(l,e,a,f){function h(g){b(g.$tree)}function b(g){g.find(".jstree-leaf").each(function(g,a){var c=l(a),e=c.data("path").toString,b=c.data("contentId");d[e]===b&&c.addClass("viewed")})}function k(a){var b=a.data("path").toString,f=a.data("contentId");d[b]!==f&&(d[b]=f,e.setItem(c,d),a.addClass("viewed"))}var c,d;f.init=function(){c=e.buildKey("history","pull-request");d=e.getItem(c)||
{};a.on("stash.feature.changeset.difftree.treeInitialised",h);a.on("stash.feature.changeset.difftree.nodeOpening",b);a.on("stash.feature.changeset.difftree.selectedNodeChanged",k)};f.reset=function(){d=c=null;a.off("stash.feature.changeset.difftree.treeInitialised",h);a.off("stash.feature.changeset.difftree.nodeOpening",b);a.off("stash.feature.changeset.difftree.selectedNodeChanged",k)}});;
;/* module-key = 'com.atlassian.stash.stash-client-web-fragments-plugin:pull-request-add-file-comment', location = '/web-fragment-placeholder.config' */
WebFragments.addWebItemDescriptor({'pluginKey':'com.atlassian.stash.stash-client-web-fragments-plugin','key':'pull-request-add-file-comment','moduleKey':'pull-request-add-file-comment','completeModuleKey':'com.atlassian.stash.stash-client-web-fragments-plugin:pull-request-add-file-comment','weight':10.0,'condition':function(ctx) { return WebFragments._getValue((function(ctx) { return ctx.commentMode === 'create-new' }), ctx); },'params':{'stashIconClass':WebFragments._formatI18n(null, null, 'aui-icon aui-icon-small aui-iconfont-add-comment')},'tooltip':WebFragments._formatI18n("Add a file comment (Type \u0027m\u0027)", 'stash.web.comment.filecomments.add', ''),'styleClass':WebFragments._formatI18n(null, null, 'aui-button-subtle add-file-comment-trigger'),'location':'stash.pull-request.diff.toolbar.secondary'});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:pull-request-diff', location = '/static/feature/pull-request/diff/pull-request-diff.soy' */
// This file was automatically generated from pull-request-diff.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace stash.feature.pullRequest.
 */

if (typeof stash == 'undefined') { var stash = {}; }
if (typeof stash.feature == 'undefined') { stash.feature = {}; }
if (typeof stash.feature.pullRequest == 'undefined') { stash.feature.pullRequest = {}; }


stash.feature.pullRequest.diff = function(opt_data, opt_ignored) {
  return '' + stash.feature.treeAndDiffView({diffTreeHeaderWebItems: opt_data.diffTreeHeaderWebItems, extraClasses: 'tabbed'});
};
if (goog.DEBUG) {
  stash.feature.pullRequest.diff.soyTemplateName = 'stash.feature.pullRequest.diff';
}
;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:pull-request-diff', location = '/static/feature/pull-request/diff/pull-request-diff.js' */
define("feature/pull-request/pull-request-diff","aui jquery stash/api/util/navbuilder util/events model/commit-range feature/changeset/tree-and-diff-view feature/pull-request/pull-request-history layout/page-scrolling-manager exports".split(" "),function(c,k,l,e,m,d,f,n,a){function g(b){(this.execute?this:c.whenIType(b)).execute(function(){k(".add-file-comment-trigger:first").click()})}var h;a.init=function(b,a,c){e.on("stash.keyboard.shortcuts.pullrequest.addCommentHandler",g);h=n.acceptScrollForwardingRequests();
d.init(new m({pullRequest:b}),{commentMode:d.commentMode.CREATE_NEW,maxChanges:a,relevantContextLines:c,toolbarWebFragmentLocationPrimary:"stash.pull-request.diff.toolbar.primary",toolbarWebFragmentLocationSecondary:"stash.pull-request.diff.toolbar.secondary",diffUrlBuilder:function(a){return l.rest().currentRepo().pullRequest(b.id).diff(a)}});f.init()};a.reset=function(){e.off("stash.keyboard.shortcuts.pullrequest.addCommentHandler",g);f.reset();var a=d.reset();h();return a}});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:form', location = '/static/widget/form/xsrfProtectedForm.soy' */
// This file was automatically generated from xsrfProtectedForm.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace widget.form.
 */

if (typeof widget == 'undefined') { var widget = {}; }
if (typeof widget.form == 'undefined') { widget.form = {}; }


widget.form.xsrfProtectedForm = function(opt_data, opt_ignored, opt_ijData) {
  return '' + widget.aui.form.form(soy.$$augmentMap(opt_data, {xsrfTokenName: opt_ijData.xsrfTokenName ? opt_ijData.xsrfTokenName : null, xsrfTokenValue: opt_ijData.xsrfTokenValue ? opt_ijData.xsrfTokenValue : null}), null, opt_ijData);
};
if (goog.DEBUG) {
  widget.form.xsrfProtectedForm.soyTemplateName = 'widget.form.xsrfProtectedForm';
}
;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:form', location = '/static/widget/form/form.soy' */
// This file was automatically generated from form.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace stash.widget.
 */

if (typeof stash == 'undefined') { var stash = {}; }
if (typeof stash.widget == 'undefined') { stash.widget = {}; }


stash.widget.form = function(opt_data, opt_ignored, opt_ijData) {
  var param3 = '' + ((opt_data.headingContent) ? soy.$$filterNoAutoescape(opt_data.headingContent) : '');
  if (opt_data.errors) {
    var messageList10 = opt_data.errors;
    var messageListLen10 = messageList10.length;
    for (var messageIndex10 = 0; messageIndex10 < messageListLen10; messageIndex10++) {
      var messageData10 = messageList10[messageIndex10];
      param3 += aui.message.error({content: '' + stash.widget.errorContent({message: messageData10}, null, opt_ijData)}, null, opt_ijData);
    }
  }
  if (opt_data.detailedErrors) {
    var errorList18 = opt_data.detailedErrors;
    var errorListLen18 = errorList18.length;
    for (var errorIndex18 = 0; errorIndex18 < errorListLen18; errorIndex18++) {
      var errorData18 = errorList18[errorIndex18];
      param3 += aui.message.error({content: '' + stash.widget.errorContent(errorData18, null, opt_ijData)}, null, opt_ijData);
    }
  }
  param3 += ((opt_data.additionalErrorContent) ? soy.$$filterNoAutoescape(opt_data.additionalErrorContent) : '') + soy.$$filterNoAutoescape(opt_data.content);
  var output = '' + aui.form.form({content: param3, action: opt_data.action, method: opt_data.method, enctype: opt_data.enctype, isUnsectioned: opt_data.isUnsectioned, isLongLabels: opt_data.isLongLabels, isTopLabels: opt_data.isTopLabels, id: opt_data.id, extraClasses: '' + ((! (opt_data.preventDoubleSubmit == false)) ? 'prevent-double-submit ' : '') + aui.renderExtraClasses(opt_data, null, opt_ijData), extraAttributes: 'accept-charset="UTF-8"' + ((opt_data.autocomplete) ? ' autocomplete="' + soy.$$escapeHtml(opt_data.autocomplete) + '"' : '') + aui.renderExtraAttributes(opt_data, null, opt_ijData)}, null, opt_ijData);
  return output;
};
if (goog.DEBUG) {
  stash.widget.form.soyTemplateName = 'stash.widget.form';
}


stash.widget.xsrfProtectedForm = function(opt_data, opt_ignored, opt_ijData) {
  var param66 = '';
  var xsrfTokenName__soy67 = opt_data.xsrfTokenName ? opt_data.xsrfTokenName : opt_ijData.xsrfTokenName ? opt_ijData.xsrfTokenName : null;
  param66 += soy.$$filterNoAutoescape(opt_data.content) + ((xsrfTokenName__soy67) ? '<input type="hidden" name="' + soy.$$escapeHtml(xsrfTokenName__soy67) + '" value="' + soy.$$escapeHtml(opt_data.xsrfTokenValue ? opt_data.xsrfTokenValue : opt_ijData.xsrfTokenValue ? opt_ijData.xsrfTokenValue : null) + '">' : '');
  var output = '' + stash.widget.form({action: opt_data.action, method: opt_data.method, enctype: opt_data.enctype, isUnsectioned: opt_data.isUnsectioned, isLongLabels: opt_data.isLongLabels, isTopLabels: opt_data.isTopLabels, id: opt_data.id, extraClasses: opt_data.extraClasses, extraAttributes: opt_data.extraAttributes, errors: opt_data.errors, detailedErrors: opt_data.detailedErrors, additionalErrorContent: opt_data.additionalErrorContent, preventDoubleSubmit: opt_data.preventDoubleSubmit, autocomplete: opt_data.autocomplete, headingContent: opt_data.headingContent ? opt_data.headingContent : null, content: param66}, null, opt_ijData);
  return output;
};
if (goog.DEBUG) {
  stash.widget.xsrfProtectedForm.soyTemplateName = 'stash.widget.xsrfProtectedForm';
}
;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:focus-snapshots', location = '/static/util/focus-snapshot.js' */
define("util/focus-snapshot",["jquery"],function(d){return function(){var a,b;return{save:function(){var c=document.activeElement;c&&(a=d(c),a.is(":text, textarea")&&(b=a.getSelection()))},restore:function(){a&&(a.focus(),b&&a.setSelection(b.start,b.end))}}}()});;
;/* module-key = 'com.atlassian.auiplugin:aui-select2', location = 'js-vendor/jquery/plugins/jquery.select2.js' */
(function(e){"undefined"==typeof e.fn.each2&&e.extend(e.fn,{each2:function(n){for(var j=e([0]),k=-1,w=this.length;++k<w&&(j.context=j[0]=this[k])&&!1!==n.call(j[0],k,j););return this}})})(jQuery);
(function(e){function n(a){var b,c,d,g;if(!a||1>a.length)return a;b="";c=0;for(d=a.length;c<d;c++)g=a.charAt(c),b+=M[g]||g;return b}function j(a,b){for(var c=0,d=b.length;c<d;c+=1)if(k(a,b[c]))return c;return-1}function k(a,b){return a===b?!0:void 0===a||void 0===b||null===a||null===b?!1:a.constructor===String?a+""===b+"":b.constructor===String?b+""===a+"":!1}function w(a,b){var c,d,g;if(null===a||1>a.length)return[];c=a.split(b);d=0;for(g=c.length;d<g;d+=1)c[d]=e.trim(c[d]);return c}function E(a){a.on("keydown",
function(){void 0===e.data(a,"keyup-change-value")&&e.data(a,"keyup-change-value",a.val())});a.on("keyup",function(){var b=e.data(a,"keyup-change-value");void 0!==b&&a.val()!==b&&(e.removeData(a,"keyup-change-value"),a.trigger("keyup-change"))})}function F(a,b,c){var c=c||void 0,d;return function(){var g=arguments;window.clearTimeout(d);d=window.setTimeout(function(){b.apply(c,g)},a)}}function l(a){a.preventDefault();a.stopPropagation()}function y(a,b,c){var d,g=[],h;(d=a.attr("class"))&&e((""+d).split(" ")).each2(function(){0===
this.indexOf("select2-")&&g.push(this)});(d=b.attr("class"))&&e((""+d).split(" ")).each2(function(){0!==this.indexOf("select2-")&&(h=c(this))&&g.push(h)});a.attr("class",g.join(" "))}function G(a,b,c,d){var g=n(a.toUpperCase()).indexOf(n(b.toUpperCase())),b=b.length;0>g?c.push(d(a)):(c.push(d(a.substring(0,g))),c.push("<span class='select2-match'>"),c.push(d(a.substring(g,g+b))),c.push("</span>"),c.push(d(a.substring(g+b,a.length))))}function H(a){var b={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",
'"':"&quot;","'":"&#39;","/":"&#47;"};return String(a).replace(/[&<>"'\/\\]/g,function(a){return b[a]})}function I(a){var b,c=null,d=a.quietMillis||100,g=a.url,h=this;return function(m){window.clearTimeout(b);b=window.setTimeout(function(){var b=a.data,d=g,t=a.transport||e.fn.select2.ajaxDefaults.transport,f=e.extend({},e.fn.select2.ajaxDefaults.params,{type:a.type||"GET",cache:a.cache||!1,jsonpCallback:a.jsonpCallback||void 0,dataType:a.dataType||"json"}),b=b?b.call(h,m.term,m.page,m.context):null,
d="function"===typeof d?d.call(h,m.term,m.page,m.context):d;c&&c.abort();a.params&&(e.isFunction(a.params)?e.extend(f,a.params.call(h)):e.extend(f,a.params));e.extend(f,{url:d,dataType:a.dataType,data:b,success:function(b){b=a.results(b,m.page);m.callback(b)}});c=t.call(h,f)},d)}}function J(a){var b=a,c,d,g=function(a){return""+a.text};e.isArray(b)&&(d=b,b={results:d});!1===e.isFunction(b)&&(d=b,b=function(){return d});a=b();a.text&&(g=a.text,e.isFunction(g)||(c=a.text,g=function(a){return a[c]}));
return function(a){var c=a.term,d={results:[]},o;if(c==="")a.callback(b());else{o=function(b,d){var i,f,b=b[0];if(b.children){i={};for(f in b)b.hasOwnProperty(f)&&(i[f]=b[f]);i.children=[];e(b.children).each2(function(a,b){o(b,i.children)});(i.children.length||a.matcher(c,g(i),b))&&d.push(i)}else a.matcher(c,g(b),b)&&d.push(b)};e(b().results).each2(function(a,b){o(b,d.results)});a.callback(d)}}}function K(a){var b=e.isFunction(a);return function(c){var d=c.term,g={results:[]};e(b?a():a).each(function(){var a=
void 0!==this.text,b=a?this.text:this;if(""===d||c.matcher(d,b))g.results.push(a?this:{id:this,text:this})});c.callback(g)}}function s(a,b){if(e.isFunction(a))return!0;if(!a)return!1;throw Error(b+" must be a function or a falsy value");}function p(a){return e.isFunction(a)?a():a}function L(a){var b=0;e.each(a,function(a,d){d.children?b+=L(d.children):b++});return b}function N(a,b,c,d){var g=a,h=!1,e,i,f,t;if(d.createSearchChoice&&d.tokenSeparators&&!(1>d.tokenSeparators.length)){for(;;){h=-1;i=0;
for(f=d.tokenSeparators.length;i<f&&!(t=d.tokenSeparators[i],h=a.indexOf(t),0<=h);i++);if(0>h)break;e=a.substring(0,h);a=a.substring(h+t.length);if(0<e.length&&(e=d.createSearchChoice.call(this,e,b),void 0!==e&&null!==e&&void 0!==d.id(e)&&null!==d.id(e))){h=!1;i=0;for(f=b.length;i<f;i++)if(k(d.id(e),d.id(b[i]))){h=!0;break}h||c(e)}}if(g!==a)return a}}function A(a,b){var c=function(){};c.prototype=new a;c.prototype.constructor=c;c.prototype.parent=a.prototype;c.prototype=e.extend(c.prototype,b);return c}
if(void 0===window.Select2){var f,u,B,C,z,v,x={x:0,y:0},D;f={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(a){a=a.which?a.which:a;switch(a){case f.LEFT:case f.RIGHT:case f.UP:case f.DOWN:return!0}return!1},isControl:function(a){switch(a.which){case f.SHIFT:case f.CTRL:case f.ALT:return!0}return a.metaKey?!0:!1},isFunctionKey:function(a){a=a.which?a.which:a;return 112<=a&&123>=a}};
var M={"\u24b6":"A","\uff21":"A","\u00c0":"A","\u00c1":"A","\u00c2":"A","\u1ea6":"A","\u1ea4":"A","\u1eaa":"A","\u1ea8":"A","\u00c3":"A","\u0100":"A","\u0102":"A","\u1eb0":"A","\u1eae":"A","\u1eb4":"A","\u1eb2":"A","\u0226":"A","\u01e0":"A","\u00c4":"A","\u01de":"A","\u1ea2":"A","\u00c5":"A","\u01fa":"A","\u01cd":"A","\u0200":"A","\u0202":"A","\u1ea0":"A","\u1eac":"A","\u1eb6":"A","\u1e00":"A","\u0104":"A","\u023a":"A","\u2c6f":"A","\ua732":"AA","\u00c6":"AE","\u01fc":"AE","\u01e2":"AE","\ua734":"AO",
"\ua736":"AU","\ua738":"AV","\ua73a":"AV","\ua73c":"AY","\u24b7":"B","\uff22":"B","\u1e02":"B","\u1e04":"B","\u1e06":"B","\u0243":"B","\u0182":"B","\u0181":"B","\u24b8":"C","\uff23":"C","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u00c7":"C","\u1e08":"C","\u0187":"C","\u023b":"C","\ua73e":"C","\u24b9":"D","\uff24":"D","\u1e0a":"D","\u010e":"D","\u1e0c":"D","\u1e10":"D","\u1e12":"D","\u1e0e":"D","\u0110":"D","\u018b":"D","\u018a":"D","\u0189":"D","\ua779":"D","\u01f1":"DZ","\u01c4":"DZ","\u01f2":"Dz",
"\u01c5":"Dz","\u24ba":"E","\uff25":"E","\u00c8":"E","\u00c9":"E","\u00ca":"E","\u1ec0":"E","\u1ebe":"E","\u1ec4":"E","\u1ec2":"E","\u1ebc":"E","\u0112":"E","\u1e14":"E","\u1e16":"E","\u0114":"E","\u0116":"E","\u00cb":"E","\u1eba":"E","\u011a":"E","\u0204":"E","\u0206":"E","\u1eb8":"E","\u1ec6":"E","\u0228":"E","\u1e1c":"E","\u0118":"E","\u1e18":"E","\u1e1a":"E","\u0190":"E","\u018e":"E","\u24bb":"F","\uff26":"F","\u1e1e":"F","\u0191":"F","\ua77b":"F","\u24bc":"G","\uff27":"G","\u01f4":"G","\u011c":"G",
"\u1e20":"G","\u011e":"G","\u0120":"G","\u01e6":"G","\u0122":"G","\u01e4":"G","\u0193":"G","\ua7a0":"G","\ua77d":"G","\ua77e":"G","\u24bd":"H","\uff28":"H","\u0124":"H","\u1e22":"H","\u1e26":"H","\u021e":"H","\u1e24":"H","\u1e28":"H","\u1e2a":"H","\u0126":"H","\u2c67":"H","\u2c75":"H","\ua78d":"H","\u24be":"I","\uff29":"I","\u00cc":"I","\u00cd":"I","\u00ce":"I","\u0128":"I","\u012a":"I","\u012c":"I","\u0130":"I","\u00cf":"I","\u1e2e":"I","\u1ec8":"I","\u01cf":"I","\u0208":"I","\u020a":"I","\u1eca":"I",
"\u012e":"I","\u1e2c":"I","\u0197":"I","\u24bf":"J","\uff2a":"J","\u0134":"J","\u0248":"J","\u24c0":"K","\uff2b":"K","\u1e30":"K","\u01e8":"K","\u1e32":"K","\u0136":"K","\u1e34":"K","\u0198":"K","\u2c69":"K","\ua740":"K","\ua742":"K","\ua744":"K","\ua7a2":"K","\u24c1":"L","\uff2c":"L","\u013f":"L","\u0139":"L","\u013d":"L","\u1e36":"L","\u1e38":"L","\u013b":"L","\u1e3c":"L","\u1e3a":"L","\u0141":"L","\u023d":"L","\u2c62":"L","\u2c60":"L","\ua748":"L","\ua746":"L","\ua780":"L","\u01c7":"LJ","\u01c8":"Lj",
"\u24c2":"M","\uff2d":"M","\u1e3e":"M","\u1e40":"M","\u1e42":"M","\u2c6e":"M","\u019c":"M","\u24c3":"N","\uff2e":"N","\u01f8":"N","\u0143":"N","\u00d1":"N","\u1e44":"N","\u0147":"N","\u1e46":"N","\u0145":"N","\u1e4a":"N","\u1e48":"N","\u0220":"N","\u019d":"N","\ua790":"N","\ua7a4":"N","\u01ca":"NJ","\u01cb":"Nj","\u24c4":"O","\uff2f":"O","\u00d2":"O","\u00d3":"O","\u00d4":"O","\u1ed2":"O","\u1ed0":"O","\u1ed6":"O","\u1ed4":"O","\u00d5":"O","\u1e4c":"O","\u022c":"O","\u1e4e":"O","\u014c":"O","\u1e50":"O",
"\u1e52":"O","\u014e":"O","\u022e":"O","\u0230":"O","\u00d6":"O","\u022a":"O","\u1ece":"O","\u0150":"O","\u01d1":"O","\u020c":"O","\u020e":"O","\u01a0":"O","\u1edc":"O","\u1eda":"O","\u1ee0":"O","\u1ede":"O","\u1ee2":"O","\u1ecc":"O","\u1ed8":"O","\u01ea":"O","\u01ec":"O","\u00d8":"O","\u01fe":"O","\u0186":"O","\u019f":"O","\ua74a":"O","\ua74c":"O","\u01a2":"OI","\ua74e":"OO","\u0222":"OU","\u24c5":"P","\uff30":"P","\u1e54":"P","\u1e56":"P","\u01a4":"P","\u2c63":"P","\ua750":"P","\ua752":"P","\ua754":"P",
"\u24c6":"Q","\uff31":"Q","\ua756":"Q","\ua758":"Q","\u024a":"Q","\u24c7":"R","\uff32":"R","\u0154":"R","\u1e58":"R","\u0158":"R","\u0210":"R","\u0212":"R","\u1e5a":"R","\u1e5c":"R","\u0156":"R","\u1e5e":"R","\u024c":"R","\u2c64":"R","\ua75a":"R","\ua7a6":"R","\ua782":"R","\u24c8":"S","\uff33":"S","\u1e9e":"S","\u015a":"S","\u1e64":"S","\u015c":"S","\u1e60":"S","\u0160":"S","\u1e66":"S","\u1e62":"S","\u1e68":"S","\u0218":"S","\u015e":"S","\u2c7e":"S","\ua7a8":"S","\ua784":"S","\u24c9":"T","\uff34":"T",
"\u1e6a":"T","\u0164":"T","\u1e6c":"T","\u021a":"T","\u0162":"T","\u1e70":"T","\u1e6e":"T","\u0166":"T","\u01ac":"T","\u01ae":"T","\u023e":"T","\ua786":"T","\ua728":"TZ","\u24ca":"U","\uff35":"U","\u00d9":"U","\u00da":"U","\u00db":"U","\u0168":"U","\u1e78":"U","\u016a":"U","\u1e7a":"U","\u016c":"U","\u00dc":"U","\u01db":"U","\u01d7":"U","\u01d5":"U","\u01d9":"U","\u1ee6":"U","\u016e":"U","\u0170":"U","\u01d3":"U","\u0214":"U","\u0216":"U","\u01af":"U","\u1eea":"U","\u1ee8":"U","\u1eee":"U","\u1eec":"U",
"\u1ef0":"U","\u1ee4":"U","\u1e72":"U","\u0172":"U","\u1e76":"U","\u1e74":"U","\u0244":"U","\u24cb":"V","\uff36":"V","\u1e7c":"V","\u1e7e":"V","\u01b2":"V","\ua75e":"V","\u0245":"V","\ua760":"VY","\u24cc":"W","\uff37":"W","\u1e80":"W","\u1e82":"W","\u0174":"W","\u1e86":"W","\u1e84":"W","\u1e88":"W","\u2c72":"W","\u24cd":"X","\uff38":"X","\u1e8a":"X","\u1e8c":"X","\u24ce":"Y","\uff39":"Y","\u1ef2":"Y","\u00dd":"Y","\u0176":"Y","\u1ef8":"Y","\u0232":"Y","\u1e8e":"Y","\u0178":"Y","\u1ef6":"Y","\u1ef4":"Y",
"\u01b3":"Y","\u024e":"Y","\u1efe":"Y","\u24cf":"Z","\uff3a":"Z","\u0179":"Z","\u1e90":"Z","\u017b":"Z","\u017d":"Z","\u1e92":"Z","\u1e94":"Z","\u01b5":"Z","\u0224":"Z","\u2c7f":"Z","\u2c6b":"Z","\ua762":"Z","\u24d0":"a","\uff41":"a","\u1e9a":"a","\u00e0":"a","\u00e1":"a","\u00e2":"a","\u1ea7":"a","\u1ea5":"a","\u1eab":"a","\u1ea9":"a","\u00e3":"a","\u0101":"a","\u0103":"a","\u1eb1":"a","\u1eaf":"a","\u1eb5":"a","\u1eb3":"a","\u0227":"a","\u01e1":"a","\u00e4":"a","\u01df":"a","\u1ea3":"a","\u00e5":"a",
"\u01fb":"a","\u01ce":"a","\u0201":"a","\u0203":"a","\u1ea1":"a","\u1ead":"a","\u1eb7":"a","\u1e01":"a","\u0105":"a","\u2c65":"a","\u0250":"a","\ua733":"aa","\u00e6":"ae","\u01fd":"ae","\u01e3":"ae","\ua735":"ao","\ua737":"au","\ua739":"av","\ua73b":"av","\ua73d":"ay","\u24d1":"b","\uff42":"b","\u1e03":"b","\u1e05":"b","\u1e07":"b","\u0180":"b","\u0183":"b","\u0253":"b","\u24d2":"c","\uff43":"c","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u00e7":"c","\u1e09":"c","\u0188":"c","\u023c":"c",
"\ua73f":"c","\u2184":"c","\u24d3":"d","\uff44":"d","\u1e0b":"d","\u010f":"d","\u1e0d":"d","\u1e11":"d","\u1e13":"d","\u1e0f":"d","\u0111":"d","\u018c":"d","\u0256":"d","\u0257":"d","\ua77a":"d","\u01f3":"dz","\u01c6":"dz","\u24d4":"e","\uff45":"e","\u00e8":"e","\u00e9":"e","\u00ea":"e","\u1ec1":"e","\u1ebf":"e","\u1ec5":"e","\u1ec3":"e","\u1ebd":"e","\u0113":"e","\u1e15":"e","\u1e17":"e","\u0115":"e","\u0117":"e","\u00eb":"e","\u1ebb":"e","\u011b":"e","\u0205":"e","\u0207":"e","\u1eb9":"e","\u1ec7":"e",
"\u0229":"e","\u1e1d":"e","\u0119":"e","\u1e19":"e","\u1e1b":"e","\u0247":"e","\u025b":"e","\u01dd":"e","\u24d5":"f","\uff46":"f","\u1e1f":"f","\u0192":"f","\ua77c":"f","\u24d6":"g","\uff47":"g","\u01f5":"g","\u011d":"g","\u1e21":"g","\u011f":"g","\u0121":"g","\u01e7":"g","\u0123":"g","\u01e5":"g","\u0260":"g","\ua7a1":"g","\u1d79":"g","\ua77f":"g","\u24d7":"h","\uff48":"h","\u0125":"h","\u1e23":"h","\u1e27":"h","\u021f":"h","\u1e25":"h","\u1e29":"h","\u1e2b":"h","\u1e96":"h","\u0127":"h","\u2c68":"h",
"\u2c76":"h","\u0265":"h","\u0195":"hv","\u24d8":"i","\uff49":"i","\u00ec":"i","\u00ed":"i","\u00ee":"i","\u0129":"i","\u012b":"i","\u012d":"i","\u00ef":"i","\u1e2f":"i","\u1ec9":"i","\u01d0":"i","\u0209":"i","\u020b":"i","\u1ecb":"i","\u012f":"i","\u1e2d":"i","\u0268":"i","\u0131":"i","\u24d9":"j","\uff4a":"j","\u0135":"j","\u01f0":"j","\u0249":"j","\u24da":"k","\uff4b":"k","\u1e31":"k","\u01e9":"k","\u1e33":"k","\u0137":"k","\u1e35":"k","\u0199":"k","\u2c6a":"k","\ua741":"k","\ua743":"k","\ua745":"k",
"\ua7a3":"k","\u24db":"l","\uff4c":"l","\u0140":"l","\u013a":"l","\u013e":"l","\u1e37":"l","\u1e39":"l","\u013c":"l","\u1e3d":"l","\u1e3b":"l","\u017f":"l","\u0142":"l","\u019a":"l","\u026b":"l","\u2c61":"l","\ua749":"l","\ua781":"l","\ua747":"l","\u01c9":"lj","\u24dc":"m","\uff4d":"m","\u1e3f":"m","\u1e41":"m","\u1e43":"m","\u0271":"m","\u026f":"m","\u24dd":"n","\uff4e":"n","\u01f9":"n","\u0144":"n","\u00f1":"n","\u1e45":"n","\u0148":"n","\u1e47":"n","\u0146":"n","\u1e4b":"n","\u1e49":"n","\u019e":"n",
"\u0272":"n","\u0149":"n","\ua791":"n","\ua7a5":"n","\u01cc":"nj","\u24de":"o","\uff4f":"o","\u00f2":"o","\u00f3":"o","\u00f4":"o","\u1ed3":"o","\u1ed1":"o","\u1ed7":"o","\u1ed5":"o","\u00f5":"o","\u1e4d":"o","\u022d":"o","\u1e4f":"o","\u014d":"o","\u1e51":"o","\u1e53":"o","\u014f":"o","\u022f":"o","\u0231":"o","\u00f6":"o","\u022b":"o","\u1ecf":"o","\u0151":"o","\u01d2":"o","\u020d":"o","\u020f":"o","\u01a1":"o","\u1edd":"o","\u1edb":"o","\u1ee1":"o","\u1edf":"o","\u1ee3":"o","\u1ecd":"o","\u1ed9":"o",
"\u01eb":"o","\u01ed":"o","\u00f8":"o","\u01ff":"o","\u0254":"o","\ua74b":"o","\ua74d":"o","\u0275":"o","\u01a3":"oi","\u0223":"ou","\ua74f":"oo","\u24df":"p","\uff50":"p","\u1e55":"p","\u1e57":"p","\u01a5":"p","\u1d7d":"p","\ua751":"p","\ua753":"p","\ua755":"p","\u24e0":"q","\uff51":"q","\u024b":"q","\ua757":"q","\ua759":"q","\u24e1":"r","\uff52":"r","\u0155":"r","\u1e59":"r","\u0159":"r","\u0211":"r","\u0213":"r","\u1e5b":"r","\u1e5d":"r","\u0157":"r","\u1e5f":"r","\u024d":"r","\u027d":"r","\ua75b":"r",
"\ua7a7":"r","\ua783":"r","\u24e2":"s","\uff53":"s","\u00df":"s","\u015b":"s","\u1e65":"s","\u015d":"s","\u1e61":"s","\u0161":"s","\u1e67":"s","\u1e63":"s","\u1e69":"s","\u0219":"s","\u015f":"s","\u023f":"s","\ua7a9":"s","\ua785":"s","\u1e9b":"s","\u24e3":"t","\uff54":"t","\u1e6b":"t","\u1e97":"t","\u0165":"t","\u1e6d":"t","\u021b":"t","\u0163":"t","\u1e71":"t","\u1e6f":"t","\u0167":"t","\u01ad":"t","\u0288":"t","\u2c66":"t","\ua787":"t","\ua729":"tz","\u24e4":"u","\uff55":"u","\u00f9":"u","\u00fa":"u",
"\u00fb":"u","\u0169":"u","\u1e79":"u","\u016b":"u","\u1e7b":"u","\u016d":"u","\u00fc":"u","\u01dc":"u","\u01d8":"u","\u01d6":"u","\u01da":"u","\u1ee7":"u","\u016f":"u","\u0171":"u","\u01d4":"u","\u0215":"u","\u0217":"u","\u01b0":"u","\u1eeb":"u","\u1ee9":"u","\u1eef":"u","\u1eed":"u","\u1ef1":"u","\u1ee5":"u","\u1e73":"u","\u0173":"u","\u1e77":"u","\u1e75":"u","\u0289":"u","\u24e5":"v","\uff56":"v","\u1e7d":"v","\u1e7f":"v","\u028b":"v","\ua75f":"v","\u028c":"v","\ua761":"vy","\u24e6":"w","\uff57":"w",
"\u1e81":"w","\u1e83":"w","\u0175":"w","\u1e87":"w","\u1e85":"w","\u1e98":"w","\u1e89":"w","\u2c73":"w","\u24e7":"x","\uff58":"x","\u1e8b":"x","\u1e8d":"x","\u24e8":"y","\uff59":"y","\u1ef3":"y","\u00fd":"y","\u0177":"y","\u1ef9":"y","\u0233":"y","\u1e8f":"y","\u00ff":"y","\u1ef7":"y","\u1e99":"y","\u1ef5":"y","\u01b4":"y","\u024f":"y","\u1eff":"y","\u24e9":"z","\uff5a":"z","\u017a":"z","\u1e91":"z","\u017c":"z","\u017e":"z","\u1e93":"z","\u1e95":"z","\u01b6":"z","\u0225":"z","\u0240":"z","\u2c6c":"z",
"\ua763":"z"};u=e(document);var O=1;z=function(){return O++};u.on("mousemove",function(a){x.x=a.pageX;x.y=a.pageY});u=A(Object,{bind:function(a){var b=this;return function(){a.apply(b,arguments)}},init:function(a){var b,c;this.opts=a=this.prepareOpts(a);this.id=a.id;void 0!==a.element.data("select2")&&null!==a.element.data("select2")&&a.element.data("select2").destroy();this.container=this.createContainer();this.containerId="s2id_"+(a.element.attr("id")||"autogen"+z());this.containerSelector="#"+
this.containerId.replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1");this.container.attr("id",this.containerId);var d=!1,g;this.body=function(){!1===d&&(g=a.element.closest("body"),d=!0);return g};y(this.container,this.opts.element,this.opts.adaptContainerCssClass);this.container.attr("style",a.element.attr("style"));this.container.css(p(a.containerCss));this.container.addClass(p(a.containerCssClass));this.elementTabIndex=this.opts.element.attr("tabindex");this.opts.element.data("select2",this).attr("tabindex",
"-1").before(this.container).on("click.select2",l);this.container.data("select2",this);this.dropdown=this.container.find(".select2-drop");y(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass);this.dropdown.addClass(p(a.dropdownCssClass));this.dropdown.data("select2",this);this.dropdown.on("click",l);this.results=b=this.container.find(".select2-results");this.search=c=this.container.find("input.select2-input");this.resultsPage=this.queryCount=0;this.context=null;this.initContainer();this.container.on("click",
l);this.results.on("mousemove",function(a){(void 0===x||x.x!==a.pageX||x.y!==a.pageY)&&e(a.target).trigger("mousemove-filtered",a)});this.dropdown.on("mousemove-filtered touchstart touchmove touchend",".select2-results",this.bind(this.highlightUnderEvent));var h=this.results,m=F(80,function(a){h.trigger("scroll-debounced",a)});h.on("scroll",function(a){0<=j(a.target,h.get())&&m(a)});this.dropdown.on("scroll-debounced",".select2-results",this.bind(this.loadMoreIfNeeded));e(this.container).on("change",
".select2-input",function(a){a.stopPropagation()});e(this.dropdown).on("change",".select2-input",function(a){a.stopPropagation()});e.fn.mousewheel&&b.mousewheel(function(a,c,d,e){c=b.scrollTop();0<e&&0>=c-e?(b.scrollTop(0),l(a)):0>e&&b.get(0).scrollHeight-b.scrollTop()+e<=b.height()&&(b.scrollTop(b.get(0).scrollHeight-b.height()),l(a))});E(c);c.on("keyup-change input paste",this.bind(this.updateResults));c.on("focus",function(){c.addClass("select2-focused")});c.on("blur",function(){c.removeClass("select2-focused")});
this.dropdown.on("mouseup",".select2-results",this.bind(function(a){0<e(a.target).closest(".select2-result-selectable").length&&(this.highlightUnderEvent(a),this.selectHighlighted(a))}));this.dropdown.on("click mouseup mousedown",function(a){a.stopPropagation()});e.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource());null!==a.maximumInputLength&&this.search.attr("maxlength",a.maximumInputLength);var i=a.element.prop("disabled");void 0===i&&(i=!1);this.enable(!i);i=a.element.prop("readonly");
void 0===i&&(i=!1);this.readonly(i);if(!(i=D)){i=e("<div class='select2-measure-scrollbar'></div>");i.appendTo("body");var f={width:i.width()-i[0].clientWidth,height:i.height()-i[0].clientHeight};i.remove();i=f}D=i;this.autofocus=a.element.prop("autofocus");a.element.prop("autofocus",!1);this.autofocus&&this.focus();this.nextSearchTerm=void 0},destroy:function(){var a=this.opts.element,b=a.data("select2");this.close();this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null);
void 0!==b&&(b.container.remove(),b.dropdown.remove(),a.removeClass("select2-offscreen").removeData("select2").off(".select2").prop("autofocus",this.autofocus||!1),this.elementTabIndex?a.attr({tabindex:this.elementTabIndex}):a.removeAttr("tabindex"),a.show())},optionToData:function(a){if(a.is("option"))return{id:a.prop("value"),text:a.text(),element:a.get(),css:a.attr("class"),disabled:a.prop("disabled"),locked:k(a.attr("locked"),"locked")||k(a.data("locked"),!0)};if(a.is("optgroup"))return{text:a.attr("label"),
children:[],element:a.get(),css:a.attr("class")}},prepareOpts:function(a){var b,c,d,g=this;b=a.element;"select"===b.get(0).tagName.toLowerCase()&&(this.select=c=a.element);c&&e.each("id multiple ajax query createSearchChoice initSelection data tags".split(" "),function(){if(this in a)throw Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.");});a=e.extend({},{populateResults:function(b,c,d){var f,t=this.opts.id;f=function(b,c,h){var m,l,k,j,n,p,r,b=a.sortResults(b,
c,d);m=0;for(l=b.length;m<l;m=m+1){k=b[m];n=k.disabled===true;j=!n&&t(k)!==void 0;p=k.children&&k.children.length>0;r=e("<li></li>");r.addClass("select2-results-dept-"+h);r.addClass("select2-result");r.addClass(j?"select2-result-selectable":"select2-result-unselectable");n&&r.addClass("select2-disabled");p&&r.addClass("select2-result-with-children");r.addClass(g.opts.formatResultCssClass(k));j=e(document.createElement("div"));j.addClass("select2-result-label");n=a.formatResult(k,j,d,g.opts.escapeMarkup);
n!==void 0&&j.html(n);r.append(j);if(p){p=e("<ul></ul>");p.addClass("select2-result-sub");f(k.children,p,h+1);r.append(p)}r.data("select2-data",k);c.append(r)}};f(c,b,0)}},e.fn.select2.defaults,a);"function"!==typeof a.id&&(d=a.id,a.id=function(a){return a[d]});if(e.isArray(a.element.data("select2Tags"))){if("tags"in a)throw"tags specified as both an attribute 'data-select2-tags' and in options of Select2 "+a.element.attr("id");a.tags=a.element.data("select2Tags")}if(c)a.query=this.bind(function(a){var c=
{results:[],more:false},d=a.term,e,f,q;q=function(b,c){var e;if(b.is("option"))a.matcher(d,b.text(),b)&&c.push(g.optionToData(b));else if(b.is("optgroup")){e=g.optionToData(b);b.children().each2(function(a,b){q(b,e.children)});e.children.length>0&&c.push(e)}};e=b.children();if(this.getPlaceholder()!==void 0&&e.length>0)(f=this.getPlaceholderOption())&&(e=e.not(f));e.each2(function(a,b){q(b,c.results)});a.callback(c)}),a.id=function(a){return a.id},a.formatResultCssClass=function(a){return a.css};
else if(!("query"in a))if("ajax"in a){if((c=a.element.data("ajax-url"))&&0<c.length)a.ajax.url=c;a.query=I.call(a.element,a.ajax)}else if("data"in a)a.query=J(a.data);else if("tags"in a&&(a.query=K(a.tags),void 0===a.createSearchChoice&&(a.createSearchChoice=function(a){return{id:e.trim(a),text:e.trim(a)}}),void 0===a.initSelection))a.initSelection=function(b,c){var d=[];e(w(b.val(),a.separator)).each(function(){var b={id:this,text:this},c=a.tags;e.isFunction(c)&&(c=c());e(c).each(function(){if(k(this.id,
b.id)){b=this;return false}});d.push(b)});c(d)};if("function"!==typeof a.query)throw"query function not defined for Select2 "+a.element.attr("id");return a},monitorSource:function(){var a=this.opts.element,b,c;a.on("change.select2",this.bind(function(){!0!==this.opts.element.data("select2-change-triggered")&&this.initSelection()}));b=this.bind(function(){var b=a.prop("disabled");void 0===b&&(b=!1);this.enable(!b);b=a.prop("readonly");void 0===b&&(b=!1);this.readonly(b);y(this.container,this.opts.element,
this.opts.adaptContainerCssClass);this.container.addClass(p(this.opts.containerCssClass));y(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass);this.dropdown.addClass(p(this.opts.dropdownCssClass))});a.on("propertychange.select2",b);void 0===this.mutationCallback&&(this.mutationCallback=function(a){a.forEach(b)});c=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;void 0!==c&&(this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=
null),this.propertyObserver=new c(this.mutationCallback),this.propertyObserver.observe(a.get(0),{attributes:!0,subtree:!1}))},triggerSelect:function(a){a=e.Event("select2-selecting",{val:this.id(a),object:a});this.opts.element.trigger(a);return!a.isDefaultPrevented()},triggerChange:function(a){a=a||{};a=e.extend({},a,{type:"change",val:this.val()});this.opts.element.data("select2-change-triggered",!0);this.opts.element.trigger(a);this.opts.element.data("select2-change-triggered",!1);this.opts.element.click();
this.opts.blurOnChange&&this.opts.element.blur()},isInterfaceEnabled:function(){return!0===this.enabledInterface},enableInterface:function(){var a=this._enabled&&!this._readonly;if(a===this.enabledInterface)return!1;this.container.toggleClass("select2-container-disabled",!a);this.close();this.enabledInterface=a;return!0},enable:function(a){void 0===a&&(a=!0);this._enabled!==a&&(this._enabled=a,this.opts.element.prop("disabled",!a),this.enableInterface())},disable:function(){this.enable(!1)},readonly:function(a){void 0===
a&&(a=!1);if(this._readonly===a)return!1;this._readonly=a;this.opts.element.prop("readonly",a);this.enableInterface();return!0},opened:function(){return this.container.hasClass("select2-dropdown-open")},positionDropdown:function(){var a=this.dropdown,b=this.container.offset(),c=this.container.outerHeight(!1),d=this.container.outerWidth(!1),g=a.outerHeight(!1),h=e(window),f=h.width(),i=h.height(),o=h.scrollLeft()+f,k=h.scrollTop()+i,c=b.top+c,q=b.left,k=c+g<=k,l=b.top-g>=this.body().scrollTop(),j=
a.outerWidth(!1),n=q+j<=o,s;a.hasClass("select2-drop-above")?(g=!0,!l&&k&&(s=!0,g=!1)):(g=!1,!k&&l&&(g=s=!0));s&&(a.hide(),b=this.container.offset(),c=this.container.outerHeight(!1),d=this.container.outerWidth(!1),a.outerHeight(!1),o=h.scrollLeft()+f,h.scrollTop(),c=b.top+c,q=b.left,j=a.outerWidth(!1),n=q+j<=o,a.show());this.opts.dropdownAutoWidth?(h=e(".select2-results",a)[0],a.addClass("select2-drop-auto-width"),a.css("width",""),j=a.outerWidth(!1)+(h.scrollHeight===h.clientHeight?0:D.width),j>
d?d=j:j=d,n=q+j<=o):this.container.removeClass("select2-drop-auto-width");"static"!==this.body().css("position")&&(o=this.body().offset(),c-=o.top,q-=o.left);n||(q=b.left+d-j);d={left:q,width:d};g?(d.bottom=i-b.top,d.top="auto",this.container.addClass("select2-drop-above"),a.addClass("select2-drop-above")):(d.top=c,d.bottom="auto",this.container.removeClass("select2-drop-above"),a.removeClass("select2-drop-above"));d=e.extend(d,p(this.opts.dropdownCss));a.css(d)},shouldOpen:function(){var a;if(this.opened()||
!1===this._enabled||!0===this._readonly)return!1;a=e.Event("select2-opening");this.opts.element.trigger(a);return!a.isDefaultPrevented()},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above");this.dropdown.removeClass("select2-drop-above")},open:function(){if(!this.shouldOpen())return!1;this.opening();return!0},opening:function(){var a=this.containerId,b="scroll."+a,c="resize."+a,d="orientationchange."+a;this.container.addClass("select2-dropdown-open").addClass("select2-container-active");
this.clearDropdownAlignmentPreference();this.dropdown[0]!==this.body().children().last()[0]&&this.dropdown.detach().appendTo(this.body());a=e("#select2-drop-mask");0==a.length&&(a=e(document.createElement("div")),a.attr("id","select2-drop-mask").attr("class","select2-drop-mask"),a.hide(),a.appendTo(this.body()),a.on("mousedown touchstart click",function(a){var b=e("#select2-drop");0<b.length&&(b=b.data("select2"),b.opts.selectOnBlur&&b.selectHighlighted({noFocus:!0}),b.close({focus:!0}),a.preventDefault(),
a.stopPropagation())}));this.dropdown.prev()[0]!==a[0]&&this.dropdown.before(a);e("#select2-drop").removeAttr("id");this.dropdown.attr("id","select2-drop");a.show();this.positionDropdown();this.dropdown.show();this.positionDropdown();this.dropdown.addClass("select2-drop-active");var g=this;this.container.parents().add(window).each(function(){e(this).on(c+" "+b+" "+d,function(){g.positionDropdown()})})},close:function(){if(this.opened()){var a=this.containerId,b="scroll."+a,c="resize."+a,d="orientationchange."+
a;this.container.parents().add(window).each(function(){e(this).off(b).off(c).off(d)});this.clearDropdownAlignmentPreference();e("#select2-drop-mask").hide();this.dropdown.removeAttr("id");this.dropdown.hide();this.container.removeClass("select2-dropdown-open").removeClass("select2-container-active");this.results.empty();this.clearSearch();this.search.removeClass("select2-active");this.opts.element.trigger(e.Event("select2-close"))}},externalSearch:function(a){this.open();this.search.val(a);this.updateResults(!1)},
clearSearch:function(){},getMaximumSelectionSize:function(){return p(this.opts.maximumSelectionSize)},ensureHighlightVisible:function(){var a=this.results,b,c,d,g;c=this.highlight();0>c||(0==c?a.scrollTop(0):(b=this.findHighlightableChoices().find(".select2-result-label"),d=e(b[c]),g=d.offset().top+d.outerHeight(!0),c===b.length-1&&(b=a.find("li.select2-more-results"),0<b.length&&(g=b.offset().top+b.outerHeight(!0))),b=a.offset().top+a.outerHeight(!0),g>b&&a.scrollTop(a.scrollTop()+(g-b)),g=d.offset().top-
a.offset().top,0>g&&"none"!=d.css("display")&&a.scrollTop(a.scrollTop()+g)))},findHighlightableChoices:function(){return this.results.find(".select2-result-selectable:not(.select2-disabled, .select2-selected)")},moveHighlight:function(a){for(var b=this.findHighlightableChoices(),c=this.highlight();-1<c&&c<b.length;){var c=c+a,d=e(b[c]);if(d.hasClass("select2-result-selectable")&&!d.hasClass("select2-disabled")&&!d.hasClass("select2-selected")){this.highlight(c);break}}},highlight:function(a){var b=
this.findHighlightableChoices();if(0===arguments.length)return j(b.filter(".select2-highlighted")[0],b.get());a>=b.length&&(a=b.length-1);0>a&&(a=0);this.removeHighlight();b=e(b[a]);b.addClass("select2-highlighted");this.ensureHighlightVisible();(b=b.data("select2-data"))&&this.opts.element.trigger({type:"select2-highlight",val:this.id(b),choice:b})},removeHighlight:function(){this.results.find(".select2-highlighted").removeClass("select2-highlighted")},countSelectableResults:function(){return this.findHighlightableChoices().length},
highlightUnderEvent:function(a){a=e(a.target).closest(".select2-result-selectable");if(0<a.length&&!a.is(".select2-highlighted")){var b=this.findHighlightableChoices();this.highlight(b.index(a))}else 0==a.length&&this.removeHighlight()},loadMoreIfNeeded:function(){var a=this.results,b=a.find("li.select2-more-results"),c,d=this.resultsPage+1,e=this,h=this.search.val(),f=this.context;0!==b.length&&(c=b.offset().top-a.offset().top-a.height(),c<=this.opts.loadMorePadding&&(b.addClass("select2-active"),
this.opts.query({element:this.opts.element,term:h,page:d,context:f,matcher:this.opts.matcher,callback:this.bind(function(c){e.opened()&&(e.opts.populateResults.call(this,a,c.results,{term:h,page:d,context:f}),e.postprocessResults(c,!1,!1),!0===c.more?(b.detach().appendTo(a).text(e.opts.formatLoadMore(d+1)),window.setTimeout(function(){e.loadMoreIfNeeded()},10)):b.remove(),e.positionDropdown(),e.resultsPage=d,e.context=c.context,this.opts.element.trigger({type:"select2-loaded",items:c}))})})))},tokenize:function(){},
updateResults:function(a){function b(){d.removeClass("select2-active");i.positionDropdown()}function c(a){g.html(a);b()}var d=this.search,g=this.results,h=this.opts,f,i=this;f=d.val();var o=e.data(this.container,"select2-last-term"),j;if(!(!0!==a&&o&&k(f,o))&&(e.data(this.container,"select2-last-term",f),!(!0!==a&&(!1===this.showSearchInput||!this.opened())))){j=++this.queryCount;o=this.getMaximumSelectionSize();if(1<=o&&(f=this.data(),e.isArray(f)&&f.length>=o&&s(h.formatSelectionTooBig,"formatSelectionTooBig"))){c("<li class='select2-selection-limit'>"+
h.formatSelectionTooBig(o)+"</li>");return}d.val().length<h.minimumInputLength?(s(h.formatInputTooShort,"formatInputTooShort")?c("<li class='select2-no-results'>"+h.formatInputTooShort(d.val(),h.minimumInputLength)+"</li>"):c(""),a&&this.showSearch&&this.showSearch(!0)):h.maximumInputLength&&d.val().length>h.maximumInputLength?s(h.formatInputTooLong,"formatInputTooLong")?c("<li class='select2-no-results'>"+h.formatInputTooLong(d.val(),h.maximumInputLength)+"</li>"):c(""):(h.formatSearching&&0===this.findHighlightableChoices().length&&
c("<li class='select2-searching'>"+h.formatSearching()+"</li>"),d.addClass("select2-active"),this.removeHighlight(),f=this.tokenize(),void 0!=f&&null!=f&&d.val(f),this.resultsPage=1,h.query({element:h.element,term:d.val(),page:this.resultsPage,context:null,matcher:h.matcher,callback:this.bind(function(f){var m;j==this.queryCount&&(this.opened()?(this.context=void 0===f.context?null:f.context,this.opts.createSearchChoice&&""!==d.val()&&(m=this.opts.createSearchChoice.call(i,d.val(),f.results),void 0!==
m&&null!==m&&void 0!==i.id(m)&&null!==i.id(m)&&0===e(f.results).filter(function(){return k(i.id(this),i.id(m))}).length&&f.results.unshift(m)),0===f.results.length&&s(h.formatNoMatches,"formatNoMatches"))?c("<li class='select2-no-results'>"+h.formatNoMatches(d.val())+"</li>"):(g.empty(),i.opts.populateResults.call(this,g,f.results,{term:d.val(),page:this.resultsPage,context:null}),!0===f.more&&s(h.formatLoadMore,"formatLoadMore")&&(g.append("<li class='select2-more-results'>"+i.opts.escapeMarkup(h.formatLoadMore(this.resultsPage))+
"</li>"),window.setTimeout(function(){i.loadMoreIfNeeded()},10)),this.postprocessResults(f,a),b(),this.opts.element.trigger({type:"select2-loaded",items:f})):this.search.removeClass("select2-active"))})}))}},cancel:function(){this.close()},blur:function(){this.opts.selectOnBlur&&this.selectHighlighted({noFocus:!0});this.close();this.container.removeClass("select2-container-active");this.search[0]===document.activeElement&&this.search.blur();this.clearSearch();this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},
focusSearch:function(){var a=this.search;a[0]!==document.activeElement&&window.setTimeout(function(){var b=a[0],c=a.val().length;a.focus();a.is(":visible")&&b===document.activeElement&&(b.setSelectionRange?b.setSelectionRange(c,c):b.createTextRange&&(b=b.createTextRange(),b.collapse(!1),b.select()))},0)},selectHighlighted:function(a){var b=this.highlight(),c=this.results.find(".select2-highlighted").closest(".select2-result").data("select2-data");c?(this.highlight(b),this.onSelect(c,a)):a&&a.noFocus&&
this.close()},getPlaceholder:function(){var a;return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder||(void 0!==(a=this.getPlaceholderOption())?a.text():void 0)},getPlaceholderOption:function(){if(this.select){var a=this.select.children("option").first();if(void 0!==this.opts.placeholderOption)return"first"===this.opts.placeholderOption&&a||"function"===typeof this.opts.placeholderOption&&this.opts.placeholderOption(this.select);
if(""===a.text()&&""===a.val())return a}},initContainerWidth:function(){var a=function(){var a,c,d,g;if("off"===this.opts.width)return null;if("element"===this.opts.width)return 0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px";if("copy"===this.opts.width||"resolve"===this.opts.width){a=this.opts.element.attr("style");if(void 0!==a){a=a.split(";");d=0;for(g=a.length;d<g;d+=1)if(c=a[d].replace(/\s/g,""),c=c.match(/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i),
null!==c&&1<=c.length)return c[1]}return"resolve"===this.opts.width?(a=this.opts.element.css("width"),0<a.indexOf("%")?a:0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px"):null}return e.isFunction(this.opts.width)?this.opts.width():this.opts.width}.call(this);null!==a&&this.container.css("width",a)}});B=A(u,{createContainer:function(){return e(document.createElement("div")).attr({"class":"select2-container"}).html("<a href='javascript:void(0)' onclick='return false;' class='select2-choice' tabindex='-1'>   <span class='select2-chosen'>&nbsp;</span><abbr class='select2-search-choice-close'></abbr>   <span class='select2-arrow'><b></b></span></a><input class='select2-focusser select2-offscreen' type='text'/><div class='select2-drop select2-display-none'>   <div class='select2-search'>       <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'/>   </div>   <ul class='select2-results'>   </ul></div>")},
enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.focusser.prop("disabled",!this.isInterfaceEnabled())},opening:function(){var a,b;0<=this.opts.minimumResultsForSearch&&this.showSearch(!0);this.parent.opening.apply(this,arguments);!1!==this.showSearchInput&&this.search.val(this.focusser.val());this.search.focus();a=this.search.get(0);a.createTextRange?(a=a.createTextRange(),a.collapse(!1),a.select()):a.setSelectionRange&&(b=this.search.val().length,a.setSelectionRange(b,
b));""===this.search.val()&&void 0!=this.nextSearchTerm&&(this.search.val(this.nextSearchTerm),this.search.select());this.focusser.prop("disabled",!0).val("");this.updateResults(!0);this.opts.element.trigger(e.Event("select2-open"))},close:function(a){this.opened()&&(this.parent.close.apply(this,arguments),a=a||{focus:!0},this.focusser.removeAttr("disabled"),a.focus&&this.focusser.focus())},focus:function(){this.opened()?this.close():(this.focusser.removeAttr("disabled"),this.focusser.focus())},isFocused:function(){return this.container.hasClass("select2-container-active")},
cancel:function(){this.parent.cancel.apply(this,arguments);this.focusser.removeAttr("disabled");this.focusser.focus()},destroy:function(){e("label[for='"+this.focusser.attr("id")+"']").attr("for",this.opts.element.attr("id"));this.parent.destroy.apply(this,arguments)},initContainer:function(){var a,b=this.container,c=this.dropdown;0>this.opts.minimumResultsForSearch?this.showSearch(!1):this.showSearch(!0);this.selection=a=b.find(".select2-choice");this.focusser=b.find(".select2-focusser");this.focusser.attr("id",
"s2id_autogen"+z());e("label[for='"+this.opts.element.attr("id")+"']").attr("for",this.focusser.attr("id"));this.focusser.attr("tabindex",this.elementTabIndex);this.search.on("keydown",this.bind(function(a){if(this.isInterfaceEnabled())if(a.which===f.PAGE_UP||a.which===f.PAGE_DOWN)l(a);else switch(a.which){case f.UP:case f.DOWN:this.moveHighlight(a.which===f.UP?-1:1);l(a);break;case f.ENTER:this.selectHighlighted();l(a);break;case f.TAB:this.selectHighlighted({noFocus:!0});break;case f.ESC:this.cancel(a),
l(a)}}));this.search.on("blur",this.bind(function(){document.activeElement===this.body().get(0)&&window.setTimeout(this.bind(function(){this.search.focus()}),0)}));this.focusser.on("keydown",this.bind(function(a){if(this.isInterfaceEnabled()&&!(a.which===f.TAB||f.isControl(a)||f.isFunctionKey(a)||a.which===f.ESC))if(!1===this.opts.openOnEnter&&a.which===f.ENTER)l(a);else if(a.which==f.DOWN||a.which==f.UP||a.which==f.ENTER&&this.opts.openOnEnter)!a.altKey&&(!a.ctrlKey&&!a.shiftKey&&!a.metaKey)&&(this.open(),
l(a));else if(a.which==f.DELETE||a.which==f.BACKSPACE)this.opts.allowClear&&this.clear(),l(a)}));E(this.focusser);this.focusser.on("keyup-change input",this.bind(function(a){0<=this.opts.minimumResultsForSearch&&(a.stopPropagation(),this.opened()||this.open())}));a.on("mousedown","abbr",this.bind(function(a){this.isInterfaceEnabled()&&(this.clear(),a.preventDefault(),a.stopImmediatePropagation(),this.close(),this.selection.focus())}));a.on("mousedown",this.bind(function(a){this.container.hasClass("select2-container-active")||
this.opts.element.trigger(e.Event("select2-focus"));this.opened()?this.close():this.isInterfaceEnabled()&&this.open();l(a)}));c.on("mousedown",this.bind(function(){this.search.focus()}));a.on("focus",this.bind(function(a){l(a)}));this.focusser.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus"));this.container.addClass("select2-container-active")})).on("blur",this.bind(function(){this.opened()||(this.container.removeClass("select2-container-active"),
this.opts.element.trigger(e.Event("select2-blur")))}));this.search.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus"));this.container.addClass("select2-container-active")}));this.initContainerWidth();this.opts.element.addClass("select2-offscreen");this.setPlaceholder()},clear:function(a){var b=this.selection.data("select2-data");if(b){var c=e.Event("select2-clearing");this.opts.element.trigger(c);c.isDefaultPrevented()||
(c=this.getPlaceholderOption(),this.opts.element.val(c?c.val():""),this.selection.find(".select2-chosen").empty(),this.selection.removeData("select2-data"),this.setPlaceholder(),!1!==a&&(this.opts.element.trigger({type:"select2-removed",val:this.id(b),choice:b}),this.triggerChange({removed:b})))}},initSelection:function(){if(this.isPlaceholderOptionSelected())this.updateSelection(null),this.close(),this.setPlaceholder();else{var a=this;this.opts.initSelection.call(null,this.opts.element,function(b){void 0!==
b&&null!==b&&(a.updateSelection(b),a.close(),a.setPlaceholder())})}},isPlaceholderOptionSelected:function(){var a;return!this.getPlaceholder()?!1:void 0!==(a=this.getPlaceholderOption())&&a.prop("selected")||""===this.opts.element.val()||void 0===this.opts.element.val()||null===this.opts.element.val()},prepareOpts:function(){var a=this.parent.prepareOpts.apply(this,arguments),b=this;"select"===a.element.get(0).tagName.toLowerCase()?a.initSelection=function(a,d){var e=a.find("option").filter(function(){return this.selected});
d(b.optionToData(e))}:"data"in a&&(a.initSelection=a.initSelection||function(b,d){var g=b.val(),f=null;a.query({matcher:function(b,c,d){(b=k(g,a.id(d)))&&(f=d);return b},callback:!e.isFunction(d)?e.noop:function(){d(f)}})});return a},getPlaceholder:function(){return this.select&&void 0===this.getPlaceholderOption()?void 0:this.parent.getPlaceholder.apply(this,arguments)},setPlaceholder:function(){var a=this.getPlaceholder();this.isPlaceholderOptionSelected()&&void 0!==a&&!(this.select&&void 0===this.getPlaceholderOption())&&
(this.selection.find(".select2-chosen").html(this.opts.escapeMarkup(a)),this.selection.addClass("select2-default"),this.container.removeClass("select2-allowclear"))},postprocessResults:function(a,b,c){var d=0,e=this;this.findHighlightableChoices().each2(function(a,b){if(k(e.id(b.data("select2-data")),e.opts.element.val()))return d=a,!1});!1!==c&&(!0===b&&0<=d?this.highlight(d):this.highlight(0));!0===b&&(b=this.opts.minimumResultsForSearch,0<=b&&this.showSearch(L(a.results)>=b))},showSearch:function(a){this.showSearchInput!==
a&&(this.showSearchInput=a,this.dropdown.find(".select2-search").toggleClass("select2-search-hidden",!a),this.dropdown.find(".select2-search").toggleClass("select2-offscreen",!a),e(this.dropdown,this.container).toggleClass("select2-with-searchbox",a))},onSelect:function(a,b){if(this.triggerSelect(a)){var c=this.opts.element.val(),d=this.data();this.opts.element.val(this.id(a));this.updateSelection(a);this.opts.element.trigger({type:"select2-selected",val:this.id(a),choice:a});this.nextSearchTerm=
this.opts.nextSearchTerm(a,this.search.val());this.close();(!b||!b.noFocus)&&this.focusser.focus();k(c,this.id(a))||this.triggerChange({added:a,removed:d})}},updateSelection:function(a){var b=this.selection.find(".select2-chosen"),c;this.selection.data("select2-data",a);b.empty();null!==a&&(c=this.opts.formatSelection(a,b,this.opts.escapeMarkup));void 0!==c&&b.append(c);a=this.opts.formatSelectionCssClass(a,b);void 0!==a&&b.addClass(a);this.selection.removeClass("select2-default");this.opts.allowClear&&
void 0!==this.getPlaceholder()&&this.container.addClass("select2-allowclear")},val:function(){var a,b=!1,c=null,d=this,e=this.data();if(0===arguments.length)return this.opts.element.val();a=arguments[0];1<arguments.length&&(b=arguments[1]);if(this.select)this.select.val(a).find("option").filter(function(){return this.selected}).each2(function(a,b){c=d.optionToData(b);return!1}),this.updateSelection(c),this.setPlaceholder(),b&&this.triggerChange({added:c,removed:e});else if(!a&&0!==a)this.clear(b);
else{if(void 0===this.opts.initSelection)throw Error("cannot call val() if initSelection() is not defined");this.opts.element.val(a);this.opts.initSelection(this.opts.element,function(a){d.opts.element.val(!a?"":d.id(a));d.updateSelection(a);d.setPlaceholder();b&&d.triggerChange({added:a,removed:e})})}},clearSearch:function(){this.search.val("");this.focusser.val("")},data:function(a){var b,c=!1;if(0===arguments.length)return b=this.selection.data("select2-data"),void 0==b&&(b=null),b;1<arguments.length&&
(c=arguments[1]);a?(b=this.data(),this.opts.element.val(!a?"":this.id(a)),this.updateSelection(a),c&&this.triggerChange({added:a,removed:b})):this.clear(c)}});C=A(u,{createContainer:function(){return e(document.createElement("div")).attr({"class":"select2-container select2-container-multi"}).html("<ul class='select2-choices'>  <li class='select2-search-field'>    <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'>  </li></ul><div class='select2-drop select2-drop-multi select2-display-none'>   <ul class='select2-results'>   </ul></div>")},
prepareOpts:function(){var a=this.parent.prepareOpts.apply(this,arguments),b=this;"select"===a.element.get(0).tagName.toLowerCase()?a.initSelection=function(a,d){var e=[];a.find("option").filter(function(){return this.selected}).each2(function(a,c){e.push(b.optionToData(c))});d(e)}:"data"in a&&(a.initSelection=a.initSelection||function(b,d){var f=w(b.val(),a.separator),h=[];a.query({matcher:function(b,c,d){(b=e.grep(f,function(b){return k(b,a.id(d))}).length)&&h.push(d);return b},callback:!e.isFunction(d)?
e.noop:function(){for(var b=[],c=0;c<f.length;c++)for(var e=f[c],j=0;j<h.length;j++){var l=h[j];if(k(e,a.id(l))){b.push(l);h.splice(j,1);break}}d(b)}})});return a},selectChoice:function(a){var b=this.container.find(".select2-search-choice-focus");if(!b.length||!(a&&a[0]==b[0]))b.length&&this.opts.element.trigger("choice-deselected",b),b.removeClass("select2-search-choice-focus"),a&&a.length&&(this.close(),a.addClass("select2-search-choice-focus"),this.opts.element.trigger("choice-selected",a))},destroy:function(){e("label[for='"+
this.search.attr("id")+"']").attr("for",this.opts.element.attr("id"));this.parent.destroy.apply(this,arguments)},initContainer:function(){var a;this.searchContainer=this.container.find(".select2-search-field");this.selection=a=this.container.find(".select2-choices");var b=this;this.selection.on("click",".select2-search-choice:not(.select2-locked)",function(){b.search[0].focus();b.selectChoice(e(this))});this.search.attr("id","s2id_autogen"+z());e("label[for='"+this.opts.element.attr("id")+"']").attr("for",
this.search.attr("id"));this.search.on("input paste",this.bind(function(){this.isInterfaceEnabled()&&(this.opened()||this.open())}));this.search.attr("tabindex",this.elementTabIndex);this.keydowns=0;this.search.on("keydown",this.bind(function(b){var d,g;if(this.isInterfaceEnabled()){++this.keydowns;var h=a.find(".select2-search-choice-focus"),j=h.prev(".select2-search-choice:not(.select2-locked)"),i=h.next(".select2-search-choice:not(.select2-locked)");d=this.search;d=e(d)[0];var k=0;g=0;"selectionStart"in
d?(k=d.selectionStart,g=d.selectionEnd-k):"selection"in document&&(d.focus(),k=document.selection.createRange(),g=document.selection.createRange().text.length,k.moveStart("character",-d.value.length),k=k.text.length-g);d=k;if(h.length&&(b.which==f.LEFT||b.which==f.RIGHT||b.which==f.BACKSPACE||b.which==f.DELETE||b.which==f.ENTER))g=h,b.which==f.LEFT&&j.length?g=j:b.which==f.RIGHT?g=i.length?i:null:b.which===f.BACKSPACE?(this.unselect(h.first()),this.search.width(10),g=j.length?j:i):b.which==f.DELETE?
(this.unselect(h.first()),this.search.width(10),g=i.length?i:null):b.which==f.ENTER&&(g=null),this.selectChoice(g),l(b),(!g||!g.length)&&this.open();else if((b.which===f.BACKSPACE&&1==this.keydowns||b.which==f.LEFT)&&0==d&&!g)this.selectChoice(a.find(".select2-search-choice:not(.select2-locked)").last()),l(b);else{this.selectChoice(null);if(this.opened())switch(b.which){case f.UP:case f.DOWN:this.moveHighlight(b.which===f.UP?-1:1);l(b);return;case f.ENTER:this.selectHighlighted();l(b);return;case f.TAB:this.selectHighlighted({noFocus:!0});
this.close();return;case f.ESC:this.cancel(b);l(b);return}b.which===f.TAB||f.isControl(b)||f.isFunctionKey(b)||b.which===f.BACKSPACE||b.which===f.ESC||b.which===f.ENTER&&(!1===this.opts.openOnEnter||b.altKey||b.ctrlKey||b.shiftKey||b.metaKey)||(this.open(),(b.which===f.PAGE_UP||b.which===f.PAGE_DOWN)&&l(b),b.which===f.ENTER&&l(b))}}}));this.search.on("keyup",this.bind(function(){this.keydowns=0;this.resizeSearch()}));this.search.on("blur",this.bind(function(a){this.container.removeClass("select2-container-active");
this.search.removeClass("select2-focused");this.selectChoice(null);this.opened()||this.clearSearch();a.stopImmediatePropagation();this.opts.element.trigger(e.Event("select2-blur"))}));this.container.on("click",".select2-choices",this.bind(function(a){this.isInterfaceEnabled()&&!(0<e(a.target).closest(".select2-search-choice").length)&&(this.selectChoice(null),this.clearPlaceholder(),this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.open(),
this.focusSearch(),a.preventDefault())}));this.container.on("focus",".select2-choices",this.bind(function(){this.isInterfaceEnabled()&&(this.container.hasClass("select2-container-active")||this.opts.element.trigger(e.Event("select2-focus")),this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"),this.clearPlaceholder())}));this.initContainerWidth();this.opts.element.addClass("select2-offscreen");this.clearSearch()},enableInterface:function(){this.parent.enableInterface.apply(this,
arguments)&&this.search.prop("disabled",!this.isInterfaceEnabled())},initSelection:function(){""===this.opts.element.val()&&""===this.opts.element.text()&&(this.updateSelection([]),this.close(),this.clearSearch());if(this.select||""!==this.opts.element.val()){var a=this;this.opts.initSelection.call(null,this.opts.element,function(b){if(b!==void 0&&b!==null){a.updateSelection(b);a.close();a.clearSearch()}})}},clearSearch:function(){var a=this.getPlaceholder(),b=this.getMaxSearchWidth();void 0!==a&&
0===this.getVal().length&&!1===this.search.hasClass("select2-focused")?(this.search.val(a).addClass("select2-default"),this.search.width(0<b?b:this.container.css("width"))):this.search.val("").width(10)},clearPlaceholder:function(){this.search.hasClass("select2-default")&&this.search.val("").removeClass("select2-default")},opening:function(){this.clearPlaceholder();this.resizeSearch();this.parent.opening.apply(this,arguments);this.focusSearch();this.updateResults(!0);this.search.focus();this.opts.element.trigger(e.Event("select2-open"))},
close:function(){this.opened()&&this.parent.close.apply(this,arguments)},focus:function(){this.close();this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(a){var b=[],c=[],d=this;e(a).each(function(){0>j(d.id(this),b)&&(b.push(d.id(this)),c.push(this))});a=c;this.selection.find(".select2-search-choice").remove();e(a).each(function(){d.addSelectedChoice(this)});d.postprocessResults()},tokenize:function(){var a=this.search.val(),a=this.opts.tokenizer.call(this,
a,this.data(),this.bind(this.onSelect),this.opts);null!=a&&void 0!=a&&(this.search.val(a),0<a.length&&this.open())},onSelect:function(a,b){this.triggerSelect(a)&&(this.addSelectedChoice(a),this.opts.element.trigger({type:"selected",val:this.id(a),choice:a}),(this.select||!this.opts.closeOnSelect)&&this.postprocessResults(a,!1,!0===this.opts.closeOnSelect),this.opts.closeOnSelect?(this.close(),this.search.width(10)):0<this.countSelectableResults()?(this.search.width(10),this.resizeSearch(),0<this.getMaximumSelectionSize()&&
this.val().length>=this.getMaximumSelectionSize()&&this.updateResults(!0),this.positionDropdown()):(this.close(),this.search.width(10)),this.triggerChange({added:a}),(!b||!b.noFocus)&&this.focusSearch())},cancel:function(){this.close();this.focusSearch()},addSelectedChoice:function(a){var b=!a.locked,c=e("<li class='select2-search-choice'>    <div></div>    <a href='#' onclick='return false;' class='select2-search-choice-close' tabindex='-1'></a></li>"),d=e("<li class='select2-search-choice select2-locked'><div></div></li>"),
c=b?c:d,d=this.id(a),f=this.getVal(),h;h=this.opts.formatSelection(a,c.find("div"),this.opts.escapeMarkup);void 0!=h&&c.find("div").replaceWith("<div>"+h+"</div>");h=this.opts.formatSelectionCssClass(a,c.find("div"));void 0!=h&&c.addClass(h);if(b)c.find(".select2-search-choice-close").on("mousedown",l).on("click dblclick",this.bind(function(a){this.isInterfaceEnabled()&&(e(a.target).closest(".select2-search-choice").fadeOut("fast",this.bind(function(){this.unselect(e(a.target));this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus");
this.close();this.focusSearch()})).dequeue(),l(a))})).on("focus",this.bind(function(){this.isInterfaceEnabled()&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"))}));c.data("select2-data",a);c.insertBefore(this.searchContainer);f.push(d);this.setVal(f)},unselect:function(a){var b=this.getVal(),c,d,a=a.closest(".select2-search-choice");if(0===a.length)throw"Invalid argument: "+a+". Must be .select2-search-choice";if(c=a.data("select2-data")){for(;0<=
(d=j(this.id(c),b));)b.splice(d,1),this.setVal(b),this.select&&this.postprocessResults();b=e.Event("select2-removing");b.val=this.id(c);b.choice=c;this.opts.element.trigger(b);b.isDefaultPrevented()||(a.remove(),this.opts.element.trigger({type:"select2-removed",val:this.id(c),choice:c}),this.triggerChange({removed:c}))}},postprocessResults:function(a,b,c){var d=this.getVal(),b=this.results.find(".select2-result"),e=this.results.find(".select2-result-with-children"),f=this;b.each2(function(a,b){var c=
f.id(b.data("select2-data"));0<=j(c,d)&&(b.addClass("select2-selected"),b.find(".select2-result-selectable").addClass("select2-selected"))});e.each2(function(a,b){!b.is(".select2-result-selectable")&&0===b.find(".select2-result-selectable:not(.select2-selected)").length&&b.addClass("select2-selected")});-1==this.highlight()&&!1!==c&&f.highlight(0);!this.opts.createSearchChoice&&0<!b.filter(".select2-result:not(.select2-selected)").length&&(!a||a&&!a.more&&0===this.results.find(".select2-no-results").length)&&
s(f.opts.formatNoMatches,"formatNoMatches")&&this.results.append("<li class='select2-no-results'>"+f.opts.formatNoMatches(f.search.val())+"</li>")},getMaxSearchWidth:function(){return this.selection.width()-(this.search.outerWidth(!1)-this.search.width())},resizeSearch:function(){var a,b,c,d,f=this.search.outerWidth(!1)-this.search.width();a=this.search;v||(c=a[0].currentStyle||window.getComputedStyle(a[0],null),v=e(document.createElement("div")).css({position:"absolute",left:"-10000px",top:"-10000px",
display:"none",fontSize:c.fontSize,fontFamily:c.fontFamily,fontStyle:c.fontStyle,fontWeight:c.fontWeight,letterSpacing:c.letterSpacing,textTransform:c.textTransform,whiteSpace:"nowrap"}),v.attr("class","select2-sizer"),e("body").append(v));v.text(a.val());a=v.width()+10;b=this.search.offset().left;c=this.selection.width();d=this.selection.offset().left;b=c-(b-d)-f;b<a&&(b=c-f);40>b&&(b=c-f);0>=b&&(b=a);this.search.width(Math.floor(b))},getVal:function(){var a;if(this.select)return a=this.select.val(),
null===a?[]:a;a=this.opts.element.val();return w(a,this.opts.separator)},setVal:function(a){var b;this.select?this.select.val(a):(b=[],e(a).each(function(){0>j(this,b)&&b.push(this)}),this.opts.element.val(0===b.length?"":b.join(this.opts.separator)))},buildChangeDetails:function(a,b){for(var b=b.slice(0),a=a.slice(0),c=0;c<b.length;c++)for(var d=0;d<a.length;d++)k(this.opts.id(b[c]),this.opts.id(a[d]))&&(b.splice(c,1),0<c&&c--,a.splice(d,1),d--);return{added:b,removed:a}},val:function(a,b){var c,
d=this;if(0===arguments.length)return this.getVal();c=this.data();c.length||(c=[]);if(!a&&0!==a)this.opts.element.val(""),this.updateSelection([]),this.clearSearch(),b&&this.triggerChange({added:this.data(),removed:c});else{this.setVal(a);if(this.select)this.opts.initSelection(this.select,this.bind(this.updateSelection)),b&&this.triggerChange(this.buildChangeDetails(c,this.data()));else{if(void 0===this.opts.initSelection)throw Error("val() cannot be called if initSelection() is not defined");this.opts.initSelection(this.opts.element,
function(a){var f=e.map(a,d.id);d.setVal(f);d.updateSelection(a);d.clearSearch();b&&d.triggerChange(d.buildChangeDetails(c,d.data()))})}this.clearSearch()}},onSortStart:function(){if(this.select)throw Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");this.search.width(0);this.searchContainer.hide()},onSortEnd:function(){var a=[],b=this;this.searchContainer.show();this.searchContainer.appendTo(this.searchContainer.parent());this.resizeSearch();
this.selection.find(".select2-search-choice").each(function(){a.push(b.opts.id(e(this).data("select2-data")))});this.setVal(a);this.triggerChange()},data:function(a,b){var c=this,d,f;if(0===arguments.length)return this.selection.find(".select2-search-choice").map(function(){return e(this).data("select2-data")}).get();f=this.data();a||(a=[]);d=e.map(a,function(a){return c.opts.id(a)});this.setVal(d);this.updateSelection(a);this.clearSearch();b&&this.triggerChange(this.buildChangeDetails(f,this.data()))}});
e.fn.select2=function(){var a=Array.prototype.slice.call(arguments,0),b,c,d,f,h,k="val destroy opened open close focus isFocused container dropdown onSortStart onSortEnd enable disable readonly positionDropdown data search".split(" "),i=["opened","isFocused","container","dropdown"],l=["val","data"],n={search:"externalSearch"};this.each(function(){if(0===a.length||"object"===typeof a[0])b=0===a.length?{}:e.extend({},a[0]),b.element=e(this),"select"===b.element.get(0).tagName.toLowerCase()?h=b.element.prop("multiple"):
(h=b.multiple||!1,"tags"in b&&(b.multiple=h=!0)),c=h?new C:new B,c.init(b);else if("string"===typeof a[0]){if(0>j(a[0],k))throw"Unknown method: "+a[0];f=void 0;c=e(this).data("select2");if(void 0!==c&&(d=a[0],"container"===d?f=c.container:"dropdown"===d?f=c.dropdown:(n[d]&&(d=n[d]),f=c[d].apply(c,a.slice(1))),0<=j(a[0],i)||j(a[0],l)&&1==a.length))return!1}else throw"Invalid arguments to select2 plugin: "+a;});return void 0===f?this:f};e.fn.select2.defaults={width:"copy",loadMorePadding:0,closeOnSelect:!0,
openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(a,b,c,d){b=[];G(a.text,c.term,b,d);return b.join("")},formatSelection:function(a,b,c){return a?c(a.text):void 0},sortResults:function(a){return a},formatResultCssClass:function(){},formatSelectionCssClass:function(){},formatNoMatches:function(){return"No matches found"},formatInputTooShort:function(a,b){var c=b-a.length;return"Please enter "+c+" more character"+(1==c?"":"s")},formatInputTooLong:function(a,
b){var c=a.length-b;return"Please delete "+c+" character"+(1==c?"":"s")},formatSelectionTooBig:function(a){return"You can only select "+a+" item"+(1==a?"":"s")},formatLoadMore:function(){return"Loading more results..."},formatSearching:function(){return"Searching..."},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(a){return a.id},matcher:function(a,b){return 0<=n(""+b).toUpperCase().indexOf(n(""+a).toUpperCase())},separator:",",tokenSeparators:[],
tokenizer:N,escapeMarkup:H,blurOnChange:!1,selectOnBlur:!1,adaptContainerCssClass:function(a){return a},adaptDropdownCssClass:function(){return null},nextSearchTerm:function(){}};e.fn.select2.ajaxDefaults={transport:e.ajax,params:{type:"GET",cache:!1,dataType:"json"}};window.Select2={query:{ajax:I,local:J,tags:K},util:{debounce:F,markMatch:G,escapeMarkup:H,stripDiacritics:n},"class":{"abstract":u,single:B,multi:C}}}})(jQuery);;
;/* module-key = 'com.atlassian.auiplugin:aui-select2', location = 'js/aui-select2.js' */
(function(c){var e=c.fn.select2;c.fn.auiSelect2=function(d){var b;if(c.isPlainObject(d)){var a=c.extend({},d);b=a.hasAvatar?" aui-has-avatar":"";a.containerCssClass="aui-select2-container"+b+(a.containerCssClass?" "+a.containerCssClass:"");a.dropdownCssClass="aui-select2-drop aui-dropdown2 aui-style-default"+b+(a.dropdownCssClass?" "+a.dropdownCssClass:"");b=Array.prototype.slice.call(arguments,1);b.unshift(a)}else b=arguments.length?arguments:[{containerCssClass:"aui-select2-container",dropdownCssClass:"aui-select2-drop aui-dropdown2 aui-style-default"}];
return e.apply(this,b)}})(AJS.$);;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:searchable-multi-selector', location = '/static/widget/searchable-multi-selector/searchable-multi-selector.js' */
define("widget/searchable-multi-selector","aui jquery lodash util/ajax util/events util/function util/promise".split(" "),function(f,h,c,m,n,p,q){function l(a,b){this._$field=a;var d=b=this._options=h.extend(!0,{},this.defaults,b);if(!d.dataSource)if(d.url)d.dataSource=new g(d.url,d.urlParams);else throw"either a dataSource or url must be supplied";d.dataSource=new r(d.dataSource,d.debounceInterval);if(!c.isFunction(b.selectionTemplate))throw"a selectionTemplate must be a function";if(!c.isFunction(b.resultTemplate))throw"a resultTemplate must be a function";
this._selectedItems=[];this._initialItems=[];this._excludedIds=c.map(b.excludedItems,b.generateId);t(this);this.setSelectedItems(b.initialItems.slice(0))}function g(a,b){this._url=a;this._urlParams=b;this.clear();this._pageReceived=c.bind(this._pageReceived,this)}function r(a,b){this.clear=c.bind(a.clear,a);this.nextPage=q.delay(c.bind(a.nextPage,a),b)}function u(a){var b=h(".select2-drop-active \x3e .select2-results");b.length&&0===b.children(".select2-result-selectable").length&&b.children(".select2-disabled").length&&
h('\x3cli class\x3d"select2-no-results"\x3e\x3c/li\x3e').html(a._options.noMatchesTemplate()).appendTo(b)}function v(a,b){return{id:a.generateId(b),text:a.generateText(b),item:b}}function w(a,b){return c.reject(a,function(a){return a.id===b.id})}function x(a){a&&a.abort&&a.abort()}function t(a){var b=a._options,d=a._$field,f=a._excludedIds,g=c.bind(v,null,b),k=[];d.auiSelect2({hasAvatar:b.hasAvatar,query:function(a){1>=a.page&&(b.dataSource.clear(),c.forEach(k,x),k=[]);var d=b.prepareSearchTerm(h.trim(a.term)),
e=b.dataSource.nextPage(d),e=e.then(function(a){return{results:c.chain(a.values).map(g).filter(function(a){return-1===c.indexOf(f,a.id)}).value(),more:!a.isLastPage}}).promise(e);k.push(e);e.always(function(){k=c.reject(k,p.eq(e))}).done(a.callback)},formatSelection:function(a){return b.selectionTemplate(a.item)},formatResult:function(a){return b.resultTemplate(a.item)},initSelection:function(b,d){var e=c.map(a._initialItems,g);a._selectedItems=e;d(e)},separator:"|!|",multiple:!0,minimumInputLength:b.minimumInputLength,
formatInputTooShort:b.inputTooShortTemplate,formatNoMatches:b.noMatchesTemplate,formatSearching:b.searchingTemplate,containerCssClass:["searchable-multi-selector",b.extraClasses].join(" "),dropdownCssClass:["searchable-multi-selector-dropdown",b.dropdownClasses].join(" "),openOnEnter:!1}).on("change",function(b){b.removed&&(a._selectedItems=w(a._selectedItems,b.removed));b.added&&a._selectedItems.push(b.added);a.trigger("change")}).on("open",c.bind(u,null,this))}h.extend(!0,l.prototype,n.createEventMixin("stash.widget.searchable.multi.selector"),
{defaults:{minimumInputLength:2,extraClasses:null,dropdownClasses:null,debounceInterval:300,initialItems:[],excludedItems:[],urlParams:{},hasAvatar:!1,inputTooShortTemplate:function(){return f.escapeHtml("Start typing to search")},noMatchesTemplate:function(){return f.escapeHtml("No matches found")},searchingTemplate:function(){return f.escapeHtml("Searching...")},generateId:function(a){return a.id||a.name},
generateText:function(a){return a.displayName||a.name},prepareSearchTerm:c.identity},getSelectedItems:function(){return c.pluck(this._selectedItems,"item")},setSelectedItems:function(a){this._initialItems=a.slice(0);this._$field.auiSelect2("val",c.map(a,this._options.generateId))},clearSelectedItems:function(){this.setSelectedItems([])}});g.prototype.clear=function(){this._nextPageStart=0};g.prototype.nextPage=function(a){return m.rest({url:this._url,data:h.extend({},this._urlParams,{start:this._nextPageStart,
filter:a})}).done(this._pageReceived)};g.prototype._pageReceived=function(a){this._nextPageStart=a.nextPageStart||a.start+a.size};l.PagedDataSource=g;return l});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:user-multi-selector', location = '/static/feature/user/user-multi-selector/user-multi-selector.js' */
define("feature/user/user-multi-selector",["aui","jquery","stash/api/util/navbuilder","widget/searchable-multi-selector"],function(b,e,f,c){function d(a,b){c.call(this,a,b)}e.extend(!0,d.prototype,c.prototype,{defaults:{hasAvatar:!0,url:f.rest().users().build(),selectionTemplate:function(a){return stash.widget.avatarWithName({size:"xsmall",person:a})},urlParams:{avatarSize:stash.widget.avatarSizeInPx({size:"xsmall"})},resultTemplate:function(a){return stash.widget.avatarWithNameAndEmail({size:"small",
person:a})},generateId:function(a){return a.name},inputTooShortTemplate:function(){return b.escapeHtml("Start typing to search for users")},noMatchesTemplate:function(){return b.escapeHtml("No matching users found")},prepareSearchTerm:function(a){return a.replace(/^@/,"")}}});return d});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:pull-request-details-form', location = '/static/feature/pull-request/details-form/pull-request-details.soy' */
// This file was automatically generated from pull-request-details.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace stash.feature.pullRequest.
 */

if (typeof stash == 'undefined') { var stash = {}; }
if (typeof stash.feature == 'undefined') { stash.feature = {}; }
if (typeof stash.feature.pullRequest == 'undefined') { stash.feature.pullRequest = {}; }


stash.feature.pullRequest.detailsForm = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<fieldset class="pull-request-details">' + aui.form.textField({id: 'title', extraClasses: 'pull-request-title', name: 'title', value: opt_data.title ? opt_data.title : '', errorTexts: opt_data.fieldErrors && opt_data.fieldErrors.title ? opt_data.fieldErrors.title : null, isRequired: true, maxLength: 255, labelContent: '' + soy.$$escapeHtml("Title"), fieldWidth: 'long'}) + widget.aui.form.field({id: 'description', labelContent: '' + soy.$$escapeHtml("Description"), errors: opt_data.fieldErrors && opt_data.fieldErrors.description ? opt_data.fieldErrors.description : null, fieldGroupClass: 'pull-request-description', input: '' + stash.widget.markupEditor.editor({textareaId: 'pull-request-description', textareaName: 'description', text: opt_data.description, previewButtonTitle: "View a preview of this description", attachmentButtonTitle: "Attach a file to this pull request. You can also drag and drop a file to attach it.", attachmentButtonAccessibilityText: "Attach file"})}) + aui.form.textField({id: 'reviewers', extraClasses: 'pull-request-reviewers', name: 'reviewers', errorTexts: opt_data.fieldErrors && opt_data.fieldErrors.reviewers ? opt_data.fieldErrors.reviewers : null, labelContent: '' + soy.$$escapeHtml("Reviewers"), descriptionText: "Reviewers can approve a pull request to let others know when it is good to merge", fieldWidth: 'long'}) + ((opt_data.pluginFieldsContent) ? soy.$$filterNoAutoescape(opt_data.pluginFieldsContent) : '') + '</fieldset>';
};
if (goog.DEBUG) {
  stash.feature.pullRequest.detailsForm.soyTemplateName = 'stash.feature.pullRequest.detailsForm';
}
;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:keyboard-controller', location = '/static/widget/keyboard-controller.js' */
define("widget/keyboard-controller",["aui","jquery"],function(r,f){function n(b,d){if(!(this instanceof n))return new n(b,d);var a=f(b),h;a.on("keydown",h=function(a){a.keyCode in d&&(d[a.keyCode](a)||a.preventDefault())});this.destroy=function(){a.off("keydown",h)};return this}function p(b,d){function a(a){a.focus().addClass(d.focusedClass)}d=f.extend({},p.defaults,d);var h={};h[r.keyCode.TAB]=function(h){var e,l,g,m=h.target;e=f("a:visible, :input:visible:enabled, :checkbox:visible:enabled, :radio:visible:enabled, [tabindex]",
b).not("[tabindex\x3d-1]").filter(function(){return"hidden"!==f(this).css("visibility")});g=e.last();l=e.first();e.removeClass(d.focusedClass);if(h.shiftKey&&m===l[0]){if(!d.wrapAround)return!0;a(g)}else if(h.shiftKey||m!==g[0])h.shiftKey?a(e.eq(e.index(m)-1)):a(e.eq(e.index(m)+1));else{if(!d.wrapAround)return!0;a(l)}};return new n(b,h)}function u(b,d,a){function h(c){do{var f=c.find("\x3e:first-child"),b=c.next();c=f.length?f:b.length?b:c.parentsUntil(l[0]).next().first()}while(c.length&&!c.is(a.itemSelector));
return c}function p(c){do{var b=c.prev();if(b.length){for(;(c=b.find("\x3e:last-child")).length;)b=c;c=b}else c=c.parent(),c[0]===l[0]&&(c=f())}while(c.length&&!c.is(a.itemSelector));return c}function e(c){return function x(b){var d=f(a.itemSelector,l),e=d.filter(function(){return f(this).hasClass(a.focusedClass)}),g=!1,k;if(e.length)k=a.adjacentItems?e[c](a.itemSelector):"next"===c?h(e):p(e);else if("next"===c)k=d.first();else if(a.wrapAround)k=d.last();else return;q=!0;if(!k.length){if("next"===
c&&a.requestMore&&!v){w?q=!1:(q=!1,(k=a.requestMore())?(w=!0,k.done(function(a){v=a;q||x(b)}).always(function(){q=w=!1})):(v=!0,x(b)));return}if(a.wrapAround)g=!0,k=d["next"===c?"first":"last"]();else return}e.removeClass(a.focusedClass);k.addClass(a.focusedClass);d=k[c]();g=!g&&d.length?d:k;d=document.activeElement;a.focusIntoView&&d?(e=g.attr("tabindex"),g.attr("tabindex","0"),g.focus(),d.focus(),null==e?g.removeAttr("tabindex"):g.attr("tabindex",e)):k[0].scrollIntoView(!1);m.fire(k,b)}}a=f.extend({},
u.defaults,a);var l=f(d),g=f.Callbacks(),m=f.Callbacks();a.onSelect&&g.add(a.onSelect);a.onFocus&&m.add(a.onFocus);var v=!1,w=!1,q=!1,t={};d=t[r.keyCode.UP]=e("prev");var y=t[r.keyCode.DOWN]=e("next");t[r.keyCode.ENTER]=function(c){var b=f(a.itemSelector,l).filter(function(){return f(this).hasClass(a.focusedClass)});b.length&&g.fire(b,c)};b=new n(b,t);b.setListElement=function(a){l=f(a)};b.blur=function(){f(a.itemSelector,l).removeClass(a.focusedClass)};b.focus=function(){m.add.apply(m,arguments);
return this};b.select=function(){g.add.apply(g,arguments);return this};b.moveToNext=y;b.moveToPrev=d;return b}p.defaults={focusedClass:"item-focused",wrapAround:!0};u.defaults={itemSelector:"li",focusedClass:"item-focused",wrapAround:!1,adjacentItems:!0,requestMore:void 0,onFocus:void 0,onSelect:void 0};return{KeyboardController:n,TabKeyboardController:p,ListKeyboardController:u}});;
;/* module-key = 'com.atlassian.stash.stash-bower-components-plugin:jquery-mousewheel', location = '/static/bower/jquery-mousewheel/jquery.mousewheel.js' */
(function(c){"function"===typeof define&&define.amd?define(["jquery"],c):c(jQuery)})(function(c){function m(b){var a=b||window.event,g=[].slice.call(arguments,1),d=0,e=0,h=0,f=0,f=0;b=c.event.fix(a);b.type="mousewheel";a.wheelDelta&&(d=a.wheelDelta);a.detail&&(d=-1*a.detail);a.deltaY&&(d=h=-1*a.deltaY);a.deltaX&&(e=a.deltaX,d=-1*e);void 0!==a.wheelDeltaY&&(h=a.wheelDeltaY);void 0!==a.wheelDeltaX&&(e=-1*a.wheelDeltaX);f=Math.abs(d);if(!l||f<l)l=f;f=Math.max(Math.abs(h),Math.abs(e));if(!k||f<k)k=f;
a=0<d?"floor":"ceil";d=Math[a](d/l);e=Math[a](e/k);h=Math[a](h/k);g.unshift(b,d,e,h);return(c.event.dispatch||c.event.handle).apply(this,g)}var n=["wheel","mousewheel","DOMMouseScroll"],g="onwheel"in document||9<=document.documentMode?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],l,k;if(c.event.fixHooks)for(var p=n.length;p;)c.event.fixHooks[n[--p]]=c.event.mouseHooks;c.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var b=g.length;b;)this.addEventListener(g[--b],
m,!1);else this.onmousewheel=m},teardown:function(){if(this.removeEventListener)for(var b=g.length;b;)this.removeEventListener(g[--b],m,!1);else this.onmousewheel=null}};c.fn.extend({mousewheel:function(b){return b?this.bind("mousewheel",b):this.trigger("mousewheel")},unmousewheel:function(b){return this.unbind("mousewheel",b)}})});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:searchable-selector', location = '/static/widget/searchable-selector/searchable-selector.soy' */
// This file was automatically generated from searchable-selector.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace stash.widget.
 */

if (typeof stash == 'undefined') { var stash = {}; }
if (typeof stash.widget == 'undefined') { stash.widget = {}; }


stash.widget.searchableSelector = function(opt_data, opt_ignored) {
  var output = '<div class="searchable-selector ' + ((opt_data.extraClasses) ? soy.$$escapeHtml(opt_data.extraClasses) : '') + '" id="' + soy.$$escapeHtml(opt_data.id) + '">' + ((opt_data.searchable) ? '<header><label class="assistive" for="' + soy.$$escapeHtml(opt_data.id) + '-search-input">' + soy.$$escapeHtml(opt_data.searchPlaceholder ? opt_data.searchPlaceholder : "Search") + '</label><input id="' + soy.$$escapeHtml(opt_data.id) + '-search-input" type="text" name="filter" class="filter" placeholder="' + soy.$$escapeHtml(opt_data.searchPlaceholder ? opt_data.searchPlaceholder : "Search") + '"/></header>' : '');
  if (opt_data.tabs && opt_data.tabs.length > 1) {
    output += '<div class="aui-tabs horizontal-tabs"><ul class="tabs-menu">';
    var tabList24 = opt_data.tabs;
    var tabListLen24 = tabList24.length;
    for (var tabIndex24 = 0; tabIndex24 < tabListLen24; tabIndex24++) {
      var tabData24 = tabList24[tabIndex24];
      output += aui.tabMenuItem({url: '#' + soy.$$escapeHtml(opt_data.id) + '-tab-pane-' + soy.$$escapeHtml(tabIndex24), text: tabData24.label, isActive: tabIndex24 == 0, extraAttributes: {'data-tab-id': tabIndex24}});
    }
    output += '</ul>';
    var tabList36 = opt_data.tabs;
    var tabListLen36 = tabList36.length;
    for (var tabIndex36 = 0; tabIndex36 < tabListLen36; tabIndex36++) {
      var tabData36 = tabList36[tabIndex36];
      output += aui.tabPane({content: '<ul class="results-list"></ul><div class="spinner"></div>', id: opt_data.id + '-tab-pane-' + tabIndex36, isActive: tabIndex36 == 0, extraClasses: 'results', extraAttributes: {'data-tab-id': tabIndex36}});
    }
    output += '</div>';
  } else {
    output += '<div class="results"><ul class="results-list"></ul><div class="spinner"></div></div>';
  }
  output += '</div>';
  return output;
};
if (goog.DEBUG) {
  stash.widget.searchableSelector.soyTemplateName = 'stash.widget.searchableSelector';
}


stash.widget.searchableSelectorResults = function(opt_data, opt_ignored) {
  var output = '';
  var resultList50 = opt_data.values;
  var resultListLen50 = resultList50.length;
  for (var resultIndex50 = 0; resultIndex50 < resultListLen50; resultIndex50++) {
    var resultData50 = resultList50[resultIndex50];
    output += '<li class="result ' + ((opt_data.isPreload) ? 'preload' : '') + '"><a href="' + soy.$$escapeHtml(resultData50.url ? resultData50.url : '#') + '" tabindex="-1" data-id="' + soy.$$escapeHtml(resultData50.id) + '" data-item="' + soy.$$escapeHtml(JSON.stringify(resultData50).replace(/\//g, '\\/')) + '">' + soy.$$escapeHtml(resultData50.name) + '</a></li>';
  }
  output += (opt_data.isLastPage) ? (opt_data.size > 0) ? '<li class="no-results">' + soy.$$escapeHtml(opt_data.noMoreResultsText ? opt_data.noMoreResultsText : "No more results") + '</li>' : '<li class="no-results">' + soy.$$escapeHtml(opt_data.noResultsText ? opt_data.noResultsText : "No results") + '</li>' : '';
  return output;
};
if (goog.DEBUG) {
  stash.widget.searchableSelectorResults.soyTemplateName = 'stash.widget.searchableSelectorResults';
}


stash.widget.searchableSelectorTrigger = function(opt_data, opt_ignored) {
  return '' + stash.widget.searchableSelectorTriggerGeneric({id: opt_data.id, content: '' + stash.widget.searchableSelectorTriggerContent(opt_data), autofocus: opt_data.autofocus, extraClasses: opt_data.extraClasses, extraAttributes: opt_data.extraAttributes});
};
if (goog.DEBUG) {
  stash.widget.searchableSelectorTrigger.soyTemplateName = 'stash.widget.searchableSelectorTrigger';
}


stash.widget.searchableSelectorTriggerGeneric = function(opt_data, opt_ignored) {
  return '<button ' + ((opt_data.id) ? 'id="' + soy.$$escapeHtml(opt_data.id) + '" ' : '') + 'type="button" class="aui-button searchable-selector-trigger' + aui.renderExtraClasses(opt_data) + '"' + ((opt_data.autofocus) ? ' autofocus' : '') + ((opt_data.titleContent) ? ' title="' + soy.$$filterNoAutoescape(opt_data.titleContent) + '"' : '') + aui.renderExtraAttributes(opt_data) + '>' + soy.$$filterNoAutoescape(opt_data.content) + '</button>';
};
if (goog.DEBUG) {
  stash.widget.searchableSelectorTriggerGeneric.soyTemplateName = 'stash.widget.searchableSelectorTriggerGeneric';
}


stash.widget.searchableSelectorTriggerWithField = function(opt_data, opt_ignored) {
  return '' + stash.widget.searchableSelectorTrigger(opt_data) + widget.aui.form.input({id: opt_data.fieldId ? opt_data.fieldId : opt_data.id + '-field', name: opt_data.fieldName ? opt_data.fieldName : opt_data.id + '-field', initialValue: opt_data.item ? opt_data.item.id : null, type: 'hidden'});
};
if (goog.DEBUG) {
  stash.widget.searchableSelectorTriggerWithField.soyTemplateName = 'stash.widget.searchableSelectorTriggerWithField';
}


stash.widget.searchableSelectorTriggerContent = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '' + ((opt_data.item) ? '<span class="name" data-id="' + soy.$$escapeHtml(opt_data.item.id) + '" data-item="' + soy.$$escapeHtml(JSON.stringify(opt_data.item).replace(/\//g, '\\/')) + '">' + soy.$$escapeHtml(opt_data.item.name) + '</span>' : '<span class="placeholder">' + soy.$$escapeHtml(opt_data.text ? opt_data.text : "Select item") + '</span>');
};
if (goog.DEBUG) {
  stash.widget.searchableSelectorTriggerContent.soyTemplateName = 'stash.widget.searchableSelectorTriggerContent';
}
;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:searchable-selector', location = '/static/widget/searchable-selector/searchable-selector.js' */
define("widget/searchable-selector","aui jquery lodash util/ajax util/dom-event util/events util/navigator util/promise widget/keyboard-controller widget/paged-scrollable".split(" "),function(g,e,f,p,q,r,m,t,n,u){function b(a,c){return this.init.apply(this,arguments)}var v=n.TabKeyboardController,w=n.ListKeyboardController,x=0;b.prototype.defaults={id:null,extraClasses:null,namespace:"searchable-selector",url:null,tabs:null,searchable:!0,searchPlaceholder:null,queryParamKey:"filter",queryParamsBuilder:null,
pageSize:20,statusCodeHandlers:{},followLinks:!1,hideDialogOnSelect:!0,itemSelectedEvent:"stash.widget.searchableSelector.itemSelected",context:null,field:null,itemDataKey:"item",template:stash.widget.searchableSelector,resultsTemplate:stash.widget.searchableSelectorResults,noResultsText:null,noMoreResultsText:null,triggerContentTemplate:stash.widget.searchableSelectorTriggerContent,triggerPlaceholder:null,preloadData:null,alwaysShowPreload:!1,dataTransform:null,postOptionsInit:null,clearResultsOnSearch:!0,
popUpOffsetX:0,popUpOffsetY:-1,width:350};b.constructDataPageFromPreloadArray=function(a){return f.isArray(a)?{values:a,isLastPage:!1,size:a.length,start:0,limit:a.length}:null};b.prototype.tabOptionKeys="label url resultsTemplate noResultsText noMoreResultsText dataTransform queryParamKey preloadData searchPlaceholder".split(" ");b.prototype.init=function(a,c){var d=this;this.instanceId=x++;this.$trigger=e(a);this.setOptions(c);this.scrollables=[];this.scrollableDataStores=[];this._getOptionVal("id")||
(this.options.id=this._getOptionVal("namespace")+"-"+this.instanceId);this.options.tabs&&this.options.tabs.length&&(this.tabs=f.map(this.options.tabs,function(a){return e.extend(!0,{},f.pick(d.options,d.tabOptionKeys),a)}));var b=this._getOption("postOptionsInit");f.isFunction(b)&&b.call(this);var h;this.blockShortcutPropagation=h=function(a){var c=this===document;a.keyCode===g.keyCode.ESCAPE?(a[c?"stopImmediatePropagation":"stopPropagation"](),d.dialog.hide()):c||a.stopPropagation()};var l=d._getOptionVal("externalSearchField");
this.dialog=g.InlineDialog(this.$trigger,this._getOptionVal("id"),function(a,c,b){a.data("initialised")||d._initialiseDialogContent(a);b();l||f.defer(f.bind(d.setFocus,d))},{offsetX:this._getOptionVal("popUpOffsetX"),offsetY:this._getOptionVal("popUpOffsetY"),noBind:!!l,width:this._getOptionVal("width"),hideCallback:function(){(d.$content.is(document.activeElement)||e.contains(d.$content[0],document.activeElement))&&d.$trigger.focus();e(document).add(d.dialog).off("keydown keypress",h)},initCallback:function(){e(document).add(d.dialog).on("keydown keypress",
h)}});this._getOptionVal("searchable")&&l&&(this.$searchField=e(l),this._initialiseSearchOnInput());this.$trigger.find(".name").length&&(this._selectedItem=this._getItemFromTrigger());g.bind("hide.dialog",function(a,c){d.$trigger.closest(c.dialog.popup.element).length&&d.dialog.hide()});return this};b.prototype.getSelectedItem=function(){return this._selectedItem};b.prototype.setSelectedItem=function(a){e.isPlainObject(a)&&null!=a.id&&(this._selectedItem&&this._selectedItem.id===a.id||this._itemSelected(a))};
b.prototype.clearSelection=function(){this._selectedItem=null;this._getOptionVal("field")&&e(this._getOptionVal("field")).val("");this.resetTrigger()};b.prototype._getItemFromTrigger=function(){var a=this.$trigger.find(".name");return e.extend({},this._buildObjectFromElementDataAttributes(a),{name:a.text()})};b.prototype._buildObjectFromElementDataAttributes=function(a){return e(a).data(this._getOptionVal("itemDataKey"))};b.prototype._initialiseDialogContent=function(a){var c=this,d=this._getOptionVal("searchable"),
b=this._getOptionVal("externalSearchField");a.append(this._getOption("template")({id:this._getOptionVal("id"),tabs:this.tabs,searchable:!b&&d,searchPlaceholder:this._getOptionVal("searchPlaceholder"),extraClasses:this._getOptionVal("extraClasses")}));a.closest(".aui-inline-dialog").addClass("searchable-selector-dialog");d&&!b&&(this.$searchField=a.find("input.filter"),this._initialiseSearchOnInput());this.tabs&&(b=a.find("ul.tabs-menu a"),b.on("tabSelect",function(a,b){c.currentTabId=b.tab.parent().data("tab-id");
(c._getOptionVal("searchable")||0===c._getDataStoreForScrollable().length)&&c._populateScrollable();c._resultsKeyboardController.setListElement(c._getCurrentScrollable().$scrollElement.find("ul.results-list"));d&&c.$searchField.focus();c._updateSearchPlaceholder()}),b.on("click",function(a){e(this).parent().hasClass("active-tab")&&(a.stopPropagation(),a.preventDefault())}),b.on("keydown",function(a){if(a.keyCode===g.keyCode.ENTER){var c=e(this);c.parent("li").hasClass("active-tab")?a.preventDefault():
c.click()}}),g.tabs.setup());a.find(".results").each(function(){c.scrollables.push(c._createScrollable(e(this)));c.scrollableDataStores.push([])});a.on("click",".result a",function(a){c.selectItem(a,e(this))});this._initialiseKeyboardNavigation(a);this._initialiseMouseNavigation(a);this._populateScrollable();this.$content=a;a.data("initialised",!0)};b.prototype._initialiseSearchOnInput=function(){var a=this,c=this._getSearchTerm(),d=this._getOptionVal("externalSearchField"),b=t.delay(f.bind(this._handleSearchInput,
this),350),e=f.bind(function(){c!==(c=this._getSearchTerm())&&(this._pendingSearch?this._pendingSearch.reset(c):(this._pendingSearch=b(c),this._pendingSearch.always(function(){a._pendingSearch=null})))},this);this.$searchField.on("keydown.searchable-selector input.searchable-selector",f.bind(function(b){d&&(b.which===g.keyCode.ESCAPE?this._pendingSearch&&this._pendingSearch.abort():b.which===g.keyCode.DOWN&&this._shouldSearch(c)?this.dialog.show():b.which!==g.keyCode.ENTER||this.dialog.is(":visible")||
this._pendingSearch&&this._pendingSearch.done(function(){var c=a._getCurrentScrollable().$scrollElement.find("ul.results-list li.result:first");a._clickItem(c)}));f.defer(e)},this))};b.prototype._handleSearchInput=function(a){if(this._getOptionVal("externalSearchField")){if(this._shouldSearch(a))return this.dialog.is(":visible")||this.dialog.show(),this._populateScrollable();this.dialog.hide();return e.Deferred().reject().promise()}return this._populateScrollable()};b.prototype._initialiseKeyboardNavigation=
function(a){var c=this,d,b=!1,e=function(a){var d=c.dialog.is(":visible");if(!c._getOptionVal("externalSearchField")||d)b&&!d?c.$trigger.click():c._clickItem(a)};this._resultsKeyboardController&&this._resultsKeyboardController.destroy();this.$searchField?d=this.$searchField:this.tabs?d=a.find("ul.tabs-menu"):(d=this.$trigger,b=!0);var f=c._getCurrentScrollable().$scrollElement.find("ul.results-list");this._resultsKeyboardController=new w(d,f,{wrapAround:!1,focusedClass:"focused",itemSelector:"li.result",
requestMore:function(){var a=c._getCurrentScrollable().loadAfter();return a&&a.then(function(a){return a.isLastPage})},onSelect:function(a){c._pendingSearch?c._pendingSearch.done(function(){var a=f.find("li.result:first");a.length&&e(a)}):e(a)},focusIntoView:!0,adjacentItems:c._getOptionVal("adjacentItems")});this._tabKeyboardController&&this._tabKeyboardController.destroy();(m.isMozilla()||m.isWebkit())&&a.addClass("override-focus-style");this._tabKeyboardController=new v(a)};b.prototype._initialiseMouseNavigation=
function(a){a.on("mousemove","li",function(){e(this).find(".focused").hasClass("focused")||(a.find(".focused").removeClass("focused"),e(this).addClass("focused"))})};b.prototype._clickItem=function(a){a.children("a").each(function(){this.click()})};b.prototype.setFocus=function(){this.$searchField?this.$searchField.focus():this.tabs?this.$content.find("ul.tabs-menu a").first().focus():this.$trigger.focus()};b.prototype._createScrollable=function(a){a=new u(a,{pageSize:this._getOptionVal("pageSize"),
bufferPixels:0,preventOverscroll:!0,paginationContext:this.options.paginationContext});a.requestData=f.bind(this.getResults,this,a);a.attachNewContent=f.bind(this.addResultsToList,this,a,!1);return a};b.prototype._populateScrollable=function(a){a=a||this._getCurrentScrollable();this._emptyScrollable(a);var c=this._getPreloadData(),d=0;c&&(d=this.addResultsToList(a,!0,c));a=a.init();return 0<d?e.Deferred().resolve().promise():a};b.prototype._getPreloadData=function(){var a=this._getOptionVal("preloadData"),
c=this._getSearchTerm();if(a&&(this._getOptionVal("alwaysShowPreload")||""===c)){var d=this._getOption("dataTransform");f.isFunction(d)&&(a=d.call(this,a,c))}else a=null;return a};b.prototype._emptyScrollable=function(a){a=a||this._getCurrentScrollable();a.reset();this._getDataStoreForScrollable(a).length=0;this._getOptionVal("clearResultsOnSearch")&&a.$scrollElement.children("ul.results-list").empty()};b.prototype._getCurrentScrollable=function(){return this.scrollables[this.tabs&&this.currentTabId?
this.currentTabId:0]};b.prototype._getDataStoreForScrollable=function(a){if(!a)return this.scrollableDataStores[this.tabs&&this.currentTabId?this.currentTabId:0];a=f.indexOf(this.scrollables,a);return-1!==a?this.scrollableDataStores[a]:null};b.prototype._getSearchTerm=function(){return this.$searchField?this.$searchField.val():""};b.prototype._updateSearchPlaceholder=function(){this.$searchField&&this.$searchField.attr("placeholder",this._getOptionVal("searchPlaceholder"))};b.prototype._getOptionVal=
function(a){return this._getOption(a,!0)};b.prototype._getOption=function(a,c){var d;d=this.tabs&&f.contains(this.tabOptionKeys,a)?this.tabs[this.currentTabId||0][a]:this.options[a];return c?f.isFunction(d)?d.call(this):d:d};b.prototype.setOptions=function(a){this.options=e.extend(!0,{},this.defaults,a)};b.prototype.getResults=function(a,c,d){var b=this;this.currentXHR&&this.currentXHR.abort&&this.currentXHR.abort();c=(this._getOption("queryParamsBuilder")||this._defaultQueryParamsBuilder).call(this,
this._getSearchTerm(),c,d);if(null===c)return e.Deferred().reject().promise();d=a.$scrollElement.children("ul.results-list");this._showSpinner(a);d.scrollTop(d[0].scrollHeight);c=this.currentXHR=p.rest({url:this._getOptionVal("url"),data:c,statusCode:this._getOptionVal("statusCodeHandlers")});c.always(function(){b._hideSpinner(a);b.currentXHR=null});return c};b.prototype._showSpinner=function(a){a.$scrollElement.children(".spinner").show().spin()};b.prototype._hideSpinner=function(a){a.$scrollElement.children(".spinner").spinStop().hide()};
b.prototype._shouldSearch=function(a){return null!=(this._getOption("queryParamsBuilder")||this._defaultQueryParamsBuilder).call(this,a,0,this._getOptionVal("pageSize"))};b.prototype._defaultQueryParamsBuilder=function(a,c,b){c={start:c,limit:b};this._getOptionVal("searchable")&&(c[this._getOptionVal("queryParamKey")]=a);return c};b.prototype.addResultsToList=function(a,c,b){var k=this._getOption("dataTransform"),h;f.isFunction(k)&&(b=k.call(this,b,this._getSearchTerm()));!c&&(h=this._getPreloadData())&&
(b=this.dedupeData(b,h));b=e.extend({},b,{isPreload:c,noResultsText:this._getOptionVal("noResultsText"),noMoreResultsText:this._getOptionVal("noMoreResultsText")});var k=e(this._getOption("resultsTemplate")(b)),g=this._getDataStoreForScrollable(a);g.push.apply(g,b.values);a=a.$scrollElement.children("ul.results-list");(c=0===b.start&&!(h&&0<h.size)&&(!c||0<b.size))&&a.empty();a.append(k).attr("data-last-updated",(new Date).getTime());c&&0<b.size&&this._resultsKeyboardController.moveToNext();return b.size};
b.prototype.dedupeData=function(a,b){a&&a.values&&b&&b.values&&(a=e.extend(!0,{},a),a.values=f.reject(a.values,function(a){return f.find(b.values,function(b){return a.id===b.id})}));return a};b.prototype.selectItem=function(a,b){var d=b.data("id"),e=f.find(this._getDataStoreForScrollable(),function(a){return a.id===d});("#"===b.attr("href")||!this._getOptionVal("followLinks")&&q.openInSameTab)&&a.preventDefault();this._selectedItem&&this._selectedItem.id===e.id||this._itemSelected(e);this._getOptionVal("hideDialogOnSelect")&&
this.dialog.hide()};b.prototype._itemSelected=function(a){this._selectedItem=a;this._getOptionVal("field")&&e(this._getOptionVal("field")).val(a.id);this.updateTrigger({item:a});r.trigger(this._getOptionVal("itemSelectedEvent"),this,a,this._getOptionVal("context"))};b.prototype.updateTrigger=function(a,b){this._getOptionVal("externalSearchField")||(this.$trigger.html(this._getOption("triggerContentTemplate")(a||{})),b&&this.$trigger.attr("title",b));this.$trigger.trigger("change")};b.prototype.resetTrigger=
function(){this.updateTrigger({text:this._getOptionVal("triggerPlaceholder")})};b.prototype.destroy=function(){this.blockShortcutPropagation&&e(document).add(this.dialog).off("keydown keypress",this.blockShortcutPropagation);this._getOptionVal("externalSearchField")&&this.$searchField.off(".searchable-selector");this.dialog&&(this.dialog.hide(),this.dialog.remove(),this.dialog=null);this._resultsKeyboardController&&(this._resultsKeyboardController.destroy(),this._resultsKeyboardController=null);this._tabKeyboardController&&
(this._tabKeyboardController.destroy(),this._tabKeyboardController=null);this.tabs=this.scrollableDataStores=this.scrollables=this.$trigger=null;this._initialiseDialogContent=e.noop};return b});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:revision-reference-selector', location = '/static/feature/repository/revision-reference-selector/revision-reference-selector.js' */
define("feature/repository/revision-reference-selector","aui jquery lodash stash/api/util/navbuilder util/ajax util/events model/page-state model/repository model/revision-reference widget/searchable-selector".split(" "),function(h,d,e,k,m,l,n,p,c,f){function b(a,g){return this.init.apply(this,arguments)}d.extend(b.prototype,f.prototype);b.prototype._addRefTypeAndRepositoryToResults=function(a){if(a&&a.values){a=d.extend(!0,{},a);var g=this._getCurrentType();e.each(a.values,e.bind(function(a){a.type||
(a.type=g);a.repository||(a.repository=this.repository&&this.repository.toJSON())},this))}return a};b.prototype.defaults=d.extend(!0,{},f.prototype.defaults,{tabs:[{label:"Branches",type:c.type.BRANCH,url:function(){return this.getBranchesUrl()},resultsTemplate:stash.feature.repository.revisionReferenceSelectorBranchResults,searchPlaceholder:"Search for a branch"},{label:"Tags",type:c.type.TAG,url:function(){return this.getTagsUrl()},resultsTemplate:stash.feature.repository.revisionReferenceSelectorTagResults,
searchPlaceholder:"Search for a tag"},{label:"Commits",type:c.type.COMMIT,url:function(){return this.getCommitsUrl()},resultsTemplate:stash.feature.repository.revisionReferenceSelectorCommitResults,searchPlaceholder:"Search for a commit"}],queryParamKey:"filterText",namespace:"revision-reference-selector",itemSelectedEvent:"stash.feature.repository.revisionReferenceSelector.revisionRefChanged",
itemUnselectedEvent:"stash.feature.repository.revisionReferenceSelector.revisionRefUnselected",itemDataKey:"revision-ref",statusCodeHandlers:m.ignore404WithinRepository(),triggerContentTemplate:stash.feature.repository.revisionReferenceSelectorTriggerContent,extraClasses:"revision-reference-selector",repository:function(){return n.getRepository()},show:{branches:!0,tags:!0,commits:!1},dataTransform:b.prototype._addRefTypeAndRepositoryToResults,postOptionsInit:function(){this.setRepository(this._getOptionVal("repository"))},
paginationContext:"revision-reference-selector"});b.prototype.init=function(a,g){f.prototype.init.apply(this,arguments);return this};b.prototype.setOptions=function(a){a.extraClasses&&(a.extraClasses=this.defaults.extraClasses+" "+d.trim(a.extraClasses));a=d.extend(!0,{},this.defaults,a);var g=e.filter({branches:c.type.BRANCH.id,tags:c.type.TAG.id,commits:c.type.COMMIT.id},function(g,b){return a.show[b]});a.tabs=e.filter(a.tabs,function(a){return-1!==e.indexOf(g,a.type.id)});this.options=a};b.prototype._getItemFromTrigger=
function(){var a=this.$trigger.find(".name");return new c(d.extend({},this._buildObjectFromElementDataAttributes(a),{displayId:a.text(),repository:this.repository}))};b.prototype.getBranchesUrl=function(){return k.rest().project(this.repository.getProject()).repo(this.repository).branches().build()};b.prototype.getTagsUrl=function(){return k.rest().project(this.repository.getProject()).repo(this.repository).tags().build()};b.prototype.getCommitsUrl=function(){return k.rest().project(this.repository.getProject()).repo(this.repository).commits().build()};
b.prototype.getRepository=function(){return this.repository};b.prototype.setRepository=function(a){var b=this.repository;if(a instanceof p&&!a.isEqual(b)&&(this.repository=a,b)){if(b=this._getCurrentScrollable())this._emptyScrollable(b),b.init();this.clearSelection();this.dialog.hide();l.trigger("stash.feature.repository.revisionReferenceSelector.repoChanged",this,a,this._getOptionVal("context"))}};b.prototype._getCurrentType=function(){return this.tabs[this.currentTabId||0].type};b.prototype.setSelectedItem=
function(a){a instanceof c&&!a.isEqual(this._selectedItem)&&this._itemSelected(a)};b.prototype.clearSelection=function(){f.prototype.clearSelection.apply(this,arguments);l.trigger(this._getOptionVal("itemUnselectedEvent"),this,null,this._getOptionVal("context"))};b.prototype._itemSelected=function(a){var b;a instanceof c?b=a.toJSON():(b=e.pick(a,e.keys(c.prototype.namedAttributes)),a=new c(b));this._selectedItem=a;this._getOptionVal("field")&&d(this._getOptionVal("field")).val(b.id);var f=stash.feature.repository.revisionReferenceSelectorTitle({ref:b});
this.updateTrigger({ref:b},f);l.trigger(this._getOptionVal("itemSelectedEvent"),this,a,this._getOptionVal("context"))};return b});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:revision-reference-selector', location = '/static/feature/repository/revision-reference-selector/revision-reference-selector.soy' */
// This file was automatically generated from revision-reference-selector.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace stash.feature.repository.
 */

if (typeof stash == 'undefined') { var stash = {}; }
if (typeof stash.feature == 'undefined') { stash.feature = {}; }
if (typeof stash.feature.repository == 'undefined') { stash.feature.repository = {}; }


stash.feature.repository.revisionReferenceSelectorBranchResults = function(opt_data, opt_ignored) {
  return '' + stash.feature.repository.revisionReferenceSelectorResults({values: opt_data.values, isLastPage: opt_data.isLastPage, size: opt_data.size, isPreload: opt_data.isPreload, noResultsText: "No branches", noMoreResultsText: "No more branches"});
};
if (goog.DEBUG) {
  stash.feature.repository.revisionReferenceSelectorBranchResults.soyTemplateName = 'stash.feature.repository.revisionReferenceSelectorBranchResults';
}


stash.feature.repository.revisionReferenceSelectorTagResults = function(opt_data, opt_ignored) {
  return '' + stash.feature.repository.revisionReferenceSelectorResults({values: opt_data.values, isLastPage: opt_data.isLastPage, size: opt_data.size, isPreload: opt_data.isPreload, noResultsText: "No tags", noMoreResultsText: "No more tags"});
};
if (goog.DEBUG) {
  stash.feature.repository.revisionReferenceSelectorTagResults.soyTemplateName = 'stash.feature.repository.revisionReferenceSelectorTagResults';
}


stash.feature.repository.revisionReferenceSelectorCommitResults = function(opt_data, opt_ignored) {
  return '' + stash.feature.repository.revisionReferenceSelectorResults({values: opt_data.values, isLastPage: opt_data.isLastPage, size: opt_data.size, isPreload: opt_data.isPreload, noResultsText: "No commits", noMoreResultsText: "No more commits"});
};
if (goog.DEBUG) {
  stash.feature.repository.revisionReferenceSelectorCommitResults.soyTemplateName = 'stash.feature.repository.revisionReferenceSelectorCommitResults';
}


stash.feature.repository.revisionReferenceSelectorResults = function(opt_data, opt_ignored) {
  var output = '';
  var refList27 = opt_data.values;
  var refListLen27 = refList27.length;
  for (var refIndex27 = 0; refIndex27 < refListLen27; refIndex27++) {
    var refData27 = refList27[refIndex27];
    output += '<li class="result ' + ((opt_data.isPreload) ? 'preload' : '') + '"><a href="' + soy.$$escapeHtml(refData27.url ? refData27.url : '#') + '" data-id="' + soy.$$escapeHtml(refData27.id) + '" tabindex="-1">' + stash.feature.repository.revisionReferenceSelectorRef({ref: refData27}) + '</a></li>';
  }
  output += (opt_data.isLastPage) ? (opt_data.size > 0) ? '<li class="no-results">' + soy.$$escapeHtml(opt_data.noMoreResultsText ? opt_data.noMoreResultsText : "No more results") + '</li>' : '<li class="no-results">' + soy.$$escapeHtml(opt_data.noResultsText ? opt_data.noResultsText : "No results") + '</li>' : '';
  return output;
};
if (goog.DEBUG) {
  stash.feature.repository.revisionReferenceSelectorResults.soyTemplateName = 'stash.feature.repository.revisionReferenceSelectorResults';
}


stash.feature.repository.revisionReferenceSelectorTrigger = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '' + stash.widget.searchableSelectorTriggerGeneric({id: opt_data.id, content: '' + stash.feature.repository.revisionReferenceSelectorTriggerContent(opt_data), autofocus: opt_data.autofocus, extraClasses: 'revision-reference-selector-trigger' + (opt_data.extraClasses ? ' ' + opt_data.extraClasses : ''), extraAttributes: opt_data.extraAttributes, titleContent: '' + stash.feature.repository.revisionReferenceSelectorTitle(opt_data)});
};
if (goog.DEBUG) {
  stash.feature.repository.revisionReferenceSelectorTrigger.soyTemplateName = 'stash.feature.repository.revisionReferenceSelectorTrigger';
}


stash.feature.repository.revisionReferenceSelectorTriggerWithField = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '' + stash.feature.repository.revisionReferenceSelectorTrigger(opt_data) + widget.aui.form.input({id: opt_data.fieldId ? opt_data.fieldId : opt_data.id ? opt_data.id + '-field' : opt_data.id, name: opt_data.fieldName ? opt_data.fieldName : opt_data.id + '-field', initialValue: opt_data.ref ? opt_data.ref.id : null, type: 'hidden'});
};
if (goog.DEBUG) {
  stash.feature.repository.revisionReferenceSelectorTriggerWithField.soyTemplateName = 'stash.feature.repository.revisionReferenceSelectorTriggerWithField';
}


stash.feature.repository.revisionReferenceSelectorTriggerContent = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '' + ((opt_data.ref) ? stash.feature.repository.revisionReferenceSelectorRef(opt_data) : '<span class="placeholder">' + soy.$$escapeHtml(opt_data.text ? opt_data.text : "Select revision") + '</span>');
};
if (goog.DEBUG) {
  stash.feature.repository.revisionReferenceSelectorTriggerContent.soyTemplateName = 'stash.feature.repository.revisionReferenceSelectorTriggerContent';
}


stash.feature.repository.revisionReferenceSelectorRef = function(opt_data, opt_ignored) {
  return ((opt_data.ref.type) ? aui.icons.icon({size: 'small', useIconFont: true, iconFontSet: 'devtools', icon: opt_data.ref.type.id, accessibilityText: opt_data.ref.type.name}) : '') + '<span class="name" title="' + soy.$$escapeHtml(opt_data.ref.displayId) + '" data-id="' + soy.$$escapeHtml(opt_data.ref.id) + '" data-revision-ref="' + soy.$$escapeHtml(JSON.stringify(opt_data.ref).replace(/\//g, '\\/')) + '">' + soy.$$escapeHtml(opt_data.ref.displayId ? opt_data.ref.displayId : opt_data.ref.id) + '</span>';
};
if (goog.DEBUG) {
  stash.feature.repository.revisionReferenceSelectorRef.soyTemplateName = 'stash.feature.repository.revisionReferenceSelectorRef';
}


stash.feature.repository.revisionReferenceSelectorTitle = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '' + soy.$$escapeHtml(opt_data.ref ? (opt_data.ref.displayId ? opt_data.ref.displayId : opt_data.ref.id) : opt_data.text ? opt_data.text : "Select revision");
};
if (goog.DEBUG) {
  stash.feature.repository.revisionReferenceSelectorTitle.soyTemplateName = 'stash.feature.repository.revisionReferenceSelectorTitle';
}
;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:repository-branch-selector', location = '/static/feature/repository/branch-selector/branch-selector.js' */
define("feature/repository/branch-selector",["aui","jquery","feature/repository/revision-reference-selector"],function(b,c,d){return function(e,a){a=c.extend({show:{branches:!0,tags:!1,commits:!1},triggerPlaceholder:"Select branch",paginationContext:"branch-selector"},a);return new d(e,a)}});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:repository-branch-selector', location = '/static/feature/repository/branch-selector/branch-selector.soy' */
// This file was automatically generated from branch-selector.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace stash.feature.repository.
 */

if (typeof stash == 'undefined') { var stash = {}; }
if (typeof stash.feature == 'undefined') { stash.feature = {}; }
if (typeof stash.feature.repository == 'undefined') { stash.feature.repository = {}; }


stash.feature.repository.branchSelectorTrigger = function(opt_data, opt_ignored) {
  return '' + stash.feature.repository.revisionReferenceSelectorTrigger({id: opt_data.id, ref: opt_data.ref, text: opt_data.text ? opt_data.text : "Select branch", autofocus: opt_data.autofocus, extraClasses: opt_data.extraClasses, extraAttributes: opt_data.extraAttributes});
};
if (goog.DEBUG) {
  stash.feature.repository.branchSelectorTrigger.soyTemplateName = 'stash.feature.repository.branchSelectorTrigger';
}


stash.feature.repository.branchSelectorTriggerWithField = function(opt_data, opt_ignored) {
  return '' + stash.feature.repository.revisionReferenceSelectorTriggerWithField({id: opt_data.id, ref: opt_data.ref, text: opt_data.text ? opt_data.text : "Select branch", fieldName: opt_data.fieldName, fieldId: opt_data.fieldId, autofocus: opt_data.autofocus, extraClasses: opt_data.extraClasses, extraAttributes: opt_data.extraAttributes});
};
if (goog.DEBUG) {
  stash.feature.repository.branchSelectorTriggerWithField.soyTemplateName = 'stash.feature.repository.branchSelectorTriggerWithField';
}
;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:warn-before-unload', location = '/static/util/warn-before-unload.js' */
define("util/warn-before-unload",["aui"],function(e){return function(f,b){var d=!1;b=b||"You made changes that have not yet reached Stash. If you leave this page, those changes will be lost.";var c=window.onbeforeunload,a=function(){var a=c?c.apply(this,arguments):void 0;return d?a:b};window.onbeforeunload=a;f.always(function(){d=!0;window.onbeforeunload===a&&(window.onbeforeunload=c)})}});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:pull-request-edit', location = '/static/feature/pull-request/edit/pull-request-edit.js' */
define("feature/pull-request-edit","aui jquery lodash stash/api/util/navbuilder util/ajax util/client-storage util/dom-event util/events util/focus-snapshot util/function util/warn-before-unload model/revision-reference widget/markup-editor feature/repository/branch-selector feature/user/user-multi-selector".split(" "),function(d,g,c,t,u,l,v,m,r,w,x,y,n,z,A){function b(a,e){var f={width:800,height:350,id:"edit-pull-request-dialog",closeOnOutsideClick:!1,focusSelector:"#pull-request-description",keypressListener:c.bind(this.keypressListener,
this)};this._pullRequest=a;this._currentReviewerUsers=this._pullRequest.getReviewers();this._opts=g.extend({},f,e);this._dialog=new d.Dialog(this._opts);this._dialogEl=g("#"+this._opts.id);this._isDisabled=!1;this._draftKey=l.buildKey("draft-description","pull-request");this.initDialog()}function B(a){return{user:a}}function p(a){var e=c.pick(a,["title","description"]);c.has(a,"reviewers")&&(e.reviewers=c.chain(a.reviewers).map(w.dot("user.name")).sort().map(function(a){return{user:{name:a}}}).value());
c.has(a,"toRef")&&(e.toRef={id:a.toRef.id});return e}b.prototype.keypressListener=function(a){a.stopImmediatePropagation();v.isCtrlish(a)&&a.which===d.keyCode.ENTER&&(a.preventDefault(),g(".button-panel-submit-button",this._dialogEl).click());27===a.keyCode&&this._dialogEl.is(":visible")&&!this._isDisabled&&(n.unbindFrom(this._dialog.getCurrentPanel().body),this.hide())};b.prototype.initDialog=function(){this._$buttonPanel=this._dialog.addHeader("Edit Pull Request").addPanel("Edit Pull Request").addSubmit("Save",
c.bind(this.save,this)).addCancel("Cancel",c.bind(this.cancel,this)).getPage(0).buttonpanel;this._$spinner=g('\x3cdiv class\x3d"spinner"\x3e\x3c/div\x3e').prependTo(this._$buttonPanel);this.triggerPanelResize=c.bind(this.triggerPanelResize,this);this._dialogEl.on("input","textarea#pull-request-description",this.updateDraftDescription.bind(this))};b.prototype.updateDraftDescription=c.debounce(function(a){(a=a.target.value)?l.setSessionItem(this._draftKey,a):this.deleteDraftDescription()},
300);b.prototype.deleteDraftDescription=function(){l.removeSessionItem(this._draftKey)};b.prototype.populatePanelFromPullRequest=function(){var a=l.getSessionItem(this._draftKey);this.updatePanel({title:this._pullRequest.getTitle(),description:a||this._pullRequest.getDescription(),toRef:c.extend({type:y.type.BRANCH},this._pullRequest.getToRef().toJSON()),reviewers:this._currentReviewerUsers.map(function(a){return a.getUser().toJSON()})},!!a)};b.prototype.triggerPanelResize=function(){var a=this._dialog.isMaximised(),
e=this._dialog.getCurrentPanel().body,e=e.innerHeight()>=e.get(0).scrollHeight;a&&!e||c.defer(c.bind(function(){this.isVisible()&&(r.save(),this._dialog.updateHeight(),r.restore())},this))};b.prototype.updatePanel=function(a,e){var f=this._dialog.getCurrentPanel().body;a.reviewers.length&&a.reviewers[0].user&&(a.reviewers=c.pluck(a.reviewers,"user"));f.empty().append(stash.feature.pullRequest.edit(a));if(e)f.find("textarea#pull-request-description").addClass("restored").attr("title","The description of this pull request has been restored from an automatically saved draft.").one("click keydown input",
function(a){g(a.target).removeClass("restored").removeAttr("title")});this.userSelect=new A(f.find("#reviewers"),{initialItems:a.reviewers,excludedItems:[this._pullRequest.getAuthor().getUser().toJSON()],urlParams:{"permission.1":"LICENSED_USER","permission.2":"REPO_READ","permission.2.repositoryId":this._pullRequest.getToRef().getRepository().getId()}});var b=f.find("#toRef");this.branchSelector=new z(b,{id:"toRef-dialog",repository:this._pullRequest.getToRef().getRepository(),field:b.next("input")});
n.bindTo(f).on("resize",this.triggerPanelResize.bind(this));this.triggerPanelResize()};b.prototype.getPullRequestUpdateFromForm=function(a){return{title:a.find("#title").val(),description:a.find("#pull-request-description").val(),reviewers:c.map(this.userSelect.getSelectedItems(),B),toRef:this.branchSelector.getSelectedItem().toJSON(),version:this._pullRequest.getVersion()}};b.prototype.mergePullRequestUpdate=function(a,e,f){var b=e.version;a=p(a);e=p(e);f=p(f);var d=c.reduce(c.keys(f),function(b,
d){if(!b)return null;var g=e[d],k=f[d];if(c.isEqual(g,k))return b;var h=a[d];return c.isEqual(h,k)?b:c.isEqual(h,g)?(b[d]=k,b):null},c.merge({},e));d&&(d.version=b);return d};b.prototype.save=function(a,e){if(!this._isDisabled){var b=this.getPullRequestUpdateFromForm(e.getCurrentPanel().body.find("form"));if(b.title)return this._$spinner.show().spin("small"),this.toggleDisabled(!0),this._doSave(b);var c="You must supply a title for this pull request.";this.updatePanel(g.extend({fieldErrors:{title:[c]}},
b))}};b.prototype._doSave=function(a){var b=this,f=u.rest({url:t.rest().currentPullRequest().withParams({avatarSize:stash.widget.avatarSizeInPx({size:"xsmall"})}).build(),type:"PUT",data:a,statusCode:{400:!1,409:!1}});x(f,"You have made changes to the pull request that have not yet reached Stash. If you leave this page, those changes will be lost.");f.done(function(a){b.deleteDraftDescription();window.location.reload()});f.fail(function(f,l,n,q,p){var k=[],h={},m;if(1===q.errors.length&&"com.atlassian.stash.pull.PullRequestOutOfDateException"===q.errors[0].exceptionName&&
(f=b.mergePullRequestUpdate(b._pullRequest.toJSON(),q.errors[0].pullRequest,a))){b._doSave(f);return}c.each(q.errors,function(a){a.context?(Object.prototype.hasOwnProperty.call(h,a.context)||(h[a.context]=[]),"reviewers"===a.context?(h[a.context]=c.pluck(a.reviewerErrors,"message"),k.push(a),m=a.validReviewers):h[a.context].push(a.message)):("com.atlassian.stash.pull.PullRequestOutOfDateException"===a.exceptionName&&(a.messageContent=d.escapeHtml(a.message)+" \x3ca href\x3d'"+window.location.href.split("#")[0]+
"'\x3e"+d.escapeHtml("Reload")+"\x3c/a\x3e."),k.push(a))});b.updatePanel(g.extend({errors:k,fieldErrors:h},a,{reviewers:m}));b._$spinner.spinStop().hide();b.toggleDisabled(!1)})};b.prototype.toggleDisabled=function(a){void 0===typeof a&&(a=!this._isDisabled);this._$buttonPanel.toggleClass("disabled",a);this._$buttonPanel.find("button")[a?"attr":"removeAttr"]("disabled","disabled");this._dialog[a?"disable":"enable"]();this._isDisabled=a};b.prototype.cancel=function(){this._isDisabled||
(n.unbindFrom(this._dialog.getCurrentPanel().body),this.deleteDraftDescription(),this.hide())};b.prototype.isVisible=function(){return this._dialogEl.is(":visible")};b.prototype.show=function(){this.populatePanelFromPullRequest();this._dialog.show();m.on("window.resize.debounced",this.triggerPanelResize)};b.prototype.hide=function(){document.activeElement.blur();this._dialog.hide();m.off("window.resize.debounced",this.triggerPanelResize)};b.prototype.bind=function(a){var b=this;g(document).on("click",
a,function(a){a.preventDefault();b.show()})};return b});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:pull-request-edit', location = '/static/feature/pull-request/edit/pull-request-edit.soy' */
// This file was automatically generated from pull-request-edit.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace stash.feature.pullRequest.
 */

if (typeof stash == 'undefined') { var stash = {}; }
if (typeof stash.feature == 'undefined') { stash.feature = {}; }
if (typeof stash.feature.pullRequest == 'undefined') { stash.feature.pullRequest = {}; }


stash.feature.pullRequest.edit = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  var output = '';
  if (opt_data.errors) {
    var errorList5 = opt_data.errors;
    var errorListLen5 = errorList5.length;
    for (var errorIndex5 = 0; errorIndex5 < errorListLen5; errorIndex5++) {
      var errorData5 = errorList5[errorIndex5];
      output += aui.message.error({content: '' + ((errorData5.messageContent) ? soy.$$filterNoAutoescape(errorData5.messageContent) : soy.$$escapeHtml(errorData5.message))});
    }
  }
  output += stash.widget.form({action: '', autocomplete: 'off', content: '' + widget.aui.form.field({id: 'toRef', labelContent: '' + soy.$$escapeHtml("Destination"), description: "Update the destination branch for the pull request", errors: opt_data.fieldErrors ? opt_data.fieldErrors.toRef : null, input: '' + stash.feature.repository.branchSelectorTriggerWithField({id: 'toRef', fieldName: 'toRef', ref: opt_data.toRef})}) + stash.feature.pullRequest.detailsForm(opt_data)});
  return output;
};
if (goog.DEBUG) {
  stash.feature.pullRequest.edit.soyTemplateName = 'stash.feature.pullRequest.edit';
}
;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:pull-request-can-merge', location = '/static/feature/pull-request/can-merge/can-merge.js' */
define("feature/pull-request/can-merge",["stash/api/util/navbuilder","util/ajax","util/events","model/page-state"],function(c,d,e,f){return function(a){a=a||f.getPullRequest();return d.rest({url:c.rest().currentRepo().pullRequest(a.getId()).merge().build(),type:"GET"}).done(function(b){e.trigger(b.canMerge?"stash.pull-request.can.merge":"stash.pull-request.cant.merge",null,a,b.conflicted,b.vetoes,b.properties)})}});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:pull-request-merge-conflict', location = '/static/feature/pull-request/merge-conflict/merge-conflict.soy' */
// This file was automatically generated from merge-conflict.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace stash.feature.pullRequest.
 */

if (typeof stash == 'undefined') { var stash = {}; }
if (typeof stash.feature == 'undefined') { stash.feature = {}; }
if (typeof stash.feature.pullRequest == 'undefined') { stash.feature.pullRequest = {}; }


stash.feature.pullRequest.mergeConflictBanner = function(opt_data, opt_ignored) {
  return '' + aui.message.warning({extraClasses: 'merge-conflicted-message' + ((opt_data.extraClasses) ? ' ' + soy.$$escapeHtml(opt_data.extraClasses) : ''), content: '<strong>' + soy.$$escapeHtml("This pull request can\x27t be merged.") + '</strong> ' + soy.$$filterNoAutoescape(AJS.format("You will need to resolve conflicts to be able to merge. {0}More information{1}.",'<a href="#" class="manual-merge">','</a>'))});
};
if (goog.DEBUG) {
  stash.feature.pullRequest.mergeConflictBanner.soyTemplateName = 'stash.feature.pullRequest.mergeConflictBanner';
}
;
;/* module-key = 'com.atlassian.stash.stash-pull-request-branch-deletion:branch-deletion-static-resources', location = '/static/branch-deletion.js' */
define("pullRequest/branchDeletion",["aui","jquery","lodash","stash/api/util/navbuilder","util/ajax","util/client-storage","util/events","model/page-state","exports"],function(l,e,o,a,j,c,q,k,d){var f="#pull-request-merge-dialog";var g="#delete-branch-checkbox";function i(r){return a.newBuilder().addPathComponents("rest","pull-request-source-branch-deletion","1.0","projects",k.getProject().getKey(),"repos",k.getRepository().getSlug(),"pull-requests",k.getPullRequest().getId()).withParams({dryRun:!!r}).build()}function n(r,t){var s=new l.Dialog({width:650,height:200,id:"branch-deletion-failure",closeOnOutsideClick:false});s.addHeader("Pull request merged").addPanel("",stash.plugin.pullRequestDeleteBranch.failureDialogContents({errorMessage:r})).addCancel("Close",function(){s.remove();t()});s.show();s.updateHeight()}function h(r){if(r&&r.errors&&r.errors.length){return r.errors[0].message}return null}function b(){return false}function m(s,t){var r=e.Deferred();s.done(function(){if(e(g).is(":checked")){j.rest({url:d._getRestDeleteBranchUrl(),type:"POST",statusCode:{"400":b,"401":b,"403":b,"409":b}}).done(function(){q.trigger("stash.page.pullRequest.revisionRefRemoved",null,k.getPullRequest().getFromRef().toJSON());return r.resolve()}).fail(function(w,y,v,x){t();var u=h(x);if(u){n(u,r.resolve)}else{r.resolve()}})}else{r.resolve()}}).fail(function(){r.reject()});return r.promise()}d.initialiseBranchDeletion=function(){o.defer(function(){var u=e(f).find(g);var r=c.buildKey(["pr","merge","delete","branch"],"repo");var t=!!c.getItem(r);u.prop("checked",t).on("change",function(){c.setItem(r,!!this.checked,{noCleanup:true})});var v=l.dialog2(f);v.on("show",function s(){p();v.off("show",s)})})};function p(){var r=e(f).find(g);j.rest({url:i(true),type:"POST",dataType:"json",statusCode:{"400":b,"403":b,"409":b}}).done(function(){r.removeAttr("disabled")}).fail(function(u,w,t,v){var s=h(v);if(s){r.attr("disabled","disabled").removeAttr("checked").parent().tooltip({delayOut:200,delayIn:0,gravity:"n",html:false,hoverable:true,offset:7,title:function(){return s}})}})}d.getMergePromiseDecorator=m;d._getRestDeleteBranchUrl=i});require("pullRequest/branchDeletion");;
;/* module-key = 'com.atlassian.stash.stash-pull-request-branch-deletion:branch-deletion-static-resources', location = '/static/branch-deletion.soy' */
// This file was automatically generated from branch-deletion.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace stash.plugin.pullRequestDeleteBranch.
 */

if (typeof stash == 'undefined') { var stash = {}; }
if (typeof stash.plugin == 'undefined') { stash.plugin = {}; }
if (typeof stash.plugin.pullRequestDeleteBranch == 'undefined') { stash.plugin.pullRequestDeleteBranch = {}; }


stash.plugin.pullRequestDeleteBranch.deleteBranchCheckbox = function(opt_data, opt_ignored) {
  return '<span class="delete-branch-checkbox-wrapper" title="' + soy.$$escapeHtml("Delete the source branch after the merge completes successfully.") + '"><input id="delete-branch-checkbox" class="checkbox" disabled="disabled" type="checkbox" name="delete-branch-checkbox"/><label for="delete-branch-checkbox">' + soy.$$escapeHtml("Delete source branch after merging") + '</label></span>';
};
if (goog.DEBUG) {
  stash.plugin.pullRequestDeleteBranch.deleteBranchCheckbox.soyTemplateName = 'stash.plugin.pullRequestDeleteBranch.deleteBranchCheckbox';
}


stash.plugin.pullRequestDeleteBranch.failureDialogContents = function(opt_data, opt_ignored) {
  return '' + aui.message.warning({titleContent: '' + soy.$$escapeHtml("The pull request was merged, but the branch could not be deleted"), content: '' + soy.$$escapeHtml(opt_data.errorMessage)});
};
if (goog.DEBUG) {
  stash.plugin.pullRequestDeleteBranch.failureDialogContents.soyTemplateName = 'stash.plugin.pullRequestDeleteBranch.failureDialogContents';
}
;
;/* module-key = 'com.atlassian.stash.stash-pull-request-branch-deletion:branch-deletion-web-panel', location = '/web-fragment-placeholder.config' */
WebFragments.addWebPanelDescriptor({'pluginKey':'com.atlassian.stash.stash-pull-request-branch-deletion','key':'branch-deletion-web-panel','moduleKey':'branch-deletion-web-panel','completeModuleKey':'com.atlassian.stash.stash-pull-request-branch-deletion:branch-deletion-web-panel','weight':0.0,'context-provider':function(ctx) { return WebFragments._getValue((require('pullRequest/branchDeletion').initialiseBranchDeletion), ctx); },'params':{},'location':'internal.stash.pull-request.merge-dialog.footer.hint','view':function(ctx) { return WebFragments._getValue((stash.plugin.pullRequestDeleteBranch.deleteBranchCheckbox), ctx); }});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:pull-request-merge-dialog', location = '/static/feature/pull-request/merge-dialog/pull-request-merge-dialog.soy' */
// This file was automatically generated from pull-request-merge-dialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace stash.feature.pullRequest.merge.
 */

if (typeof stash == 'undefined') { var stash = {}; }
if (typeof stash.feature == 'undefined') { stash.feature = {}; }
if (typeof stash.feature.pullRequest == 'undefined') { stash.feature.pullRequest = {}; }
if (typeof stash.feature.pullRequest.merge == 'undefined') { stash.feature.pullRequest.merge = {}; }


stash.feature.pullRequest.merge.dialog = function(opt_data, opt_ignored) {
  var param38 = '';
  var webPanelList39 = WebFragments.getWebPanels('internal.stash.pull-request.merge-dialog.footer.hint').map(function(webPanel) { return soydata.VERY_UNSAFE.ordainSanitizedHtml(webPanel); });
  var webPanelListLen39 = webPanelList39.length;
  for (var webPanelIndex39 = 0; webPanelIndex39 < webPanelListLen39; webPanelIndex39++) {
    var webPanelData39 = webPanelList39[webPanelIndex39];
    param38 += (webPanelIndex39 == 0) ? soy.$$escapeHtml(webPanelData39) : '';
  }
  var output = '' + aui.dialog.dialog2({id: 'pull-request-merge-dialog', content: '<div class="commit-message-container"><div class="committer-avatar">' + stash.widget.avatar({size: 'medium', person: opt_data.person}) + '</div>' + stash.widget.codeBlock({content: '' + stash.feature.pullRequest.merge.mergeMessage(opt_data), extraClasses: 'default-commit-message'}) + stash.widget.form({action: '', autocomplete: 'off', extraClasses: 'commit-message-form collapsed', content: '' + widget.aui.form.expandingTextarea({id: 'commit-message', name: 'commit-message', extraClasses: 'text commit-message full-width-field', placeholderText: soydata.VERY_UNSAFE.ordainSanitizedHtml("Add to the commit message\x26hellip;")}) + aui.buttons.button({type: 'link', text: "Cancel", extraClasses: 'commit-message-action cancel-commit-message-link'})}) + '</div>' + stash.feature.repository.branchDiagram({type: 'merge', id: 'merge-branch', sourceRef: opt_data.pullRequest.fromRef, sourceRepo: opt_data.pullRequest.fromRef.repository.id != opt_data.pullRequest.toRef.repository.id ? opt_data.pullRequest.fromRef.repository : null, targetRef: opt_data.pullRequest.toRef, targetRepo: opt_data.pullRequest.fromRef.repository.id != opt_data.pullRequest.toRef.repository.id ? opt_data.pullRequest.toRef.repository : null}), titleText: "Merge Pull Request", footerHintContent: param38, footerActionContent: '' + aui.buttons.button({text: "Merge", type: 'primary', extraClasses: 'confirm-button'}) + aui.buttons.button({text: "Cancel", type: 'link', extraClasses: 'cancel-button'})});
  return output;
};
if (goog.DEBUG) {
  stash.feature.pullRequest.merge.dialog.soyTemplateName = 'stash.feature.pullRequest.merge.dialog';
}


stash.feature.pullRequest.merge.mergeMessage = function(opt_data, opt_ignored) {
  var output = '';
  var crossRepo__soy55 = opt_data.pullRequest.toRef.repository.id != opt_data.pullRequest.fromRef.repository.id;
  output += 'Merge pull request #' + soy.$$escapeHtml(opt_data.pullRequest.id) + ' in ' + soy.$$escapeHtml(opt_data.pullRequest.toRef.repository.project.key) + '/' + soy.$$escapeHtml(opt_data.pullRequest.toRef.repository.slug) + ' from ' + ((crossRepo__soy55) ? soy.$$escapeHtml(opt_data.pullRequest.fromRef.repository.project.key) + '/' + soy.$$escapeHtml(opt_data.pullRequest.fromRef.repository.slug) + ':' : '') + soy.$$escapeHtml(opt_data.pullRequest.fromRef.displayId) + ' to ' + soy.$$escapeHtml(opt_data.pullRequest.toRef.displayId);
  return output;
};
if (goog.DEBUG) {
  stash.feature.pullRequest.merge.mergeMessage.soyTemplateName = 'stash.feature.pullRequest.merge.mergeMessage';
}


stash.feature.pullRequest.merge.errors = function(opt_data, opt_ignored) {
  var param73 = '';
  var errorList74 = opt_data.errors;
  var errorListLen74 = errorList74.length;
  for (var errorIndex74 = 0; errorIndex74 < errorListLen74; errorIndex74++) {
    var errorData74 = errorList74[errorIndex74];
    param73 += stash.widget.errorContent({message: errorData74.message, details: errorData74.details, detailListExtraClasses: 'errors'});
  }
  var output = '' + aui.message.error({content: param73});
  return output;
};
if (goog.DEBUG) {
  stash.feature.pullRequest.merge.errors.soyTemplateName = 'stash.feature.pullRequest.merge.errors';
}
;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:pull-request-merge-help', location = '/static/feature/pull-request/merge-help/merge-help.js' */
define("feature/pull-request/merge-help",["aui","stash/api/util/navbuilder","util/events"],function(k,h,b){function l(f,b,m,c){a||(a=k.dialog2(stash.feature.pullRequest.mergeHelpDialog()),a.$el.find(".dialog-close-button").click(function(){a.hide()}),a.$el.appendTo("body"));c=f.getFromRef().getRepository();var g=f.getToRef().getRepository(),d=null,e=null;c.isEqual(g)||(d=h.project(c.getProject()).repo(c).clone(c.getScmId()).buildAbsolute(),e=h.project(g.getProject()).repo(g).clone(g.getScmId()).buildAbsolute());
a.$el.find(".aui-dialog2-content").html(stash.feature.pullRequest.mergeHelp({sourceBranch:f.getFromRef().getDisplayId(),targetBranch:f.getToRef().getDisplayId(),sourceRemote:d,targetRemote:e,conflicted:b,vetoes:m}))}function d(){a&&a.show()}var a,e=function(a,b,d,c){l(a,b,d,c)};return{init:function(){b.on("stash.pull-request.cant.merge",e);b.on("stash.pull-request.show.cant.merge.help",d)},reset:function(){b.off("stash.pull-request.cant.merge",e);b.off("stash.pull-request.show.cant.merge.help",d);
a&&(a.remove(),a=null)}}});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:pull-request-merge-help', location = '/static/feature/pull-request/merge-help/merge-help.soy' */
// This file was automatically generated from merge-help.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace stash.feature.pullRequest.
 */

if (typeof stash == 'undefined') { var stash = {}; }
if (typeof stash.feature == 'undefined') { stash.feature = {}; }
if (typeof stash.feature.pullRequest == 'undefined') { stash.feature.pullRequest = {}; }


stash.feature.pullRequest.mergeHelp = function(opt_data, opt_ignored) {
  var output = '' + ((opt_data.conflicted) ? '<div class="merge-help merge-conflicted">' + stash.feature.pullRequest.mergeInstructionsForStableSourceBranch(opt_data) + '</div>' : '');
  if (opt_data.vetoes) {
    var vetoList14 = opt_data.vetoes;
    var vetoListLen14 = vetoList14.length;
    for (var vetoIndex14 = 0; vetoIndex14 < vetoListLen14; vetoIndex14++) {
      var vetoData14 = vetoList14[vetoIndex14];
      output += '<div class="merge-help"><h3>' + aui.icons.icon({icon: 'warning', useIconFont: true}) + soy.$$escapeHtml(vetoData14.summaryMessage) + '</h3><p>' + soy.$$filterNoAutoescape(vetoData14.detailedMessage) + '</p></div>';
    }
  }
  return output;
};
if (goog.DEBUG) {
  stash.feature.pullRequest.mergeHelp.soyTemplateName = 'stash.feature.pullRequest.mergeHelp';
}


stash.feature.pullRequest.mergeHelpDialog = function(opt_data, opt_ignored) {
  return '' + aui.dialog.dialog2({id: 'merge-help-dialog', size: 'large', titleText: "Issues Merging the Pull Request", extraClasses: 'merge-help-dialog', content: '', footerActionContent: '' + aui.buttons.button({text: "Close", extraClasses: 'aui-button-link dialog-close-button'})});
};
if (goog.DEBUG) {
  stash.feature.pullRequest.mergeHelpDialog.soyTemplateName = 'stash.feature.pullRequest.mergeHelpDialog';
}


stash.feature.pullRequest.mergeInstructionsForStableSourceBranch = function(opt_data, opt_ignored) {
  return '<h3>' + aui.icons.icon({icon: 'warning', useIconFont: true}) + soy.$$escapeHtml("Merge conflict") + '</h3><p>' + soy.$$escapeHtml("This pull request has conflicts. You must resolve the conflicts before you can merge:") + '</p>' + stash.feature.pullRequest.mergeStepsForStableSourceBranch(opt_data);
};
if (goog.DEBUG) {
  stash.feature.pullRequest.mergeInstructionsForStableSourceBranch.soyTemplateName = 'stash.feature.pullRequest.mergeInstructionsForStableSourceBranch';
}


stash.feature.pullRequest.mergeInstructionsForUnstableSourceBranch = function(opt_data, opt_ignored) {
  return '<h3>' + aui.icons.icon({icon: 'warning', useIconFont: true}) + soy.$$escapeHtml("Merge conflict") + '</h3><p>' + soy.$$escapeHtml("This pull request has conflicts. You must resolve the conflicts before you can merge:") + '</p>' + stash.feature.pullRequest.mergeStepsForUnstableSourceBranch(opt_data);
};
if (goog.DEBUG) {
  stash.feature.pullRequest.mergeInstructionsForUnstableSourceBranch.soyTemplateName = 'stash.feature.pullRequest.mergeInstructionsForUnstableSourceBranch';
}


stash.feature.pullRequest.mergeStepsForUnstableSourceBranch = function(opt_data, opt_ignored) {
  return '<p><strong>' + soy.$$escapeHtml("Step 1:") + '</strong> ' + ((opt_data.targetRemote) ? soy.$$escapeHtml("Fetch changes from the target repository (saving the target branch as FETCH_HEAD).") : soy.$$escapeHtml("Fetch the changes (saving the target branch as FETCH_HEAD).")) + '</p>' + stash.widget.codeBlock({content: 'git fetch ' + soy.$$escapeHtml(opt_data.targetRemote ? opt_data.targetRemote : 'origin') + ' ' + soy.$$escapeHtml(opt_data.targetBranch) + '\n', instructionBlock: true}) + '<p><strong>' + soy.$$escapeHtml("Step 2:") + '</strong> ' + soy.$$escapeHtml("Checkout the source branch and merge in the changes from the target branch. Resolve conflicts.") + '</p>' + stash.widget.codeBlock({content: 'git checkout ' + soy.$$escapeHtml(opt_data.sourceBranch) + ' \ngit merge FETCH_HEAD', instructionBlock: true}) + '<p><strong>' + soy.$$escapeHtml("Step 3:") + '</strong> ' + soy.$$escapeHtml("After the merge conflicts are resolved, stage the changes accordingly, commit the changes and push.") + '</p>' + stash.widget.codeBlock({content: 'git commit\ngit push ' + soy.$$escapeHtml(opt_data.sourceRemote ? opt_data.sourceRemote : 'origin') + ' HEAD', instructionBlock: true}) + '<p><strong>' + soy.$$escapeHtml("Step 4:") + '</strong> ' + soy.$$escapeHtml("Merge the updated pull request.") + '</p>';
};
if (goog.DEBUG) {
  stash.feature.pullRequest.mergeStepsForUnstableSourceBranch.soyTemplateName = 'stash.feature.pullRequest.mergeStepsForUnstableSourceBranch';
}


stash.feature.pullRequest.mergeStepsForStableSourceBranch = function(opt_data, opt_ignored) {
  return '<p><strong>' + soy.$$escapeHtml("Step 1:") + '</strong> ' + ((opt_data.targetRemote) ? soy.$$escapeHtml("Fetch changes from the source repository (saving the source branch as FETCH_HEAD).") : soy.$$escapeHtml("Fetch the changes (saving the source branch as FETCH_HEAD).")) + '</p>' + stash.widget.codeBlock({content: 'git fetch ' + soy.$$escapeHtml(opt_data.sourceRemote ? opt_data.sourceRemote : 'origin') + ' ' + soy.$$escapeHtml(opt_data.sourceBranch) + '\n', instructionBlock: true}) + '<p><strong>' + soy.$$escapeHtml("Step 2:") + '</strong> ' + soy.$$escapeHtml("Checkout the target branch and merge in the changes from the source branch. Resolve conflicts.") + '</p>' + stash.widget.codeBlock({content: 'git checkout ' + soy.$$escapeHtml(opt_data.targetBranch) + ' \ngit merge FETCH_HEAD', instructionBlock: true}) + '<p><strong>' + soy.$$escapeHtml("Step 3:") + '</strong> ' + soy.$$escapeHtml("After the merge conflicts are resolved, stage the changes accordingly, commit the changes and push.") + '</p>' + stash.widget.codeBlock({content: 'git commit\ngit push ' + soy.$$escapeHtml(opt_data.targetRemote ? opt_data.targetRemote : 'origin') + ' HEAD', instructionBlock: true}) + '<p><strong>' + soy.$$escapeHtml("Step 4:") + '</strong> ' + soy.$$escapeHtml("The pull request will be updated and marked as merged.") + '</p>';
};
if (goog.DEBUG) {
  stash.feature.pullRequest.mergeStepsForStableSourceBranch.soyTemplateName = 'stash.feature.pullRequest.mergeStepsForStableSourceBranch';
}
;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:pull-request-merge-tooltip', location = '/static/feature/pull-request/merge-tooltip/merge-tooltip.soy' */
// This file was automatically generated from merge-tooltip.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace stash.feature.pullRequest.
 */

if (typeof stash == 'undefined') { var stash = {}; }
if (typeof stash.feature == 'undefined') { stash.feature = {}; }
if (typeof stash.feature.pullRequest == 'undefined') { stash.feature.pullRequest = {}; }


stash.feature.pullRequest.mergeDisabledIcon = function(opt_data, opt_ignored) {
  return '<a class="merge-disabled" href="#" title="' + ((opt_data.conflicted && opt_data.vetoes.length == 0) ? soy.$$escapeHtml("You will need to resolve conflicts to be able to merge.") : (opt_data.vetoes.length == 1 && ! opt_data.conflicted) ? soy.$$escapeHtml(opt_data.vetoes[0].detailedMessage) : soy.$$escapeHtml("This pull request can\x27t be merged automatically.")) + '"></a>';
};
if (goog.DEBUG) {
  stash.feature.pullRequest.mergeDisabledIcon.soyTemplateName = 'stash.feature.pullRequest.mergeDisabledIcon';
}
;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:codemirror-util', location = '/static/util/codemirror.js' */
define("util/codemirror",["codemirror"],function(b){var a=null;return{doInOperation:function(c){if(null===a){var d=document.createElement("div");a=b(d)}return a.operation(c)}}});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:parse-commit-message-util', location = '/static/util/parse-commit-message.js' */
define("util/parse-commit-message",[],function(){var e=["\n\n","\n",". "];return{splitIntoSubjectAndBody:function(a){for(var b=0;b<e.length;b++){var c=e[b],d=a.indexOf(c);if(-1!==d)return b=a.substring(0,d).replace(/\n/g," ")+c.trim(),a=a.substring(d+c.length),this.subjectAndBody(b,a)}return this.subjectAndBody(a,"")},subjectAndBody:function(a,b){return{subject:a,body:b}}}});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:pull-request-activity', location = '/static/feature/pull-request/activity/pull-request-activity.js' */
define("feature/pull-request/pull-request-activity","aui jquery lodash stash/api/util/navbuilder util/ajax util/client-storage util/codemirror util/events util/scroll util/syntax-highlight model/commit-range model/file-change model/file-content-modes model/page-state model/path model/path-and-line widget/paged-scrollable feature/comments feature/file-content".split(" "),function(n,h,k,q,w,u,E,l,x,F,y,z,G,r,H,v,t,p,A){function B(a){(this.execute?this:n.whenIType(a)).execute(function(){var a=h(".general-comment-form");
x.scrollTo(a);a.find("textarea").focus()})}function C(a){a.closest(".diff-comment-activity, .file-comment-activity").remove()}function e(a,d,c,b,g){this._$container=h(a);this.pullRequest=d;this.pullRequestPathComponents={projectKey:r.getProject().getKey(),repoSlug:r.getRepository().getSlug(),pullRequestId:this.pullRequest.getId()};this.fromType=c;this.fromId=b;this.dataLoadedEvent="stash.feature.pullRequestActivity.dataLoaded";this._$spinner=h('\x3cdiv class\x3d"spinner"/\x3e').insertAfter(this._$container);
t.call(this,g.scrollableElement||a,{pageSize:25,dataLoadedEvent:this.dataLoadedEvent,autoLoad:"next",paginationContext:"pull-request-activity"})}h.extend(e.prototype,t.prototype);e.prototype.init=function(a){this.renderedDiffFileContents=[];t.prototype.init.call(this,a);this._inited=!0;this.loadedRange.isEmpty()||(this.renderedDiffFileContents=this.renderedDiffFileContents.concat(e.renderDiffs(this._$container.children(".diff-comment-activity"),a.diffCommentData,new y({pullRequest:this.pullRequest}))));
p.bindContext(this._$container,new p.PullRequestAnchor(this.pullRequestPathComponents));var d=this;this._approvalHandler=function(a){d.addApprovalActivity(a.approved,a.user,new Date)};l.on("stash.widget.approve-button.added",this._approvalHandler);l.on("stash.widget.approve-button.removed",this._approvalHandler);l.on("stash.feature.comments.lastCommentDeleted",C);l.on("stash.keyboard.shortcuts.pullrequest.addCommentHandler",B)};e.prototype.reset=function(){l.off("stash.widget.approve-button.added",
this._approvalHandler);l.off("stash.widget.approve-button.removed",this._approvalHandler);l.off("stash.feature.comments.lastCommentDeleted",C);l.off("stash.keyboard.shortcuts.pullrequest.addCommentHandler",B);k.chain(this.renderedDiffFileContents).pluck("inlineInfo").pluck("fileContent").invoke("destroy").value();delete this.renderedDiffFileContents;k.invoke(this.fileCommentContexts,"destroy");delete this.fileCommentContexts;p.unbindContext(this._$container);t.prototype.reset.call(this);this.currentTime=
void 0;this._inited=!1};e.prototype.checkCommentIsNew=function(a){a.isUnread=a.updatedDate>this.lastViewed&&(!r.getCurrentUser()||a.author.name!==r.getCurrentUser().getName());a.comments.length&&k.each(a.comments,k.bind(this.checkCommentIsNew,this))};e.prototype.checkCommentActivitiesAreNew=function(a){var d=this;k.each(a,function(a){"COMMENTED"===a.action&&d.checkCommentIsNew(a.comment)})};e.prototype.requestData=function(a,d){var c=this,b=0!==a||k.isUndefined(this.fromType)||k.isUndefined(this.fromId)?
{}:{fromType:this.fromType,fromId:this.fromId};this._$spinner.spin("large");return w.rest({url:q.rest().project(this.pullRequestPathComponents.projectKey).repo(this.pullRequestPathComponents.repoSlug).pullRequest(this.pullRequestPathComponents.pullRequestId).activities().withParams(h.extend(b,{start:a,limit:d,avatarSize:stash.widget.avatarSizeInPx({size:"medium"}),markup:!0})).build(),statusCode:{404:function(a,f,b,d,e){a="activity"===c.fromType?"Activity not found":
"Comment not found";f="activity"===c.fromType?"The requested activity does not exist.":"The requested comment does not exist. It may have been deleted.";return h.extend({},e,{title:a,titleClass:"confirm-header",message:f,fallbackTitle:"Ok",fallbackUrl:q.project(c.pullRequestPathComponents.projectKey).repo(c.pullRequestPathComponents.repoSlug).pullRequest(c.pullRequestPathComponents.pullRequestId).overview().build(),
canClose:!1,shouldReload:!1})}}}).done(function(a,f,b){c.currentTime||(f=(new Date(b.getResponseHeader("Date"))).getTime(),b=u.buildKey("last-viewed","pull-request"),c.currentTime=isNaN(f)?(new Date).getTime():f,c.lastViewed=u.getItem(b)||c.currentTime,u.setItem(b,c.currentTime));c.checkCommentActivitiesAreNew(a.values)}).fail(function(){c._$spinner.spinStop()})};e.prototype.attachContent=function(a,d){this._$container["html"===a?"append":a](d)};e.prototype.decorateForFocus=function(a){var d;if("activity"===
this.fromType){var c=parseInt(this.fromId,10);k.some(a.values,function(a,b){return a.id===c?(a.isFocused=!0,d=c,!0):!1})}else{var b=parseInt(this.fromId,10),g=function(a){return a.id===b?a.isFocused=!0:a.comments?k.some(a.comments,function(a){return g(a)}):!1};k.some(a.values,function(a,b){return a.comment&&g(a.comment)?(d=a.id,!0):!1})}return d};e.prototype.onAttachFirstPermalinkPage=function(a,d){function c(){f.hide();e.spin("large");var a=b.loadedRange.pageBefore(b.options.pageSize);w.rest({url:q.rest().project(b.pullRequestPathComponents.projectKey).repo(b.pullRequestPathComponents.repoSlug).pullRequest(b.pullRequestPathComponents.pullRequestId).activities().withParams(h.extend(a,
{avatarSize:stash.widget.avatarSizeInPx({size:"medium"}),markup:!0})).build()}).done(function(a,c,d){b.loadedRange.add(a.start,a.size,a.isLastPage,a.nextPageStart);var h;k.any(a.values,function(a,b){if(a.id===D)return h=b,!0});c=a.values.slice(0,h);b.checkCommentActivitiesAreNew(c);b.attachActivities(c,function(a){g.after(a)});a.isFirstPage||b.loadedRange.reachedStart()?(f.unbind("click"),g.remove(),e.remove()):(D=m,m=a.previousPageStartId);l.trigger(b.dataLoadedEvent,b,a.start,a.limit,a)}).always(function(){e.spinStop();
f.show()})}var b=this,g=h(stash.feature.pullRequest.loadPreviousActivities());this.attachContent(d,g);var f=g.find("a"),e=g.append(h('\x3cdiv class\x3d"spinner"/\x3e')),m=a.previousPageStartId,D=a.values[0].id;f.click(function(a){a.preventDefault();c()})};e.prototype.attachActivities=function(a,d){var c=this,b=0,g=new y({pullRequest:this.pullRequest}),f=h(k.map(a,function(a){a=stash.feature.pullRequest.activityListItem({activity:a,pullRequest:c.pullRequest.toJSON(),commitRange:g.toJSON(),isNew:!1});
b++;return a}).join(""));F.container(f);var l=k.reduce(a,function(a,b){a[b.id]=b;return a},{});d(f);this.fileCommentContexts=e.addBreadcrumbsAndBindFileComments(f.filter(".file-comment-activity"),l,g);f=e.renderDiffs(f.filter(".diff-comment-activity"),l,g);this.renderedDiffFileContents=this.renderedDiffFileContents.concat(f);this._$container.find(".pull-request-diff-outdated-lozenge").tooltip({gravity:"ne"});return f};e.prototype.attachNewContent=function(a,d){function c(a){if(b._inited)if(a=e?h(".comment.focused",
a):h(".activity-item.focused",a),a.length)x.scrollTo(a,{waitForImages:!0,cancelIfScrolled:!0,duration:400}),l.trigger("stash.feature.pullRequestActivity.focused",null,a);else if(e)l.once("stash.feature.comments.commentContainerAdded",c)}var b=this,g=h("#pull-request-activity \x3e li.comment-form-container"),f=!k.isUndefined(this.fromId)&&!k.isUndefined(this.fromType),e="comment"===this.fromType,g=0===g.siblings().length,m;f&&g&&(m=this.decorateForFocus(a));if(f&&!a.isFirstPage&&g)this.onAttachFirstPermalinkPage(a,
d);f=this.attachActivities(a.values,function(a){b.attachContent(d,a)});this._$spinner.spinStop();a.isLastPage&&this._$spinner.remove();null!=m&&((m=k.findWhere(f,{activityId:m}))?m.inlineInfo.initPromise.done(c.bind(null,null)):c())};e.renderDiffForComment=function(a,d,c){a=new A(a);var b=c.getPullRequest().getToRef().getRepository();c=z.fromDiff(d.diff,c,b);var b=c.getPath(),g=c.getDiff().hunks[0],b=g?0!==g.sourceLine?new v(b,g.sourceLine,"FROM"):new v(b,g.destinationLine,"TO"):new v(b);d=a.init(c,
{commentMode:A.commentMode.REPLY_ONLY,lineComments:[d.comment],asyncDiffModifications:!1,attachScroll:!1,autoResizing:!0,isExcerpt:!0,contentMode:G.DIFF,changeTypeLozenge:!1,changeModeLozenge:!1,fileIcon:!0,breadcrumbs:!0,scrollPaneSelector:"self",pullRequestDiffLink:!0,pullRequestDiffCurrent:d.commentAnchor?!1===d.commentAnchor.orphaned:!0,pullRequestDiffLinkUrl:q.currentPullRequest().diff().change(b.toString()).build(),toolbarWebFragmentLocationPrimary:"stash.pull-request.activity.diff.toolbar.primary",
toolbarWebFragmentLocationSecondary:"stash.pull-request.activity.diff.toolbar.secondary"});return{fileContent:a,initPromise:d}};e.renderDiffs=function(a,d,c){var b=[];k.each(a,function(a){var c=Number(a.getAttribute("data-activityid"));b.push({activityId:c,el:a,data:d[c]})});return E.doInOperation(function(){return k.map(b,function(a){return{activityId:a.activityId,inlineInfo:e.renderDiffForComment(h(a.el).find(".detail"),a.data,c)}})})};e.addBreadcrumbsAndBindFileComments=function(a,d,c){var b=[];
a.each(function(){var a=h(this),f=a.attr("data-activityid"),e=d[f],f=new H(e.commentAnchor.path),e=e.commentAnchor?!1===e.commentAnchor.orphaned:!0,l=k.map(f.getComponents(),function(a){return{text:a}});a.find(".breadcrumbs").append(stash.widget.breadcrumbs.crumbs({pathComponents:l,primaryLink:e?q.currentPullRequest().diff().change(f).build():void 0}));f=new z({repository:r.getRepository(),commitRange:c,path:f});a=p.bindContext(a,new p.DiffAnchor(f),{$toolbar:a.find(".file-toolbar"),commentMode:p.commentMode.REPLY_ONLY});
b.push(a)});return b};e.prototype.addApprovalActivity=function(a,d,c){var b=h("#pull-request-activity .comment-form-container").first();h(stash.feature.pullRequest.activityApprovalListItem({user:d.name?d:d.toJSON(),action:a?"APPROVED":"UNAPPROVED",activityDate:c})).hide().insertAfter(b).fadeIn("slow")};e.prototype.handleErrors=h.noop;return e});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:pull-request-activity', location = '/static/feature/pull-request/activity/pull-request-activity.soy' */
// This file was automatically generated from pull-request-activity.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace stash.feature.pullRequest.
 */

if (typeof stash == 'undefined') { var stash = {}; }
if (typeof stash.feature == 'undefined') { stash.feature = {}; }
if (typeof stash.feature.pullRequest == 'undefined') { stash.feature.pullRequest = {}; }


stash.feature.pullRequest.activity = function(opt_data, opt_ignored) {
  return '<div class="pull-request-activity-content"><ol ' + ((opt_data.id) ? ' id="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + ' class="pull-request-activity comment-container' + ((opt_data.extraClasses) ? ' ' + soy.$$escapeHtml(opt_data.extraClasses) : '') + '">' + stash.feature.commentFormListItem({tips: opt_data.commentTips, extraFormClasses: 'general-comment-form collapsed', currentUser: opt_data.currentUser}) + '</ol></div>';
};
if (goog.DEBUG) {
  stash.feature.pullRequest.activity.soyTemplateName = 'stash.feature.pullRequest.activity';
}


stash.feature.pullRequest.activityListItemContainer = function(opt_data, opt_ignored) {
  return '<li class="activity-item' + ((opt_data.extraClasses) ? ' ' + soy.$$escapeHtml(opt_data.extraClasses) : '') + ((opt_data.isNew) ? ' new' : '') + ((opt_data.isFocused) ? ' focused' : '') + '"' + ((opt_data.id) ? ' data-activityid="' + soy.$$escapeHtml(opt_data.id) + '"' : '') + '><div class="activity-item-content"><div class="avatar">' + stash.widget.avatar({size: 'medium', person: opt_data.user}) + '</div><div class="action"><p class="summary">' + soy.$$filterNoAutoescape(opt_data.summaryContent) + stash.widget.date.shortAge({date: opt_data.activityDate}) + '</p><div class="detail">' + ((opt_data.detailContent) ? soy.$$filterNoAutoescape(opt_data.detailContent) : '') + '</div></div></div></li>';
};
if (goog.DEBUG) {
  stash.feature.pullRequest.activityListItemContainer.soyTemplateName = 'stash.feature.pullRequest.activityListItemContainer';
}


stash.feature.pullRequest.activityListItem = function(opt_data, opt_ignored) {
  return '' + ((opt_data.activity.action == 'COMMENTED') ? stash.feature.pullRequest.activityCommentListItem(soy.$$augmentMap(opt_data.activity, {currentUser: opt_data.currentUser, commitRange: opt_data.commitRange, pullRequest: opt_data.pullRequest})) : (opt_data.activity.action == 'APPROVED' || opt_data.activity.action == 'UNAPPROVED') ? stash.feature.pullRequest.activityApprovalListItem({user: opt_data.activity.user, isFocused: opt_data.activity.isFocused, action: opt_data.activity.action, activityDate: opt_data.activity.createdDate}) : (opt_data.activity.action == 'RESCOPED') ? (opt_data.activity.added && opt_data.activity.added.total || opt_data.activity.removed && opt_data.activity.removed.total) ? stash.feature.pullRequest.activityRescopeListItem({user: opt_data.activity.user, isFocused: opt_data.activity.isFocused, action: opt_data.activity.action, activityDate: opt_data.activity.createdDate, activityRepository: opt_data.pullRequest.toRef.repository, added: opt_data.activity.added, removed: opt_data.activity.removed}) : '' : stash.feature.pullRequest.activityListItemContainer({isNew: opt_data.isNew, isFocused: opt_data.activity.isFocused, user: opt_data.activity.user, activityDate: opt_data.activity.createdDate, summaryContent: '' + stash.feature.pullRequest.activityActionString({activityAction: opt_data.activity.action, user: opt_data.activity.user, sourceBranchContent: '' + ((opt_data.activity.action == 'MERGED') ? stash.feature.repository.refLozenge({repository: opt_data.pullRequest.fromRef.repository.id == opt_data.pullRequest.toRef.repository.id ? null : opt_data.pullRequest.fromRef.repository, ref: opt_data.pullRequest.fromRef}) : ''), targetBranchContent: '' + ((opt_data.activity.action == 'MERGED') ? stash.feature.repository.refLozenge({ref: opt_data.pullRequest.toRef}) : ''), mergeCommitContent: '' + ((opt_data.activity.action == 'MERGED' && opt_data.activity.changeset) ? stash.feature.changeset.link({repository: opt_data.pullRequest.toRef.repository, changeset: opt_data.activity.changeset}) : '')})}) + '</li>');
};
if (goog.DEBUG) {
  stash.feature.pullRequest.activityListItem.soyTemplateName = 'stash.feature.pullRequest.activityListItem';
}


stash.feature.pullRequest.activityApprovalListItem = function(opt_data, opt_ignored) {
  return '' + stash.feature.pullRequest.activityListItemContainer({user: opt_data.user, isFocused: opt_data.isFocused, activityDate: opt_data.activityDate, summaryContent: '' + stash.feature.pullRequest.activityActionString({activityAction: opt_data.action, user: opt_data.user})});
};
if (goog.DEBUG) {
  stash.feature.pullRequest.activityApprovalListItem.soyTemplateName = 'stash.feature.pullRequest.activityApprovalListItem';
}


stash.feature.pullRequest.activityRescopeListItem = function(opt_data, opt_ignored) {
  return '' + ((opt_data.added.total || opt_data.removed.total) ? stash.feature.pullRequest.activityListItemContainer({user: opt_data.user, isFocused: opt_data.isFocused, activityDate: opt_data.activityDate, extraClasses: 'rescope', summaryContent: '' + stash.feature.pullRequest.activityActionString({activityAction: opt_data.action, user: opt_data.user, numCommitsAdded: opt_data.added.total, numCommitsRemoved: opt_data.removed.total}), detailContent: '' + ((opt_data.added.changesets && opt_data.added.changesets.length || opt_data.removed.changesets && opt_data.removed.changesets.length) ? stash.feature.pullRequest.rescopeCommitsTable({repository: opt_data.activityRepository, added: opt_data.added, removed: opt_data.removed}) + ((0 < opt_data.added.total - (opt_data.added.changesets ? opt_data.added.changesets.length : 0) + (opt_data.removed.total - (opt_data.removed.changesets ? opt_data.removed.changesets.length : 0))) ? '<p class="more-commits">' + soy.$$filterNoAutoescape(AJS.format("\x26hellip;and {0} more.",opt_data.added.total - (opt_data.added.changesets ? opt_data.added.changesets.length : 0) + (opt_data.removed.total - (opt_data.removed.changesets ? opt_data.removed.changesets.length : 0)))) + '</p>' : '') : '')}) : '');
};
if (goog.DEBUG) {
  stash.feature.pullRequest.activityRescopeListItem.soyTemplateName = 'stash.feature.pullRequest.activityRescopeListItem';
}


stash.feature.pullRequest.rescopeActionStringImpl = function(opt_data, opt_ignored) {
  return '' + ((opt_data.numCommitsAdded && opt_data.numCommitsRemoved) ? soy.$$filterNoAutoescape(AJS.format("{0} {1} the pull request by adding {2} {2,choice,1#commit|1\x3ccommits} and removing {3} {3,choice,1#commit|1\x3ccommits}",opt_data.userDisplayNameContent,opt_data.lozengeContent,opt_data.numCommitsAdded,opt_data.numCommitsRemoved)) : (opt_data.numCommitsAdded) ? soy.$$filterNoAutoescape(AJS.format("{0} {1} the pull request by adding {2} {2,choice,1#commit|1\x3ccommits}",opt_data.userDisplayNameContent,opt_data.lozengeContent,opt_data.numCommitsAdded)) : (opt_data.numCommitsRemoved) ? soy.$$filterNoAutoescape(AJS.format("{0} {1} the pull request by removing {2} {2,choice,1#commit|1\x3ccommits}",opt_data.userDisplayNameContent,opt_data.lozengeContent,opt_data.numCommitsRemoved)) : '');
};
if (goog.DEBUG) {
  stash.feature.pullRequest.rescopeActionStringImpl.soyTemplateName = 'stash.feature.pullRequest.rescopeActionStringImpl';
}


stash.feature.pullRequest.rescopeCommitsTable = function(opt_data, opt_ignored) {
  var param155 = '';
  if (opt_data.added.changesets && opt_data.added.changesets.length) {
    var changesetList158 = opt_data.added.changesets;
    var changesetListLen158 = changesetList158.length;
    for (var changesetIndex158 = 0; changesetIndex158 < changesetListLen158; changesetIndex158++) {
      var changesetData158 = changesetList158[changesetIndex158];
      param155 += stash.feature.commits.commitsTableRow({changeset: changesetData158, cellsContent: stash.feature.commits.commitsTableCells({repository: opt_data.repository, changeset: changesetData158}) + '<td class="status">' + stash.widget.lozenge.lozenge({htmlElement: 'span', extraClasses: 'aui-lozenge-subtle aui-lozenge-success', text: "ADDED"}) + '</td>'});
    }
  }
  if (opt_data.removed.changesets && opt_data.removed.changesets.length) {
    var changesetList174 = opt_data.removed.changesets;
    var changesetListLen174 = changesetList174.length;
    for (var changesetIndex174 = 0; changesetIndex174 < changesetListLen174; changesetIndex174++) {
      var changesetData174 = changesetList174[changesetIndex174];
      param155 += stash.feature.commits.commitsTableRow({changeset: changesetData174, cellsContent: stash.feature.commits.commitsTableCells({repository: opt_data.repository, changeset: changesetData174}) + '<td class="status">' + stash.widget.lozenge.lozenge({htmlElement: 'span', extraClasses: 'aui-lozenge-subtle aui-lozenge-error', text: "REMOVED"}) + '</td>'});
    }
  }
  var output = '' + widget.aui.table({dataAttributes: {lastpage: true}, extraClasses: 'commits-table show-merges', content: param155});
  return output;
};
if (goog.DEBUG) {
  stash.feature.pullRequest.rescopeCommitsTable.soyTemplateName = 'stash.feature.pullRequest.rescopeCommitsTable';
}


stash.feature.pullRequest.activityCommentListItem = function(opt_data, opt_ignored) {
  return '' + ((opt_data.commentAction == 'ADDED') ? (opt_data.commentAnchor) ? stash.feature.pullRequest.activityListItemContainer({extraClasses: opt_data.diff ? 'diff-comment-activity' : 'file-comment-activity', id: opt_data.id, user: opt_data.user, activityDate: opt_data.createdDate, isNew: false, isFocused: opt_data.isFocused, summaryContent: '' + stash.feature.pullRequest.activityCommentActionString({activityAction: opt_data.commentAction, user: opt_data.user}), detailContent: '' + ((opt_data.diff) ? '' : '<div class="file-comment-container">' + stash.feature.file.fileToolbar({fileIcon: true, breadcrumbs: true, secondaryToolbarContent: '' + ((opt_data.commentAnchor.orphaned) ? stash.widget.lozenge.lozenge({text: "Outdated", htmlElement: 'span', extraClasses: 'aui-lozenge-current aui-lozenge-subtle pull-request-diff-outdated-lozenge', tooltip: "This diff has changed in more recent commits"}) : '')}) + stash.feature.fileComments({comments: [opt_data.comment], commitRange: opt_data.commitRange}) + '</div>')}) : stash.feature.comment({comment: opt_data.comment, pullRequest: opt_data.pullRequest, currentUser: opt_data.currentUser, numOfAncestors: 0, extraClasses: 'general-comment-activity'}) : '');
};
if (goog.DEBUG) {
  stash.feature.pullRequest.activityCommentListItem.soyTemplateName = 'stash.feature.pullRequest.activityCommentListItem';
}


stash.feature.pullRequest.activityCommentActionString = function(opt_data, opt_ignored) {
  return '' + stash.feature.pullRequest.activityActionString(soy.$$augmentMap(opt_data, {activityAction: 'COMMENT_' + opt_data.activityAction}));
};
if (goog.DEBUG) {
  stash.feature.pullRequest.activityCommentActionString.soyTemplateName = 'stash.feature.pullRequest.activityCommentActionString';
}


stash.feature.pullRequest.activityActionString = function(opt_data, opt_ignored) {
  return '' + stash.feature.pullRequest.activityActionStringImpl(soy.$$augmentMap(opt_data, {userDisplayNameContent: '' + stash.widget.userLink({user: opt_data.user, extraClasses: 'user-name'}), lozengeContent: '' + stash.widget.lozenge.pullRequestState({state: opt_data.activityAction, isActivityContext: true})}));
};
if (goog.DEBUG) {
  stash.feature.pullRequest.activityActionString.soyTemplateName = 'stash.feature.pullRequest.activityActionString';
}


stash.feature.pullRequest.activityActionStringImpl = function(opt_data, opt_ignored) {
  var output = '';
  switch (opt_data.activityAction) {
    case 'COMMENT_ADDED':
      output += soy.$$filterNoAutoescape(AJS.format("{0} commented on a file",opt_data.userDisplayNameContent));
      break;
    case 'COMMENT_REPLIED':
      output += soy.$$filterNoAutoescape(AJS.format("{0} replied to a comment",opt_data.userDisplayNameContent));
      break;
    case 'OPENED':
      output += soy.$$filterNoAutoescape(AJS.format("{0} {1} the pull request",opt_data.userDisplayNameContent,opt_data.lozengeContent));
      break;
    case 'DECLINED':
      output += soy.$$filterNoAutoescape(AJS.format("{0} {1} the pull request",opt_data.userDisplayNameContent,opt_data.lozengeContent));
      break;
    case 'MERGED':
      output += (opt_data.mergeCommitContent) ? soy.$$filterNoAutoescape(AJS.format("{0} {1} {2} to {3} in commit {4}",opt_data.userDisplayNameContent,opt_data.lozengeContent,opt_data.sourceBranchContent,opt_data.targetBranchContent,opt_data.mergeCommitContent)) : soy.$$filterNoAutoescape(AJS.format("{0} remotely merged the pull request from {1} to {2}",opt_data.userDisplayNameContent,opt_data.sourceBranchContent,opt_data.targetBranchContent));
      break;
    case 'REOPENED':
      output += soy.$$filterNoAutoescape(AJS.format("{0} {1} the pull request",opt_data.userDisplayNameContent,opt_data.lozengeContent));
      break;
    case 'RESCOPED':
      output += stash.feature.pullRequest.rescopeActionStringImpl(opt_data);
      break;
    case 'UPDATED':
      output += soy.$$filterNoAutoescape(AJS.format("{0} {1} the pull request",opt_data.userDisplayNameContent,opt_data.lozengeContent));
      break;
    case 'APPROVED':
      output += soy.$$filterNoAutoescape(AJS.format("{0} {1} the pull request",opt_data.userDisplayNameContent,opt_data.lozengeContent));
      break;
    case 'UNAPPROVED':
      output += soy.$$filterNoAutoescape(AJS.format("{0} {1} the pull request",opt_data.userDisplayNameContent,opt_data.lozengeContent));
      break;
    default:
      output += soy.$$escapeHtml(opt_data.activityAction);
  }
  return output;
};
if (goog.DEBUG) {
  stash.feature.pullRequest.activityActionStringImpl.soyTemplateName = 'stash.feature.pullRequest.activityActionStringImpl';
}


stash.feature.pullRequest.loadPreviousActivities = function(opt_data, opt_ignored) {
  return '<li class="activity-load-new"><a href="#">' + soy.$$escapeHtml("Load new activity") + '</a></li>';
};
if (goog.DEBUG) {
  stash.feature.pullRequest.loadPreviousActivities.soyTemplateName = 'stash.feature.pullRequest.loadPreviousActivities';
}
;
;/* module-key = 'com.atlassian.applinks.applinks-plugin:applinks-public', location = 'js/applinks.public.js' */
var ApplinksUtils=ApplinksUtils||(function(f){var c={},b={};var p="com_atlassian_applinks_authentication";function o(r){var q=f('<span class="aui-icon icon-close"></span>').click(function(){r.trigger("messageClose",[this]).remove()});r.append(q)}function g(){if(window===parent.window){return null}var r=null,q=window;f("iframe",parent.document.body).each(function(s){if(this.contentWindow.window===q){r=this}});return r}function d(r,w,v,q,s){if(w in c){var t=c[w];if(v){t.authAdminUri=q;delete c[w]}j(t,v)}if(!s&&parent&&(parent!==window)){var u=window;f("iframe",parent.document.body).each(function(x,z){var y=z.contentWindow;if(y!==u){if(y.AJS&&y.AJS.$){y.AJS.$(y.document).trigger("applinks.auth.completion",[w,v,q,true])}}})}}function j(q,t){var s=f(document);if(t){var r=function(u){if(u.isDefaultPrevented()){m(q)}else{h(q);document.location.reload(true)}};s.bind("applinks.auth.approved",r);s.trigger("applinks.auth.approved",q);s.unbind("applinks.auth.approved",r)}else{s.trigger("applinks.auth.denied",q)}}function k(r,q){var s=r.find("a.applink-authenticate");if(r.hasClass("aui-message")){o(r)}s.click(function(t){window.open(q.authUri,p);t.preventDefault()});c[q.id]=q;return r}function n(){f(".applinks-auth-request").each(function(t){var s=f(this),v=s.find(".applinkId").val(),q=s.find(".appName").val(),r=s.find(".appUri").val(),u=s.find(".authUri").val();if(v&&u){k(s,{id:v,appName:q,appUri:r,authUri:u})}})}function i(q){var r=f('<div class="aui-message warning closeable applinks-auth-request"><p><span class="aui-icon icon-applinks-key"></span></p></div>');r.append(AJS.format("Additional information may be available, please \u003ca class=\u0022applink-authenticate\u0022 href=\u0022{0}\u0022\u003eauthenticate\u003c/a\u003e with \u003ca href=\u0022{1}\u0022\u003e{2}\u003c/a\u003e.",AJS.escapeHtml(q.authUri),AJS.escapeHtml(q.appUri),AJS.escapeHtml(q.appName)));k(r,q);return r}function e(u,r){var q=f('<span class="applinks-auth-request"></span>'),s=f('<span class="applinks-request-description"></span>'),t=AJS.format("\u003ca class=\u0022applink-authenticate\u0022 href=\u0022{0}\u0022\u003eAuthenticate\u003c/a\u003e to see additional information.",AJS.escapeHtml(r.authUri));if(u){s.append(u);s.append(" - ")}s.append(t);q.append(s);k(q,r);return q}function h(q){var r=g();if((!r)||(!r.id)){return}if(!parent.ApplinksUtils.pendingConfirmations){parent.ApplinksUtils.pendingConfirmations={}}if(!(r.id in parent.ApplinksUtils.pendingConfirmations)){parent.ApplinksUtils.pendingConfirmations[r.id]=[]}parent.ApplinksUtils.pendingConfirmations[r.id].push(q);return}function l(){if(parent&&parent.ApplinksUtils&&parent.ApplinksUtils.pendingConfirmations){var r=g();if(r){if(r.id in parent.ApplinksUtils.pendingConfirmations){var s=parent.ApplinksUtils.pendingConfirmations[r.id];delete parent.ApplinksUtils.pendingConfirmations[r.id];for(var q=0,t=s.length;q<t;q++){m(s[q])}}}}}function m(s){var t=f(document),r=f('<div class="aui-message success closeable applinks-auth-confirmation"><p><span class="aui-icon icon-applinks-key-success"></span></p></div>'),q=t.find("div.applinks-auth-confirmation-container");if(!q.length){q=t.find("body")}r.append(AJS.format("This application is now using \u003ca href=\u0022{0}\u0022\u003e{1}\u003c/a\u003e\u0027\u0027s credentials. Revoke access at any time by going to \u003ca href=\u0022{2}\u0022\u003eOAuth access tokens\u003c/a\u003e.",AJS.escapeHtml(s.appUri),AJS.escapeHtml(s.appName),AJS.escapeHtml(s.authAdminUri)));o(r);q.prepend(r);setTimeout(function(){r.fadeOut(1000,function(){f(this).remove()})},5000)}function a(){if(parent&&!(parent===window)){if(!parent.ApplinksUtils){parent.ApplinksUtils={}}}f(document).bind("applinks.auth.completion",d);n();l()}f(document).ready(a);return{createAuthRequestBanner:i,createAuthRequestInline:e}})(AJS.$);;
;/* module-key = 'com.atlassian.plugins.issue-status-plugin:issue-status-resources', location = 'templates/status.soy' */
// This file was automatically generated from status.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace JIRA.Template.Util.Issue.Status.
 */

if (typeof JIRA == 'undefined') { var JIRA = {}; }
if (typeof JIRA.Template == 'undefined') { JIRA.Template = {}; }
if (typeof JIRA.Template.Util == 'undefined') { JIRA.Template.Util = {}; }
if (typeof JIRA.Template.Util.Issue == 'undefined') { JIRA.Template.Util.Issue = {}; }
if (typeof JIRA.Template.Util.Issue.Status == 'undefined') { JIRA.Template.Util.Issue.Status = {}; }


JIRA.Template.Util.Issue.Status.issueStatusResolver = function(opt_data, opt_ignored) {
  return '' + ((! opt_data.issueStatus) ? '<span class="aui-icon aui-icon-small aui-iconfont-help jira-issue-status-render-error" title="' + soy.$$escapeHtml("no.issue.status.info") + '"></span>' : (opt_data.issueStatus.statusCategory) ? JIRA.Template.Util.Issue.Status.issueStatus(opt_data) : JIRA.Template.Util.Issue.Status.iconStatus({name: opt_data.issueStatus.name, iconUrl: opt_data.issueStatus.iconUrl, description: opt_data.issueStatus.description, isCompact: opt_data.isCompact}));
};
if (goog.DEBUG) {
  JIRA.Template.Util.Issue.Status.issueStatusResolver.soyTemplateName = 'JIRA.Template.Util.Issue.Status.issueStatusResolver';
}


JIRA.Template.Util.Issue.Status.iconStatus = function(opt_data, opt_ignored) {
  return '<img src="' + soy.$$escapeHtml(opt_data.iconUrl) + '" width="16" height="16" alt="' + soy.$$escapeHtml(opt_data.name) + '" title="' + soy.$$escapeHtml(opt_data.name) + ((opt_data.description) ? ' - ' + soy.$$escapeHtml(opt_data.description) : '') + '" class="jira-issue-status-icon">' + ((! opt_data.isCompact) ? ' ' + soy.$$escapeHtml(opt_data.name) : '');
};
if (goog.DEBUG) {
  JIRA.Template.Util.Issue.Status.iconStatus.soyTemplateName = 'JIRA.Template.Util.Issue.Status.iconStatus';
}


JIRA.Template.Util.Issue.Status.issueStatus = function(opt_data, opt_ignored) {
  return '' + JIRA.Template.Util.Issue.Status.statusLozenge({name: opt_data.issueStatus.name, categoryKey: opt_data.issueStatus.statusCategory.key, colorName: opt_data.issueStatus.statusCategory.colorName, description: opt_data.issueStatus.description, isSubtle: opt_data.isSubtle, isCompact: opt_data.isCompact, maxWidth: opt_data.maxWidth});
};
if (goog.DEBUG) {
  JIRA.Template.Util.Issue.Status.issueStatus.soyTemplateName = 'JIRA.Template.Util.Issue.Status.issueStatus';
}


JIRA.Template.Util.Issue.Status.statusLozenge = function(opt_data, opt_ignored) {
  var output = '';
  var maxWidth__soy46 = opt_data.maxWidth ? opt_data.maxWidth : 'medium';
  var tooltipContent__soy47 = '<span class="jira-issue-status-tooltip-title">' + soy.$$escapeHtml(opt_data.name) + '</span>' + ((opt_data.description) ? '<br><span class="jira-issue-status-tooltip-desc">' + soy.$$escapeHtml(opt_data.description) + '</span>' : '');
  output += '<span class=" jira-issue-status-lozenge aui-lozenge ' + JIRA.Template.Util.Issue.Status.statusLozengeClasses(opt_data) + ((opt_data.isSubtle && ! opt_data.isCompact) ? ' aui-lozenge-subtle' : '') + ((opt_data.isCompact) ? ' jira-issue-status-lozenge-compact' : '') + ' jira-issue-status-lozenge-max-width-' + soy.$$escapeHtml(maxWidth__soy46) + '" data-tooltip="' + soy.$$escapeHtml(tooltipContent__soy47) + '">' + soy.$$escapeHtml(opt_data.name) + '</span>';
  return output;
};
if (goog.DEBUG) {
  JIRA.Template.Util.Issue.Status.statusLozenge.soyTemplateName = 'JIRA.Template.Util.Issue.Status.statusLozenge';
}


JIRA.Template.Util.Issue.Status.statusLozengeClasses = function(opt_data, opt_ignored) {
  return 'jira-issue-status-lozenge-' + soy.$$escapeHtml(opt_data.colorName ? opt_data.colorName : 'medium-gray') + ' ' + ((opt_data.categoryKey) ? 'jira-issue-status-lozenge-' + soy.$$escapeHtml(opt_data.categoryKey) : '');
};
if (goog.DEBUG) {
  JIRA.Template.Util.Issue.Status.statusLozengeClasses.soyTemplateName = 'JIRA.Template.Util.Issue.Status.statusLozengeClasses';
}
;
;/* module-key = 'com.atlassian.plugins.issue-status-plugin:issue-status-resources', location = '/js/issue-status-plugin.js' */
AJS.$(function(){if(AJS.$.fn.tooltip){AJS.$(".jira-issue-status-lozenge[data-tooltip]").tooltip({aria:true,gravity:AJS.$.fn.tipsy.autoWE,delayIn:100,html:true,live:true,title:"data-tooltip",className:"jira-issue-status-tooltip"})}});;
;/* module-key = 'com.atlassian.auiplugin:internal-jquery-ui-datepicker', location = 'js-vendor/jquery/jquery-ui/jquery.ui.datepicker.js' */
(function(d){function B(){this.debug=!1;this._curInst=null;this._keyEvent=!1;this._disabledInputs=[];this._inDialog=this._datepickerShowing=!1;this._mainDivId="ui-datepicker-div";this._inlineClass="ui-datepicker-inline";this._appendClass="ui-datepicker-append";this._triggerClass="ui-datepicker-trigger";this._dialogClass="ui-datepicker-dialog";this._disableClass="ui-datepicker-disabled";this._unselectableClass="ui-datepicker-unselectable";this._currentClass="ui-datepicker-current-day";this._dayOverClass=
"ui-datepicker-days-cell-over";this.regional=[];this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:"January February March April May June July August September October November December".split(" "),monthNamesShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),dayNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),dayNamesShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),dayNamesMin:"Su Mo Tu We Th Fr Sa".split(" "),
weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""};this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,
beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1};d.extend(this._defaults,this.regional[""]);this.dpDiv=C(d('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))}function C(a){return a.bind("mouseout",function(a){a=d(a.target).closest("button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a");
a.length&&a.removeClass("ui-state-hover ui-datepicker-prev-hover ui-datepicker-next-hover")}).bind("mouseover",function(b){b=d(b.target).closest("button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a");if(!d.datepicker._isDisabledDatepicker(D.inline?a.parent()[0]:D.input[0])&&b.length)b.parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),b.addClass("ui-state-hover"),b.hasClass("ui-datepicker-prev")&&b.addClass("ui-datepicker-prev-hover"),b.hasClass("ui-datepicker-next")&&
b.addClass("ui-datepicker-next-hover")})}function z(a,b){d.extend(a,b);for(var c in b)if(null==b[c]||void 0==b[c])a[c]=b[c];return a}d.extend(d.ui,{datepicker:{version:"1.8.24"}});var x=(new Date).getTime(),D;d.extend(B.prototype,{markerClassName:"hasDatepicker",maxRows:4,log:function(){this.debug&&console.log.apply("",arguments)},_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(a){z(this._defaults,a||{});return this},_attachDatepicker:function(a,b){var c=null,e;for(e in this._defaults){var f=
a.getAttribute("date:"+e);if(f){c=c||{};try{c[e]=eval(f)}catch(h){c[e]=f}}}e=a.nodeName.toLowerCase();f="div"==e||"span"==e;a.id||(this.uuid+=1,a.id="dp"+this.uuid);var j=this._newInst(d(a),f);j.settings=d.extend({},b||{},c||{});"input"==e?this._connectDatepicker(a,j):f&&this._inlineDatepicker(a,j)},_newInst:function(a,b){return{id:a[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1"),input:a,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:b,dpDiv:!b?this.dpDiv:C(d('<div class="'+
this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))}},_connectDatepicker:function(a,b){var c=d(a);b.append=d([]);b.trigger=d([]);c.hasClass(this.markerClassName)||(this._attachments(c,b),c.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",function(a,c,d){b.settings[c]=d}).bind("getData.datepicker",function(a,c){return this._get(b,c)}),this._autoSize(b),d.data(a,"datepicker",
b),b.settings.disabled&&this._disableDatepicker(a))},_attachments:function(a,b){var c=this._get(b,"appendText"),e=this._get(b,"isRTL");b.append&&b.append.remove();c&&(b.append=d('<span class="'+this._appendClass+'">'+c+"</span>"),a[e?"before":"after"](b.append));a.unbind("focus",this._showDatepicker);b.trigger&&b.trigger.remove();c=this._get(b,"showOn");("focus"==c||"both"==c)&&a.focus(this._showDatepicker);if("button"==c||"both"==c){var c=this._get(b,"buttonText"),f=this._get(b,"buttonImage");b.trigger=
d(this._get(b,"buttonImageOnly")?d("<img/>").addClass(this._triggerClass).attr({src:f,alt:c,title:c}):d('<button type="button"></button>').addClass(this._triggerClass).html(""==f?c:d("<img/>").attr({src:f,alt:c,title:c})));a[e?"before":"after"](b.trigger);b.trigger.click(function(){if(d.datepicker._datepickerShowing&&d.datepicker._lastInput==a[0])d.datepicker._hideDatepicker();else{d.datepicker._datepickerShowing&&d.datepicker._lastInput!=a[0]&&d.datepicker._hideDatepicker();d.datepicker._showDatepicker(a[0])}return false})}},
_autoSize:function(a){if(this._get(a,"autoSize")&&!a.inline){var b=new Date(2009,11,20),c=this._get(a,"dateFormat");if(c.match(/[DM]/)){var d=function(a){for(var b=0,c=0,d=0;d<a.length;d++)a[d].length>b&&(b=a[d].length,c=d);return c};b.setMonth(d(this._get(a,c.match(/MM/)?"monthNames":"monthNamesShort")));b.setDate(d(this._get(a,c.match(/DD/)?"dayNames":"dayNamesShort"))+20-b.getDay())}a.input.attr("size",this._formatDate(a,b).length)}},_inlineDatepicker:function(a,b){var c=d(a);c.hasClass(this.markerClassName)||
(c.addClass(this.markerClassName).append(b.dpDiv).bind("setData.datepicker",function(a,c,d){b.settings[c]=d}).bind("getData.datepicker",function(a,c){return this._get(b,c)}),d.data(a,"datepicker",b),this._setDate(b,this._getDefaultDate(b),!0),this._updateDatepicker(b),this._updateAlternate(b),b.settings.disabled&&this._disableDatepicker(a),b.dpDiv.css("display","block"))},_dialogDatepicker:function(a,b,c,e,f){a=this._dialogInst;a||(this.uuid+=1,this._dialogInput=d('<input type="text" id="dp'+this.uuid+
'" style="position: absolute; top: -100px; width: 0px;"/>'),this._dialogInput.keydown(this._doKeyDown),d("body").append(this._dialogInput),a=this._dialogInst=this._newInst(this._dialogInput,!1),a.settings={},d.data(this._dialogInput[0],"datepicker",a));z(a.settings,e||{});b=b&&b.constructor==Date?this._formatDate(a,b):b;this._dialogInput.val(b);this._pos=f?f.length?f:[f.pageX,f.pageY]:null;this._pos||(this._pos=[document.documentElement.clientWidth/2-100+(document.documentElement.scrollLeft||document.body.scrollLeft),
document.documentElement.clientHeight/2-150+(document.documentElement.scrollTop||document.body.scrollTop)]);this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px");a.settings.onSelect=c;this._inDialog=!0;this.dpDiv.addClass(this._dialogClass);this._showDatepicker(this._dialogInput[0]);d.blockUI&&d.blockUI(this.dpDiv);d.data(this._dialogInput[0],"datepicker",a);return this},_destroyDatepicker:function(a){var b=d(a),c=d.data(a,"datepicker");if(b.hasClass(this.markerClassName)){var e=
a.nodeName.toLowerCase();d.removeData(a,"datepicker");"input"==e?(c.append.remove(),c.trigger.remove(),b.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"==e||"span"==e)&&b.removeClass(this.markerClassName).empty()}},_enableDatepicker:function(a){var b=d(a),c=d.data(a,"datepicker");if(b.hasClass(this.markerClassName)){var e=a.nodeName.toLowerCase();if("input"==e)a.disabled=
!1,c.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""});else if("div"==e||"span"==e)b=b.children("."+this._inlineClass),b.children().removeClass("ui-state-disabled"),b.find("select.ui-datepicker-month, select.ui-datepicker-year").removeAttr("disabled");this._disabledInputs=d.map(this._disabledInputs,function(b){return b==a?null:b})}},_disableDatepicker:function(a){var b=d(a),c=d.data(a,"datepicker");if(b.hasClass(this.markerClassName)){var e=
a.nodeName.toLowerCase();if("input"==e)a.disabled=!0,c.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"});else if("div"==e||"span"==e)b=b.children("."+this._inlineClass),b.children().addClass("ui-state-disabled"),b.find("select.ui-datepicker-month, select.ui-datepicker-year").attr("disabled","disabled");this._disabledInputs=d.map(this._disabledInputs,function(b){return b==a?null:b});this._disabledInputs[this._disabledInputs.length]=
a}},_isDisabledDatepicker:function(a){if(!a)return!1;for(var b=0;b<this._disabledInputs.length;b++)if(this._disabledInputs[b]==a)return!0;return!1},_getInst:function(a){try{return d.data(a,"datepicker")}catch(b){throw"Missing instance data for this datepicker";}},_optionDatepicker:function(a,b,c){var e=this._getInst(a);if(2==arguments.length&&"string"==typeof b)return"defaults"==b?d.extend({},d.datepicker._defaults):e?"all"==b?d.extend({},e.settings):this._get(e,b):null;var f=b||{};"string"==typeof b&&
(f={},f[b]=c);if(e){this._curInst==e&&this._hideDatepicker();var h=this._getDateDatepicker(a,!0),j=this._getMinMaxDate(e,"min"),g=this._getMinMaxDate(e,"max");z(e.settings,f);null!==j&&(void 0!==f.dateFormat&&void 0===f.minDate)&&(e.settings.minDate=this._formatDate(e,j));null!==g&&(void 0!==f.dateFormat&&void 0===f.maxDate)&&(e.settings.maxDate=this._formatDate(e,g));this._attachments(d(a),e);this._autoSize(e);this._setDate(e,h);this._updateAlternate(e);this._updateDatepicker(e)}},_changeDatepicker:function(a,
b,c){this._optionDatepicker(a,b,c)},_refreshDatepicker:function(a){(a=this._getInst(a))&&this._updateDatepicker(a)},_setDateDatepicker:function(a,b){var c=this._getInst(a);c&&(this._setDate(c,b),this._updateDatepicker(c),this._updateAlternate(c))},_getDateDatepicker:function(a,b){var c=this._getInst(a);c&&!c.inline&&this._setDateFromField(c,b);return c?this._getDate(c):null},_doKeyDown:function(a){var b=d.datepicker._getInst(a.target),c=!0,e=b.dpDiv.is(".ui-datepicker-rtl");b._keyEvent=!0;if(d.datepicker._datepickerShowing)switch(a.keyCode){case 9:d.datepicker._hideDatepicker();
c=!1;break;case 13:return c=d("td."+d.datepicker._dayOverClass+":not(."+d.datepicker._currentClass+")",b.dpDiv),c[0]&&d.datepicker._selectDay(a.target,b.selectedMonth,b.selectedYear,c[0]),(a=d.datepicker._get(b,"onSelect"))?(c=d.datepicker._formatDate(b),a.apply(b.input?b.input[0]:null,[c,b])):d.datepicker._hideDatepicker(),!1;case 27:d.datepicker._hideDatepicker();break;case 33:d.datepicker._adjustDate(a.target,a.ctrlKey?-d.datepicker._get(b,"stepBigMonths"):-d.datepicker._get(b,"stepMonths"),"M");
break;case 34:d.datepicker._adjustDate(a.target,a.ctrlKey?+d.datepicker._get(b,"stepBigMonths"):+d.datepicker._get(b,"stepMonths"),"M");break;case 35:(a.ctrlKey||a.metaKey)&&d.datepicker._clearDate(a.target);c=a.ctrlKey||a.metaKey;break;case 36:(a.ctrlKey||a.metaKey)&&d.datepicker._gotoToday(a.target);c=a.ctrlKey||a.metaKey;break;case 37:if(a.ctrlKey||a.metaKey)d.datepicker._adjustDate(a.target,e?1:-1,"D");c=a.ctrlKey||a.metaKey;a.originalEvent.altKey&&d.datepicker._adjustDate(a.target,a.ctrlKey?
-d.datepicker._get(b,"stepBigMonths"):-d.datepicker._get(b,"stepMonths"),"M");break;case 38:(a.ctrlKey||a.metaKey)&&d.datepicker._adjustDate(a.target,-7,"D");c=a.ctrlKey||a.metaKey;break;case 39:if(a.ctrlKey||a.metaKey)d.datepicker._adjustDate(a.target,e?-1:1,"D");c=a.ctrlKey||a.metaKey;a.originalEvent.altKey&&d.datepicker._adjustDate(a.target,a.ctrlKey?+d.datepicker._get(b,"stepBigMonths"):+d.datepicker._get(b,"stepMonths"),"M");break;case 40:(a.ctrlKey||a.metaKey)&&d.datepicker._adjustDate(a.target,
7,"D");c=a.ctrlKey||a.metaKey;break;default:c=!1}else 36==a.keyCode&&a.ctrlKey?d.datepicker._showDatepicker(this):c=!1;c&&(a.preventDefault(),a.stopPropagation())},_doKeyPress:function(a){var b=d.datepicker._getInst(a.target);if(d.datepicker._get(b,"constrainInput")){var b=d.datepicker._possibleChars(d.datepicker._get(b,"dateFormat")),c=String.fromCharCode(void 0==a.charCode?a.keyCode:a.charCode);return a.ctrlKey||a.metaKey||" ">c||!b||-1<b.indexOf(c)}},_doKeyUp:function(a){a=d.datepicker._getInst(a.target);
if(a.input.val()!=a.lastVal)try{if(d.datepicker.parseDate(d.datepicker._get(a,"dateFormat"),a.input?a.input.val():null,d.datepicker._getFormatConfig(a)))d.datepicker._setDateFromField(a),d.datepicker._updateAlternate(a),d.datepicker._updateDatepicker(a)}catch(b){d.datepicker.log(b)}return!0},_showDatepicker:function(a){a=a.target||a;"input"!=a.nodeName.toLowerCase()&&(a=d("input",a.parentNode)[0]);if(!(d.datepicker._isDisabledDatepicker(a)||d.datepicker._lastInput==a)){var b=d.datepicker._getInst(a);
d.datepicker._curInst&&d.datepicker._curInst!=b&&(d.datepicker._curInst.dpDiv.stop(!0,!0),b&&d.datepicker._datepickerShowing&&d.datepicker._hideDatepicker(d.datepicker._curInst.input[0]));var c=d.datepicker._get(b,"beforeShow"),c=c?c.apply(a,[a,b]):{};if(!1!==c){z(b.settings,c);b.lastVal=null;d.datepicker._lastInput=a;d.datepicker._setDateFromField(b);d.datepicker._inDialog&&(a.value="");d.datepicker._pos||(d.datepicker._pos=d.datepicker._findPos(a),d.datepicker._pos[1]+=a.offsetHeight);var e=!1;
d(a).parents().each(function(){e=e|d(this).css("position")=="fixed";return!e});e&&d.browser.opera&&(d.datepicker._pos[0]-=document.documentElement.scrollLeft,d.datepicker._pos[1]-=document.documentElement.scrollTop);c={left:d.datepicker._pos[0],top:d.datepicker._pos[1]};d.datepicker._pos=null;b.dpDiv.empty();b.dpDiv.css({position:"absolute",display:"block",top:"-1000px"});d.datepicker._updateDatepicker(b);c=d.datepicker._checkOffset(b,c,e);b.dpDiv.css({position:d.datepicker._inDialog&&d.blockUI?"static":
e?"fixed":"absolute",display:"none",left:c.left+"px",top:c.top+"px"});if(!b.inline){var c=d.datepicker._get(b,"showAnim"),f=d.datepicker._get(b,"duration"),h=function(){var a=b.dpDiv.find("iframe.ui-datepicker-cover");if(a.length){var c=d.datepicker._getBorders(b.dpDiv);a.css({left:-c[0],top:-c[1],width:b.dpDiv.outerWidth(),height:b.dpDiv.outerHeight()})}};b.dpDiv.zIndex(d(a).zIndex()+1);d.datepicker._datepickerShowing=!0;if(d.effects&&d.effects[c])b.dpDiv.show(c,d.datepicker._get(b,"showOptions"),
f,h);else b.dpDiv[c||"show"](c?f:null,h);(!c||!f)&&h();b.input.is(":visible")&&!b.input.is(":disabled")&&b.input.focus();d.datepicker._curInst=b}}}},_updateDatepicker:function(a){this.maxRows=4;var b=d.datepicker._getBorders(a.dpDiv);D=a;a.dpDiv.empty().append(this._generateHTML(a));this._attachHandlers(a);var c=a.dpDiv.find("iframe.ui-datepicker-cover");c.length&&c.css({left:-b[0],top:-b[1],width:a.dpDiv.outerWidth(),height:a.dpDiv.outerHeight()});a.dpDiv.find("."+this._dayOverClass+" a").mouseover();
b=this._getNumberOfMonths(a);c=b[1];a.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width("");1<c&&a.dpDiv.addClass("ui-datepicker-multi-"+c).css("width",17*c+"em");a.dpDiv[(1!=b[0]||1!=b[1]?"add":"remove")+"Class"]("ui-datepicker-multi");a.dpDiv[(this._get(a,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl");a==d.datepicker._curInst&&(d.datepicker._datepickerShowing&&a.input&&a.input.is(":visible")&&!a.input.is(":disabled")&&a.input[0]!=document.activeElement)&&
a.input.focus();if(a.yearshtml){var e=a.yearshtml;setTimeout(function(){e===a.yearshtml&&a.yearshtml&&a.dpDiv.find("select.ui-datepicker-year:first").replaceWith(a.yearshtml);e=a.yearshtml=null},0)}},_getBorders:function(a){var b=function(a){return{thin:1,medium:2,thick:3}[a]||a};return[parseFloat(b(a.css("border-left-width"))),parseFloat(b(a.css("border-top-width")))]},_checkOffset:function(a,b,c){var e=a.dpDiv.outerWidth(),f=a.dpDiv.outerHeight(),h=a.input?a.input.outerWidth():0,j=a.input?a.input.outerHeight():
0,g=document.documentElement.clientWidth+(c?0:d(document).scrollLeft()),i=document.documentElement.clientHeight+(c?0:d(document).scrollTop());b.left-=this._get(a,"isRTL")?e-h:0;b.left-=c&&b.left==a.input.offset().left?d(document).scrollLeft():0;b.top-=c&&b.top==a.input.offset().top+j?d(document).scrollTop():0;b.left-=Math.min(b.left,b.left+e>g&&g>e?Math.abs(b.left+e-g):0);b.top-=Math.min(b.top,b.top+f>i&&i>f?Math.abs(f+j):0);return b},_findPos:function(a){for(var b=this._getInst(a),b=this._get(b,
"isRTL");a&&("hidden"==a.type||1!=a.nodeType||d.expr.filters.hidden(a));)a=a[b?"previousSibling":"nextSibling"];a=d(a).offset();return[a.left,a.top]},_hideDatepicker:function(a){var b=this._curInst;if(b&&!(a&&b!=d.data(a,"datepicker"))&&this._datepickerShowing){var a=this._get(b,"showAnim"),c=this._get(b,"duration"),e=function(){d.datepicker._tidyDialog(b)};if(d.effects&&d.effects[a])b.dpDiv.hide(a,d.datepicker._get(b,"showOptions"),c,e);else b.dpDiv["slideDown"==a?"slideUp":"fadeIn"==a?"fadeOut":
"hide"](a?c:null,e);a||e();this._datepickerShowing=!1;(a=this._get(b,"onClose"))&&a.apply(b.input?b.input[0]:null,[b.input?b.input.val():"",b]);this._lastInput=null;this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),d.blockUI&&(d.unblockUI(),d("body").append(this.dpDiv)));this._inDialog=!1}},_tidyDialog:function(a){a.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(a){if(d.datepicker._curInst){var a=d(a.target),b=
d.datepicker._getInst(a[0]);(a[0].id!=d.datepicker._mainDivId&&0==a.parents("#"+d.datepicker._mainDivId).length&&!a.hasClass(d.datepicker.markerClassName)&&!a.closest("."+d.datepicker._triggerClass).length&&d.datepicker._datepickerShowing&&(!d.datepicker._inDialog||!d.blockUI)||a.hasClass(d.datepicker.markerClassName)&&d.datepicker._curInst!=b)&&d.datepicker._hideDatepicker()}},_adjustDate:function(a,b,c){var a=d(a),e=this._getInst(a[0]);this._isDisabledDatepicker(a[0])||(this._adjustInstDate(e,b+
("M"==c?this._get(e,"showCurrentAtPos"):0),c),this._updateDatepicker(e))},_gotoToday:function(a){var a=d(a),b=this._getInst(a[0]);if(this._get(b,"gotoCurrent")&&b.currentDay)b.selectedDay=b.currentDay,b.drawMonth=b.selectedMonth=b.currentMonth,b.drawYear=b.selectedYear=b.currentYear;else{var c=new Date;b.selectedDay=c.getDate();b.drawMonth=b.selectedMonth=c.getMonth();b.drawYear=b.selectedYear=c.getFullYear()}this._notifyChange(b);this._adjustDate(a)},_selectMonthYear:function(a,b,c){var a=d(a),e=
this._getInst(a[0]);e["selected"+("M"==c?"Month":"Year")]=e["draw"+("M"==c?"Month":"Year")]=parseInt(b.options[b.selectedIndex].value,10);this._notifyChange(e);this._adjustDate(a)},_selectDay:function(a,b,c,e){var f=d(a);!d(e).hasClass(this._unselectableClass)&&!this._isDisabledDatepicker(f[0])&&(f=this._getInst(f[0]),f.selectedDay=f.currentDay=d("a",e).html(),f.selectedMonth=f.currentMonth=b,f.selectedYear=f.currentYear=c,this._selectDate(a,this._formatDate(f,f.currentDay,f.currentMonth,f.currentYear)))},
_clearDate:function(a){a=d(a);this._getInst(a[0]);this._selectDate(a,"")},_selectDate:function(a,b){var c=d(a),c=this._getInst(c[0]),b=null!=b?b:this._formatDate(c);c.input&&c.input.val(b);this._updateAlternate(c);var e=this._get(c,"onSelect");e?e.apply(c.input?c.input[0]:null,[b,c]):c.input&&c.input.trigger("change");c.inline?this._updateDatepicker(c):(this._hideDatepicker(),this._lastInput=c.input[0],"object"!=typeof c.input[0]&&c.input.focus(),this._lastInput=null)},_updateAlternate:function(a){var b=
this._get(a,"altField");if(b){var c=this._get(a,"altFormat")||this._get(a,"dateFormat"),e=this._getDate(a),f=this.formatDate(c,e,this._getFormatConfig(a));d(b).each(function(){d(this).val(f)})}},noWeekends:function(a){a=a.getDay();return[0<a&&6>a,""]},iso8601Week:function(a){a=new Date(a.getTime());a.setDate(a.getDate()+4-(a.getDay()||7));var b=a.getTime();a.setMonth(0);a.setDate(1);return Math.floor(Math.round((b-a)/864E5)/7)+1},parseDate:function(a,b,c){if(null==a||null==b)throw"Invalid arguments";
b="object"==typeof b?b.toString():b+"";if(""==b)return null;for(var e=(c?c.shortYearCutoff:null)||this._defaults.shortYearCutoff,e="string"!=typeof e?e:(new Date).getFullYear()%100+parseInt(e,10),f=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort,h=(c?c.dayNames:null)||this._defaults.dayNames,j=(c?c.monthNamesShort:null)||this._defaults.monthNamesShort,g=(c?c.monthNames:null)||this._defaults.monthNames,i=c=-1,p=-1,r=-1,k=!1,m=function(b){(b=y+1<a.length&&a.charAt(y+1)==b)&&y++;return b},l=function(a){var c=
m(a),a=RegExp("^\\d{1,"+("@"==a?14:"!"==a?20:"y"==a&&c?4:"o"==a?3:2)+"}"),a=b.substring(u).match(a);if(!a)throw"Missing number at position "+u;u+=a[0].length;return parseInt(a[0],10)},n=function(a,c,e){var a=d.map(m(a)?e:c,function(a,b){return[[b,a]]}).sort(function(a,b){return-(a[1].length-b[1].length)}),f=-1;d.each(a,function(a,c){var d=c[1];if(b.substr(u,d.length).toLowerCase()==d.toLowerCase())return f=c[0],u+=d.length,!1});if(-1!=f)return f+1;throw"Unknown name at position "+u;},s=function(){if(b.charAt(u)!=
a.charAt(y))throw"Unexpected literal at position "+u;u++},u=0,y=0;y<a.length;y++)if(k)"'"==a.charAt(y)&&!m("'")?k=!1:s();else switch(a.charAt(y)){case "d":p=l("d");break;case "D":n("D",f,h);break;case "o":r=l("o");break;case "m":i=l("m");break;case "M":i=n("M",j,g);break;case "y":c=l("y");break;case "@":var v=new Date(l("@")),c=v.getFullYear(),i=v.getMonth()+1,p=v.getDate();break;case "!":v=new Date((l("!")-this._ticksTo1970)/1E4);c=v.getFullYear();i=v.getMonth()+1;p=v.getDate();break;case "'":m("'")?
s():k=!0;break;default:s()}if(u<b.length)throw"Extra/unparsed characters found in date: "+b.substring(u);-1==c?c=(new Date).getFullYear():100>c&&(c+=(new Date).getFullYear()-(new Date).getFullYear()%100+(c<=e?0:-100));if(-1<r){i=1;p=r;do{e=this._getDaysInMonth(c,i-1);if(p<=e)break;i++;p-=e}while(1)}v=this._daylightSavingAdjust(new Date(c,i-1,p));if(v.getFullYear()!=c||v.getMonth()+1!=i||v.getDate()!=p)throw"Invalid date";return v},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",
RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:864E9*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925)),formatDate:function(a,b,c){if(!b)return"";var d=(c?c.dayNamesShort:null)||this._defaults.dayNamesShort,f=(c?c.dayNames:null)||this._defaults.dayNames,h=(c?c.monthNamesShort:null)||this._defaults.monthNamesShort,c=(c?c.monthNames:null)||this._defaults.monthNames,j=function(b){(b=r+1<
a.length&&a.charAt(r+1)==b)&&r++;return b},g=function(a,b,c){b=""+b;if(j(a))for(;b.length<c;)b="0"+b;return b},i="",p=!1;if(b)for(var r=0;r<a.length;r++)if(p)"'"==a.charAt(r)&&!j("'")?p=!1:i+=a.charAt(r);else switch(a.charAt(r)){case "d":i+=g("d",b.getDate(),2);break;case "D":var k;k=b.getDay();var m=d,l=f;k=j("D")?l[k]:m[k];i+=k;break;case "o":i+=g("o",Math.round(((new Date(b.getFullYear(),b.getMonth(),b.getDate())).getTime()-(new Date(b.getFullYear(),0,0)).getTime())/864E5),3);break;case "m":i+=
g("m",b.getMonth()+1,2);break;case "M":k=b.getMonth();m=h;l=c;k=j("M")?l[k]:m[k];i+=k;break;case "y":i+=j("y")?b.getFullYear():(10>b.getYear()%100?"0":"")+b.getYear()%100;break;case "@":i+=b.getTime();break;case "!":i+=1E4*b.getTime()+this._ticksTo1970;break;case "'":j("'")?i+="'":p=!0;break;default:i+=a.charAt(r)}return i},_possibleChars:function(a){for(var b="",c=!1,d=function(b){(b=f+1<a.length&&a.charAt(f+1)==b)&&f++;return b},f=0;f<a.length;f++)if(c)"'"==a.charAt(f)&&!d("'")?c=!1:b+=a.charAt(f);
else switch(a.charAt(f)){case "d":case "m":case "y":case "@":b+="0123456789";break;case "D":case "M":return null;case "'":d("'")?b+="'":c=!0;break;default:b+=a.charAt(f)}return b},_get:function(a,b){return void 0!==a.settings[b]?a.settings[b]:this._defaults[b]},_setDateFromField:function(a,b){if(a.input.val()!=a.lastVal){var c=this._get(a,"dateFormat"),d=a.lastVal=a.input?a.input.val():null,f,h;f=h=this._getDefaultDate(a);var j=this._getFormatConfig(a);try{f=this.parseDate(c,d,j)||h}catch(g){this.log(g),
d=b?"":d}a.selectedDay=f.getDate();a.drawMonth=a.selectedMonth=f.getMonth();a.drawYear=a.selectedYear=f.getFullYear();a.currentDay=d?f.getDate():0;a.currentMonth=d?f.getMonth():0;a.currentYear=d?f.getFullYear():0;this._adjustInstDate(a)}},_getDefaultDate:function(a){return this._restrictMinMax(a,this._determineDate(a,this._get(a,"defaultDate"),new Date))},_determineDate:function(a,b,c){if(null==b||""===b)b=c;else{var e;if("string"==typeof b)a:{try{e=d.datepicker.parseDate(d.datepicker._get(a,"dateFormat"),
b,d.datepicker._getFormatConfig(a));break a}catch(f){}var h=(b.toLowerCase().match(/^c/)?d.datepicker._getDate(a):null)||new Date,a=h.getFullYear();e=h.getMonth();for(var h=h.getDate(),j=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,g=j.exec(b);g;){switch(g[2]||"d"){case "d":case "D":h+=parseInt(g[1],10);break;case "w":case "W":h+=7*parseInt(g[1],10);break;case "m":case "M":e+=parseInt(g[1],10);h=Math.min(h,d.datepicker._getDaysInMonth(a,e));break;case "y":case "Y":a+=parseInt(g[1],10),h=Math.min(h,d.datepicker._getDaysInMonth(a,
e))}g=j.exec(b)}e=new Date(a,e,h)}else"number"==typeof b?isNaN(b)?b=c:(a=new Date,a.setDate(a.getDate()+b),b=a):b=new Date(b.getTime()),e=b;b=e}if(b=b&&"Invalid Date"==b.toString()?c:b)b.setHours(0),b.setMinutes(0),b.setSeconds(0),b.setMilliseconds(0);return this._daylightSavingAdjust(b)},_daylightSavingAdjust:function(a){if(!a)return null;a.setHours(12<a.getHours()?a.getHours()+2:0);return a},_setDate:function(a,b,c){var d=!b,f=a.selectedMonth,h=a.selectedYear,b=this._restrictMinMax(a,this._determineDate(a,
b,new Date));a.selectedDay=a.currentDay=b.getDate();a.drawMonth=a.selectedMonth=a.currentMonth=b.getMonth();a.drawYear=a.selectedYear=a.currentYear=b.getFullYear();(f!=a.selectedMonth||h!=a.selectedYear)&&!c&&this._notifyChange(a);this._adjustInstDate(a);a.input&&a.input.val(d?"":this._formatDate(a))},_getDate:function(a){return!a.currentYear||a.input&&""==a.input.val()?null:this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay))},_attachHandlers:function(a){var b=this._get(a,
"stepMonths"),c="#"+a.id.replace(/\\\\/g,"\\");a.dpDiv.find("[data-handler]").map(function(){d(this).bind(this.getAttribute("data-event"),{prev:function(){window["DP_jQuery_"+x].datepicker._adjustDate(c,-b,"M")},next:function(){window["DP_jQuery_"+x].datepicker._adjustDate(c,+b,"M")},hide:function(){window["DP_jQuery_"+x].datepicker._hideDatepicker()},today:function(){window["DP_jQuery_"+x].datepicker._gotoToday(c)},selectDay:function(){window["DP_jQuery_"+x].datepicker._selectDay(c,+this.getAttribute("data-month"),
+this.getAttribute("data-year"),this);return!1},selectMonth:function(){window["DP_jQuery_"+x].datepicker._selectMonthYear(c,this,"M");return!1},selectYear:function(){window["DP_jQuery_"+x].datepicker._selectMonthYear(c,this,"Y");return!1}}[this.getAttribute("data-handler")])})},_generateHTML:function(a){var b=new Date,b=this._daylightSavingAdjust(new Date(b.getFullYear(),b.getMonth(),b.getDate())),c=this._get(a,"isRTL"),e=this._get(a,"showButtonPanel"),f=this._get(a,"hideIfNoPrevNext"),h=this._get(a,
"navigationAsDateFormat"),j=this._getNumberOfMonths(a),g=this._get(a,"showCurrentAtPos"),i=this._get(a,"stepMonths"),p=1!=j[0]||1!=j[1],r=this._daylightSavingAdjust(!a.currentDay?new Date(9999,9,9):new Date(a.currentYear,a.currentMonth,a.currentDay)),k=this._getMinMaxDate(a,"min"),m=this._getMinMaxDate(a,"max"),g=a.drawMonth-g,l=a.drawYear;0>g&&(g+=12,l--);if(m)for(var n=this._daylightSavingAdjust(new Date(m.getFullYear(),m.getMonth()-j[0]*j[1]+1,m.getDate())),n=k&&n<k?k:n;this._daylightSavingAdjust(new Date(l,
g,1))>n;)g--,0>g&&(g=11,l--);a.drawMonth=g;a.drawYear=l;var n=this._get(a,"prevText"),n=!h?n:this.formatDate(n,this._daylightSavingAdjust(new Date(l,g-i,1)),this._getFormatConfig(a)),n=this._canAdjustMonth(a,-1,l,g)?'<a class="ui-datepicker-prev ui-corner-all" data-handler="prev" data-event="click" title="'+n+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"e":"w")+'">'+n+"</span></a>":f?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+n+'"><span class="ui-icon ui-icon-circle-triangle-'+
(c?"e":"w")+'">'+n+"</span></a>",s=this._get(a,"nextText"),s=!h?s:this.formatDate(s,this._daylightSavingAdjust(new Date(l,g+i,1)),this._getFormatConfig(a)),f=this._canAdjustMonth(a,1,l,g)?'<a class="ui-datepicker-next ui-corner-all" data-handler="next" data-event="click" title="'+s+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"w":"e")+'">'+s+"</span></a>":f?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+s+'"><span class="ui-icon ui-icon-circle-triangle-'+(c?"w":
"e")+'">'+s+"</span></a>",i=this._get(a,"currentText"),s=this._get(a,"gotoCurrent")&&a.currentDay?r:b,i=!h?i:this.formatDate(i,s,this._getFormatConfig(a)),h=!a.inline?'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" data-handler="hide" data-event="click">'+this._get(a,"closeText")+"</button>":"",e=e?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(c?h:"")+(this._isInRange(a,s)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" data-handler="today" data-event="click">'+
i+"</button>":"")+(c?"":h)+"</div>":"",h=parseInt(this._get(a,"firstDay"),10),h=isNaN(h)?0:h,i=this._get(a,"showWeek"),s=this._get(a,"dayNames");this._get(a,"dayNamesShort");var u=this._get(a,"dayNamesMin"),y=this._get(a,"monthNames"),v=this._get(a,"monthNamesShort"),x=this._get(a,"beforeShowDay"),z=this._get(a,"showOtherMonths"),D=this._get(a,"selectOtherMonths");this._get(a,"calculateWeek");for(var B=this._getDefaultDate(a),E="",F=0;F<j[0];F++){var I="";this.maxRows=4;for(var G=0;G<j[1];G++){var C=
this._daylightSavingAdjust(new Date(l,g,a.selectedDay)),t=" ui-corner-all",q="";if(p){q+='<div class="ui-datepicker-group';if(1<j[1])switch(G){case 0:q+=" ui-datepicker-group-first";t=" ui-corner-"+(c?"right":"left");break;case j[1]-1:q+=" ui-datepicker-group-last";t=" ui-corner-"+(c?"left":"right");break;default:q+=" ui-datepicker-group-middle",t=""}q+='">'}for(var q=q+('<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+t+'">'+(/all|left/.test(t)&&0==F?c?f:n:"")+(/all|right/.test(t)&&
0==F?c?n:f:"")+this._generateMonthYearHeader(a,g,l,k,m,0<F||0<G,y,v)+'</div><table class="ui-datepicker-calendar"><thead><tr>'),w=i?'<th class="ui-datepicker-week-col">'+this._get(a,"weekHeader")+"</th>":"",t=0;7>t;t++)var o=(t+h)%7,w=w+("<th"+(5<=(t+h+6)%7?' class="ui-datepicker-week-end"':"")+'><span title="'+s[o]+'">'+u[o]+"</span></th>");q+=w+"</tr></thead><tbody>";w=this._getDaysInMonth(l,g);l==a.selectedYear&&g==a.selectedMonth&&(a.selectedDay=Math.min(a.selectedDay,w));t=(this._getFirstDayOfMonth(l,
g)-h+7)%7;w=Math.ceil((t+w)/7);this.maxRows=w=p?this.maxRows>w?this.maxRows:w:w;for(var o=this._daylightSavingAdjust(new Date(l,g,1-t)),L=0;L<w;L++){for(var q=q+"<tr>",J=!i?"":'<td class="ui-datepicker-week-col">'+this._get(a,"calculateWeek")(o)+"</td>",t=0;7>t;t++){var H=x?x.apply(a.input?a.input[0]:null,[o]):[!0,""],A=o.getMonth()!=g,K=A&&!D||!H[0]||k&&o<k||m&&o>m,J=J+('<td class="'+(5<=(t+h+6)%7?" ui-datepicker-week-end":"")+(A?" ui-datepicker-other-month":"")+(o.getTime()==C.getTime()&&g==a.selectedMonth&&
a._keyEvent||B.getTime()==o.getTime()&&B.getTime()==C.getTime()?" "+this._dayOverClass:"")+(K?" "+this._unselectableClass+" ui-state-disabled":"")+(A&&!z?"":" "+H[1]+(o.getTime()==r.getTime()?" "+this._currentClass:"")+(o.getTime()==b.getTime()?" ui-datepicker-today":""))+'"'+((!A||z)&&H[2]?' title="'+H[2]+'"':"")+(K?"":' data-handler="selectDay" data-event="click" data-month="'+o.getMonth()+'" data-year="'+o.getFullYear()+'"')+">"+(A&&!z?"&#xa0;":K?'<span class="ui-state-default">'+o.getDate()+"</span>":
'<a class="ui-state-default'+(o.getTime()==b.getTime()?" ui-state-highlight":"")+(o.getTime()==r.getTime()?" ui-state-active":"")+(A?" ui-priority-secondary":"")+'" href="#">'+o.getDate()+"</a>")+"</td>");o.setDate(o.getDate()+1);o=this._daylightSavingAdjust(o)}q+=J+"</tr>"}g++;11<g&&(g=0,l++);q+="</tbody></table>"+(p?"</div>"+(0<j[0]&&G==j[1]-1?'<div class="ui-datepicker-row-break"></div>':""):"");I+=q}E+=I}E+=e+(d.browser.msie&&7>parseInt(d.browser.version,10)&&!a.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':
"");a._keyEvent=!1;return E},_generateMonthYearHeader:function(a,b,c,d,f,h,j,g){var i=this._get(a,"changeMonth"),p=this._get(a,"changeYear"),r=this._get(a,"showMonthAfterYear"),k='<div class="ui-datepicker-title">',m="";if(h||!i)m+='<span class="ui-datepicker-month">'+j[b]+"</span>";else{for(var j=d&&d.getFullYear()==c,l=f&&f.getFullYear()==c,m=m+'<select class="ui-datepicker-month" data-handler="selectMonth" data-event="change">',n=0;12>n;n++)if((!j||n>=d.getMonth())&&(!l||n<=f.getMonth()))m+='<option value="'+
n+'"'+(n==b?' selected="selected"':"")+">"+g[n]+"</option>";m+="</select>"}r||(k+=m+(h||!i||!p?"&#xa0;":""));if(!a.yearshtml)if(a.yearshtml="",h||!p)k+='<span class="ui-datepicker-year">'+c+"</span>";else{var g=this._get(a,"yearRange").split(":"),s=(new Date).getFullYear(),j=function(a){a=a.match(/c[+-].*/)?c+parseInt(a.substring(1),10):a.match(/[+-].*/)?s+parseInt(a,10):parseInt(a,10);return isNaN(a)?s:a},b=j(g[0]),g=Math.max(b,j(g[1]||"")),b=d?Math.max(b,d.getFullYear()):b,g=f?Math.min(g,f.getFullYear()):
g;for(a.yearshtml+='<select class="ui-datepicker-year" data-handler="selectYear" data-event="change">';b<=g;b++)a.yearshtml+='<option value="'+b+'"'+(b==c?' selected="selected"':"")+">"+b+"</option>";a.yearshtml+="</select>";k+=a.yearshtml;a.yearshtml=null}k+=this._get(a,"yearSuffix");r&&(k+=(h||!i||!p?"&#xa0;":"")+m);return k+"</div>"},_adjustInstDate:function(a,b,c){var d=a.drawYear+("Y"==c?b:0),f=a.drawMonth+("M"==c?b:0),b=Math.min(a.selectedDay,this._getDaysInMonth(d,f))+("D"==c?b:0),d=this._restrictMinMax(a,
this._daylightSavingAdjust(new Date(d,f,b)));a.selectedDay=d.getDate();a.drawMonth=a.selectedMonth=d.getMonth();a.drawYear=a.selectedYear=d.getFullYear();("M"==c||"Y"==c)&&this._notifyChange(a)},_restrictMinMax:function(a,b){var c=this._getMinMaxDate(a,"min"),d=this._getMinMaxDate(a,"max"),c=c&&b<c?c:b;return d&&c>d?d:c},_notifyChange:function(a){var b=this._get(a,"onChangeMonthYear");b&&b.apply(a.input?a.input[0]:null,[a.selectedYear,a.selectedMonth+1,a])},_getNumberOfMonths:function(a){a=this._get(a,
"numberOfMonths");return null==a?[1,1]:"number"==typeof a?[1,a]:a},_getMinMaxDate:function(a,b){return this._determineDate(a,this._get(a,b+"Date"),null)},_getDaysInMonth:function(a,b){return 32-this._daylightSavingAdjust(new Date(a,b,32)).getDate()},_getFirstDayOfMonth:function(a,b){return(new Date(a,b,1)).getDay()},_canAdjustMonth:function(a,b,c,d){var f=this._getNumberOfMonths(a),c=this._daylightSavingAdjust(new Date(c,d+(0>b?b:f[0]*f[1]),1));0>b&&c.setDate(this._getDaysInMonth(c.getFullYear(),
c.getMonth()));return this._isInRange(a,c)},_isInRange:function(a,b){var c=this._getMinMaxDate(a,"min"),d=this._getMinMaxDate(a,"max");return(!c||b.getTime()>=c.getTime())&&(!d||b.getTime()<=d.getTime())},_getFormatConfig:function(a){var b=this._get(a,"shortYearCutoff"),b="string"!=typeof b?b:(new Date).getFullYear()%100+parseInt(b,10);return{shortYearCutoff:b,dayNamesShort:this._get(a,"dayNamesShort"),dayNames:this._get(a,"dayNames"),monthNamesShort:this._get(a,"monthNamesShort"),monthNames:this._get(a,
"monthNames")}},_formatDate:function(a,b,c,d){b||(a.currentDay=a.selectedDay,a.currentMonth=a.selectedMonth,a.currentYear=a.selectedYear);b=b?"object"==typeof b?b:this._daylightSavingAdjust(new Date(d,c,b)):this._daylightSavingAdjust(new Date(a.currentYear,a.currentMonth,a.currentDay));return this.formatDate(this._get(a,"dateFormat"),b,this._getFormatConfig(a))}});d.fn.datepicker=function(a){if(!this.length)return this;d.datepicker.initialized||(d(document).mousedown(d.datepicker._checkExternalClick).find("body").append(d.datepicker.dpDiv),
d.datepicker.initialized=!0);var b=Array.prototype.slice.call(arguments,1);return"string"==typeof a&&("isDisabled"==a||"getDate"==a||"widget"==a)||"option"==a&&2==arguments.length&&"string"==typeof arguments[1]?d.datepicker["_"+a+"Datepicker"].apply(d.datepicker,[this[0]].concat(b)):this.each(function(){typeof a=="string"?d.datepicker["_"+a+"Datepicker"].apply(d.datepicker,[this].concat(b)):d.datepicker._attachDatepicker(this,a)})};d.datepicker=new B;d.datepicker.initialized=!1;d.datepicker.uuid=
(new Date).getTime();d.datepicker.version="1.8.24";window["DP_jQuery_"+x]=d})(jQuery);;
;/* module-key = 'com.atlassian.auiplugin:aui-date-picker', location = 'js/aui-date-picker.js' */
(function(d){var u=0;AJS.DatePicker=function(g,b){var c,i,a,q,j;c={};q=u++;a=d(g);a.attr("data-aui-dp-uuid",q);b=d.extend(void 0,AJS.DatePicker.prototype.defaultOptions,b);c.getField=function(){return a};c.getOptions=function(){return b};i=function(){var e,m,n,g,r,i,o,p,h,k;c.hide=function(){h.hide()};c.show=function(){h.show()};c.setDate=function(a){"undefined"!==typeof e&&e.datepicker("setDate",a)};c.getDate=function(){if("undefined"!==typeof e)return e.datepicker("getDate")};i=function(v){k.off();
if(b.hint){var f=d("<div/>").addClass("aui-datepicker-hint");f.append("<span/>").text(b.hint);k.append(f)}e=d("<div/>");e.attr("data-aui-dp-popup-uuid",q);k.append(e);f={dateFormat:b.dateFormat,defaultDate:a.val(),maxDate:a.attr("max"),minDate:a.attr("min"),nextText:">",onSelect:function(d){a.val(d);a.change();c.hide();o=!0;a.focus();b.onSelect&&b.onSelect.call(this,d)},onChangeMonthYear:function(){setTimeout(h.refresh,0)},prevText:"<"};d.extend(f,v);-1<b.firstDay&&(f.firstDay=b.firstDay);"undefined"!==
typeof a.attr("step")&&AJS.log("WARNING: The AJS date picker polyfill currently does not support the step attribute!");e.datepicker(f);d("body").on("keydown",m);a.on("focusout keydown",n);a.on("propertychange keyup input paste",r)};m=function(b){var f=d(b.target),e=f.closest(k).length||f.is(a),g=f.closest(".ui-datepicker-header").length;!e&&!g||b.keyCode===AJS.keyCode.ESCAPE?c.hide():f[0]!==a[0]&&b.preventDefault()};n=function(){p||(d("body").on("focus blur click mousedown","*",m),p=!0)};g=function(){o?
o=!1:c.show()};r=function(){d(this).val()&&(e.datepicker("setDate",a.val()),e.datepicker("option",{maxDate:a.attr("max"),minDate:a.attr("min")}))};c.destroyPolyfill=function(){c.hide();a.attr("placeholder",null);a.off("propertychange keyup input paste",r);a.off("focus click",g);a.off("focusout keydown",n);d("body").off("keydown",n);AJS.DatePicker.prototype.browserSupportsDateField&&(a[0].type="date");"undefined"!==typeof e&&e.datepicker("destroy");delete c.destroyPolyfill;delete c.show;delete c.hide};
p=o=!1;b.languageCode in AJS.DatePicker.prototype.localisations||(b.languageCode="");var s=AJS.DatePicker.prototype.localisations[b.languageCode],t="",l=240;"large"===s.size&&(l=325,t="aui-datepicker-dialog-large");l={hideCallback:function(){d("body").off("focus blur click mousedown","*",m);p=false;j&&j._datePickerPopup&&delete j._datePickerPopup},hideDelay:null,noBind:!0,persistent:!0,closeOthers:!1,width:l};b.position&&(l.calculatePositions=function(a,c){var e=d(a[0]);return b.position.call(this,
e,c)});h=AJS.InlineDialog(a,void 0,function(a,b,c){if(typeof e==="undefined"){k=a;i(s)}if(j=d(b).closest(".aui-inline-dialog").get(0))j._datePickerPopup=h;c()},l);h.addClass("aui-datepicker-dialog");h.addClass(t);a.on("focus click",g);a.attr("placeholder",b.dateFormat);b.overrideBrowserDefault&&AJS.DatePicker.prototype.browserSupportsDateField&&(a[0].type="text")};c.reset=function(){"function"===typeof c.destroyPolyfill&&c.destroyPolyfill();(!AJS.DatePicker.prototype.browserSupportsDateField||b.overrideBrowserDefault)&&
i()};c.reset();return c};AJS.DatePicker.prototype.browserSupportsDateField="date"===d('<input type="date" />')[0].type;AJS.DatePicker.prototype.defaultOptions={overrideBrowserDefault:!1,firstDay:-1,languageCode:AJS.$("html").attr("lang")||"en-AU",dateFormat:d.datepicker.W3C};AJS.DatePicker.prototype.localisations={"":{dayNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),dayNamesMin:"Sun Mon Tue Wed Thu Fri Sat".split(" "),firstDay:0,isRTL:!1,monthNames:"January February March April May June July August September October November December".split(" "),
showMonthAfterYear:!1,yearSuffix:""},af:{dayNames:"Sondag Maandag Dinsdag Woensdag Donderdag Vrydag Saterdag".split(" "),dayNamesMin:"Son Maa Din Woe Don Vry Sat".split(" "),firstDay:1,isRTL:!1,monthNames:"Januarie Februarie Maart April Mei Junie Julie Augustus September Oktober November Desember".split(" "),showMonthAfterYear:!1,yearSuffix:""},"ar-DZ":{dayNames:"\u0627\u0644\u0623\u062d\u062f \u0627\u0644\u0627\u062b\u0646\u064a\u0646 \u0627\u0644\u062b\u0644\u0627\u062b\u0627\u0621 \u0627\u0644\u0623\u0631\u0628\u0639\u0627\u0621 \u0627\u0644\u062e\u0645\u064a\u0633 \u0627\u0644\u062c\u0645\u0639\u0629 \u0627\u0644\u0633\u0628\u062a".split(" "),
dayNamesMin:"\u0627\u0644\u0623\u062d\u062f \u0627\u0644\u0627\u062b\u0646\u064a\u0646 \u0627\u0644\u062b\u0644\u0627\u062b\u0627\u0621 \u0627\u0644\u0623\u0631\u0628\u0639\u0627\u0621 \u0627\u0644\u062e\u0645\u064a\u0633 \u0627\u0644\u062c\u0645\u0639\u0629 \u0627\u0644\u0633\u0628\u062a".split(" "),firstDay:6,isRTL:!0,monthNames:"\u062c\u0627\u0646\u0641\u064a \u0641\u064a\u0641\u0631\u064a \u0645\u0627\u0631\u0633 \u0623\u0641\u0631\u064a\u0644 \u0645\u0627\u064a \u062c\u0648\u0627\u0646 \u062c\u0648\u064a\u0644\u064a\u0629 \u0623\u0648\u062a \u0633\u0628\u062a\u0645\u0628\u0631 \u0623\u0643\u062a\u0648\u0628\u0631 \u0646\u0648\u0641\u0645\u0628\u0631 \u062f\u064a\u0633\u0645\u0628\u0631".split(" "),
showMonthAfterYear:!1,yearSuffix:""},ar:{dayNames:"\u0627\u0644\u0623\u062d\u062f \u0627\u0644\u0627\u062b\u0646\u064a\u0646 \u0627\u0644\u062b\u0644\u0627\u062b\u0627\u0621 \u0627\u0644\u0623\u0631\u0628\u0639\u0627\u0621 \u0627\u0644\u062e\u0645\u064a\u0633 \u0627\u0644\u062c\u0645\u0639\u0629 \u0627\u0644\u0633\u0628\u062a".split(" "),dayNamesMin:"\u0627\u0644\u0623\u062d\u062f \u0627\u0644\u0627\u062b\u0646\u064a\u0646 \u0627\u0644\u062b\u0644\u0627\u062b\u0627\u0621 \u0627\u0644\u0623\u0631\u0628\u0639\u0627\u0621 \u0627\u0644\u062e\u0645\u064a\u0633 \u0627\u0644\u062c\u0645\u0639\u0629 \u0627\u0644\u0633\u0628\u062a".split(" "),
firstDay:6,isRTL:!0,monthNames:"\u0643\u0627\u0646\u0648\u0646 \u0627\u0644\u062b\u0627\u0646\u064a;\u0634\u0628\u0627\u0637;\u0622\u0630\u0627\u0631;\u0646\u064a\u0633\u0627\u0646;\u0645\u0627\u064a\u0648;\u062d\u0632\u064a\u0631\u0627\u0646;\u062a\u0645\u0648\u0632;\u0622\u0628;\u0623\u064a\u0644\u0648\u0644;\u062a\u0634\u0631\u064a\u0646 \u0627\u0644\u0623\u0648\u0644;\u062a\u0634\u0631\u064a\u0646 \u0627\u0644\u062b\u0627\u0646\u064a;\u0643\u0627\u0646\u0648\u0646 \u0627\u0644\u0623\u0648\u0644".split(";"),
showMonthAfterYear:!1,yearSuffix:""},az:{dayNames:"Bazar;Bazar ert\u0259si;\u00c7\u0259r\u015f\u0259nb\u0259 ax\u015fam\u0131;\u00c7\u0259r\u015f\u0259nb\u0259;C\u00fcm\u0259 ax\u015fam\u0131;C\u00fcm\u0259;\u015e\u0259nb\u0259".split(";"),dayNamesMin:"B Be \u00c7a \u00c7 Ca C \u015e".split(" "),firstDay:1,isRTL:!1,monthNames:"Yanvar Fevral Mart Aprel May \u0130yun \u0130yul Avqust Sentyabr Oktyabr Noyabr Dekabr".split(" "),showMonthAfterYear:!1,yearSuffix:""},bg:{dayNames:"\u041d\u0435\u0434\u0435\u043b\u044f \u041f\u043e\u043d\u0435\u0434\u0435\u043b\u043d\u0438\u043a \u0412\u0442\u043e\u0440\u043d\u0438\u043a \u0421\u0440\u044f\u0434\u0430 \u0427\u0435\u0442\u0432\u044a\u0440\u0442\u044a\u043a \u041f\u0435\u0442\u044a\u043a \u0421\u044a\u0431\u043e\u0442\u0430".split(" "),
dayNamesMin:"\u041d\u0435\u0434 \u041f\u043e\u043d \u0412\u0442\u043e \u0421\u0440\u044f \u0427\u0435\u0442 \u041f\u0435\u0442 \u0421\u044a\u0431".split(" "),firstDay:1,isRTL:!1,monthNames:"\u042f\u043d\u0443\u0430\u0440\u0438 \u0424\u0435\u0432\u0440\u0443\u0430\u0440\u0438 \u041c\u0430\u0440\u0442 \u0410\u043f\u0440\u0438\u043b \u041c\u0430\u0439 \u042e\u043d\u0438 \u042e\u043b\u0438 \u0410\u0432\u0433\u0443\u0441\u0442 \u0421\u0435\u043f\u0442\u0435\u043c\u0432\u0440\u0438 \u041e\u043a\u0442\u043e\u043c\u0432\u0440\u0438 \u041d\u043e\u0435\u043c\u0432\u0440\u0438 \u0414\u0435\u043a\u0435\u043c\u0432\u0440\u0438".split(" "),
showMonthAfterYear:!1,yearSuffix:""},bs:{dayNames:"Nedelja Ponedeljak Utorak Srijeda \u010cetvrtak Petak Subota".split(" "),dayNamesMin:"Ned Pon Uto Sri \u010cet Pet Sub".split(" "),firstDay:1,isRTL:!1,monthNames:"Januar Februar Mart April Maj Juni Juli August Septembar Oktobar Novembar Decembar".split(" "),showMonthAfterYear:!1,yearSuffix:""},ca:{dayNames:"Diumenge Dilluns Dimarts Dimecres Dijous Divendres Dissabte".split(" "),dayNamesMin:"Dug Dln Dmt Dmc Djs Dvn Dsb".split(" "),firstDay:1,isRTL:!1,
monthNames:"Gener Febrer Mar&ccedil; Abril Maig Juny Juliol Agost Setembre Octubre Novembre Desembre".split(" "),showMonthAfterYear:!1,yearSuffix:""},cs:{dayNames:"ned\u011ble pond\u011bl\u00ed \u00fater\u00fd st\u0159eda \u010dtvrtek p\u00e1tek sobota".split(" "),dayNamesMin:"ne po \u00fat st \u010dt p\u00e1 so".split(" "),firstDay:1,isRTL:!1,monthNames:"leden \u00fanor b\u0159ezen duben kv\u011bten \u010derven \u010dervenec srpen z\u00e1\u0159\u00ed \u0159\u00edjen listopad prosinec".split(" "),
showMonthAfterYear:!1,yearSuffix:""},da:{dayNames:"S\u00f8ndag Mandag Tirsdag Onsdag Torsdag Fredag L\u00f8rdag".split(" "),dayNamesMin:"S\u00f8n Man Tir Ons Tor Fre L\u00f8r".split(" "),firstDay:1,isRTL:!1,monthNames:"Januar Februar Marts April Maj Juni Juli August September Oktober November December".split(" "),showMonthAfterYear:!1,yearSuffix:""},de:{dayNames:"Sonntag Montag Dienstag Mittwoch Donnerstag Freitag Samstag".split(" "),dayNamesMin:"So Mo Di Mi Do Fr Sa".split(" "),firstDay:1,isRTL:!1,
monthNames:"Januar Februar M\u00e4rz April Mai Juni Juli August September Oktober November Dezember".split(" "),showMonthAfterYear:!1,yearSuffix:""},el:{dayNames:"\u039a\u03c5\u03c1\u03b9\u03b1\u03ba\u03ae \u0394\u03b5\u03c5\u03c4\u03ad\u03c1\u03b1 \u03a4\u03c1\u03af\u03c4\u03b7 \u03a4\u03b5\u03c4\u03ac\u03c1\u03c4\u03b7 \u03a0\u03ad\u03bc\u03c0\u03c4\u03b7 \u03a0\u03b1\u03c1\u03b1\u03c3\u03ba\u03b5\u03c5\u03ae \u03a3\u03ac\u03b2\u03b2\u03b1\u03c4\u03bf".split(" "),dayNamesMin:"\u039a\u03c5\u03c1 \u0394\u03b5\u03c5 \u03a4\u03c1\u03b9 \u03a4\u03b5\u03c4 \u03a0\u03b5\u03bc \u03a0\u03b1\u03c1 \u03a3\u03b1\u03b2".split(" "),
firstDay:1,isRTL:!1,monthNames:"\u0399\u03b1\u03bd\u03bf\u03c5\u03ac\u03c1\u03b9\u03bf\u03c2 \u03a6\u03b5\u03b2\u03c1\u03bf\u03c5\u03ac\u03c1\u03b9\u03bf\u03c2 \u039c\u03ac\u03c1\u03c4\u03b9\u03bf\u03c2 \u0391\u03c0\u03c1\u03af\u03bb\u03b9\u03bf\u03c2 \u039c\u03ac\u03b9\u03bf\u03c2 \u0399\u03bf\u03cd\u03bd\u03b9\u03bf\u03c2 \u0399\u03bf\u03cd\u03bb\u03b9\u03bf\u03c2 \u0391\u03cd\u03b3\u03bf\u03c5\u03c3\u03c4\u03bf\u03c2 \u03a3\u03b5\u03c0\u03c4\u03ad\u03bc\u03b2\u03c1\u03b9\u03bf\u03c2 \u039f\u03ba\u03c4\u03ce\u03b2\u03c1\u03b9\u03bf\u03c2 \u039d\u03bf\u03ad\u03bc\u03b2\u03c1\u03b9\u03bf\u03c2 \u0394\u03b5\u03ba\u03ad\u03bc\u03b2\u03c1\u03b9\u03bf\u03c2".split(" "),
showMonthAfterYear:!1,yearSuffix:""},"en-AU":{dayNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),dayNamesMin:"Sun Mon Tue Wed Thu Fri Sat".split(" "),firstDay:1,isRTL:!1,monthNames:"January February March April May June July August September October November December".split(" "),showMonthAfterYear:!1,yearSuffix:""},"en-GB":{dayNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),dayNamesMin:"Sun Mon Tue Wed Thu Fri Sat".split(" "),firstDay:1,isRTL:!1,
monthNames:"January February March April May June July August September October November December".split(" "),showMonthAfterYear:!1,yearSuffix:""},"en-NZ":{dayNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),dayNamesMin:"Sun Mon Tue Wed Thu Fri Sat".split(" "),firstDay:1,isRTL:!1,monthNames:"January February March April May June July August September October November December".split(" "),showMonthAfterYear:!1,yearSuffix:""},eo:{dayNames:"Diman\u0109o Lundo Mardo Merkredo \u0134a\u016ddo Vendredo Sabato".split(" "),
dayNamesMin:"Dim Lun Mar Mer \u0134a\u016d Ven Sab".split(" "),firstDay:0,isRTL:!1,monthNames:"Januaro Februaro Marto Aprilo Majo Junio Julio A\u016dgusto Septembro Oktobro Novembro Decembro".split(" "),showMonthAfterYear:!1,yearSuffix:""},es:{dayNames:"Domingo Lunes Martes Mi&eacute;rcoles Jueves Viernes S&aacute;bado".split(" "),dayNamesMin:"Dom Lun Mar Mi&eacute; Juv Vie S&aacute;b".split(" "),firstDay:1,isRTL:!1,monthNames:"Enero Febrero Marzo Abril Mayo Junio Julio Agosto Septiembre Octubre Noviembre Diciembre".split(" "),
showMonthAfterYear:!1,yearSuffix:""},et:{dayNames:"P\u00fchap\u00e4ev Esmasp\u00e4ev Teisip\u00e4ev Kolmap\u00e4ev Neljap\u00e4ev Reede Laup\u00e4ev".split(" "),dayNamesMin:"P\u00fchap Esmasp Teisip Kolmap Neljap Reede Laup".split(" "),firstDay:1,isRTL:!1,monthNames:"Jaanuar Veebruar M\u00e4rts Aprill Mai Juuni Juuli August September Oktoober November Detsember".split(" "),showMonthAfterYear:!1,yearSuffix:"",size:"large"},eu:{dayNames:"Igandea Astelehena Asteartea Asteazkena Osteguna Ostirala Larunbata".split(" "),
dayNamesMin:"Iga Ast Ast Ast Ost Ost Lar".split(" "),firstDay:1,isRTL:!1,monthNames:"Urtarrila Otsaila Martxoa Apirila Maiatza Ekaina Uztaila Abuztua Iraila Urria Azaroa Abendua".split(" "),showMonthAfterYear:!1,yearSuffix:""},fa:{dayNames:"\u064a\u06a9\u0634\u0646\u0628\u0647 \u062f\u0648\u0634\u0646\u0628\u0647 \u0633\u0647\u0634\u0646\u0628\u0647 \u0686\u0647\u0627\u0631\u0634\u0646\u0628\u0647 \u067e\u0646\u062c\u0634\u0646\u0628\u0647 \u062c\u0645\u0639\u0647 \u0634\u0646\u0628\u0647".split(" "),
dayNamesMin:"\u064a\u062f\u0633\u0686\u067e\u062c\u0634".split(""),firstDay:6,isRTL:!0,monthNames:"\u0641\u0631\u0648\u0631\u062f\u064a\u0646 \u0627\u0631\u062f\u064a\u0628\u0647\u0634\u062a \u062e\u0631\u062f\u0627\u062f \u062a\u064a\u0631 \u0645\u0631\u062f\u0627\u062f \u0634\u0647\u0631\u064a\u0648\u0631 \u0645\u0647\u0631 \u0622\u0628\u0627\u0646 \u0622\u0630\u0631 \u062f\u064a \u0628\u0647\u0645\u0646 \u0627\u0633\u0641\u0646\u062f".split(" "),showMonthAfterYear:!1,yearSuffix:""},fi:{dayNames:"Sunnuntai Maanantai Tiistai Keskiviikko Torstai Perjantai Lauantai".split(" "),
dayNamesMin:"Su Ma Ti Ke To Pe Su".split(" "),firstDay:1,isRTL:!1,monthNames:"Tammikuu Helmikuu Maaliskuu Huhtikuu Toukokuu Kes&auml;kuu Hein&auml;kuu Elokuu Syyskuu Lokakuu Marraskuu Joulukuu".split(" "),showMonthAfterYear:!1,yearSuffix:""},fo:{dayNames:"Sunnudagur M\u00e1nadagur T\u00fdsdagur Mikudagur H\u00f3sdagur Fr\u00edggjadagur Leyardagur".split(" "),dayNamesMin:"Sun M\u00e1n T\u00fds Mik H\u00f3s Fr\u00ed Ley".split(" "),firstDay:0,isRTL:!1,monthNames:"Januar Februar Mars Apr\u00edl Mei Juni Juli August September Oktober November Desember".split(" "),
showMonthAfterYear:!1,yearSuffix:""},"fr-CH":{dayNames:"Dimanche Lundi Mardi Mercredi Jeudi Vendredi Samedi".split(" "),dayNamesMin:"Dim Lun Mar Mer Jeu Ven Sam".split(" "),firstDay:1,isRTL:!1,monthNames:"Janvier F\u00e9vrier Mars Avril Mai Juin Juillet Ao\u00fbt Septembre Octobre Novembre D\u00e9cembre".split(" "),showMonthAfterYear:!1,yearSuffix:""},fr:{dayNames:"Dimanche Lundi Mardi Mercredi Jeudi Vendredi Samedi".split(" "),dayNamesMin:"Dim. Lun. Mar. Mer. Jeu. Ven. Sam.".split(" "),firstDay:1,
isRTL:!1,monthNames:"Janvier F\u00e9vrier Mars Avril Mai Juin Juillet Ao\u00fbt Septembre Octobre Novembre D\u00e9cembre".split(" "),showMonthAfterYear:!1,yearSuffix:""},gl:{dayNames:"Domingo Luns Martes M&eacute;rcores Xoves Venres S&aacute;bado".split(" "),dayNamesMin:"Dom Lun Mar M&eacute;r Xov Ven S&aacute;b".split(" "),firstDay:1,isRTL:!1,monthNames:"Xaneiro Febreiro Marzo Abril Maio Xu\u00f1o Xullo Agosto Setembro Outubro Novembro Decembro".split(" "),showMonthAfterYear:!1,yearSuffix:""},he:{dayNames:"\u05e8\u05d0\u05e9\u05d5\u05df \u05e9\u05e0\u05d9 \u05e9\u05dc\u05d9\u05e9\u05d9 \u05e8\u05d1\u05d9\u05e2\u05d9 \u05d7\u05de\u05d9\u05e9\u05d9 \u05e9\u05d9\u05e9\u05d9 \u05e9\u05d1\u05ea".split(" "),
dayNamesMin:"\u05d0' \u05d1' \u05d2' \u05d3' \u05d4' \u05d5' \u05e9\u05d1\u05ea".split(" "),firstDay:0,isRTL:!0,monthNames:"\u05d9\u05e0\u05d5\u05d0\u05e8 \u05e4\u05d1\u05e8\u05d5\u05d0\u05e8 \u05de\u05e8\u05e5 \u05d0\u05e4\u05e8\u05d9\u05dc \u05de\u05d0\u05d9 \u05d9\u05d5\u05e0\u05d9 \u05d9\u05d5\u05dc\u05d9 \u05d0\u05d5\u05d2\u05d5\u05e1\u05d8 \u05e1\u05e4\u05d8\u05de\u05d1\u05e8 \u05d0\u05d5\u05e7\u05d8\u05d5\u05d1\u05e8 \u05e0\u05d5\u05d1\u05de\u05d1\u05e8 \u05d3\u05e6\u05de\u05d1\u05e8".split(" "),
showMonthAfterYear:!1,yearSuffix:""},hr:{dayNames:"Nedjelja Ponedjeljak Utorak Srijeda \u010cetvrtak Petak Subota".split(" "),dayNamesMin:"Ned Pon Uto Sri \u010cet Pet Sub".split(" "),firstDay:1,isRTL:!1,monthNames:"Sije\u010danj Velja\u010da O\u017eujak Travanj Svibanj Lipanj Srpanj Kolovoz Rujan Listopad Studeni Prosinac".split(" "),showMonthAfterYear:!1,yearSuffix:""},hu:{dayNames:"Vas\u00e1rnap H\u00e9tf\u00f6 Kedd Szerda Cs\u00fct\u00f6rt\u00f6k P\u00e9ntek Szombat".split(" "),dayNamesMin:"Vas H\u00e9t Ked Sze Cs\u00fc P\u00e9n Szo".split(" "),
firstDay:1,isRTL:!1,monthNames:"Janu\u00e1r Febru\u00e1r M\u00e1rcius \u00c1prilis M\u00e1jus J\u00fanius J\u00falius Augusztus Szeptember Okt\u00f3ber November December".split(" "),showMonthAfterYear:!0,yearSuffix:""},hy:{dayNames:"\u056f\u056b\u0580\u0561\u056f\u056b \u0565\u056f\u0578\u0582\u0577\u0561\u0562\u0569\u056b \u0565\u0580\u0565\u0584\u0577\u0561\u0562\u0569\u056b \u0579\u0578\u0580\u0565\u0584\u0577\u0561\u0562\u0569\u056b \u0570\u056b\u0576\u0563\u0577\u0561\u0562\u0569\u056b \u0578\u0582\u0580\u0562\u0561\u0569 \u0577\u0561\u0562\u0561\u0569".split(" "),
dayNamesMin:"\u056f\u056b\u0580 \u0565\u0580\u056f \u0565\u0580\u0584 \u0579\u0580\u0584 \u0570\u0576\u0563 \u0578\u0582\u0580\u0562 \u0577\u0562\u0569".split(" "),firstDay:1,isRTL:!1,monthNames:"\u0540\u0578\u0582\u0576\u057e\u0561\u0580 \u0553\u0565\u057f\u0580\u057e\u0561\u0580 \u0544\u0561\u0580\u057f \u0531\u057a\u0580\u056b\u056c \u0544\u0561\u0575\u056b\u057d \u0540\u0578\u0582\u0576\u056b\u057d \u0540\u0578\u0582\u056c\u056b\u057d \u0555\u0563\u0578\u057d\u057f\u0578\u057d \u054d\u0565\u057a\u057f\u0565\u0574\u0562\u0565\u0580 \u0540\u0578\u056f\u057f\u0565\u0574\u0562\u0565\u0580 \u0546\u0578\u0575\u0565\u0574\u0562\u0565\u0580 \u0534\u0565\u056f\u057f\u0565\u0574\u0562\u0565\u0580".split(" "),
showMonthAfterYear:!1,yearSuffix:""},id:{dayNames:"Minggu Senin Selasa Rabu Kamis Jumat Sabtu".split(" "),dayNamesMin:"Min Sen Sel Rab kam Jum Sab".split(" "),firstDay:0,isRTL:!1,monthNames:"Januari Februari Maret April Mei Juni Juli Agustus September Oktober Nopember Desember".split(" "),showMonthAfterYear:!1,yearSuffix:""},is:{dayNames:"Sunnudagur M&aacute;nudagur &THORN;ri&eth;judagur Mi&eth;vikudagur Fimmtudagur F&ouml;studagur Laugardagur".split(" "),dayNamesMin:"Sun M&aacute;n &THORN;ri Mi&eth; Fim F&ouml;s Lau".split(" "),
firstDay:0,isRTL:!1,monthNames:"Jan&uacute;ar Febr&uacute;ar Mars Apr&iacute;l Ma&iacute J&uacute;n&iacute; J&uacute;l&iacute; &Aacute;g&uacute;st September Okt&oacute;ber N&oacute;vember Desember".split(" "),showMonthAfterYear:!1,yearSuffix:""},it:{dayNames:"Domenica Luned&#236 Marted&#236 Mercoled&#236 Gioved&#236 Venerd&#236 Sabato".split(" "),dayNamesMin:"Dom Lun Mar Mer Gio Ven Sab".split(" "),firstDay:1,isRTL:!1,monthNames:"Gennaio Febbraio Marzo Aprile Maggio Giugno Luglio Agosto Settembre Ottobre Novembre Dicembre".split(" "),
showMonthAfterYear:!1,yearSuffix:""},ja:{dayNames:"\u65e5\u66dc\u65e5 \u6708\u66dc\u65e5 \u706b\u66dc\u65e5 \u6c34\u66dc\u65e5 \u6728\u66dc\u65e5 \u91d1\u66dc\u65e5 \u571f\u66dc\u65e5".split(" "),dayNamesMin:"\u65e5\u6708\u706b\u6c34\u6728\u91d1\u571f".split(""),firstDay:0,isRTL:!1,monthNames:"1\u6708 2\u6708 3\u6708 4\u6708 5\u6708 6\u6708 7\u6708 8\u6708 9\u6708 10\u6708 11\u6708 12\u6708".split(" "),showMonthAfterYear:!0,yearSuffix:"\u5e74"},ko:{dayNames:"\uc77c\uc6d4\ud654\uc218\ubaa9\uae08\ud1a0".split(""),
dayNamesMin:"\uc77c\uc6d4\ud654\uc218\ubaa9\uae08\ud1a0".split(""),firstDay:0,isRTL:!1,monthNames:"1\uc6d4(JAN) 2\uc6d4(FEB) 3\uc6d4(MAR) 4\uc6d4(APR) 5\uc6d4(MAY) 6\uc6d4(JUN) 7\uc6d4(JUL) 8\uc6d4(AUG) 9\uc6d4(SEP) 10\uc6d4(OCT) 11\uc6d4(NOV) 12\uc6d4(DEC)".split(" "),showMonthAfterYear:!1,yearSuffix:"\ub144"},kz:{dayNames:"\u0416\u0435\u043a\u0441\u0435\u043d\u0431\u0456 \u0414\u04af\u0439\u0441\u0435\u043d\u0431\u0456 \u0421\u0435\u0439\u0441\u0435\u043d\u0431\u0456 \u0421\u04d9\u0440\u0441\u0435\u043d\u0431\u0456 \u0411\u0435\u0439\u0441\u0435\u043d\u0431\u0456 \u0416\u04b1\u043c\u0430 \u0421\u0435\u043d\u0431\u0456".split(" "),
dayNamesMin:"\u0436\u043a\u0441 \u0434\u0441\u043d \u0441\u0441\u043d \u0441\u0440\u0441 \u0431\u0441\u043d \u0436\u043c\u0430 \u0441\u043d\u0431".split(" "),firstDay:1,isRTL:!1,monthNames:"\u049a\u0430\u04a3\u0442\u0430\u0440 \u0410\u049b\u043f\u0430\u043d \u041d\u0430\u0443\u0440\u044b\u0437 \u0421\u04d9\u0443\u0456\u0440 \u041c\u0430\u043c\u044b\u0440 \u041c\u0430\u0443\u0441\u044b\u043c \u0428\u0456\u043b\u0434\u0435 \u0422\u0430\u043c\u044b\u0437 \u049a\u044b\u0440\u043a\u04af\u0439\u0435\u043a \u049a\u0430\u0437\u0430\u043d \u049a\u0430\u0440\u0430\u0448\u0430 \u0416\u0435\u043b\u0442\u043e\u049b\u0441\u0430\u043d".split(" "),
showMonthAfterYear:!1,yearSuffix:""},lt:{dayNames:"sekmadienis pirmadienis antradienis tre\u010diadienis ketvirtadienis penktadienis \u0161e\u0161tadienis".split(" "),dayNamesMin:"sek pir ant tre ket pen \u0161e\u0161".split(" "),firstDay:1,isRTL:!1,monthNames:"Sausis Vasaris Kovas Balandis Gegu\u017e\u0117 Bir\u017eelis Liepa Rugpj\u016btis Rugs\u0117jis Spalis Lapkritis Gruodis".split(" "),showMonthAfterYear:!1,yearSuffix:""},lv:{dayNames:"sv\u0113tdiena pirmdiena otrdiena tre\u0161diena ceturtdiena piektdiena sestdiena".split(" "),
dayNamesMin:"svt prm otr tre ctr pkt sst".split(" "),firstDay:1,isRTL:!1,monthNames:"Janv\u0101ris Febru\u0101ris Marts Apr\u012blis Maijs J\u016bnijs J\u016blijs Augusts Septembris Oktobris Novembris Decembris".split(" "),showMonthAfterYear:!1,yearSuffix:""},ml:{dayNames:"\u0d1e\u0d3e\u0d2f\u0d30\u0d4d \u0d24\u0d3f\u0d19\u0d4d\u0d15\u0d33\u0d4d \u0d1a\u0d4a\u0d35\u0d4d\u0d35 \u0d2c\u0d41\u0d27\u0d28\u0d4d \u0d35\u0d4d\u0d2f\u0d3e\u0d34\u0d02 \u0d35\u0d46\u0d33\u0d4d\u0d33\u0d3f \u0d36\u0d28\u0d3f".split(" "),
dayNamesMin:"\u0d1e\u0d3e\u0d2f \u0d24\u0d3f\u0d19\u0d4d\u0d15 \u0d1a\u0d4a\u0d35\u0d4d\u0d35 \u0d2c\u0d41\u0d27 \u0d35\u0d4d\u0d2f\u0d3e\u0d34\u0d02 \u0d35\u0d46\u0d33\u0d4d\u0d33\u0d3f \u0d36\u0d28\u0d3f".split(" "),firstDay:1,isRTL:!1,monthNames:"\u0d1c\u0d28\u0d41\u0d35\u0d30\u0d3f \u0d2b\u0d46\u0d2c\u0d4d\u0d30\u0d41\u0d35\u0d30\u0d3f \u0d2e\u0d3e\u0d30\u0d4d\u0d1a\u0d4d\u0d1a\u0d4d \u0d0f\u0d2a\u0d4d\u0d30\u0d3f\u0d32\u0d4d \u0d2e\u0d47\u0d2f\u0d4d \u0d1c\u0d42\u0d23\u0d4d \u0d1c\u0d42\u0d32\u0d48 \u0d06\u0d17\u0d38\u0d4d\u0d31\u0d4d\u0d31\u0d4d \u0d38\u0d46\u0d2a\u0d4d\u0d31\u0d4d\u0d31\u0d02\u0d2c\u0d30\u0d4d \u0d12\u0d15\u0d4d\u0d1f\u0d4b\u0d2c\u0d30\u0d4d \u0d28\u0d35\u0d02\u0d2c\u0d30\u0d4d \u0d21\u0d3f\u0d38\u0d02\u0d2c\u0d30\u0d4d".split(" "),
showMonthAfterYear:!1,yearSuffix:""},ms:{dayNames:"Ahad Isnin Selasa Rabu Khamis Jumaat Sabtu".split(" "),dayNamesMin:"Aha Isn Sel Rab kha Jum Sab".split(" "),firstDay:0,isRTL:!1,monthNames:"Januari Februari Mac April Mei Jun Julai Ogos September Oktober November Disember".split(" "),showMonthAfterYear:!1,yearSuffix:""},nl:{dayNames:"zondag maandag dinsdag woensdag donderdag vrijdag zaterdag".split(" "),dayNamesMin:"zon maa din woe don vri zat".split(" "),firstDay:1,isRTL:!1,monthNames:"januari februari maart april mei juni juli augustus september oktober november december".split(" "),
showMonthAfterYear:!1,yearSuffix:""},no:{dayNames:"s\u00f8ndag mandag tirsdag onsdag torsdag fredag l\u00f8rdag".split(" "),dayNamesMin:"s\u00f8n man tir ons tor fre l\u00f8r".split(" "),firstDay:1,isRTL:!1,monthNames:"januar februar mars april mai juni juli august september oktober november desember".split(" "),showMonthAfterYear:!1,yearSuffix:""},pl:{dayNames:"Niedziela Poniedzia\u0142ek Wtorek \u015aroda Czwartek Pi\u0105tek Sobota".split(" "),dayNamesMin:"Nie Pn Wt \u015ar Czw Pt So".split(" "),
firstDay:1,isRTL:!1,monthNames:"Stycze\u0144 Luty Marzec Kwiecie\u0144 Maj Czerwiec Lipiec Sierpie\u0144 Wrzesie\u0144 Pa\u017adziernik Listopad Grudzie\u0144".split(" "),showMonthAfterYear:!1,yearSuffix:""},"pt-BR":{dayNames:"Domingo Segunda-feira Ter&ccedil;a-feira Quarta-feira Quinta-feira Sexta-feira S&aacute;bado".split(" "),dayNamesMin:"Dom Seg Ter Qua Qui Sex S&aacute;b".split(" "),firstDay:0,isRTL:!1,monthNames:"Janeiro Fevereiro Mar&ccedil;o Abril Maio Junho Julho Agosto Setembro Outubro Novembro Dezembro".split(" "),
showMonthAfterYear:!1,yearSuffix:""},pt:{dayNames:"Domingo Segunda-feira Ter&ccedil;a-feira Quarta-feira Quinta-feira Sexta-feira S&aacute;bado".split(" "),dayNamesMin:"Dom Seg Ter Qua Qui Sex S&aacute;b".split(" "),firstDay:0,isRTL:!1,monthNames:"Janeiro Fevereiro Mar&ccedil;o Abril Maio Junho Julho Agosto Setembro Outubro Novembro Dezembro".split(" "),showMonthAfterYear:!1,yearSuffix:""},rm:{dayNames:"Dumengia Glindesdi Mardi Mesemna Gievgia Venderdi Sonda".split(" "),dayNamesMin:"Dum Gli Mar Mes Gie Ven Som".split(" "),
firstDay:1,isRTL:!1,monthNames:"Schaner Favrer Mars Avrigl Matg Zercladur Fanadur Avust Settember October November December".split(" "),showMonthAfterYear:!1,yearSuffix:""},ro:{dayNames:"Duminic\u0103 Luni Mar\u0163i Miercuri Joi Vineri S\u00e2mb\u0103t\u0103".split(" "),dayNamesMin:"Dum Lun Mar Mie Joi Vin S\u00e2m".split(" "),firstDay:1,isRTL:!1,monthNames:"Ianuarie Februarie Martie Aprilie Mai Iunie Iulie August Septembrie Octombrie Noiembrie Decembrie".split(" "),showMonthAfterYear:!1,yearSuffix:""},
ru:{dayNames:"\u0432\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u044c\u0435 \u043f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a \u0432\u0442\u043e\u0440\u043d\u0438\u043a \u0441\u0440\u0435\u0434\u0430 \u0447\u0435\u0442\u0432\u0435\u0440\u0433 \u043f\u044f\u0442\u043d\u0438\u0446\u0430 \u0441\u0443\u0431\u0431\u043e\u0442\u0430".split(" "),dayNamesMin:"\u0432\u0441\u043a \u043f\u043d\u0434 \u0432\u0442\u0440 \u0441\u0440\u0434 \u0447\u0442\u0432 \u043f\u0442\u043d \u0441\u0431\u0442".split(" "),
firstDay:1,isRTL:!1,monthNames:"\u042f\u043d\u0432\u0430\u0440\u044c \u0424\u0435\u0432\u0440\u0430\u043b\u044c \u041c\u0430\u0440\u0442 \u0410\u043f\u0440\u0435\u043b\u044c \u041c\u0430\u0439 \u0418\u044e\u043d\u044c \u0418\u044e\u043b\u044c \u0410\u0432\u0433\u0443\u0441\u0442 \u0421\u0435\u043d\u0442\u044f\u0431\u0440\u044c \u041e\u043a\u0442\u044f\u0431\u0440\u044c \u041d\u043e\u044f\u0431\u0440\u044c \u0414\u0435\u043a\u0430\u0431\u0440\u044c".split(" "),showMonthAfterYear:!1,yearSuffix:""},
sk:{dayNames:"Nede\u013ea Pondelok Utorok Streda \u0160tvrtok Piatok Sobota".split(" "),dayNamesMin:"Ned Pon Uto Str \u0160tv Pia Sob".split(" "),firstDay:1,isRTL:!1,monthNames:"Janu\u00e1r Febru\u00e1r Marec Apr\u00edl M\u00e1j J\u00fan J\u00fal August September Okt\u00f3ber November December".split(" "),showMonthAfterYear:!1,yearSuffix:""},sl:{dayNames:"Nedelja Ponedeljek Torek Sreda &#x10C;etrtek Petek Sobota".split(" "),dayNamesMin:"Ned Pon Tor Sre &#x10C;et Pet Sob".split(" "),firstDay:1,isRTL:!1,
monthNames:"Januar Februar Marec April Maj Junij Julij Avgust September Oktober November December".split(" "),showMonthAfterYear:!1,yearSuffix:""},sq:{dayNames:"E Diel;E H\u00ebn\u00eb;E Mart\u00eb;E M\u00ebrkur\u00eb;E Enjte;E Premte;E Shtune".split(";"),dayNamesMin:"Di H\u00eb Ma M\u00eb En Pr Sh".split(" "),firstDay:1,isRTL:!1,monthNames:"Janar Shkurt Mars Prill Maj Qershor Korrik Gusht Shtator Tetor N\u00ebntor Dhjetor".split(" "),showMonthAfterYear:!1,yearSuffix:""},"sr-SR":{dayNames:"Nedelja Ponedeljak Utorak Sreda \u010cetvrtak Petak Subota".split(" "),
dayNamesMin:"Ned Pon Uto Sre \u010cet Pet Sub".split(" "),firstDay:1,isRTL:!1,monthNames:"Januar Februar Mart April Maj Jun Jul Avgust Septembar Oktobar Novembar Decembar".split(" "),showMonthAfterYear:!1,yearSuffix:""},sr:{dayNames:"\u041d\u0435\u0434\u0435\u0459\u0430 \u041f\u043e\u043d\u0435\u0434\u0435\u0459\u0430\u043a \u0423\u0442\u043e\u0440\u0430\u043a \u0421\u0440\u0435\u0434\u0430 \u0427\u0435\u0442\u0432\u0440\u0442\u0430\u043a \u041f\u0435\u0442\u0430\u043a \u0421\u0443\u0431\u043e\u0442\u0430".split(" "),
dayNamesMin:"\u041d\u0435\u0434 \u041f\u043e\u043d \u0423\u0442\u043e \u0421\u0440\u0435 \u0427\u0435\u0442 \u041f\u0435\u0442 \u0421\u0443\u0431".split(" "),firstDay:1,isRTL:!1,monthNames:"\u0408\u0430\u043d\u0443\u0430\u0440 \u0424\u0435\u0431\u0440\u0443\u0430\u0440 \u041c\u0430\u0440\u0442 \u0410\u043f\u0440\u0438\u043b \u041c\u0430\u0458 \u0408\u0443\u043d \u0408\u0443\u043b \u0410\u0432\u0433\u0443\u0441\u0442 \u0421\u0435\u043f\u0442\u0435\u043c\u0431\u0430\u0440 \u041e\u043a\u0442\u043e\u0431\u0430\u0440 \u041d\u043e\u0432\u0435\u043c\u0431\u0430\u0440 \u0414\u0435\u0446\u0435\u043c\u0431\u0430\u0440".split(" "),
showMonthAfterYear:!1,yearSuffix:""},sv:{dayNames:"S\u00f6ndag M\u00e5ndag Tisdag Onsdag Torsdag Fredag L\u00f6rdag".split(" "),dayNamesMin:"S\u00f6n M\u00e5n Tis Ons Tor Fre L\u00f6r".split(" "),firstDay:1,isRTL:!1,monthNames:"Januari Februari Mars April Maj Juni Juli Augusti September Oktober November December".split(" "),showMonthAfterYear:!1,yearSuffix:""},ta:{dayNames:"\u0b9e\u0bbe\u0baf\u0bbf\u0bb1\u0bcd\u0bb1\u0bc1\u0b95\u0bcd\u0b95\u0bbf\u0bb4\u0bae\u0bc8 \u0ba4\u0bbf\u0b99\u0bcd\u0b95\u0b9f\u0bcd\u0b95\u0bbf\u0bb4\u0bae\u0bc8 \u0b9a\u0bc6\u0bb5\u0bcd\u0bb5\u0bbe\u0baf\u0bcd\u0b95\u0bcd\u0b95\u0bbf\u0bb4\u0bae\u0bc8 \u0baa\u0bc1\u0ba4\u0ba9\u0bcd\u0b95\u0bbf\u0bb4\u0bae\u0bc8 \u0bb5\u0bbf\u0baf\u0bbe\u0bb4\u0b95\u0bcd\u0b95\u0bbf\u0bb4\u0bae\u0bc8 \u0bb5\u0bc6\u0bb3\u0bcd\u0bb3\u0bbf\u0b95\u0bcd\u0b95\u0bbf\u0bb4\u0bae\u0bc8 \u0b9a\u0ba9\u0bbf\u0b95\u0bcd\u0b95\u0bbf\u0bb4\u0bae\u0bc8".split(" "),
dayNamesMin:"\u0b9e\u0bbe\u0baf\u0bbf\u0bb1\u0bc1 \u0ba4\u0bbf\u0b99\u0bcd\u0b95\u0bb3\u0bcd \u0b9a\u0bc6\u0bb5\u0bcd\u0bb5\u0bbe\u0baf\u0bcd \u0baa\u0bc1\u0ba4\u0ba9\u0bcd \u0bb5\u0bbf\u0baf\u0bbe\u0bb4\u0ba9\u0bcd \u0bb5\u0bc6\u0bb3\u0bcd\u0bb3\u0bbf \u0b9a\u0ba9\u0bbf".split(" "),firstDay:1,isRTL:!1,monthNames:"\u0ba4\u0bc8 \u0bae\u0bbe\u0b9a\u0bbf \u0baa\u0b99\u0bcd\u0b95\u0bc1\u0ba9\u0bbf \u0b9a\u0bbf\u0ba4\u0bcd\u0ba4\u0bbf\u0bb0\u0bc8 \u0bb5\u0bc8\u0b95\u0bbe\u0b9a\u0bbf \u0b86\u0ba9\u0bbf \u0b86\u0b9f\u0bbf \u0b86\u0bb5\u0ba3\u0bbf \u0baa\u0bc1\u0bb0\u0b9f\u0bcd\u0b9f\u0bbe\u0b9a\u0bbf \u0b90\u0baa\u0bcd\u0baa\u0b9a\u0bbf \u0b95\u0bbe\u0bb0\u0bcd\u0ba4\u0bcd\u0ba4\u0bbf\u0b95\u0bc8 \u0bae\u0bbe\u0bb0\u0bcd\u0b95\u0bb4\u0bbf".split(" "),
showMonthAfterYear:!1,yearSuffix:""},th:{dayNames:"\u0e2d\u0e32\u0e17\u0e34\u0e15\u0e22\u0e4c \u0e08\u0e31\u0e19\u0e17\u0e23\u0e4c \u0e2d\u0e31\u0e07\u0e04\u0e32\u0e23 \u0e1e\u0e38\u0e18 \u0e1e\u0e24\u0e2b\u0e31\u0e2a\u0e1a\u0e14\u0e35 \u0e28\u0e38\u0e01\u0e23\u0e4c \u0e40\u0e2a\u0e32\u0e23\u0e4c".split(" "),dayNamesMin:"\u0e2d\u0e32. \u0e08. \u0e2d. \u0e1e. \u0e1e\u0e24. \u0e28. \u0e2a.".split(" "),firstDay:0,isRTL:!1,monthNames:"\u0e21\u0e01\u0e23\u0e32\u0e04\u0e21 \u0e01\u0e38\u0e21\u0e20\u0e32\u0e1e\u0e31\u0e19\u0e18\u0e4c \u0e21\u0e35\u0e19\u0e32\u0e04\u0e21 \u0e40\u0e21\u0e29\u0e32\u0e22\u0e19 \u0e1e\u0e24\u0e29\u0e20\u0e32\u0e04\u0e21 \u0e21\u0e34\u0e16\u0e38\u0e19\u0e32\u0e22\u0e19 \u0e01\u0e23\u0e01\u0e0e\u0e32\u0e04\u0e21 \u0e2a\u0e34\u0e07\u0e2b\u0e32\u0e04\u0e21 \u0e01\u0e31\u0e19\u0e22\u0e32\u0e22\u0e19 \u0e15\u0e38\u0e25\u0e32\u0e04\u0e21 \u0e1e\u0e24\u0e28\u0e08\u0e34\u0e01\u0e32\u0e22\u0e19 \u0e18\u0e31\u0e19\u0e27\u0e32\u0e04\u0e21".split(" "),
showMonthAfterYear:!1,yearSuffix:""},tj:{dayNames:"\u044f\u043a\u0448\u0430\u043d\u0431\u0435 \u0434\u0443\u0448\u0430\u043d\u0431\u0435 \u0441\u0435\u0448\u0430\u043d\u0431\u0435 \u0447\u043e\u0440\u0448\u0430\u043d\u0431\u0435 \u043f\u0430\u043d\u04b7\u0448\u0430\u043d\u0431\u0435 \u04b7\u0443\u043c\u044a\u0430 \u0448\u0430\u043d\u0431\u0435".split(" "),dayNamesMin:"\u044f\u043a\u0448 \u0434\u0443\u0448 \u0441\u0435\u0448 \u0447\u043e\u0440 \u043f\u0430\u043d \u04b7\u0443\u043c \u0448\u0430\u043d".split(" "),
firstDay:1,isRTL:!1,monthNames:"\u042f\u043d\u0432\u0430\u0440 \u0424\u0435\u0432\u0440\u0430\u043b \u041c\u0430\u0440\u0442 \u0410\u043f\u0440\u0435\u043b \u041c\u0430\u0439 \u0418\u044e\u043d \u0418\u044e\u043b \u0410\u0432\u0433\u0443\u0441\u0442 \u0421\u0435\u043d\u0442\u044f\u0431\u0440 \u041e\u043a\u0442\u044f\u0431\u0440 \u041d\u043e\u044f\u0431\u0440 \u0414\u0435\u043a\u0430\u0431\u0440".split(" "),showMonthAfterYear:!1,yearSuffix:""},tr:{dayNames:"Pazar Pazartesi Sal\u0131 \u00c7ar\u015famba Per\u015fembe Cuma Cumartesi".split(" "),
dayNamesMin:"Pz Pt Sa \u00c7a Pe Cu Ct".split(" "),firstDay:1,isRTL:!1,monthNames:"Ocak \u015eubat Mart Nisan May\u0131s Haziran Temmuz A\u011fustos Eyl\u00fcl Ekim Kas\u0131m Aral\u0131k".split(" "),showMonthAfterYear:!1,yearSuffix:""},uk:{dayNames:"\u043d\u0435\u0434\u0456\u043b\u044f \u043f\u043e\u043d\u0435\u0434\u0456\u043b\u043e\u043a \u0432\u0456\u0432\u0442\u043e\u0440\u043e\u043a \u0441\u0435\u0440\u0435\u0434\u0430 \u0447\u0435\u0442\u0432\u0435\u0440 \u043f\u2019\u044f\u0442\u043d\u0438\u0446\u044f \u0441\u0443\u0431\u043e\u0442\u0430".split(" "),
dayNamesMin:"\u043d\u0435\u0434 \u043f\u043d\u0434 \u0432\u0456\u0432 \u0441\u0440\u0434 \u0447\u0442\u0432 \u043f\u0442\u043d \u0441\u0431\u0442".split(" "),firstDay:1,isRTL:!1,monthNames:"\u0421\u0456\u0447\u0435\u043d\u044c \u041b\u044e\u0442\u0438\u0439 \u0411\u0435\u0440\u0435\u0437\u0435\u043d\u044c \u041a\u0432\u0456\u0442\u0435\u043d\u044c \u0422\u0440\u0430\u0432\u0435\u043d\u044c \u0427\u0435\u0440\u0432\u0435\u043d\u044c \u041b\u0438\u043f\u0435\u043d\u044c \u0421\u0435\u0440\u043f\u0435\u043d\u044c \u0412\u0435\u0440\u0435\u0441\u0435\u043d\u044c \u0416\u043e\u0432\u0442\u0435\u043d\u044c \u041b\u0438\u0441\u0442\u043e\u043f\u0430\u0434 \u0413\u0440\u0443\u0434\u0435\u043d\u044c".split(" "),
showMonthAfterYear:!1,yearSuffix:""},vi:{dayNames:"Ch\u1ee7 Nh\u1eadt;Th\u1ee9 Hai;Th\u1ee9 Ba;Th\u1ee9 T\u01b0;Th\u1ee9 N\u0103m;Th\u1ee9 S\u00e1u;Th\u1ee9 B\u1ea3y".split(";"),dayNamesMin:"CN T2 T3 T4 T5 T6 T7".split(" "),firstDay:0,isRTL:!1,monthNames:"Th\u00e1ng M\u1ed9t;Th\u00e1ng Hai;Th\u00e1ng Ba;Th\u00e1ng T\u01b0;Th\u00e1ng N\u0103m;Th\u00e1ng S\u00e1u;Th\u00e1ng B\u1ea3y;Th\u00e1ng T\u00e1m;Th\u00e1ng Ch\u00edn;Th\u00e1ng M\u01b0\u1eddi;Th\u00e1ng M\u01b0\u1eddi M\u1ed9t;Th\u00e1ng M\u01b0\u1eddi Hai".split(";"),
showMonthAfterYear:!1,yearSuffix:""},"zh-CN":{dayNames:"\u661f\u671f\u65e5 \u661f\u671f\u4e00 \u661f\u671f\u4e8c \u661f\u671f\u4e09 \u661f\u671f\u56db \u661f\u671f\u4e94 \u661f\u671f\u516d".split(" "),dayNamesMin:"\u5468\u65e5 \u5468\u4e00 \u5468\u4e8c \u5468\u4e09 \u5468\u56db \u5468\u4e94 \u5468\u516d".split(" "),firstDay:1,isRTL:!1,monthNames:"\u4e00\u6708 \u4e8c\u6708 \u4e09\u6708 \u56db\u6708 \u4e94\u6708 \u516d\u6708 \u4e03\u6708 \u516b\u6708 \u4e5d\u6708 \u5341\u6708 \u5341\u4e00\u6708 \u5341\u4e8c\u6708".split(" "),
showMonthAfterYear:!0,yearSuffix:"\u5e74"},"zh-HK":{dayNames:"\u661f\u671f\u65e5 \u661f\u671f\u4e00 \u661f\u671f\u4e8c \u661f\u671f\u4e09 \u661f\u671f\u56db \u661f\u671f\u4e94 \u661f\u671f\u516d".split(" "),dayNamesMin:"\u5468\u65e5 \u5468\u4e00 \u5468\u4e8c \u5468\u4e09 \u5468\u56db \u5468\u4e94 \u5468\u516d".split(" "),firstDay:0,isRTL:!1,monthNames:"\u4e00\u6708 \u4e8c\u6708 \u4e09\u6708 \u56db\u6708 \u4e94\u6708 \u516d\u6708 \u4e03\u6708 \u516b\u6708 \u4e5d\u6708 \u5341\u6708 \u5341\u4e00\u6708 \u5341\u4e8c\u6708".split(" "),
showMonthAfterYear:!0,yearSuffix:"\u5e74"},"zh-TW":{dayNames:"\u661f\u671f\u65e5 \u661f\u671f\u4e00 \u661f\u671f\u4e8c \u661f\u671f\u4e09 \u661f\u671f\u56db \u661f\u671f\u4e94 \u661f\u671f\u516d".split(" "),dayNamesMin:"\u5468\u65e5 \u5468\u4e00 \u5468\u4e8c \u5468\u4e09 \u5468\u56db \u5468\u4e94 \u5468\u516d".split(" "),firstDay:1,isRTL:!1,monthNames:"\u4e00\u6708 \u4e8c\u6708 \u4e09\u6708 \u56db\u6708 \u4e94\u6708 \u516d\u6708 \u4e03\u6708 \u516b\u6708 \u4e5d\u6708 \u5341\u6708 \u5341\u4e00\u6708 \u5341\u4e8c\u6708".split(" "),
showMonthAfterYear:!0,yearSuffix:"\u5e74"}};d.fn.datePicker=function(d){return new AJS.DatePicker(this,d)}})(jQuery);;
;/* module-key = 'com.atlassian.integration.jira.jira-integration-plugin:fields', location = '/fields/fields.soy' */
// This file was automatically generated from fields.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace jiraIntegration.templates.fields.
 */

if (typeof jiraIntegration == 'undefined') { var jiraIntegration = {}; }
if (typeof jiraIntegration.templates == 'undefined') { jiraIntegration.templates = {}; }
if (typeof jiraIntegration.templates.fields == 'undefined') { jiraIntegration.templates.fields = {}; }


jiraIntegration.templates.fields.stringField = function(opt_data, opt_ignored) {
  return '' + aui.form.textField({labelContent: '' + soy.$$escapeHtml(opt_data.labelText), id: opt_data.name, name: opt_data.name, value: opt_data.value, isRequired: opt_data.isRequired, extraClasses: 'jira-field' + (opt_data.extraClasses ? ' ' + opt_data.extraClasses : ''), extraAttributes: {'data-jira-type': opt_data.jiraType}, errorTexts: opt_data.errorTexts});
};
if (goog.DEBUG) {
  jiraIntegration.templates.fields.stringField.soyTemplateName = 'jiraIntegration.templates.fields.stringField';
}


jiraIntegration.templates.fields.textareaField = function(opt_data, opt_ignored) {
  var output = '<div class="field-group jira-field' + ((opt_data.extraClasses) ? ' ' + soy.$$escapeHtml(opt_data.extraClasses) : '') + '" data-jira-type="' + soy.$$escapeHtml(opt_data.jiraType) + '"><label for="' + soy.$$escapeHtml(opt_data.name) + '">' + soy.$$escapeHtml(opt_data.labelText) + ((opt_data.isRequired) ? '<span class="aui-icon icon-required"></span>' : '') + '</label><textarea rows="10" id="' + soy.$$escapeHtml(opt_data.name) + '" name="' + soy.$$escapeHtml(opt_data.name) + '" class="textarea long-field">' + soy.$$escapeHtml(opt_data.value) + '</textarea>';
  if (opt_data.errorTexts) {
    var errorList37 = opt_data.errorTexts;
    var errorListLen37 = errorList37.length;
    for (var errorIndex37 = 0; errorIndex37 < errorListLen37; errorIndex37++) {
      var errorData37 = errorList37[errorIndex37];
      output += '<div class="error">' + soy.$$escapeHtml(errorData37) + '</div>';
    }
  }
  output += '</div>';
  return output;
};
if (goog.DEBUG) {
  jiraIntegration.templates.fields.textareaField.soyTemplateName = 'jiraIntegration.templates.fields.textareaField';
}


jiraIntegration.templates.fields.arrayField = function(opt_data, opt_ignored) {
  return '' + aui.form.textField({id: opt_data.name, name: opt_data.name, labelContent: '' + soy.$$escapeHtml(opt_data.labelText), value: opt_data.value, isRequired: opt_data.isRequired, extraClasses: 'jira-field' + (opt_data.extraClasses ? ' ' + opt_data.extraClasses : ''), extraAttributes: {'data-jira-type': opt_data.jiraType}, errorTexts: opt_data.errorTexts});
};
if (goog.DEBUG) {
  jiraIntegration.templates.fields.arrayField.soyTemplateName = 'jiraIntegration.templates.fields.arrayField';
}


jiraIntegration.templates.fields.numberField = function(opt_data, opt_ignored) {
  return '' + aui.form.textField({id: opt_data.name, name: opt_data.name, labelContent: '' + soy.$$escapeHtml(opt_data.labelText), value: opt_data.value, isRequired: opt_data.isRequired, extraClasses: 'jira-field' + (opt_data.extraClasses ? ' ' + opt_data.extraClasses : ''), extraAttributes: {'data-jira-type': opt_data.jiraType}, errorTexts: opt_data.errorTexts});
};
if (goog.DEBUG) {
  jiraIntegration.templates.fields.numberField.soyTemplateName = 'jiraIntegration.templates.fields.numberField';
}


jiraIntegration.templates.fields.allowedValuesField = function(opt_data, opt_ignored) {
  return '' + ((opt_data.options.length) ? aui.form.selectField({id: opt_data.name, name: opt_data.name, labelContent: '' + soy.$$escapeHtml(opt_data.labelText), options: opt_data.options, isRequired: opt_data.isRequired, isMultiple: opt_data.isMultiple, extraClasses: 'jira-field' + (opt_data.extraClasses ? ' ' + opt_data.extraClasses : ''), extraAttributes: {'data-jira-type': opt_data.jiraType}, errorTexts: opt_data.errorTexts}) : aui.form.valueField({id: opt_data.name, name: opt_data.name, labelContent: '' + soy.$$escapeHtml(opt_data.labelText), value: "None", isRequired: opt_data.isRequired, extraClasses: 'jira-field' + (opt_data.extraClasses ? ' ' + opt_data.extraClasses : ''), extraAttributes: {'data-jira-type': opt_data.jiraType}, errorTexts: opt_data.errorTexts}));
};
if (goog.DEBUG) {
  jiraIntegration.templates.fields.allowedValuesField.soyTemplateName = 'jiraIntegration.templates.fields.allowedValuesField';
}


jiraIntegration.templates.fields.timeTrackingField = function(opt_data, opt_ignored) {
  return '' + aui.form.textField({id: opt_data.name, name: opt_data.name, labelContent: '' + soy.$$escapeHtml(opt_data.labelText), value: opt_data.value, isRequired: opt_data.isRequired, extraClasses: 'jira-field' + (opt_data.extraClasses ? ' ' + opt_data.extraClasses : ''), extraAttributes: {'data-jira-type': opt_data.jiraType}, errorTexts: opt_data.errorTexts});
};
if (goog.DEBUG) {
  jiraIntegration.templates.fields.timeTrackingField.soyTemplateName = 'jiraIntegration.templates.fields.timeTrackingField';
}


jiraIntegration.templates.fields.unrenderableTypeField = function(opt_data, opt_ignored) {
  var output = '<div class="field-group jira-field jira-field-unrenderable' + ((opt_data.extraClasses) ? ' ' + soy.$$escapeHtml(opt_data.extraClasses) : '') + '"><label>' + soy.$$escapeHtml(opt_data.labelText) + ((opt_data.isRequired) ? '<span class="aui-icon icon-required"></span>' : '') + '</label>' + aui.form.value({content: opt_data.reasonContent});
  if (opt_data.errorTexts) {
    var errorList117 = opt_data.errorTexts;
    var errorListLen117 = errorList117.length;
    for (var errorIndex117 = 0; errorIndex117 < errorListLen117; errorIndex117++) {
      var errorData117 = errorList117[errorIndex117];
      output += '<div class="error">' + soy.$$escapeHtml(errorData117) + '</div>';
    }
  }
  output += '</div>';
  return output;
};
if (goog.DEBUG) {
  jiraIntegration.templates.fields.unrenderableTypeField.soyTemplateName = 'jiraIntegration.templates.fields.unrenderableTypeField';
}


jiraIntegration.templates.fields.dateField = function(opt_data, opt_ignored) {
  return '' + aui.form.textField({labelContent: '' + soy.$$escapeHtml(opt_data.labelText), id: opt_data.name, name: opt_data.name, value: opt_data.value, isRequired: opt_data.isRequired, extraClasses: 'jira-field' + (opt_data.extraClasses ? ' ' + opt_data.extraClasses : ''), extraAttributes: {'data-jira-type': opt_data.jiraType}, errorTexts: opt_data.errorTexts});
};
if (goog.DEBUG) {
  jiraIntegration.templates.fields.dateField.soyTemplateName = 'jiraIntegration.templates.fields.dateField';
}


jiraIntegration.templates.fields.select2WithIconField = function(opt_data, opt_ignored) {
  var output = '<div class="field-group jira-field' + ((opt_data.extraClasses) ? ' ' + soy.$$escapeHtml(opt_data.extraClasses) : '') + '" data-jira-type="' + soy.$$escapeHtml(opt_data.jiraType) + '"><label for="' + soy.$$escapeHtml(opt_data.name) + '">' + soy.$$escapeHtml(opt_data.labelText) + ((opt_data.isRequired) ? '<span class="aui-icon icon-required"></span>' : '') + '</label><select id="' + soy.$$escapeHtml(opt_data.name) + '" name="' + soy.$$escapeHtml(opt_data.name) + '">';
  var optionList154 = opt_data.options;
  var optionListLen154 = optionList154.length;
  for (var optionIndex154 = 0; optionIndex154 < optionListLen154; optionIndex154++) {
    var optionData154 = optionList154[optionIndex154];
    output += '<option value="' + soy.$$escapeHtml(optionData154.value) + '" ' + ((optionData154.selected) ? 'selected' : '') + ' data-icon-url="' + soy.$$escapeHtml(optionData154.iconUrl) + '">' + soy.$$escapeHtml(optionData154.text) + '</option>';
  }
  output += '</select>';
  if (opt_data.errorTexts) {
    var errorList170 = opt_data.errorTexts;
    var errorListLen170 = errorList170.length;
    for (var errorIndex170 = 0; errorIndex170 < errorListLen170; errorIndex170++) {
      var errorData170 = errorList170[errorIndex170];
      output += '<div class="error">' + soy.$$escapeHtml(errorData170) + '</div>';
    }
  }
  output += '</div>';
  return output;
};
if (goog.DEBUG) {
  jiraIntegration.templates.fields.select2WithIconField.soyTemplateName = 'jiraIntegration.templates.fields.select2WithIconField';
}


jiraIntegration.templates.fields.select2WithIconOption = function(opt_data, opt_ignored) {
  return ((opt_data.iconUrl) ? aui.avatar.avatar({avatarImageUrl: opt_data.iconUrl, size: 'xsmall', isProject: opt_data.isProject, extraClasses: 'select-option-image', tagName: 'span'}) : '') + '<span class="select-option" title="' + soy.$$escapeHtml(opt_data.optionValue) + '">' + soy.$$escapeHtml(opt_data.optionValue) + '</span>';
};
if (goog.DEBUG) {
  jiraIntegration.templates.fields.select2WithIconOption.soyTemplateName = 'jiraIntegration.templates.fields.select2WithIconOption';
}


jiraIntegration.templates.fields.labelFieldResult = function(opt_data, opt_ignored) {
  return '' + ((opt_data.label.isNew) ? soy.$$escapeHtml(AJS.format("\x22{0}\x22 - (New label)",opt_data.label.labelName)) : soy.$$escapeHtml(opt_data.label.labelName));
};
if (goog.DEBUG) {
  jiraIntegration.templates.fields.labelFieldResult.soyTemplateName = 'jiraIntegration.templates.fields.labelFieldResult';
}


jiraIntegration.templates.fields.userOptionSelect = function(opt_data, opt_ignored) {
  var output = '';
  var userOption__soy197 = soy.$$escapeHtml(opt_data.displayName) + ' - (' + soy.$$escapeHtml(opt_data.name) + ')';
  output += '<span title="' + soy.$$filterNoAutoescape(userOption__soy197) + '">' + soy.$$filterNoAutoescape(userOption__soy197) + '</span>';
  return output;
};
if (goog.DEBUG) {
  jiraIntegration.templates.fields.userOptionSelect.soyTemplateName = 'jiraIntegration.templates.fields.userOptionSelect';
}
;
;/* module-key = 'com.atlassian.integration.jira.jira-integration-plugin:fields', location = '/fields/fields.js' */
var jiraIntegration=window.jiraIntegration||{};jiraIntegration.fields=(function(J,Q){var k="YYYY-MM-DD";var g={template:jiraIntegration.templates.fields.stringField,getContext:v,getValue:B};var z={template:jiraIntegration.templates.fields.stringField,getContext:q,getValue:E,behavior:o};var u={template:jiraIntegration.templates.fields.arrayField,getContext:h,getValue:C,behavior:j};var s={template:jiraIntegration.templates.fields.textareaField,getContext:v,getValue:B};var G={template:jiraIntegration.templates.fields.numberField,getContext:v,getValue:D};var c={template:jiraIntegration.templates.fields.arrayField,getContext:h,getValue:C};var P={template:jiraIntegration.templates.fields.allowedValuesField,getContext:f,getValue:Q.bind(b,null,"id"),behavior:S};var M={template:jiraIntegration.templates.fields.allowedValuesField,getContext:f,getValue:Q.bind(b,null,"id")};var L={template:jiraIntegration.templates.fields.timeTrackingField,getContext:R,getValue:e};var K={template:jiraIntegration.templates.fields.dateField,getContext:v,getValue:r,behavior:y};var i={template:jiraIntegration.templates.fields.select2WithIconField,getContext:I,getValue:Q.bind(b,null,"id"),behavior:a};var l={"com.pyxis.greenhopper.jira:gh-epic-label":g,string:g,summary:g,"com.atlassian.jira.plugin.system.customfieldtypes:textfield":g,"com.atlassian.jira.plugin.system.customfieldtypes:url":g,environment:s,"com.atlassian.jira.plugin.system.customfieldtypes:textarea":s,description:s,"com.atlassian.jira.plugin.system.customfieldtypes:float":G,array:c,labels:u,"com.atlassian.jira.plugin.system.customfieldtypes:labels":c,resolution:P,fixVersions:P,priority:i,versions:P,components:P,security:P,"com.atlassian.jira.plugin.system.customfieldtypes:version":P,"com.atlassian.jira.plugin.system.customfieldtypes:multiversion":P,"com.atlassian.jira.plugin.system.customfieldtypes:project":P,assignee:z,reporter:z,timetracking:L,duedate:K,"com.atlassian.jira.plugin.system.customfieldtypes:datepicker":K,"com.atlassian.jira.plugin.system.customfieldtypes:multiselect":M,"com.atlassian.jira.plugin.system.customfieldtypes:select":M};var w={ignoreFieldsWithDefaultValue:false};function m(V,T,W){var U=T.schema.system||"customfield_"+T.schema.customId;return{labelText:T.name,name:U,isRequired:T.required,errorTexts:W[U],jiraType:V}}function v(X,T,U,V){var W=X.name;X.value=(J.isPlainObject(V[W])?V[W].name:V[W])||(U&&U.fields[W])||"";return X}function B(T){return T.val()}function r(T){var U=T.val();if(U===""){return null}else{return U}}function D(T){var U=T.val();if(t(U)){return Number(U)}return U||null}function y(T){var V=T.find("input");if(!!navigator.userAgent.match(/Trident/)&&AJS.version<"5.3.5"){var U="placeholder" in document.createElement("input");V.attr("placeholder",k);if(!U){V.on("focus",function(){if(V.val()===V.attr("placeholder")){V.val("")}}).on("blur",function(){if(V.val()===""){V.val(V.attr("placeholder"))}}).blur()}}else{V.datePicker({overrideBrowserDefault:true})}}function h(X,T,U,V){var W=X.name;X.value=(V[W]&&V[W].join(","))||(U&&U.fields[W]&&U.fields[W].join(","));return X}function C(T){return Q.map(T.val().split(","),J.trim)}function f(Z,T,U,W){var X=Z.name;var V=W[X];var aa=U&&U.fields[X];var Y;if(V){Y=J.isArray(V)?Q.pluck(V,"name"):[V.name]}else{if(aa){Y=J.isArray(aa)?Q.pluck(aa,"name"):[aa.name]}else{Y=[]}}Z.options=Q.map(T.allowedValues,function(ab){return{value:ab.id,text:ab.name||ab.value,selected:Q.contains(Y,ab.name||ab.id)}});Z.isMultiple=Q.contains(T.operations,"add");return Z}function b(W,U){var X=U.val();var T=U.attr("multiple");var V=function(Z){var Y={};Y[W]=Z;return Y};if(T){return J.isArray(X)?Q.map(X,V):[V(X)]}return V(X)}function S(T){T.find("select[multiple]").auiSelect2()}function q(X,T,U,V){var W=X.name;X.value=(V[W]&&V[W].name)||(U&&U.fields[W]&&U.fields[W].name)||"";return X}function E(T){return{name:T.val()}}function O(U,X,W,V,Y){var aa=U.find("input");var Z=U.attr("name");aa.removeClass("text");var T={minimumInputLength:1,id:Z,name:Z,query:function(ac){function ab(ad){ac.callback({results:ad})}n(X,W,ac.term,V).done(ab)}};aa.auiSelect2(J.extend(T,Y));U.find("div.aui-select2-container").addClass("jira-select2-drop-box")}function o(T,W,V,U){var X={formatInputTooShort:function(){return "Find users..."},formatResult:function(Y){return jiraIntegration.templates.fields.userOptionSelect({name:Y.id,displayName:Y.text})}};O(T,W,V,U,X)}function j(T,W,V,U){var X=T.find("input");jiraIntegration.fields._labelPicker.build(X,function(Y){return n(W,V,Y,U)})}function n(X,V,W,U){var T=J.extend({restType:V,issueKey:(U&&U.key)||"",term:W},X);return J.ajax({type:"POST",timeout:0,contentType:"application/json",dataType:"json",url:AJS.contextPath()+"/rest/jira-integration/latest/fields/autocomplete",data:JSON.stringify(T)})}function R(X,T,U,V){var W=X.name;X.value=(V[W]&&V[W].remainingEstimate)||(U&&U.fields[W]&&U.fields[W].remainingEstimate)||"";return X}function e(T){return{remainingEstimate:T.val()}}function I(Y,T,U,V){var W=Y.name;var X=(V[W]&&V[W].name)||(U&&U.fields&&U.fields[W]&&U.fields[W].name)||"";Y.options=Q.map(T.allowedValues,function(Z){return{value:Z.id,text:Z.name,selected:X===Z.name,iconUrl:Z.iconUrl}});return Y}function A(U){var T;if(U.id){T=J(U.element).attr("data-icon-url")}return jiraIntegration.templates.fields.select2WithIconOption({optionValue:U.text,iconUrl:T})}function a(X,W,U,T){if(!J.fn.auiSelect2){AJS.log("AUI version 5.2 or greater is required as this plugin needs the .auiSelect2() jQuery plugin.");return}var V=X.find("select");V.addClass("jira-select2-drop-box");V.auiSelect2({hasAvatar:true,minimumResultsForSearch:-1,formatSelection:A,formatResult:A})}function p(U,T){if(Q.has(l,U)&&console&&console.warn){console.warn("Redefining handler for type "+U+".")}l[U]=T}function F(T){return T.schema?(T.schema.system||T.schema.custom||T.schema.customId):T}function N(T){return l[F(T)]}function x(T){var U=d(T);return U&&N(U)}function d(T){return T.closest(".jira-field").attr("data-jira-type")}function H(U,T){return J.ajax({type:"GET",timeout:0,url:AJS.contextPath()+"/rest/jira-integration/1.0/servers/"+U.serverId+"/projects/"+U.projectKey+"/issue-types/"+U.issueType+"/fields-meta"}).pipe(function(W){var V=[];Q.each(W.fields,function(Y){var X=F(Y);if(Y.required&&!Q.contains(T.excludedFields,X)){V.push(Y)}});return V})}function t(T){return/\d/.test(T)&&/^-?\d*\.?\d*$/.test(T)}return{addFieldHandler:p,getFieldHandler:N,canRender:function(T){var V=F(T);var U=l[V];if(!U){return false}return T.operations&&T.operations.length&&(!U.canRender||U.canRender(T))},renderField:function(X,Z,aa,Y){var T=Z.schema.system||Z.schema.custom||Z.schema.customId;var V=l[T];var W=m(T,Z,Y||{});var ab=!V||(V.canRender&&!V.canRender(Z));var U=!Z.operations||!Z.operations.length;if(ab||U){W.reasonContent=ab?AJS.format("{0}Edit{1} this field in JIRA",'<a href="'+(X?X.url:"#")+'">',"</a>"):U?AJS.format("{0}Edit{1} this field in JIRA",'<a href="'+(X?X.url:"#")+'">',"</a>"):null;if(!W.reasonContent){throw new Error("Invalid unrenderable reason.")}return jiraIntegration.templates.fields.unrenderableTypeField(W)}return V.template(V.getContext(W,Z,X,aa||{}))},getJSON:function(T){var U=x(T);return U&&U.getValue&&U.getValue(T)},attachFieldBehaviors:function(V,U,T){V.find(".jira-field").each(function(Y,X){var W=J(X);var aa=d(W);var Z=aa&&N(aa);var ab=Z&&Z.behavior;if(ab){ab(W,U,aa,T)}})},renderCreateRequiredFields:function(X,W,V,U,T){U=Q.extend({},w,U);function Y(Z){if(U.ignoreFieldsWithDefaultValue){Z=Q.filter(Z,function(ab){return !ab.hasDefaultValue})}var aa=Q.filter(Z,function(ab){return !jiraIntegration.fields.canRender(ab)});if(aa.length){if(T){T(aa)}return}X.html(Q.map(Z,function(ab){return jiraIntegration.fields.renderField(null,ab,null,null)}).join(""));jiraIntegration.fields.attachFieldBehaviors(X,{serverId:V.serverId,projectKey:V.projectKey},null)}if(U.requiredFields){Y(U.requiredFields)}else{H(V,U).done(Y)}}}}(AJS.$,window._));;
;/* module-key = 'com.atlassian.integration.jira.jira-integration-plugin:fields', location = '/fields/label-picker.js' */
var jiraIntegration=window.jiraIntegration||{};jiraIntegration.fields=jiraIntegration.fields||{};jiraIntegration.fields._labelPicker=function(a){var b=function(d,c){d.auiSelect2({tags:true,multiple:true,tokenSeparators:[","," "],createSearchChoice:function(e){if(!e){return null}return{id:e,text:e,isNew:true}},query:function(f){var e=function(g){f.callback({results:g})};c(f.term).done(e)},formatResult:function(e){return jiraIntegration.templates.fields.labelFieldResult({label:{labelName:e.text,isNew:e.isNew}})}})};return{build:b}}(AJS.$);;
;/* module-key = 'com.atlassian.integration.jira.jira-integration-plugin:transition-form', location = '/transition-form/transition-form.soy' */
// This file was automatically generated from transition-form.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace jiraIntegration.templates._transitionForm.
 */

if (typeof jiraIntegration == 'undefined') { var jiraIntegration = {}; }
if (typeof jiraIntegration.templates == 'undefined') { jiraIntegration.templates = {}; }
if (typeof jiraIntegration.templates._transitionForm == 'undefined') { jiraIntegration.templates._transitionForm = {}; }


jiraIntegration.templates._transitionForm.globalError = function(opt_data, opt_ignored) {
  var param3 = '';
  var errorTextList4 = opt_data.errorTexts;
  var errorTextListLen4 = errorTextList4.length;
  for (var errorTextIndex4 = 0; errorTextIndex4 < errorTextListLen4; errorTextIndex4++) {
    var errorTextData4 = errorTextList4[errorTextIndex4];
    param3 += '<p>' + soy.$$escapeHtml(errorTextData4) + '</p>';
  }
  var output = '' + aui.message.error({content: param3});
  output += aui.buttons.button({tagName: 'a', type: 'primary', extraClasses: 'jira-error-action', extraAttributes: {href: opt_data.actionUrl}, text: opt_data.actionText});
  return output;
};
if (goog.DEBUG) {
  jiraIntegration.templates._transitionForm.globalError.soyTemplateName = 'jiraIntegration.templates._transitionForm.globalError';
}


jiraIntegration.templates._transitionForm.form = function(opt_data, opt_ignored) {
  var param19 = '<div class="jira-section-heading"><h3>' + soy.$$escapeHtml(opt_data.transition.name) + '</h3></div>';
  if (opt_data.errorText) {
    var param25 = '';
    var errorTextList26 = opt_data.errorText;
    var errorTextListLen26 = errorTextList26.length;
    for (var errorTextIndex26 = 0; errorTextIndex26 < errorTextListLen26; errorTextIndex26++) {
      var errorTextData26 = errorTextList26[errorTextIndex26];
      param25 += soy.$$escapeHtml(errorTextData26);
    }
    param19 += aui.message.error({content: param25});
  }
  param19 += soy.$$filterNoAutoescape(opt_data.fieldContent) + aui.form.buttons({content: '' + aui.buttons.button({type: 'primary', extraClasses: 'jira-transition', extraAttributes: {'data-transition-id': opt_data.transition.id}, text: opt_data.transition.name}) + aui.buttons.button({extraClasses: 'jira-transition-cancel', type: 'link', text: "Cancel"})});
  var output = '' + aui.form.form({action: '', extraClasses: 'jira-transition-form', content: param19});
  return output;
};
if (goog.DEBUG) {
  jiraIntegration.templates._transitionForm.form.soyTemplateName = 'jiraIntegration.templates._transitionForm.form';
}
;
;/* module-key = 'com.atlassian.integration.jira.jira-integration-plugin:transition-form', location = '/transition-form/transition-form.js' */
var jiraIntegration=window.jiraIntegration||{};jiraIntegration.transitionForm=(function(b,a){return{isRequired:function(c,d){return d.fields&&a.some(d.fields,jiraIntegration.fields.canRender)},$render:function(g,f,c,h){if(!b.fn.auiSelect2){throw new Error("AUI version 5.2 or greater is required as this plugin needs the .auiSelect2() jQuery plugin.")}var d={};var k=false;a.each(h&&h.errors||[],function(l){k=k||l.context;var m=l.context||"__global__";d[m]=d[m]||[];d[m].push(l.message)});var i=!!d.__global__;if(!i||k){var e=f.fields?a.values(f.fields):[];a.each(e,function(m,l){m.fieldIndex=l});e.sort(function(o,n){var m=jiraIntegration.fields.canRender(o)?0:1;var l=jiraIntegration.fields.canRender(n)?0:1;return(m-l)||(o.fieldIndex-n.fieldIndex)});var j=b(jiraIntegration.templates._transitionForm.form({errorTexts:d.__global__,transition:f,fieldContent:a.map(e,function(l){return jiraIntegration.fields.renderField(g,l,c,d)}).join("")}));jiraIntegration.fields.attachFieldBehaviors(j,{serverId:g.applicationLinkId,projectKey:g.fields.project.key},g);return j}else{return b(jiraIntegration.templates._transitionForm.globalError({errorTexts:d.__global__,actionText:AJS.format("{0} in JIRA",f.name),actionUrl:g.url}))}},getJSON:function(c){return a.reduce(c.find("input,select,textarea").not(".select2-input,.select2-focusser"),function(d,f){var e=b(f);d[e.attr("name")]=jiraIntegration.fields.getJSON(e);return d},{})}}}(AJS.$,window._));;
;/* module-key = 'com.atlassian.integration.jira.jira-integration-plugin:jira-issues-dialog', location = '/jira-issue-dialog/jira-issues-dialog.js' */
var jiraIntegration=window.jiraIntegration||{};jiraIntegration.JiraIssuesDialog=(function(d,r){d(document).on("jira-img-error","img",function(){var t=d('<div class="jira-default-project-avatar"></div>').text(this.getAttribute("alt"));d(this).replaceWith(t)});var i;function o(t){this.options=d.extend({},o.prototype.defaults,t);this.issueKeys=this.options.issueKeys||[];this.entityKey=this.options.entityKey||null;r.bindAll(this,"show","hide","onOAuthSuccess","setIssueKeys","setEntityKey","setTitle","reset","destroy","_renderJiraData");this._initDialog();this._truncated=false;this._jiraIssuesData=null;this._jiraIssuesDataPromise=null;this._events={};this._currentXhr=null}o.prototype.defaults={id:"jira-issues-dialog",issueKeys:null,entityKey:null,maxIssues:10,headerTitle:"JIRA Issues",get$AuthMessage:function(v){var t=d(jiraIntegration.templates.dialog.authenticate({extraClasses:"jira-oauth-dialog",multipleJiras:v.length>1}));var u=t.find(".jira-instance-list");v.forEach(function(x,w){if(w!==0){u.append(", ")}u.append(a(x))});return t},get$ConnectionLostMessage:function(v){if(v.length===1){var u=v[0];return d(jiraIntegration.templates.dialog.error({titleContent:jiraIntegration.templates.dialog.linkTitle({text:"Connection lost with",link:u.applicationUrl,linkText:u.applicationName}),text:"Unfortunately, we\u0027ve encountered problems connecting to JIRA"+":\n"+u.message,extraClasses:"communication-error"}))}else{var t=r.map(v,function(w){return jiraIntegration.templates.dialog.linkText({link:w.applicationUrl,linkText:w.applicationName,text:w.message,extraClasses:"multi"})});return d(jiraIntegration.templates.dialog.error({title:"There were errors communicating with JIRA",content:t.join(""),extraClasses:"communication-error"}))}},get$UnknownErrorMessage:function(){return d(jiraIntegration.templates.dialog.error({title:"Unknown error",text:"An unexpected error occurred.\nPlease contact your system administrator if the problem persists."}))},get$NoIssuesExistMessage:function(){return d(jiraIntegration.templates.dialog.message({title:"Can\u0027t display issues",text:"Either you don\u0027t have access to view them or they don\u0027t exist.\nPlease contact your system administrator if you believe this is incorrect.",iconClass:"icon-jira",extraClasses:"no-issues-exist"}))},ajax:function(t){alert("JiraIssuesDialog requires the option 'ajax(options)' to be specified.\nThis method should handle response status codes other than 200 and 500.")}};function g(t){return Math.max(0,Math.min(t-250,640))}o.prototype.on=function(t,u){this._events[t]=this._events[t]||[];this._events[t].push(u)};o.prototype.off=function(t,u){if(this._events[t]){this._events[t]=r.without(this._events[t],u)}};o.prototype._trigger=function(u){var t=this;var v=Array.prototype.slice.call(arguments,1);if(this._events[u]){r.map(this._events[u],function(w){w.apply(t,v)})}};o.prototype._initDialog=function(){var t=this;var v=d(window).height();this.dialog=new AJS.Dialog({width:980,height:g(v),id:this.options.id,closeOnOutsideClick:true,focusSelector:".button-panel-cancel-link"});d("#"+this.options.id).addClass("jira-issues-dialog");this.setTitle();this.dialog.addCancel("Close",this.hide).addPanel("jira-issues-list");this._transitionClickHandler=function(w){w.preventDefault();t._onTransitionClicked(this)};this.dialog.getCurrentPanel().body.on("click",".jira-transition-cancel",function(w){w.preventDefault();t._onTransitionCancelled(this)});d(document).on("hideLayer",function(){if(t.multiIssueView){t.multiIssueView.destroy()}});this._updateOAuthStatus();var u=d(window);this.onWindowResize=r.debounce(function(){t._setMinHeight(u.height())},200);u.on("resize",this.onWindowResize)};o.prototype._setMinHeight=function(u){var t=this.dialog.getCurrentPanel().body;t.css("min-height",g(u));if(t.is(":visible")){this.dialog.updateHeight()}};function l(t){return(!t.which||t.which===1)&&!(t.metaKey||t.ctrlKey||t.shiftKey||(t.altKey&&!d.browser.msie))}o.prototype.reset=function(){this._cancelPendingRender();this._truncated=false;this._jiraIssuesData=null};o.prototype.setIssueKeys=function(u,t){u=r.uniq(u);this.initialIssueKey=t;if(!this.issueKeys||u.length!==this.issueKeys.length||r.difference(u,this.issueKeys).length){this.issueKeys=u;this.reset()}};o.prototype.setEntityKey=function(t){if(this.entityKey!==t){this.entityKey=t;this.reset()}};o.prototype.destroy=function(){this.reset();this.dialog.remove();this._events=null;this.dialog=null;this.issueKeys=null;this.entityKey=null;this.options=null;if(this.onWindowResize){d(window).off("resize",this.onWindowResize);this.onWindowResize=null}};o.prototype.setTitle=function(t){this.dialog.addHeader(t||this.options.headerTitle||o.prototype.defaults.headerTitle)};o.prototype.show=function(){this._bindOAuthCallbacks();d(document).on("click",".jira-transition",this._transitionClickHandler);this.dialog.getCurrentPanel().body.removeClass("multi-issues");this.dialog.show();this._setMinHeight(d(window).height());this._loadJiraData().done(this._renderJiraData);this._trigger("show")};o.prototype.hide=function(){this._removeJiraDialog();this.dialog.hide();this._unbindOAuthCallbacks();d(document).off("click",".jira-transition",this._transitionClickHandler);this._trigger("hide")};o.prototype._removeJiraDialog=function(){d("#jira-instance-list-dialog").remove()};o.prototype._getRestIssuesUrl=function(){return AJS.contextPath()+"/rest/jira-integration/latest/issues?issueKey="+r.map(this.issueKeys,encodeURIComponent).join("&issueKey=")+(this.entityKey?"&entityKey="+encodeURIComponent(this.entityKey):"")+"&fields=*all,-comment&minimum="+this.options.maxIssues};o.prototype._getRestTransitionUrl=function(t,u){return AJS.contextPath()+"/rest/jira-integration/latest/issues/"+encodeURIComponent(t)+"/transitions?applicationId="+encodeURIComponent(u)+"&fields=*all,-comment"};o.prototype._getOAuthStatusUrl=function(){return AJS.contextPath()+"/rest/jira-integration/latest/servers"};o.prototype._loadJiraData=function(){if((!this._jiraIssuesData||this._jiraIssuesDataIncomplete)&&!this._jiraIssuesDataPromise){var t=this;var u=this.dialog.getCurrentPanel().body;if(!d.fn.spin){alert("This plugin requires spin.js and the jquery plugin to be available.")}u.empty().spin("large");this._jiraIssuesDataPromise=this.options.ajax({type:"GET",url:this._getRestIssuesUrl(),dataType:"json",contentType:"application/json",jsonp:false}).pipe(function(x,A,y){if(x.errors&&x.errors.length){t._handleAuthenticationRequired(x.errors);return d.Deferred().reject()}if(x&&x.length){var z=r.filter(x,function(B){return B.canTransition&&B.transitions.length===0});if(z.length){r.forEach(z,function(B){B.transitions=t._getTransitions(B.key,B.applicationLinkId,x);B.transitions.done(function(){f(B)})});r.forEach(r.difference(x,z),f);var v=z[0].transitions;var w=d.Deferred();v.done(function(){w.resolve(x)});v.fail(w.reject);return w}r.forEach(x,f)}return x},function(w,x,v){t._handle500Error(w)}).always(function(){u.spinStop()}).done(function(v){if(v.length){t._truncated=v.length>t.options.maxIssues;v=r.first(v,t.options.maxIssues)}t._jiraIssuesData=v;t._jiraIssuesDataIncomplete=v.length!=t.issueKeys.length});return t._jiraIssuesDataPromise.always(function(){t._jiraIssuesDataPromise=null})}else{if(this._jiraIssuesDataPromise){return this._jiraIssuesDataPromise}else{return d.Deferred().resolve(this._jiraIssuesData).promise()}}};o.prototype._getTransitions=function(t,x,w){var v=this;var u;w=w||this._jiraIssuesData;if(w){u=r.find(w,function(y){return y.key===t});if(u&&u.transitions&&u.transitions[0]&&u.transitions[0].fields){return d.when(u.transitions)}}return this.options.ajax({type:"GET",url:this._getRestTransitionUrl(t,x),dataType:"json",contentType:"application/json",jsonp:false}).pipe(function(y){if(y.errors&&y.errors.length){v._handleAuthenticationRequired(y.errors);return d.Deferred().reject()}else{if(u){u.transitions=y}return y}},function(z,A,y){v._handle500Error(z)})};o.prototype._transitionIssue=function(u,w,x,t){var v=this;return this.options.ajax({type:"POST",url:this._getRestTransitionUrl(u.key,x),dataType:"json",contentType:"application/json",jsonp:false,data:JSON.stringify({fields:t,transition:{id:w.id}})}).pipe(function(z){if(z.errors&&z.errors.length){v._handleAuthenticationRequired(z.errors);return d.Deferred().reject()}if(u.fields.status.id===z.fields.status.id&&w.to&&w.to.id!==z.fields.status.id){return d.Deferred().reject(k("The transition could not be completed due to an unexpected error. Use JIRA to execute this transition."))}v._trigger("transitioned",u.key);if(z.canTransition&&!z.transitions.length){var y=d.Deferred();v._getTransitions(z.key,z.applicationLinkId,[z]).done(function(){f(z);v._updateCachedData(z);y.resolve(z)}).fail(y.reject);return y}f(z);v._updateCachedData(z);return z})};o.prototype.isVisible=function(){return this.dialog.getCurrentPanel().body.is(":visible")};o.prototype.onOAuthSuccess=function(t){if(this.isVisible()){this._removeJiraDialog();this._updateOAuthStatus(true);this._loadJiraData().done(this._renderJiraData);t.preventDefault()}};o.prototype._onTransitionClicked=function(A){var G=this;var v=d(A);var H=v.closest(".jira-transition-form");var E=this.dialog.getCurrentPanel().body.find(".jira-issue-detailed");var B=E.find(".jira-transition");var t=E.attr("data-application-id");var w=E.attr("data-issue-key");var y=v.attr("data-transition-id");var F=r.find(this._jiraIssuesData,function(I){return I.key===w});B.attr("aria-disabled","true").prop("disabled",true);var D;var C;var u=this._getTransitions(w,t).pipe(function(I){D=r.find(I,function(J){return J.id===y});if(D){if(H.length){C=jiraIntegration.transitionForm.getJSON(H)}else{if(jiraIntegration.transitionForm.isRequired(F,D)){return d.Deferred().reject("formRequired")}}}else{D={id:y,name:v.text()}}return G._transitionIssue(F,D,t,C)});var z;if(H.length){z=d('<div class="jira-transition-spinner"></div>').prependTo(H.find(".buttons"))}else{z=d('<div class="jira-transition-spinner"></div>').appendTo(E.find(".jira-transitions"))}z.spin();var x=E.closest(".list-and-detail-view").find('> .list-view .issue-item[data-issuekey="'+F.key+'"]');u.done(function(J){var I=J.fields.status;x.find(".issue-item-status").html(jiraIntegration.templates.dialog.itemIssueStatus({issueStatus:I}))});this._registerPendingRender(u).always(function(){B.attr("aria-disabled","false").prop("disabled",false);z.spinStop().remove()}).done(function(I){E.replaceWith(G._renderDetailedIssue(I))}).fail(function(J){if(!J){return}if(J==="formRequired"){E.children(".jira-header").nextAll().remove();E.append(jiraIntegration.transitionForm.$render(F,D));E.addClass("jira-transitioning");return}var K;if(J.responseText){try{K=JSON.parse(J.responseText)}catch(L){K=k("An unexpected error occurred.\nPlease contact your system administrator if the problem persists.")}}else{K=J}if(K&&K.errors){E.children(".jira-header").nextAll().remove();if(D){E.append(jiraIntegration.transitionForm.$render(F,D,C,K));E.addClass("jira-transitioning")}else{if(K.errors&&K.errors.length){var I=r.map(K.errors,function(M){return"<li>"+AJS.escapeHtml(M.message)+"</li>"});E.append(aui.message.error({content:'<ul class="jira-errors">'+I.join("")+"</ul>"}))}else{E.replaceWith(G.options.get$UnknownErrorMessage());G._setMinHeight(0)}}}})};o.prototype._renderDetailedIssue=function(t){var u=d(jiraIntegration.templates.dialog.detailedIssue({issue:t}));return u.attr("data-last-updated",new Date().getTime())};o.prototype._onTransitionCancelled=function(v){var x=d(v);var w=x.closest(".jira-issue-detailed");var t=w.attr("data-issue-key");var u=r.find(this._jiraIssuesData,function(y){return y.key===t});w.replaceWith(this._renderDetailedIssue(u))};o.prototype._updateCachedData=function(t){this._jiraIssuesData=r.map(this._jiraIssuesData,function(u){return(u.key===t.key)?t:u})};o.prototype._handleAuthenticationRequired=function(u){var t=this;this._removeViewWarning();i.then(function(v){if(u.length!==v.length){t._updateOAuthStatus(true)}i.then(function(w){t.dialog.getCurrentPanel().body.empty().append(t.options.get$AuthMessage(w));t._setMinHeight(0)})})};o.prototype._removeViewWarning=function(){this.dialog.popup.element.find(".view-warning").remove()};o.prototype._handle500Error=function(x){if(x.status===500){var u;try{u=JSON.parse(x.responseText)}catch(w){}var t;var v=u&&u.errors;if(!v||!v.length){t=this.options.get$UnknownErrorMessage()}else{t=this.options.get$ConnectionLostMessage(v)}this._removeViewWarning();this.dialog.getCurrentPanel().body.empty().append(t);this._setMinHeight(0)}};o.prototype._registerPendingRender=function(t){this._cancelPendingRender();var u=this._pendingRender=d.Deferred();t.done(function(){u.resolveWith(this,arguments)}).fail(function(){u.rejectWith(this,arguments)});return this._pendingRender};o.prototype._cancelPendingRender=function(){if(this._pendingRender){this._pendingRender.reject();this._pendingRender=null}};o.prototype._renderJiraData=function(){var u=this;var v;var y=this.dialog.getCurrentPanel().body;this._cancelPendingRender();var t;var z;var x;switch(this._jiraIssuesData.length){case 0:v=this.options.get$NoIssuesExistMessage();break;case 1:z=this.issueKeys.length>1;v=this._renderDetailedIssue(this._jiraIssuesData[0]);x=d(window).height();break;default:if(this._truncated){t=AJS.format("Showing the first {0} issues",this.options.maxIssues)}else{if(this.issueKeys.length!==this._jiraIssuesData.length){z=true}}var w=r.findWhere(this._jiraIssuesData,{key:this.initialIssueKey});v=d(jiraIntegration.templates.dialog.multiIssueView({issues:this._jiraIssuesData,selectedIssue:w}));this.multiIssueView=new c(v,function(D,C,E,F){if(!l(F)){return}F.preventDefault();u._cancelPendingRender();var A=D.attr("data-issuekey");var B=r.find(u._jiraIssuesData,function(G){return G.key===A});if(B.transitions&&B.transitions.promise){E.empty().spin("large");u._registerPendingRender(B.transitions).always(function(){E.spinStop()}).done(function(){E.html(u._renderDetailedIssue(B))})}else{E.html(u._renderDetailedIssue(B))}});y.addClass("multi-issues");x=d(window).height();break}this._removeViewWarning();if(t){this.dialog.popup.element.find(".dialog-button-panel").prepend(jiraIntegration.templates.dialog.warningMessage({warningText:t}))}else{if(z){i.then(this._renderOAuthStatus.bind(this))}}y.html(v);v.find(".issue-status").attr("data-last-updated",new Date().getTime());this._setMinHeight(x||0)};o.prototype._bindOAuthCallbacks=function(){var t=AJS.$(document);t.bind("applinks.auth.approved",this.onOAuthSuccess);d('<div class="applinks-auth-confirmation-container hidden"></div>').appendTo(this.dialog.popup.element)};o.prototype._unbindOAuthCallbacks=function(){var t=AJS.$(document);t.unbind("applinks.auth.approved",this.onOAuthSuccess);d(".applinks-auth-confirmation-container.hidden").remove()};o.prototype._updateOAuthStatus=function(t){if(i&&!t){return}i=this.options.ajax({type:"GET",url:this._getOAuthStatusUrl()}).then(function(u){return u.filter(function(v){return !v.authenticated})})};o.prototype._renderOAuthStatus=function(v){this._removeJiraDialog();this._removeViewWarning();var t=this.dialog.popup.element.find(".dialog-button-panel");if(v.length===0){t.prepend(jiraIntegration.templates.dialog.warningMessage({warningText:"You don\u0027t have access to view all issues or they may not exist"}));return}var w=d(jiraIntegration.templates.dialog.oauthFooterMessage({includeDialog:v.length>2,multipleJiras:v.length>1}));var x=w.find(".jira-instance-picker");v.slice(0,2).forEach(function(z,y){if(y!==0){x.append(", ")}x.append(a(z))});var u=w.find(".jira-instance-list");v.slice(2).forEach(function(y){u.append(d("<li></li>").append(a(y)))});t.prepend(jiraIntegration.templates.dialog.warningMessage({warningText:""}));t.find(".view-warning").html(w)};function a(v){var u=ApplinksUtils.createAuthRequestInline(null,{id:v.id,authUri:AJS.contextPath()+"/plugins/servlet/applinks/oauth/login-dance/authorize?applicationLinkID="+encodeURIComponent(v.id),appUri:v.displayUrl,appName:v.name});var t=u.find("a.applink-authenticate").text(v.name).attr("title",v.name);return t.wrap('<span class="instance"></span>')}function k(t){return{errors:[{message:t}]}}var m={j:74,k:75};function c(t,v,u){this.options=d.extend({},c.prototype.defaults,u);this.$listView=t.find(".list-view");this.$detailView=t.find(".detail-view");this.selectHandler=v;r.bindAll(this,"itemClickHandler","shortcutHandler");this.init()}c.prototype.defaults={selectedClass:"selectedItem"};c.prototype.init=function(){var t=this;this.bindShortcuts();this.$listView.on("click","li",this.itemClickHandler)};c.prototype.itemClickHandler=function(v){var u=this.options.selectedClass;this.$listView.find("li."+u).removeClass(u);var t=d(v.currentTarget).addClass(u);this.selectHandler(t,this.$listView,this.$detailView,v)};c.prototype.destroy=function(){this.unbindShortcuts()};c.prototype.shortcutHandler=function(w){if(d(w.target).is("input,textarea,select")){return}var u;if(w.which===m.j){u="next"}else{if(w.which===m.k){u="prev"}else{return}}var v=this.$listView.find("li."+this.options.selectedClass);var t=v[u]("li");t.click();this._scrollItemIntoView(t)};c.prototype.bindShortcuts=function(){d(document).on("keydown",this.shortcutHandler)};c.prototype.unbindShortcuts=function(){d(document).off("keydown",this.shortcutHandler)};c.prototype._scrollItemIntoView=function(t){t.find("a").focus().blur()};var q=/.*(?=\/browse\/[^\/]*-\d+)/;var j=/.*(?=\/rest\/api\/\d+\/)/;function f(w){var v=q.exec(w.url)[0];var x=j.exec(w.self)[0];function u(A,y,z){if(typeof A==="string"){z[y]=n(A,v,x);return}r.each(A,u)}function t(z,y){if(z[y]){z[y]=e(z[y],v,x)}}s(w.fields,h,u);s(w.renderedFields,h,u);s(w.transitions,h,u);if(w.renderedFields){t(w.renderedFields,"description");r.each(w.renderedFields.comment&&w.renderedFields.comment.comments||[],function(y){t(y,"body")})}}function h(v,t,u){return/[uU]rls?$/.test(t)}function e(u,t,w){try{var v=d("<div />").html(u);r.each(["href","src"],function(y){r.each(v.find("["+y+"]"),function(z){z.setAttribute(y,n(z.getAttribute(y),t,w))})});u=v.html()}catch(x){}return u}var b=/^((\w+:)?\/\/|\w+:)/;function n(u,t,v){if(u.substring(0,v.length)===v){return p(t,u.substring(v.length))}if(!b.test(u)){return p(t,u)}return u}function s(v,u,t){if(v&&typeof v==="object"){r.each(v,function(x,w){if(u(x,w,v)){t(x,w,v)}s(x,u,t)})}}function p(u,t){var w=u.charAt(u.length-1)==="/";var v=t.charAt(0)==="/";return w&&v?u+t.substring(1):w||v?u+t:u+"/"+t}return o}(AJS.$,_));require(["aui/inline-dialog2"]);;
;/* module-key = 'com.atlassian.integration.jira.jira-integration-plugin:jira-issues-dialog', location = '/jira-issue-dialog/jira-issues-dialog.soy' */
// This file was automatically generated from jira-issues-dialog.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace jiraIntegration.templates.dialog.
 */

if (typeof jiraIntegration == 'undefined') { var jiraIntegration = {}; }
if (typeof jiraIntegration.templates == 'undefined') { jiraIntegration.templates = {}; }
if (typeof jiraIntegration.templates.dialog == 'undefined') { jiraIntegration.templates.dialog = {}; }


jiraIntegration.templates.dialog.detailedIssue = function(opt_data, opt_ignored) {
  return '<div class="jira-issue-detailed" data-issue-key="' + soy.$$escapeHtml(opt_data.issue.key) + '" data-application-id="' + soy.$$escapeHtml(opt_data.issue.applicationLinkId) + '"><div class="jira-header">' + aui.group.group({content: '' + aui.group.item({extraClasses: 'jira-project-avatar', content: '<span class="aui-avatar aui-avatar-project jira-project-avatar aui-avatar-large"><span class="aui-avatar-inner"><img src="' + soy.$$escapeHtml(opt_data.issue.fields.project.avatarUrls['48x48']) + '" alt="' + soy.$$escapeHtml(opt_data.issue.fields.project.name ? opt_data.issue.fields.project.name : '') + '" onerror="AJS.$(this).trigger(\'jira-img-error\')" /></span></span>'}) + aui.group.item({content: '<span class="project-name">' + soy.$$escapeHtml(opt_data.issue.fields.project.name) + '</span><a class="issue-key" href="' + soy.$$escapeHtml(opt_data.issue.url) + '">' + soy.$$escapeHtml(opt_data.issue.key) + '</a><h2 class="issue-summary" title="' + soy.$$escapeHtml(opt_data.issue.fields.summary) + '">' + soy.$$escapeHtml(opt_data.issue.fields.summary) + '</h2>'})}) + '</div>' + ((opt_data.issue.canTransition && opt_data.issue.transitions && opt_data.issue.transitions.length) ? jiraIntegration.templates.dialog.jiraActionsToolbar({transitions: opt_data.issue.transitions, maxTransitionsToDisplay: opt_data.maxTransitionsToDisplay}) : '') + '<div class="jira-section-heading"><h3>' + soy.$$escapeHtml("Details") + '</h3></div>' + aui.group.group({extraClasses: 'issue-details jira-section', content: '' + aui.group.item({content: '<ul class="fields"><li class="field issue-type"><span class="field-label">' + soy.$$escapeHtml("Type:") + '</span><img class="aui-icon" src="' + soy.$$escapeHtml(opt_data.issue.fields.issuetype.iconUrl) + '"/><span class="field-text">' + soy.$$escapeHtml(opt_data.issue.fields.issuetype.name) + '</span></li><li class="field issue-priority"><span class="field-label">' + soy.$$escapeHtml("Priority:") + '</span>' + ((opt_data.issue.fields.priority) ? '<img class="aui-icon" src="' + soy.$$escapeHtml(opt_data.issue.fields.priority.iconUrl) + '"/><span class="field-text">' + soy.$$escapeHtml(opt_data.issue.fields.priority.name) + '</span>' : '<span class="field-text empty">' + soy.$$escapeHtml("No priority") + '</span>') + '</li></ul>'}) + aui.group.item({content: '<ul class="fields"><li class="field issue-status"><span class="field-label">' + soy.$$escapeHtml("Status:") + '</span>' + JIRA.Template.Util.Issue.Status.issueStatusResolver({issueStatus: opt_data.issue.fields.status}) + '</li><li class="field issue-assignee"><span class="field-label">' + soy.$$escapeHtml("Assignee:") + '</span>' + ((opt_data.issue.fields.assignee) ? '<img class="aui-icon" title="' + soy.$$escapeHtml(opt_data.issue.fields.assignee.displayName) + '" src="' + soy.$$escapeHtml(opt_data.issue.fields.assignee.avatarUrls['16x16']) + '"><span class="field-text">' + soy.$$escapeHtml(opt_data.issue.fields.assignee.displayName) + '</span>' : '<span class="field-text empty">' + soy.$$escapeHtml("Unassigned") + '</span>') + '</li></ul>'})}) + '<div class="jira-section-heading"><h3>' + soy.$$escapeHtml("Description") + '</h3></div><div class="jira-section">' + ((opt_data.issue.renderedFields && opt_data.issue.renderedFields.description) ? '<div class="issue-description rendered">' + soy.$$filterNoAutoescape(opt_data.issue.renderedFields.description) + '</div>' : (opt_data.issue.fields.description) ? '<p class="issue-description">' + soy.$$escapeHtml(opt_data.issue.fields.description) + '</p>' : '<p class="issue-description empty">' + soy.$$escapeHtml("No description") + '</p>') + '</div></div>';
};
if (goog.DEBUG) {
  jiraIntegration.templates.dialog.detailedIssue.soyTemplateName = 'jiraIntegration.templates.dialog.detailedIssue';
}


jiraIntegration.templates.dialog.jiraActionsToolbar = function(opt_data, opt_ignored) {
  return '' + aui.toolbar2.toolbar2({extraClasses: 'jira-actions', content: '' + aui.toolbar2.group({content: '' + aui.toolbar2.item({item: 'primary', extraClasses: 'jira-transitions', content: '' + jiraIntegration.templates.dialog.transitionsButtons(opt_data)})})});
};
if (goog.DEBUG) {
  jiraIntegration.templates.dialog.jiraActionsToolbar.soyTemplateName = 'jiraIntegration.templates.dialog.jiraActionsToolbar';
}


jiraIntegration.templates.dialog.transitionsButtons = function(opt_data, opt_ignored) {
  var output = '';
  var maxTransitionsToDisplay__soy122 = opt_data.maxTransitionsToDisplay ? opt_data.maxTransitionsToDisplay : 3;
  var param123 = '';
  var transitionList124 = opt_data.transitions;
  var transitionListLen124 = transitionList124.length;
  for (var transitionIndex124 = 0; transitionIndex124 < transitionListLen124; transitionIndex124++) {
    var transitionData124 = transitionList124[transitionIndex124];
    param123 += (transitionIndex124 < maxTransitionsToDisplay__soy122 - 1 || opt_data.transitions.length <= maxTransitionsToDisplay__soy122) ? aui.buttons.button({text: transitionData124.name, extraClasses: 'jira-transition', extraAttributes: {'data-transition-id': transitionData124.id, autocomplete: 'off'}}) : '';
  }
  param123 += (opt_data.transitions.length > maxTransitionsToDisplay__soy122) ? aui.buttons.button({text: "More", dropdown2Target: 'jira-more-transitions', extraAttributes: {autocomplete: 'off'}}) : '';
  output += aui.buttons.buttons({content: param123});
  if (opt_data.transitions.length > maxTransitionsToDisplay__soy122) {
    var param143 = '<ul>';
    var transitionList145 = opt_data.transitions;
    var transitionListLen145 = transitionList145.length;
    for (var transitionIndex145 = 0; transitionIndex145 < transitionListLen145; transitionIndex145++) {
      var transitionData145 = transitionList145[transitionIndex145];
      param143 += (transitionIndex145 > maxTransitionsToDisplay__soy122 - 2) ? '<li><a class="jira-transition" data-transition-id="' + soy.$$escapeHtml(transitionData145.id) + '">' + soy.$$escapeHtml(transitionData145.name) + '</a></li>' : '';
    }
    param143 += '</ul>';
    output += aui.dropdown2.contents({id: 'jira-more-transitions', extraClasses: 'aui-style-default', content: param143});
  }
  return output;
};
if (goog.DEBUG) {
  jiraIntegration.templates.dialog.transitionsButtons.soyTemplateName = 'jiraIntegration.templates.dialog.transitionsButtons';
}


jiraIntegration.templates.dialog.warningMessage = function(opt_data, opt_ignored) {
  return '<div class="view-warning"><span class="aui-icon aui-icon-small aui-iconfont-info" /><span class="warning-message">' + soy.$$escapeHtml(opt_data.warningText) + '</span></div>';
};
if (goog.DEBUG) {
  jiraIntegration.templates.dialog.warningMessage.soyTemplateName = 'jiraIntegration.templates.dialog.warningMessage';
}


jiraIntegration.templates.dialog.multiIssueView = function(opt_data, opt_ignored) {
  var output = '<div class="list-and-detail-view"><div class="list-view"><ul>';
  var issueList162 = opt_data.issues;
  var issueListLen162 = issueList162.length;
  for (var issueIndex162 = 0; issueIndex162 < issueListLen162; issueIndex162++) {
    var issueData162 = issueList162[issueIndex162];
    output += jiraIntegration.templates.dialog.issueItem({issue: issueData162, isSelected: opt_data.selectedIssue ? issueData162.key == opt_data.selectedIssue.key : issueIndex162 == 0});
  }
  output += '</ul></div><div class="detail-view">' + jiraIntegration.templates.dialog.detailedIssue({issue: opt_data.selectedIssue ? opt_data.selectedIssue : opt_data.issues[0]}) + '</div></div>';
  return output;
};
if (goog.DEBUG) {
  jiraIntegration.templates.dialog.multiIssueView.soyTemplateName = 'jiraIntegration.templates.dialog.multiIssueView';
}


jiraIntegration.templates.dialog.issueItem = function(opt_data, opt_ignored) {
  return '<li class="issue-item' + soy.$$escapeHtml(opt_data.isSelected ? ' selectedItem' : '') + '" data-issuekey="' + soy.$$escapeHtml(opt_data.issue.key) + '"><img class="aui-icon issue-item-type" title="' + soy.$$escapeHtml(opt_data.issue.fields.issuetype.name) + '" src="' + soy.$$escapeHtml(opt_data.issue.fields.issuetype.iconUrl) + '"/><a class="issue-item-key" href="' + soy.$$escapeHtml(opt_data.issue.url) + '">' + soy.$$escapeHtml(opt_data.issue.key) + '</a><div class="issue-item-status">' + jiraIntegration.templates.dialog.itemIssueStatus({issueStatus: opt_data.issue.fields.status}) + '</div><a href="' + soy.$$escapeHtml(opt_data.issue.url) + '" class="issue-item-summary" title="' + soy.$$escapeHtml(opt_data.issue.fields.summary) + '">' + soy.$$escapeHtml(opt_data.issue.fields.summary) + '</a></li>';
};
if (goog.DEBUG) {
  jiraIntegration.templates.dialog.issueItem.soyTemplateName = 'jiraIntegration.templates.dialog.issueItem';
}


jiraIntegration.templates.dialog.itemIssueStatus = function(opt_data, opt_ignored) {
  return '' + JIRA.Template.Util.Issue.Status.issueStatusResolver({issueStatus: opt_data.issueStatus, isSubtle: true, isCompact: ! opt_data.issueStatus.statusCategory});
};
if (goog.DEBUG) {
  jiraIntegration.templates.dialog.itemIssueStatus.soyTemplateName = 'jiraIntegration.templates.dialog.itemIssueStatus';
}


jiraIntegration.templates.dialog.message = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<div class="jira-dialog-message' + aui.renderExtraClasses(opt_data) + '"' + aui.renderExtraAttributes(opt_data) + '>' + ((opt_data.iconClass) ? '<div class="jira-dialog-message-icon aui-icon' + ((opt_data.iconClass) ? ' ' + soy.$$escapeHtml(opt_data.iconClass) : '') + '">' + soy.$$escapeHtml(opt_data.accessibilityText ? opt_data.accessibilityText : '') + '</div>' : '') + ((opt_data.title) ? '<h2>' + soy.$$escapeHtml(opt_data.title) + '</h2>' : '') + ((opt_data.titleContent) ? soy.$$filterNoAutoescape(opt_data.titleContent) : '') + ((opt_data.text) ? '<p>' + soy.$$escapeHtml(opt_data.text) + '</p>' : '') + ((opt_data.content) ? soy.$$filterNoAutoescape(opt_data.content) : '') + '</div>';
};
if (goog.DEBUG) {
  jiraIntegration.templates.dialog.message.soyTemplateName = 'jiraIntegration.templates.dialog.message';
}


jiraIntegration.templates.dialog.linkText = function(opt_data, opt_ignored) {
  return '<p class="' + soy.$$escapeHtml(opt_data.extraClasses) + '"><a href="' + soy.$$escapeHtml(opt_data.link) + '">' + soy.$$escapeHtml(opt_data.linkText) + '</a>: ' + soy.$$escapeHtml(opt_data.text) + '</p>';
};
if (goog.DEBUG) {
  jiraIntegration.templates.dialog.linkText.soyTemplateName = 'jiraIntegration.templates.dialog.linkText';
}


jiraIntegration.templates.dialog.linkTitle = function(opt_data, opt_ignored) {
  return '<h2>' + soy.$$escapeHtml(opt_data.text) + ' <a href="' + soy.$$escapeHtml(opt_data.link) + '">' + soy.$$escapeHtml(opt_data.linkText) + '</a></h2>';
};
if (goog.DEBUG) {
  jiraIntegration.templates.dialog.linkTitle.soyTemplateName = 'jiraIntegration.templates.dialog.linkTitle';
}


jiraIntegration.templates.dialog.authenticate = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '' + jiraIntegration.templates.dialog.message({title: "Authenticate to see this issue", content: '<p>' + ((opt_data.multipleJiras) ? soy.$$escapeHtml("Please log in to approve these applications:") + ' ' : soy.$$escapeHtml("Please log in to approve this application:") + ' ') + '<span class=\'jira-instance-list\'></span></p>', extraClasses: opt_data.extraClasses, iconClass: 'icon-lock'});
};
if (goog.DEBUG) {
  jiraIntegration.templates.dialog.authenticate.soyTemplateName = 'jiraIntegration.templates.dialog.authenticate';
}


jiraIntegration.templates.dialog.error = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '' + jiraIntegration.templates.dialog.message({title: opt_data.title, titleContent: opt_data.titleContent, text: opt_data.text, content: opt_data.content, extraClasses: opt_data.extraClasses, iconClass: 'icon-skull'});
};
if (goog.DEBUG) {
  jiraIntegration.templates.dialog.error.soyTemplateName = 'jiraIntegration.templates.dialog.error';
}


jiraIntegration.templates.dialog.oauthFooterMessage = function(opt_data, opt_ignored) {
  return '<span>' + aui.icons.icon({icon: 'info', useIconFont: true}) + ((opt_data.multipleJiras) ? soy.$$escapeHtml("Authenticate with the following applications to view more issues:") + ' ' : soy.$$escapeHtml("Authenticate with the following application to view more issues:") + ' ') + '<span class=\'jira-instance-picker\'></span>' + ((opt_data.includeDialog) ? ', ' + aui.inlineDialog2.trigger({menu: {id: 'jira-instance-list-dialog'}, text: "More"}) + aui.inlineDialog2.inlineDialog2({id: 'jira-instance-list-dialog', respondsTo: 'toggle', alignment: 'top center', content: '<ul class="jira-instance-list"></ul>'}) : '') + '</span>';
};
if (goog.DEBUG) {
  jiraIntegration.templates.dialog.oauthFooterMessage.soyTemplateName = 'jiraIntegration.templates.dialog.oauthFooterMessage';
}
;
;/* module-key = 'com.atlassian.integration.jira.jira-integration-plugin:jira-issues-dialog-trigger', location = '/jira-issues-dialog-trigger/jira-issues-dialog-trigger.js' */
jiraIntegration.triggers=(function(d,b){function c(g){return g.which===3}function f(g){return(!g.which||g.which===1)&&!(g.metaKey||g.ctrlKey||g.shiftKey||(g.altKey&&!d.browser.msie))}var a={defaults:{selector:".jira-issues-trigger",headerTitleFn:null}};function e(j,h){j=d.extend({},a.defaults,j);var l;function i(){if(!l){if(h instanceof jiraIntegration.JiraIssuesDialog){l=h}else{l=new jiraIntegration.JiraIssuesDialog(h)}}return l}function n(v,r){var t=i();if(c(v)||(!f(v)&&!!r.data("single-issue"))){return}v.preventDefault();var u=r.attr("data-issue-keys");var s=u&&u.split(",");var q=r.attr("data-initial-issue-key");if(s){t.setIssueKeys(s,q)}if(typeof j.headerTitleFn==="function"){t.setTitle(j.headerTitleFn(r))}t.show()}var o={gravity:"n",className:function(){var s=d(".tipsy");var w=s[0];var q=w.offsetWidth;var v="multi-issues-tooltip";s.addClass(v);var t=w.offsetWidth;var r=q-t;var u=parseFloat(s.css("left"),10);s.css("left",(u+r/2)+"px");return v}};var g;var p;if(typeof j.selector==="string"){g=function(r){var q=d(r.target).closest(j.selector);if(q.length){n(r,q)}};d(document).on("click",g);o.live=true;d(j.selector+".multi-issues").tipsy(o);p=function(){d(document).off("click",g)}}else{g=function(q){n(q,d(this))};var k=d(j.selector);k.on("click",g);var m=k.filter(".multi-issues");m.tipsy(o);p=function(){k.off("click",g)}}return{getDialog:i,unbind:p}}a.init=e;return a}(AJS.$,_));;
;/* module-key = 'com.atlassian.integration.jira.jira-integration-plugin:jira-issues-dialog-trigger', location = '/jira-issues-dialog-trigger/jira-issues-dialog-trigger.soy' */
// This file was automatically generated from jira-issues-dialog-trigger.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace jiraIntegration.templates.trigger.
 */

if (typeof jiraIntegration == 'undefined') { var jiraIntegration = {}; }
if (typeof jiraIntegration.templates == 'undefined') { jiraIntegration.templates = {}; }
if (typeof jiraIntegration.templates.trigger == 'undefined') { jiraIntegration.templates.trigger = {}; }


jiraIntegration.templates.trigger.issuesTrigger = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.displayedIssue || opt_data.issues.length == 1) {
    output += '<a class="' + soy.$$escapeHtml(opt_data.className ? opt_data.className : 'jira-issues-trigger') + '" data-issue-keys="';
    var issueList8 = opt_data.issues;
    var issueListLen8 = issueList8.length;
    for (var issueIndex8 = 0; issueIndex8 < issueListLen8; issueIndex8++) {
      var issueData8 = issueList8[issueIndex8];
      output += ((! (issueIndex8 == 0)) ? ',' : '') + soy.$$escapeHtml(issueData8.key);
    }
    output += '"' + ((opt_data.displayedIssue) ? ' data-initial-issue-key="' + soy.$$escapeHtml(opt_data.displayedIssue.key) + '"' : '') + ' data-single-issue="true" href="' + soy.$$escapeHtml(opt_data.displayedIssue ? opt_data.displayedIssue.url : opt_data.issues[0].url) + '">' + soy.$$escapeHtml(opt_data.displayedIssue ? opt_data.displayedIssue.key : opt_data.issues[0].key) + '</a>';
  } else if (opt_data.issues.length > 1) {
    output += '<a class="' + soy.$$escapeHtml(opt_data.className ? opt_data.className : 'jira-issues-trigger') + ' multi-issues" data-issue-keys="';
    var issueList29 = opt_data.issues;
    var issueListLen29 = issueList29.length;
    for (var issueIndex29 = 0; issueIndex29 < issueListLen29; issueIndex29++) {
      var issueData29 = issueList29[issueIndex29];
      output += ((! (issueIndex29 == 0)) ? ',' : '') + soy.$$escapeHtml(issueData29.key);
    }
    output += '" href="#" title="' + jiraIntegration.templates.trigger.tooltip(opt_data) + '"><strong>' + soy.$$escapeHtml(opt_data.issues.length <= (opt_data.maxIssues ? opt_data.maxIssues : 10) ? opt_data.issues.length : AJS.format("{0}+",opt_data.maxIssues ? opt_data.maxIssues : 10)) + '</strong> ' + soy.$$escapeHtml("JIRA Issues") + '</a>';
  }
  return output;
};
if (goog.DEBUG) {
  jiraIntegration.templates.trigger.issuesTrigger.soyTemplateName = 'jiraIntegration.templates.trigger.issuesTrigger';
}


jiraIntegration.templates.trigger.tooltip = function(opt_data, opt_ignored) {
  var output = '';
  var issueList44 = opt_data.issues;
  var issueListLen44 = issueList44.length;
  for (var issueIndex44 = 0; issueIndex44 < issueListLen44; issueIndex44++) {
    var issueData44 = issueList44[issueIndex44];
    output += (issueIndex44 < 5) ? ((! (issueIndex44 == 0)) ? '\n' : '') + soy.$$escapeHtml(issueData44.key) : '';
  }
  output += (opt_data.issues.length > 5) ? '\n' + soy.$$escapeHtml(AJS.format("and {0} more...",opt_data.issues.length - 5)) : '';
  return output;
};
if (goog.DEBUG) {
  jiraIntegration.templates.trigger.tooltip.soyTemplateName = 'jiraIntegration.templates.trigger.tooltip';
}
;
;/* module-key = 'com.atlassian.stash.stash-jira-integration:jira-integration-lib', location = '/lib/jira-integration/jira-issues-dialog_AMD.js' */
define("jira-integration/jira-issues-dialog",[],function(){return jiraIntegration.JiraIssuesDialog});;
;/* module-key = 'com.atlassian.stash.stash-jira-integration:jira-integration-lib', location = '/lib/jira-integration/jira-triggers_AMD.js' */
define("jira-integration/jira-triggers",[],function(){return jiraIntegration.triggers});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:oauth-util', location = '/static/util/oauth.js' */
define("util/oauth",["jquery","util/events"],function(e,d){function h(a){var c=new e.Deferred,b={url:a,deferred:c,api:c.promise({abort:function(){f.cancelRequest(a)}})};d.trigger("stash.util.oauth.authorizationRequested",null,a);c.then(function(){d.trigger("stash.util.oauth.authorizationSucceeded",null,a)},function(){d.trigger("stash.util.oauth.authorizationFailed",null,a)});f.fireRequest(a,c.resolve,c.reject);return b}function g(a){if(b){if(b.url===a)return b.api;b.api.abort()}a=b=h(a);b.deferred.always(function(){b=
null});return a.api}var f=function(){function a(){window.aouthWindow&&window.aouthWindow.close&&window.aouthWindow.close();window.oauthCallback=null;window.aouthWindow=null}return{fireRequest:function(c,b,d){window.oauthCallback={uri:c,success:function(){a();b&&b()},failure:function(){a();d&&d()}};window.aouthWindow=window.open(c)},cancelRequest:function(a){window.oauthCallback&&window.oauthCallback.uri===a&&window.oauthCallback.failure()}}}(),b;return{authorizeUrl:g,interceptLinks:function(a){e(document).on("click",
a,function(a){var b=this.getAttribute("href");b&&(g(b),a.preventDefault())})}}});;
;/* module-key = 'com.atlassian.stash.stash-jira-integration:jira-issues-dialog', location = '/jira-issues-dialog/stash-jira-issues-dialog.js' */
define("feature/jira/jira-issues-dialog",["jira-integration/jira-issues-dialog","jira-integration/jira-triggers","jquery","lodash","util/ajax","util/events","util/oauth"],function(a,d,c,f,e,i,h){var g="jira-ual-authenticate";h.interceptLinks("."+g);function b(j){f.bindAll(this,"show","hide","showDialog","closeDialog","destroy");j=c.extend({},this.defaults,j);if(j.triggerSelector){this._triggerInfo=d.init({selector:j.triggerSelector,headerTitleFn:typeof j.headerTitle==="function"?j.headerTitle:undefined},j);this._dialog=this._triggerInfo.getDialog()}else{this._dialog=new a(j)}i.on("stash.util.oauth.authorizationSucceeded",this._dialog.onAuthorizationSucceeded)}b.prototype.defaults=c.extend({},a.prototype.defaults,{oauthTriggerClass:g,ajax:function(j){return e.rest(c.extend({statusCode:{200:false,500:false}},j))}});b.prototype.destroy=function(){i.off("stash.util.oauth.authorizationSucceeded",this._dialog.onAuthorizationSucceeded);this._dialog.destroy();this._dialog=null;if(this._triggerInfo){this._triggerInfo.unbind();this._triggerInfo=null}};b.prototype.showDialog=b.prototype.show=function(){this._dialog.show()};b.prototype.closeDialog=b.prototype.hide=function(){this._dialog.hide()};b.prototype.setIssueKeys=function(j){this._dialog.setIssueKeys(j)};return b});;
;/* module-key = 'com.atlassian.stash.stash-jira-integration:pull-request-jira-issues', location = '/pull-request/pull-request-jira-issues.js' */
define("feature/pull-request/pull-request-jira-issues",["aui","chaperone","jquery","lodash","stash/api/util/navbuilder","util/ajax","util/events","model/page-state","feature/jira/jira-issues-dialog","exports"],function(n,c,f,p,a,l,q,m,b,d){var e;var h;var g=10;function j(){return a.newBuilder(["rest","jira","latest","projects",m.getProject().getKey(),"repos",m.getRepository().getSlug(),"pull-requests",m.getPullRequest().getId(),"issues"]).build()}function i(){c.registerFeature("jira-pull-request",[{selector:".pull-request-issues-trigger",dir:"w",title:"JIRA at your fingertips",content:stash.feature.pullRequest.jiraFeatureDiscoveryContent(),once:true}]);q.on("stash.page.pull-request.view.contextUnloaded",c.checkFeatureVisibility);l.rest({url:j(),type:"GET",statusCode:{"*":function(){return false}}}).done(function(s){h=s;var r=f(stash.feature.pullRequest.jiraWebPanel(d.getWebPanelParams())).hide();f(".jira-issues-placeholder").replaceWith(r);r.fadeIn();if(h.length){e=new b({id:"pull-request-jira-issues-dialog",issueKeys:p.pluck(h,"key"),maxIssues:g,triggerSelector:".pull-request-issues-trigger"})}})}function o(){new b({id:"markup-jira-issues-dialog",maxIssues:g,triggerSelector:".markup-issues-trigger"})}function k(){q.on("stash.keyboard.shortcuts.pullrequest.showJiraIssuesDialog",function(r){(this.execute?this:n.whenIType(r)).execute(function(){if(e){e.showDialog()}})})}d.getWebPanelParams=function(){return{issues:h,maxIssues:g}};d.onReady=function(){i();o();k()}});jQuery(document).ready(function(){require("feature/pull-request/pull-request-jira-issues").onReady()});;
;/* module-key = 'com.atlassian.stash.stash-jira-integration:pull-request-jira-issues', location = '/pull-request/pull-request-jira-issues.soy' */
// This file was automatically generated from pull-request-jira-issues.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace stash.feature.pullRequest.
 */

if (typeof stash == 'undefined') { var stash = {}; }
if (typeof stash.feature == 'undefined') { stash.feature = {}; }
if (typeof stash.feature.pullRequest == 'undefined') { stash.feature.pullRequest = {}; }


stash.feature.pullRequest.jiraWebPanel = function(opt_data, opt_ignored) {
  return '' + ((! opt_data.issues || opt_data.issues.length == 0) ? '<div class=\'jira-issues-placeholder hidden\'></div>' : (opt_data.issues.length == 1) ? stash.widget.summaryPanel.relatedEntitiesWebPanel({linkText: opt_data.issues[0].key, linkHref: opt_data.issues[0].url, linkExtraAttributes: 'data-single-issue=true', linkClass: 'pull-request-issues-trigger', iconClass: 'aui-icon-small aui-iconfont-jira', iconTooltip: "Issues", extraClasses: 'jira-issues'}) : stash.widget.summaryPanel.relatedEntitiesWebPanel({count: opt_data.issues.length > opt_data.maxIssues ? opt_data.maxIssues + '+' : opt_data.issues.length, linkText: "JIRA Issues", linkClass: 'pull-request-issues-trigger multi-issues', linkTooltip: '' + jiraIntegration.templates.trigger.tooltip(opt_data), iconClass: 'aui-icon-small aui-iconfont-jira', iconTooltip: "Issues", extraClasses: 'jira-issues'}));
};
if (goog.DEBUG) {
  stash.feature.pullRequest.jiraWebPanel.soyTemplateName = 'stash.feature.pullRequest.jiraWebPanel';
}


stash.feature.pullRequest.jiraFeatureDiscoveryContent = function(opt_data, opt_ignored) {
  return '<p>' + soy.$$escapeHtml("You can view and transition your JIRA issues without leaving the pull request. Try it!") + '</p>';
};
if (goog.DEBUG) {
  stash.feature.pullRequest.jiraFeatureDiscoveryContent.soyTemplateName = 'stash.feature.pullRequest.jiraFeatureDiscoveryContent';
}
;
;/* module-key = 'com.atlassian.stash.stash-jira-integration:pull-request-jira-issues-panel', location = '/web-fragment-placeholder.config' */
WebFragments.addWebPanelDescriptor({'pluginKey':'com.atlassian.stash.stash-jira-integration','key':'pull-request-jira-issues-panel','moduleKey':'pull-request-jira-issues-panel','completeModuleKey':'com.atlassian.stash.stash-jira-integration:pull-request-jira-issues-panel','weight':15.0,'context-provider':function(ctx) { return WebFragments._getValue((require('feature/pull-request/pull-request-jira-issues').getWebPanelParams()), ctx); },'params':{},'location':'stash.pull-request.related-entities','view':function(ctx) { return WebFragments._getValue((stash.feature.pullRequest.jiraWebPanel), ctx); }});;
;/* module-key = 'com.atlassian.stash.stash-build-integration:build-status-pr-overview-resources', location = '/static/pr-overview/build-status-pr-overview.js' */
define("build/status/pull-request-overview",["aui","build/status/build-status","util/events","exports"],function(b,d,c,a){var e;a.fetchContext=function(f){e=f.csid;d.fetchContext(f)};c.on("stash.keyboard.shortcuts.pullrequest.showBuildDialog",function(f){(this.execute?this:b.whenIType(f)).execute(function(){d.showDialogIfHasBuildStatus(e)})})});;
;/* module-key = 'com.atlassian.stash.stash-build-integration:build-status-pr-overview', location = '/web-fragment-placeholder.config' */
WebFragments.addWebPanelDescriptor({'pluginKey':'com.atlassian.stash.stash-build-integration','key':'build-status-pr-overview','moduleKey':'build-status-pr-overview','completeModuleKey':'com.atlassian.stash.stash-build-integration:build-status-pr-overview','weight':10.0,'context-provider':function(ctx) { return WebFragments._getValue((require('build/status/pull-request-overview').fetchContext({ csid: ctx['pullRequest'].fromRef.latestChangeset, includeUnique: true })), ctx); },'params':{},'location':'stash.pull-request.related-entities','view':function(ctx) { return WebFragments._getValue((stash.build.status.placeholder), ctx); }});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:tasks-overview-resources', location = '/static/feature/tasks/tasks-overview/tasks-overview-panel.js' */
define("feature/tasks/tasks-overview/tasks-overview-panel",["lodash","widget/updating-section"],function(b,d){function a(a,c){this.init.apply(this,arguments)}a.prototype.init=function(a,c){var b=c.toEventStream(),e={isVisibleProperty:c.map(function(a){return 0<a.resolvedTaskCount||0<a.openTaskCount}).toProperty()};this._destroyCallbacks=[new d(a,b,stash.feature.tasks.tasksOverview.taskCount,e)]};a.prototype.destroy=function(){b.invoke(this._destroyCallbacks,"destroy")};return a});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:tasks-overview-resources', location = '/static/feature/tasks/tasks-overview/tasks-overview-panel.soy' */
// This file was automatically generated from tasks-overview-panel.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace stash.feature.tasks.tasksOverview.
 */

if (typeof stash == 'undefined') { var stash = {}; }
if (typeof stash.feature == 'undefined') { stash.feature = {}; }
if (typeof stash.feature.tasks == 'undefined') { stash.feature.tasks = {}; }
if (typeof stash.feature.tasks.tasksOverview == 'undefined') { stash.feature.tasks.tasksOverview = {}; }


stash.feature.tasks.tasksOverview.overviewPanel = function(opt_data, opt_ignored) {
  return '<div class="plugin-section-separator"></div><div class="plugin-item plugin-item-task-count' + ((opt_data.openTaskCount == 0 && opt_data.resolvedTaskCount == 0) ? ' hidden' : '') + '"><a href="#" class="task-list-dialog-link">' + aui.icons.icon({useIconFont: true, icon: 'editor-task'}) + '<span class="replacement-placeholder" title="' + soy.$$escapeHtml("View all tasks (Type \x27Shift + T\x27)") + '">' + stash.feature.tasks.tasksOverview.taskCount(opt_data) + '</span></a></div>';
};
if (goog.DEBUG) {
  stash.feature.tasks.tasksOverview.overviewPanel.soyTemplateName = 'stash.feature.tasks.tasksOverview.overviewPanel';
}


stash.feature.tasks.tasksOverview.taskCount = function(opt_data, opt_ignored) {
  return '<span class="task-count" data-open="' + soy.$$escapeHtml(opt_data.openTaskCount) + '" data-resolved="' + soy.$$escapeHtml(opt_data.resolvedTaskCount) + '">' + ((opt_data.openTaskCount > 0) ? soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml(AJS.format("\x3cstrong\x3e{0}\x3c/strong\x3e open {0,choice,0#tasks|1#task|1\x3ctasks}",typeof (opt_data.openTaskCount) === 'number' ? opt_data.openTaskCount : soy.$$escapeHtml(opt_data.openTaskCount)))) : (opt_data.resolvedTaskCount > 0) ? soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml("All tasks resolved")) : '') + '</span>';
};
if (goog.DEBUG) {
  stash.feature.tasks.tasksOverview.taskCount.soyTemplateName = 'stash.feature.tasks.tasksOverview.taskCount';
}
;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:tasks-overview-resources', location = '/static/feature/tasks/tasks-overview/tasks-counter.js' */
define("feature/tasks/tasks-overview/tasks-counter","bacon jquery lodash util/bacon util/function feature/tasks/model/task-state".split(" "),function(g,h,e,f,k,d){function c(){this.init.apply(this,arguments)}c.prototype.init=function(){var a=this;this._destroyCallbacks=[];e.bindAll(this,"_mapEventData");this._taskCounterStream=g.mergeAll(e.map(["created","resolved","reopened","deleted","failed-transition"],function(b){return f.events("stash.feature.pull-request-tasks."+b).map(a._mapEventData)})).merge(f.events("stash.feature.pull-request-tasks.set-counts"))};
c.prototype.emptyCounter=function(a){return{openTaskCount:0,resolvedTaskCount:0,pullRequestId:a&&a.pullRequestId||null,repositoryId:a&&a.repositoryId||null}};c.prototype._mapEventData=function(a){var b=this.emptyCounter(a.task);switch(a.task.state){case d.OPEN:b.openTaskCount=1;break;case d.RESOLVED:b.resolvedTaskCount=1}switch(a.task.lastState){case d.OPEN:b.openTaskCount=-1;break;case d.RESOLVED:b.resolvedTaskCount=-1}return b};c.prototype.countPropertyForPullRequest=function(a,b){var c=this,d=
this._taskCounterStream.merge(b).filter(function(b){return b.pullRequestId===a.pullRequestId&&b.repositoryId===a.repositoryId}).scan(this.emptyCounter(a),function(a,b){b.isReset&&(a=c.emptyCounter(b));a.openTaskCount+=b.openTaskCount;a.resolvedTaskCount+=b.resolvedTaskCount;return a});this._destroyCallbacks.push(d.onValue(h.noop));return d};c.prototype.destroy=function(){k.applyAll(this._destroyCallbacks)};return c});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:tasks-overview-resources', location = '/static/feature/tasks/tasks-overview/tasks-overview.js' */
define("feature/tasks/tasks-overview","bacon jquery lodash stash/api/util/events stash/api/util/state feature/tasks/tasks-overview/tasks-counter feature/tasks/tasks-overview/tasks-overview-panel exports".split(" "),function(m,n,g,c,h,b,p,k){function l(){var a=h.getPullRequest().id,c=h.getRepository().id,b=m.fromPromise(_PageDataPlugin.ready("com.atlassian.stash.stash-web-plugin:pull-request-tasks-page-provider","stash.layout.pullRequest")).map(function(b){return g.extend(b.hasOwnProperty("openTaskCount")?
b:d.emptyCounter(),{pullRequestId:a,repositoryId:c})});e||(e=d.countPropertyForPullRequest({pullRequestId:a,repositoryId:c},b));n(".plugin-item-task-count").each(function(){f.push(new p(this,e))})}function q(a){"stash.pull-request.nav.overview"===a.name&&l()}function r(a){"stash.pull-request.nav.overview"===a.name&&(g.invoke(f,"destroy"),f=[])}var e,d,f=[];k.openTaskCountContext=function(a){return b.prototype.emptyCounter({pullRequestId:a.pullRequest.id,repositoryId:a.pullRequest.fromRef.repository.id})};
k.onReady=function(){d=new b;c.on("stash.page.pull-request.view.contextLoaded",q);c.on("stash.page.pull-request.view.contextUnloaded",r);l()}});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:tasks-overview-init-resource', location = '/static/feature/tasks/tasks-overview/tasks-overview-init.js' */
jQuery(document).ready(function(){require("feature/tasks/tasks-overview").onReady()});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:task-list-init-resource', location = '/static/feature/tasks/task-list/task-list-init.js' */
jQuery(document).ready(function(){require("feature/tasks/task-list").onReady()});;
;/* module-key = 'com.atlassian.stash.stash-client-web-fragments-plugin:pull-request-tasks-overview-panel', location = '/web-fragment-placeholder.config' */
WebFragments.addWebPanelDescriptor({'pluginKey':'com.atlassian.stash.stash-client-web-fragments-plugin','key':'pull-request-tasks-overview-panel','moduleKey':'pull-request-tasks-overview-panel','completeModuleKey':'com.atlassian.stash.stash-client-web-fragments-plugin:pull-request-tasks-overview-panel','weight':20.0,'context-provider':function(ctx) { return WebFragments._getValue((require('feature/tasks/tasks-overview').openTaskCountContext), ctx); },'params':{},'location':'stash.pull-request.related-entities','view':function(ctx) { return WebFragments._getValue((stash.feature.tasks.tasksOverview.overviewPanel), ctx); }});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:discussion-plugin-templates', location = '/static/feature/discussion/participants-list/participants-list.soy' */
// This file was automatically generated from participants-list.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace stash.feature.discussion.
 */

if (typeof stash == 'undefined') { var stash = {}; }
if (typeof stash.feature == 'undefined') { stash.feature = {}; }
if (typeof stash.feature.discussion == 'undefined') { stash.feature.discussion = {}; }


stash.feature.discussion.participants = function(opt_data, opt_ignored) {
  var param17 = '<ul class="aui-list-truncate">';
  var participantList19 = opt_data.participants;
  var participantListLen19 = participantList19.length;
  for (var participantIndex19 = 0; participantIndex19 < participantListLen19; participantIndex19++) {
    var participantData19 = participantList19[participantIndex19];
    param17 += '<li>' + stash.widget.avatarList.participantAvatar({participant: participantData19, extraClasses: 'participant-item', withName: true}) + '</li>';
  }
  param17 += '</ul>';
  var param14 = '' + aui.dropdown2.contents({id: 'participants-dropdown', extraClasses: 'aui-style-default aui-dropdown2-tailed avatar-dropdown participants-dropdown', content: param17});
  var output = '' + stash.widget.summaryPanel.relatedEntitiesWebPanel({iconClass: 'aui-icon-small aui-iconfont-user', linkText: '' + soy.$$escapeHtml(AJS.format("{0,choice,1#Participant|1\x3cParticipants}",opt_data.participants.length)), linkClass: 'participants-trigger aui-dropdown2-trigger', linkExtraAttributes: 'aria-owns=participants-dropdown aria-haspopup=true', count: opt_data.participants.length, extraClasses: 'participants' + ((! opt_data.participants.length) ? ' hidden' : ''), extraContent: param14});
  return output;
};
if (goog.DEBUG) {
  stash.feature.discussion.participants.soyTemplateName = 'stash.feature.discussion.participants';
}


stash.feature.discussion.participantCount = function(opt_data, opt_ignored) {
  return '<strong class="count">' + soy.$$escapeHtml(opt_data.count) + '</strong> ';
};
if (goog.DEBUG) {
  stash.feature.discussion.participantCount.soyTemplateName = 'stash.feature.discussion.participantCount';
}
;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:pull-request-overview-plugin-templates', location = '/static/feature/pull-request/overview/plugins/pull-request-overview-plugin-templates.soy' */
// This file was automatically generated from pull-request-overview-plugin-templates.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace stash.feature.pullRequest.overview.plugins.
 */

if (typeof stash == 'undefined') { var stash = {}; }
if (typeof stash.feature == 'undefined') { stash.feature = {}; }
if (typeof stash.feature.pullRequest == 'undefined') { stash.feature.pullRequest = {}; }
if (typeof stash.feature.pullRequest.overview == 'undefined') { stash.feature.pullRequest.overview = {}; }
if (typeof stash.feature.pullRequest.overview.plugins == 'undefined') { stash.feature.pullRequest.overview.plugins = {}; }


stash.feature.pullRequest.overview.plugins.learnMore = function(opt_data, opt_ignored) {
  return '' + stash.widget.summaryPanel.linkWebPanel({extraClasses: 'learn-more', iconClass: 'aui-iconfont-help', linkHref: 'http:\/\/docs.atlassian.com\/stash\/docs-0311\/Using+pull+requests+in+Stash', linkExtraAttributes: {target: '_blank'}, linkContent: '' + soy.$$escapeHtml("Learn more")});
};
if (goog.DEBUG) {
  stash.feature.pullRequest.overview.plugins.learnMore.soyTemplateName = 'stash.feature.pullRequest.overview.plugins.learnMore';
}
;
;/* module-key = 'com.atlassian.stash.stash-client-web-fragments-plugin:pull-request-participants', location = '/web-fragment-placeholder.config' */
WebFragments.addWebPanelDescriptor({'pluginKey':'com.atlassian.stash.stash-client-web-fragments-plugin','key':'pull-request-participants','moduleKey':'pull-request-participants','completeModuleKey':'com.atlassian.stash.stash-client-web-fragments-plugin:pull-request-participants','weight':10.0,'context-provider':function(ctx) { return WebFragments._getValue(({ participants : ctx['pullRequest'].participants }), ctx); },'params':{},'location':'stash.pull-request.related-entities','view':function(ctx) { return WebFragments._getValue((stash.feature.discussion.participants), ctx); }});;
;/* module-key = 'com.atlassian.stash.stash-client-web-fragments-plugin:pull-request-watch', location = '/web-fragment-placeholder.config' */
WebFragments.addWebPanelDescriptor({'pluginKey':'com.atlassian.stash.stash-client-web-fragments-plugin','key':'pull-request-watch','moduleKey':'pull-request-watch','completeModuleKey':'com.atlassian.stash.stash-client-web-fragments-plugin:pull-request-watch','weight':10.0,'context-provider':function(ctx) { return WebFragments._getValue((function() { return { isWatching : require('model/page-state').getIsWatching(), type : require('feature/watch').type.PULL_REQUEST } }), ctx); },'params':{},'location':'stash.pull-request.links','view':function(ctx) { return WebFragments._getValue((stash.feature.watch.summaryPanel), ctx); }});;
;/* module-key = 'com.atlassian.stash.stash-client-web-fragments-plugin:pull-request-learnmore', location = '/web-fragment-placeholder.config' */
WebFragments.addWebPanelDescriptor({'pluginKey':'com.atlassian.stash.stash-client-web-fragments-plugin','key':'pull-request-learnmore','moduleKey':'pull-request-learnmore','completeModuleKey':'com.atlassian.stash.stash-client-web-fragments-plugin:pull-request-learnmore','weight':20.0,'params':{},'location':'stash.pull-request.links','view':function(ctx) { return WebFragments._getValue((stash.feature.pullRequest.overview.plugins.learnMore), ctx); }});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:pull-request-overview', location = '/static/feature/pull-request/overview/plugins/pull-request-overview-plugin-templates.soy' */
// This file was automatically generated from pull-request-overview-plugin-templates.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace stash.feature.pullRequest.overview.plugins.
 */

if (typeof stash == 'undefined') { var stash = {}; }
if (typeof stash.feature == 'undefined') { stash.feature = {}; }
if (typeof stash.feature.pullRequest == 'undefined') { stash.feature.pullRequest = {}; }
if (typeof stash.feature.pullRequest.overview == 'undefined') { stash.feature.pullRequest.overview = {}; }
if (typeof stash.feature.pullRequest.overview.plugins == 'undefined') { stash.feature.pullRequest.overview.plugins = {}; }


stash.feature.pullRequest.overview.plugins.learnMore = function(opt_data, opt_ignored) {
  return '' + stash.widget.summaryPanel.linkWebPanel({extraClasses: 'learn-more', iconClass: 'aui-iconfont-help', linkHref: 'http:\/\/docs.atlassian.com\/stash\/docs-0311\/Using+pull+requests+in+Stash', linkExtraAttributes: {target: '_blank'}, linkContent: '' + soy.$$escapeHtml("Learn more")});
};
if (goog.DEBUG) {
  stash.feature.pullRequest.overview.plugins.learnMore.soyTemplateName = 'stash.feature.pullRequest.overview.plugins.learnMore';
}
;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:pull-request-overview', location = '/static/feature/pull-request/overview/pull-request-view-overview.soy' */
// This file was automatically generated from pull-request-view-overview.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace stash.page.pullRequest.
 */

if (typeof stash == 'undefined') { var stash = {}; }
if (typeof stash.page == 'undefined') { stash.page = {}; }
if (typeof stash.page.pullRequest == 'undefined') { stash.page.pullRequest = {}; }


stash.page.pullRequest.viewOverview = function(opt_data, opt_ignored) {
  return stash.page.pullRequest.overviewMetadata(opt_data) + '<h3>' + soy.$$escapeHtml("Activity") + '</h3>' + stash.feature.pullRequest.activity({id: 'pull-request-activity', currentUser: opt_data.currentUser, commentTips: opt_data.commentTips});
};
if (goog.DEBUG) {
  stash.page.pullRequest.viewOverview.soyTemplateName = 'stash.page.pullRequest.viewOverview';
}


stash.page.pullRequest.pullRequestSummary = function(opt_data, opt_ignored) {
  return '' + soy.$$filterNoAutoescape(AJS.format("{0} created a pull request",opt_data.authorNameContent));
};
if (goog.DEBUG) {
  stash.page.pullRequest.pullRequestSummary.soyTemplateName = 'stash.page.pullRequest.pullRequestSummary';
}


stash.page.pullRequest.overviewMetadata = function(opt_data, opt_ignored) {
  var param15 = '' + widget.aui.group.item({content: '<h3>' + soy.$$escapeHtml("Details") + '</h3>' + widget.aui.group.group({extraClasses: 'details', content: '' + widget.aui.group.item({extraClasses: 'author-avatar-item', content: '' + stash.widget.avatar({person: opt_data.author, size: 'medium'})}) + widget.aui.group.item({content: '<p>' + stash.page.pullRequest.pullRequestSummary({authorNameContent: '' + stash.widget.userLink({user: opt_data.author, extraClasses: 'author'})}) + stash.widget.date.shortAge({extraClasses: 'creation-date', date: opt_data.createdDate}) + '</p>' + ((opt_data.descriptionAsHtml) ? '<div class="description markup">' + soy.$$filterNoAutoescape(opt_data.descriptionAsHtml) + '</div>' : (opt_data.description) ? '<p class="description">' + soy.$$escapeHtml(opt_data.description) + '</p>' : '<p class="description no-description">' + soy.$$escapeHtml("No description for this pull request.") + ' <a class="add-description">' + soy.$$escapeHtml("Add one") + '</a></p>')})})});
  var param59 = '<div class="plugin-section-primary">';
  var panelHtmlList61 = WebFragments.getWebPanels('stash.pull-request.related-entities',{pullRequest: opt_data.pullRequest}).map(function(webPanel) { return soydata.VERY_UNSAFE.ordainSanitizedHtml(webPanel); });
  var panelHtmlListLen61 = panelHtmlList61.length;
  for (var panelHtmlIndex61 = 0; panelHtmlIndex61 < panelHtmlListLen61; panelHtmlIndex61++) {
    var panelHtmlData61 = panelHtmlList61[panelHtmlIndex61];
    param59 += soy.$$escapeHtml(panelHtmlData61);
  }
  param59 += '<div class="plugin-section-separator"></div></div><div class="plugin-section-secondary">';
  var panelHtmlList65 = WebFragments.getWebPanels('stash.pull-request.links',{pullRequest: opt_data.pullRequest}).map(function(webPanel) { return soydata.VERY_UNSAFE.ordainSanitizedHtml(webPanel); });
  var panelHtmlListLen65 = panelHtmlList65.length;
  for (var panelHtmlIndex65 = 0; panelHtmlIndex65 < panelHtmlListLen65; panelHtmlIndex65++) {
    var panelHtmlData65 = panelHtmlList65[panelHtmlIndex65];
    param59 += soy.$$escapeHtml(panelHtmlData65);
  }
  param59 += '</div>';
  var sectionList69 = WebFragments.getWebSections('stash.pull-request.overview.sections',{pullRequest: opt_data.pullRequest});
  var sectionListLen69 = sectionList69.length;
  for (var sectionIndex69 = 0; sectionIndex69 < sectionListLen69; sectionIndex69++) {
    var sectionData69 = sectionList69[sectionIndex69];
    param59 += '<div class="' + soy.$$escapeHtml(sectionData69.key) + '">' + ((sectionData69.labelText) ? '<h4>' + soy.$$escapeHtml(sectionData69.labelText) + '</h4>' : '');
    var panelHtmlList78 = WebFragments.getWebPanels(sectionData69.location + '/' + sectionData69.key,{pullRequest: opt_data.pullRequest}).map(function(webPanel) { return soydata.VERY_UNSAFE.ordainSanitizedHtml(webPanel); });
    var panelHtmlListLen78 = panelHtmlList78.length;
    for (var panelHtmlIndex78 = 0; panelHtmlIndex78 < panelHtmlListLen78; panelHtmlIndex78++) {
      var panelHtmlData78 = panelHtmlList78[panelHtmlIndex78];
      param59 += soy.$$escapeHtml(panelHtmlData78);
    }
    param59 += '</div>';
  }
  param15 += widget.aui.group.item({extraClasses: 'summary-panel', content: param59});
  var output = '' + widget.aui.group.group({content: param15});
  return output;
};
if (goog.DEBUG) {
  stash.page.pullRequest.overviewMetadata.soyTemplateName = 'stash.page.pullRequest.overviewMetadata';
}
;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:repository-item', location = '/static/feature/repository/repository-item/repository-item.soy' */
// This file was automatically generated from repository-item.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace stash.feature.repository.
 */

if (typeof stash == 'undefined') { var stash = {}; }
if (typeof stash.feature == 'undefined') { stash.feature = {}; }
if (typeof stash.feature.repository == 'undefined') { stash.feature.repository = {}; }


stash.feature.repository.repositoryItem = function(opt_data, opt_ignored) {
  return '<span class="repository-item" title="' + soy.$$escapeHtml(opt_data.repository.project.name) + ' / ' + soy.$$escapeHtml(opt_data.repository.name) + '" data-id="' + soy.$$escapeHtml(opt_data.repository.id) + '" data-repository="' + soy.$$escapeHtml(JSON.stringify(opt_data.repository).replace(/\//g, '\\/')) + '">' + stash.feature.repository.repositoryItemContent({avatarTagName: 'span', repository: opt_data.repository}) + '</span>';
};
if (goog.DEBUG) {
  stash.feature.repository.repositoryItem.soyTemplateName = 'stash.feature.repository.repositoryItem';
}


stash.feature.repository.repositoryItemContent = function(opt_data, opt_ignored) {
  return stash.feature.project.avatar({size: 'xsmall', project: opt_data.repository.project, tagName: opt_data.avatarTagName}) + '<span class="project-and-repository"><span class="project-name">' + ((opt_data.projectNameContent) ? soy.$$filterNoAutoescape(opt_data.projectNameContent) : soy.$$escapeHtml(opt_data.repository.project.name)) + '</span><span class="separator">/</span><span class="name">' + ((opt_data.repositoryNameContent) ? soy.$$filterNoAutoescape(opt_data.repositoryNameContent) : soy.$$escapeHtml(opt_data.repository.name)) + '</span></span>';
};
if (goog.DEBUG) {
  stash.feature.repository.repositoryItemContent.soyTemplateName = 'stash.feature.repository.repositoryItemContent';
}
;
;/* module-key = 'com.atlassian.stash.stash-bower-components-plugin:atlassian-regexp', location = '/static/bower/atlassian-regexp/lib/internal/util/regexp.js' */
define("internal/util/regexp",["exports"],function(a){a.escape=function(a){return a.replace(/[\-\[\]{}()+?.,\\\^$|#\s]/g,"\\$\x26")}});;
;/* module-key = 'com.atlassian.stash.stash-bower-components-plugin:atlassian-highlight-text', location = '/static/bower/atlassian-highlight-text/lib/internal/util/highlight-text.js' */
define("internal/util/highlight-text",["internal/util/regexp"],function(g){var d=/[&"'<>`]/g,e=function(b){var a={"\x3c":"\x26lt;","\x3e":"\x26gt;","\x26":"\x26amp;","'":"\x26#39;","`":"\x26#96;"};return a.hasOwnProperty(b)?a[b]:"\x26quot;"},f=function(b){return g.escape(b.replace(d,e))};return{highlight:function(b,a,c){if(!a||0===a.length)return b.replace(d,e);a="string"===typeof a?f(a):a.map(f).join("|");c=new RegExp(a,null==c?"gi":c);return b.replace(d,e).replace(c,"\x3cmark\x3e$\x26\x3c/mark\x3e")}}});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:highlight-text-util', location = '/static/util/highlight-text.js' */
define("util/highlight-text",["internal/util/highlight-text"],function(a){return a});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:repository-menu-items', location = '/static/feature/repository/menu-items/repository-menu-items.soy' */
// This file was automatically generated from repository-menu-items.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace stash.feature.repository.
 */

if (typeof stash == 'undefined') { var stash = {}; }
if (typeof stash.feature == 'undefined') { stash.feature = {}; }
if (typeof stash.feature.repository == 'undefined') { stash.feature.repository = {}; }


stash.feature.repository.menuItems = function(opt_data, opt_ignored) {
  var output = '';
  var repoList3 = opt_data.repos;
  var repoListLen3 = repoList3.length;
  for (var repoIndex3 = 0; repoIndex3 < repoListLen3; repoIndex3++) {
    var repoData3 = repoList3[repoIndex3];
    output += '<li class="repository-item repository-menu-item' + ((opt_data.extraClasses) ? ' ' + soy.$$escapeHtml(opt_data.extraClasses) : '') + '"><a data-proj-key="' + soy.$$escapeHtml(repoData3.project.key) + '" data-repo-slug="' + soy.$$escapeHtml(repoData3.slug) + '" data-repo-id="' + soy.$$escapeHtml(repoData3.id) + '" href="' + soy.$$escapeHtml(require('stash/api/util/navbuilder').project(repoData3.project.key).repo(repoData3.slug).browse().build()) + '" title="' + soy.$$escapeHtml(AJS.format("Go to repository \x22{0}\x22 in project \x22{1}\x22",repoData3.name,repoData3.project.name)) + '">' + stash.feature.repository.repositoryItemContent({repository: repoData3, projectNameContent: require('util/highlight-text').highlight(repoData3.project.name, opt_data.projectHighlightText, 'i'), repositoryNameContent: require('util/highlight-text').highlight(repoData3.name, opt_data.repositoryHighlightText, 'i')}) + '</a></li>';
  }
  return output;
};
if (goog.DEBUG) {
  stash.feature.repository.menuItems.soyTemplateName = 'stash.feature.repository.menuItems';
}
;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:repository-search', location = '/static/feature/repository/repository-search/repository-search.soy' */
// This file was automatically generated from repository-search.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace stash.feature.repository.
 */

if (typeof stash == 'undefined') { var stash = {}; }
if (typeof stash.feature == 'undefined') { stash.feature = {}; }
if (typeof stash.feature.repository == 'undefined') { stash.feature.repository = {}; }


stash.feature.repository.repositorySearch = function(opt_data, opt_ignored) {
  return '<form class="aui-quicksearch"><div class="repository-search-trigger"><label class="assistive" for="repository-search">' + soy.$$escapeHtml("Find a repository...") + '</label><input id="repository-search" type="text" autocomplete="off" placeholder="' + soy.$$escapeHtml("Find a repository...") + '"/><div class="spinner"></div></div></form>';
};
if (goog.DEBUG) {
  stash.feature.repository.repositorySearch.soyTemplateName = 'stash.feature.repository.repositorySearch';
}


stash.feature.repository.repositorySearchResults = function(opt_data, opt_ignored) {
  return '' + ((! (opt_data.isPreload && opt_data.size == 0)) ? '<div class="results-section' + ((opt_data.isPreload) ? ' recently-viewed' : '') + '">' + stash.feature.repository.menuItems({repos: opt_data.values, extraClasses: 'result', projectHighlightText: opt_data.projectSearchTerm, repositoryHighlightText: opt_data.repositorySearchTerm}) + ((opt_data.isLastPage) ? (opt_data.size > 0) ? '<li class="no-results">' + soy.$$escapeHtml(opt_data.noMoreResultsText) + '</li>' : '<li class="no-results">' + soy.$$escapeHtml(opt_data.noResultsText) + '</li>' : '') + '</div>' : '');
};
if (goog.DEBUG) {
  stash.feature.repository.repositorySearchResults.soyTemplateName = 'stash.feature.repository.repositorySearchResults';
}
;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:repository-search', location = '/static/feature/repository/repository-search/repository-search.js' */
define("feature/repository/repository-search","aui jquery lodash xregexp stash/api/util/navbuilder util/events util/shortcuts widget/searchable-selector".split(" "),function(g,d,h,l,n,k,p,m){var f=null;k.on("stash.feature.repositories.recent.loaded",function(a){f=a});var e=function(a,b,c){c=c||{};c.externalSearchField=a;b=this.init(b,c);b._bindSearchFieldEvents();b.dialog.on("click","a",function(){k.trigger("internal.stash.ui.nav.search.result.clicked",null,{repositoryId:d(this).attr("data-repo-id")})});
p.bind("focusRepositorySearch",h.ary(d.fn.focus.bind(d(a)),0));return b};d.extend(e.prototype,m.prototype);e.prototype._generatePreloadData=function(){if(null==f)return null;var a,b=this._parseSearchTerm(this._getSearchTerm());if(b){var c=b.projectName&&new RegExp("^"+l.escape(b.projectName),"i"),d=b.repositoryName&&new RegExp("^"+l.escape(b.repositoryName),"i");a=h.filter(f.values,function(a){return(null==b.projectName||null!=a.project.name.match(c))&&(null==b.repositoryName||null!=a.name.match(d))})}else a=
f.values;a.sort(function(a,c){return(b&&b.projectName?a.project.name.localeCompare(c.project.name):0)||a.name.localeCompare(c.name)||a.id-c.id});return h.extend({},f,{values:a,size:a.length,isLastPage:!1})};e.prototype.defaults=d.extend({},m.prototype.defaults,{extraClasses:"repository-search-dialog",url:n.rest().allRepos().withParams({avatarSize:stash.widget.avatarSizeInPx({size:"xsmall"})}).build(),queryParamsBuilder:function(a,b,c){a=this._parseSearchTerm(a);return null==a?null:{start:b,limit:c,
name:a.repositoryName,projectname:a.projectName}},dataTransform:function(a,b){var c=this._parseSearchTerm(b);return null==c?a:d.extend({repositorySearchTerm:c.repositoryName,projectSearchTerm:c.projectName},a)},preloadData:e.prototype._generatePreloadData,alwaysShowPreload:!0,followLinks:!0,resultsTemplate:stash.feature.repository.repositorySearchResults,noResultsText:"No repositories matching your search",noMoreResultsText:"No more repositories",
adjacentItems:!1,clearResultsOnSearch:!1,popUpOffsetY:1,paginationContext:"repository-search"});e.prototype._bindSearchFieldEvents=function(){var a=this;this.$searchField.on("keydown.repository-search",function(a){a.which===g.keyCode.ENTER&&a.preventDefault()});this.$searchField.on("keyup.repository-search",function(b){a.dialog.is(":visible")||b.which!==g.keyCode.ESCAPE||d(this).blur()});this.$searchField.on("focus",function(){k.trigger("internal.stash.ui.nav.search.focused")})};e.prototype._parseSearchTerm=
function(a){a=d.trim(a);if(""===a||"/"===a)return null;var b={},c=a.lastIndexOf("/");-1===c?(b.projectName=null,b.repositoryName=a):(b.projectName=d.trim(a.substr(0,c)),b.repositoryName=d.trim(a.substr(c+1)));return b};e.prototype._showSpinner=function(a){a.$scrollElement.find(".spinner").hide();this.$searchField.closest(".aui-quicksearch").addClass("loading");this.$searchField.next(".spinner").spin()};e.prototype._hideSpinner=function(){this.$searchField.closest(".aui-quicksearch").removeClass("loading");
this.$searchField.next(".spinner").spinStop()};return e});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:base-layout', location = '/static/layout/base/base.js' */
define("layout/base","aui jquery lodash memoir stash/api/util/navbuilder util/analytics util/client-storage util/events model/page-state model/stash-user widget/aui/dropdown widget/aui/form feature/repository/repository-search exports".split(" "),function(l,d,g,m,h,n,f,b,p,q,r,t,u,v){function w(a){a&&(a.isAdmin=!!d("#header").find("a.admin-link").length,p.setCurrentUser(new q(a)))}function x(a){f.getSessionItem(a)||(f.setSessionItem(a,!0),n.add("demographics",{d_lang:document.documentElement.lang},
!0))}if(location.search){var k=h.parse(location.href).getQueryParamValue("eve");k&&b.on(k,function(){console.log([b.name()],this,arguments)})}v.onReady=function(a,y){w(a);r.onReady();t.onReady();l.params["build-number"]=encodeURIComponent(d("#product-version").attr("data-system-build-number"));var c=d(window),e=g.debounce(function(){b.trigger("window.resize.debounced",c,c.width(),c.height())},200);c.on("resize",e);e=g.throttle(function(){b.trigger("window.scroll.throttled",c,c.scrollTop())},25);c.on("scroll",
e);e=d("#repository-search");new u(e,e.closest(".repository-search-trigger"));m.setTitleSuffix(" - "+y);x(f.buildKey("demographic-analytics","user"))};b.on("memoir.changestate",function(a){var b=d("#login-link");b.length&&a.state&&b.attr("href",h.login().next().build());d("body").children(".tipsy").remove()})});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:quick-copy-text', location = '/static/widget/quick-copy-text.js' */
define("widget/quick-copy-text",["jquery","exports"],function(b,c){var a=!0;c.onReady=function(){a&&(a=!1,b(document).on("click",".quick-copy-text",function(a){this.focus();this.select()}))}});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:browser-location', location = '/static/util/browser-location.js' */
define("util/browser-location",["exports"],function(a){a.location=window.location});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:sticky-branches', location = '/static/feature/repository/sticky-branches.js' */
define("feature/repository/sticky-branches","jquery lodash stash/api/util/navbuilder util/browser-location util/client-storage util/events exports".split(" "),function(m,t,b,u,d,r,v){function n(a){a?(a=encodeURIComponent(a),h.attr("href",b.parse(h.attr("href")).replaceQueryParam("at",a)),k.attr("href",b.parse(k.attr("href")).replaceQueryParam("until",a)),l.attr("href",b.parse(l.attr("href")).replaceQueryParam("base",a))):p()}function p(){h.attr("href",b.parse(h.attr("href")).deleteQueryParam("at"));
k.attr("href",b.parse(k.attr("href")).deleteQueryParam("until"));l.attr("href",b.parse(l.attr("href")).deleteQueryParam("base"))}var h,k,l;v.onReady=function(){var a=b.parse(u.location.href),c=b.currentRepo().browse().build(),g=b.currentRepo().commits().build(),c=0===a.path().indexOf(c),g=a.path()===g,a=c?a.getQueryParamValue("at"):g?a.getQueryParamValue("until"):void 0,g=c||g,f=d.buildKey("current-branch","repo"),q=d.getSessionItem(f);h=m("#repository-nav-files");k=m("#repository-nav-commits");l=
m("#repository-nav-branches");var e;a&&c&&(e=(e=m("[data-revision-ref]","#repository-layout-revision-selector").data("revision-ref"))&&(e.id===a&&"commit"===e.type.id||e.id!==a&&("branch"===e.type.id||"tag"===e.type.id)&&/^[0-9a-f]{7,40}$/.test(a)));c=!(c&&e);a&&c?(a=decodeURIComponent(a),a!==q&&d.setSessionItem(f,a),n(a)):g&&c?d.removeSessionItem(f):q&&n(q);r.on("stash.layout.branch.revisionRefChanged",function(a){a&&(a.getIsDefault()?(p(),d.removeSessionItem(f)):(a=a.getId(),n(a),d.setSessionItem(f,
a)))});r.on("stash.*.*.revisionRefRemoved",function(a){var b=d.getSessionItem(f);b&&t.endsWith(a.id,b)&&(p(),d.removeSessionItem(f))})}});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:repository-public-lozenge', location = '/static/feature/repository/public-lozenge/public-lozenge.soy' */
// This file was automatically generated from public-lozenge.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace stash.feature.repository.
 */

if (typeof stash == 'undefined') { var stash = {}; }
if (typeof stash.feature == 'undefined') { stash.feature = {}; }
if (typeof stash.feature.repository == 'undefined') { stash.feature.repository = {}; }


stash.feature.repository.publicLozenge = function(opt_data, opt_ignored) {
  return '' + ((true && (opt_data.repository['public'] || opt_data.repository.project['public'])) ? '<div class="public-lozenge aui-lozenge aui-lozenge-subtle">' + soy.$$escapeHtml("Public") + '</div>' : '');
};
if (goog.DEBUG) {
  stash.feature.repository.publicLozenge.soyTemplateName = 'stash.feature.repository.publicLozenge';
}
;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:sidebar', location = '/static/widget/sidebar/sidebar.js' */
define("widget/sidebar","aui chaperone jquery util/client-storage util/events exports".split(" "),function(h,d,f,c,e,k){function l(){var a=!!c.getItem("sidebar_expanded");b.on("expand",function(){a=!0});b.on("collapse",function(){a=!1});d.registerFeature("sidebar",[{id:"sidebar-discovery",selector:".aui-sidebar[aria-expanded\x3dfalse] .aui-page-header, .aui-sidebar[aria-expanded\x3dtrue] .aui-sidebar-group:first-child",title:"Improvements to navigation in Stash",content:stash.widget.sidebar.discoveryContent(),
moreInfo:{href:"http://go.atlassian.com/stashsidebar"},gravity:"w",width:350,offsetX:function(){return a?-10:10},once:!0}]);b.on("expand",d.checkFeatureAlignment);b.on("collapse",d.checkFeatureAlignment);b.on("expand-end",d.checkFeatureAlignment);b.on("collapse-end",d.checkFeatureAlignment)}function m(){b.$el.on("mouseenter",".aui-sidebar-group-actions",function(a){c.getItem("sidebar_expanded")||e.trigger("internal.stash.ui.sidebar.actions-menu.open")});b.$el.find(".aui-sidebar-group-actions ul").on("click",
"\x3e li \x3e a[data-web-item-key]",function(){e.trigger("internal.stash.ui.sidebar.actions-menu.item.clicked",null,{isCollapsed:!c.getItem("sidebar_expanded"),webItemId:f(this).attr("data-web-item-key")})});b.$el.find(".sidebar-navigation ul").on("click","\x3e li \x3e a[data-web-item-key]",function(){var a=f(this),b=!c.getItem("sidebar_expanded"),d=a.parentsUntil(".aui-sidebar-group").filter("ul").length;e.trigger("internal.stash.ui.sidebar.item.clicked",null,{webItemId:a.attr("data-web-item-key"),
isCollapsed:b,level:d})});b.$el.find(".sidebar-settings-group").on("click","a",function(){e.trigger("internal.stash.ui.sidebar.settings.clicked",null,{webItemId:f(this).attr("data-web-item-key")})});b.$el.on("click",".aui-sidebar-toggle",function(a){g("button")});b.$el.on("click",".aui-sidebar-body",function(a){f(a.target).is(".aui-sidebar-body")&&g("sidebar")});h.whenIType("[").execute(function(){g("keyboard-shortcut")});b.on("expand-end collapse-end",function(a){a.isResponsive&&g("resize")})}function g(a){e.trigger("internal.stash.ui.sidebar.collapse.change",
null,{source:a,isCollapsed:!c.getItem("sidebar_expanded"),windowWidth:window.innerWidth})}var b;k.preload=function(){var a=!c.getItem("sidebar_expanded");f(document.body).toggleClass("aui-sidebar-collapsed",a);f(".aui-sidebar").attr("aria-expanded",!a)};k.onReady=function(){b=h.sidebar(".aui-sidebar");b.on("collapse-end",function(a){a.isResponsive||c.setItem("sidebar_expanded",!1);e.trigger("stash.feature.sidebar.collapseEnd")});b.on("expand-end",function(a){a.isResponsive||c.setItem("sidebar_expanded",
!0);e.trigger("stash.feature.sidebar.expandEnd")});l();m()}});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:sidebar', location = '/static/widget/sidebar/sidebar.soy' */
// This file was automatically generated from sidebar.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace stash.widget.sidebar.
 */

if (typeof stash == 'undefined') { var stash = {}; }
if (typeof stash.widget == 'undefined') { stash.widget = {}; }
if (typeof stash.widget.sidebar == 'undefined') { stash.widget.sidebar = {}; }


stash.widget.sidebar.discoveryContent = function(opt_data, opt_ignored) {
  return '<ul><li>' + soy.$$escapeHtml("Actions and navigation in one place") + '</li><li>' + soy.$$escapeHtml("Always visible for faster access") + '</li><li>' + soy.$$filterNoAutoescape(AJS.format("Collapse the sidebar with {0}[{1} when you need more space",'<kbd>','</kbd>')) + '</li></ul>';
};
if (goog.DEBUG) {
  stash.widget.sidebar.discoveryContent.soyTemplateName = 'stash.widget.sidebar.discoveryContent';
}
;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:repository-layout', location = '/static/layout/repository/repository.js' */
define("layout/repository","aui jquery lodash stash/api/util/navbuilder util/events model/page-state model/repository widget/quick-copy-text widget/sidebar feature/repository/sticky-branches exports".split(" "),function(l,b,p,r,k,q,t,u,v,w,x){function y(c){c=new t(c);q.setRepository(c);q.setProject(c.getProject());b(".aui-page-header-image \x3e a").on("click",function(){k.trigger("stash.sidebar.clickAvatar.expanded."+b(".aui-sidebar").attr("aria-expanded"),null)})}function z(){var c=b(".clone-url"),
g=c.find("input"),a=b(".repository-protocol"),h=b("#"+a.attr("aria-controls")),e=h.find("li"),d,f,m="";a.is("button")?(n(a,a.text()),d=a.attr("data-clone-url"),f=a.attr("data-module-key")):(n(a,e.first().children("a").text()),d=e.first().attr("data-clone-url"),f=e.first().attr("data-module-key"));g.val(d);c.addClass(f);m=f;e.on("click",function(e){var d=b(this);n(a,d.text());g.val(d.attr("data-clone-url")).select();f=d.attr("data-module-key");c.removeClass(m).addClass(f);m=f;k.trigger("stash.feature.repository.clone.protocol.changed",
null,f,d.attr("data-clone-url"));e.stopPropagation();h.is(":visible")&&a.trigger("aui-button-invoke");e.preventDefault()});k.trigger("stash.feature.repository.clone.protocol.initial",null,f,d)}function n(b,g){var a=b.children("span").remove();b.text(g).append(a)}function A(c,g){var a=b(g),h=null,e=null,d=l.InlineDialog(null,"clone-repo-dialog",function(b,c,d){b.append(a);d();p.defer(function(){p.defer(function(){a.find(".clone-url input").select()})})},{noBind:!0,width:360,gravity:"w",hideCallback:function(){var a=
b(".repository-protocol");b("#"+a.attr("aria-controls")).is(":visible")&&a.trigger("aui-button-invoke")},calculatePositions:function(){return null===h&&null===e?l.InlineDialog.opts.calculatePositions.apply(this,arguments):{gravity:"w",popupCss:h,arrowCss:e}}});b(document).on("click",c,function(a){a.preventDefault();var c=b(".aui-sidebar-submenu-dialog");0===b(a.target).closest(".aui-sidebar").length?(h=c.find(".aui-inline-dialog-contents").offset(),e={top:6,left:0}):e=h=null;d.show(a,this);c[0].hide()});
b(document).keyup(function(a){a.keyCode===l.keyCode.ESCAPE&&d.hide()});a.find("a.sourcetree-clone-button").on("click",function(){d.hide()})}function B(){var c=b(".aui-page-header-actions .create-pull-request");k.on("stash.layout.branch.revisionRefChanged",function(b){var a=r.currentRepo().createPullRequest();!b.isDefault()&&b.isBranch()&&(a=a.sourceBranch(b.getId()));c.attr("href",a.build())})}function C(){b(".aui-sidebar[aria-expanded\x3dfalse] .aui-page-header-image").tooltip({gravity:"w",delayIn:0,
live:!0,html:!0,aria:!0,className:"aui-sidebar-section-tooltip",title:function(){return b(this).find(".aui-avatar").attr("data-tooltip")}})}x.onReady=function(c,g,a){y(c);z();u.onReady();b(document).ready(v.onReady);w.onReady();A(g,a);B();b(".repository-badge .badge").tooltip({gravity:"n"});C();k.on("stash.widget.keyboard-shortcuts.register-contexts",function(a){a.enableContext("repository")})}});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:watch', location = '/static/feature/watch/watch.js' */
define("feature/watch","aui jquery lodash util/ajax util/events model/page-state".split(" "),function(e,f,h,k,l,c){function a(a,d,m){var b=this;this.url=d;this.$watch=a;this.isWatching=c.getIsWatching();this.watchableType=m;this.$watch.on("click",function(a,g){a.preventDefault();var d=!b.isWatching;b.toggleTrigger(d);return k.rest({url:b.url,type:b.isWatching?"DELETE":"POST",statusCode:{401:function(a,b,g,d,c){return f.extend({},c,{title:"Could not watch this.",message:"You do not have permission to watch this.",
fallbackUrl:!1,shouldReload:!0})},409:function(a,b,g,d,c){return f.extend({},c,{title:"Could not watch this.",fallbackUrl:!1,shouldReload:!0})}}}).done(function(){b.isWatching=d;c.setIsWatching(d);var a=b.isWatching?"stash.web.watch-button.added":"stash.web.watch-button.removed",e=f.extend({watched:b.isWatching},g);l.trigger(a,b,e)}).fail(function(){b.toggleTrigger(b.isWatching)})});h.bindAll(this,"toggleWatch","toggleUnwatch","toggleTrigger")}a.prototype.setIsWatching=
function(a){this.toggleTrigger(a);this.isWatching=a;c.getIsWatching()!==a&&c.setIsWatching(a)};a.prototype.toggleWatch=function(){this.toggleTrigger(!0)};a.prototype.toggleUnwatch=function(){this.toggleTrigger(!1)};a.prototype.toggleTrigger=function(c){var d;switch(this.watchableType){case a.type.COMMIT:d=stash.feature.watch.commitLabel({isWatching:c});break;case a.type.PULL_REQUEST:d=stash.feature.watch.pullRequestLabel({isWatching:c})}this.$watch.fadeOut(200,function(){f(this).html(d).fadeIn(200)})};
a.prototype.destroy=function(){this.isWatching=this.$watch=this.url=null};a.type={COMMIT:"commit",PULL_REQUEST:"pull-request"};return a});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:watch', location = '/static/feature/watch/watch.soy' */
// This file was automatically generated from watch.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace stash.feature.watch.
 */

if (typeof stash == 'undefined') { var stash = {}; }
if (typeof stash.feature == 'undefined') { stash.feature = {}; }
if (typeof stash.feature.watch == 'undefined') { stash.feature.watch = {}; }


stash.feature.watch.summaryPanel = function(opt_data, opt_ignored) {
  return '' + stash.widget.summaryPanel.linkWebPanel({extraClasses: 'watch', iconClass: 'aui-iconfont-unwatch', linkContent: '' + ((opt_data.type == 'commit') ? stash.feature.watch.commitLabel(opt_data) : stash.feature.watch.pullRequestLabel(opt_data))});
};
if (goog.DEBUG) {
  stash.feature.watch.summaryPanel.soyTemplateName = 'stash.feature.watch.summaryPanel';
}


stash.feature.watch.pullRequestLabel = function(opt_data, opt_ignored) {
  return '' + ((opt_data.isWatching) ? aui.icons.icon({useIconFont: true, icon: 'watch'}) + soy.$$filterNoAutoescape(AJS.format("{0}Unwatch{1} this pull request",'<strong>','</strong>')) + '</a>' : aui.icons.icon({useIconFont: true, icon: 'unwatch'}) + soy.$$filterNoAutoescape(AJS.format("{0}Watch{1} this pull request",'<strong>','</strong>')) + '</a>');
};
if (goog.DEBUG) {
  stash.feature.watch.pullRequestLabel.soyTemplateName = 'stash.feature.watch.pullRequestLabel';
}


stash.feature.watch.commitLabel = function(opt_data, opt_ignored) {
  return '' + ((opt_data.isWatching) ? aui.icons.icon({useIconFont: true, icon: 'watch'}) + soy.$$filterNoAutoescape(AJS.format("{0}Unwatch{1} this commit",'<strong>','</strong>')) + '</a>' : aui.icons.icon({useIconFont: true, icon: 'unwatch'}) + soy.$$filterNoAutoescape(AJS.format("{0}Watch{1} this commit",'<strong>','</strong>')) + '</a>');
};
if (goog.DEBUG) {
  stash.feature.watch.commitLabel.soyTemplateName = 'stash.feature.watch.commitLabel';
}
;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:pull-request-layout', location = '/static/layout/pull-request/pull-request-clientside.soy' */
// This file was automatically generated from pull-request-clientside.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace stash.layout.pullRequest.
 */

if (typeof stash == 'undefined') { var stash = {}; }
if (typeof stash.layout == 'undefined') { stash.layout = {}; }
if (typeof stash.layout.pullRequest == 'undefined') { stash.layout.pullRequest = {}; }


stash.layout.pullRequest.participantsSection = function(opt_data, opt_ignored) {
  return '<div' + ((opt_data.extraClasses) ? ' class="' + soy.$$escapeHtml(opt_data.extraClasses) + '"' : '') + ' data-overflow-menu-id="' + soy.$$escapeHtml(opt_data.participantMenuId) + '"><span class="reviewers-label"><strong>' + soy.$$escapeHtml(opt_data.participantRoles.length) + '</strong> ' + soy.$$escapeHtml(opt_data.participantRoleHeading) + '</span>' + stash.widget.avatarList.participantList({participants: opt_data.participantRoles, triggerClass: 'overflow-reviewers-trigger', menuId: opt_data.participantMenuId, menuClass: 'overflow-reviewers', maxOpen: 5}) + '</div>';
};
if (goog.DEBUG) {
  stash.layout.pullRequest.participantsSection.soyTemplateName = 'stash.layout.pullRequest.participantsSection';
}
;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:pull-request-layout', location = '/static/layout/pull-request/pull-request.js' */
define("layout/pull-request","aui aui/flag jquery lodash memoir stash/api/util/events stash/api/util/navbuilder util/ajax util/dom-event util/events util/feature-loader util/horizontal-keyboard-scrolling util/shortcuts model/page-state model/participant model/pull-request model/stash-user widget/approve widget/avatar-list widget/confirm-dialog widget/submit-spinner feature/pull-request-edit feature/pull-request/can-merge feature/pull-request/merge-help exports".split(" "),function(g,I,e,u,v,J,q,A,
K,d,D,E,B,l,L,M,N,O,P,Q,R,S,T,U,F){function y(b,c){var a=q.rest().currentPullRequest()[b]();c&&(a=a.withParams({version:l.getPullRequest().getVersion()}));return a.build()}function V(b){if(b.length){var c={dialog:{person:l.getCurrentUser()&&l.getCurrentUser().toJSON(),pullRequest:h.toJSON()},ajax:{statusCode:{400:function(){return!1},401:function(a,b,c,k,d){return e.extend({},d,{title:"Could not merge pull request",message:"You no longer have permission to merge this pull request.",
fallbackUrl:!1,shouldReload:!0})},409:function(a,b,c,k,e){if((a=k.errors&&k.errors.length&&k.errors[0])&&(a.conflicted||a.vetoes&&a.vetoes.length))return d.trigger("stash.pull-request.cant.merge",null,h,a.conflicted,a.vetoes),d.trigger("stash.pull-request.show.cant.merge.help"),!1}}}};W(b,c);e(document).ready(function(){X(b)})}}function Y(b){b.length&&(b="\x3cp class\x3d'decline-message'\x3e"+"Are you sure you want to decline this pull request? This will close the pull request without merging."+"\x3c/p\x3e",b={buttonSelector:".decline-pull-request",
confirmDialog:{titleText:"Decline Pull Request",panelContent:b,submitText:"Decline"},confirmEvent:"stash.feature.pullRequest.declined",ajax:{statusCode:{401:function(b,a,f,d,k){return e.extend({},k,{title:"Could not decline pull request",message:"You no longer have permission to decline this pull request.",fallbackUrl:!1,shouldReload:!0})}}}},Z("decline",b))}function aa(b){b.preventDefault();
w.hasClass("disabled")||(w.addClass("disabled"),C.show().spin("small"),A.rest({url:y(b.data.action,!0),type:"POST"}).done(function(){window.location.reload()}).fail(function(){w.removeClass("disabled");C.spinStop().hide()}))}function Z(b,c){var a=new Q(e.extend({id:"pull-request-"+b+"-dialog",submitToHref:!1,resizeOnShow:!0,width:650,height:200},c.confirmDialog)),f,n;a.addConfirmListener(function(k,m,g,h,l){a.setButtonsDisabled(!0);l.show();k=f=A.rest(e.extend({url:y(b,!0),type:"POST"},c.ajax));n&&
(m=n(f,m,g,h,l))&&(k=m);k.done(function(){c.confirmEvent&&d.trigger(c.confirmEvent);window.location=q.currentPullRequest().build()}).fail(function(){g()}).always(function(){f=null})});a.addCancelListener(function(a){f&&f.abort()});a.setPromiseDecorator=function(a){n=a};a.attachTo(c.buttonSelector,c.onShow);return a}function W(b,c){var a=g.dialog2(stash.feature.pullRequest.merge.dialog(c.dialog));e("body").append(a.$el);b.on("click",function(){a.show();r(a);a.$el.find(".confirm-button").focus()});
var f,n;a.$el.find(".confirm-button").on("click",function(){var b=new R(this,"before");G(a,!0);b.show();var m=f=A.rest(e.extend({url:y("merge",!0),type:"POST",data:{message:a.$el.find("#commit-message").val()}},c.ajax));f.fail(function(c,f,d,e){400===c.status?(c=a.$el.find(".aui-dialog2-content"),e.errors&&(c.children(".aui-message").remove(),c.prepend(stash.feature.pullRequest.merge.errors({errors:e.errors}))),b.hide(),G(a,!1)):a.hide()}).always(function(){f=null});if(!n)try{n=require("pullRequest/branchDeletion").getMergePromiseDecorator}catch(g){}if(n){var h=
n(m,function(){a.hide()});h&&(m=h)}m.done(function(){d.trigger("stash.feature.pullRequest.merged");window.location=q.currentPullRequest().build()})});a.$el.find(".cancel-button").on("click",function(){f&&(f.abort(),f=null);r(a);a.hide()});a.$el.find(".commit-message").on("focus",ba);a.$el.find(".cancel-commit-message-link").click(function(b){b.preventDefault();r(a)});a.on("hide",function(){r(a)});return a}function ca(){d.on("stash.widget.keyboard-shortcuts.register-contexts",function(b){b.enableContext("pull-request");
H.resolve(b)});d.on("stash.keyboard.shortcuts.requestGotoPullRequestsListHandler",function(b){(this.execute?this:g.whenIType(b)).execute(function(){window.location.href=q.currentRepo().allPullRequests().build()})});d.on("stash.keyboard.shortcuts.requestChangePullRequestSectionHandler",function(b){(this.execute?this:g.whenIType(b)).execute(function(b){b=parseInt(String.fromCharCode(b.which),10);b=x.children().eq(b-1).children("a");v.nativeSupport()?b.click():window.location.href=b.prop("href")})})}
function G(b,c){b.$el.find(".aui-dialog2-footer-actions .aui-button").each(function(){var a=e(this);a.prop("disabled",c).toggleClass("disabled",c);c?a.attr("aria-disabled","true"):a.removeAttr("aria-disabled")})}function X(b){var c;d.on("stash.pull-request.cant.merge",function(a,f,n){c||(b.attr("aria-disabled","true").attr("disabled","disabled").attr("title","This pull request can\u0027t be merged automatically."),c=e(stash.feature.pullRequest.mergeDisabledIcon({conflicted:f,vetoes:n})).insertBefore(b).tooltip({delayOut:200,
gravity:"n",html:!0,hoverable:!0,offset:7}).on("click",function(a){a.preventDefault();e(".tipsy").hide();d.trigger("stash.pull-request.show.cant.merge.help")}))});d.on("stash.pull-request.can.merge",function(){c&&(b.attr("aria-disabled","false").removeAttr("disabled").removeAttr("title"),c.remove(),c=null)});T(h)}function ba(){e(this).closest(".commit-message-form").removeClass("collapsed")}function r(b){b.$el.find(".commit-message").val("");b.$el.find(".commit-message-form").addClass("collapsed")}
function da(){function b(b){b.addClass("active-tab").siblings().removeClass("active-tab")}H.done(function(b){u.each(x.children(),function(a,f){var d=e(a),k=String(f+1),m=g.format("Switch to the {0} tab",d.text());b.addCustomShortcut("pull-request",[[k]],m);d.attr("title",(d.attr("title")||m)+g.format(" (type \u0027\u0027{0}\u0027\u0027)",k))})});v.nativeSupport()&&(x.on("click","a",function(c){if(K.openInSameTab(c)){var a=e(this),f=a.parent();f.is(".active-tab")||
(b(f),d.trigger("stash.layout.pull-request.urlRequested",null,a.prop("href")));c.preventDefault()}}),d.on("stash.page.pull-request.view.contextLoaded",function(c){b(x.find('[data-module-key\x3d"'+c.name+'"]'));c.name===t.diff?E.resume():E.pause()}))}function ea(b){return new P(b,h.getReviewers(),{pullRequestId:h.getId()})}function fa(){function b(a){var b=new N(a.user.__json||a.user),c=h.getReviewers().findByUser(b);if(c)c.setApproved(a.approved),h.getReviewers().sort();else if(b=h.getParticipants().findByUser(b))b.setApproved(a.approved),
h.getParticipants().sort()}function c(a){var b=a.approved?"You approved this pull request":"You removed your approval of this pull request";f(b,a)}function a(a){var b=a.watched?"You are watching this pull request":"You are not watching this pull request";f(b,a)}function f(a,b){u.isMatch(b,z)&&(e&&e.close(),e=I({type:"success",title:a,close:"auto"}))}var e;d.on("stash.widget.approve-button.adding",b);d.on("stash.widget.approve-button.removing",
b);d.on("stash.widget.approve-button.add.failed",b);d.on("stash.widget.approve-button.remove.failed",b);d.on("stash.widget.approve-button.added",c);d.on("stash.widget.approve-button.removed",c);d.on("stash.web.watch-button.added",a);d.on("stash.web.watch-button.removed",a)}function ga(){function b(a){a=new L(a);return h.getReviewers().findByUser(a.getUser())||h.getParticipants().findByUser(a.getUser())?!1:(h.addParticipant(a),!0)}function c(a){a.name!==h.getAuthor().getUser().getName()&&b({approved:!1,
user:a,role:"PARTICIPANT"})}d.on("stash.widget.approve-button.adding",function(a){b({approved:a.approved,user:a.user.__json||a.user,role:"PARTICIPANT"})});d.on("stash.feature.comments.commentAdded",function(a){c(a.author)});d.on("stash.feature.pull-request-tasks.saved",function(a){c(l.getCurrentUser().toJSON())});h.getParticipants().on("add",function(a){var b=l.getCurrentUser();b&&b.getName()===a.getUser().getName()&&l.setIsWatching(!0)})}function ha(b,c){function a(a,b){var c=u.findKey(t,u.matches(b));
c&&J.trigger("stash.browser-metrics.pull-request."+c+"."+a)}p.registerHandler(t.diff,/^[^\?\#]*pull-requests\/\d+\/diff/,"page/pull-request/view/pull-request-view-diff");p.registerHandler(t.overview,/^[^\?\#]*pull-requests\/\d+\/overview/,"page/pull-request/view/pull-request-view-overview");p.registerHandler(t.commits,/^[^\?\#]*pull-requests\/\d+\/commits/,"page/pull-request/view/pull-request-view-commits");d.on("stash.page.pull-request.view.contextRequested",a.bind(null,"start"));d.on("stash.page.pull-request.view.contextLoaded",
function(b){a("end",b.name)});d.on("stash.widget.keyboard-shortcuts.register-contexts",function(a){p.setKeyboardShortcuts(a);a.enableContext("pull-request")});d.on("stash.layout.pull-request.urlRequested",function(a){a!==window.location.href&&v.pushState(null,"",a)});d.on("stash.util.feature-loader.errorOccurred",function(a){a.code===D.NO_HANDLER?console.log("You did not register a handler for this page. Please call\nrequire('layout/pull-request').registerHandler(\n   'tab-web-item-module-key',\n   /^[^\\?\\#]*url-regex/,\n   {\n       load : function (contentElement) {},\n       unload : function (contentElement) {}\n   }\n)"):
console.log(a.message)});c.done(function(a){p.init(e(b).get(0))})}var t={diff:"stash.pull-request.nav.diff",overview:"stash.pull-request.nav.overview",commits:"stash.pull-request.nav.commits"},h,w,C,x,H=e.Deferred(),z={triggeredBy:"keyboardShortcut"},p=new D({loadedEvent:"stash.page.pull-request.view.contextLoaded",unloadedEvent:"stash.page.pull-request.view.contextUnloaded",requestedEvent:"stash.page.pull-request.view.contextRequested"});F.registerHandler=e.proxy(p.registerHandler,p);F.onReady=function(b,
c,a,d,g,k,m){l.setPullRequest(new M(b));l.extend("pullRequestViewInternal",function(){return{diffTreeHeaderWebItems:d,commitsTableWebSections:g,maxChanges:k,relevantContextLines:m}});l.extend("isWatching");var p=e.Deferred();_PageDataPlugin.ready("com.atlassian.stash.stash-web-plugin:iswatching-provider","stash.internal.pull-request.view",function(a){l.setIsWatching(a.isWatching);p.resolve()});U.init();h=l.getPullRequest();b=e(".merge-pull-request");c=e(".decline-pull-request");var t=e(".reopen-pull-request"),
q=e(".approve"),r=e(".edit-pull-request"),v=new S(h);w=e(".pull-request-toolbar .aui-toolbar2-secondary");C=e("\x3cdiv class\x3d'spinner'/\x3e").prependTo(w.children(":first-child"));x=e(".content-body .aui-page-panel-content \x3e .aui-tabs \x3e .tabs-menu");B.bind("pullRequestApprove",u.ary(q.trigger.bind(q,"click",z),0));B.bind("pullRequestEdit",u.ary(r.trigger.bind(r,"click",z),0));B.bind("pullRequestWatch",function(){e(".plugin-item.watch a").trigger("click",z)});V(b);Y(c);t.click({action:"reopen"},
aa);v.bind(".edit-pull-request, .add-description");new O(q,y("approve"));ea(e(".reviewers"));ga();fa();ca();da();ha(a,p)}});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:pull-request-view-page', location = '/static/page/pull-request/view/pull-request-view-commits.js' */
define("page/pull-request/view/pull-request-view-commits",["jquery","model/page-state","feature/pull-request/pull-request-commits"],function(c,a,b){return{load:function(d){return b.init({el:d,commitsTableWebSections:a.getPullRequestViewInternal().commitsTableWebSections,pullRequest:a.getPullRequest(),repository:a.getRepository()})},unload:function(a){b.reset();c(a).empty()},keyboardShortcutContexts:["commits"]}});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:pull-request-view-page', location = '/static/page/pull-request/view/pull-request-view-overview.js' */
define("page/pull-request/view/pull-request-view-overview","jquery lib/jsuri stash/api/util/navbuilder util/events util/scroll util/syntax-highlight model/page-state feature/comments/comment-tips feature/discussion/participants-list feature/pull-request/pull-request-activity feature/watch".split(" "),function(d,z,A,h,B,C,f,p,D,q,r){function t(a){var b=d(stash.feature.pullRequest.mergeConflictBanner({extraClasses:"transparent"})).prependTo(a).find(".manual-merge").click(function(a){a.preventDefault();
h.trigger("stash.pull-request.show.cant.merge.help")}).end();setTimeout(function(){b.removeClass("transparent")},0)}function u(a){var b=f.getCurrentUser();b&&b.getName()===a.getUser().getName()&&k.setIsWatching(!0)}function v(a,b,g){if(c instanceof q){c.reset();c=null;var e=d(stash.feature.pullRequest.activity({id:"pull-request-activity",currentUser:f.getCurrentUser()&&f.getCurrentUser().toJSON(),commentTips:p.tips})).find(".pull-request-activity");w().replaceWith(e)}c=new q(w(),a,b,g,{scrollableElement:window});
c.init()}function w(){return d(e).find(".pull-request-activity")}function x(){var a=y();if(a.id&&a.type){var b;var g=a.type,c=a.id;b=d(e);g=b.find(g===E.COMMENT?'.comment[data-id\x3d"'+c+'"]':'.activity-item[data-activityid\x3d"'+c+'"]');g.length?(b.find(".comment.focused, .activity-item.focused").removeClass("focused"),g.addClass("focused"),B.scrollTo(g),b=!0):b=!1;b||v(f.getPullRequest(),a.type,a.id)}}function y(){var a=new z(window.location);return{type:a.getQueryParamValue("commentId")?"comment":
"activity",id:a.getQueryParamValue("commentId")||a.getQueryParamValue("activityId")}}var e,c,k,m,n=!1,l,E={COMMENT:"comment",ACTIVITY:"activity"};h.on("stash.pull-request.cant.merge",function(a,b,c){!n&&b&&e&&(n=!0,t(e))});return{load:function(a){e=a;var b=f.getPullRequest();a.innerHTML=stash.page.pullRequest.viewOverview({pullRequest:b.toJSON(),author:b.getAuthor().getUser().toJSON(),createdDate:b.getCreatedDate(),description:b.getDescription(),descriptionAsHtml:b.getDescriptionAsHtml(),currentUser:f.getCurrentUser()&&
f.getCurrentUser().toJSON(),commentTips:p.tips});C.container(d(a));n&&t(a);a=d(".watch a");var c=A.rest().currentPullRequest().watch().build();k=new r(a,c,r.type.PULL_REQUEST);l=b.getParticipants();l.on("add",u);m=new D(l,d("#participants-dropdown ul"),d(".participants.plugin-item"));a=y();v(b,a.type,a.id);h.on("memoir.changestate",x)},_internalActivity:function(){return c},unload:function(a){c.reset();c=null;d(a).empty();e=null;l.off("add",u);k.destroy();k=null;m.destroy();m=null;h.off("memoir.changestate",
x)},keyboardShortcutContexts:["pull-request-overview"]}});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:pull-request-view-page', location = '/static/page/pull-request/view/pull-request-view.js' */
define("page/pull-request/pull-request-view",["aui","aui/flag","model/page-state","layout/pull-request","exports"],function(b,c,d,e,a){a.registerHandler=e.registerHandler;a.onReady=function(a){a&&c({type:"success",title:b.format("Stopped watching pull request #{0}",d.getPullRequest().getId()),close:"auto",body:"Notifications for this pull request will no longer be sent to you."})}});;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:pull-request-view-page', location = '/static/page/pull-request/view/pull-request-view-diff.js' */
define("page/pull-request/view/pull-request-view-diff",["jquery","model/page-state","feature/pull-request/pull-request-diff"],function(c,a,b){return{load:function(d){d.innerHTML=stash.feature.pullRequest.diff({diffTreeHeaderWebItems:a.getPullRequestViewInternal().diffTreeHeaderWebItems});b.init(a.getPullRequest(),a.getPullRequestViewInternal().maxChanges,a.getPullRequestViewInternal().relevantContextLines)},unload:function(a){return b.reset().done(function(){c(a).empty()})},keyboardShortcutContexts:["diff-tree",
"diff-view"]}});;
;/* module-key = 'com.atlassian.stash.stash-bundled-hooks:required-approvers-pull-request-resources', location = '/views/requiredApprovers/pullRequest/required-approvers-pull-request.js' */
define("feature/required-approvers/pull-request",["util/events","model/page-state","feature/pull-request/can-merge","exports"],function(d,c,a,b){function e(f){a(c.getPullRequest())}b.onReady=function(){_PageDataPlugin.ready("com.atlassian.stash.stash-bundled-hooks:required-approvers-context-provider","stash.layout.pullRequest",function(f){if(f&&f.requiredApprovers&&f.requiredApprovers.enabled){d.on("stash.widget.approve-button.added",e);d.on("stash.widget.approve-button.removed",e)}})}});jQuery(document).ready(function(){require("feature/required-approvers/pull-request").onReady()});;
;/* module-key = 'com.atlassian.stash.stash-bundled-hooks:incomplete-tasks-merge-check-pull-request-resources', location = '/views/task/pullRequest/incomplete-tasks-merge-check.js' */
define("feature/incomplete-tasks/pull-request",["util/events","model/page-state","feature/pull-request/can-merge","exports"],function(d,c,a,b){function e(f){a(c.getPullRequest())}b.onReady=function(){_PageDataPlugin.ready("com.atlassian.stash.stash-bundled-hooks:incomplete-tasks-merge-check-context-provider","stash.layout.pullRequest",function(f){if(f&&f.incompleteTasksMergeCheck&&f.incompleteTasksMergeCheck.enabled){d.on("stash.feature.pull-request-tasks.saved",e)}})}});jQuery(document).ready(function(){require("feature/incomplete-tasks/pull-request").onReady()});;
;/* module-key = 'com.atlassian.stash.stash-jira-integration:commit-list-jira-issues', location = '/commits/commits-jira-issues.js' */
define("feature/commits/commits-jira-issues",["feature/jira/jira-issues-dialog","exports"],function(c,b){function a(e){var d=new c({id:"commits-jira-issues-dialog",triggerSelector:e})}b.onReady=function(){a(".commits-issues-trigger")}});jQuery(document).ready(function(){require("feature/commits/commits-jira-issues").onReady()});;
;/* module-key = 'com.atlassian.stash.stash-branch-utils:automerge-decorator-resources', location = '/static/automerge/decorator/automerge-decorator.js' */
define("branchUtils/automerge-decorator",["aui","jquery","lodash","stash/api/util/navbuilder","util/ajax","exports"],function(g,e,j,a,f,d){function b(k,l){return a.rest("branch-utils").project(k.getProject()).repo(k).addPathComponents("automerge","path").withParams({branchRefId:l}).build()}function h(k){return f.rest({url:b(k.getRepository(),k.getId())})}function c(n,l,p){var k=n.getFromRef();var m=n.getToRef();var o=l.addClass("pending");h(m).done(function(s){if(s.status.available){var r=s.path.slice(1);o=e(stash.feature.automerge.diagram({sourceRef:k.toJSON(),targetRef:m.toJSON(),mergePath:r}));p.replaceWith(o);var q=o.find(".automerge-path");if(r.length>2){q.addClass("collapsed").after(stash.feature.automerge.expandCascadeButton({mergePathRefCount:r.length-1}));e("#expand-automerge-path-button").on("click",function(){e(this).remove();q.removeClass("collapsed")})}}else{p.replaceWith(o.addClass("pending"));if(s.status.id==="PATH_TOO_LONG"){o.after(aui.message.warning({content:"Merging this pull request will not trigger an automatic merge because there are more than 30 newer release branches."}))}}p=null}).fail(function(s,t,q,r){p.spinStop()}).always(function(){j.defer(function(){o.removeClass("pending")})})}function i(k,m){if(k.length){var n=e('<div class="branch-diagram-spinner"></div>');var o=k.closest(".aui-layer");k.replaceWith(n);var l=j.once(function(){if(n){n.spin("large")}c(m,k,n)});if(o.is(":visible")){l()}else{g.layer(o).on("show",l)}}}d.decorateDiagram=i});;
;/* module-key = 'com.atlassian.stash.stash-branch-utils:automerge-decorator-resources', location = '/static/automerge/decorator/automerge-decorator.soy' */
// This file was automatically generated from automerge-decorator.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace stash.feature.automerge.
 */

if (typeof stash == 'undefined') { var stash = {}; }
if (typeof stash.feature == 'undefined') { stash.feature = {}; }
if (typeof stash.feature.automerge == 'undefined') { stash.feature.automerge = {}; }


stash.feature.automerge.diagram = function(opt_data, opt_ignored) {
  var param7 = '<div class="automerge-path">';
  var refList9 = opt_data.mergePath;
  var refListLen9 = refList9.length;
  for (var refIndex9 = 0; refIndex9 < refListLen9; refIndex9++) {
    var refData9 = refList9[refIndex9];
    param7 += stash.feature.repository.refLozenge({ref: refData9});
  }
  param7 += '</div><a href="' + soy.$$escapeHtml('http:\/\/docs.atlassian.com\/stash\/docs-0311\/Automatic+branch+merging') + '" title="' + soy.$$escapeHtml("Learn more about automatic merging") + '" class="automerge-help-link" target="_blank">' + soy.$$escapeHtml("Learn more") + '</a>';
  var output = '' + stash.feature.repository.branchDiagram({type: 'automerge', sourceRef: opt_data.sourceRef, targetRef: opt_data.targetRef, extraClasses: 'pending', content: param7});
  return output;
};
if (goog.DEBUG) {
  stash.feature.automerge.diagram.soyTemplateName = 'stash.feature.automerge.diagram';
}


stash.feature.automerge.expandCascadeButton = function(opt_data, opt_ignored) {
  return '' + aui.buttons.button({id: 'expand-automerge-path-button', type: 'link', text: '' + soy.$$escapeHtml(AJS.format("and {0} more branches",opt_data.mergePathRefCount))});
};
if (goog.DEBUG) {
  stash.feature.automerge.expandCascadeButton.soyTemplateName = 'stash.feature.automerge.expandCascadeButton';
}


stash.feature.automerge.autoMergeConflictInstructions = function(opt_data, opt_ignored) {
  return '<h3>' + aui.icons.icon({icon: 'warning', useIconFont: true}) + soy.$$escapeHtml("Auto-merge conflict") + '</h3><p>' + soy.$$escapeHtml("Automatic merge failed because there were conflicts. You must resolve the conflicts by merging downstream only i.e. merging the source branch into the target branch.") + '</p>' + stash.feature.pullRequest.mergeStepsForStableSourceBranch(opt_data);
};
if (goog.DEBUG) {
  stash.feature.automerge.autoMergeConflictInstructions.soyTemplateName = 'stash.feature.automerge.autoMergeConflictInstructions';
}
;
;/* module-key = 'com.atlassian.stash.stash-branch-utils:automerge-decorator-resources-onready', location = '/static/automerge/decorator/automerge-decorator-onready.js' */
require(["branchUtils/automerge-decorator","jquery","model/page-state"],function(c,b,a){b(document).ready(function(){c.decorateDiagram(b("#pull-request-merge-dialog .branch-diagram-merge"),a.getPullRequest())})});;
;/* module-key = 'com.atlassian.stash.stash-branch-utils:merge-conflict-resolution-instructions', location = '/static/merge-help/merge-help.js' */
define("branchUtils/merge-help",["jquery","lodash","stash/api/util/navbuilder","util/events"],function(c,a,d,b){function e(f,g,k){if(g&&k){if(k["branch-utils.auto-merge-conflict"]){c("#merge-help-dialog .merge-conflicted").html(stash.feature.automerge.autoMergeConflictInstructions({sourceBranch:f.getFromRef().getDisplayId(),targetBranch:f.getToRef().getDisplayId()}))}else{var n=null;var h=k["branch-utils.from-ref-stability"];if(h==="stable"){n=stash.feature.pullRequest.mergeInstructionsForStableSourceBranch}else{if(h==="unstable"){n=stash.feature.pullRequest.mergeInstructionsForUnstableSourceBranch}}if(n){var j=f.getFromRef().getRepository();var m=f.getToRef().getRepository();var i=null;var l=null;if(!j.isEqual(m)){i=d.project(j.getProject()).repo(j).clone(j.getScmId()).buildAbsolute();l=d.project(m.getProject()).repo(m).clone(m.getScmId()).buildAbsolute()}c("#merge-help-dialog .merge-conflicted").html(n({sourceBranch:f.getFromRef().getDisplayId(),targetBranch:f.getToRef().getDisplayId(),sourceRemote:i,targetRemote:l}))}}}}return{init:function(){var f;b.on("stash.pull-request.cant.merge",function(i,j,h,g){f=a.once(function(){e(i,j,g)})});b.on("stash.pull-request.show.cant.merge.help",function(){if(f){f()}})}}});;
;/* module-key = 'com.atlassian.stash.stash-branch-utils:merge-conflict-resolution-instructions', location = '/static/merge-help/merge-help-onready.js' */
require("branchUtils/merge-help").init();;
;/* module-key = 'com.atlassian.stash.stash-sourcetree-plugin:sourcetree-button-panel', location = '/static/button-panel/sourcetree-button-panel.soy' */
// This file was automatically generated from sourcetree-button-panel.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace stash.sourceTree.
 */

if (typeof stash == 'undefined') { var stash = {}; }
if (typeof stash.sourceTree == 'undefined') { stash.sourceTree = {}; }


stash.sourceTree.buttonPanel = function(opt_data, opt_ignored) {
  return '<div class="sourcetree-panel">' + stash.buttons.button({buttonText: opt_data.buttonText, id: opt_data.buttonId, extraClasses: 'sourcetree-button', href: opt_data.sourceTreeActionUrl, isPrimary: true}) + ((opt_data.minVersion) ? '<div class="min-version">' + soy.$$escapeHtml(AJS.format("Requires version {0}+",opt_data.minVersion)) + '</div>' : '') + '<p>' + soy.$$filterNoAutoescape(AJS.format("{0} is the free Git and Mercurial client for Windows or Mac.",'<a href="http://www.sourcetreeapp.com" target="_blank">Atlassian SourceTree</a>')) + '</p></div>';
};
if (goog.DEBUG) {
  stash.sourceTree.buttonPanel.soyTemplateName = 'stash.sourceTree.buttonPanel';
}
;
;/* module-key = 'com.atlassian.stash.stash-sourcetree-plugin:sourcetree-clone', location = '/static/sourcetree-clone/sourcetree-clone.js' */
define("plugin/sourcetree/sourcetree-clone",["jquery","aui","util/events","util/navbuilder","model/page-state","exports"],function(c,a,i,d,g,b){var e=navigator.platform.indexOf("Mac")!==-1;var h=function(l,m){var k=g.getCurrentUser();var j="sourcetree://cloneRepo?type=stash&baseWebUrl="+encodeURIComponent(window.location.origin+a.contextPath())+"&cloneUrl="+encodeURIComponent(m);if(k){j=j+"&user="+encodeURIComponent(k.getName())}c("#sourcetree-clone-button").attr("href",j)};var f=function(){var k=e?1.7:1.2;var j="<div class='min-version'>"+AJS.format("Requires SourceTree v{0}+",k)+"</div>";c("#sourcetree-clone-button").after(j)};b.onReady=function(){a.$(document).ready(f);i.on("stash.feature.repository.clone.protocol.changed",h);i.on("stash.feature.repository.clone.protocol.initial",h)}});require("plugin/sourcetree/sourcetree-clone").onReady();;
;/* module-key = 'com.atlassian.stash.ssh-plugin:ssh-clone-soy', location = '/views/clone/ssh-clone.soy' */
// This file was automatically generated from ssh-clone.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace stash.feature.ssh.clone.
 */

if (typeof stash == 'undefined') { var stash = {}; }
if (typeof stash.feature == 'undefined') { stash.feature = {}; }
if (typeof stash.feature.ssh == 'undefined') { stash.feature.ssh = {}; }
if (typeof stash.feature.ssh.clone == 'undefined') { stash.feature.ssh.clone = {}; }


stash.feature.ssh.clone.userAddKeyClonePrompt = function(opt_data, opt_ignored) {
  return '<div id="user-add-key-clone-prompt"><p>' + soy.$$escapeHtml("You must add an SSH key to your profile to clone this repository.") + ' ' + soy.$$escapeHtml(soydata.VERY_UNSAFE.ordainSanitizedHtml(AJS.format("\x3ca href\x3d\x22{0}\x22\x3eAdd key\x3c/a\x3e",typeof (opt_data.addKeyUrl) === 'number' ? opt_data.addKeyUrl : soy.$$escapeHtml(opt_data.addKeyUrl)))) + '</p></div>';
};
if (goog.DEBUG) {
  stash.feature.ssh.clone.userAddKeyClonePrompt.soyTemplateName = 'stash.feature.ssh.clone.userAddKeyClonePrompt';
}
;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:recent-repositories-menu-resources', location = '/static/layout/base/menu/repositories/recent.soy' */
// This file was automatically generated from recent.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace stash.layout.menu.
 */

if (typeof stash == 'undefined') { var stash = {}; }
if (typeof stash.layout == 'undefined') { stash.layout = {}; }
if (typeof stash.layout.menu == 'undefined') { stash.layout.menu = {}; }


stash.layout.menu.loadingRecentReposMenuItem = function(opt_data, opt_ignored) {
  return '<li><span class="loading-recent-repos">' + soy.$$escapeHtml("Loading...") + '</span></li>';
};
if (goog.DEBUG) {
  stash.layout.menu.loadingRecentReposMenuItem.soyTemplateName = 'stash.layout.menu.loadingRecentReposMenuItem';
}


stash.layout.menu.noRecentReposMenuItem = function(opt_data, opt_ignored) {
  return '<li><span class="no-recent-repos">' + soy.$$escapeHtml("No recently viewed repositories") + '</span></li>';
};
if (goog.DEBUG) {
  stash.layout.menu.noRecentReposMenuItem.soyTemplateName = 'stash.layout.menu.noRecentReposMenuItem';
}


stash.layout.menu.errorLoadingRecentReposMenuItem = function(opt_data, opt_ignored) {
  return '<li><span>' + soy.$$escapeHtml("An error occurred") + '</span></li>';
};
if (goog.DEBUG) {
  stash.layout.menu.errorLoadingRecentReposMenuItem.soyTemplateName = 'stash.layout.menu.errorLoadingRecentReposMenuItem';
}
;
;/* module-key = 'com.atlassian.stash.stash-web-plugin:recent-repositories-menu-resources', location = '/static/layout/base/menu/repositories/recent.js' */
define("layout/base/menu/recent-repos","jquery lodash stash/api/util/navbuilder util/ajax util/events util/html util/shortcuts exports".split(" "),function(a,h,k,l,d,m,n,p){p.initMenu=function(b){b=a("#"+b);var f=a("#"+m.sanitizeId(b.attr("aria-controls"))).addClass("recent-repositories-menu"),e=f.find(".recent-repositories-section ul"),g=a(stash.layout.menu.loadingRecentReposMenuItem());n.bind("recentRepositories",h.ary(a.fn.click.bind(b),0));f.on("aui-dropdown2-show",function(){d.trigger("internal.stash.ui.nav.repositories.opened")});
f.on("click","a",function(){var c=a(this).closest(".aui-dropdown2-section");c.is(".recent-repositories-section")&&d.trigger("internal.stash.ui.nav.repositories.item.clicked",null,{repositoryId:a(this).attr("data-repo-id")});c.is(".public-repo-list-link-section")&&d.trigger("internal.stash.ui.nav.repositories.public.clicked")});e.append(g);a(window).on("load",function(){l.rest({url:k.rest().profile().recent().repos().withParams({avatarSize:stash.widget.avatarSizeInPx({size:"xsmall"})}).build(),statusCode:{"*":function(){return!1}}}).done(function(c){if(c&&
c.size){var b=c.values;b.sort(function(a,b){return a.project.name.localeCompare(b.project.name)||a.name.localeCompare(b.name)});e.append(a(stash.feature.repository.menuItems({repos:b})))}else e.append(a(stash.layout.menu.noRecentReposMenuItem()));d.trigger("stash.feature.repositories.recent.loaded",this,c)}).fail(function(){e.append(a(stash.layout.menu.errorLoadingRecentReposMenuItem()))}).always(function(){g.remove()})})}});;
;/* module-key = 'com.atlassian.plugins.atlassian-plugins-webresource-rest:curl', location = 'js/wrm/curl-config.js' */
(function(){if(!window.WRM){window.WRM={}}window.curl={apiContext:WRM,defineContext:WRM}}());;
;/* module-key = 'com.atlassian.plugins.atlassian-plugins-webresource-rest:curl', location = 'js/wrm/lib/curl-0.7.3.js' */
(function(a){var P="0.7.3",u="curl",p="define",G,v,g,d=a.document,l=d&&(d.head||d.getElementsByTagName("head")[0]),V=l&&l.getElementsByTagName("base")[0]||null,i={},N={},c={},A="addEventListener" in a?{}:{loaded:1,complete:1},m={},b=m.toString,y,k={},f={},h=false,O,t=/\?|\.js\b/,e=/^\/|^[^:]+:\/\//,L=/(\.)(\.?)(?:$|\/([^\.\/]+.*)?)/g,E=/\/\*[\s\S]*?\*\/|(?:[^\\])\/\/.*?[\n\r]/g,C=/require\s*\(\s*["']([^"']+)["']\s*\)|(?:[^\\]?)(["'])/g,M,x;function Q(){}function D(X,W){return b.call(X).indexOf("[object "+W)==0}function B(X){var W;X.path=J(X.path||X.location||"");W=X.main||"./main";if(!n(W)){W="./"+W}X.main=s(W,X.name+"/");X.config=X.config;return X}function n(W){return W.charAt(0)=="."}function j(W){return e.test(W)}function o(X,W){return J(X)+"/"+W}function J(W){return W&&W.charAt(W.length-1)=="/"?W.substr(0,W.length-1):W}function s(ab,X){var ac,W,Z,Y,aa;ac=1;W=ab;if(n(W)){Y=true;W=W.replace(L,function(ad,ae,af,ag){if(af){ac++}return ag||""})}if(Y){Z=X.split("/");aa=Z.length-ac;if(aa<0){return ab}Z.splice(aa,ac);return Z.concat(W||[]).join("/")}else{return W}}function S(X){var W=X.indexOf("!");return{resourceId:X.substr(W+1),pluginId:W>=0&&X.substr(0,W)}}function U(){}function z(X,W){U.prototype=X||m;var Z=new U();U.prototype=m;for(var Y in W){Z[Y]=W[Y]}return Z}function F(){var X,aa,W;X=this;aa=[];function ab(ac,ad,ae){aa.push([ac,ad,ae])}function Y(ag,ad){var af,ac,ae=0;while((af=aa[ae++])){ac=af[ag];if(ac){ac(ad)}}}W=function Z(ad,ac){ab=ad?function(ae,af){ae&&ae(ac)}:function(ae,af){af&&af(ac)};W=Q;Y(ad?0:1,ac);Y=Q;aa=y};this.then=function(ac,ad,ae){ab(ac,ad,ae);return X};this.resolve=function(ac){X.resolved=ac;W(true,ac)};this.reject=function(ac){X.rejected=ac;W(false,ac)};this.progress=function(ac){Y(2,ac)}}function r(W){return W instanceof F}function H(W,Z,X,Y){if(r(W)){return W.then(Z,X,Y)}else{return Z(W)}}function q(Y,X,Z){var W;return function(){if(--Y>=0&&X){W=X.apply(y,arguments)}if(Y==0&&Z){Z(W)}return W}}x={toAbsId:function(ab,aa,W){var Y,X,Z;Y=s(ab,aa);if(n(Y)){return Y}Z=S(Y);X=Z.pluginId;Y=X||Z.resourceId;if(Y in W.pathMap){Y=W.pathMap[Y].main||Y}if(X){if(X.indexOf("/")<0&&!(X in W.pathMap)){Y=o(W.pluginPath,X)}Y=Y+"!"+Z.resourceId}return Y},createContext:function(W,X,ab,aa){var Z;Z=new F();Z.id=X||"";Z.isPreload=aa;Z.depNames=ab;Z.config=W;function ad(ae){return x.toAbsId(ae,Z.id,W)}function ac(ae){return x.resolvePathInfo(ad(ae),W).url}function Y(ag,ak,af){var ae,aj,ai,ah;ae=ak&&function(){ak.apply(y,arguments[0])};if(D(ag,"String")){if(ae){throw new Error("require(id, callback) not allowed")}aj=ad(ag);ai=k[aj];if(!(aj in k)){throw new Error("Module not resolved: "+aj)}ah=r(ai)&&ai.exports;return ah||ai}else{H(x.getDeps(x.createContext(W,Z.id,ag,aa)),ae,af)}}Z.require=Y;Y.toUrl=ac;Z.toAbsId=ad;return Z},createResourceDef:function(W,ad,ab){var aa,X,Z;aa=x.createContext(W,ad,y,ab);X=aa.resolve;Z=q(1,function(af){aa.deps=af;try{return x.executeDefFunc(aa)}catch(ae){aa.reject(ae)}});aa.resolve=function Y(ae){H(ab||h,function(){X((k[aa.id]=f[aa.url]=Z(ae)))})};aa.exportsReady=function ac(ae){H(ab||h,function(){if(aa.exports){Z(ae);aa.progress(N)}})};return aa},createPluginDef:function(W,aa,Z,Y){var X;X=x.createContext(W,Z,y,Y);return X},getCjsRequire:function(W){return W.require},getCjsExports:function(W){return W.exports||(W.exports={})},getCjsModule:function(X){var W=X.module;if(!W){W=X.module={id:X.id,uri:x.getDefUrl(X),exports:x.getCjsExports(X),config:function(){return X.config}};W.exports=W.exports}return W},getDefUrl:function(W){return W.url||(W.url=x.checkToAddJsExt(W.require.toUrl(W.id),W.config))},setApi:function(W){var Y,Z,X,aa,ab,ac;Y=u;Z=p;X=aa=a;ab=" already exists";if(W){ac=W.overwriteApi||W.overwriteApi;Y=W.apiName||W.apiName||Y;X=W.apiContext||W.apiContext||X;Z=W.defineName||W.defineName||Z;aa=W.defineContext||W.defineContext||aa;if(v&&D(v,"Function")){a[u]=v}v=null;if(g&&D(g,"Function")){a[p]=g}g=null;if(!ac){if(X[Y]&&X[Y]!=K){throw new Error(Y+ab)}if(aa[Z]&&aa[Z]!=I){throw new Error(Z+ab)}}}X[Y]=K;aa[Z]=I},config:function(aa){var ab,Z,W,X;if("baseUrl" in aa){aa.baseUrl=aa.baseUrl}if("main" in aa){aa.main=aa.main}if("preloads" in aa){aa.preloads=aa.preloads}if("pluginPath" in aa){aa.pluginPath=aa.pluginPath}if("dontAddFileExt" in aa||aa.dontAddFileExt){aa.dontAddFileExt=new RegExp(aa.dontAddFileExt||aa.dontAddFileExt)}ab=G;Z=z(ab,aa);Z.pathMap=z(ab.pathMap);W=aa.plugins||{};Z.plugins=z(ab.plugins);Z.paths=z(ab.paths,aa.paths);Z.packages=z(ab.packages,aa.packages);Z.pathList=[];function ac(af,am){var ah,aj,al,ak,an,ai;for(var ag in af){al=af[ag];if(D(al,"String")){al={path:af[ag]}}al.name=al.name||ag;an=Z;ak=S(J(al.name));ah=ak.resourceId;aj=ak.pluginId;if(aj){an=W[aj];if(!an){an=W[aj]=z(Z);an.pathMap=z(Z.pathMap);an.pathList=[]}delete af[ag]}if(am){ai=B(al);if(ai.config){ai.config=z(Z,ai.config)}}else{ai={path:J(al.path)}}ai.specificity=ah.split("/").length;if(ah){an.pathMap[ah]=ai;an.pathList.push(ah)}else{an.baseUrl=x.resolveUrl(al.path,Z)}}}function ad(af){var ag=af.pathMap;af.pathRx=new RegExp("^("+af.pathList.sort(function(ai,ah){return ag[ah].specificity-ag[ai].specificity}).join("|").replace(/\/|\./g,"\\$&")+")(?=\\/|$)");delete af.pathList}ac(aa.packages,true);ac(aa.paths,false);for(X in W){var Y=x.toAbsId(X+"!","",Z);Z.plugins[Y.substr(0,Y.length-1)]=W[X]}W=Z.plugins;for(X in W){W[X]=z(Z,W[X]);var ae=W[X].pathList;if(ae){W[X].pathList=ae.concat(Z.pathList);ad(W[X])}}for(X in ab.pathMap){if(!Z.pathMap.hasOwnProperty(X)){Z.pathList.push(X)}}ad(Z);return Z},checkPreloads:function(W){var X;X=W&&W.preloads;if(X&&X.length>0){H(h,function(){h=x.getDeps(x.createContext(G,y,X,true))})}},resolvePathInfo:function(Z,X){var Y,ab,aa,W;Y=X.pathMap;if(!j(Z)){aa=Z.replace(X.pathRx,function(ac){ab=Y[ac]||{};W=ab.config;return ab.path||""})}else{aa=Z}return{config:W||G,url:x.resolveUrl(aa,X)}},resolveUrl:function(Y,W){var X=W.baseUrl;return X&&!j(Y)?o(X,Y):Y},checkToAddJsExt:function(X,W){return X+((W||G).dontAddFileExt.test(X)?"":".js")},loadScript:function(Z,ab,X){var Y=d.createElement("script");function aa(ac){ac=ac||a.event;if(ac.type=="load"||A[Y.readyState]){delete c[Z.id];Y.onload=Y.onreadystatechange=Y.onerror="";ab()}}function W(ac){X(new Error("Syntax or http error: "+Z.url))}Y.onload=Y.onreadystatechange=aa;Y.onerror=W;Y.type=Z.mimetype||"text/javascript";Y.charset="utf-8";Y.async=!Z.order;Y.src=Z.url;c[Z.id]=Y;l.insertBefore(Y,V);return Y},extractCjsDeps:function(X){var Y,W=[],Z;Y=typeof X=="string"?X:X.toSource?X.toSource():X.toString();Y.replace(E,"").replace(C,function(aa,ac,ab){if(ab){Z=Z==ab?y:Z}else{if(!Z){W.push(ac)}}return""});return W},fixArgs:function(X){var ac,aa,Y,ab,W,Z;W=X.length;Y=X[W-1];ab=D(Y,"Function")?Y.length:-1;if(W==2){if(D(X[0],"Array")){aa=X[0]}else{ac=X[0]}}else{if(W==3){ac=X[0];aa=X[1]}}if(!aa&&ab>0){Z=true;aa=["require","exports","module"].slice(0,ab).concat(x.extractCjsDeps(Y))}return{id:ac,deps:aa||[],res:ab>=0?Y:function(){return Y},cjs:Z}},executeDefFunc:function(Y){var X,W;W=Y.cjs?Y.exports:y;X=Y.res.apply(W,Y.deps);if(X===y&&Y.exports){X=Y.module?(Y.exports=Y.module.exports):Y.exports}return X},defineResource:function(X,W){X.res=W.res;X.cjs=W.cjs;X.depNames=W.deps;x.getDeps(X)},getDeps:function(X){var ab,af,ai,ad,ag,aa,W,aj,ah;ai=[];af=X.depNames;ad=af.length;if(af.length==0){Y()}function ae(am,ak,al){ai[ak]=am;if(al){aj(am,ak)}}aj=q(ad,ae,ac);ah=q(ad,ae,Y);for(ab=0;ab<ad;ab++){W=af[ab];if(W in M){ah(M[W](X),ab,true);if(X.exports){X.progress(i)}}else{if(!W){ah(y,ab,true)}else{Z(W,ab)}}}return X;function Z(am,al){var an,ak,ap,ao;an=q(1,function(aq){ak(aq);ah(aq,al)});ak=q(1,function(aq){aj(aq,al)});ap=x.fetchDep(am,X);ao=r(ap)&&ap.exports;if(ao){ak(ao)}H(ap,an,X.reject,X.exports&&function(aq){if(ap.exports){if(aq==i){ak(ap.exports)}else{if(aq==N){an(ap.exports)}}}})}function Y(){X.resolve(ai)}function ac(){X.exportsReady&&X.exportsReady(ai)}},fetchResDef:function(W){x.getDefUrl(W);x.loadScript(W,function(){var X=O;O=y;if(W.useNet!==false){if(!X||X.ex){W.reject(new Error(((X&&X.ex)||"define() missing or duplicated: "+W.url)))}else{x.defineResource(W,X)}}},W.reject);return W},fetchDep:function(ai,X){var W,Z,ae,ab,ah,ad,aa,aj,af,Y,ac,ag;W=X.toAbsId;Z=X.isPreload;ae=X.config||G;ab=S(W(ai));aj=ab.resourceId;ah=ab.pluginId||aj;af=x.resolvePathInfo(ah,ae);if(ab.pluginId){ad=ah}else{ad=af.config.moduleLoader||af.config.moduleLoader;if(ad){aj=ah;ah=ad;af=x.resolvePathInfo(ad,ae)}}if(ah in k){Y=k[ah]}else{if(af.url in f){Y=k[ah]=f[af.url]}else{Y=x.createResourceDef(af.config,ah,Z);Y.url=x.checkToAddJsExt(af.url,af.config);k[ah]=f[af.url]=Y;x.fetchResDef(Y)}}if(ah==ad){ac=new F();ag=ae.plugins[ad]||ae;H(Y,function(am){var ao,ak,an;an=am.dynamic;if("normalize" in am){aj=am.normalize(aj,W,Y.config)||""}else{aj=W(aj)}ak=ad+"!"+aj;ao=k[ak];if(!(ak in k)){ao=x.createPluginDef(ag,ak,aj,Z);if(!an){k[ak]=ao}var al=function(ap){ao.resolve(ap);if(!an){k[ak]=ap}};al.resolve=al;al.reject=al.error=ao.reject;am.load(aj,ao.require,al,ag)}if(ac!=ao){H(ao,ac.resolve,ac.reject,ac.progress)}},ac.reject)}return ac||Y},getCurrentDefName:function(){var W;if(!D(a.opera,"Opera")){for(var X in c){if(c[X].readyState=="interactive"){W=X;break}}}return W}};M={require:x.getCjsRequire,exports:x.getCjsExports,module:x.getCjsModule};function K(){var X=[].slice.call(arguments),W;if(D(X[0],"Object")){W=X.shift();R(W)}return new w(X[0],X[1],X[2])}function R(W){if(W){x.setApi(W);G=x.config(W);x.checkPreloads(W);if("main" in W){setTimeout(function(){var X;X=x.createContext(G,y,[].concat(W.main));x.getDeps(X)},0)}}}function w(Y,ab,X,aa){var Z,W;W=x.createContext(G,y,[].concat(Y));this["then"]=Z=function(ac,ad){H(W,function(ae){if(ac){ac.apply(y,ae)}},function(ae){if(ad){ad(ae)}else{throw ae}});return this};this["next"]=function(ae,ac,ad){return new w(ae,ac,ad,W)};this["config"]=R;if(ab||X){Z(ab,X)}H(aa,function(){x.getDeps(W)})}K.version=P;K.config=R;function T(W){var Z,X,Y;Z=W.id;if(Z==y){if(O!==y){O={ex:"Multiple anonymous defines in url"}}else{if(!(Z=x.getCurrentDefName())){O=W}}}if(Z!=y){X=k[Z];if(!(Z in k)){Y=x.resolvePathInfo(Z,G);X=x.createResourceDef(Y.config,Z);k[Z]=X}if(!r(X)){throw new Error("duplicate define: "+Z)}X.useNet=false;x.defineResource(X,W)}}function I(){var W=x.fixArgs(arguments);T(W)}I.amd={plugins:true,jQuery:true,curl:P};G={baseUrl:"",pluginPath:"curl/plugin",dontAddFileExt:t,paths:{},packages:{},plugins:{},pathMap:{},pathRx:/$^/};v=a[u];g=a[p];if(!v||D(v,"Function")){x.setApi()}else{a[u]=y;R(v)}k[u]=K;k["curl/_privileged"]={core:x,cache:k,config:function(){return G},_define:T,_curl:K,Promise:F}}(this.window||(typeof global!="undefined"&&global)||this));;
;/* module-key = 'com.atlassian.plugins.atlassian-plugins-webresource-rest:curl', location = 'js/wrm/lib/curl-css-0.7.3.js' */
(function(B){var z="createElement",s="parentNode",f=B.setTimeout,H=B.document,k,x=H&&H.createStyleSheet&&!(H.documentMode>=10),v=[],u=[],C=[],i=12,F,g="HTTP or network error.",l={};if(H){k=H.head||H.getElementsByTagName("head")[0];if(x){F=c}else{F=t}}function q(J,I){l[J]=l[J]||I}function y(){var I;I=H[z]("link");I.rel="stylesheet";I.type="text/css";return I}function r(J,I){J.onload=function(){q("load",true);I()}}function n(J,I){J.onerror=function(){q("error",true);I()}}function c(K,I,M){var L;C.push({url:K,cb:I,eb:function J(){M(new Error(g))}});L=h();if(L){m(L)}}function m(K){var J,I;J=C.shift();I=K.styleSheet;if(J){K.onload=function(){J.cb(J.ss);m(K)};K.onerror=function(){J.eb();m(K)};J.ss=I.imports[I.addImport(J.url)]}else{e(K);G(K)}}function G(I){u.push(I)}function h(){var I;I=u.shift();if(!I&&v.length<i){I=H.createElement("style");v.push(I);k.appendChild(I)}return I}function b(L){var K,J,M;if(!L.href||!o()){return false}K=false;try{J=L.sheet;if(J){M=J.cssRules;K=M===null;if(!K&&M){J.insertRule("-curl-css-test {}",0);J.deleteRule(0);K=true}}}catch(I){K=Object.prototype.toString.call(window.opera)!="[object Opera]"&&/security|denied/i.test(I.message)}return K}function e(I){I.onload=I.onerror=j}function w(I){return I.onload==j||!I.onload}function E(J,K,I){if(l.load){return}if(b(J)){I(J.sheet)}else{if(!w(J)){f(function(){E(J,K,I)},K)}}}function A(J,K,I){if(l.error){return}}function p(J,L,I){function K(){if(w(J)){return}e(J);d(function(){I(J.sheet)})}r(J,K);E(J,L,K)}function D(K,L,I){function J(){if(w(K)){return}e(K);I(new Error(g))}n(K,J);A(K,L,J)}function t(J,I,K,M){var L;L=y();p(L,M,I);D(L,M,K);L.href=J;k.appendChild(L)}function d(I){function J(){if(o()){I()}else{f(J,10)}}J()}function o(){return !H.readyState||H.readyState=="complete"}function a(I,J){return I.lastIndexOf(".")<=I.lastIndexOf("/")?I+"."+J:I}function j(){}WRM.define("curl/plugin/css",{normalize:function(N,J){var L,M;if(!N){return N}L=[N];M=[];for(var K=0,I=L.length;K<I;K++){M.push(J(L[K]))}return M.join(",")},load:function(R,L,U,K){var Q,J,V,S,M,O;Q=[];J=[R||""];V=K.cssWatchPeriod||50;S=K.cssNoWait;M=J.length;function N(W){if(J.length>1){Q.push(W)}if(--M==0){U(J.length==1?W:Q)}}function P(X){var W;W=U.reject||function(Y){throw Y};W(X)}for(O=0;O<J.length;O++){R=J[O];var I,T;I=a(L.toUrl(R),"css");if(S){T=y();T.href=I;k.appendChild(T);N(T.sheet||T.styleSheet)}else{F(I,N,P,V)}}},"plugin-builder":"./builder/css",pluginBuilder:"./builder/css"})})(this);;
;/* module-key = 'com.atlassian.plugins.atlassian-plugins-webresource-rest:curl', location = 'js/wrm/lib/curl-js-0.7.3.js' */
(function(b,c,a){WRM.define("curl/plugin/js",["curl/_privileged"],function(m){var f={},j=[],h=c&&c.createElement("script").async==true,l,k,g;l=m.Promise;function i(n,o){return n.lastIndexOf(".")<=n.lastIndexOf("/")?n+"."+o:n}function e(o,u,q){var v,s,p;v=new Date().valueOf()+(o.timeoutMsec||300000);function n(){s=true;if(o.exports){o.resolved=a(o.exports)}if(!o.exports||o.resolved){u(p)}else{q()}}function r(w){s=true;q(w)}function t(){if(!s){if(v<new Date()){q()}else{setTimeout(t,10)}}}if(q&&o.exports){setTimeout(t,10)}p=m.core.loadScript(o,n,r)}function d(n,o){e(n,function(){var p=j.shift();k=j.length>0;if(p){d.apply(null,p)}o.resolve(n.resolved||true)},function(p){o.reject(p)})}return{dynamic:true,normalize:function(q,p,o){var n=q.indexOf("!");return n>=0?p(q.substr(0,n))+q.substr(n):p(q)},load:function(o,r,w,q){var s,t,u,v,n,p,y;s=o.indexOf("!order")>0;t=o.indexOf("!exports=");u=t>0&&o.substr(t+9);v="prefetch" in q?q.prefetch:true;o=s||t>0?o.substr(0,o.indexOf("!")):o;n=i(r.toUrl(o),"js");function x(z){(w.error||function(A){throw A})(z)}if(n in f){if(f[n] instanceof l){f[n].then(w,x)}else{w(f[n])}}else{p={name:o,url:n,order:s,exports:u,timeoutMsec:q.timeout};f[n]=y=new l();y.then(function(z){f[n]=z;w(z)},x);if(s&&!h&&k){j.push([p,y]);if(v){p.mimetype="text/cache";e(p,function(z){z&&z.parentNode.removeChild(z)},function(){});p.mimetype=""}}else{k=k||s;d(p,y)}}}}})}(this,this.document,function(){try{return eval(arguments[0])}catch(ex){return}}));;
;/* module-key = 'com.atlassian.plugins.atlassian-plugins-webresource-rest:web-resource-manager', location = 'js/wrm/jquery.js' */
WRM.define("wrm/jquery",function(){return AJS.$});;
;/* module-key = 'com.atlassian.plugins.atlassian-plugins-webresource-rest:web-resource-manager', location = 'js/wrm/underscore.js' */
WRM.define("wrm/_",function(){var a={filter:function(f,d){var b=[];for(var c=0;c<f.length;++c){var e=f[c];if(d(e)){b.push(e)}}return b},map:function(d,c){var e=[];for(var b=0;b<d.length;++b){e.push(c(d[b]))}return e},each:function(d,c){if(d.length===+d.length){for(var b=0;b<d.length;++b){c(d[b])}}else{for(var e in d){if(d.hasOwnProperty(e)){c(d[e],e)}}}},bind:function(c,b){return function(){c.apply(b,Array.prototype.slice.call(arguments))}},isArray:function(b){return Object.prototype.toString.call(b)=="[object Array]"},isUndefined:function(b){return b===void 0},isNull:function(b){return b===null}};return a});;
;/* module-key = 'com.atlassian.plugins.atlassian-plugins-webresource-rest:web-resource-manager', location = 'js/wrm/builder.js' */
WRM.define("wrm/builder",function(){var a=function(d){var b="(?:$|\\?.*)";var c="^"+d;this.patterns={js:{superBatch:new RegExp(c+"/superbatch/js/batch.js"+b),contextBatch:new RegExp(c+"/contextbatch/js/(.*?)/batch.js"+b),resourceBatch:new RegExp(c+"/batch/(.*?)/(.*).js"+b),noBatch:new RegExp(c+"/resources/(.*?)/(.*).js"+b)},css:{superBatch:new RegExp(c+"/superbatch/css/batch.css"+b),contextBatch:new RegExp(c+"/contextbatch/css/(.*?)/batch.css"+b),resourceBatch:new RegExp(c+"/batch/(.*?)/(.*).css"+b),noBatch:new RegExp(c+"/resources/(.*?)/(.*).css"+b)}}};a.prototype={initialize:function(c){var g,b=c.getElementsByTagName("script"),e=c.getElementsByTagName("link"),f={superBatch:false,modules:[],contexts:[]};for(g=0;g<b.length;++g){var d=b[g];if(d.getAttribute("src")){this._inspectMatches(d.getAttribute("src"),this.patterns.js,f)}}for(g=0;g<e.length;++g){var h=e[g];if(h.getAttribute("href")){this._inspectMatches(h.getAttribute("href"),this.patterns.css,f)}}return f},getModulesAndContextsFromScriptUrl:function(c){var b={superBatch:false,modules:[],contexts:[]};this._inspectMatches(c,this.patterns.js,b);return b},_inspectMatches:function(d,f,c){var b;b=d.match(f.superBatch);if(b){c.superBatch=true;return}b=d.match(f.contextBatch);if(b){var g=b[1].split(",");for(var e=0;e<g.length;++e){this._addToLoadedList(c.contexts,g[e])}return}b=d.match(f.resourceBatch);if(b){this._addToLoadedList(c.modules,b[1]);return}b=d.match(f.noBatch);if(b){this._addToLoadedList(c.modules,b[1]);return}},_addToLoadedList:function(d,c){for(var b=0;b<d.length;++b){if(d[b]===c){return}}d.push(c)}};return a});;
;/* module-key = 'com.atlassian.plugins.atlassian-plugins-webresource-rest:web-resource-manager', location = 'js/wrm/ie-only-filter.js' */
WRM.define("wrm/ie-only-filter",["wrm/jquery","wrm/_"],function(c,a){function b(d){var e=c.browser.msie;return a.filter(d,function(f){return f.ieOnly?e:true})}return b});;
;/* module-key = 'com.atlassian.plugins.atlassian-plugins-webresource-rest:web-resource-manager', location = 'js/wrm/conditional-comment-filter.js' */
WRM.define("wrm/conditional-comment-filter",["wrm/jquery","wrm/_"],function(c,a){function b(e){var f=c.browser.msie;var d=c.browser.version;return a.filter(e,function(h){var g=h.conditionalComment;if(!g){return true}if(!f||d>9){return false}g=g.toLowerCase();switch(g){case"ie":return true;case"lt ie 9":return d<9;case"lte ie 9":return d<=9;case"ie 9":return d==9;case"gt ie 9":return d>9;case"gte ie 9":return d>=9;case"lt ie 8":return d<8;case"lte ie 8":return d<=8;case"ie 8":return d==8;case"gt ie 8":return d>8;case"gte ie 8":return d>=8;default:AJS.log("Cannot parse conditional comment "+g);return false}})}return b});;
;/* module-key = 'com.atlassian.plugins.atlassian-plugins-webresource-rest:web-resource-manager', location = 'js/wrm/resource-base-url-pattern.js' */
WRM.define("wrm/resource-base-url-pattern",function(){return WRM.data.claim("com.atlassian.plugins.atlassian-plugins-webresource-rest:web-resource-manager.resource-base-url-pattern")});;
;/* module-key = 'com.atlassian.plugins.atlassian-plugins-webresource-rest:web-resource-manager', location = 'js/wrm/require-handler.js' */
WRM.define("wrm/require-handler",["wrm/jquery","wrm/_","wrm/builder","wrm/conditional-comment-filter","wrm/ie-only-filter","wrm/resource-base-url-pattern"],function(e,h,i,g,a,c){var f=/^wr!(.*)$/,d=/^wrc!(.*)$/;var b=function(){this._requireCache={}};b.prototype={require:function(k,j){if(!h.isArray(k)){k=[k]}if(!this._requireCache.hasOwnProperty(k)){this._requireCache[k]=this._resolveAsync(k)}var l=this._requireCache[k];if(j){l.done(function(){j.apply(this,arguments)})}return l},_resolveAsync:function(l){var j=e.Deferred();var k=this;this._getScriptsForResources(l).done(function(p){if(p.unparsedData){window.WRM._unparsedData||(window.WRM._unparsedData={});h.each(p.unparsedData,function(u,t){window.WRM._unparsedData[t]=u})}var q=[];var s=[];var m=k._filter(p.resources);for(var o=0;o<m.length;++o){var r=m[o];var n=r.url;if(r.resourceType==="JAVASCRIPT"){if(!k._isJSInInitLoad(n)){q.push("js!"+n+"!order")}}else{if(r.resourceType==="CSS"){if(!k._isCSSInInitLoad(n)){if(r.media&&"all"!==r.media){s.push(r)}else{q.push("css!"+n)}}}else{AJS.log("Unknown resource type required: "+n)}}}AJS.log("Downloading resources:\n"+q.join("\n"));WRM.curl(q,function(){h.each(s,function(u){k._loadCssImmediate(u)});var t=h.map(l,function(){return window});j.resolveWith(k,t)},function(){j.rejectWith(k,arguments)})});return j.promise()},_loadCssImmediate:function(k){AJS.log("WARN: asynchronously loading a CSS resource containing a media query: "+k.url);var j='<link rel="stylesheet" type="text/css" href="'+k.url+'" media="'+k.media+'" />';e(j).appendTo("head")},_getScriptsForResources:function(k){if(!this._builder){this._builder=new i(c);this._initLoadResources=this._builder.initialize(document)}var j=[];var l=[];h.each(k,function(n){var m;if(m=n.match(f)){j.push(m[1])}else{if(m=n.match(d)){l.push(m[1])}}});return e.ajax({url:AJS.contextPath()+"/rest/webResources/1.0/resources",type:"POST",contentType:"application/json",dataType:"json",data:JSON.stringify({r:j,c:l,xc:this._initLoadResources.contexts,xr:this._initLoadResources.modules})})},_isJSInInitLoad:function(j){return e("script[src='"+j+"']").length>0},_isCSSInInitLoad:function(j){return e("link[href='"+j+"']").length>0},_filter:function(k){if(!this._filters){this._filters=[g,a]}var j=k;h.each(this._filters,function(l){j=l(j)});return j}};return b});;
;/* module-key = 'com.atlassian.plugins.atlassian-plugins-webresource-rest:web-resource-manager', location = 'js/wrm/index.js' */
WRM.curl(["wrm/require-handler"],function(b){var a;WRM.require=function(d,c){if(!a){a=new b()}return a.require(d,c)}});;
;/* module-key = 'com.atlassian.stash.plugin.stash-inbox-plugin:inbox-dialog', location = '/static/inbox/inbox.soy' */
// This file was automatically generated from inbox.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace stash.plugin.inbox.
 */

if (typeof stash == 'undefined') { var stash = {}; }
if (typeof stash.plugin == 'undefined') { stash.plugin = {}; }
if (typeof stash.plugin.inbox == 'undefined') { stash.plugin.inbox = {}; }


stash.plugin.inbox.dialogContents = function(opt_data, opt_ignored) {
  var output = '<h2>' + soy.$$escapeHtml("My pull requests") + '</h2><div class=\'inbox-table-wrapper aui-tabs horizontal-tabs\'><ul class="tabs-menu">';
  var roleList6 = opt_data.roles;
  var roleListLen6 = roleList6.length;
  for (var roleIndex6 = 0; roleIndex6 < roleListLen6; roleIndex6++) {
    var roleData6 = roleList6[roleIndex6];
    output += '<li class="menu-item"><a href="#inbox-pull-request-' + soy.$$escapeHtml(roleData6.id) + '">' + soy.$$escapeHtml(roleData6.title) + '</a></li>';
  }
  output += '</ul>';
  var roleList14 = opt_data.roles;
  var roleListLen14 = roleList14.length;
  for (var roleIndex14 = 0; roleIndex14 < roleListLen14; roleIndex14++) {
    var roleData14 = roleList14[roleIndex14];
    output += '<div id="inbox-pull-request-' + soy.$$escapeHtml(roleData14.id) + '" class="tabs-pane">' + stash.feature.pullRequest.pullRequestTable({pullRequestsPage: null, scope: 'global', id: 'inbox-pull-request-table-' + roleData14.id}) + '</div>';
  }
  output += '</div>';
  return output;
};
if (goog.DEBUG) {
  stash.plugin.inbox.dialogContents.soyTemplateName = 'stash.plugin.inbox.dialogContents';
}


stash.plugin.inbox.triggerIcon = function(opt_data, opt_ignored) {
  return '<span class=\'aui-icon aui-icon-small ' + ((opt_data.isEmpty) ? 'aui-iconfont-workbox-empty' : 'aui-iconfont-workbox') + '\'></span>';
};
if (goog.DEBUG) {
  stash.plugin.inbox.triggerIcon.soyTemplateName = 'stash.plugin.inbox.triggerIcon';
}


stash.plugin.inbox.emptyInboxMessage = function(opt_data, opt_ignored) {
  return '<span class="aui-icon aui-icon-large aui-iconfont-workbox-empty">' + soy.$$escapeHtml("No pull requests to approve") + '</span><h3>' + soy.$$escapeHtml("Inbox Zero") + '</h3>';
};
if (goog.DEBUG) {
  stash.plugin.inbox.emptyInboxMessage.soyTemplateName = 'stash.plugin.inbox.emptyInboxMessage';
}
;
;/* module-key = 'com.atlassian.stash.plugin.stash-inbox-plugin:inbox-dialog', location = '/static/inbox/inbox.js' */
define("plugin/inbox/inbox",["aui","jquery","underscore","stash/api/util/events","stash/api/util/navbuilder","stash/api/util/server","stash/api/util/state","exports"],function(h,f,s,a,q,m,i,t){var u;var b;function k(v){return q.newBuilder().addPathComponents("rest","inbox","latest","pull-requests").withParams({role:v})}function c(){return q.newBuilder().addPathComponents("rest","inbox","latest","pull-requests","count").build()}var o=function(v){if(v.keyCode===f.ui.keyCode.ESCAPE){u.hide();v.preventDefault()}};var p=function(){u.hide()};var n=function(y,v){var z={title:"Could not retrieve inbox",message:"An unknown error occurred"};var x={};if(v){x=v.errors?v.errors[0]:v}var w=f.extend({},z,x);y.html(f(stash.widget.focusMessage.error({title:w.title,text:w.message,extraClasses:"communication-error"})));return false};function r(v){l(v,[{id:"reviewer",title:"Reviewing"},{id:"author",title:"Created"}])}function l(A,w){var z=require("widget/avatar-list");var v=require("feature/pull-request/pull-request-table");var x=f(stash.plugin.inbox.dialogContents({roles:w}));A.append(x);var B=function(E,F,C,D){return n.call(this,A,D)};function y(E,C){var D=new v("open",null,s.partial(k,E),{scope:"global",target:"#inbox-pull-request-table-"+E,scrollPaneSelector:".inbox-table-wrapper",bufferPixels:50,pageSize:10,spinnerSize:"medium",noneFoundMessageHtml:stash.plugin.inbox.emptyInboxMessage(),dataLoadedEvent:"stash.plugin.inbox.dataLoaded."+E,statusCode:{0:B,401:B,500:B,502:B}});D.handleErrors=f.noop;D.init();if(C){h.tabs.change(A.find("[href=#inbox-pull-request-"+E+"]"))}}s.each(w,function(D,C){y(D.id,C===0)});A.find(".tabs-menu").delegate("a","click",function(C){h.tabs.change(f(this),C);C&&C.preventDefault()});z.init()}var j=function(w,v,x){x();f(document).on("keyup",o);h.dialog2.on("show",p);e(w,s.partial(r,w))};var e=s.once(function(v,x){var w=f('<div class="loading-resource-spinner"></div>');v.empty().append(w);w.show().spin("medium");WRM.require("wrc!stash.pullRequest.inbox").always(function(){w.spinStop().remove()}).done(function(){x()})});var g=function(){f(document).off("keyup",o);h.dialog2.off("show",p);if(f(document.activeElement).closest("#inbox-pull-requests-content").length){document.activeElement.blur()}};var d=function(){m.rest({url:c(),type:"GET",statusCode:{"*":false}}).done(function(w){if(w.count>0){var x=f(aui.badges.badge({text:w.count}));b.html(stash.plugin.inbox.triggerIcon({isEmpty:false})).append(x);setTimeout(function(){x.addClass("visible")},0)}else{var v=500;b.find(".aui-badge").removeClass("visible");setTimeout(function(){b.html(stash.plugin.inbox.triggerIcon({isEmpty:true}))},v)}b.attr("data-countLoaded",true)})};t.onReady=function(){b=f("#inbox-pull-requests");if(b.length&&i.getCurrentUser()){b.html(stash.plugin.inbox.triggerIcon({isEmpty:true}));u=h.InlineDialog(b,"inbox-pull-requests-content",j,{width:870,hideCallback:g});d();var v=function(w){if(w.user.name===i.getCurrentUser().name){d()}};a.on("stash.widget.approve-button.added",v);a.on("stash.widget.approve-button.removed",v)}}});jQuery(document).ready(function(){require("plugin/inbox/inbox").onReady()});;
;/* module-key = 'com.atlassian.stash.stash-readme-plugin:stash-readme-common-resources', location = '/static/feature/readme/common/common.js' */
define("feature/readme/common",["jquery","lib/jsuri","lodash","stash/api/util/navbuilder","util/text","model/page-state","exports"],function(e,c,h,a,i,g,d){function b(k,l,n){var j="";var m=k.indexOf("#");if(m!==-1){j=k.substr(m);k=k.substr(0,m)}return k+(k.indexOf("?")!==-1?"&":"?")+encodeURIComponent(l)+"="+encodeURIComponent(n)+j}d.createUrl=function f(k,j,m){var l=e.extend({},{blob:m,at:j});return a.newBuilder(["rest","readme","latest","projects",g.getProject().getKey(),"repos",g.getRepository().getSlug(),"markup"].concat(k)).withParams(l).build()};d.updateLinks=function(k,j){function l(n,m,o){k.find(n).each(function(){e(this).attr(m,d._appendAtIfRelative(e(this).attr(m),g.getRevisionRef().getId(),j,o))})}l("a","href");l("img","src",function(m){return(new c(m).getQueryParamValues("raw").length===0)?b(m,"raw",""):m});return k};d._appendAtIfRelative=function(l,j,k,m){if(l&&!i.isUriAbsolute(l)&&!h.startsWith(l,"#")){if(k&&!h.endsWith(k,"/")&&!h.startsWith(l,"/")){l=k+"/"+l}if(!g.getRevisionRef().isDefault()){l=b(l,"at",j)}l=m?m(l):l}return l};d.DATA=e.Deferred();_PageDataPlugin.ready("com.atlassian.stash.stash-readme-plugin:readme-provider","stash.layout.repository",function(j){d.DATA.resolve(j)})});;
;/* module-key = 'com.atlassian.stash.stash-readme-plugin:stash-readme-filecontent-resources', location = '/static/feature/readme/filecontent/file-content.soy' */
// This file was automatically generated from file-content.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace stash.feature.readme.
 */

if (typeof stash == 'undefined') { var stash = {}; }
if (typeof stash.feature == 'undefined') { stash.feature = {}; }
if (typeof stash.feature.readme == 'undefined') { stash.feature.readme = {}; }


stash.feature.readme.renderMarkup = function(opt_data, opt_ignored) {
  return '<div class="markup-content markup">' + soy.$$filterNoAutoescape(opt_data.content) + '</div>';
};
if (goog.DEBUG) {
  stash.feature.readme.renderMarkup.soyTemplateName = 'stash.feature.readme.renderMarkup';
}
;
;/* module-key = 'com.atlassian.stash.stash-readme-plugin:stash-readme-filecontent-resources', location = '/static/feature/readme/filecontent/file-content.js' */
define("feature/readme/filecontent",["aui","jquery","lodash","util/ajax","util/syntax-highlight","feature/readme/common"],function(a,f,b,e,c,d){return function(h){if(h.contentMode!=="source"){return null}var g=h.fileChange;return d.DATA.then(function(j){var i=g.path.extension.toLowerCase();if(i&&b.contains(j.extensions,i)&&!b.contains(j.extensionsRaw,i)){var k=g.commitRange.untilRevision.id;return e.rest({url:d.createUrl(g.path.components,k,k),dataType:"html",statusCode:{"413":function(){return f.Deferred().reject("The markup for this file is too large to render.")}}}).then(function(l){h.$container.empty().append(d.updateLinks(f(stash.feature.readme.renderMarkup({content:l}))));c.container(h.$container);return{}})}return f.Deferred().reject()})}});require("stash/api/feature/files/file-handlers").register({weight:3000,handle:function(a){return require("feature/readme/filecontent").apply(this,arguments)}});;
;/* module-key = 'com.atlassian.analytics.analytics-client:js-events', location = 'js/store-1.3.1.js' */
(function(){var l={},h=window,k=h.document,c="localStorage",n="globalStorage",d="__storejs__",g;l.disabled=false;l.set=function(e,o){};l.get=function(e){};l.remove=function(e){};l.clear=function(){};l.transact=function(e,o){var p=l.get(e);if(typeof p=="undefined"){p={}}o(p);l.set(e,p)};l.serialize=function(e){return JSON.stringify(e)};l.deserialize=function(e){if(typeof e!="string"){return undefined}return JSON.parse(e)};function b(){try{return(c in h&&h[c])}catch(e){return false}}function m(){try{return(n in h&&h[n]&&h[n][h.location.hostname])}catch(e){return false}}if(b()){g=h[c];l.set=function(e,o){if(o===undefined){return l.remove(e)}g.setItem(e,l.serialize(o))};l.get=function(e){return l.deserialize(g.getItem(e))};l.remove=function(e){g.removeItem(e)};l.clear=function(){g.clear()}}else{if(m()){g=h[n][h.location.hostname];l.set=function(e,o){if(o===undefined){return l.remove(e)}g[e]=l.serialize(o)};l.get=function(e){return l.deserialize(g[e]&&g[e].value)};l.remove=function(e){delete g[e]};l.clear=function(){for(var e in g){delete g[e]}}}else{if(k.documentElement.addBehavior){var j,f;try{f=new ActiveXObject("htmlfile");f.open();f.write('<script>document.w=window<\/script><iframe src="/favicon.ico"></frame>');f.close();j=f.w.frames[0].document;g=j.createElement("div")}catch(i){g=k.createElement("div");j=k.body}function a(e){return function(){var p=Array.prototype.slice.call(arguments,0);p.unshift(g);j.appendChild(g);g.addBehavior("#default#userData");g.load(c);var o=e.apply(l,p);j.removeChild(g);return o}}l.set=a(function(p,e,o){if(o===undefined){return l.remove(e)}p.setAttribute(e,l.serialize(o));p.save(c)});l.get=a(function(o,e){return l.deserialize(o.getAttribute(e))});l.remove=a(function(o,e){o.removeAttribute(e);o.save(c)});l.clear=a(function(q){var o=q.XMLDocument.documentElement.attributes;q.load(c);for(var p=0,e;e=o[p];p++){q.removeAttribute(e.name)}q.save(c)})}}}try{l.set(d,d);if(l.get(d)!=d){l.disabled=true}l.remove(d)}catch(i){l.disabled=true}if(typeof module!="undefined"){module.exports=l}else{if(typeof define==="function"&&define.amd){define(l)}else{this.store=l}}})();;
;/* module-key = 'com.atlassian.analytics.analytics-client:js-events', location = 'js/atlassian-analytics.js' */
(function(b){var m=AJS.$.ajax;var h="atlassian-analytics";var g=typeof AJS.contextPath=="function"?AJS.contextPath():typeof AJS.Confluence!="undefined"?AJS.Confluence.getContextPath():window.contextPath!=null?window.contextPath:"";var l=null;var i=null;var d=null;var n="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(u){var t=Math.random()*16|0,s=u=="x"?t:(t&3|8);return s.toString(16)});var p=function(){var s="unknown";if(document.body.id=="jira"){s="jira"}else{if(document.body.id=="com-atlassian-confluence"){s="confluence"}}i=h+"."+s;d=i+".lock"};var c=function(){if(store.get(d)){return false}store.set(d,n);return(store.get(d)===n)};var q=function(){store.set(d,null)};var f=function(){var t=[],v,w,s,u;if(AJS.EventQueue.length==0){return}t=store.get(i)||t;for(s=0,u=AJS.EventQueue.length;s<u;++s){w=AJS.EventQueue[s];if(w.name){v={name:w.name,properties:w.properties,time:w.time||0};t.push(v)}}AJS.EventQueue.length=0;store.set(i,t)};var e=function(){var t;if(!c()){return}f();t=store.get(i);if(t&&t.length){store.remove(i);q();if(k(t)){var u=new Date().getTime();for(var s=0;s<t.length;s++){if(t[s].time>0){t[s].timeDelta=t[s].time-u}else{t[s].timeDelta=s-t.length}delete t[s].time}l=m({type:"POST",url:g+"/rest/analytics/1.0/publish/bulk",data:JSON.stringify(t),contentType:"application/json",dataType:"json"});l.fail(function(){AJS.EventQueue.concat(t);f()})}}else{q()}};var k=function(u){for(var t=u.length-1;t>=0;t--){var w="";var v=u[t];var s=v.properties;if(typeof v.name==="undefined"){w="you must provide a name for the event."}else{if(typeof s!=="undefined"&&s!==null){if(s.constructor!==Object){w="properties must be an object with key value pairs."}else{a(s)}}}if(w!==""){AJS.log("WARN: Invalid analytics event detected and ignored, "+w+"\nEvent: "+JSON.stringify(v));u.splice(t,1)}}return u.length};var a=function(u){for(var t in u){if(u.hasOwnProperty(t)){var s=u[t];if(typeof s!=="undefined"&&s!==null&&s.toString){u[t]=s.toString()}else{u[t]=""}}}};var j=function(){if(l&&!(l.state()==="resolved"||l.state()==="rejected")){l.abort()}};AJS.EventQueue=AJS.EventQueue||[];var o=Array.prototype.push;AJS.EventQueue.push=function(s){s.time=new Date().getTime();o.call(AJS.EventQueue,s)};AJS.toInit(function(){p();setTimeout(e,500);setInterval(e,5000);r()});b(window).unload(function(){j();f()});AJS.Analytics={triggerPrivacyPolicySafeEvent:function(s,t){AJS.log("WARN: 'triggerPrivacyPolicySafeEvent' has been deprecated");AJS.EventQueue.push({name:s,properties:t})}};AJS.bind("analytics",function(s,t){AJS.EventQueue.push({name:t.name,properties:t.data})});AJS.bind("analyticsEvent",function(s,t){AJS.EventQueue.push({name:t.name,properties:t.data})});var r=function(){if(window.location.pathname.indexOf("/secure/admin/ViewApplicationProperties")>-1){AJS.$("[data-property-id='analytics-enabled']").remove()}else{if(window.location.pathname.indexOf("/secure/admin/EditApplicationProperties")>-1){var t=AJS.$(":contains(Enable Atlassian analytics)");if(t.size()>0){var s=t[t.size()-2];if(s){s.remove()}}}}}}(AJS.$));;
;/* module-key = 'com.atlassian.analytics.analytics-client:policy-update', location = 'js/policy-update.js' */
;
;/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:application-header-administration-cog-resource', location = 'header/cog.js' */
var NavLinks=(function(a){a.ApplicationHeader=function(b){b.Cog=(function(){var c=function(){var d=AJS.$("#system-admin-menu-content");if(d.length>0){return d}var e=AJS.$("#admin-menu-link-content");if(e.length>0){return e}return AJS.$("#bamboo\\.global\\.header-admin\\.menu")};return{getDropdown:c}}());return b}(a.ApplicationHeader||{});return a}(NavLinks||{}));;
;/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:administration-shortcuts-resources', location = 'adminshortcuts/adminshortcuts.soy' */
// This file was automatically generated from adminshortcuts.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace navlinks.templates.adminshortcuts.
 */

if (typeof navlinks == 'undefined') { var navlinks = {}; }
if (typeof navlinks.templates == 'undefined') { navlinks.templates = {}; }
if (typeof navlinks.templates.adminshortcuts == 'undefined') { navlinks.templates.adminshortcuts = {}; }


navlinks.templates.adminshortcuts.section = function(opt_data, opt_ignored) {
  var param5 = '<ul class="aui-list-truncate">';
  var linkList7 = opt_data.links;
  var linkListLen7 = linkList7.length;
  for (var linkIndex7 = 0; linkIndex7 < linkListLen7; linkIndex7++) {
    var linkData7 = linkList7[linkIndex7];
    param5 += '<li><a href="' + soy.$$escapeHtml(linkData7.link) + '">' + soy.$$escapeHtml(linkData7.label) + '</a></li>';
  }
  param5 += '</ul>';
  var output = '' + aui.dropdown2.section({id: 'nl-remote-admin-section', label: "Other applications", content: param5});
  return output;
};
if (goog.DEBUG) {
  navlinks.templates.adminshortcuts.section.soyTemplateName = 'navlinks.templates.adminshortcuts.section';
}
;
;/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:administration-shortcuts-resources', location = 'adminshortcuts/adminnavlinks.js' */
var NavLinks=(function(a){a.AdminShortcuts=(function(){var c=function(){return AJS.$.ajax({url:AJS.contextPath()+"/rest/menu/latest/admin",cache:false,dataType:"json"})};var b=function(){AJS.$("#nl-remote-admin-section").on("click","a",function(){NL.trackEvent("remoteAdminItemSelected",NL.getCurrentApplication(),$(this).attr("href"))})};return{render:function(){c().done(function(e){e=_.reject(e,function(f){return f.local===true});if(e.length){var d=navlinks.templates.adminshortcuts.section({links:e});a.ApplicationHeader.Cog.getDropdown().append(d);b()}})}}}());return a}(NavLinks||{}));;
;/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:rotp-projectshortcuts', location = 'projectshortcuts/projectshortcuts.soy' */
// This file was automatically generated from projectshortcuts.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace navlinks.templates.projectshortcuts.
 */

if (typeof navlinks == 'undefined') { var navlinks = {}; }
if (typeof navlinks.templates == 'undefined') { navlinks.templates = {}; }
if (typeof navlinks.templates.projectshortcuts == 'undefined') { navlinks.templates.projectshortcuts = {}; }


navlinks.templates.projectshortcuts.dialogContent = function(opt_data, opt_ignored) {
  return '' + ((opt_data.localShortcuts && opt_data.localShortcuts.length > 0) ? navlinks.templates.projectshortcuts.dialogContentShortcuts({shortcuts: opt_data.localShortcuts, listClass: 'projectshortcut-links'}) : '') + ((opt_data.remoteShortcuts != null) ? (opt_data.remoteShortcuts.length > 0) ? '<h2 class="projectshortcuts-heading">Related Links</h2>' + navlinks.templates.projectshortcuts.dialogContentShortcuts(soy.$$augmentMap(opt_data.remoteShortcuts, {shortcuts: opt_data.remoteShortcuts, listClass: 'projectshortcut-links'})) : '' : navlinks.templates.projectshortcuts.dialogLoading(null));
};
if (goog.DEBUG) {
  navlinks.templates.projectshortcuts.dialogContent.soyTemplateName = 'navlinks.templates.projectshortcuts.dialogContent';
}


navlinks.templates.projectshortcuts.headingWrapper = function(opt_data, opt_ignored) {
  return '<div class="project-dialog-header-wrapper"><div class="project-header"><img class="project-img" src="' + soy.$$escapeHtml(opt_data.logoUrl) + '"><h2 class="dialog-title">' + soy.$$escapeHtml(opt_data.title) + '</h2></div><div class="project-content-wrapper">' + soy.$$filterNoAutoescape(opt_data.contentHtml) + '</div></div>';
};
if (goog.DEBUG) {
  navlinks.templates.projectshortcuts.headingWrapper.soyTemplateName = 'navlinks.templates.projectshortcuts.headingWrapper';
}


navlinks.templates.projectshortcuts.dialogContentShortcuts = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  var output = '<ul' + ((opt_data.listClass) ? ' class="' + soy.$$escapeHtml(opt_data.listClass) + '"' : '') + '>';
  var shortcutList35 = opt_data.shortcuts;
  var shortcutListLen35 = shortcutList35.length;
  for (var shortcutIndex35 = 0; shortcutIndex35 < shortcutListLen35; shortcutIndex35++) {
    var shortcutData35 = shortcutList35[shortcutIndex35];
    output += '<li' + ((shortcutIndex35 == shortcutListLen35 - 1) ? ' class="last"' : '') + '>' + navlinks.templates.projectshortcuts.dialogContentShortcut(shortcutData35) + '</li>';
  }
  output += '</ul>';
  return output;
};
if (goog.DEBUG) {
  navlinks.templates.projectshortcuts.dialogContentShortcuts.soyTemplateName = 'navlinks.templates.projectshortcuts.dialogContentShortcuts';
}


navlinks.templates.projectshortcuts.dialogContentShortcut = function(opt_data, opt_ignored) {
  return '<a href="' + soy.$$escapeHtml(opt_data.link) + '"' + ((opt_data.tooltip) ? ' title="' + soy.$$escapeHtml(opt_data.tooltip) + '"' : '') + '>' + soy.$$escapeHtml(opt_data.label) + '</a>';
};
if (goog.DEBUG) {
  navlinks.templates.projectshortcuts.dialogContentShortcut.soyTemplateName = 'navlinks.templates.projectshortcuts.dialogContentShortcut';
}


navlinks.templates.projectshortcuts.dialogLoading = function(opt_data, opt_ignored) {
  opt_data = opt_data || {};
  return '<div class="projectshortcuts-loading">' + ((opt_data.text) ? soy.$$escapeHtml(opt_data.text) : '') + '</div>';
};
if (goog.DEBUG) {
  navlinks.templates.projectshortcuts.dialogLoading.soyTemplateName = 'navlinks.templates.projectshortcuts.dialogLoading';
}
;
;/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:rotp-projectshortcuts', location = 'projectshortcuts/projectshortcuts.js' */
(function(e,g){var i,k={},m="key",b="name",j="entity-type";function f(s){var n=e(this),o=n.data(m),q=n.data(b),p=n.data(j);if(typeof o==="undefined"){return}s.preventDefault();i=new AJS.Dialog({width:600,keypressListener:function(u){if(u.which==jQuery.ui.keyCode.ESCAPE){i.remove()}},id:"project-shortcuts-dialog"}).addCancel("Close",function(){i.remove()}).addPanel("",navlinks.templates.projectshortcuts.headingWrapper({title:q,logoUrl:h(),contentHtml:navlinks.templates.projectshortcuts.dialogLoading({text:"Retrieving links"})})).show();c(i);if(!k[o]){k[o]={entity:{title:q},localShortcuts:null,remoteShortcuts:null};d(AJS.contextPath()+"/rest/project-shortcuts/1.0/local/"+o,{entityType:p}).done(t);d(AJS.contextPath()+"/rest/project-shortcuts/1.0/remote/"+o,{entityType:p}).done(r).fail(function(){var u=i.getCurrentPanel().body.find(".project-content-wrapper");u.find(".projectshortcuts-loading").remove();AJS.messages.error(u,{body:"Could not retrieve remote project shortcuts",closeable:false});c(i)})}else{l(k[o])}function t(u){k[o].localShortcuts=u.shortcuts;l(k[o])}function r(u){k[o].remoteShortcuts=u.shortcuts;l(k[o])}}function h(){return e(".project-shortcut-dialog-trigger img").attr("src")}function l(n){if(n.localShortcuts){i.getCurrentPanel().html(navlinks.templates.projectshortcuts.headingWrapper({title:n.entity.title,logoUrl:h(),contentHtml:navlinks.templates.projectshortcuts.dialogContent(n)}));c(i)}}function a(p){var o=210;if(!p||p.length<=o){return p}var n=o;while(n>0&&p.charAt(n)!=" "){n--}if(n==0){n=o}p=p.substring(0,n);if(p.length>=n){p=p+"..."}return p}function c(n){var q=n.popup.element,p=q.find(".dialog-panel-body"),o=q.find(".dialog-components");p.height("auto");q.height(o.outerHeight()-1);e(".aui-shadow").remove()}function d(n,o){return e.ajax({url:n,cache:false,data:o,dataType:"json"})}e(document).on("click",".project-shortcut-dialog-trigger",f)}(jQuery,window.NL=(window.NL||{})));;
;/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:atlassian-ui-popup-display-controller', location = 'popups/DisplayController.js' */
AJS.Popups=AJS.Popups||{};AJS.Popups.DisplayController=function(){var c=[];var a=false;var b=false;AJS.toInit(function(){setTimeout(function(){AJS.Popups.DisplayController.render()},0)});return{request:function(d){c.push(d);if(a&&b===false){this.render()}},render:function(){c.sort(function(e,d){return e.weight-d.weight});a=true;if(c.length!==0){b=true;c[0].show()}}}}();;
;/* module-key = 'com.atlassian.support.stp:stp-license-status-resources', location = 'js/stp-licenseStatus.js' */
(function(b){var a={destroyBanner:function(){AJS.$("#stp-licenseStatus-banner").slideUp(function(){AJS.$("#stp-licenseStatus-banner").remove()})},remindMeNever:function(c){c.preventDefault();AJS.$.ajax({type:"POST",async:true,headers:{"X-Atlassian-Token":"no-check"},url:AJS.contextPath()+"/rest/stp/1.0/license/remindMeNever"});a.destroyBanner()},remindMeLater:function(){AJS.$.ajax({type:"POST",async:true,headers:{"X-Atlassian-Token":"no-check"},url:AJS.contextPath()+"/rest/stp/1.0/license/remindMeLater"});a.destroyBanner()},recordOutboundLink:function(c,d){var e=e||[];e.push(["_setAccount",c],["_setCampSourceKey","STP"],["_setCampMediumKey","renewals_reminder"],["_setCampNameKey",d],["_trackEvent","renewal"])},createBanner:function(){var c="\n<div id='stp-licenseStatus-banner' class='aui-message warning'>\n";var d=AJS.$("meta[name='stp-license-days-to-expiry']").attr("content");var f="https://www.atlassian.com/purchase/renew?utm_source=STP&utm_medium=renewals_reminder&utm_campaign=renewals_reminder";var e=AJS.$("meta[name='stp-license-product-name']").attr("content");if(d===0){c+=AJS.format("Your {0} maintenance expires today. For continued access to support and updates, {1}renew your maintenance{2}. {3}Remind me later{4} or {5}never remind me again{6}.",e,"<a id='stp-licenseStatus-renewNow' target='_blank' href=\""+f+'">',"</a>","<a id='stp-licenseStatus-remindMeLater' href='#'>","</a>","<a id='stp-licenseStatus-remindMeNever' href='#'>","</a>");c+="<span class ='aui-icon icon-warning'></span>\n</div>"}else{c+=AJS.format("Your {0} maintenance expires in {1} days. For continued access to support and updates, {2}renew your maintenance{3}. {4}Remind me later{5} or {6}never remind me again{7}.",e,d,"<a id='stp-licenseStatus-renewNow' target='_blank' href=\""+f+'">',"</a>","<a id='stp-licenseStatus-remindMeLater' href='#'>","</a>","<a id='stp-licenseStatus-remindMeNever' href='#'>","</a>");c+="<span class ='aui-icon icon-warning'></span>\n</div>"}b(c).prependTo(document.body);AJS.$("#stp-licenseStatus-remindMeNever").click(a.remindMeNever);AJS.$("#stp-licenseStatus-remindMeLater").click(function(g){g.preventDefault();a.remindMeLater()});AJS.$("#stp-licenseStatus-renewNow").click(function(g){a.remindMeLater()})}};AJS.$(document).ready(function(){var c=AJS.$("meta[name='stp-license-days-to-expiry']").attr("content")||-1;if((AJS.$("meta[name='stp-license-is-admin']").attr("content")==="true")&&(c<30&&c>0)){b("#stp-licenseStatus-banner").length||a.createBanner()}})})(AJS.$);;
;/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:rotp-menu', location = 'appswitcher/appswitcher.soy' */
// This file was automatically generated from appswitcher.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace navlinks.templates.appswitcher.
 */

if (typeof navlinks == 'undefined') { var navlinks = {}; }
if (typeof navlinks.templates == 'undefined') { navlinks.templates = {}; }
if (typeof navlinks.templates.appswitcher == 'undefined') { navlinks.templates.appswitcher = {}; }


navlinks.templates.appswitcher.linkSection = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.list.length > 0) {
    output += '<div class="aui-nav-heading sidebar-section-header">' + soy.$$escapeHtml(opt_data.title) + '</div><ul class="aui-nav nav-links">';
    var linkList8 = opt_data.list;
    var linkListLen8 = linkList8.length;
    for (var linkIndex8 = 0; linkIndex8 < linkListLen8; linkIndex8++) {
      var linkData8 = linkList8[linkIndex8];
      output += navlinks.templates.appswitcher.applicationsItem(linkData8);
    }
    output += '</ul>';
  }
  return output;
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.linkSection.soyTemplateName = 'navlinks.templates.appswitcher.linkSection';
}


navlinks.templates.appswitcher.applicationsItem = function(opt_data, opt_ignored) {
  return '<li class="nav-link"><a href="' + soy.$$escapeHtml(opt_data.link) + '" ' + ((opt_data.self) ? 'class="checked"' : '') + ' title="' + soy.$$escapeHtml(opt_data.link) + '"><span class="nav-link-label">' + soy.$$escapeHtml(opt_data.label) + '</span></a></li>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.applicationsItem.soyTemplateName = 'navlinks.templates.appswitcher.applicationsItem';
}


navlinks.templates.appswitcher.shortcutsItem = function(opt_data, opt_ignored) {
  return '<li class="nav-link"><a href="' + soy.$$escapeHtml(opt_data.link) + '" ' + ((opt_data.self) ? 'class="checked"' : '') + ' title="' + soy.$$escapeHtml(opt_data.link) + '"><span class="nav-link-label">' + soy.$$escapeHtml(opt_data.label) + '</span>' + ((opt_data.showDescription && opt_data.description) ? '<span class="nav-link-description">' + soy.$$escapeHtml(opt_data.description) + '</span>' : '') + '</a></li>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.shortcutsItem.soyTemplateName = 'navlinks.templates.appswitcher.shortcutsItem';
}


navlinks.templates.appswitcher.error = function(opt_data, opt_ignored) {
  return '<div class="app-switcher-error">' + soy.$$filterNoAutoescape("Something went wrong, please \x3cspan class\x3d\x22app-switcher-retry\x22\x3etry again\x3c/span\x3e.") + '</div>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.error.soyTemplateName = 'navlinks.templates.appswitcher.error';
}


navlinks.templates.appswitcher.sidebarContents = function(opt_data, opt_ignored) {
  return '<div class="aui-page-panel-nav"><nav class="aui-navgroup aui-navgroup-vertical"><div class="app-switcher-section app-switcher-applications"><div class="aui-nav-heading">' + soy.$$escapeHtml("Application Links") + '</div><div class="app-switcher-loading">' + soy.$$filterNoAutoescape("Loading\x26hellip;") + '</div></div><div class="app-switcher-section app-switcher-shortcuts"><div class="aui-nav-heading">' + soy.$$escapeHtml("Shortcuts") + '</div><div class="app-switcher-loading">' + soy.$$filterNoAutoescape("Loading\x26hellip;") + '</div></div></nav></div>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.sidebarContents.soyTemplateName = 'navlinks.templates.appswitcher.sidebarContents';
}


navlinks.templates.appswitcher.trigger = function(opt_data, opt_ignored) {
  return '<span class="aui-icon aui-icon-small aui-iconfont-appswitcher">' + soy.$$escapeHtml("Linked Applications") + '</span>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.trigger.soyTemplateName = 'navlinks.templates.appswitcher.trigger';
}


navlinks.templates.appswitcher.projectHeaderSection = function(opt_data, opt_ignored) {
  return '<div class="app-switcher-title">' + aui.avatar.avatar({size: 'large', avatarImageUrl: opt_data.avatarUrl, isProject: true, title: opt_data.name}) + '<div class="sidebar-project-name">' + soy.$$escapeHtml(opt_data.name) + '</div></div>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.projectHeaderSection.soyTemplateName = 'navlinks.templates.appswitcher.projectHeaderSection';
}


navlinks.templates.appswitcher.cogDropdown = function(opt_data, opt_ignored) {
  var output = '';
  var dropdownList__soy74 = '' + navlinks.templates.appswitcher.dropdownList({list: opt_data.links});
  output += aui.dropdown2.dropdown2({menu: {id: opt_data.id, content: dropdownList__soy74, extraClasses: 'aui-style-default sidebar-customize-section'}, trigger: {showIcon: false, content: '<span class="aui-icon aui-icon-small aui-iconfont-configure"></span>', container: '#app-switcher'}});
  return output;
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.cogDropdown.soyTemplateName = 'navlinks.templates.appswitcher.cogDropdown';
}


navlinks.templates.appswitcher.dropdownList = function(opt_data, opt_ignored) {
  var output = '<ul class="sidebar-admin-links">';
  var linkList82 = opt_data.list;
  var linkListLen82 = linkList82.length;
  for (var linkIndex82 = 0; linkIndex82 < linkListLen82; linkIndex82++) {
    var linkData82 = linkList82[linkIndex82];
    output += '<li class="nav-link"><a href="' + soy.$$escapeHtml(linkData82.href) + '" title="' + soy.$$escapeHtml(linkData82.title) + '"><span class="nav-link-label">' + soy.$$escapeHtml(linkData82.label) + '</span></a></li>';
  }
  output += '</ul>';
  return output;
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.dropdownList.soyTemplateName = 'navlinks.templates.appswitcher.dropdownList';
}


navlinks.templates.appswitcher.switcher = function(opt_data, opt_ignored) {
  var output = '';
  if (true) {
    if (AJS.DarkFeatures.isEnabled('rotp.sidebar')) {
      var sidebarContents__soy97 = '' + navlinks.templates.appswitcher.sidebarContents(null);
      var triggerContent__soy99 = '' + navlinks.templates.appswitcher.trigger(null);
      output += navlinks.templates.appswitcher.sidebar({sidebar: {id: 'app-switcher', content: sidebarContents__soy97}, trigger: {showIcon: false, content: triggerContent__soy99}}) + '<script>\n                (function (NL) {\n                    var initialise = function () {\n                        new NL.SideBar({\n                            sidebarContents: \'#app-switcher\'\n                        });\n                    };\n                    if (NL.SideBar) {\n                        initialise();\n                    } else {\n                        NL.onInit = initialise;\n                    }\n                }(window.NL = (window.NL || {})));\n                window.NL.isUserAdmin = ' + soy.$$escapeHtml(false) + '<\/script>';
    } else {
      output += navlinks.templates.appswitcher_old.switcher(null);
    }
  }
  return output;
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.switcher.soyTemplateName = 'navlinks.templates.appswitcher.switcher';
}


navlinks.templates.appswitcher.sidebar = function(opt_data, opt_ignored) {
  return '<a href="' + soy.$$escapeHtml(opt_data.sidebar.id) + '" class="sidebar-trigger app-switcher-trigger" aria-owns="' + soy.$$escapeHtml(opt_data.sidebar.id) + '" aria-haspopup="true">' + soy.$$filterNoAutoescape(opt_data.trigger.content) + '</a><div id=' + soy.$$escapeHtml(opt_data.sidebar.id) + ' class="app-switcher-sidebar aui-style-default sidebar-offscreen">' + soy.$$filterNoAutoescape(opt_data.sidebar.content) + '</div>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher.sidebar.soyTemplateName = 'navlinks.templates.appswitcher.sidebar';
}
;
;/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:rotp-menu', location = 'appswitcher/appswitcher.js' */
(function(c,a){a.SideBar=function(d){var e=this;this.$sidebar=null;d=c.extend({sidebarContents:null},d);this.getLinks=function(){return c.ajax({url:AJS.contextPath()+"/rest/menu/latest/appswitcher",cache:false,dataType:"json"}).done(this.updateAppLinks).fail(this.showAppSwitcherError)};this.populateProjectHeader=function(g,f){e.getSidebar().find(".app-switcher-shortcuts .aui-nav-heading").after(navlinks.templates.appswitcher.projectHeaderSection({avatarUrl:f,name:g}))};this.getProjectData=function(){var f=c(".project-shortcut-dialog-trigger"),g=f.data("key"),h=f.data("entity-type");if(f.size()==0||!g||!h){c(".app-switcher-shortcuts").remove();return}var j,i;i=c.ajax({url:AJS.contextPath()+"/rest/project-shortcuts/1.0/local/"+g,cache:false,data:{entityType:h},dataType:"json"});j=c.ajax({url:AJS.contextPath()+"/rest/project-shortcuts/1.0/remote/"+g,cache:false,data:{entityType:h},dataType:"json"});c.when(i,j).then(function(l,k){e.updateProjectShortcuts(l,k,{key:g,entityType:h,name:f.data("name"),avatarUrl:f.find("img").prop("src")})},e.showProjectShortcutsError)};this.getSidebar=function(){if(!this.$sidebar){this.$sidebar=c(d.sidebarContents)}return this.$sidebar};this.addApplicationsCog=function(){c(".app-switcher-applications .aui-nav-heading").before(navlinks.templates.appswitcher.cogDropdown({id:"sidebar-applications-admin-dropdown",links:[{href:AJS.contextPath()+"/plugins/servlet/customize-application-navigator",label:"Customize navigator",title:"Add new entries, hide existing or restrict who sees what"},{href:AJS.contextPath()+"/plugins/servlet/applinks/listApplicationLinks",label:"Manage application links",title:"Link to more Atlassian applications"}]}))};this.addProjectShortcutsCog=function(f,h){var g=[{href:AJS.contextPath()+"/plugins/servlet/custom-content-links-admin?entityKey="+f,label:"Customize shortcuts",title:""}];if(e.entityMappings[h]){g.push({href:e.generateEntityLinksUrl(f,e.entityMappings[h]),label:"Manage product links",title:""})}e.getSidebar().find(".app-switcher-shortcuts .aui-nav-heading").before(navlinks.templates.appswitcher.cogDropdown({id:"sidebar-project-shortcuts-admin-dropdown",links:g}))};this.updateAppLinks=function(f){c(function(){e.getSidebar().find(".app-switcher-applications").html(navlinks.templates.appswitcher.linkSection({title:"Application Links",list:f}));if(a.isUserAdmin){e.addApplicationsCog()}e.bindAnalyticsHandlers(e.getSidebar(),f)})};this.updateProjectShortcuts=function(i,g,h){var j=i[0].shortcuts,f=g[0].shortcuts;e.getSidebar().find(".app-switcher-shortcuts").html(navlinks.templates.appswitcher.linkSection({title:"Shortcuts",list:j.concat(f)}));if(a.isUserAdmin){e.addProjectShortcutsCog(h.key,h.entityType)}e.populateProjectHeader(h.name,h.avatarUrl);e.bindAnalyticsHandlers(e.getSidebar(),data)};this.entityMappings={"confluence.space":"com.atlassian.applinks.api.application.confluence.ConfluenceSpaceEntityType","jira.project":"com.atlassian.applinks.api.application.jira.JiraProjectEntityType","bamboo.project":"com.atlassian.applinks.api.application.bamboo.BambooProjectEntityType","stash.project":"com.atlassian.applinks.api.application.stash.StashProjectEntityType"};this.generateEntityLinksUrl=function(f,g){if(g===e.entityMappings["confluence.space"]){return AJS.contextPath()+"/spaces/listentitylinks.action?typeId="+g+"&key="+f}else{return AJS.contextPath()+"/plugins/servlet/applinks/listEntityLinks/"+g+"/"+f}};this.showAppSwitcherError=function(){c(function(){var f=e.getSidebar();f.find(".app-switcher-applications .app-switcher-loading").replaceWith(navlinks.templates.appswitcher.error());f.off(".appswitcher").on("click.appswitcher",".app-switcher-retry",c.proxy(e.retryLoading,e))})};this.showProjectShortcutsError=function(){c(function(){var f=e.getSidebar();f.find(".app-switcher-shortcuts .app-switcher-loading").replaceWith(navlinks.templates.appswitcher.error());f.off(".appswitcher").on("click.appswitcher",".app-switcher-retry",c.proxy(e.retryLoading,e))})};this.retryLoading=function(f){this.getSidebar().html(navlinks.templates.appswitcher.sidebarContents());this.getLinks();this.getProjectData();f&&f.stopPropagation()};this.bindAnalyticsHandlers=function(f,g){};this.getLinks();c(this.getProjectData);this.toggleSidebar=function(h){var i=e.getSidebar(),g=c("body"),f=c(window.document);if(!g.hasClass("app-switcher-open")){var k=c("#header");i.css("left",-i.width());i.parent("body").length||i.appendTo("body");b({data:i});i.animate({left:0},300);function j(l){var n=l.target&&c(l.target),m=l.keyCode;if(l.originalEvent===h.originalEvent){return}if(n&&!m&&!(n.closest(i).length||n.closest(k).length)&&h.which==1&&!(l.shiftKey||l.ctrlKey||l.metaKey)){e.toggleSidebar()}else{if(m===27){e.toggleSidebar()}}}f.on("click.appSwitcher",j);f.on("keydown.appSwitcher",j);f.on("scroll.appSwitcher",i,b)}else{f.off(".appSwitcher")}g.toggleClass("app-switcher-open")};c("#header").on("click",".app-switcher-trigger",this.toggleSidebar)};function b(f){var d=c(document).scrollTop(),g=c("#header"),e=(g.height()+g.offset().top)-d;if(e>=0){f.data.css({top:e,position:"fixed"})}else{f.data.css({top:0,left:0,position:"fixed"})}}if(a.onInit){a.onInit()}}(jQuery,window.NL=(window.NL||{})));;
;/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:rotp-menu', location = 'appswitcher/appswitcher_old.js' */
(function(e,c){c.AppSwitcher=function(f){var g=AJS.contextPath()+"/plugins/servlet/customize-application-navigator";var h=this;this.$dropdown=null;f=e.extend({dropdownContents:null},f);this.getLinks=function(){return e.ajax({url:AJS.contextPath()+"/rest/menu/latest/appswitcher",cache:false,dataType:"json"}).done(this.updateDropdown).fail(this.showError)};this.getDropdown=function(){if(!this.$dropdown){this.$dropdown=e(f.dropdownContents)}return this.$dropdown};this.updateDropdown=function(i){e(function(){h.getDropdown().html(navlinks.templates.appswitcher_old.applications({apps:i,showAdminLink:c.environment.isUserAdmin,adminLink:g}));h.bindAnalyticsHandlers(h.getDropdown(),i);if(window.NL.environment.isAppSuggestionAvailable){h.handleSuggestionApps(i)}})};this.bindAnalyticsHandlers=function(i,j){};this.handleSuggestionApps=function(k){var l=_.map(k,function(m){return m.applicationType.toLowerCase()});$suggestionApps=e("<div id='app-switcher-suggestion-apps' class='aui-dropdown2-section'/>");$suggestionApps.html(navlinks.templates.appswitcher_old.suggestionApps);var j=$suggestionApps.find(".suggestion-apps");var i=false;_.each(a,function(m){if(!_.contains(l,m.appName)){i=true;j.append(navlinks.templates.appswitcher_old.suggestionApp({appName:m.appName,appDesc:m.appDesc}))}});if(!i){return}e("#app-switcher").append($suggestionApps);e(".app-discovery-suggestion-app").click(function(){AJS.trigger("analytics",{name:"appswitcher.discovery.user.select."+e(this).find("a").attr("id").toLowerCase()});window.open(e(this).find("a").attr("title"),"_blank")});e(".app-discovery-suggestion-app").hover(function(){e(this).find("a").removeClass("active").removeClass("aui-dropdown2-active")});e(".app-discovery-cancel-button").click(function(){AJS.trigger("analytics",{name:"appswitcher.discovery.nothanks.button.click"});d(b,"true");$suggestionApps.remove()})};this.showError=function(){e(function(){h.getDropdown().html(navlinks.templates.appswitcher_old.error()).off(".appswitcher").on("click.appswitcher",".app-switcher-retry",e.proxy(h.retryLoading,h))})};this.retryLoading=function(i){this.getDropdown().html(navlinks.templates.appswitcher_old.loading());this.getLinks();i&&i.stopPropagation()};this.getLinks()};var b="key-no-thanks";var a=[{appName:"jira",appDesc:"Issue & Project Tracking Software"},{appName:"confluence",appDesc:"Collaboration and content sharing"},{appName:"bamboo",appDesc:"Continuous integration"}];var d=function(f,g){e.ajax({url:AJS.contextPath()+"/rest/menu/latest/userdata/",type:"PUT",contentType:"application/json",data:JSON.stringify({key:f,value:g})})};if(c.onInit){c.onInit()}}(jQuery,window.NL=(window.NL||{})));;
;/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:rotp-menu', location = 'appswitcher/appswitcher_old.soy' */
// This file was automatically generated from appswitcher_old.soy.
// Please don't edit this file by hand.

/**
 * @fileoverview Templates in namespace navlinks.templates.appswitcher_old.
 */

if (typeof navlinks == 'undefined') { var navlinks = {}; }
if (typeof navlinks.templates == 'undefined') { navlinks.templates = {}; }
if (typeof navlinks.templates.appswitcher_old == 'undefined') { navlinks.templates.appswitcher_old = {}; }


navlinks.templates.appswitcher_old.applications = function(opt_data, opt_ignored) {
  return '' + navlinks.templates.appswitcher_old.applicationsSection({list: opt_data.apps, listClass: 'nav-links', showDescription: opt_data.showDescription}) + ((opt_data.custom) ? navlinks.templates.appswitcher_old.applicationsSection({list: opt_data.custom, showDescription: opt_data.showDescription}) : '') + ((opt_data.showAdminLink) ? navlinks.templates.appswitcher_old.adminSection(opt_data) : '');
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher_old.applications.soyTemplateName = 'navlinks.templates.appswitcher_old.applications';
}


navlinks.templates.appswitcher_old.applicationsSection = function(opt_data, opt_ignored) {
  var output = '';
  if (opt_data.list.length > 0) {
    var param19 = '<ul' + ((opt_data.listClass) ? ' class="' + soy.$$escapeHtml(opt_data.listClass) + '"' : '') + '>';
    var linkList27 = opt_data.list;
    var linkListLen27 = linkList27.length;
    for (var linkIndex27 = 0; linkIndex27 < linkListLen27; linkIndex27++) {
      var linkData27 = linkList27[linkIndex27];
      param19 += navlinks.templates.appswitcher_old.applicationsItem(soy.$$augmentMap(linkData27, {showDescription: opt_data.showDescription}));
    }
    param19 += '</ul>';
    output += aui.dropdown2.section({content: param19});
  }
  return output;
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher_old.applicationsSection.soyTemplateName = 'navlinks.templates.appswitcher_old.applicationsSection';
}


navlinks.templates.appswitcher_old.applicationsItem = function(opt_data, opt_ignored) {
  return '<li class="nav-link' + ((opt_data.self) ? ' nav-link-local' : '') + '"><a href="' + soy.$$escapeHtml(opt_data.link) + '" class="aui-dropdown2-radio ' + ((opt_data.self) ? 'aui-dropdown2-checked' : '') + '" title="' + soy.$$escapeHtml(opt_data.link) + '"><span class="nav-link-label">' + soy.$$escapeHtml(opt_data.label) + '</span>' + ((opt_data.showDescription && opt_data.description) ? '<span class="nav-link-description">' + soy.$$escapeHtml(opt_data.description) + '</span>' : '') + '</a></li>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher_old.applicationsItem.soyTemplateName = 'navlinks.templates.appswitcher_old.applicationsItem';
}


navlinks.templates.appswitcher_old.adminSection = function(opt_data, opt_ignored) {
  return '' + aui.dropdown2.section({content: '<ul class="nav-links"><li><a class="nav-link-edit-wrapper" href="' + soy.$$escapeHtml(opt_data.adminLink) + '"><span class="nav-link-edit">' + soy.$$filterNoAutoescape("Configure\x26hellip;") + '</span></a></li></ul>'});
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher_old.adminSection.soyTemplateName = 'navlinks.templates.appswitcher_old.adminSection';
}


navlinks.templates.appswitcher_old.error = function(opt_data, opt_ignored) {
  return '<div class="app-switcher-error">' + soy.$$filterNoAutoescape("Something went wrong, please \x3cspan class\x3d\x22app-switcher-retry\x22\x3etry again\x3c/span\x3e.") + '</div>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher_old.error.soyTemplateName = 'navlinks.templates.appswitcher_old.error';
}


navlinks.templates.appswitcher_old.loading = function(opt_data, opt_ignored) {
  return '<div class="app-switcher-loading">' + soy.$$filterNoAutoescape("Loading\x26hellip;") + '</div>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher_old.loading.soyTemplateName = 'navlinks.templates.appswitcher_old.loading';
}


navlinks.templates.appswitcher_old.trigger = function(opt_data, opt_ignored) {
  return '<span class="aui-icon aui-icon-small aui-iconfont-appswitcher">' + soy.$$escapeHtml("Linked Applications") + '</span>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher_old.trigger.soyTemplateName = 'navlinks.templates.appswitcher_old.trigger';
}


navlinks.templates.appswitcher_old.switcher = function(opt_data, opt_ignored) {
  var output = '';
  if (true) {
    var loadingContent__soy81 = '' + navlinks.templates.appswitcher_old.loading(null);
    var triggerContent__soy83 = '' + navlinks.templates.appswitcher_old.trigger(null);
    output += aui.dropdown2.dropdown2({menu: {id: 'app-switcher', content: loadingContent__soy81, extraClasses: 'aui-style-default'}, trigger: {showIcon: false, content: triggerContent__soy83, extraClasses: 'app-switcher-trigger', extraAttributes: {href: '#app-switcher'}}}) + '<script>\n            (function (NL) {\n                var initialise = function () {\n                    // For some milestones of AUI, the atlassian soy namespace was renamed to aui. Handle that here by ensuring that window.atlassian is defined.\n                    window.atlassian = window.atlassian || window.aui;\n                    new NL.AppSwitcher({\n                        dropdownContents: \'#app-switcher\'\n                    });\n                };\n                if (NL.AppSwitcher) {\n                    initialise();\n                } else {\n                    NL.onInit = initialise;\n                }\n            }(window.NL = (window.NL || {})));\n            window.NL.environment = ' + soy.$$escapeHtml({}) + ';<\/script>';
  }
  return output;
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher_old.switcher.soyTemplateName = 'navlinks.templates.appswitcher_old.switcher';
}


navlinks.templates.appswitcher_old.suggestionApp = function(opt_data, opt_ignored) {
  return '<li class="app-discovery-suggestion-app"><a id="' + soy.$$escapeHtml(opt_data.appName) + '" href="#" class="app-discovery-link aui-icon-container app-discovery-' + soy.$$escapeHtml(opt_data.appName) + '-product-icon" title="https://www.atlassian.com/software/' + soy.$$escapeHtml(opt_data.appName) + '"/><div class="app-discovery-small">' + soy.$$escapeHtml(opt_data.appDesc) + '</div></li>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher_old.suggestionApp.soyTemplateName = 'navlinks.templates.appswitcher_old.suggestionApp';
}


navlinks.templates.appswitcher_old.suggestionApps = function(opt_data, opt_ignored) {
  return '<ul class=\'nav-links suggestion-apps\'><li><span class=\'app-discovery-suggest-title nav-link-label\'><h6>' + soy.$$escapeHtml("Try other Atlassian apps") + '</h6></span></li></ul><div class=\'buttons-container app-discovery-suggest-apps-buttons\'><div class=\'buttons\'><button class=\'aui-button aui-button-link app-discovery-cancel-button\' name=\'cancel\' accesskey=\'c\' href=\'#\'>' + soy.$$escapeHtml("Don\x27t show this again") + '</button></div></div>';
};
if (goog.DEBUG) {
  navlinks.templates.appswitcher_old.suggestionApps.soyTemplateName = 'navlinks.templates.appswitcher_old.suggestionApps';
}
;
;/* module-key = 'com.atlassian.plugins.atlassian-nav-links-plugin:rotp-menu', location = 'appswitcher/inline-dialog.js' */
(function(d){AJS.CustomInlineDialog=AJS.CustomInlineDialog||function(B,n,r,p){p=p||[];if(p.hasOwnProperty("getArrowAttributes")){getArrowAttributesDeprecationLogger()}if(p.hasOwnProperty("getArrowPath")){getArrowPathDeprecationLogger();if(p.hasOwnProperty("gravity")){getArrowPathWithGravityDeprecationLogger()}}if(p.hasOwnProperty("onTop")){onTopDeprecationLogger();if(p.onTop&&p.gravity===undefined){p.gravity="s"}}if(typeof n==="undefined"){n=String(Math.random()).replace(".","");if(d("#inline-dialog-"+n+", #arrow-"+n+", #inline-dialog-shim-"+n).length){throw"GENERATED_IDENTIFIER_NOT_UNIQUE"}}var z=d.extend(false,AJS.CustomInlineDialog.opts,p);if(z.gravity==="w"){z.offsetX=p.offsetX===undefined?10:p.offsetX;z.offsetY=p.offsetY===undefined?0:p.offsetY}var v=function(){return window.Raphael&&p&&(p.getArrowPath||p.getArrowAttributes)};var j;var q;var K;var u=false;var A=false;var I=false;var J;var x;var g=d('<div id="inline-dialog-'+n+'" class="aui-inline-dialog"><div class="aui-inline-dialog-contents contents"></div><div id="arrow-'+n+'" class="aui-inline-dialog-arrow arrow"></div></div>');var m=d("#arrow-"+n,g);var G=g.find(".contents");if(!v()){g.find(".aui-inline-dialog-arrow").addClass("aui-css-arrow")}if(!z.displayShadow){G.addClass("aui-inline-dialog-no-shadow")}if(z.autoWidth){G.addClass("aui-inline-dialog-auto-width")}else{G.css("width",z.width+"px")}G.mouseover(function(O){clearTimeout(q);g.unbind("mouseover")}).mouseout(function(){E()});var D=function(){if(!j){j={popup:g,hide:function(){E(0)},id:n,show:function(){y()},persistent:z.persistent?true:false,reset:function(){function S(U,T){U.css(T.popupCss);if(v()){if(T.gravity==="s"){T.arrowCss.top-=d.browser.msie?10:9}if(!U.arrowCanvas){U.arrowCanvas=Raphael("arrow-"+n,16,16)}var V=z.getArrowPath,W=d.isFunction(V)?V(T):V;U.arrowCanvas.path(W).attr(z.getArrowAttributes())}else{m.removeClass("aui-bottom-arrow aui-left-arrow aui-right-arrow");if(T.gravity==="s"&&!m.hasClass("aui-bottom-arrow")){m.addClass("aui-bottom-arrow")}else{if(T.gravity==="n"){}else{if(T.gravity==="w"){m.addClass("aui-left-arrow")}else{if(T.gravity==="e"){m.addClass("aui-right-arrow")}}}}}m.css(T.arrowCss)}var P=AJS.$(window).height();var Q=Math.round(P*0.75);g.children(".aui-inline-dialog-contents").css("max-height",Q);var O=z.calculatePositions(g,x,J,z);if(O.hasOwnProperty("displayAbove")){displayAboveDeprecationLogger();O.gravity=O.displayAbove?"s":"n"}S(g,O);g.fadeIn(z.fadeTime,function(){});if(d.browser.msie&&~~(d.browser.version)<10){var R=d("#inline-dialog-shim-"+n);if(!R.length){d(g).prepend(d('<iframe class = "inline-dialog-shim" id="inline-dialog-shim-'+n+'" frameBorder="0" src="javascript:false;"></iframe>'))}R.css({width:G.outerWidth(),height:G.outerHeight()})}}}}return j};var y=function(){if(g.is(":visible")){return}K=setTimeout(function(){if(!I||!A){return}z.addActiveClass&&d(B).addClass("active");u=true;if(!z.persistent){H()}AJS.CustomInlineDialog.current=D();d(document).trigger("showLayer",["inlineDialog",D()]);D().reset()},z.showDelay)};var E=function(O){if(typeof O=="undefined"&&z.persistent){return}A=false;if(u&&z.preHideCallback.call(g[0].popup)){O=(O==null)?z.hideDelay:O;clearTimeout(q);clearTimeout(K);if(O!=null){q=setTimeout(function(){l();z.addActiveClass&&d(B).removeClass("active");g.fadeOut(z.fadeTime,function(){z.hideCallback.call(g[0].popup)});if(g.arrowCanvas){g.arrowCanvas.remove();g.arrowCanvas=null}u=false;A=false;d(document).trigger("hideLayer",["inlineDialog",D()]);AJS.CustomInlineDialog.current=null;if(!z.cacheContent){I=false;w=false}},O)}}};var F=function(R,P){var O=d(P);z.upfrontCallback.call({popup:g,hide:function(){E(0)},id:n,show:function(){y()}});g.each(function(){if(typeof this.popup!="undefined"){this.popup.hide()}});if(z.closeOthers){d(".aui-inline-dialog").each(function(){!this.popup.persistent&&this.popup.hide()})}x={target:O};if(!R){J={x:O.offset().left,y:O.offset().top}}else{J={x:R.pageX,y:R.pageY}}if(!u){clearTimeout(K)}A=true;var Q=function(){w=false;I=true;z.initCallback.call({popup:g,hide:function(){E(0)},id:n,show:function(){y()}});y()};if(!w){w=true;if(d.isFunction(r)){r(G,P,Q)}else{d.get(r,function(T,S,U){G.html(z.responseHandler(T,S,U));I=true;z.initCallback.call({popup:g,hide:function(){E(0)},id:n,show:function(){y()}});y()})}}clearTimeout(q);if(!u){y()}return false};g[0].popup=D();var w=false;var t=false;var s=function(){if(!t){d(z.container).append(g);t=true}};var o=d(B);if(z.onHover){if(z.useLiveEvents){if(o.selector){d(document).on("mousemove",o.selector,function(O){s();F(O,this)}).on("mouseout",o.selector,function(){E()})}else{AJS.log("Warning: inline dialog trigger elements must have a jQuery selector when the useLiveEvents option is enabled.")}}else{o.mousemove(function(O){s();F(O,this)}).mouseout(function(){E()})}}else{if(!z.noBind){if(z.useLiveEvents){if(o.selector){d(document).on("click",o.selector,function(O){s();if(M()){g.hide()}else{F(O,this)}return false}).on("mouseout",o.selector,function(){E()})}else{AJS.log("Warning: inline dialog trigger elements must have a jQuery selector when the useLiveEvents option is enabled.")}}else{o.click(function(O){s();if(M()){g.hide()}else{F(O,this)}return false}).mouseout(function(){E()})}}}var M=function(){return u&&z.closeOnTriggerClick};var H=function(){k();f()};var l=function(){C();N()};var i=false;var h=n+".inline-dialog-check";var k=function(){if(!i){d("body").bind("click."+h,function(P){var O=d(P.target);if(O.closest("#inline-dialog-"+n+" .contents").length===0){E(0)}});i=true}};var C=function(){if(i){d("body").unbind("click."+h)}i=false};var L=function(O){if(O.keyCode===27){E(0)}};var f=function(){d(document).on("keydown",L)};var N=function(){d(document).off("keydown",L)};g.show=function(P,O){if(P){P.stopPropagation()}s();if(z.noBind&&!(B&&B.length)){F(P,O===undefined?P.target:O)}else{F(P,B)}};g.hide=function(){E(0)};g.refresh=function(){if(u){D().reset()}};g.getOptions=function(){return z};return g};function c(g){var f=d(g);var h=d.extend({left:0,top:0},f.offset());return{left:h.left,top:h.top,width:f.outerWidth(),height:f.outerHeight()}}function b(h,j,t,f){var m=AJS.$.isFunction(f.offsetX)?f.offsetX(h,j,t,f):f.offsetX;var l=AJS.$.isFunction(f.offsetY)?f.offsetY(h,j,t,f):f.offsetY;var q=AJS.$.isFunction(f.arrowOffsetX)?f.arrowOffsetX(h,j,t,f):f.arrowOffsetX;var p=AJS.$.isFunction(f.arrowOffsetY)?f.arrowOffsetY(h,j,t,f):f.arrowOffsetY;var s=f.container.toLowerCase()!=="body";var g=AJS.$(f.container);var o=s?AJS.$(f.container).parent():AJS.$(window);var r=s?g.offset():{left:0,top:0};var k=s?o.offset():{left:0,top:0};var i=j.target;var u=i.offset();var n=i[0].getBBox&&i[0].getBBox();return{screenPadding:10,arrowMargin:5,window:{top:k.top,left:k.left,scrollTop:o.scrollTop(),scrollLeft:o.scrollLeft(),width:o.width(),height:o.height()},scrollContainer:{width:g.width(),height:g.height()},trigger:{top:u.top-r.top,left:u.left-r.left,width:n?n.width:i.outerWidth(),height:n?n.height:i.outerHeight()},dialog:{width:h.width(),height:h.height(),offset:{top:l,left:m}},arrow:{height:h.find(".arrow").outerHeight(),offset:{top:p,left:q}}}}function e(f,p,G,r){var n=b(f,p,G,r);var j=n.screenPadding;var k=n.window;var t=n.trigger;var D=n.dialog;var i=n.arrow;var z=n.scrollContainer;var E={top:t.top-k.scrollTop,left:t.left-k.scrollLeft};var A=Math.floor(t.height/2);var v=Math.floor(D.height/2);var u=Math.floor(i.height/2);var C=E.left-D.offset.left-j;var H=z.width-E.left-t.width-D.offset.left-j;var B=C>=D.width;var h=H>=D.width;var l=!h&&B?"e":"w";var o=E.top+A-u;var q=k.height-o-i.height;j=Math.min(j,o-n.arrowMargin);j=Math.min(j,q-n.arrowMargin);var g=E.top+A;var x=Math.max(g-j,0);var F=Math.max(k.height-g-j,0);var y=v-D.offset.top>x;var m=v+D.offset.top>F;var w;var s;if(y){w={top:k.scrollTop+j,left:l==="w"?t.left+t.width+D.offset.left:t.left-D.width-D.offset.left};s={top:(t.top+A)-(w.top+u)}}else{if(m){w={top:k.scrollTop+k.height-D.height-j,left:l==="w"?t.left+t.width+D.offset.left:t.left-D.width-D.offset.left};s={top:(t.top+A)-(w.top+u)}}else{w={top:t.top+A-v+D.offset.top,left:l==="w"?t.left+t.width+D.offset.left:t.left-D.width-D.offset.left};s={top:v-u+i.offset.top}}}return{gravity:l,popupCss:w,arrowCss:s}}function a(g,o,z,s){var x=AJS.$.isFunction(s.offsetX)?s.offsetX(g,o,z,s):s.offsetX;var v=AJS.$.isFunction(s.offsetY)?s.offsetY(g,o,z,s):s.offsetY;var m=AJS.$.isFunction(s.arrowOffsetX)?s.arrowOffsetX(g,o,z,s):s.arrowOffsetX;var l=AJS.$.isFunction(s.arrowOffsetY)?s.arrowOffsetY(g,o,z,s):s.arrowOffsetY;var f=c(window);var p=c(o.target);var y=c(g);var j=c(g.find(".aui-inline-dialog-arrow"));var i=p.left+p.width/2;var u=(window.pageYOffset||document.documentElement.scrollTop)+f.height;var k=10;y.top=p.top+p.height+~~v;y.left=p.left+~~x;var r=f.width-(y.left+y.width+k);j.left=i-y.left+~~m;j.top=-(j.height/2);var n=p.top>y.height;var h=(y.top+y.height)<u;var q=(!h&&n)||(n&&s.gravity==="s");if(q){y.top=p.top-y.height-(j.height/2);j.top=y.height}if(s.isRelativeToMouse){if(r<0){y.right=k;y.left="auto";j.left=z.x-(f.width-y.width)}else{y.left=z.x-20;j.left=z.x-y.left}}else{if(r<0){y.right=k;y.left="auto";var w=f.width-y.right;var t=w-y.width;j.right="auto";j.left=i-t-j.width/2}else{if(y.width<=p.width/2){j.left=y.width/2;y.left=i-y.width/2}}}return{gravity:q?"s":"n",displayAbove:q,popupCss:{left:y.left,top:y.top,right:y.right},arrowCss:{left:j.left,top:j.top,right:j.right}}}AJS.CustomInlineDialog.opts={onTop:false,responseHandler:function(g,f,h){return g},closeOthers:true,isRelativeToMouse:false,addActiveClass:true,onHover:false,useLiveEvents:false,noBind:false,fadeTime:100,persistent:false,hideDelay:10000,showDelay:0,width:300,offsetX:0,offsetY:10,arrowOffsetX:0,arrowOffsetY:0,container:"body",cacheContent:true,displayShadow:true,autoWidth:false,gravity:"n",closeOnTriggerClick:false,preHideCallback:function(){return true},hideCallback:function(){},initCallback:function(){},upfrontCallback:function(){},calculatePositions:function(f,i,j,h){h=h||{};var g=h.gravity==="w"?e:a;return g(f,i,j,h)},getArrowPath:function(f){if(f.gravity==="s"){return"M0,8L8,16,16,8"}else{return"M0,8L8,0,16,8"}},getArrowAttributes:function(){return{fill:"#fff",stroke:"#ccc"}}}})(AJS.$);;
